"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[6906],{27049:function(e,n,t){t.d(n,{r6:function(){return c},QF:function(){return h},RI:function(){return y}});var a=t(98363),r=t(80184),i=t(50678),d=t(7633),o=t(56540),s=t(3224),l=t(49274),u=t(30236),c=function(){var e=(0,s.j1)("canvasSize"),n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,r.jsx)(l.fX,{type:"popover",position:1,icon:(0,r.jsx)(o.Z,{}),label:v,content:(0,r.jsxs)("div",{className:"canvas-resizer",children:[(0,r.jsx)("div",{className:"canvas-resizer__label",children:v}),(0,r.jsx)(d.Z,{className:"canvas-resizer__slider",value:null!==t&&void 0!==t?t:100,min:150,max:500,step:50,onChange:a})]})})},v=(0,r.jsx)(u.vN,{pt:"Tamanho das Artes",en:"Art Size"}),h=function(e){var n,t,a=e.drawing,i=void 0===a?"":a,d=e.className,o=void 0===d?"":d,s=e.width,l=void 0===s?250:s,u=e.height,c=e.strokeWidth,v=void 0===c?"medium":c,h=e.viewBox,f=void 0===h?"0 0 500 500":h,g=JSON.parse(i),m=g.map((function(e){for(var n="",t=0,a=1;a<e.length;t+=2,a+=2)e[t+2]&&e[a+2]&&(n+="M".concat(e[t],",").concat(e[a]," L").concat(e[t+2],",").concat(e[a+2]));return n})),p=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[v])&&void 0!==n?n:5;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:f,overflow:"hidden",className:o,style:{width:"".concat(l,"px"),height:"".concat(u||l,"px")},children:[(0,r.jsx)("defs",{}),m.map((function(e,n){return(0,r.jsx)("path",{d:e,fill:"none",stroke:"#000",strokeWidth:p,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"},"".concat(i,"-").concat(n))}))]})},f=t(31303),g=t(72791),m=t(63733),p=t(71046),x=t(2641),w=t(78030),j=t(82622),y=function(e){var n,t,d=e.lines,o=e.setLines,s=e.className,l=void 0===s?"":s,c=e.showControls,v=void 0!==c&&c,h=e.strokeWidth,y=void 0===h?"medium":h,b=e.width,Z=void 0===b?500:b,I=e.height,L=e.willReadFrequently,D=void 0!==L&&L,C=(0,g.useState)([]),k=(0,i.Z)(C,2),S=k[0],N=k[1],E=(0,g.useRef)(!1),M=function(){E.current=!0},P=function(){E.current=!1,N([])},T=function(e){M();var n=e.target.getStage().getPointerPosition();o([].concat((0,f.Z)(d),[[Math.round(n.x),Math.round(n.y)]]))},_=function(e){var n=e.target.getStage().getPointerPosition(),t=Math.round(n.x),a=Math.round(n.y),r=d[d.length-1];r=r.concat([t+.1,a+.1]),d.splice(d.length-1,1,r),o(d.concat())},R=function(e){T(e)},q=function(e){if(E.current){var n=e.target.getStage().getPointerPosition(),t=d[d.length-1];t=t.concat([Math.round(n.x),Math.round(n.y)]),d.splice(d.length-1,1,t),o(d.concat())}},F=function(e){E.current&&(P(),_(e))},z=function(){P()},A=function(){M()},O=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[y])&&void 0!==n?n:5;return(0,r.jsxs)(p.Z,{direction:"vertical",align:"center",children:[(0,r.jsx)(a.Hf,{width:Z,height:I||Z,onMouseDown:R,onMousemove:q,onMouseup:F,onTouchStart:R,onTouchMove:q,onTouchEnd:F,onMouseLeave:function(e){E.current&&(_(e),window.document.addEventListener("mouseup",z),window.document.addEventListener("touchEnd",z),window.document.addEventListener("mousedown",A),window.document.addEventListener("touchStart",A))},onMouseEnter:function(e){E.current&&T(e),window.document.removeEventListener("mouseup",z),window.document.removeEventListener("touchEnd",z),window.document.removeEventListener("mousedown",A),window.document.removeEventListener("touchStart",A)},className:(0,m.Z)("drawing-canvas",l),style:{width:"".concat(Z,"px"),height:"".concat(I||Z,"px")},willReadFrequently:D,id:"drawing-canvas",children:(0,r.jsx)(a.mh,{children:d.map((function(e,n){return(0,r.jsx)(a.x1,{points:e,stroke:"#222222",strokeWidth:O,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},n)}))})}),v&&(0,r.jsxs)(p.Z,{children:[(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(d),n=(0,f.Z)(S),t=e.pop();t&&(n.push(t),o(e),N(n))},disabled:0===d.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Desfazer",en:"Undo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(d),n=(0,f.Z)(S),t=n.pop();t&&(e.push(t),o(e),N(n))},disabled:0===S.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Refazer",en:"Redo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){return o([])},disabled:0===d.length,children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(u.vN,{pt:"Apagar",en:"Clear"})]})]})]})}},73713:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(66509),r=t(83990),i=t(6583),d=t(2641),o=t(34812),s=t(18489),l=t(50678),u=t(33032),c=t(84322),v=t.n(c),h=t(72791),f=t(12481),g=t(1563),m=t(76807),p=t(10829),x=t(96403),w=t(73418),j=t(12661),y=t(763),b=t(72426),Z=t.n(b);function I(e,n){return(0,u.Z)(v().mark((function t(){var a,r,i;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("".concat(e,"/").concat(n)),r=(0,f.JU)(g.RZ,"".concat(e,"/").concat(n)),t.next=4,(0,f.QT)(r);case 4:return i=t.sent,t.abrupt("return",null!==(a=i.data())&&void 0!==a?a:{});case 6:case"end":return t.stop()}}),t)})))}function L(){var e,n,t,a,r,i,d,o,u=j.Z.useApp().notification,c=(0,m.a)({queryKey:["data","suffixCounts"],queryFn:I("data","suffixCounts"),enabled:!0,onSuccess:function(){u.info({message:"Data Suffix Counts loaded",placement:"bottomLeft"})},onError:function(){u.error({message:"Error loading suffix counts",placement:"bottomLeft"})}});console.log(c.data);var v=function(e,n){var t=j.Z.useApp().notification,a=(0,h.useMemo)((function(){return new Array(n).fill(0).map((function(n,a){return{queryKey:["data","drawingsPT".concat(a+1)],queryFn:I("data","drawingsPT".concat(a+1)),enabled:e,onSuccess:function(){t.info({message:"Data Drawings PT".concat(a+1," loaded"),placement:"bottomLeft"})}}}))}),[n]);return(0,p.h)({queries:a})}(Boolean(null===(e=c.data)||void 0===e?void 0:e.drawingsPT),null!==(n=null===(t=c.data)||void 0===t?void 0:t.drawingsPT)&&void 0!==n?n:0),f=v.some((function(e){return e.isLoading}));console.log(null===v||void 0===v||null===(a=v[0])||void 0===a?void 0:a.data);var g=(0,m.a)({queryKey:["daily","history"],queryFn:I("daily","history"),enabled:!0,onSuccess:function(){u.info({message:"Data Daily History loaded",placement:"bottomLeft"})},onError:function(){u.error({message:"Error loading daily history",placement:"bottomLeft"})}}),x=(0,h.useMemo)((function(){var e,n;return null!==(e=null===(n=g.data)||void 0===n?void 0:n.used)&&void 0!==e?e:[]}),[null===(r=g.data)||void 0===r?void 0:r.used]),w=null!==(i=null===(d=g.data)||void 0===d?void 0:d.latestDate)&&void 0!==i?i:"2023-10-31";console.log({usedCards:x,latestDate:w});var b=(0,h.useMemo)((function(){var e=(null!==v&&void 0!==v?v:[]).reduce((function(e,n){var t,a=null!==(t=n.data)&&void 0!==t?t:{};return Object.entries(a).forEach((function(n){var t=(0,l.Z)(n,2),a=t[0],r=t[1];if(r.drawing.trim().length<10)return console.log("Empty drawing",r.cardId),e;void 0===e[r.cardId]?e[r.cardId]={id:r.cardId,type:"arte-ruim",language:"pt",cardId:r.cardId,text:r.text,drawings:[r.drawing],number:0,dataIds:[a]}:(e[r.cardId].drawings.push(r.drawing),e[r.cardId].dataIds.push(a))})),e}),{});console.log({totalCardCount:Object.keys(e).length});var n=Object.values(e).filter((function(e){var n;return e.drawings.length>1&&e.cardId&&!(null!==(n=e.cardId)&&void 0!==n&&n.includes("--"))}));console.log({shortlistCardCount:n.length});var t=Object.values(n).filter((function(e){return!x.includes(e.cardId)})),a=(0,y.sampleSize)((0,y.shuffle)(t),45),r=w;return a.map((function(e,n){var t,a=(t=r,Z()(t,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD"));return r=a,(0,s.Z)((0,s.Z)({},e),{},{id:a,number:n+1})}))}),[v,x,w]),L=(0,h.useMemo)((function(){var e=(null!==v&&void 0!==v?v:[]).reduce((function(e,n){var t,a=null!==(t=n.data)&&void 0!==t?t:{};return Object.entries(a).forEach((function(n){var t=(0,l.Z)(n,2),a=t[0],r=t[1];if(r.drawing.trim().length<10)return console.log("Empty drawing",r.cardId),e;void 0===e[r.cardId]?e[r.cardId]={id:r.cardId,type:"arte-ruim",language:"pt",cardId:r.cardId,text:r.text,drawings:[r.drawing],number:0,dataIds:[a]}:(e[r.cardId].drawings.push(r.drawing),e[r.cardId].dataIds.push(a))})),e}),{});return Object.values(e).filter((function(e){var n;return null===(n=e.cardId)||void 0===n?void 0:n.includes("--")}))}),[v]);return{isLoading:c.isLoading||f||g.isLoading,entries:b,latestDate:null===(o=g.data)||void 0===o?void 0:o.latestDate,round5sample:L}}var D=t(27049),C=t(80184);function k(){var e,n,t=L(),a=[{title:"Id",dataIndex:"id",key:"id"},{title:"CardId",dataIndex:"cardId",key:"cardId"},{title:"Text",dataIndex:"text",key:"text",render:function(e){return(0,C.jsx)("div",{children:e.split("").map((function(e,n){return n<2||" "===e?e:"\u23f9"})).join("")})}},{title:"Count",dataIndex:"drawings",key:"count",render:function(e){return(0,C.jsx)("div",{children:e.length})}},{title:"Drawings",dataIndex:"drawings",key:"drawings",render:function(e){return(0,C.jsx)("div",{children:e.map((function(e){return(0,C.jsx)(D.QF,{drawing:e,width:100,height:100,className:"border round-corners margin"},e)}))})}}],r=function(){var e=j.Z.useApp().notification,n=(0,x.NL)(),t=(0,h.useState)(!1),a=(0,l.Z)(t,2),r=a[0],i=a[1],d=(0,w.D)(function(){var e=(0,u.Z)(v().mark((function e(n){var t,a,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){var n=(0,f.JU)(g.RZ,"daily/".concat(e.id));return(0,f.pl)(n,e)})),a=(0,f.JU)(g.RZ,"daily/history"),r={latestDate:n[n.length-1].id,used:n.map((function(e){return e.cardId}))},(0,f.pl)(a,r),e.abrupt("return",Promise.all(t));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(){e.info({message:"Data saved",placement:"bottomLeft"}),n.invalidateQueries(["daily","history"]),i(!1)},onError:function(){e.error({message:"Error saving data",placement:"bottomLeft"})}});return{isDirty:r,setIsDirty:i,save:d.mutateAsync,isLoading:d.isLoading}}(),o=r.save,s=r.isLoading;return(0,C.jsxs)("div",{children:[t.isLoading&&(0,C.jsx)("div",{children:"Loading..."}),(0,C.jsxs)("h1",{children:["Total: ",t.entries.length]}),(0,C.jsx)(i.Z,{columns:a,dataSource:null!==(e=t.entries)&&void 0!==e?e:[]}),(0,C.jsx)(d.ZP,{onClick:function(){return o(t.entries)},loading:s,disabled:0===(null!==(n=t.entries)&&void 0!==n?n:[]).length,children:"Save"})]})}var S=function(){return(0,a.Z)("Daily Setup | Dev | Tarde Divertida"),(0,C.jsxs)(r.Z,{className:"dev-layout",children:[(0,C.jsx)(o.B,{title:"Daily Setup"}),(0,C.jsxs)(r.Z.Content,{className:"dev-content",children:[(0,C.jsxs)("ul",{children:[(0,C.jsx)("li",{children:"Get history/useCards and latestDate"}),(0,C.jsx)("li",{children:"Get data/suffixCounts"}),(0,C.jsx)("li",{children:"Load all /data/drawingsPT"}),(0,C.jsx)("li",{children:"Filter cards with more than 2 entries"}),(0,C.jsx)("li",{children:"Filter cards that were already used"}),(0,C.jsx)("li",{children:"Shuffle and build daily entries"})]}),(0,C.jsx)(k,{})]})]})}},34812:function(e,n,t){t.d(n,{B:function(){return s}});var a=t(71046),r=t(64248),i=t(57689),d=t(80184);function o(){var e=(0,i.TH)().pathname,n=(0,i.s0)(),t=[{label:"Home",value:"/",disabled:"/"===e},{label:"Hub",value:"/hub",disabled:"/hub"===e},{label:"Icons",value:"/dev/icons",disabled:"/dev/icons"===e},{label:"Colors",value:"/dev/colors",disabled:"/dev/colors"===e},{label:"Sprites",value:"/dev/sprites",disabled:"/dev/sprites"===e},{label:"Resources",value:"/dev/resources",disabled:"/dev/resources"===e},{label:"Playground",value:"/dev/playground",disabled:"/dev/playground"===e},{label:"Daily Setup",value:"/dev/dailysetup",disabled:"/dev/dailysetup"===e},{label:"Showcase",value:"/showcase",disabled:"/showcase"===e}];return(0,d.jsx)(r.Z,{options:t,defaultValue:e,onChange:function(e){n(e)}})}function s(e){var n=e.title,t=e.subTitle,r=e.extra;return(0,d.jsx)("header",{className:"dev-header",children:(0,d.jsxs)("div",{className:"dev-header__heading",children:[(0,d.jsxs)("div",{className:"dev-header__left",children:[(0,d.jsxs)("span",{className:"dev-header__title",children:[n," "]}),(0,d.jsx)("span",{className:"dev-header__subtitle",children:t})]}),(0,d.jsxs)("div",{className:"dev-header__extra",children:[(0,d.jsx)(a.Z,{className:"dev-header__extra-space",wrap:!0,children:r}),(0,d.jsx)(o,{})]})]})})}}}]);
//# sourceMappingURL=page-dev-daily-setup.a31d4c2e.chunk.js.map