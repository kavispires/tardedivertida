"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[5869],{49274:function(e,n,t){t.d(n,{fX:function(){return h},hn:function(){return g},F6:function(){return w}});var a=t(50678),r=t(18489),i=t(83738),o=t(63733),d=t(72791),s=t(20263),c=t(69228),u=t(2641),l=t(80184),v=["type","position","content","className","open"];function h(e){var n=e.type,t=e.position,a=e.content,d=e.className,s=e.open,u=(0,i.Z)(e,v);return(0,l.jsx)("div",{className:(0,o.Z)("fixed-menu-button","fixed-menu-button--".concat(t),d),children:"popover"===n?(0,l.jsx)(c.Z,{placement:"bottomLeft",content:a,trigger:"click",open:s,children:(0,l.jsx)(f,(0,r.Z)({},u))}):(0,l.jsx)(f,(0,r.Z)({},u))})}function f(e){var n=e.icon,t=e.label,i=e.showLabel,o=e.onClick,c=e.buttonProps,v=(0,d.useState)(i),h=(0,a.Z)(v,2),f=h[0],m=h[1],p=Boolean(t);return(0,s.Z)((function(){m(i)})),(0,l.jsx)(u.ZP,(0,r.Z)((0,r.Z)({shape:p&&f?"round":"circle",size:"middle",onMouseOver:function(){return m(!0)},onMouseLeave:function(){return m(null!==i&&void 0!==i&&i)},onClick:o||void 0,icon:n,ghost:!0,type:"primary"},c),{},{children:f&&p&&(0,l.jsx)("span",{className:"fixed-menu-button__label",children:t})}))}var m=t(95090),p=["duration","children","onExpire","type","onClick","hideTimer"];function g(e){var n=e.duration,t=void 0===n?10:n,a=e.children,d=e.onExpire,s=e.type,c=e.onClick,v=e.hideTimer,h=void 0!==v&&v,f=(0,i.Z)(e,p),g=(0,m.a)({duration:t,autoStart:!0,onExpire:d,disabled:h}).timeLeft,x="timed-button__time";return(0,l.jsxs)(u.ZP,(0,r.Z)((0,r.Z)({},f),{},{type:s,onClick:null!==c&&void 0!==c?c:d,children:[a,Boolean(a&&!h)&&" ",!h&&(0,l.jsx)("span",{className:(0,o.Z)(x,"".concat(x,"--").concat(s)),children:g})]}))}var x=["children","active","activeClass","className","hoverType"],w=function(e){var n=e.children,t=e.active,a=void 0!==t&&t,d=e.activeClass,s=void 0===d?"":d,c=e.className,u=void 0===c?"":c,v=e.hoverType,h=void 0===v?"scale":v,f=(0,i.Z)(e,x);return(0,l.jsx)("button",(0,r.Z)((0,r.Z)({className:(0,o.Z)("transparent-button","transparent-button--".concat(h),a&&(s||"transparent-button--active"),u)},f),{},{children:n}))}},27049:function(e,n,t){t.d(n,{r6:function(){return l},QF:function(){return h},RI:function(){return y}});var a=t(23025),r=t(80184),i=t(50678),o=t(7633),d=t(56540),s=t(3224),c=t(49274),u=t(82741),l=function(){var e=(0,s.j1)("canvasSize"),n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,r.jsx)(c.fX,{type:"popover",position:1,icon:(0,r.jsx)(d.Z,{}),label:v,content:(0,r.jsxs)("div",{className:"canvas-resizer",children:[(0,r.jsx)("div",{className:"canvas-resizer__label",children:v}),(0,r.jsx)(o.Z,{className:"canvas-resizer__slider",value:null!==t&&void 0!==t?t:100,min:150,max:500,step:50,onChange:a})]})})},v=(0,r.jsx)(u.vN,{pt:"Tamanho das Artes",en:"Art Size"}),h=function(e){var n,t,a=e.drawing,i=void 0===a?"":a,o=e.className,d=void 0===o?"":o,s=e.width,c=void 0===s?250:s,u=e.height,l=e.strokeWidth,v=void 0===l?"medium":l,h=e.viewBox,f=void 0===h?"0 0 500 500":h,m=JSON.parse(i),p=m.map((function(e){for(var n="",t=0,a=1;a<e.length;t+=2,a+=2)e[t+2]&&e[a+2]&&(n+="M".concat(e[t],",").concat(e[a]," L").concat(e[t+2],",").concat(e[a+2]));return n})),g=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[v])&&void 0!==n?n:5;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:f,overflow:"hidden",className:d,style:{width:"".concat(c,"px"),height:"".concat(u||c,"px")},children:[(0,r.jsx)("defs",{}),p.map((function(e,n){return(0,r.jsx)("path",{d:e,fill:"none",stroke:"#000",strokeWidth:g,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"},"".concat(i,"-").concat(n))}))]})},f=t(31303),m=t(72791),p=t(63733),g=t(31773),x=t(2641),w=t(78030),b=t(82622),y=function(e){var n,t,o=e.lines,d=e.setLines,s=e.className,c=void 0===s?"":s,l=e.showControls,v=void 0!==l&&l,h=e.strokeWidth,y=void 0===h?"medium":h,j=e.width,Z=void 0===j?500:j,I=e.height,L=e.willReadFrequently,C=void 0!==L&&L,k=(0,m.useState)([]),N=(0,i.Z)(k,2),E=N[0],D=N[1],M=(0,m.useRef)(!1),S=function(){M.current=!0},T=function(){M.current=!1,D([])},P=function(e){S();var n=e.target.getStage().getPointerPosition();d([].concat((0,f.Z)(o),[[Math.round(n.x),Math.round(n.y)]]))},_=function(e){var n=e.target.getStage().getPointerPosition(),t=Math.round(n.x),a=Math.round(n.y),r=o[o.length-1];r=r.concat([t+.1,a+.1]),o.splice(o.length-1,1,r),d(o.concat())},R=function(e){P(e)},F=function(e){if(M.current){var n=e.target.getStage().getPointerPosition(),t=o[o.length-1];t=t.concat([Math.round(n.x),Math.round(n.y)]),o.splice(o.length-1,1,t),d(o.concat())}},z=function(e){M.current&&(T(),_(e))},O=function(){T()},q=function(){S()},A=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[y])&&void 0!==n?n:5;return(0,r.jsxs)(g.Z,{direction:"vertical",align:"center",children:[(0,r.jsx)(a.Hf,{width:Z,height:I||Z,onMouseDown:R,onMousemove:F,onMouseup:z,onTouchStart:R,onTouchMove:F,onTouchEnd:z,onMouseLeave:function(e){M.current&&(_(e),window.document.addEventListener("mouseup",O),window.document.addEventListener("touchEnd",O),window.document.addEventListener("mousedown",q),window.document.addEventListener("touchStart",q))},onMouseEnter:function(e){M.current&&P(e),window.document.removeEventListener("mouseup",O),window.document.removeEventListener("touchEnd",O),window.document.removeEventListener("mousedown",q),window.document.removeEventListener("touchStart",q)},className:(0,p.Z)("drawing-canvas",c),style:{width:"".concat(Z,"px"),height:"".concat(I||Z,"px")},willReadFrequently:C,id:"drawing-canvas",children:(0,r.jsx)(a.mh,{children:o.map((function(e,n){return(0,r.jsx)(a.x1,{points:e,stroke:"#222222",strokeWidth:A,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},n)}))})}),v&&(0,r.jsxs)(g.Z,{children:[(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(o),n=(0,f.Z)(E),t=e.pop();t&&(n.push(t),d(e),D(n))},disabled:0===o.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Desfazer",en:"Undo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(o),n=(0,f.Z)(E),t=n.pop();t&&(e.push(t),d(e),D(n))},disabled:0===E.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Refazer",en:"Redo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){return d([])},disabled:0===o.length,children:[(0,r.jsx)(b.Z,{}),(0,r.jsx)(u.vN,{pt:"Apagar",en:"Clear"})]})]})]})}},95090:function(e,n,t){t.d(n,{a:function(){return s}});var a=t(18489),r=t(83738),i=t(30722),o=t(81238),d=["duration","onExpire","disabled"];function s(e){var n=e.duration,t=e.onExpire,s=e.disabled,c=void 0!==s&&s,u=(0,r.Z)(e,d),l=(0,i.useTimer)((0,a.Z)({expiryTimestamp:(0,o.rv)(n),onExpire:c?void 0:t},u)),v=60*l.minutes+l.seconds;return(0,a.Z)((0,a.Z)({},l),{},{timeLeft:v})}},73713:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var a=t(66509),r=t(83990),i=t(757),o=t(2641),d=t(34812),s=t(18489),c=t(50678),u=t(33032),l=t(84322),v=t.n(l),h=t(72791),f=t(12481),m=t(72913),p=t(91933),g=t(12661),x=t(763),w=t(72426),b=t.n(w);function y(e,n){return(0,u.Z)(v().mark((function t(){var a,r,i;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("".concat(e,"/").concat(n)),r=(0,f.JU)(m.RZ,"".concat(e,"/").concat(n)),t.next=4,(0,f.QT)(r);case 4:return i=t.sent,t.abrupt("return",null!==(a=i.data())&&void 0!==a?a:{});case 6:case"end":return t.stop()}}),t)})))}function j(){var e,n,t,a,r,i,o,d,u=g.Z.useApp().notification,l=(0,p.useQuery)({queryKey:["data","suffixCounts"],queryFn:y("data","suffixCounts"),enabled:!0,onSuccess:function(){u.info({message:"Data Suffix Counts loaded",placement:"bottomLeft"})},onError:function(){u.error({message:"Error loading suffix counts",placement:"bottomLeft"})}});console.log(l.data);var v=function(e,n){var t=g.Z.useApp().notification,a=(0,h.useMemo)((function(){return new Array(n).fill(0).map((function(n,a){return{queryKey:["data","drawingsPT".concat(a+1)],queryFn:y("data","drawingsPT".concat(a+1)),enabled:e,onSuccess:function(){t.info({message:"Data Drawings PT".concat(a+1," loaded"),placement:"bottomLeft"})}}}))}),[n]);return(0,p.useQueries)(a)}(Boolean(null===(e=l.data)||void 0===e?void 0:e.drawingsPT),null!==(n=null===(t=l.data)||void 0===t?void 0:t.drawingsPT)&&void 0!==n?n:0),f=v.some((function(e){return e.isLoading}));console.log(null===v||void 0===v||null===(a=v[0])||void 0===a?void 0:a.data);var m=(0,p.useQuery)({queryKey:["daily","history"],queryFn:y("daily","history"),enabled:!0,onSuccess:function(){u.info({message:"Data Daily History loaded",placement:"bottomLeft"})},onError:function(){u.error({message:"Error loading daily history",placement:"bottomLeft"})}}),w=(0,h.useMemo)((function(){var e,n;return null!==(e=null===(n=m.data)||void 0===n?void 0:n.used)&&void 0!==e?e:[]}),[null===(r=m.data)||void 0===r?void 0:r.used]),j=null!==(i=null===(o=m.data)||void 0===o?void 0:o.latestDate)&&void 0!==i?i:"2023-10-31";console.log({usedCards:w,latestDate:j});var Z=(0,h.useMemo)((function(){var e=(null!==v&&void 0!==v?v:[]).reduce((function(e,n){var t,a=null!==(t=n.data)&&void 0!==t?t:{};return Object.entries(a).forEach((function(n){var t=(0,c.Z)(n,2),a=t[0],r=t[1];if(r.drawing.trim().length<10)return console.log("Empty drawing",r.cardId),e;void 0===e[r.cardId]?e[r.cardId]={id:r.cardId,type:"arte-ruim",language:"pt",cardId:r.cardId,text:r.text,drawings:[r.drawing],number:0,dataIds:[a]}:(e[r.cardId].drawings.push(r.drawing),e[r.cardId].dataIds.push(a))})),e}),{});console.log({totalCardCount:Object.keys(e).length});var n=Object.values(e).filter((function(e){var n;return e.drawings.length>1&&e.cardId&&!(null!==(n=e.cardId)&&void 0!==n&&n.includes("--"))}));console.log({shortlistCardCount:n.length});var t=Object.values(n).filter((function(e){return!w.includes(e.cardId)})),a=(0,x.shuffle)(t),r=j;return a.map((function(e,n){var t,a=(t=r,b()(t,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD"));return r=a,(0,s.Z)((0,s.Z)({},e),{},{id:a,number:n+1})}))}),[v,w,j]),I=(0,h.useMemo)((function(){var e=(null!==v&&void 0!==v?v:[]).reduce((function(e,n){var t,a=null!==(t=n.data)&&void 0!==t?t:{};return Object.entries(a).forEach((function(n){var t=(0,c.Z)(n,2),a=t[0],r=t[1];if(r.drawing.trim().length<10)return console.log("Empty drawing",r.cardId),e;void 0===e[r.cardId]?e[r.cardId]={id:r.cardId,type:"arte-ruim",language:"pt",cardId:r.cardId,text:r.text,drawings:[r.drawing],number:0,dataIds:[a]}:(e[r.cardId].drawings.push(r.drawing),e[r.cardId].dataIds.push(a))})),e}),{});return Object.values(e).filter((function(e){var n;return null===(n=e.cardId)||void 0===n?void 0:n.includes("--")}))}),[v]);return{isLoading:l.isLoading||f||m.isLoading,entries:Z,latestDate:null===(d=m.data)||void 0===d?void 0:d.latestDate,round5sample:I}}var Z=t(27049),I=t(80184);function L(){var e,n=j(),t=[{title:"Id",dataIndex:"id",key:"id"},{title:"CardId",dataIndex:"cardId",key:"cardId"},{title:"Text",dataIndex:"text",key:"text",render:function(e){return(0,I.jsx)("div",{children:e.split("").map((function(e,n){return n<2||" "===e?e:"\u23f9"})).join("")})}},{title:"Count",dataIndex:"drawings",key:"count",render:function(e){return(0,I.jsx)("div",{children:e.length})}},{title:"Drawings",dataIndex:"drawings",key:"drawings",render:function(e){return(0,I.jsx)("div",{children:e.map((function(e){return(0,I.jsx)(Z.QF,{drawing:e,width:100,height:100,className:"border round-corners margin"},e)}))})}}],a=function(){var e=g.Z.useApp().notification,n=(0,p.useQueryClient)(),t=(0,h.useState)(!1),a=(0,c.Z)(t,2),r=a[0],i=a[1],o=(0,p.useMutation)(function(){var e=(0,u.Z)(v().mark((function e(n){var t,a,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){var n=(0,f.JU)(m.RZ,"daily/".concat(e.id));return(0,f.pl)(n,e)})),a=(0,f.JU)(m.RZ,"daily/history"),r={latestDate:n[n.length-1].id,used:n.map((function(e){return e.cardId}))},(0,f.pl)(a,r),e.abrupt("return",Promise.all(t));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(){e.info({message:"Data saved",placement:"bottomLeft"}),n.invalidateQueries(["daily","history"]),i(!1)},onError:function(){e.error({message:"Error saving data",placement:"bottomLeft"})}});return{isDirty:r,setIsDirty:i,save:o.mutateAsync,isLoading:o.isLoading}}(),r=a.save,d=a.isLoading;return(0,I.jsxs)("div",{children:[n.isLoading&&(0,I.jsx)("div",{children:"Loading..."}),(0,I.jsxs)("h1",{children:["Total: ",n.entries.length]}),(0,I.jsx)(i.Z,{columns:t,dataSource:null!==(e=n.entries)&&void 0!==e?e:[]}),(0,I.jsx)(o.ZP,{onClick:function(){return r(n.entries)},loading:d,children:"Save"})]})}var C=function(){return(0,a.Z)("Daily Setup | Dev | Tarde Divertida"),(0,I.jsxs)(r.Z,{className:"dev-layout",children:[(0,I.jsx)(d.B,{title:"Daily Setup"}),(0,I.jsxs)(r.Z.Content,{className:"dev-content",children:[(0,I.jsxs)("ul",{children:[(0,I.jsx)("li",{children:"Get history/useCards and latestDate"}),(0,I.jsx)("li",{children:"Get data/suffixCounts"}),(0,I.jsx)("li",{children:"Load all /data/drawingsPT"}),(0,I.jsx)("li",{children:"Filter cards with more than 2 entries"}),(0,I.jsx)("li",{children:"Filter cards that were already used"}),(0,I.jsx)("li",{children:"Shuffle and build daily entries"})]}),(0,I.jsx)(L,{})]})]})}},34812:function(e,n,t){t.d(n,{B:function(){return s}});var a=t(31773),r=t(64248),i=t(57689),o=t(80184);function d(){var e=(0,i.TH)().pathname,n=(0,i.s0)(),t=[{label:"Home",value:"/",disabled:"/"===e},{label:"Hub",value:"/hub",disabled:"/hub"===e},{label:"Icons",value:"/dev/icons",disabled:"/dev/icons"===e},{label:"Colors",value:"/dev/colors",disabled:"/dev/colors"===e},{label:"Sprites",value:"/dev/sprites",disabled:"/dev/sprites"===e},{label:"Resources",value:"/dev/resources",disabled:"/dev/resources"===e},{label:"Playground",value:"/dev/playground",disabled:"/dev/playground"===e},{label:"Daily Setup",value:"/dev/dailysetup",disabled:"/dev/dailysetup"===e},{label:"Showcase",value:"/showcase",disabled:"/showcase"===e}];return(0,o.jsx)(r.Z,{options:t,defaultValue:e,onChange:function(e){n(e)}})}function s(e){var n=e.title,t=e.subTitle,r=e.extra;return(0,o.jsx)("header",{className:"dev-header",children:(0,o.jsxs)("div",{className:"dev-header__heading",children:[(0,o.jsxs)("div",{className:"dev-header__left",children:[(0,o.jsxs)("span",{className:"dev-header__title",children:[n," "]}),(0,o.jsx)("span",{className:"dev-header__subtitle",children:t})]}),(0,o.jsxs)("div",{className:"dev-header__extra",children:[(0,o.jsx)(a.Z,{className:"dev-header__extra-space",wrap:!0,children:r}),(0,o.jsx)(d,{})]})]})})}},52234:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(87462),r=t(72791),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},o=t(44279),d=function(e,n){return r.createElement(o.Z,(0,a.Z)({},e,{ref:n,icon:i}))};var s=r.forwardRef(d)}}]);
//# sourceMappingURL=page-dev-dailysetup.bfefc206.chunk.js.map