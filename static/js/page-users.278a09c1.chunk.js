"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[4437],{53056:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O});var n=i(37055),s=i(17559),r=i(18900),a=i(771),l=i.n(a),o=i(63248),u=i(93747),d=i(47097),c=i(55472),v=i(53536),h=i(65043),A=i(76822),f=i(68536),p=i(2962),m=i(32378),g=i(10898),y=i(42949),x=i(66950),j=i(13795),b=i(44219),k=(i(36196),i(70579)),w={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};const O=function(){var e,t,i,a,O,S,E;(0,A.A)("Users - Tarde Divertida");var C=f.A.useApp(),M=C.message,N=C.notification,T=(0,o.jE)(),U=(0,h.useState)(w),P=(0,r.A)(U,2),W=P[0],K=P[1],D=(0,h.useState)(w),L=(0,r.A)(D,2),G=L[0],J=L[1],R=(0,u.I)({queryKey:["users"],queryFn:function(){var e=(0,s.A)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.GG)((0,c.P)((0,c.rJ)(b.kA,"users"),(0,c._M)("isGuest","!=",!0)));case 2:return t=e.sent,i=[],t.forEach((function(e){return i.push(e.data())})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),q=(0,d.n)({mutationKey:["users"],mutationFn:function(){var e=(0,s.A)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.ZU.run((0,n.A)({action:j.jf.UPDATE_USER_DB},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){M.success("User updated"),T.invalidateQueries({queryKey:["users"]})},onError:function(e){N.error({message:"Error",description:e.message})}}),I=null!==(e=R.data)&&void 0!==e?e:[],_=I.map((function(e){var t;return(0,k.jsxs)(p.A.Option,{value:e.id,children:[(0,k.jsx)("strong",{children:null===e||void 0===e||null===(t=e.names)||void 0===t?void 0:t[0]}),": ",e.id]},e.id)})),F=(0,k.jsx)(p.A,{onChange:function(e){var t;K(null!==(t=I.find((function(t){return t.id===e})))&&void 0!==t?t:w)},style:{minWidth:300},children:_}),Q=(0,k.jsx)(p.A,{onChange:function(e){var t;J(null!==(t=I.find((function(t){return t.id===e})))&&void 0!==t?t:w)},style:{minWidth:300},children:_}),z=(0,h.useMemo)((function(){return(0,v.merge)((0,v.cloneDeep)(null!==W&&void 0!==W?W:{}),(0,v.cloneDeep)(null!==G&&void 0!==G?G:{}))}),[W,G]);return console.log(I),(0,k.jsxs)("div",{children:[(0,k.jsx)(m.A.Title,{children:"Users"}),R.isLoading&&(0,k.jsx)(m.A.Paragraph,{children:"Loading..."}),(0,k.jsxs)(g.A,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[(0,k.jsxs)(g.A,{direction:"vertical",children:[(0,k.jsx)(m.A.Title,{level:2,children:"Origin"}),(0,k.jsx)(g.A,{className:"margin",children:F}),(0,k.jsx)(m.A.Paragraph,{children:null!==(t=null===W||void 0===W||null===(i=W.names)||void 0===i?void 0:i.join(", "))&&void 0!==t?t:"No user selected"}),(0,k.jsx)(y.A.TextArea,{value:JSON.stringify(null!==W&&void 0!==W?W:{},null,2),rows:20,cols:50,className:"margin"})]}),(0,k.jsxs)(g.A,{direction:"vertical",children:[(0,k.jsx)(m.A.Title,{level:2,children:"Destination"}),(0,k.jsx)(g.A,{className:"margin",children:Q}),(0,k.jsx)(m.A.Paragraph,{children:null!==(a=null===G||void 0===G||null===(O=G.names)||void 0===O?void 0:O.join(", "))&&void 0!==a?a:"No user selected"}),(0,k.jsx)(y.A.TextArea,{value:JSON.stringify(null!==G&&void 0!==G?G:{},null,2),rows:20,cols:50,className:"margin"})]})]}),(0,k.jsxs)(g.A,{direction:"vertical",children:[(0,k.jsx)(m.A.Title,{level:2,children:"Merge"}),(0,k.jsx)(m.A.Paragraph,{children:null!==(S=null===z||void 0===z||null===(E=z.names)||void 0===E?void 0:E.join(", "))&&void 0!==S?S:"No user selected"}),(0,k.jsx)(y.A.TextArea,{value:JSON.stringify(null!==z&&void 0!==z?z:{},null,2),rows:20,cols:50,className:"margin"}),(0,k.jsxs)(x.Ay,{type:"primary",size:"large",loading:q.isPending,onClick:function(){return q.mutate(z)},disabled:!(null!==z&&void 0!==z&&z.id),children:['Merge Users "',W.id,'" into "',G.id,'"']})]})]})}},36196:()=>{},47097:(e,t,i)=>{i.d(t,{n:()=>T});var n,s,r,a,l,o,u=i(37055),d=i(18900),c=i(65043),v=i(46721),h=i(4841),A=i(83581),f=i(50689),p=i(53674),m=i(14442),g=i(10249),y=i(54373),x=i(43783),j=i(19323),b=i(25239),k=i(11454),w=i(60329),O=i(99723),S=(n=new WeakMap,s=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakSet,o=new WeakSet,function(e){(0,f.A)(i,e);var t=(0,p.A)(i);function i(e,u){var d;return(0,v.A)(this,i),d=t.call(this),(0,m.A)((0,A.A)(d),o),(0,m.A)((0,A.A)(d),l),(0,g.A)((0,A.A)(d),n,{writable:!0,value:void 0}),(0,g.A)((0,A.A)(d),s,{writable:!0,value:void 0}),(0,g.A)((0,A.A)(d),r,{writable:!0,value:void 0}),(0,g.A)((0,A.A)(d),a,{writable:!0,value:void 0}),(0,j.A)((0,A.A)(d),n,e),d.setOptions(u),d.bindMethods(),(0,x.A)((0,A.A)(d),l,E).call((0,A.A)(d)),d}return(0,h.A)(i,[{key:"bindMethods",value:function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}},{key:"setOptions",value:function(e){var t,i=this.options;this.options=(0,y.A)(this,n).defaultMutationOptions(e),(0,O.f8)(this.options,i)||(0,y.A)(this,n).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,y.A)(this,r),observer:this}),null!==i&&void 0!==i&&i.mutationKey&&this.options.mutationKey&&(0,O.EN)(i.mutationKey)!==(0,O.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,y.A)(this,r))||void 0===t?void 0:t.state.status)&&(0,y.A)(this,r).setOptions(this.options)}},{key:"onUnsubscribe",value:function(){var e;this.hasListeners()||(null===(e=(0,y.A)(this,r))||void 0===e||e.removeObserver(this))}},{key:"onMutationUpdate",value:function(e){(0,x.A)(this,l,E).call(this),(0,x.A)(this,o,C).call(this,e)}},{key:"getCurrentResult",value:function(){return(0,y.A)(this,s)}},{key:"reset",value:function(){var e;null===(e=(0,y.A)(this,r))||void 0===e||e.removeObserver(this),(0,j.A)(this,r,void 0),(0,x.A)(this,l,E).call(this),(0,x.A)(this,o,C).call(this)}},{key:"mutate",value:function(e,t){var i;return(0,j.A)(this,a,t),null===(i=(0,y.A)(this,r))||void 0===i||i.removeObserver(this),(0,j.A)(this,r,(0,y.A)(this,n).getMutationCache().build((0,y.A)(this,n),this.options)),(0,y.A)(this,r).addObserver(this),(0,y.A)(this,r).execute(e)}}]),i}(w.Q));function E(){var e,t,i=null!==(e=null===(t=(0,y.A)(this,r))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,b.$)();(0,j.A)(this,s,(0,u.A)((0,u.A)({},i),{},{isPending:"pending"===i.status,isSuccess:"success"===i.status,isError:"error"===i.status,isIdle:"idle"===i.status,mutate:this.mutate,reset:this.reset}))}function C(e){var t=this;k.j.batch((function(){if((0,y.A)(t,a)&&t.hasListeners()){var i,n,r,l,o=(0,y.A)(t,s).variables,u=(0,y.A)(t,s).context;if("success"===(null===e||void 0===e?void 0:e.type))null===(i=(n=(0,y.A)(t,a)).onSuccess)||void 0===i||i.call(n,e.data,o,u),null===(r=(l=(0,y.A)(t,a)).onSettled)||void 0===r||r.call(l,e.data,null,o,u);else if("error"===(null===e||void 0===e?void 0:e.type)){var d,c,v,h;null===(d=(c=(0,y.A)(t,a)).onError)||void 0===d||d.call(c,e.error,o,u),null===(v=(h=(0,y.A)(t,a)).onSettled)||void 0===v||v.call(h,void 0,e.error,o,u)}}t.listeners.forEach((function(e){e((0,y.A)(t,s))}))}))}var M=i(63248),N=i(13247);function T(e,t){var i=(0,M.jE)(t),n=c.useState((function(){return new S(i,e)})),s=(0,d.A)(n,1)[0];c.useEffect((function(){s.setOptions(e)}),[s,e]);var r=c.useSyncExternalStore(c.useCallback((function(e){return s.subscribe(k.j.batchCalls(e))}),[s]),(function(){return s.getCurrentResult()}),(function(){return s.getCurrentResult()})),a=c.useCallback((function(e,t){s.mutate(e,t).catch(N.l)}),[s]);if(r.error&&(0,N.G)(s.options.throwOnError,[r.error]))throw r.error;return(0,u.A)((0,u.A)({},r),{},{mutate:a,mutateAsync:r.mutate})}}}]);
//# sourceMappingURL=page-users.278a09c1.chunk.js.map