"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[3029],{15907:function(e,n,r){r.r(n);var i=r(18489),s=r(33032),a=r(50678),l=r(84322),t=r.n(l),u=(r(76738),r(12661)),o=r(238),d=r(14078),c=r(71046),v=r(86005),h=r(2641),g=r(12481),f=r(763),m=r(72791),p=r(91933),x=r(66509),Z=r(53673),j=r(72913),y=r(80184),N={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};n.default=function(){var e,n,r,l,w,T,k;(0,x.Z)("Users - Tarde Divertida");var C=u.Z.useApp(),P=C.message,S=C.notification,D=(0,p.useQueryClient)(),O=(0,m.useState)(N),U=(0,a.Z)(O,2),b=U[0],A=U[1],E=(0,m.useState)(N),J=(0,a.Z)(E,2),L=J[0],M=J[1],Q=(0,p.useQuery)({queryKey:["users"],queryFn:function(){var e=(0,s.Z)(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.PL)((0,g.IO)((0,g.hJ)(j.RZ,"users"),(0,g.ar)("isGuest","!=",!0)));case 2:return n=e.sent,r=[],n.forEach((function(e){return r.push(e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),q=(0,p.useMutation)({mutationKey:["users"],mutationFn:function(){var e=(0,s.Z)(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z.Js.run((0,i.Z)({action:Z.s0.UPDATE_USER_DB},n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onSuccess:function(){P.success("User updated"),D.invalidateQueries(["users"])},onError:function(e){S.error({message:"Error",description:e.message})}}),F=null!==(e=Q.data)&&void 0!==e?e:[],I=F.map((function(e){var n;return(0,y.jsxs)(o.Z.Option,{value:e.id,children:[(0,y.jsx)("strong",{children:null===e||void 0===e||null===(n=e.names)||void 0===n?void 0:n[0]}),": ",e.id]},e.id)})),K=(0,y.jsx)(o.Z,{onChange:function(e){var n;A(null!==(n=F.find((function(n){return n.id===e})))&&void 0!==n?n:N)},style:{minWidth:300},children:I}),R=(0,y.jsx)(o.Z,{onChange:function(e){var n;M(null!==(n=F.find((function(n){return n.id===e})))&&void 0!==n?n:N)},style:{minWidth:300},children:I}),W=(0,m.useMemo)((function(){return(0,f.merge)((0,f.cloneDeep)(null!==b&&void 0!==b?b:{}),(0,f.cloneDeep)(null!==L&&void 0!==L?L:{}))}),[b,L]);return console.log(F),(0,y.jsxs)("div",{children:[(0,y.jsx)(d.Z.Title,{children:"Users"}),Q.isLoading&&(0,y.jsx)(d.Z.Paragraph,{children:"Loading..."}),(0,y.jsxs)(c.Z,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[(0,y.jsxs)(c.Z,{direction:"vertical",children:[(0,y.jsx)(d.Z.Title,{level:2,children:"Origin"}),(0,y.jsx)(c.Z,{className:"margin",children:K}),(0,y.jsx)(d.Z.Paragraph,{children:null!==(n=null===b||void 0===b||null===(r=b.names)||void 0===r?void 0:r.join(", "))&&void 0!==n?n:"No user selected"}),(0,y.jsx)(v.Z.TextArea,{value:JSON.stringify(null!==b&&void 0!==b?b:{},null,2),rows:20,cols:50,className:"margin"})]}),(0,y.jsxs)(c.Z,{direction:"vertical",children:[(0,y.jsx)(d.Z.Title,{level:2,children:"Destination"}),(0,y.jsx)(c.Z,{className:"margin",children:R}),(0,y.jsx)(d.Z.Paragraph,{children:null!==(l=null===L||void 0===L||null===(w=L.names)||void 0===w?void 0:w.join(", "))&&void 0!==l?l:"No user selected"}),(0,y.jsx)(v.Z.TextArea,{value:JSON.stringify(null!==L&&void 0!==L?L:{},null,2),rows:20,cols:50,className:"margin"})]})]}),(0,y.jsxs)(c.Z,{direction:"vertical",children:[(0,y.jsx)(d.Z.Title,{level:2,children:"Merge"}),(0,y.jsx)(d.Z.Paragraph,{children:null!==(T=null===W||void 0===W||null===(k=W.names)||void 0===k?void 0:k.join(", "))&&void 0!==T?T:"No user selected"}),(0,y.jsx)(v.Z.TextArea,{value:JSON.stringify(null!==W&&void 0!==W?W:{},null,2),rows:20,cols:50,className:"margin"}),(0,y.jsxs)(h.ZP,{type:"primary",size:"large",loading:q.isLoading,onClick:function(){return q.mutate(W)},disabled:!(null!==W&&void 0!==W&&W.id),children:['Merge Users "',b.id,'" into "',L.id,'"']})]})]})}},76738:function(){}}]);
//# sourceMappingURL=page-users.09a7f044.chunk.js.map