"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[4437],{53056:(e,n,r)=>{r.r(n),r.d(n,{default:()=>P});var i=r(37055),s=r(17559),a=r(18900),l=r(771),t=r.n(l),u=r(63248),d=r(93747),o=r(47097),c=r(55472),v=r(53536),g=r(65043),h=r(76822),m=r(68536),f=r(2962),A=r(32378),p=r(10898),x=r(42949),j=r(66950),y=r(13795),N=r(44219),w=r(56703),T=(r(36196),r(70579)),k={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};const P=function(){var e,n,r,l,P,S,U;(0,h.A)("Users - Tarde Divertida");var C=m.A.useApp(),D=C.message,E=C.notification,b=(0,u.jE)(),M=(0,g.useState)(k),O=(0,a.A)(M,2),J=O[0],q=O[1],G=(0,g.useState)(k),K=(0,a.A)(G,2),L=K[0],_=K[1],F=(0,d.I)({queryKey:["users"],queryFn:function(){var e=(0,s.A)(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.GG)((0,c.P)((0,c.rJ)(N.kA,"users"),(0,c._M)("isGuest","!=",!0)));case 2:return n=e.sent,r=[],n.forEach((function(e){return r.push(e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),I=(0,o.n)({mutationKey:["users"],mutationFn:function(){var e=(0,s.A)(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.ZU.run((0,i.A)({action:y.jf.UPDATE_USER_DB},n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onSuccess:function(){D.success("User updated"),b.invalidateQueries({queryKey:["users"]})},onError:function(e){E.error({message:"Error",description:e.message})}}),W=null!==(e=F.data)&&void 0!==e?e:[],z=W.map((function(e){var n;return(0,T.jsxs)(f.A.Option,{value:e.id,children:[(0,T.jsx)("strong",{children:null===e||void 0===e||null===(n=e.names)||void 0===n?void 0:n[0]}),": ",e.id]},e.id)})),B=(0,T.jsx)(f.A,{onChange:function(e){var n;q(null!==(n=W.find((function(n){return n.id===e})))&&void 0!==n?n:k)},style:{minWidth:300},children:z}),Q=(0,T.jsx)(f.A,{onChange:function(e){var n;_(null!==(n=W.find((function(n){return n.id===e})))&&void 0!==n?n:k)},style:{minWidth:300},children:z}),R=(0,g.useMemo)((function(){return(0,v.merge)((0,v.cloneDeep)(null!==J&&void 0!==J?J:{}),(0,v.cloneDeep)(null!==L&&void 0!==L?L:{}))}),[J,L]);return console.log(W),(0,T.jsxs)(w.M,{children:[(0,T.jsx)(A.A.Title,{children:"Users"}),F.isLoading&&(0,T.jsx)(A.A.Paragraph,{children:"Loading..."}),(0,T.jsxs)(p.A,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[(0,T.jsxs)(p.A,{direction:"vertical",children:[(0,T.jsx)(A.A.Title,{level:2,children:"Origin"}),(0,T.jsx)(p.A,{className:"margin",children:B}),(0,T.jsx)(A.A.Paragraph,{children:null!==(n=null===J||void 0===J||null===(r=J.names)||void 0===r?void 0:r.join(", "))&&void 0!==n?n:"No user selected"}),(0,T.jsx)(x.A.TextArea,{value:JSON.stringify(null!==J&&void 0!==J?J:{},null,2),rows:20,cols:50,className:"margin"})]}),(0,T.jsxs)(p.A,{direction:"vertical",children:[(0,T.jsx)(A.A.Title,{level:2,children:"Destination"}),(0,T.jsx)(p.A,{className:"margin",children:Q}),(0,T.jsx)(A.A.Paragraph,{children:null!==(l=null===L||void 0===L||null===(P=L.names)||void 0===P?void 0:P.join(", "))&&void 0!==l?l:"No user selected"}),(0,T.jsx)(x.A.TextArea,{value:JSON.stringify(null!==L&&void 0!==L?L:{},null,2),rows:20,cols:50,className:"margin"})]})]}),(0,T.jsxs)(p.A,{direction:"vertical",children:[(0,T.jsx)(A.A.Title,{level:2,children:"Merge"}),(0,T.jsx)(A.A.Paragraph,{children:null!==(S=null===R||void 0===R||null===(U=R.names)||void 0===U?void 0:U.join(", "))&&void 0!==S?S:"No user selected"}),(0,T.jsx)(x.A.TextArea,{value:JSON.stringify(null!==R&&void 0!==R?R:{},null,2),rows:20,cols:50,className:"margin"}),(0,T.jsxs)(j.Ay,{type:"primary",size:"large",loading:I.isPending,onClick:function(){return I.mutate(R)},disabled:!(null!==R&&void 0!==R&&R.id),children:['Merge Users "',J.id,'" into "',L.id,'"']})]})]})}},36196:()=>{}}]);
//# sourceMappingURL=page-users.92271d0a.chunk.js.map