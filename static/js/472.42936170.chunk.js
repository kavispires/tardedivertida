"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[472],{90472:function(e,n,a){a.d(n,{wg:function(){return K},OJ:function(){return G},lv:function(){return z},c3:function(){return U},In:function(){return m}});var r=a(1413),i=a(29439),t=a(44925),s=a(28182),l=a(83099),o=a(28955),c=a(81839),d=a(80184),u=["children","className"],m=function(e){var n=e.children,a=e.className,m=void 0===a?"":a,h=(0,t.Z)(e,u),p=(0,c.j1)("isAdmin"),x=(0,i.Z)(p,1)[0],f=(0,c.j1)("isAdminEnabled"),v=(0,i.Z)(f,1)[0];return x&&v?(0,d.jsxs)("fieldset",{className:(0,s.Z)("admin-only-container",m),children:[(0,d.jsxs)("legend",{className:"admin-only-container__legend",children:[(0,d.jsx)(o.Z,{})," Admin Controls"]}),(0,d.jsx)(l.Z,(0,r.Z)((0,r.Z)({},h),{},{children:n}))]}):(0,d.jsx)("span",{})},h=a(72791),p=a(87309),x=a(37083),f=a(54195),v=a(96038),j=a(2133),y=a(50410),Z=a(53673),b=a(76591),g=["label"],N=function(e){var n=e.label,a=(0,t.Z)(e,g);return(0,d.jsx)(p.Z,(0,r.Z)((0,r.Z)({icon:(0,d.jsx)(o.Z,{}),type:"primary",danger:!0,className:"full-width"},a),{},{children:n}))},C=a(4942),_=a(15861),A=a(87757),k=a.n(A),T=a(66261),E=a(50419),w=a(20005),P=a(47323),F=a(38243),O=a(25581),I=a(86005),R=function(e){switch(e.valueType){case"number":return(0,d.jsx)(T.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(F.Z,{})});case"boolean":return(0,d.jsx)(T.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(O.Z,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:!0})});case"nullish":return(0,d.jsx)(T.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(O.Z,{checkedChildren:"null",unCheckedChildren:"undefined",defaultChecked:!0})});default:return(0,d.jsx)(T.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(I.Z,{})})}},S=function(e){var n=e.isLoading,a=e.state,r=e.onPerformAdminAction,t=T.Z.useForm(),s=(0,i.Z)(t,1)[0],l=(0,h.useState)("string"),o=(0,i.Z)(l,2),c=o[0],u=o[1],m=Object.keys(a).map((function(e){return{label:e,value:e}})),x=function(){var e=(0,_.Z)(k().mark((function e(n){var a,i,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.value,e.prev=1,"number"===n.valueType&&(a=null!==(i=Number(n.value))&&void 0!==i?i:0),"nullish"===n.valueType&&(a=n.value?null:void 0),t=(0,C.Z)({},n.key,a),!window.confirm("Tem certeza que quer for\xe7ar o estado ".concat(JSON.stringify(t)))){e.next=10;break}return e.next=8,r({state:t,action:b.ND.FORCE_STATE_PROPERTY});case 8:s.resetFields(),u("string");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),E.ZP.error("Something went wrong",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsxs)(T.Z,{name:"basic",form:s,initialValues:{valueType:"string"},onFinish:x,children:[(0,d.jsx)("h3",{children:"Force Property"}),(0,d.jsx)(T.Z.Item,{label:"Key",name:"key",rules:[{required:!0}],children:(0,d.jsx)(w.Z,{options:m})}),(0,d.jsx)(T.Z.Item,{label:"Type",name:"valueType",children:(0,d.jsxs)(P.Z,{onChange:function(e){["boolean","nullish"].includes(e)&&s.setFieldsValue({value:!0}),"number"===e&&s.setFieldsValue({value:0}),"string"===e&&s.setFieldsValue({value:""}),u(e)},children:[(0,d.jsx)(P.Z.Option,{value:"string",children:"string"}),(0,d.jsx)(P.Z.Option,{value:"number",children:"number"}),(0,d.jsx)(P.Z.Option,{value:"boolean",children:"boolean"}),(0,d.jsx)(P.Z.Option,{value:"nullish",children:"nullish"})]})}),(0,d.jsx)(R,{valueType:c}),(0,d.jsx)(p.Z,{type:"primary",htmlType:"submit",disabled:n,danger:!0,children:"Submit"})]})},L=a(37557),M=a(8067);function V(e){var n=e.players,a=Object.values(n).reduce((function(e,n){return n.ready?e.readyPlayers.push(n.name):e.pendingPlayers.push(n.name),e}),{readyPlayers:[],pendingPlayers:[]}),r=a.readyPlayers,i=a.pendingPlayers;return(0,d.jsxs)("li",{className:"admin-players-ready-state",children:[(0,d.jsx)("h3",{children:"Players Ready State"}),(0,d.jsxs)("div",{className:"admin-players-ready-state__entry",children:[(0,d.jsx)(L.Z,{style:{color:"green"},title:"Ready:"}),(0,d.jsx)("ul",{className:"admin-players-ready-state__list",children:r.map((function(e){return(0,d.jsx)("li",{className:"admin-players-ready-state__item",children:e},"admin-player-".concat(e))}))})]}),(0,d.jsxs)("div",{className:"admin-players-ready-state__entry",children:[(0,d.jsx)(M.Z,{style:{color:"orange"},title:"Ready:"}),(0,d.jsx)("ul",{className:"admin-players-ready-state__list",children:i.map((function(e){return(0,d.jsx)("li",{className:"admin-players-ready-state__item",children:e},"admin-player-".concat(e))}))})]})]})}var G=function(e){var n=e.state,a=e.players,r=(0,y.r)().isLoading,t=(0,c.j1)("isAdmin"),s=(0,i.Z)(t,1)[0],l=(0,c.j1)("usingEmulators"),u=(0,i.Z)(l,1)[0],m=(0,c.j1)("isAdminEnabled"),g=(0,i.Z)(m,1)[0],C=(0,h.useState)(!1),_=(0,i.Z)(C,2),A=_[0],k=_[1],T=(0,c.j1)("gameMeta"),E=(0,i.Z)(T,1)[0],w=function(){k(!1)},P=(0,j.C)({apiFunction:Z.c2.performAdminAction,actionName:"perform-admin-action",successMessage:"Admin action performed successfully",errorMessage:"The selected admin action has failed",onAfterCall:w});return s&&g?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"admin-menu-drawer",children:[(0,d.jsx)(p.Z,{type:"primary",danger:!0,size:"small",onClick:function(){k(!0)},disabled:r,icon:r?(0,d.jsx)(x.Z,{}):(0,d.jsx)(o.Z,{}),children:"Admin"}),(0,d.jsx)(f.Z,{title:"Admin Menu",placement:"left",closable:!1,visible:A,onClose:w,children:(0,d.jsxs)("ul",{children:[(0,d.jsx)(V,{players:a}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsxs)("li",{className:"admin-menu-drawer__buttons",children:[(0,d.jsx)("h3",{children:"Actions"}),(0,d.jsx)(v.Z,{placement:"right",title:"Are you sure you want to go to the next phase?",onConfirm:function(){return P({action:b.ND.GO_TO_NEXT_PHASE})},children:(0,d.jsx)(N,{disabled:r||"GAME_OVER"===n.phase,label:"Force Next Phase",className:"admin-menu-drawer__button"})}),(0,d.jsx)(v.Z,{placement:"right",title:"Are you sure you want to go to play again?",onConfirm:function(){return P({action:b.ND.PLAY_AGAIN})},children:(0,d.jsx)(N,{disabled:!0,label:"Play Again",className:"admin-menu-drawer__button"})}),(0,d.jsx)(v.Z,{placement:"right",title:"Are you sure you want to go to end the game by the end of this round?",onConfirm:function(){return P({action:b.ND.FORCE_END_GAME})},children:(0,d.jsx)(N,{disabled:(null===n||void 0===n?void 0:n.lastRound)||r||["LOBBY","RULES","GAME_OVER"].includes(n.phase),label:"Make this the last round",className:"admin-menu-drawer__button"})})]}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsx)("li",{children:(0,d.jsx)(S,{isLoading:r,onPerformAdminAction:P,state:n})}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsxs)("li",{children:[(0,d.jsx)("h3",{children:"Firebase"}),(0,d.jsx)(p.Z,{target:"_blank",href:D(u,E.gameName,E.gameId),children:"Visit Firebase Collection"})]})]})})]})}):(0,d.jsx)("span",{})},D=function(e,n,a){return e?"http://localhost:4000/firestore/".concat(n,"/").concat(a,"/session/state"):"https://console.firebase.google.com/u/0/project/game-session/firestore/data/~2".concat(n,"~2F").concat(a,"~2Fsession~2Fstate")},B=a(20670),q=a(65403),J=a(55948);function Y(e){var n=e.round;return e.lastRound||!n||n.current===n.total?(0,d.jsx)(J.v,{pt:"Tela de Game Over",en:"Game Over Screen"}):(0,d.jsx)(J.v,{pt:"Pr\xf3xima rodada",en:"Next Round"})}function z(e){var n=e.className,a=void 0===n?"":n,r=e.round,i=e.lastRound,t=void 0!==i&&i,s=e.autoTriggerTime,l=void 0===s?0:s,c=e.children,u=(0,B.Z)().translate,h=(0,y.r)().isLoading,p=(0,j.C)({apiFunction:Z.c2.performAdminAction,actionName:"force-next-phase",successMessage:u("Funcionou, pr\xf3xima fase!","It worked, next phase!"),errorMessage:u("Vixi, o aplicativo encontrou um erro ao tentar ir para a pr\xf3xima fase","The application found an error while trying to go to the next phase")}),x=function(){return p({action:b.ND.GO_TO_NEXT_PHASE})};return(0,d.jsx)(m,{className:a,children:(0,d.jsx)(q.h,{icon:(0,d.jsx)(o.Z,{}),type:"primary",danger:!0,disabled:h,onClick:x,onExpire:x,duration:l,hideTimer:!Boolean(l),children:null!==c&&void 0!==c?c:(0,d.jsx)(Y,{round:r,lastRound:t})})})}var H=a(84094),X=["onClick","children"];function K(e){var n=e.onClick,a=e.children,s=(0,t.Z)(e,X),l=(0,y.r)().isLoading,o=(0,c.j1)("isAdminEnabled");return(0,i.Z)(o,1)[0]?(0,d.jsx)(p.Z,(0,r.Z)((0,r.Z)({icon:(0,d.jsx)(H.Z,{}),danger:!0,type:"primary",onClick:n,disabled:l},s),{},{children:a})):(0,d.jsx)("span",{})}function U(e){var n=e.onClick,a=e.label,r=(0,c.j1)("isAdminEnabled");return(0,i.Z)(r,1)[0]?(0,d.jsx)(m,{children:(0,d.jsx)(K,{onClick:n,children:a})}):(0,d.jsx)("span",{})}},65403:function(e,n,a){a.d(n,{h:function(){return d},F:function(){return m}});var r=a(1413),i=a(44925),t=a(28182),s=a(87309),l=a(95090),o=a(80184),c=["duration","children","onExpire","type","onClick","hideTimer"];function d(e){var n=e.duration,a=void 0===n?10:n,d=e.children,u=e.onExpire,m=e.type,h=e.onClick,p=e.hideTimer,x=void 0!==p&&p,f=(0,i.Z)(e,c),v=(0,l.a)({duration:a,autoStart:!0,onExpire:u,disabled:x}).timeLeft,j="timed-button__time";return(0,o.jsxs)(s.Z,(0,r.Z)((0,r.Z)({},f),{},{type:m,onClick:null!==h&&void 0!==h?h:u,children:[d,Boolean(d&&!x)&&" ",!x&&(0,o.jsx)("span",{className:(0,t.Z)(j,"".concat(j,"--").concat(m)),children:v})]}))}var u=["children","active","activeClass","className","hoverType"],m=function(e){var n=e.children,a=e.active,s=void 0!==a&&a,l=e.activeClass,c=void 0===l?"":l,d=e.className,m=void 0===d?"":d,h=e.hoverType,p=void 0===h?"scale":h,x=(0,i.Z)(e,u);return(0,o.jsx)("button",(0,r.Z)((0,r.Z)({className:(0,t.Z)("transparent-button","transparent-button--".concat(p),s&&(c||"transparent-button--active"),m)},x),{},{children:n}))}},2133:function(e,n,a){a.d(n,{C:function(){return p}});var r=a(1413),i=a(15861),t=a(29439),s=a(87757),l=a.n(s),o=a(72791),c=a(50419),d=a(13085),u=a(50410),m=a(81839),h=void 0;function p(e){var n=e.apiFunction,a=e.actionName,s=void 0===a?"api-action":a,p=e.onBeforeCall,x=void 0===p?function(){}:p,f=e.onAfterCall,v=void 0===f?function(){}:f,j=e.onError,y=void 0===j?function(){}:j,Z=e.onSuccess,b=void 0===Z?function(){}:Z,g=e.successMessage,N=void 0===g?"API call was successful":g,C=e.errorMessage,_=void 0===C?"API call has failed":C,A=(0,u.r)().setLoader,k=(0,m.j1)("gameId"),T=(0,t.Z)(k,1)[0],E=(0,m.j1)("gameName"),w=(0,t.Z)(E,1)[0],P=(0,m.j1)("userId"),F=(0,t.Z)(P,1)[0],O=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];clearTimeout(n),n=setTimeout((function(){e.apply(h,i)}),a)}}((0,o.useCallback)(function(){var e=(0,i.Z)(l().mark((function e(a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(s,!0),e.next=4,x();case 4:return e.next=6,n((0,r.Z)({gameId:T,gameName:w,playerId:F},a));case 6:e.sent.data&&(b(),c.ZP.success(N)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),d.Z.error({message:_,description:JSON.stringify(e.t0.message),placement:"bottomLeft"}),console.error(e.t0),y();case 15:return e.prev=15,e.next=18,v();case 18:return A(s,!1),e.finish(15);case 20:case"end":return e.stop()}}),e,null,[[0,10,15,20]])})));return function(n){return e.apply(this,arguments)}}(),[s,n,_,T,w,F,A,N,x,v,y,b]));return O}},95090:function(e,n,a){a.d(n,{a:function(){return o}});var r=a(1413),i=a(44925),t=a(30722),s=a(81238),l=["duration","onExpire","disabled"];function o(e){var n=e.duration,a=e.onExpire,o=e.disabled,c=void 0!==o&&o,d=(0,i.Z)(e,l),u=(0,t.useTimer)((0,r.Z)({expiryTimestamp:(0,s.rv)(n),onExpire:c?void 0:a},d)),m=60*u.minutes+u.seconds;return(0,r.Z)((0,r.Z)({},u),{},{timeLeft:m})}}}]);
//# sourceMappingURL=472.42936170.chunk.js.map