"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[6906],{27049:function(e,n,t){t.d(n,{r6:function(){return c},QF:function(){return h},RI:function(){return b}});var a=t(98363),r=t(80184),i=t(50678),o=t(7633),d=t(56540),s=t(3224),l=t(49274),u=t(30236),c=function(){var e=(0,s.j1)("canvasSize"),n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,r.jsx)(l.fX,{type:"popover",position:1,icon:(0,r.jsx)(d.Z,{}),label:v,content:(0,r.jsxs)("div",{className:"canvas-resizer",children:[(0,r.jsx)("div",{className:"canvas-resizer__label",children:v}),(0,r.jsx)(o.Z,{className:"canvas-resizer__slider",value:null!==t&&void 0!==t?t:100,min:150,max:500,step:50,onChange:a})]})})},v=(0,r.jsx)(u.vN,{pt:"Tamanho das Artes",en:"Art Size"}),h=function(e){var n,t,a=e.drawing,i=void 0===a?"":a,o=e.className,d=void 0===o?"":o,s=e.width,l=void 0===s?250:s,u=e.height,c=e.strokeWidth,v=void 0===c?"medium":c,h=e.viewBox,f=void 0===h?"0 0 500 500":h,g=JSON.parse(i),p=g.map((function(e){for(var n="",t=0,a=1;a<e.length;t+=2,a+=2)e[t+2]&&e[a+2]&&(n+="M".concat(e[t],",").concat(e[a]," L").concat(e[t+2],",").concat(e[a+2]));return n})),m=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[v])&&void 0!==n?n:5;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:f,overflow:"hidden",className:d,style:{width:"".concat(l,"px"),height:"".concat(u||l,"px")},children:[(0,r.jsx)("defs",{}),p.map((function(e,n){return(0,r.jsx)("path",{d:e,fill:"none",stroke:"#000",strokeWidth:m,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"},"".concat(i,"-").concat(n))}))]})},f=t(31303),g=t(72791),p=t(63733),m=t(71046),x=t(2641),w=t(78030),j=t(82622),b=function(e){var n,t,o=e.lines,d=e.setLines,s=e.className,l=void 0===s?"":s,c=e.showControls,v=void 0!==c&&c,h=e.strokeWidth,b=void 0===h?"medium":h,y=e.width,Z=void 0===y?500:y,I=e.height,L=e.willReadFrequently,D=void 0!==L&&L,S=(0,g.useState)([]),C=(0,i.Z)(S,2),k=C[0],E=C[1],N=(0,g.useRef)(!1),M=function(){N.current=!0},_=function(){N.current=!1,E([])},P=function(e){M();var n=e.target.getStage().getPointerPosition();d([].concat((0,f.Z)(o),[[Math.round(n.x),Math.round(n.y)]]))},A=function(e){var n=e.target.getStage().getPointerPosition(),t=Math.round(n.x),a=Math.round(n.y),r=o[o.length-1];r=r.concat([t+.1,a+.1]),o.splice(o.length-1,1,r),d(o.concat())},T=function(e){P(e)},F=function(e){if(N.current){var n=e.target.getStage().getPointerPosition(),t=o[o.length-1];t=t.concat([Math.round(n.x),Math.round(n.y)]),o.splice(o.length-1,1,t),d(o.concat())}},O=function(e){N.current&&(_(),A(e))},Y=function(){_()},q=function(){M()},R=null!==(n=null===(t={small:3,medium:5,large:7})||void 0===t?void 0:t[b])&&void 0!==n?n:5;return(0,r.jsxs)(m.Z,{direction:"vertical",align:"center",children:[(0,r.jsx)(a.Hf,{width:Z,height:I||Z,onMouseDown:T,onMousemove:F,onMouseup:O,onTouchStart:T,onTouchMove:F,onTouchEnd:O,onMouseLeave:function(e){N.current&&(A(e),window.document.addEventListener("mouseup",Y),window.document.addEventListener("touchEnd",Y),window.document.addEventListener("mousedown",q),window.document.addEventListener("touchStart",q))},onMouseEnter:function(e){N.current&&P(e),window.document.removeEventListener("mouseup",Y),window.document.removeEventListener("touchEnd",Y),window.document.removeEventListener("mousedown",q),window.document.removeEventListener("touchStart",q)},className:(0,p.Z)("drawing-canvas",l),style:{width:"".concat(Z,"px"),height:"".concat(I||Z,"px")},willReadFrequently:D,id:"drawing-canvas",children:(0,r.jsx)(a.mh,{children:o.map((function(e,n){return(0,r.jsx)(a.x1,{points:e,stroke:"#222222",strokeWidth:R,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},n)}))})}),v&&(0,r.jsxs)(m.Z,{children:[(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(o),n=(0,f.Z)(k),t=e.pop();t&&(n.push(t),d(e),E(n))},disabled:0===o.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Desfazer",en:"Undo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){var e=(0,f.Z)(o),n=(0,f.Z)(k),t=n.pop();t&&(e.push(t),d(e),E(n))},disabled:0===k.length,children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(u.vN,{pt:"Refazer",en:"Redo"})]}),(0,r.jsxs)(x.ZP,{onClick:function(){return d([])},disabled:0===o.length,children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(u.vN,{pt:"Apagar",en:"Clear"})]})]})]})}},73713:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var a=t(50678),r=t(66509),i=t(83990),o=t(66818),d=t(6583),s=t(2641),l=t(34812),u=t(18489),c=t(33032),v=t(84322),h=t.n(v),f=t(72791),g=t(12481),p=t(1563),m=t(76807),x=t(10829),w=t(96403),j=t(73418),b=t(12661),y=t(763),Z=t(72426),I=t.n(Z);function L(e,n){return(0,c.Z)(h().mark((function t(){var a,r,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("".concat(e,"/").concat(n)),r=(0,g.JU)(p.RZ,"".concat(e,"/").concat(n)),t.next=4,(0,g.QT)(r);case 4:return i=t.sent,t.abrupt("return",null!==(a=i.data())&&void 0!==a?a:{});case 6:case"end":return t.stop()}}),t)})))}var D={SUFFIX_DATA:{pt:"drawingsPT",en:"drawingsEN"},DAILY:{pt:"diario",en:"daily"}};function S(e,n){var t,r,i,o,d,s,l,c,v=b.Z.useApp().notification,h=(0,m.a)({queryKey:["data","suffixCounts"],queryFn:L("data","suffixCounts"),enabled:e,onSuccess:function(){v.info({message:"Data Suffix Counts loaded",placement:"bottomLeft"})},onError:function(){v.error({message:"Error loading suffix counts",placement:"bottomLeft"})}});console.log(h.data);var g=D.SUFFIX_DATA[null!==n&&void 0!==n?n:"pt"],p=function(e,n,t){var a=b.Z.useApp().notification,r="drawings".concat("pt"===t?"PT":"EN"),i=(0,f.useMemo)((function(){return new Array(n).fill(0).map((function(n,t){return{queryKey:["data","".concat(r).concat(t+1)],queryFn:L("data","".concat(r).concat(t+1)),enabled:e,onSuccess:function(){a.info({message:"Data Drawings ".concat(r).concat(t+1," loaded"),placement:"bottomLeft"})}}}))}),[n]);return(0,x.h)({queries:i})}(e&&Boolean(null===(t=h.data)||void 0===t?void 0:t[g]),null!==(r=null===(i=h.data)||void 0===i?void 0:i[g])&&void 0!==r?r:0,null!==n&&void 0!==n?n:"pt"),w=p.some((function(e){return e.isLoading}));console.log(null===p||void 0===p||null===(o=p[0])||void 0===o?void 0:o.data);var j=D.DAILY[null!==n&&void 0!==n?n:"pt"],Z=(0,m.a)({queryKey:[j,"history"],queryFn:L(j,"history"),enabled:!0,onSuccess:function(){v.info({message:"Data Daily History loaded",placement:"bottomLeft"})},onError:function(){v.error({message:"Error loading daily history",placement:"bottomLeft"})}}),S=(0,f.useMemo)((function(){var e,n;return null!==(e=null===(n=Z.data)||void 0===n?void 0:n.used)&&void 0!==e?e:[]}),[null===(d=Z.data)||void 0===d?void 0:d.used]),C=null!==(s=null===(l=Z.data)||void 0===l?void 0:l.latestDate)&&void 0!==s?s:"2023-10-31";console.log({usedCards:S,latestDate:C});var k=(0,f.useMemo)((function(){var e=(null!==p&&void 0!==p?p:[]).reduce((function(e,t){var r,i=null!==(r=t.data)&&void 0!==r?r:{};return Object.entries(i).forEach((function(t){var r=(0,a.Z)(t,2),i=r[0],o=r[1];if(o.drawing.trim().length<10)return console.log("Empty drawing",o.cardId),e;void 0===e[o.cardId]?e[o.cardId]={id:o.cardId,type:"arte-ruim",language:null!==n&&void 0!==n?n:"pt",cardId:o.cardId,text:o.text,drawings:[o.drawing],number:0,dataIds:[i]}:(e[o.cardId].drawings.push(o.drawing),e[o.cardId].dataIds.push(i))})),e}),{});console.log({totalCardCount:Object.keys(e).length});var t=Object.values(e).filter((function(e){var n;return e.drawings.length>1&&e.cardId&&!(null!==(n=e.cardId)&&void 0!==n&&n.includes("--"))}));console.log({shortlistCardCount:t.length});var r=Object.values(t).filter((function(e){return!S.includes(e.cardId)})),i=(0,y.sampleSize)((0,y.shuffle)(r),45),o=C;return i.map((function(e,n){var t,a=(t=o,I()(t,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD"));return o=a,(0,u.Z)((0,u.Z)({},e),{},{id:a,number:n+1})}))}),[p,S,C,n]),E=(0,f.useMemo)((function(){var e=(null!==p&&void 0!==p?p:[]).reduce((function(e,t){var r,i=null!==(r=t.data)&&void 0!==r?r:{};return Object.entries(i).forEach((function(t){var r=(0,a.Z)(t,2),i=r[0],o=r[1];if(o.drawing.trim().length<10)return console.log("Empty drawing",o.cardId),e;void 0===e[o.cardId]?e[o.cardId]={id:o.cardId,type:"arte-ruim",language:null!==n&&void 0!==n?n:"pt",cardId:o.cardId,text:o.text,drawings:[o.drawing],number:0,dataIds:[i]}:(e[o.cardId].drawings.push(o.drawing),e[o.cardId].dataIds.push(i))})),e}),{});return Object.values(e).filter((function(e){var n;return null===(n=e.cardId)||void 0===n?void 0:n.includes("--")}))}),[p,n]);return{isLoading:h.isLoading||w||Z.isLoading,entries:k,latestDate:null===(c=Z.data)||void 0===c?void 0:c.latestDate,round5sample:E}}var C=t(27049),k=t(80184);function E(){var e,n,t=(0,f.useState)(),r=(0,a.Z)(t,2),i=r[0],l=r[1],u=S(Boolean(i),i),v=[{title:"Id",dataIndex:"id",key:"id"},{title:"CardId",dataIndex:"cardId",key:"cardId"},{title:"Text",dataIndex:"text",key:"text",render:function(e){return(0,k.jsx)("div",{children:e.split("").map((function(e,n){return n<2||" "===e?e:"\u23f9"})).join("")})}},{title:"Count",dataIndex:"drawings",key:"count",render:function(e){return(0,k.jsx)("div",{children:e.length})}},{title:"Drawings",dataIndex:"drawings",key:"drawings",render:function(e){return(0,k.jsx)("div",{children:e.map((function(e){return(0,k.jsx)(C.QF,{drawing:e,width:100,height:100,className:"border round-corners margin"},e)}))})}}],m=function(e){var n=b.Z.useApp().notification,t=(0,w.NL)(),r=D.DAILY[null!==e&&void 0!==e?e:"pt"],i=(0,f.useState)(!1),o=(0,a.Z)(i,2),d=o[0],s=o[1],l=(0,j.D)(function(){var e=(0,c.Z)(h().mark((function e(n){var t,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){var n=(0,g.JU)(p.RZ,"".concat(r,"/").concat(e.id));return(0,g.pl)(n,e)})),a=(0,g.JU)(p.RZ,"".concat(r,"/history")),i={latestDate:n[n.length-1].id,used:n.map((function(e){return e.cardId}))},(0,g.pl)(a,i),e.abrupt("return",Promise.all(t));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(){n.info({message:"Data saved",placement:"bottomLeft"}),t.invalidateQueries([r,"history"]),s(!1)},onError:function(){n.error({message:"Error saving data",placement:"bottomLeft"})}});return{isDirty:d,setIsDirty:s,save:l.mutateAsync,isLoading:l.isLoading}}(null!==i&&void 0!==i?i:"pt"),x=m.save,y=m.isLoading;return(0,k.jsxs)("div",{children:[(0,k.jsxs)(o.Z,{onChange:function(e){return l(e)},defaultValue:i,style:{minWidth:"20ch"},children:[(0,k.jsx)(o.Z.Option,{value:"",disabled:!0,children:"Select a query language"}),(0,k.jsx)(o.Z.Option,{value:"pt",children:"Portugu\xeas"}),(0,k.jsx)(o.Z.Option,{value:"en",children:"English"})]}),u.isLoading&&(0,k.jsx)("div",{children:"Loading..."}),(0,k.jsxs)("h1",{children:["Total: ",u.entries.length]}),(0,k.jsx)(d.Z,{columns:v,dataSource:null!==(e=u.entries)&&void 0!==e?e:[]}),(0,k.jsx)(s.ZP,{onClick:function(){return x(u.entries)},loading:y,disabled:0===(null!==(n=u.entries)&&void 0!==n?n:[]).length,children:"Save"})]})}var N=function(){return(0,r.Z)("Daily Setup | Dev | Tarde Divertida"),(0,k.jsxs)(i.Z,{className:"dev-layout",children:[(0,k.jsx)(l.B,{title:"Daily Setup"}),(0,k.jsxs)(i.Z.Content,{className:"dev-content",children:[(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:"Get history/useCards and latestDate"}),(0,k.jsx)("li",{children:"Get data/suffixCounts"}),(0,k.jsx)("li",{children:"Load all /data/drawingsPT"}),(0,k.jsx)("li",{children:"Filter cards with more than 2 entries"}),(0,k.jsx)("li",{children:"Filter cards that were already used"}),(0,k.jsx)("li",{children:"Shuffle and build daily entries"})]}),(0,k.jsx)(E,{})]})]})}},34812:function(e,n,t){t.d(n,{B:function(){return s}});var a=t(71046),r=t(64248),i=t(57689),o=t(80184);function d(){var e=(0,i.TH)().pathname,n=(0,i.s0)(),t=[{label:"Home",value:"/",disabled:"/"===e},{label:"Hub",value:"/hub",disabled:"/hub"===e},{label:"Icons",value:"/dev/icons",disabled:"/dev/icons"===e},{label:"Colors",value:"/dev/colors",disabled:"/dev/colors"===e},{label:"Sprites",value:"/dev/sprites",disabled:"/dev/sprites"===e},{label:"Resources",value:"/dev/resources",disabled:"/dev/resources"===e},{label:"Playground",value:"/dev/playground",disabled:"/dev/playground"===e},{label:"Daily Setup",value:"/dev/dailysetup",disabled:"/dev/dailysetup"===e},{label:"Showcase",value:"/showcase",disabled:"/showcase"===e}];return(0,o.jsx)(r.Z,{options:t,defaultValue:e,onChange:function(e){n(e)}})}function s(e){var n=e.title,t=e.subTitle,r=e.extra;return(0,o.jsx)("header",{className:"dev-header",children:(0,o.jsxs)("div",{className:"dev-header__heading",children:[(0,o.jsxs)("div",{className:"dev-header__left",children:[(0,o.jsxs)("span",{className:"dev-header__title",children:[n," "]}),(0,o.jsx)("span",{className:"dev-header__subtitle",children:t})]}),(0,o.jsxs)("div",{className:"dev-header__extra",children:[(0,o.jsx)(a.Z,{className:"dev-header__extra-space",wrap:!0,children:r}),(0,o.jsx)(d,{})]})]})})}}}]);
//# sourceMappingURL=page-dev-daily-setup.3a23f9bc.chunk.js.map