"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[472],{90472:function(e,n,a){a.d(n,{wg:function(){return z},OJ:function(){return B},lv:function(){return J},c3:function(){return K},In:function(){return m}});var r=a(1413),i=a(29439),s=a(44925),t=a(28182),l=a(83099),o=a(28955),c=a(81839),d=a(80184),u=["children","className"],m=function(e){var n=e.children,a=e.className,m=void 0===a?"":a,h=(0,s.Z)(e,u),p=(0,c.j1)("isAdmin"),x=(0,i.Z)(p,1)[0],j=(0,c.j1)("isAdminEnabled"),f=(0,i.Z)(j,1)[0];return x&&f?(0,d.jsxs)("fieldset",{className:(0,t.Z)("admin-only-container",m),children:[(0,d.jsxs)("legend",{className:"admin-only-container__legend",children:[(0,d.jsx)(o.Z,{})," Admin Controls"]}),(0,d.jsx)(l.Z,(0,r.Z)((0,r.Z)({},h),{},{children:n}))]}):(0,d.jsx)("span",{})},h=a(72791),p=a(56847),x=a(34571),j=a(87309),f=a(2133),y=a(50410),v=a(53673),Z=a(76591),g=a(77363),b=["label"],N=function(e){var n=e.label,a=(0,s.Z)(e,b);return(0,d.jsx)(j.Z,(0,r.Z)((0,r.Z)({icon:(0,d.jsx)(o.Z,{}),type:"primary",danger:!0,className:"full-width"},a),{},{children:n}))},A=a(4942),_=a(15861),C=a(87757),k=a.n(C),w=a(33592),T=a(50419),P=a(20005),E=a(87748),O=a(25093),F=a(25581),I=a(86005),R=function(e){switch(e.valueType){case"number":return(0,d.jsx)(w.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(O.Z,{})});case"boolean":return(0,d.jsx)(w.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(F.Z,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:!0})});case"nullish":return(0,d.jsx)(w.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(F.Z,{checkedChildren:"null",unCheckedChildren:"undefined",defaultChecked:!0})});default:return(0,d.jsx)(w.Z.Item,{label:"Value",name:"value",children:(0,d.jsx)(I.Z,{})})}},S=function(e){var n=e.isLoading,a=e.state,r=e.onPerformAdminAction,s=w.Z.useForm(),t=(0,i.Z)(s,1)[0],l=(0,h.useState)("string"),o=(0,i.Z)(l,2),c=o[0],u=o[1],m=Object.keys(a).map((function(e){return{label:e,value:e}})),p=function(){var e=(0,_.Z)(k().mark((function e(n){var a,i,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.value,e.prev=1,"number"===n.valueType&&(a=null!==(i=Number(n.value))&&void 0!==i?i:0),"nullish"===n.valueType&&(a=n.value?null:void 0),s=(0,A.Z)({},n.key,a),!window.confirm("Tem certeza que quer for\xe7ar o estado ".concat(JSON.stringify(s)))){e.next=10;break}return e.next=8,r({state:s,action:Z.ND.FORCE_STATE_PROPERTY});case 8:t.resetFields(),u("string");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),T.ZP.error("Something went wrong",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsxs)(w.Z,{name:"basic",form:t,initialValues:{valueType:"string"},onFinish:p,children:[(0,d.jsx)("h3",{children:"Force Property"}),(0,d.jsx)(w.Z.Item,{label:"Key",name:"key",rules:[{required:!0}],children:(0,d.jsx)(P.Z,{options:m})}),(0,d.jsx)(w.Z.Item,{label:"Type",name:"valueType",children:(0,d.jsxs)(E.Z,{onChange:function(e){["boolean","nullish"].includes(e)&&t.setFieldsValue({value:!0}),"number"===e&&t.setFieldsValue({value:0}),"string"===e&&t.setFieldsValue({value:""}),u(e)},children:[(0,d.jsx)(E.Z.Option,{value:"string",children:"string"}),(0,d.jsx)(E.Z.Option,{value:"number",children:"number"}),(0,d.jsx)(E.Z.Option,{value:"boolean",children:"boolean"}),(0,d.jsx)(E.Z.Option,{value:"nullish",children:"nullish"})]})}),(0,d.jsx)(R,{valueType:c}),(0,d.jsx)(j.Z,{type:"primary",htmlType:"submit",disabled:n,danger:!0,children:"Submit"})]})},M=a(37557),V=a(8067);function L(e){var n=e.players,a=Object.values(n).reduce((function(e,n){return n.ready?e.readyPlayers.push(n.name):e.pendingPlayers.push(n.name),e}),{readyPlayers:[],pendingPlayers:[]}),r=a.readyPlayers,i=a.pendingPlayers;return(0,d.jsxs)("li",{className:"admin-players-ready-state",children:[(0,d.jsx)("h3",{children:"Players Ready State"}),(0,d.jsxs)("div",{className:"admin-players-ready-state__entry",children:[(0,d.jsx)(M.Z,{style:{color:"green"},title:"Ready:"}),(0,d.jsx)("ul",{className:"admin-players-ready-state__list",children:r.map((function(e){return(0,d.jsx)("li",{className:"admin-players-ready-state__item",children:e},"admin-player-".concat(e))}))})]}),(0,d.jsxs)("div",{className:"admin-players-ready-state__entry",children:[(0,d.jsx)(V.Z,{style:{color:"orange"},title:"Ready:"}),(0,d.jsx)("ul",{className:"admin-players-ready-state__list",children:i.map((function(e){return(0,d.jsx)("li",{className:"admin-players-ready-state__item",children:e},"admin-player-".concat(e))}))})]})]})}var G=a(93028),D=a(55948),B=function(e){var n=e.state,a=e.players,r=(0,y.r)().isLoading,s=(0,c.j1)("isAdmin"),t=(0,i.Z)(s,1)[0],l=(0,c.j1)("usingEmulators"),u=(0,i.Z)(l,1)[0],m=(0,c.j1)("isAdminEnabled"),b=(0,i.Z)(m,1)[0],A=(0,h.useState)(!1),_=(0,i.Z)(A,2),C=_[0],k=_[1],w=(0,c.j1)("gameMeta"),T=(0,i.Z)(w,1)[0],P=function(){k(!1)},E=(0,f.C)({apiFunction:v.c2.performAdminAction,actionName:"perform-admin-action",successMessage:"Admin action performed successfully",errorMessage:"The selected admin action has failed",onAfterCall:P});return t&&b?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"admin-menu-drawer",children:[(0,d.jsx)(G.fX,{position:-1,icon:(0,d.jsx)(o.Z,{}),type:"button",label:(0,d.jsx)(D.v,{pt:" Admin",en:" Admin"}),onClick:function(){k(!0)},buttonProps:{type:"primary",danger:!0}}),(0,d.jsx)(p.Z,{title:"Admin Menu",placement:"left",closable:!1,open:C,onClose:P,children:(0,d.jsxs)("ul",{children:[(0,d.jsx)(L,{players:a}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsxs)("li",{className:"admin-menu-drawer__buttons",children:[(0,d.jsx)("h3",{children:"Actions"}),(0,d.jsx)(x.Z,{placement:"right",title:"Are you sure you want to go to the next phase?",onConfirm:function(){return E({action:Z.ND.GO_TO_NEXT_PHASE})},children:(0,d.jsx)(N,{disabled:r||"GAME_OVER"===n.phase,label:"Force Next Phase",className:"admin-menu-drawer__button"})}),(0,d.jsx)(x.Z,{placement:"right",title:"Are you sure you want to go to play again?",onConfirm:function(){return E({action:Z.ND.PLAY_AGAIN})},children:(0,d.jsx)(N,{disabled:!0,label:"Play Again",className:"admin-menu-drawer__button"})}),(0,d.jsx)(x.Z,{placement:"right",title:"Are you sure you want to go to end the game by the end of this round?",onConfirm:function(){return E({action:Z.ND.FORCE_END_GAME})},children:(0,d.jsx)(N,{disabled:(null===n||void 0===n?void 0:n.lastRound)||r||["LOBBY","RULES","GAME_OVER"].includes(n.phase),label:"Make this the last round",className:"admin-menu-drawer__button"})})]}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsx)("li",{children:(0,d.jsx)(S,{isLoading:r,onPerformAdminAction:E,state:n})}),(0,d.jsx)("li",{children:(0,d.jsx)("hr",{})}),(0,d.jsxs)("li",{children:[(0,d.jsx)("h3",{children:"Firebase"}),(0,d.jsx)(j.Z,{target:"_blank",href:(0,g.TY)(u,T.gameName,T.gameId),children:"Visit Firebase Collection"})]})]})})]})}):(0,d.jsx)("span",{})},Y=a(20670);function q(e){var n=e.round;return e.lastRound||!n||n.current===n.total?(0,d.jsx)(D.v,{pt:"Tela de Game Over",en:"Game Over Screen"}):(0,d.jsx)(D.v,{pt:"Pr\xf3xima rodada",en:"Next Round"})}function J(e){var n=e.className,a=void 0===n?"":n,r=e.round,i=e.lastRound,s=void 0!==i&&i,t=e.autoTriggerTime,l=void 0===t?0:t,c=e.children,u=(0,Y.Z)().translate,h=(0,y.r)().isLoading,p=(0,f.C)({apiFunction:v.c2.performAdminAction,actionName:"force-next-phase",successMessage:u("Funcionou, pr\xf3xima fase!","It worked, next phase!"),errorMessage:u("Vixi, o aplicativo encontrou um erro ao tentar ir para a pr\xf3xima fase","The application found an error while trying to go to the next phase")}),x=function(){return p({action:Z.ND.GO_TO_NEXT_PHASE})};return(0,d.jsx)(m,{className:a,children:(0,d.jsx)(G.hn,{icon:(0,d.jsx)(o.Z,{}),type:"primary",danger:!0,disabled:h,onClick:x,onExpire:x,duration:l,hideTimer:!Boolean(l),children:null!==c&&void 0!==c?c:(0,d.jsx)(q,{round:r,lastRound:s})})})}var X=a(84094),H=["onClick","children"];function z(e){var n=e.onClick,a=e.children,t=(0,s.Z)(e,H),l=(0,y.r)().isLoading,o=(0,c.j1)("isAdminEnabled");return(0,i.Z)(o,1)[0]?(0,d.jsx)(j.Z,(0,r.Z)((0,r.Z)({icon:(0,d.jsx)(X.Z,{}),danger:!0,type:"primary",onClick:n,disabled:l},t),{},{children:a})):(0,d.jsx)("span",{})}function K(e){var n=e.onClick,a=e.label,r=(0,c.j1)("isAdminEnabled");return(0,i.Z)(r,1)[0]?(0,d.jsx)(m,{children:(0,d.jsx)(z,{onClick:n,children:a})}):(0,d.jsx)("span",{})}},2133:function(e,n,a){a.d(n,{C:function(){return p}});var r=a(1413),i=a(15861),s=a(29439),t=a(87757),l=a.n(t),o=a(72791),c=a(50419),d=a(13085),u=a(50410),m=a(81839),h=void 0;function p(e){var n=e.apiFunction,a=e.actionName,t=void 0===a?"api-action":a,p=e.onBeforeCall,x=void 0===p?function(){}:p,j=e.onAfterCall,f=void 0===j?function(){}:j,y=e.onError,v=void 0===y?function(){}:y,Z=e.onSuccess,g=void 0===Z?function(){}:Z,b=e.successMessage,N=void 0===b?"API call was successful":b,A=e.errorMessage,_=void 0===A?"API call has failed":A,C=(0,u.r)().setLoader,k=(0,m.j1)("gameId"),w=(0,s.Z)(k,1)[0],T=(0,m.j1)("gameName"),P=(0,s.Z)(T,1)[0],E=(0,m.j1)("userId"),O=(0,s.Z)(E,1)[0],F=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){e.apply(h,i)}),a)}}((0,o.useCallback)(function(){var e=(0,i.Z)(l().mark((function e(a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(t,!0),e.next=4,x();case 4:return e.next=6,n((0,r.Z)({gameId:w,gameName:P,playerId:O},a));case 6:e.sent.data&&(g(),c.ZP.success(N)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),d.Z.error({message:_,description:JSON.stringify(e.t0.message),placement:"bottomLeft"}),console.error(e.t0),v();case 15:return e.prev=15,e.next=18,f();case 18:return C(t,!1),e.finish(15);case 20:case"end":return e.stop()}}),e,null,[[0,10,15,20]])})));return function(n){return e.apply(this,arguments)}}(),[t,n,_,w,P,O,C,N,x,f,v,g]));return F}}}]);
//# sourceMappingURL=472.fb83ee04.chunk.js.map