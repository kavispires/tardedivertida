"use strict";(self.webpackChunktardedivertida=self.webpackChunktardedivertida||[]).push([[3029],{15907:function(t,e,n){n.r(e);var r=n(18489),i=n(33032),s=n(50678),u=n(84322),a=n.n(u),o=(n(76738),n(49189)),l=n(66818),c=n(14078),d=n(71046),h=n(86005),v=n(2556),f=n(12481),p=n(763),m=n(72791),g=n(96403),Z=n(12917),x=n(73418),y=n(66509),b=n(53673),j=n(1563),R=n(80184),O={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};e.default=function(){var t,e,n,u,M,k,S;(0,y.Z)("Users - Tarde Divertida");var C=o.Z.useApp(),N=C.message,w=C.notification,E=(0,g.NL)(),L=(0,m.useState)(O),T=(0,s.Z)(L,2),U=T[0],D=T[1],P=(0,m.useState)(O),A=(0,s.Z)(P,2),J=A[0],V=A[1],I=(0,Z.a)({queryKey:["users"],queryFn:function(){var t=(0,i.Z)(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.PL)((0,f.IO)((0,f.hJ)(j.RZ,"users"),(0,f.ar)("isGuest","!=",!0)));case 2:return e=t.sent,n=[],e.forEach((function(t){return n.push(t.data())})),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),q=(0,x.D)({mutationKey:["users"],mutationFn:function(){var t=(0,i.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b.Js.run((0,r.Z)({action:b.s0.UPDATE_USER_DB},e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(){N.success("User updated"),E.invalidateQueries(["users"])},onError:function(t){w.error({message:"Error",description:t.message})}}),B=null!==(t=I.data)&&void 0!==t?t:[],F=B.map((function(t){var e;return(0,R.jsxs)(l.Z.Option,{value:t.id,children:[(0,R.jsx)("strong",{children:null===t||void 0===t||null===(e=t.names)||void 0===e?void 0:e[0]}),": ",t.id]},t.id)})),K=(0,R.jsx)(l.Z,{onChange:function(t){var e;D(null!==(e=B.find((function(e){return e.id===t})))&&void 0!==e?e:O)},style:{minWidth:300},children:F}),W=(0,R.jsx)(l.Z,{onChange:function(t){var e;V(null!==(e=B.find((function(e){return e.id===t})))&&void 0!==e?e:O)},style:{minWidth:300},children:F}),_=(0,m.useMemo)((function(){return(0,p.merge)((0,p.cloneDeep)(null!==U&&void 0!==U?U:{}),(0,p.cloneDeep)(null!==J&&void 0!==J?J:{}))}),[U,J]);return console.log(B),(0,R.jsxs)("div",{children:[(0,R.jsx)(c.Z.Title,{children:"Users"}),I.isLoading&&(0,R.jsx)(c.Z.Paragraph,{children:"Loading..."}),(0,R.jsxs)(d.Z,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[(0,R.jsxs)(d.Z,{direction:"vertical",children:[(0,R.jsx)(c.Z.Title,{level:2,children:"Origin"}),(0,R.jsx)(d.Z,{className:"margin",children:K}),(0,R.jsx)(c.Z.Paragraph,{children:null!==(e=null===U||void 0===U||null===(n=U.names)||void 0===n?void 0:n.join(", "))&&void 0!==e?e:"No user selected"}),(0,R.jsx)(h.Z.TextArea,{value:JSON.stringify(null!==U&&void 0!==U?U:{},null,2),rows:20,cols:50,className:"margin"})]}),(0,R.jsxs)(d.Z,{direction:"vertical",children:[(0,R.jsx)(c.Z.Title,{level:2,children:"Destination"}),(0,R.jsx)(d.Z,{className:"margin",children:W}),(0,R.jsx)(c.Z.Paragraph,{children:null!==(u=null===J||void 0===J||null===(M=J.names)||void 0===M?void 0:M.join(", "))&&void 0!==u?u:"No user selected"}),(0,R.jsx)(h.Z.TextArea,{value:JSON.stringify(null!==J&&void 0!==J?J:{},null,2),rows:20,cols:50,className:"margin"})]})]}),(0,R.jsxs)(d.Z,{direction:"vertical",children:[(0,R.jsx)(c.Z.Title,{level:2,children:"Merge"}),(0,R.jsx)(c.Z.Paragraph,{children:null!==(k=null===_||void 0===_||null===(S=_.names)||void 0===S?void 0:S.join(", "))&&void 0!==k?k:"No user selected"}),(0,R.jsx)(h.Z.TextArea,{value:JSON.stringify(null!==_&&void 0!==_?_:{},null,2),rows:20,cols:50,className:"margin"}),(0,R.jsxs)(v.ZP,{type:"primary",size:"large",loading:q.isLoading,onClick:function(){return q.mutate(_)},disabled:!(null!==_&&void 0!==_&&_.id),children:['Merge Users "',U.id,'" into "',J.id,'"']})]})]})}},76738:function(){},73418:function(t,e,n){n.d(e,{D:function(){return g}});var r=n(18489),i=n(50678),s=n(72791),u=n(73734),a=n(27853),o=n(84531),l=n(81020),c=n(804),d=n(89054),h=n(69538),v=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(i=e.call(this)).client=t,i.setOptions(r),i.bindMethods(),i.updateResult(),i}return(0,o.Z)(n,[{key:"bindMethods",value:function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}},{key:"setOptions",value:function(t){var e,n=this.options;this.options=this.client.defaultMutationOptions(t),(0,u.VS)(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}},{key:"onUnsubscribe",value:function(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}},{key:"onMutationUpdate",value:function(t){this.updateResult();var e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}},{key:"getCurrentResult",value:function(){return this.currentResult}},{key:"reset",value:function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}},{key:"mutate",value:function(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,r.Z)((0,r.Z)({},this.options),{},{variables:"undefined"!==typeof t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()}},{key:"updateResult",value:function(){var t=this.currentMutation?this.currentMutation.state:(0,d.R)(),e=(0,r.Z)((0,r.Z)({},t),{},{isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset});this.currentResult=e}},{key:"notify",value:function(t){var e=this;h.V.batch((function(){var n,r,i,s;if(e.mutateOptions&&e.hasListeners())if(t.onSuccess)null==(n=(r=e.mutateOptions).onSuccess)||n.call(r,e.currentResult.data,e.currentResult.variables,e.currentResult.context),null==(i=(s=e.mutateOptions).onSettled)||i.call(s,e.currentResult.data,null,e.currentResult.variables,e.currentResult.context);else if(t.onError){var u,a,o,l;null==(u=(a=e.mutateOptions).onError)||u.call(a,e.currentResult.error,e.currentResult.variables,e.currentResult.context),null==(o=(l=e.mutateOptions).onSettled)||o.call(l,void 0,e.currentResult.error,e.currentResult.variables,e.currentResult.context)}t.listeners&&e.listeners.forEach((function(t){(0,t.listener)(e.currentResult)}))}))}}]),n}(n(55511).l),f=n(97413),p=n(96403),m=n(89608);function g(t,e,n){var a=(0,u.lV)(t,e,n),o=(0,p.NL)({context:a.context}),l=s.useState((function(){return new v(o,a)})),c=(0,i.Z)(l,1)[0];s.useEffect((function(){c.setOptions(a)}),[c,a]);var d=(0,f.$)(s.useCallback((function(t){return c.subscribe(h.V.batchCalls(t))}),[c]),(function(){return c.getCurrentResult()}),(function(){return c.getCurrentResult()})),g=s.useCallback((function(t,e){c.mutate(t,e).catch(Z)}),[c]);if(d.error&&(0,m.L)(c.options.useErrorBoundary,[d.error]))throw d.error;return(0,r.Z)((0,r.Z)({},d),{},{mutate:g,mutateAsync:d.mutate})}function Z(){}}}]);
//# sourceMappingURL=page-users.b7971a23.chunk.js.map