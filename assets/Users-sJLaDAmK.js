import{y as A,H as O,J as P,r as d,K as _,j as e,q as u,v as q,M as r,w as i,N as m,B as w,U as C,O as I,Q as M,V as R,W as B,X as L,Y as Q}from"./index-Bkeb9Vav.js";import{u as F}from"./useMutation-Bw5Rhm5T.js";/* empty css           */import{S as g}from"./index-B1cBADNL.js";import"./Overflow-e3tkU5jo.js";import"./useEvent-DdNnp4qS.js";import"./PurePanel-BtXd-Alo.js";const l={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function H(){A("Users - Tarde Divertida");const{message:j,notification:y}=O.useApp(),S=P(),[n,U]=d.useState(l),[t,f]=d.useState(l),p=_({queryKey:["users"],queryFn:async()=>{const s=await M(R(L(Q,"users"),B("isGuest","!=",!0))),a=[];return s.forEach(D=>{a.push(D.data())}),a}}),h=F({mutationKey:["users"],mutationFn:async s=>{C.run({action:I.UPDATE_USER_DB,...s})},onSuccess:()=>{j.success("User updated"),S.invalidateQueries({queryKey:["users"]})},onError:s=>{y.error({message:"Error",description:s.message})}}),c=p.data??[],v=s=>{U(c.find(a=>a.id===s)??l)},E=s=>{f(c.find(a=>a.id===s)??l)},x=c.map(s=>e.jsxs(g.Option,{value:s.id,children:[e.jsx("strong",{children:s?.names?.[0]}),": ",s.id]},s.id)),N=e.jsx(g,{onChange:v,style:{minWidth:300},children:x}),T=e.jsx(g,{onChange:E,style:{minWidth:300},children:x}),o=d.useMemo(()=>u.merge(u.cloneDeep(n??{}),u.cloneDeep(t??{})),[n,t]);return e.jsxs(q,{children:[e.jsx(r.Title,{children:"Users"}),p.isLoading&&e.jsx(r.Paragraph,{children:"Loading..."}),e.jsxs(i,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Origin"}),e.jsx(i,{className:"margin",children:N}),e.jsx(r.Paragraph,{children:n?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(n??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Destination"}),e.jsx(i,{className:"margin",children:T}),e.jsx(r.Paragraph,{children:t?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Merge"}),e.jsx(r.Paragraph,{children:o?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(o??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(w,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(o),disabled:!o?.id,children:['Merge Users "',n.id,'" into "',t.id,'"']})]})]})}export{H as default};
