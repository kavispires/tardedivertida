import{j as e,B as f,c as p,T as c,f as C,bY as y,q as v,ar as L,r as U,au as S,Q as F,bW as j,aK as _,ay as O,s as z,bX as Y,aw as K,bv as M,bs as Q,b_ as X,aF as J}from"./index-p96lrkfF.js";import{u as V,S as T,a as E,P,f as Z,c as ee,d as se,e as re}from"./Session-DVNaFa6N.js";import{T as ae}from"./TrophyIcon-15eASsw9.js";import"./RulesModal-CQYpDgvC.js";import{S as I,a as A,P as D,u as te}from"./StepSwitcher-CyU_yS-g.js";import{G as oe}from"./GameOverWrapper-DDqRFM0e.js";import{D as ne}from"./DreamIcon-za6I7J7a.js";/* empty css                             */import{I as ie}from"./ImageCardPreloadHand-DtzRfoQq.js";import{I as g}from"./useDevFeatures-C35RkXoI.js";import{R as ce}from"./RoundAnnouncement-Bro1J4z_.js";import{u as w}from"./useMock-DsLB9hpn.js";import{C as W}from"./Card-BHzUcgE_.js";import{I as q}from"./ImageBlurButton-D39oxq1O.js";import{I as $}from"./ImageCard-j2_G2m7O.js";import{E as le}from"./WritingIcon-DYktCz65.js";import{u as me}from"./useVotingMatch-D17cmUFc.js";import{R as B}from"./UpCircleOutlined-YQu_u0Up.js";import"./Ribbon-BZgfp32N.js";import{R as de}from"./RibbonGroup-Bvd6GpXI.js";import{u as ue}from"./SlideShowControls-Cg35qLKq.js";import{C as pe}from"./CountdownIcon-R7QQ6dvP.js";import{P as G}from"./PointsHighlight-DRMtVKh2.js";import{S as he}from"./SlideShow-jvhh_xCV.js";import{P as xe}from"./PlayerAvatarName-fueHWoRP.js";import{P as je}from"./PlayerAvatar-CIJnURmg.js";import{S as k}from"./StarPoints-DuifbUqt.js";import{S as ge}from"./StepRankingWrapper-CxGqzxQN.js";import{R as fe}from"./RoundsLeftInstruction-7gVuhy9v.js";import{R as be}from"./PictureOutlined-CbNgEH38.js";/* empty css                            */import"./Game-DN2HMWSw.js";import"./useMutation-Cyg-El7Z.js";import"./FixedMenuButton-BBKPztnE.js";import"./Popconfirm-B3cuyTDb.js";import"./PurePanel-Da7mJ2nq.js";import"./index-DQImZJBH.js";import"./index-BYZOpjeI.js";import"./extends-CF3RwP-h.js";import"./useToggle-CGEJjSAO.js";import"./useId-Bk617wUQ.js";import"./speech-q2vTwPOb.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-BC059rjh.js";import"./index-CHuUolkH.js";import"./index-D6rOcq4S.js";import"./SignIn-DZmQMm2A.js";import"./GoogleIcon-DFPvprAX.js";import"./AnimatedGearIcon-BKXKio45.js";import"./AnimatedClockIcon-CLeYiUgJ.js";import"./TimedButton-DVK1JVAD.js";import"./Loading-CLGNSzGM.js";import"./AnimatedLoaderIcon-CZN3e8U0.js";import"./WaitingRoomIcon-vYaoHsKA.js";import"./LikeFilled-CYYeet27.js";import"./TheEndIcon-IDZVkw0N.js";import"./StarFilled-DPtVyqAK.js";import"./index-D_Lraz-Y.js";import"./progress-DWxY8Jq5.js";import"./StepBackwardOutlined-CxgovX04.js";import"./TrophyOutlined-nl3NOja3.js";import"./StarIcon-DjAzRwuH.js";import"./MetricHighlight-Bvv4u74p.js";import"./RankingBoard-B_FPIqtp.js";import"./CaretUpOutlined-BZ1i1-Yb.js";import"./RuleInstruction-CcHIK6RG.js";function ye({onClick:s,cardId:r,selectLabel:t,deselectLabel:n,isSelected:a=!1,standalone:o=!1}){return e.jsxs(f,{shape:"round",size:"small",ghost:!a,className:p("image-card-select-button",{standalone:o}),onClick:()=>s(r),children:[e.jsx(B,{}),a?e.jsx(c,{pt:"Desmarcar",en:"Deselect",custom:n}):e.jsx(c,{pt:"Selecionar",en:"Select",custom:t}),e.jsx(B,{})]})}const x={DREAM_TELLING:"DREAM_TELLING",MATCHING:"MATCHING",RESOLUTION:"RESOLUTION"},H={SUBMIT_DREAM:"SUBMIT_DREAM",SUBMIT_VOTING:"SUBMIT_VOTING"};function Se({state:s,players:r}){return e.jsx(oe,{state:s,players:r,announcementIcon:e.jsx(ae,{})})}function ve(s){const{translate:r}=C(),t=V({actionName:"submit-dream",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:r("Sonho submetido com sucesso","Dream submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seu sonho","Oops, the application found an error while trying to submit your dream")});return n=>{t({action:H.SUBMIT_DREAM,...n})}}function Ie(s){const{translate:r}=C(),t=V({actionName:"submit-votes",onBeforeCall:()=>s(2),onError:()=>s(0),successMessage:r("Votos submetidos com sucesso","Votes submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seus votos","Oops, the application found an error while trying to submit your votes")});return n=>{t({action:H.SUBMIT_VOTING,...n})}}const Ne=()=>e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Escreva uma dica dentro do tema dado para o seu sonho (carta com borda amarela).",e.jsx("br",{}),"Preste atenção em seu pesadelo (carta com borda roxa), se alguém achar que sua dica é relacionada a seu pesadelo, você perde pontos."]}),en:e.jsxs(e.Fragment,{children:["Write a clue for your dream (yellow bordered card).",e.jsx("br",{}),"Pay attention to your nightmare (purple bordered card) because if any player thinks that your clue is related to that card, you lose points."]})}),Ce=["água","bola","calderão do huck","dedo","esmalte","fatídico","ganhar","hereditário","simpático","abismo","rola","a branca de neve","oops i did it again","pesquisa","saborosa","amargo"],_e=()=>y(Ce)[0],Te=(s,r,t)=>{const n=y(s.map(o=>o.id).filter(o=>o!==t.id)),a=y(r);return n.reduce((o,i,l)=>(o[i]=a[l],o),{})};function R({cardId:s,cardWidth:r,isDream:t=!1,isNightmare:n=!1,hideBlurButton:a=!1}){const o="s-dream-board-card";return e.jsxs(e.Fragment,{children:[e.jsx($,{cardId:s,cardWidth:r,className:p(o,t&&`${o}--dream`,n&&`${o}--nightmare`)}),!a&&e.jsx(q,{cardId:s})]})}function Ee({table:s,user:r,className:t=""}){const n=v(s.length+1,{gap:20});return e.jsx("ul",{className:p("s-dream-board",t),children:s.map(a=>{const o=r.dreamId===a,i=r.nightmareId===a;return e.jsxs("li",{className:"s-dream-board__entry",style:{maxWidth:`${n+20}px`},children:[e.jsx(R,{cardId:a,cardWidth:n,isDream:o,isNightmare:i}),o&&e.jsx("div",{className:"s-dream-board__dream-label",style:{maxWidth:`${n}px`},children:e.jsx(c,{pt:"Sonho",en:"Dream"})}),i&&e.jsx("div",{className:"s-dream-board__nightmare-label",style:{maxWidth:`${n}px`},children:e.jsx(c,{pt:"Pesadelo",en:"Nightmare"})})]},`board-${a}`)})})}function Pe({table:s,user:r,onSubmitDream:t}){const{isLoading:n}=L(),{translate:a}=C(),[o,i]=U.useState("");w(()=>{t({dream:_e()})},[]);const l=()=>{t({dream:o})};return e.jsxs(I,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(T,{children:e.jsx(W,{header:a("Tema do Sonho","Dream Theme"),className:"s-theme-card",randomColor:!0,footer:Array(r.theme.level).fill("•").join(""),footerClassName:"s-theme-card__description",children:r.theme.text})}),e.jsx(g,{contained:!0,children:e.jsx(c,{pt:"Dentro do tema acima, escreva sua dica no campo abaixo. Lembre-se que seu sonho é a carta de borda amarela e seu pesadelo é a carta de borda roxa.",en:"Write a clue in the field below within the given theme. Remember that your dream is the card with the yellow border and your nightmare is the card with the purple border."})}),e.jsx(Ee,{table:s,user:r}),e.jsx(S,{children:e.jsx(F,{size:"large",onPressEnter:l,onChange:m=>i(m.target.value),placeholder:a("Escreva aqui","Write here")})}),e.jsx(S,{children:e.jsx(f,{type:"primary",disabled:n||!o,onClick:l,children:e.jsx(c,{pt:"Enviar Sonho",en:"Submit Dream"})})})]})}function Ae({state:s,players:r,user:t}){const{step:n,goToNextStep:a,setStep:o}=E(0),i=ve(o);return e.jsx(P,{phase:s?.phase,allowedPhase:x.DREAM_TELLING,children:e.jsxs(A,{step:n,players:r,children:[e.jsx(ce,{round:s.round,buttonText:"",onPressButton:a,time:5,children:e.jsx(g,{contained:!0,children:e.jsx(c,{pt:"Sabe quando você sonha com uma coisa, mas não consegue explicar? Então...",en:"You know when you dream about something but you can't quite explain? So..."})})}),e.jsxs(D,{icon:e.jsx(ne,{}),title:e.jsx(c,{pt:"Conte-nos sobre seu sonho",en:"Tell us about your dream..."}),onClose:a,currentRound:s?.round?.current,type:"block",children:[e.jsx(g,{children:e.jsx(Ne,{})}),e.jsx(ie,{hand:s.table})]}),e.jsx(Pe,{table:s.table,onSubmitDream:i,user:t})]})})}const De=(s,r)=>Object.keys(s).filter(t=>s[t]===r),Re=(s,r)=>Object.entries(s).reduce((t,[n,a])=>{const o=n.split(O)[1],i=a.split(O)[1];return o!==r.id&&(t[o]=i),t},{}),Oe=(s,r)=>s.reduce((t,n,a)=>{if(n.id===r.id){const o=j(["dream",n.id,_[a]]),i=j(["card",r.dreamId]);t[o]=i}return t},{}),Me=(s,r,t)=>({...r.reduce((a,o,i)=>{const l=y(t),m=j(["dream",o.id,_[i]]),d=j(["card",l[0]]);return a[m]=d,a},{}),...s});function Be({dreams:s,activeItem:r,onActivateItem:t,votes:n,players:a}){const o="a-evaluation-all-cards__li-card-button";return e.jsx(S,{children:s.map(({id:i,dream:l},m)=>{const d=a[i],u=_[m],h=j(["dream",i,u]),b=r===h,N=Object.keys(n).includes(h);return e.jsx(z,{className:p(o,b&&`${o}--active`,N&&`${o}--used`),onClick:()=>t(h),children:e.jsx(W,{color:Y(u),header:u,size:"medium",footer:d.name,className:"s-clue-card",footerClassName:"s-clue-card__footer",children:l})},h)})})}function Ge({table:s,activeItem:r,onActivateItem:t,votes:n}){const a=v(s.length+1,{gap:20,margin:50}),o="a-evaluation-all-drawings__li-drawing-button";return e.jsx("ul",{className:"s-dream-board",children:s.map(i=>{const l=j(["card",i]),m=r===l,d=De(n,l);return e.jsxs("li",{className:p("s-dream-board__entry",o,m&&`${o}--active`),style:{maxWidth:`${a+20}px`},children:[e.jsxs("div",{className:"s-dream-board__card-container",children:[e.jsx(de,{labels:d}),e.jsx(R,{cardId:i,cardWidth:a,hideBlurButton:!0}),e.jsx(ye,{cardId:l,onClick:t})]}),e.jsx(q,{cardId:i})]},`board-${i}`)})})}function ke({players:s,user:r,table:t,onSubmitVotes:n,dreams:a}){const{isLoading:o}=L(),{votes:i,setVotes:l,activeItem:m,activateItem:d,isVotingComplete:u}=me("dream",!0,a.length);K(()=>{const b=Oe(a,r);b&&l(N=>({...N,...b}))}),w(()=>{n({votes:Te(a,t,r)})},[]);const h=()=>{n({votes:Re(i,r)})};return e.jsxs(I,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(T,{children:e.jsx(c,{pt:"Adivinhação",en:"Match the Pairs"})}),e.jsx(g,{contained:!0,children:e.jsx(c,{pt:"Clique em uma carta e então uma botão da imagem correspondente ou vice e versa. Aperte enviar quando terminar te combinar todas as dicas.",en:"Click on a clue then on an image button or vice versa. When you're done matching all clues, press Submit."})}),e.jsxs(S,{children:[e.jsx(f,{type:"default",disabled:o,onClick:()=>l(Me(i,a,t)),className:p(u&&M("tada")),size:"large",children:e.jsx(c,{pt:"Vote pra mim",en:"Vote for me"})}),e.jsx(f,{type:"primary",disabled:o||!u,onClick:h,className:p(u&&M("tada")),size:"large",children:e.jsx(c,{pt:"Enviar",en:"Submit"})})]}),e.jsx(Ge,{user:r,table:t,activeItem:m,onActivateItem:d,votes:i}),e.jsx(Be,{dreams:a,activeItem:m,onActivateItem:d,votes:i,players:s})]})}function Le({state:s,players:r,user:t}){const{step:n,goToNextStep:a,setStep:o}=E(0),i=Ie(o);return e.jsx(P,{phase:s?.phase,allowedPhase:x.MATCHING,children:e.jsxs(A,{step:n,players:r,children:[e.jsx(D,{icon:e.jsx(le,{}),title:e.jsx(c,{pt:"Combine os sonhos",en:"Match the dreams"}),onClose:a,currentRound:s?.round?.current,type:"block",children:e.jsx(g,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Selecione os pares de dica e carta.",e.jsx("br",{}),"Mais de um jogador pode ter o mesmo sonho."]}),en:e.jsxs(e.Fragment,{children:["Match the pairs of cards and clues.",e.jsx("br",{}),"More than one player may have the same card."]})})})}),e.jsx(ke,{players:r,user:t,table:s.table,onSubmitVotes:i,dreams:s.dreams})]})})}function Ve({entry:s,activePlayer:r}){const t=v(5,{gap:40});return e.jsxs("div",{className:"s-gallery-dream-display",children:[e.jsx("div",{className:"s-gallery-dream-display__player",children:e.jsx(xe,{player:r})}),e.jsxs("div",{className:"s-gallery-dream-display__theme-container",children:[e.jsxs("div",{className:"s-gallery-dream-display__theme",children:[r.theme.text,":"]}),e.jsx("div",{className:"s-gallery-dream-display__dream",children:s.dream})]}),e.jsx("div",{className:"s-gallery-dream-display__dream-image-container",children:e.jsx($,{cardId:s.dreamId,cardWidth:t,className:"s-gallery-dream-display__dream-image"})})]})}function we({entry:s,players:r,correctGuessPoints:t}){const n=v(8,{gap:20});return e.jsx("ul",{className:"s-gallery-guesses",children:s.cards.map(a=>e.jsxs("li",{className:"s-gallery-guesses__votes-container",style:{width:`${n+16}px`},children:[e.jsx("div",{children:e.jsx(R,{cardId:a.cardId,cardWidth:n,isDream:a.isDream,isNightmare:a.isNightmare,hideBlurButton:!0})}),e.jsxs("div",{className:"s-gallery-guesses__votes",children:[e.jsx(Q.Group,{children:a.votes.map(o=>{const i=r[o];return e.jsx(je,{avatarId:i.avatarId,alt:i.name,size:"small"},o)})}),a.votes.length>0&&a.isDream&&e.jsx(k,{quantity:t,keyPrefix:"dream-correct",hideText:!0}),a.votes.length>0&&a.isNightmare&&e.jsx(k,{quantity:-1,keyPrefix:"dream-incorrect",hideText:!0})]})]},`gallery-guess-${a.cardId}`))})}function We({players:s,gallery:r,slideShowConfig:t,correctGuessPoints:n}){te();const a=r[t.slideIndex],o=s[a.playerId];return e.jsxs(I,{fullWidth:!0,className:"s-results-step",children:[e.jsx(T,{children:e.jsx(c,{pt:"Resultado",en:"Results"})}),e.jsxs(he,{config:t,barColor:X(o.avatarId),children:[e.jsx(Ve,{entry:a,activePlayer:o}),e.jsx(we,{entry:a,players:s,correctGuessPoints:n})]})]})}function qe({players:s,ranking:r,round:t,onGoBack:n}){return e.jsxs(I,{children:[e.jsx(ge,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(c,{pt:"Votos corretos",en:"Correct guesses"},"1"),e.jsx(c,{pt:"Votos corretos em seu sonho por outros jogadores",en:"Correct guesses on your dream by other players"},"2"),e.jsx(c,{pt:"Votos em pesadelos",en:"Nightmares selected"},"3")]}),t.current<t.total&&e.jsx(fe,{round:t}),e.jsx(f,{size:"large",onClick:n,icon:e.jsx(be,{}),children:e.jsx(c,{pt:"Ver Galeria De Novo",en:"See Gallery Again"})}),e.jsx(Z,{round:t})]})}function $e({state:s,players:r}){const{step:t,goToNextStep:n,goToPreviousStep:a}=E(0),o=ue({length:s.gallery.length,slideDuration:10,onExpire:n}),i=()=>{o.reset(),a()};return e.jsx(P,{phase:s?.phase,allowedPhase:x.RESOLUTION,children:e.jsxs(A,{step:t,players:r,children:[e.jsx(D,{icon:e.jsx(pe,{}),title:e.jsx(c,{pt:"Resultado",en:"Results"}),onClose:n,currentRound:s?.round?.current,type:"block",children:e.jsx(g,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Acertos ganham ",e.jsx(G,{children:s.correctGuessPoints})," pontos nessa rodada."]}),en:e.jsxs(e.Fragment,{children:["Correct guesses get ",e.jsx(G,{children:s.correctGuessPoints})," points this round."]})})})}),e.jsx(We,{players:r,gallery:s.gallery,slideShowConfig:o,correctGuessPoints:s.correctGuessPoints}),e.jsx(qe,{players:r,ranking:s.ranking,round:s.round,onGoBack:i})]})})}function He(s){switch(s.phase){case x.DREAM_TELLING:return Ae;case x.MATCHING:return Le;case x.RESOLUTION:return $e;case re.DEFAULT.GAME_OVER:return Se;default:return se}}function ar(){return e.jsx(ee,{gameCollection:J.SONHOS_PESADELOS,getActiveComponent:He})}export{ar as default};
