import{h as U,cg as Ae,q as ne,cl as A,aM as ae,r as S,j as e,T as p,e as R,o as Pe,aP as $,B as T,J as Be,I as H,b6 as De,O as Ge,d1 as Le,d2 as We,aQ as oe,co as $e,b0 as Me}from"./index-wXYFVgVu.js";import{u as ie,S as X,a as Y,b as xe,c as J,d as Z,e as ee,P as te,k as Ue,g as qe,h as Ve,i as Fe}from"./StepSwitcher-DZl6mi6V.js";import{V as ze}from"./VerifyListIcon-BvRH2puw.js";import{I as k}from"./useDevFeatures-DR0fBv5a.js";import{R as He}from"./RoundAnnouncement-BlNS9lCe.js";import{u as Qe}from"./useBooleanDictionary-DEtza4h1.js";import{u as fe}from"./useMock-D7KOYUiW.js";import{C as je,W as Ke}from"./WritingIcon-UbAIwXeP.js";import{D as Xe}from"./DebugOnly-QwPyx80Z.js";import{P as ve}from"./PopoverRule-DRMM3vqp.js";import{B as Ye}from"./BoxCheckMarkIcon-qvjUPPT0.js";import{B as Je}from"./BoxOneIcon-BIZ481CY.js";import{B as Ze}from"./BoxXIcon-CHXOB09Q.js";import{G as ge}from"./GuessIcon-Cnpa-VDu.js";import{L as et}from"./LockIcon-B3qj_fsa.js";import{R as tt}from"./RedoOutlined-BKYMA1RN.js";import{R as st}from"./DeleteOutlined-B4kixTLM.js";import{u as ot}from"./RulesModal-pPdgyLKZ.js";import{T as re}from"./TextHighlight-y6a6d0Nn.js";import{P as rt}from"./index-Ds3QY6bm.js";import{u as nt}from"./useWhichPlayerIsThe-S2ieu1vv.js";import{T as at}from"./TurnOrder-BaJ8dpuU.js";import{V as it}from"./ViewOr-Bx1kDirb.js";import{A as M}from"./AvatarName-CdKGb_eu.js";import{D as ct}from"./DevButton-BPvUAVNZ.js";import{R as lt}from"./RankIcon-MJWHR8uB.js";import{S as ut}from"./StepRankingWrapper-CP3ZnY-H.js";import{T as dt}from"./index-CmTyQnv4.js";import{T as mt}from"./TrophyIcon-CA4fmymd.js";import"./GameBanner-Dyq7gnfJ.js";import{G as pt}from"./GameOverWrapper-DxDFEJ54.js";/* empty css                            */import"./speech-BaduMGP9.js";import"./Game-D5DqDsxM.js";import"./useMutation-61bclJZ1.js";import"./index-BMo5L5zk.js";import"./index-BIN0JeWf.js";import"./Overflow-D2Cl2WT4.js";import"./PurePanel-ClpLOmHD.js";import"./index-D6imBQBH.js";import"./Avatar-uUwe9r9O.js";import"./index-CHV90M3A.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-jOXplP9Q.js";import"./Loading-Dz0tD1jE.js";import"./useBubbleLock-Bu_P6z1D.js";import"./AnimatedLoaderIcon-tP9DtrpR.js";import"./InfoCircleOutlined-B8kfmqub.js";import"./index-Sp1K-cTu.js";import"./SignIn-B8WyetH7.js";import"./GoogleIcon-otZKZxkT.js";import"./WaitingRoomIcon-DZ6w0DNy.js";import"./AnimatedClockIcon-CuL56U1F.js";import"./LikeFilled-C9Lk6_Kc.js";import"./RankingBoard-Dqw7Uqel.js";import"./CaretUpOutlined-DxkzUpnY.js";import"./EllipsisOutlined-Dwg2Q3m1.js";import"./PlusOutlined-xljoVqzc.js";import"./TheEndIcon-D16ckRXq.js";import"./StarFilled-wMvtN6BX.js";import"./ArrowRightOutlined-BKV4shdl.js";import"./progress-DR0Qiruo.js";const B={WORD_SELECTION:"WORD_SELECTION",CLOVER_WRITING:"CLOVER_WRITING",CLOVER_GUESSING:"CLOVER_GUESSING",RESULTS:"RESULTS"},ce={SUBMIT_BAD_WORDS:"SUBMIT_BAD_WORDS",SUBMIT_CLUES:"SUBMIT_CLUES",SUBMIT_GUESS:"SUBMIT_GUESS"},G=[0,90,180,270],W=6,Q=3,K=1,ht=["A","B","C","D"],xt={top:0,right:1,bottom:2,left:3};function ft(s){const{translate:t}=U(),o=ie({actionName:"submit-bad-words",onBeforeCall:()=>s(3),onError:()=>s(1),successMessage:t("Palavras ruins enviadas com sucesso!","Bad words submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar palavras","Oops, the application failed to submit words")});return n=>{o({action:ce.SUBMIT_BAD_WORDS,...n})}}function jt(s){const{translate:t}=U(),o=ie({actionName:"submit-clues",onBeforeCall:()=>s(3),onError:()=>s(1),successMessage:t("Dicas enviadas com sucesso!","Clues submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar dicas","Oops, the application failed to submit clues")});return n=>{o({action:ce.SUBMIT_CLUES,...n})}}function vt(s){const{translate:t}=U(),o=ie({actionName:"submit-guess",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:t("Palpites enviadas com sucesso!","Guesses submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar palpites","Oops, the application failed to submit guesses")});return n=>{o({action:ce.SUBMIT_GUESS,...n})}}const ue=(s,t=1)=>s+90*t,L=s=>s%360,de=(s,t,o)=>ht.map((n,i)=>{const a=t.leaves[n].leafId;return{leafId:a,clue:s[i],rotation:o[a]}}),P=(s,t,o,n,i)=>{const a=t[s.leaves[n].leafId],r=L(o[a.id]),c=[...a.cards,...a.cards],u=[0,270,180,90].indexOf(r);return c[u+xt[i]].text},gt=s=>Ae(s).slice(0,W).map(t=>t.id),F=(s,t)=>`${s.substring(0,Math.round(s.length/2))}${t.substring(Math.round(t.length/2))}`,yt=(s,t,o)=>[F(P(s,t,o,"A","top"),P(s,t,o,"B","top")),F(P(s,t,o,"B","right"),P(s,t,o,"C","right")),F(P(s,t,o,"C","bottom"),P(s,t,o,"D","bottom")),F(P(s,t,o,"D","left"),P(s,t,o,"A","left"))],z=[3,1,1,1,0,0],St=s=>{const t=ne.sampleSize(Object.keys(s),4);return{A:{leafId:t[0],rotation:A(G),score:A(z),tries:2},B:{leafId:t[1],rotation:A(G),score:A(z),tries:2},C:{leafId:t[2],rotation:A(G),score:A(z),tries:2},D:{leafId:t[3],rotation:A(G),score:A(z),tries:2}}};function Ct({hand:s,onSubmitBadWords:t}){const{isLoading:o}=ae(),n=S.useMemo(()=>ne.orderBy(s,"text"),[s]),{dict:i,updateDict:a,length:r}=Qe({}),c=()=>{t({cardsIds:Object.keys(i)})},u=()=>{t({cardsIds:gt(s)})};fe();const h=r===W;return e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{children:e.jsx(p,{pt:"As Palavras do Trevo",en:"The Clover Words"})}),e.jsx(k,{contained:!0,children:e.jsx(p,{pt:`Elimine ${W} palavras que você NÃO quer no jogo`,en:`Eliminate ${W} words you DO NOT want in the game`})}),e.jsx("ul",{className:"y-words-list",children:n.map(d=>e.jsx("li",{className:R("y-words-list__word"),children:e.jsx(Pe,{onClick:()=>a(d.id),active:i[d.id],activeClass:"y-words-list__word-selected",children:d.text})},d.id))}),e.jsxs($,{align:"center",children:[e.jsx(T,{type:"primary",size:"large",onClick:c,disabled:!h||o,children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Enviar Palavras (",r," de 6)"]}),en:e.jsxs(e.Fragment,{children:["Submit Words (",r," of 6)"]})})}),e.jsx(T,{size:"large",onClick:u,children:e.jsx(p,{pt:"Selecione pra mim",en:"Select for me"})})]})]})}function bt({players:s,state:t}){const o=xe(s,t),{step:n,goToNextStep:i,setStep:a}=J(0),r=ft(a);return e.jsx(Z,{phase:t?.phase,allowedPhase:B.WORD_SELECTION,children:e.jsxs(ee,{step:n,players:s,children:[e.jsx(He,{round:t.round,onPressButton:i,time:4}),e.jsx(te,{icon:e.jsx(ze,{}),title:e.jsx(p,{pt:"Seleção das Palavras",en:"Words Selection"}),onClose:i,currentRound:t?.round?.current,type:"block",children:e.jsx(k,{children:e.jsx(p,{pt:`Selecione ${W} palavras que você NÃO quer no jogo`,en:`Select ${W} words you DO NOT want in the game`})})}),e.jsx(Ct,{hand:o.hand,onSubmitBadWords:r})]})})}function se(s,t,o,n){const{notification:i}=Be.useApp(),{translate:a}=U(),[r,c]=S.useState(0),[u,h]=S.useState(["","","",""]),[d,I]=S.useState(0),[x,f]=S.useState(null),[j,N]=S.useState(null),[O,C]=S.useState({A:null,B:null,C:null,D:null}),[w,_]=S.useState({A:!1,B:!1,C:!1,D:!1}),[b,D]=S.useState(Object.keys(o).reduce((l,m)=>(l[m]=0,l),{})),[Ce,be]=S.useState([]);S.useEffect(()=>{be(Object.values(O).map(l=>l?.leafId??""))},[O]),S.useEffect(()=>{C(l=>{const m={...l};return Object.keys(m).forEach(v=>{const g=m[v];g&&(g.rotation=b[g.leafId])}),m})},[b]);const Ie=l=>{I(ue(d,l))},Re=(l,m)=>{h(v=>{const y=[...v];return y[l]=m,y})},le=(l,m,v=1)=>{l.stopPropagation();const y=ue(b[m],v);D(g=>({...g,[m]:y})),f(null),N(null)},_e=l=>{Object.values(t.leaves).forEach(m=>{le(l,m.leafId,A([1,2,3,4,5]))})},Ee=l=>{C(m=>({...m,[l]:null}))},Oe=l=>{if(x===l)return f(null);j?(C(m=>{const v=Object.keys(m).filter(g=>m[g]?.leafId===l),y={...m,[j]:{leafId:l,rotation:b[l]}};if(v.length>0){const g=v[0];y[g]=null}return y}),N(null)):f(l)},Te=l=>{if(j===l)return N(null);if(j&&j!==l){C(m=>{const v=m[j],y=m[l];return{...m,[j]:y,[l]:v}}),N(null);return}x?(C(m=>{const v=Object.keys(m).filter(g=>m[g]?.leafId===x),y={...m,[l]:{leafId:x,rotation:b[x]}};if(v.length>0){const g=v[0];y[g]=null}return y}),f(null)):N(l)},ke=()=>{let l=0;const m={...w},v={...O};if(Object.keys(v).forEach(y=>{const g=y,E=v[g];if(E&&(E.score===void 0||E.score===0)){const V=t.leaves[g];E.leafId===V.leafId&&L(E.rotation)===V.rotation?(E.score=r===0?Q:K,l+=1,m[g]=!0):r===0&&(v[g]=null),E.tries=r+1,E.score=E.score??0}}),(l===4||r===1)&&n){n({activeCloverId:t.cloverId,guesses:v});return}i.warning({message:a(`${4-l} folhas estão erradas`,`${4-l} leaves are wrong`),description:a("Tente novamente. Pode ter sido folha errada ou rotação errada","Try again. It may have been wrong leaf or just wrong rotation")}),C(v),_(m),c(1)},Ne=u.every(l=>l.trim()),we=Object.values(O).every(l=>!!l);return{mode:s,rotation:d,onRotateClover:Ie,clues:u,onClueChange:Re,rotations:b,onLeafRotate:le,onRandomizeLeafRotations:_e,guesses:O,onActivateLeaf:Oe,activeLeafId:x,onActivateSlot:Te,activeSlotId:j,usedLeavesIds:Ce,onLeafRemove:Ee,areCluesComplete:Ne,isCloverComplete:we,submitClover:ke,locks:w}}function ye({leaf:s,rotation:t,onLeafRotate:o,onLeafRemove:n,onLeafGrab:i,className:a,position:r,isLocked:c,icon:u}){const h=!!i,d=!!n,I=!!o,x=!d&&!I;return e.jsxs("div",{className:R("y-leaf",h&&"y-leaf--grabbable",De("fadeIn"),a),style:{transform:`rotate(${t}deg)`},children:[s.cards.map((f,j)=>!c&&h?e.jsx("div",{role:"button",className:R("y-leaf__card","y-leaf__card-button",`y-leaf__card--${j}`),onClick:()=>i?.(s.id),children:e.jsx("div",{className:"y-leaf__card-text",children:f.text})},f.id):e.jsx("div",{className:R("y-leaf__card",`y-leaf__card--${j}`),children:e.jsx("div",{className:"y-leaf__card-text",children:f.text})},f.id)),e.jsxs("div",{className:"y-leaf__controls",style:{transform:`rotate(-${t}deg)`},children:[!c&&I&&e.jsx(T,{onClick:f=>o?.(f,s.id),className:"y-leaf__center y-leaf__center--rotatable",shape:"circle",children:e.jsx(tt,{})}),!c&&d&&e.jsx(T,{onClick:()=>n?.(r),className:"y-leaf__center y-leaf__center--rotatable",shape:"circle",children:e.jsx(st,{})}),c&&e.jsx("div",{className:"y-leaf__center",children:e.jsx(H,{icon:e.jsx(et,{})})}),x&&e.jsx("div",{className:"y-leaf__center",children:e.jsx(H,{icon:u??e.jsx(je,{})})})]})]},`leaf-key-${s.id}`)}function It({leaf:s,rotation:t,position:o,onLeafGrab:n,onLeafRotate:i,onLeafRemove:a,activeSlotId:r,onActivateSlot:c,isLocked:u,icon:h}){return!s&&c?e.jsx("div",{className:R(`y-clover__leaf-${o}`,r===o&&"active-class"),children:e.jsx("button",{type:"button",className:R("y-leaf","y-leaf--empty","y-leaf--empty-clickable",r===o&&"y-leaf--empty-active"),onClick:d=>c(o),children:e.jsx(H,{icon:e.jsx(ge,{}),size:"large"})},`clue-key-${o}`)}):n?e.jsx("div",{className:R(`y-clover__leaf-${o}`,r===o&&"active-class"),children:e.jsx(me,{leaf:s,position:o,rotation:t,onLeafGrab:()=>n(o),onLeafRotate:i,onLeafRemove:a,isLocked:u,icon:h})}):e.jsx("div",{className:R(`y-clover__leaf-${o}`),children:e.jsx(me,{leaf:s,position:o,rotation:t,onLeafRotate:i,onLeafRemove:a,isLocked:u,icon:h})})}function me({leaf:s,rotation:t,position:o,onLeafGrab:n,onLeafRotate:i,onLeafRemove:a,isLocked:r,className:c="",icon:u}){return s?e.jsx(ye,{leaf:s,onLeafGrab:n,onLeafRotate:i,onLeafRemove:a,rotation:t,className:c,position:o,isLocked:r,icon:u},s.id):e.jsx("div",{className:R("y-leaf","y-leaf--empty"),children:e.jsx(H,{icon:e.jsx(ge,{}),size:"large"})},`clue-key-${o}`)}function q({mode:s,clover:t,leaves:o,guesses:n,rotation:i,onRotate:a,onClueChange:r,rotations:c={},onLeafRotate:u,onLeafRemove:h,activeSlotId:d,onLeafGrab:I,onActivateSlot:x,locks:f}){const j=S.useRef([]),{translate:N}=U(),O=Object.entries(t.leaves);return ot("Tab",()=>{a(-1)}),e.jsxs("div",{className:"container center",children:[e.jsxs("div",{className:"y-clover",style:{transform:`rotate(${i}deg)`},children:[O.map(([C,w],_)=>{const b=Number(_);return s==="write"&&r?e.jsx("div",{className:R(`y-clover__clue-${b}`,"y-clover-clue"),children:e.jsx(Ge,{ref:D=>{j.current[_]=D},onChange:r?D=>r(b,D.target.value):void 0,className:`y-clover-rotation--${G[_]} y-clover-input`,placeholder:N("Escreva aqui","Write here"),disabled:!r,value:s==="write"?void 0:w.clue,autoFocus:_===0})},`clue-key-${b}`):e.jsx("div",{className:R(`y-clover__clue-${b}`,"y-clover-clue"),children:e.jsx("span",{className:R(`y-clover-rotation--${G[_]}`,"y-clover-clue-readonly"),children:w.clue})},`clue-key-${b}`)}),O.map(([C,w])=>{const{leaf:_,rotation:b,icon:D}=Rt(s,o,C,w,n,c);return e.jsx(It,{leaf:_,rotation:b,position:C,onLeafGrab:I,onLeafRotate:u,onLeafRemove:h,activeSlotId:d,onActivateSlot:x,isLocked:f?.[C]??!1,icon:D},`slot-${C}`)})]}),e.jsxs("div",{className:"controls div-container center",children:[e.jsx(T,{icon:e.jsx(Le,{}),onClick:()=>a(-1)}),e.jsx(T,{icon:e.jsx(We,{}),onClick:()=>a(1)})]})]})}const Rt=(s,t,o,n,i,a)=>{let r="";switch(s){case"guess":return r=i?.[o]?.leafId??"",{leaf:t?.[r],rotation:a[r]??0,icon:void 0};case"result":{r=i?.[o]?.leafId??"";const c=i?.[o];return{leaf:t?.[r],rotation:c?.rotation??0,icon:_t(c?.score??0)}}case"write":return r=n.leafId,{leaf:t?.[r],rotation:a[r]??0,icon:void 0};default:return r=n.leafId,{leaf:t?.[r],rotation:n.rotation,icon:void 0}}},_t=s=>{switch(s){case K:return e.jsx(oe,{title:e.jsx(p,{pt:"Acertou na segunda tentativa",en:"Got it in their second attempt"}),children:e.jsx(Je,{})});case Q:return e.jsx(oe,{title:e.jsx(p,{pt:"Acertou na primeira tentativa",en:"Got it in their first attempt"}),children:e.jsx(Ye,{})});default:return e.jsx(oe,{title:e.jsx(p,{pt:"Burro pra carai e não acertou",en:"Did not get it right"}),children:e.jsx(Ze,{})})}};function pe(){return e.jsx(k,{contained:!0,children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Escreva uma dica (palavra única) que conecte cada um dos pares de palavras na parte de fora do trevo.",e.jsx("br",{}),"Você pode girar o trevo para ficar mais fácil de escrever usando os controles na parte inferior.",e.jsx("br",{}),"Se o par de palavras estiver muito difícil, você pode girar as cartas brancas, mas cuidado para não avacalhar dicas que você já escreveu."]}),en:e.jsxs(e.Fragment,{children:["Write a single-word clue that connects each pair of words in the outer side of the clover.",e.jsx("br",{}),"You may rotate the clover when writing using the buttons in the bottom part of the clover container.",e.jsx("br",{}),"If the pair of words is too difficult, you may rotate the cards but pay attention on how it will change the other pairs when doing so."]})})})}function he(){return e.jsx(k,{contained:!0,children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Posicione as cartas no trevo de acordo com as dicas.",e.jsx("br",{}),"Somente 4 das cartas serão usadas e elas podem estar em qualquer orientação.",e.jsx("br",{}),"Clique nas palavras de uma das cartas para pegá-la e então no quadrante do trevo para posicioná-la.",e.jsx("br",{}),"Você tem duas chances para adivinhar. Quando apertar Enviar pela primeira vez, o jogo manterá todas as cartas corretas (te dando ",Q," pontos) e então você tera uma segunda chance de acertar (ganhando ",K," ponto por cada)"]}),en:e.jsxs(e.Fragment,{children:["Place the cards below inside the clover according to giving clues.",e.jsx("br",{}),"Only 4 of the cards will be used and they can be in any orientation.",e.jsx("br",{}),"Click on the card words to grab it then on the clover quadrant you want to place it.",e.jsx("br",{}),"You have two chances to guess. When you press the first time the game will validate and keep your correct answers (granting you ",Q," points) and then you have a second chance to guess the remainder for ",K," point each."]})})})}function Et({clover:s,leaves:t,clues:o,rotations:n}){const i=Ot(s,t,n);return e.jsxs(e.Fragment,{children:[e.jsx(p,{pt:"Tem certeza que quer enviar as seguintes dicas?",en:"Are you sure you want to submit the following clues?"}),e.jsx("ul",{children:i.map((a,r)=>e.jsxs("li",{children:[e.jsx(re,{children:a[0]}),"+ ",e.jsx(re,{children:a[1]})," ="," ",e.jsx(re,{children:o[r]})]},`${a[0]}-${a[1]}`))})]})}const Ot=(s,t,o)=>{const n=t[s.leaves.A.leafId],i=L(o[n.id]),a=t[s.leaves.B.leafId],r=L(o[a.id]),c=t[s.leaves.C.leafId],u=L(o[c.id]),h=t[s.leaves.D.leafId],d=L(o[h.id]),I={0:0,90:3,180:2,270:1},x=(f,j=0)=>(I[f%360]+j)%4;return[[n.cards[x(i)].text,a.cards[x(r)].text],[a.cards[x(r,1)].text,c.cards[x(u,1)].text],[c.cards[x(u,2)].text,h.cards[x(d,2)].text],[h.cards[x(d,3)].text,n.cards[x(i,3)].text]]};function Tt({clover:s,leaves:t,onSubmitClues:o}){const{isLoading:n}=ae(),{mode:i,rotation:a,onRotateClover:r,clues:c,onClueChange:u,rotations:h,onLeafRotate:d,onRandomizeLeafRotations:I,areCluesComplete:x}=se("write",s,t),f=()=>{o({clues:de(c,s,h)})},j=()=>{o({clues:de(yt(s,t,h),s,h)})};return fe(),e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{children:e.jsx(p,{pt:"Escreva as dicas",en:"Write clues"})}),e.jsx(pe,{}),e.jsx(ve,{content:e.jsx(pe,{})}),e.jsx($,{align:"center",children:e.jsx(T,{type:"default",size:"large",onClick:I,disabled:n,children:e.jsx(p,{pt:"Chacoalhar cartas",en:"Randomize rotations"})})}),e.jsx(q,{mode:i,clover:s,leaves:t,rotation:a,onRotate:r,onClueChange:u,rotations:h,onLeafRotate:d}),e.jsxs($,{align:"center",children:[e.jsx(rt,{title:e.jsx(Et,{clover:s,leaves:t,clues:c,rotations:h}),disabled:!x||n,onConfirm:f,children:e.jsx(T,{type:"primary",size:"large",disabled:!x||n,onClick:()=>r(a/90*-1),children:e.jsx(p,{pt:"Enviar dicas",en:"Submit clues"})})}),e.jsx(Xe,{devOnly:!0,children:e.jsx(T,{size:"large",onClick:j,children:"Mock clues"})})]})]})}function kt({players:s,state:t}){const o=xe(s,t),{step:n,goToNextStep:i,setStep:a}=J(0),r=jt(a);return e.jsx(Z,{phase:t?.phase,allowedPhase:B.CLOVER_WRITING,children:e.jsxs(ee,{step:n,players:s,children:[e.jsx(te,{icon:e.jsx(Ke,{}),title:e.jsx(p,{pt:"Escreva as dicas",en:"Write the clues"}),onClose:i,currentRound:t?.round?.current,type:"block",children:e.jsx(k,{children:e.jsx(p,{pt:"Para cada par, escreva uma dica",en:"For each pair, write a clue"})})}),e.jsx(Tt,{clover:o.clover,leaves:o.leaves,onSubmitClues:r})]})})}function Se({leaves:s,onLeafRotate:t,rotations:o,activeLeafId:n,onLeafGrab:i,usedLeavesIds:a}){const r=S.useMemo(()=>ne.orderBy(Object.values(s),"id").filter(c=>!a.includes(c.id)),[s,a]);return e.jsx(k,{contained:!0,children:e.jsx($,{align:"center",wrap:!0,children:r.map(c=>e.jsx("div",{className:"y-leaf-loose",children:e.jsx(ye,{leaf:c,onLeafGrab:i,onLeafRotate:t,rotation:o?.[c.id],className:R(n===c.id&&"y-leaf--active")},c.id)},c.id))})})}function Nt({clover:s,leaves:t,onSubmitGuess:o,activeCloverPlayer:n}){const{isLoading:i}=ae(),{rotation:a,rotations:r,onLeafRotate:c,onRotateClover:u,guesses:h,onActivateLeaf:d,activeLeafId:I,onActivateSlot:x,activeSlotId:f,usedLeavesIds:j,onLeafRemove:N,isCloverComplete:O,submitClover:C,locks:w}=se("guess",s,t,o),_=()=>{o({guesses:St(t),activeCloverId:s.cloverId})};return e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Adivinhação do trevo do(a) ",e.jsx(M,{player:n})]}),en:e.jsxs(e.Fragment,{children:["Guessing ",e.jsx(M,{player:n}),"'s clover"]})})}),e.jsx(he,{}),e.jsx(ve,{content:e.jsx(he,{})}),e.jsx(q,{mode:"guess",clover:s,leaves:t,onRotate:u,rotation:a,onLeafRotate:c,rotations:r,guesses:h,onLeafGrab:d,activeLeafId:I,onActivateSlot:x,activeSlotId:f,onLeafRemove:N,locks:w}),e.jsx(Se,{leaves:t,rotations:r,onLeafRotate:c,onLeafGrab:d,activeLeafId:I,usedLeavesIds:j}),e.jsxs($,{align:"center",children:[e.jsx(T,{type:"primary",size:"large",onClick:C,disabled:!O||i,children:e.jsx(p,{pt:"Enviar adivinhação",en:"Submit guess"})}),e.jsx(ct,{size:"large",onClick:_,children:"Mock guesses"})]})]})}function wt({activeCloverPlayer:s,clover:t,leaves:o}){const{mode:n,rotation:i,rotations:a,onLeafRotate:r,onRotateClover:c,usedLeavesIds:u}=se("view",t,o);return e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Adivinhação do trevo do(a) ",e.jsx(M,{player:s})]}),en:e.jsxs(e.Fragment,{children:["Guessing ",e.jsx(M,{player:s}),"'s clover"]})})}),e.jsx(k,{contained:!0,children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto os outros jogadores tentam adivinhar.",e.jsx("br",{}),"Enquanto isso, veja as cartas que eles tem disponíveis."]}),en:e.jsxs(e.Fragment,{children:["Wait while other players are trying to guess your clover.",e.jsx("br",{})," In the meantime, check it out the cards they have available."]})})}),e.jsx(q,{mode:n,clover:t,leaves:o,onRotate:c,rotation:i}),e.jsx(Se,{leaves:o,rotations:a,onLeafRotate:r,usedLeavesIds:u})]})}function At({players:s,state:t}){const{step:o,goToNextStep:n,setStep:i}=J(0),[a,r]=nt("activeCloverId",t,s),c=vt(i);return e.jsx(Z,{phase:t?.phase,allowedPhase:B.CLOVER_GUESSING,children:e.jsxs(ee,{step:o,players:s,children:[e.jsxs(te,{icon:e.jsx(je,{}),title:e.jsx(p,{pt:"Hora de Adivinhar",en:"Time to guess"}),onClose:n,currentRound:t?.round?.current,type:"block",children:[e.jsx(k,{children:e.jsx(p,{pt:"De um em um, vamos tentar adivinhar a posição das folhas em cada trevo",en:"One at a time, let's try to guess the position of each leaf on each clover"})}),e.jsx(at,{players:s,activePlayerId:t.activeCloverId,order:t.gameOrder})]}),e.jsxs(it,{condition:r,children:[e.jsx(wt,{activeCloverPlayer:a,clover:t.clover,leaves:t.leaves}),e.jsx(Nt,{clover:t.clover,leaves:t.leaves,onSubmitGuess:c,activeCloverPlayer:a,isUserTheCloverPlayer:r})]})]})})}function Pt({players:s,clover:t,leaves:o,rotation:n,onRotate:i,activeCloverId:a}){const r=$e(s).filter(d=>d.id!==a),[c,u]=S.useState(`${r[0].id}::tab`),h=r.map(d=>({key:`${d.id}::tab`,label:e.jsx(M,{player:d}),children:e.jsx(q,{mode:"result",clover:t,leaves:o,rotation:n,onRotate:i,guesses:d.guesses[a]?.leaves??{}})}));return e.jsx(k,{contained:!0,children:e.jsx(dt,{activeKey:c,onChange:d=>u(d),items:h})})}function Bt({players:s,ranking:t,round:o,clover:n,leaves:i,activeCloverId:a}){const{mode:r,rotation:c,onRotateClover:u}=se("view",n,i);return e.jsxs(ut,{players:s,ranking:t,gainedPointsDescriptions:[e.jsx(p,{pt:"Pontos por encontrar só um jogador",en:"Points for matching only 1 player"},"1"),e.jsx(p,{pt:"Pontos por encontrar mais de um jogador",en:"Points for matching with more players"},"2"),e.jsx(p,{pt:"Pontos perdidos por não ter dado match e estar em um pesadelo",en:"Points lost for not matching any player while in a nightmare"},"3")],children:[e.jsx(q,{mode:r,clover:n,leaves:i,onRotate:u,rotation:c}),e.jsx(Pt,{players:s,clover:n,leaves:i,onRotate:u,rotation:c,activeCloverId:a}),e.jsx(Ue,{round:o,children:e.jsx(p,{pt:"Próximo Trevo ou Game Over",en:"Next Clover or Game Over"})})]})}function Dt({players:s,state:t}){const{step:o,goToNextStep:n}=J(0);return e.jsx(Z,{phase:t?.phase,allowedPhase:B.RESULTS,children:e.jsxs(ee,{step:o,players:s,children:[e.jsx(te,{icon:e.jsx(lt,{}),title:e.jsx(p,{pt:"Resultado",en:"Results"}),onClose:n,currentRound:t?.round?.current,type:"block",children:e.jsx(k,{children:e.jsx(p,{pt:"Quantos pontos você ganhou?",en:"How many points did you get?"})})}),e.jsx(Bt,{players:s,round:t.round,clover:t.clover,leaves:t.leaves,ranking:t.ranking,activeCloverId:t.activeCloverId})]})})}function Gt({state:s,players:t}){return e.jsx(pt,{state:s,players:t,announcementIcon:e.jsx(mt,{})})}function Lt(s){switch(s.phase){case B.WORD_SELECTION:return bt;case B.CLOVER_WRITING:return kt;case B.CLOVER_GUESSING:return At;case B.RESULTS:return Dt;case Fe.DEFAULT.GAME_OVER:return Gt;default:return Ve}}function Qs(){return e.jsx(qe,{gameCollection:Me.TREVO_DA_SORTE,getActiveComponent:Lt})}export{Qs as default};
