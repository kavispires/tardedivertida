import{r as v}from"./index-Fzjfwldm.js";import{u as U}from"./useSetState-DIZib3kd.js";var c=function(){return c=Object.assign||function(i){for(var r,e=1,m=arguments.length;e<m;e++){r=arguments[e];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(i[f]=r[f])}return i},c.apply(this,arguments)};function D(l){for(var i=[],r=0;r<l.length;r++)i.push({start:l.start(r),end:l.end(r)});return i}function W(l){return function(i){var r,e;v.isValidElement(i)?(r=i,e=r.props):e=i;var m=U({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1,playing:!1}),f=m[0],o=m[1],t=v.useRef(null),a=function(n,u){return function(s){try{u&&u(s)}finally{n&&n(s)}}},g=function(){return o({paused:!1})},p=function(){return o({playing:!0})},y=function(){return o({playing:!1})},P=function(){return o({paused:!0,playing:!1})},h=function(){var n=t.current;n&&o({muted:n.muted,volume:n.volume})},C=function(){var n=t.current;if(n){var u=n.duration,s=n.buffered;o({duration:u,buffered:D(s)})}},b=function(){var n=t.current;n&&o({time:n.currentTime})},T=function(){var n=t.current;n&&o({buffered:D(n.buffered)})};r?r=v.cloneElement(r,c(c({controls:!1},e),{ref:t,onPlay:a(e.onPlay,g),onPlaying:a(e.onPlaying,p),onWaiting:a(e.onWaiting,y),onPause:a(e.onPause,P),onVolumeChange:a(e.onVolumeChange,h),onDurationChange:a(e.onDurationChange,C),onTimeUpdate:a(e.onTimeUpdate,b),onProgress:a(e.onProgress,T)})):r=v.createElement(l,c(c({controls:!1},e),{ref:t,onPlay:a(e.onPlay,g),onPlaying:a(e.onPlaying,p),onWaiting:a(e.onWaiting,y),onPause:a(e.onPause,P),onVolumeChange:a(e.onVolumeChange,h),onDurationChange:a(e.onDurationChange,C),onTimeUpdate:a(e.onTimeUpdate,b),onProgress:a(e.onProgress,T)}));var d=!1,M={play:function(){var n=t.current;if(n&&!d){var u=n.play(),s=typeof u=="object";if(s){d=!0;var V=function(){d=!1};u.then(V,V)}return u}},pause:function(){var n=t.current;if(n&&!d)return n.pause()},seek:function(n){var u=t.current;!u||f.duration===void 0||(n=Math.min(f.duration,Math.max(0,n)),u.currentTime=n)},volume:function(n){var u=t.current;u&&(n=Math.min(1,Math.max(0,n)),u.volume=n,o({volume:n}))},mute:function(){var n=t.current;n&&(n.muted=!0)},unmute:function(){var n=t.current;n&&(n.muted=!1)}};return v.useEffect(function(){var n=t.current;n&&(o({volume:n.volume,muted:n.muted,paused:n.paused}),e.autoPlay&&n.paused&&M.play())},[e.src]),[r,f,M,t]}}var j=W("audio");export{j as u};
