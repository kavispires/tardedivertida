import{E as A,K as O,M as P,r as d,N as _,j as e,v as u,x as C,O as r,y as n,Q as m,B as q,U as w,V as I,W as M,X as R,Y as B,Z as L,_ as Q}from"./index-DiAabbyU.js";import{u as F}from"./useMutation-B64ewIRW.js";/* empty css           */import{S as g}from"./index-CJV3hhIQ.js";import"./extends-CF3RwP-h.js";import"./PurePanel-1uWUFR6V.js";const l={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function G(){A("Users - Tarde Divertida");const{message:j,notification:y}=O.useApp(),S=P(),[t,U]=d.useState(l),[i,f]=d.useState(l),p=_({queryKey:["users"],queryFn:async()=>{const s=await M(R(L(Q,"users"),B("isGuest","!=",!0))),a=[];return s.forEach(D=>{a.push(D.data())}),a}}),h=F({mutationKey:["users"],mutationFn:async s=>{w.run({action:I.UPDATE_USER_DB,...s})},onSuccess:()=>{j.success("User updated"),S.invalidateQueries({queryKey:["users"]})},onError:s=>{y.error({title:"Error",description:s.message})}}),c=p.data??[],E=s=>{U(c.find(a=>a.id===s)??l)},v=s=>{f(c.find(a=>a.id===s)??l)},x=c.map(s=>e.jsxs(g.Option,{value:s.id,children:[e.jsx("strong",{children:s?.names?.[0]}),": ",s.id]},s.id)),N=e.jsx(g,{onChange:E,style:{minWidth:300},children:x}),T=e.jsx(g,{onChange:v,style:{minWidth:300},children:x}),o=d.useMemo(()=>u.merge(u.cloneDeep(t??{}),u.cloneDeep(i??{})),[t,i]);return e.jsxs(C,{children:[e.jsx(r.Title,{children:"Users"}),p.isLoading&&e.jsx(r.Paragraph,{children:"Loading..."}),e.jsxs(n,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(n,{orientation:"vertical",children:[e.jsx(r.Title,{level:2,children:"Origin"}),e.jsx(n,{className:"margin",children:N}),e.jsx(r.Paragraph,{children:t?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(n,{orientation:"vertical",children:[e.jsx(r.Title,{level:2,children:"Destination"}),e.jsx(n,{className:"margin",children:T}),e.jsx(r.Paragraph,{children:i?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(i??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(n,{orientation:"vertical",children:[e.jsx(r.Title,{level:2,children:"Merge"}),e.jsx(r.Paragraph,{children:o?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(o??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(q,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(o),disabled:!o?.id,children:['Merge Users "',t.id,'" into "',i.id,'"']})]})]})}export{G as default};
