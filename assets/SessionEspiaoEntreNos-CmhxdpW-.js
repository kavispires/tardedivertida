import{r as f,az as X,cC as ce,j as e,f as p,T as i,aM as U,B as N,e as E,aL as z,aG as w,q as B,aH as le,bL as ue,bs as de,cD as me,z as H,i as pe,cE as he,aY as xe,aW as je,aX as fe}from"./index-Cv4QE8fL.js";import{k as C,S as y,a as L,l as ge,c as A,b as _,d as b,e as v,P as j,u as R,n as Se,m as Ne,H as Te,o as K,g as ye,h as F,i as Ae,j as be}from"./StepSwitcher-Dxw9vo_-.js";import{G as ve}from"./GameOver-Dvg5nvMQ.js";import{u as T}from"./useWhichPlayerIsThe-BWEcFHRP.js";import{P as Ie}from"./PassportIcon-BPpuimdS.js";import{S as Oe}from"./SecretIcon-yuFci5W5.js";import{S as Ee,A as Pe,M as we,H as Ce}from"./SpyNewspaperIcon-BvpWEsT2.js";import{I as m}from"./Instruction-DjcHfDrP.js";import{P as G}from"./PhaseTimerReset-Cjytl55x.js";import{R as Le}from"./RoundAnnouncement-BgFVhuDc.js";import{C as _e}from"./Card-BOK9BiGZ.js";import{R as Re}from"./QuestionCircleFilled-B-Sxc6HI.js";import{u as Z}from"./useCache-47nj_ZCy.js";import{a as Ve,R as Me}from"./UserOutlined-Be4SNXmq.js";import{R as ee}from"./ClearOutlined-C5Hm0aP3.js";import{L as qe}from"./LoupeIcon-tLpeu4Tx.js";import{O as se}from"./OpinionsIcon-C4NtBFs7.js";import{d as ke}from"./WritingIcon-DUQXoZJl.js";import{M as ne}from"./DoubleRightOutlined-UZoL-GoT.js";import{S as P}from"./index-BvttcvOb.js";import{P as oe}from"./index-B9QQI9z-.js";import{R as Fe}from"./AimOutlined-Bc3NmnG1.js";import{V as $e}from"./ViewSwitch-BbBpgean.js";import{N as Ue}from"./NuclearExplosionIcon-Dxr6u5O1.js";import{T as Ge}from"./ThiefIcon-BVAtmGPm.js";import{V as We}from"./ViewOr-DjfYJ4yp.js";import{P as Ye}from"./PeopleAssessmentIcon-ldXuCeCP.js";import"./useBlurCards-CY_WeUQc.js";import"./speech-BoB5_Wzo.js";import"./useDevFeatures-CNKoJv0l.js";import"./RulesModal-BIdOPEFG.js";import"./Game-Dp6RC-lQ.js";import"./WaitingRoomIcon-BMMq__xe.js";import"./AnimatedClockIcon-DPHujuvp.js";import"./useMutation-Cyt-mstu.js";import"./index-CrJzsnSl.js";import"./useBubbleLock-D2WHetRJ.js";import"./PurePanel-CJBE0-7h.js";import"./index-DVsTbh9-.js";import"./Avatar-BLRN-xHT.js";import"./GameBanner-BIl1q-vR.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DfAodAzM.js";import"./InfoCircleOutlined-C09FCIs3.js";import"./index-CEn2LyBF.js";import"./SignIn-B0Eu0Skm.js";import"./GoogleIcon-BZYYIft5.js";import"./Loading-Bkn7hsik.js";import"./AnimatedLoaderIcon-CUCA02Cw.js";import"./LikeFilled-C8ajn-Pn.js";import"./StarFilled-a2JVfQPy.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-g1MLTHX1.js";import"./useMergedState-dPI7kCFg.js";import"./useEvent-yev6kO80.js";import"./progress-BTAw-kwD.js";import"./Overflow-CYna01Wl.js";var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},W.apply(this,arguments)}const Be=(s,n)=>f.createElement(X,W({},s,{ref:n,icon:ze})),He=f.forwardRef(Be);function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},Y.apply(this,arguments)}const De=(s,n)=>f.createElement(X,Y({},s,{ref:n,icon:ce})),ae=f.forwardRef(De);function $({children:s}){return e.jsx(e.Fragment,{children:s})}const S={ASSIGNMENT:"ASSIGNMENT",INVESTIGATION:"INVESTIGATION",ASSESSMENT:"ASSESSMENT",FINAL_ASSESSMENT:"FINAL_ASSESSMENT",RESOLUTION:"RESOLUTION"},V={LAST_QUESTIONER:"LAST_QUESTIONER",MAKE_ACCUSATION:"MAKE_ACCUSATION",SUBMIT_VOTE:"SUBMIT_VOTE",GUESS_LOCATION:"GUESS_LOCATION"},M=({location:s,role:n,header:o})=>{const{translate:a}=p(),c=a("Local Desconhecido","Unknown Location"),l=a("Você é o espião","You are the spy"),r=a(`Você é um(a) ${n}`,`You are a ${n}`);return e.jsx(_e,{color:s==="SPY"?"red":"lime",header:s==="SPY"?c:o,size:"large",footer:n==="SPY"?l:r,className:"e-card",footerClassName:"e-card__footer",children:s==="SPY"?e.jsx(Re,{}):s})};function q({locations:s}){const{translate:n}=p(),{cache:o,setCache:a}=Z(),c=r=>{a(u=>{const t={...u};return t[r]?delete t[r]:t[r]=!0,t})},l=()=>{a(r=>{const u={...r};return Object.keys(u).forEach(t=>{t.startsWith("_")||delete u[t]}),u})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Ve,{})," ",e.jsx(i,{pt:"Possíveis Locais",en:"Possible Locations"}),e.jsx(U,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(ee,{}),onClick:l,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:E("e-list__list","e-list__list--column"),children:s.map(r=>e.jsx("li",{className:E("e-list__item",o[r.id]&&"e-list__item--crossed"),role:"button",onClick:()=>c(r.id),children:r.name},r.id))})]})}function k(){const{translate:s}=p();return e.jsx("textarea",{name:"",id:"",cols:30,rows:10,className:"e-notes",placeholder:s("Escreva anotações aqui se quiser, mas cuidado com o teclado fazendo muito barulho","Write your notes here, but don't make too much noise with those key strokes")})}function Qe({user:s,isUserTheSpy:n,locations:o}){return C(),e.jsxs(y,{className:"e-phase-step",children:[e.jsx(L,{className:"e-phase-title",children:e.jsx(i,{pt:"Você está no(a)...",en:"We are in/at/on..."})}),e.jsx(M,{location:s.location,role:s.role}),e.jsx(ge,{children:e.jsx(i,{pt:"Começar cronômetro",en:"Start Timer"})}),e.jsx(m,{className:"e-phase-instruction",children:n?e.jsx(i,{pt:"Você terá 10 minutos para descobrir onde os outros agentes estão! Pronto?",en:"You have 10 minutes to find out where the other agents are! Ready?"}):e.jsx(i,{pt:"Você terá 10 minutos para descobrir quem é o espião entre nós! Pronto?",en:"You have 10 minutes to find out who is the spy! Ready?"})}),e.jsx(m,{className:"e-lists",children:e.jsx(q,{locations:o})}),e.jsx(k,{})]})}function Je({state:s,players:n}){var r,u,t;const{step:o,goToNextStep:a}=A(0),c=_(n,s),[,l]=T("currentSpyId",s,n);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.ASSIGNMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(Le,{round:s.round,onPressButton:a,time:5,className:"e-round-announcement",children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Há um espião entre nós!",en:"There's a spy among us!"})})}),e.jsx(j,{icon:e.jsx(Ee,{}),title:e.jsx(i,{pt:"Prólogo",en:"Prologue"}),onClose:a,currentRound:(r=s==null?void 0:s.round)==null?void 0:r.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:15,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Estamos todos em um local que somente agentes confiáveis sabem onde é, mas um espião conseguiu se infiltrar em nosso sistema.",e.jsx("br",{}),"Estamos nos comunicando pelo ponto em nossos ouvidos porque somos espiões hi-tech."]}),en:e.jsxs(e.Fragment,{children:["We're all in a secret location that only the most trustworthy agents are assigned to, but a spy has hacked our system.",e.jsx("br",{}),"We are communication through our in-ear spy tech."]})})})}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:e.jsx(Oe,{}),title:e.jsx(i,{pt:"Você tem uma missão",en:"You have one mission"}),onClose:a,currentRound:(u=s==null?void 0:s.round)==null?void 0:u.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:10,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Se você é um agente, sua missão é descobrir quem é o espião.",e.jsx("br",{}),"Se você é o espião, sua missão é descobrir qual local os outros estão."]}),en:e.jsxs(e.Fragment,{children:["If you are an agent, your mission is to figure out who the spy is.",e.jsx("br",{}),"If you are the spy, your mission is to find out where the agents are and nuke it!."]})})})}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:e.jsx(Ie,{}),title:e.jsx(i,{pt:"Mais detalhes",en:"More details"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:30,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Um jogador faz uma pergunta a outro, qualquer tipo de pergunta, e então esse o jogador responde, de qualquer forma.",e.jsx("br",{}),"Você quer ser específico o suficiente para que outros jogadores não te acusem, mas vago o suficiente para que espião não sabia onde estamos.",e.jsx("br",{}),"O jogador que responde se torna o novo 'perguntador'.",e.jsx("br",{}),"Mas fique esperto, você só pode acusar alguém (ou tentar descobrir a localização) uma única vez durante o jogo."]}),en:e.jsxs(e.Fragment,{children:["One player will ask a question to another player, any kind of question, then this player will respond, in any way.",e.jsx("br",{}),"You want to be specific enough so other players don't accuse you, but vague enough so the spy does not figure out where you are.",e.jsx("br",{}),"The asked player becomes the new questioner.",e.jsx("br",{}),"But watch out! You can only accuse someone (or guess the location) a single time during the game."]})})})}),e.jsx(Qe,{user:c,isUserTheSpy:l,locations:s.locations})]})})}function Ke(s){const{translate:n}=p(),o=R({actionName:"submit-guess",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Chute submetido com sucesso","Guess submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu chute","Oops, the application found an error while trying to submit your guess")});return a=>{o({action:V.GUESS_LOCATION,...a})}}function te(s){const{translate:n}=p(),o=R({actionName:"make-accusation",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Acusação submetida com sucesso","Accusation submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua acusação","Oops, the application found an error while trying to submit your acusação")});return a=>{o({action:V.MAKE_ACCUSATION,...a})}}function Xe(s){const{translate:n}=p(),o=R({actionName:"submit-vote",onError:()=>s(1),successMessage:n("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return a=>{o({action:V.SUBMIT_VOTE,...a})}}function Ze(s){const{translate:n}=p(),o=R({actionName:"submit-last-questioner",onError:()=>s(1),successMessage:n("Último perguntador submetido com sucesso","Last questioner submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar o último perguntador","Oops, the application found an error while trying to submit the last questioner")});return a=>{o({action:V.LAST_QUESTIONER,...a})}}function es(s){return n=>{console.log(n)}}function ss({onSendLastQuestioner:s,players:n}){const o=Se();return e.jsxs(ne,{open:o,title:e.jsx(i,{pt:"O Tempo Acabou!",en:"Time's up"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(i,{pt:"Quem foi a última pessoa a responder uma pergunta?",en:"Who was the last person to answer a question?"}),e.jsx(z,{wrap:!0,children:Object.entries(n).map(([a,c])=>e.jsx(N,{type:"default",icon:e.jsx(Me,{}),onClick:()=>s({lastPlayerId:a}),children:c.name},a))})]})}function ns({locations:s,onSend:n}){const{translate:o}=p(),{isLoading:a}=w(),[c,l]=f.useState(""),r=t=>l(t),u=f.useMemo(()=>{var t;return((t=s.find(d=>d.id===c))==null?void 0:t.name)??""},[c,s]);return e.jsxs(B,{className:"e-select-container e-select-container--locations",children:[e.jsx(P,{onChange:r,placeholder:o("Chute um local","Guess location"),children:s.map(t=>e.jsx(P.Option,{value:t.id,children:t.name},`select-${t.id}`))}),e.jsx(oe,{title:e.jsx(i,{pt:`Você só pode chutar uma vez durante o jogo! Tem certeza que quer chutar ${u}?`,en:`You may guess the location only once! Are you sure you want to guess ${u}?`}),onConfirm:()=>n({locationId:c}),okText:"Sim",cancelText:"Não",children:e.jsxs(N,{type:"primary",disabled:!c||a,icon:a?e.jsx(ae,{}):null,children:[e.jsx(i,{pt:"Chutar",en:"Guess"}),u?`: ${u}`:""]})})]})}function ie({players:s,onSend:n,isFinalAssessment:o=!1}){var g,h;const{translate:a}=p(),{isLoading:c}=w(),[l]=le("userId"),[r,u]=f.useState(""),t=Object.values(s).filter(x=>x.id!==l),d=x=>u(x);return e.jsxs(B,{children:[e.jsx(P,{onChange:d,className:"e-select",placeholder:a("Acuse um jogador","Accuse a player"),children:t.map(x=>e.jsx(P.Option,{value:x.id,children:x.name},x.id))}),e.jsx(oe,{title:`${o?"":a("Você só pode acusar uma vez durante o jogo!","You may only make one accusation during the game!")} ${a("Tem certeza que quer acusar","Are you sure you want to accuse")} ${(g=s[r])==null?void 0:g.name}?`,onConfirm:()=>n({targetId:r}),okText:a("Sim","Yes"),cancelText:a("Não","No"),children:e.jsxs(N,{type:"primary",disabled:!r||c,icon:c?e.jsx(ae,{}):null,children:[e.jsx(i,{pt:"Acusar",en:"Accuse"}),r?`: ${(h=s[r])==null?void 0:h.name}`:""]})})]})}function D({players:s}){const{translate:n}=p(),{cache:o,setCache:a}=Z(),c=ue(s),l=u=>{a(t=>{const d={...t};return d[u]?delete d[u]:d[u]=!0,d})},r=()=>{a(u=>{const t={...u};return Object.keys(t).forEach(d=>{d.startsWith("_")&&delete t[d]}),t})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Fe,{})," ",e.jsx(i,{pt:"Suspeitos",en:"Suspects"}),e.jsx(U,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(ee,{}),onClick:r,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:"e-list__list",children:c.map(u=>e.jsxs("li",{className:E("e-list__item",o[u.id]&&"e-list__item--crossed"),role:"button",onClick:()=>l(u.id),children:[u.name," ",u.usedAccusation&&e.jsx(U,{title:"Já usou acusação",children:e.jsx(He,{size:12})})]},u.id))})]})}function os({timer:s,hideAccusationSelect:n,setStep:o}){const a=()=>{n(),o(2)},{minutes:c,seconds:l}=de.useTimer({expiryTimestamp:me(s.timeRemaining-2e3),autoStart:!0,onExpire:a});return e.jsxs("div",{className:"e-timer",children:[c,":",l<10?`0${l}`:l]})}function as({user:s,isUserTheSpy:n,locations:o,players:a,timer:c,onGuessLocation:l,onMakeAccusation:r,onSendLastQuestioner:u,outcome:t,setStep:d}){C();const{translate:g}=p(),[h,x]=f.useState(!0),{notification:I}=H.useApp();f.useEffect(()=>{(t==null?void 0:t.type)==="VOTE_FAIL"&&I.info({message:g("A votação não foi unânime","The voting was not unanimous"),description:t.votedYes?`Votaram sim: ${t.votedYes}`:"Ninguém votou sim",duration:10})},[t==null?void 0:t.type]);const O=()=>{x(!1)};return e.jsxs(y,{className:"e-phase-step",children:[e.jsxs("div",{className:"e-phase-step-header",children:[e.jsx("div",{className:"e-phase-step-header__timer-container",children:e.jsx(os,{timer:c,hideAccusationSelect:O,setStep:d})}),e.jsxs("div",{className:"e-phase-step-header__center",children:[e.jsx(pe,{level:2,className:"e-phase-title",children:n?e.jsx(i,{pt:"Onde eles estão?",en:"Where are they?"}):e.jsx(i,{pt:"Quem é o espião?",en:"Who is the spy?"})}),e.jsx(M,{location:s.location,role:s.role})]})]}),h&&e.jsxs(z,{children:[n&&e.jsx(ns,{locations:o,onSend:l}),"|",s!=null&&s.usedAccusation?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você já usou sua chance de acusar",en:"You already used your accusation"})}):e.jsx(ie,{players:a,onSend:r})]}),e.jsxs(m,{className:"e-lists",children:[e.jsx(D,{players:a}),e.jsx(q,{locations:o})]}),e.jsx(k,{})]})}function ts({state:s,players:n}){var I,O,Q,J;const{translate:o}=p(),{step:a,goToNextStep:c,setStep:l}=A(0),r=_(n,s),{notification:u}=H.useApp(),[,t]=T("currentSpyId",s,n),[d]=T("startingPlayerId",s,n),g=Ke(l),h=te(l),x=Ze(l);return f.useEffect(()=>{s.timeRemaining>59e4&&d.name&&u.info({message:o("10 minutos!","10 minutes!"),description:o(`${d.name} começa perguntando!`,`${d.name} starts questioning!`),duration:10})},[d.name]),e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.INVESTIGATION,className:"e-phase",children:e.jsxs(v,{step:a,players:n,children:[((I=s==null?void 0:s.outcome)==null?void 0:I.type)!=="VOTE_FAIL"?e.jsx(j,{icon:e.jsx(qe,{}),title:e.jsx(i,{pt:"Investigação",en:"Investigation"}),onClose:c,currentRound:(O=s==null?void 0:s.round)==null?void 0:O.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block"}):e.jsx(j,{icon:e.jsx(se,{}),title:e.jsx(i,{pt:"A investigação continua",en:"The investigation continues"}),onClose:c,currentRound:(Q=s==null?void 0:s.round)==null?void 0:Q.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(as,{user:r,isUserTheSpy:t,locations:s.locations,players:n,timer:s.timer,onGuessLocation:g,onMakeAccusation:h,onSendLastQuestioner:x,outcome:s.outcome,setStep:l}),e.jsxs(j,{icon:e.jsx(ke,{}),title:e.jsx(i,{pt:"O tempo acabou!!!",en:"Time's up!!!"}),unskippable:!0,duration:300,onClose:()=>{},currentRound:(J=s==null?void 0:s.round)==null?void 0:J.current,buttonText:"",className:"e-phase-announcement",type:"block",children:[e.jsx(m,{children:e.jsx(i,{pt:"Preparado para a avaliação final?",en:"Are you ready for the final assessment?"})}),e.jsx(ss,{onSendLastQuestioner:x,players:n})]})]})})}function is({user:s,locations:n,players:o,onSubmitVote:a,accuser:c,isUserTheAccuser:l,target:r,isUserTheTarget:u}){const{translate:t}=p(),{isLoading:d}=w();return e.jsxs(y,{className:"e-phase-step",children:[e.jsx(L,{className:"e-phase-title",children:e.jsx(i,{pt:`${c.name} está acusando ${r.name} de ser o espião. Concorda?`,en:`${c.name} is accusing ${r.name} to be the spy. Do you agree?`})}),e.jsxs($e,{cases:[l,u,!0],children:[e.jsx($,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, você quem acusou!",en:"You do not join the voting, after all, you triggered it!"})})},"accuser"),e.jsx($,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, é você quem está no paredão!",en:"You do not joint the voting, after all, you are the target"})})},"target"),e.jsx($,{children:s.ready?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Voto computado",en:"Vote accepted"})}):e.jsxs(B,{children:[e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!0}),children:e.jsx(i,{pt:"Também acho!",en:"Agree!"})}),e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!1}),children:e.jsx(i,{pt:"Não é ele(a)",en:"It's not them"})})]})},"others")]}),e.jsx(M,{location:s.location,role:s.role}),e.jsx(Ne,{players:o,readyText:t("Votei","I voted"),readyTextPlural:t("Votamos","We voted"),hideNames:!0}),e.jsxs(m,{className:"e-lists",children:[e.jsx(D,{players:o}),e.jsx(q,{locations:n})]}),e.jsx(k,{})]})}function rs({state:s,players:n}){var h;const{step:o,goToNextStep:a,setStep:c}=A(0),l=_(n,s),[r,u]=T("accuserId",s,n),[t,d]=T("targetId",s,n),g=Xe(c);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(j,{icon:e.jsx(Pe,{}),title:e.jsx(i,{pt:"Acusação!",en:"Accusation!"}),onClose:a,currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--alert",duration:5,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Alguém foi acusado! Bafo!",e.jsx("br",{}),"Apenas se a votação for unanime que o resultado é revelado."]}),en:e.jsxs(e.Fragment,{children:["Someone was accused! Drama!!!",e.jsx("br",{}),"The solution is revealed only if the voting is unanimous."]})})})}),e.jsx(is,{user:l,locations:s.locations,players:n,onSubmitVote:g,accuser:r,isUserTheAccuser:u,target:t,isUserTheTarget:d})]})})}const cs=(s,n,o,a)=>{const c=a.find(l=>l.id===(s==null?void 0:s.guess))??{};return{isPlayerVictory:s.isSpyWin===n,isUserTheSpy:n,wasABadVoting:s.isSpyWin&&o>0,wasAnAccusationAttempt:s.type==="SPY_FOUND",didSpyGuess:s.type==="SPY_GUESS",didTheSpyWin:s.isSpyWin,phaseIcon:s.isSpyWin?"nuclear-explosion":"handcuffs",guess:c,currentLocation:s.currentLocation}};function ls({players:s,target:n,resolutionStatus:o,currentSpy:a,onProgressGame:c}){var r;C();const{isLoading:l}=w();return e.jsxs(y,{className:"e-phase-step",children:[e.jsx(L,{className:E("e-phase-title",!o.isPlayerVictory&&"e-phase-title--fail"),children:o.isPlayerVictory?e.jsx(i,{pt:"Missão Cumprida!",en:"Mission Accomplished!"}):e.jsx(i,{pt:"Missão Fracassada",en:"Mission Failed"})}),o.wasAnAccusationAttempt&&n&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Os agentes tentaram incriminar ",n.name,o.didTheSpyWin?" e erraram feio!":" e acertaram na mosca!",e.jsx("br",{}),o.didTheSpyWin?`O espião era ${a.name}! Todos os segredos da agência foram revelados e o mundo vai acabar.`:"Parabéns! O mundo está salvo graças a você.",e.jsx("br",{}),o.wasABadVoting&&"Da próxima vez, discutam mais antes de fazerem uma votação precipitada."]}),en:e.jsxs(e.Fragment,{children:["The agents tried to pin ",n.name,o.didTheSpyWin?" and got it all wrong!":" and hit the bull's eye!",e.jsx("br",{}),o.didTheSpyWin?`The spy was ${a.name}! All of the agency secrets were revealed and the world will end.`:"Congratulations! The world is safe and sound thanks to you.",e.jsx("br",{}),o.wasABadVoting&&"Next time, discuss more before making a rash decision."]})})}),o.didSpyGuess&&o.currentLocation&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["O espião disse que o local é ",o.guess.name,o.didTheSpyWin?" e acertou na mosca!":` e errou feio! Os Agentes estão num(a) ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"Todos os segredos da agência foram revelados e o mundo vai acabar.":"Foi por pouco, mas não foi dessa vez que o mal venceu."]}),en:e.jsxs(e.Fragment,{children:["The spy guessed the location: ",o.guess.name,o.didTheSpyWin?" and hit the bull's eye!":` and got it all wrong! The agents were at a ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"All of the agency secrets were revealed and the world will end...":"That was close... but evil won't win this time."]})})}),e.jsxs(m,{className:"e-phase-instruction",children:[e.jsx("h4",{children:(r=o.currentLocation)==null?void 0:r.name}),e.jsx(i,{pt:"Disfarces dos infiltrados:",en:"Agent's roles:"}),Object.values(s).map(({id:u,name:t,role:d})=>e.jsxs("li",{children:[t," ",e.jsx(i,{pt:"como",en:"as"})," ",d==="SPY"?e.jsx(i,{pt:"ESPIÃO",en:"SPY"}):d]},`role-list-${u}`))]}),e.jsxs(Te,{children:[e.jsx(K,{onClick:()=>c({continue:!0}),disabled:l,children:e.jsx(i,{pt:"Jogar mais uma rodada",en:"Play another round"})}),e.jsx(K,{onClick:()=>c({end:!0}),disabled:l,children:e.jsx(i,{pt:"Terminar Jogo",en:"End Game"})})]})]})}function us({state:s,players:n}){var d,g,h;const{step:o,goToNextStep:a}=A(0),[c,l]=T("currentSpyId",s,n),[r]=T("targetId",s,n),u=es(),t=f.useMemo(()=>cs(s.resolution,l,s.timeRemaining,s.locations),[s.resolution,l,s.timeRemaining,s.locations]);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.RESOLUTION,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsxs(We,{condition:t.didSpyGuess,children:[e.jsx(j,{icon:e.jsx(we,{}),title:e.jsx(i,{pt:"O espião tentou adivinhar o local",en:"The spy tried to guess the location"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(j,{icon:e.jsx(Ge,{}),title:e.jsx(i,{pt:"A votação foi unanime!",en:"The vote was unanimous!"}),onClose:a,currentRound:(g=s==null?void 0:s.round)==null?void 0:g.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"})]}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:t.phaseIcon==="nuclear-explosion"?e.jsx(Ue,{}):e.jsx(Ce,{}),title:e.jsx(i,{pt:"O fim chegou!",en:"The end is here!"}),onClose:a,currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(ls,{players:n,target:r,resolutionStatus:t,currentSpy:c,onProgressGame:u})]})})}function re({finalAssessment:s,players:n}){const{playerOrder:o,playerOrderIndex:a}=s,c=n[o[a]],l=he(o,n).join(", ");return e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Já que vocês falharam em encontrar o espião, há uma última possibilidade!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Cada jogador, começando por ",c.name,", faz uma acusação."]}):e.jsxs("li",{children:["Agora é a vez de ",c.name," faz uma acusação."]}),e.jsx("li",{children:"Se a votação for unânime em qualquer uma das votações, o jogo acaba e revelam-se os papéis."}),e.jsx("li",{children:"Sem discussão dessa vez, simplesmente acuse alguém! Não temos mais tempo!"}),e.jsxs("li",{children:["A ordem será essa: ",l]})]})]}),en:e.jsxs(e.Fragment,{children:["Since you've failed to find the spy, here's a last resort!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Each player will, starting with ",c.name,", will make an accusation."]}):e.jsxs("li",{children:["Now it's time for ",c.name," to make an accusation."]}),e.jsx("li",{children:"If the voting result is unanimous, the game is over and the roles are revealed."}),e.jsx("li",{children:"No discussion, just accuse somebody! There's no time anymore!"}),e.jsxs("li",{children:["The order is: ",l]})]})]})})})}function ds({isModalVisible:s,onMakeAccusation:n,players:o,finalAssessment:a}){return e.jsxs(ne,{open:s,title:e.jsx(i,{pt:"Quem você vai acusar?",en:"Who are you gonna accuse?"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(re,{finalAssessment:a,players:o}),e.jsx(i,{pt:"Não há tempo pra pensar, escolha alguém!",en:"There's no time to think, just choose someone"}),e.jsx(z,{children:e.jsx(ie,{players:o,onSend:n,isFinalAssessment:!0})})]})}function ms({finalAssessment:s,players:n,user:o,locations:a,isUserTheAccuser:c,onMakeAccusation:l,outcome:r}){C();const{notification:u}=H.useApp(),{translate:t}=p();return f.useEffect(()=>{(r==null?void 0:r.type)==="VOTE_FAIL"&&u.info({message:t("A votação não foi unânime","The voting was not unanimous"),description:r.votedYes?`Votaram sim: ${r.votedYes}`:"Ninguém votou sim",duration:10})},[r==null?void 0:r.type]),e.jsxs(y,{children:[e.jsx(L,{className:"e-phase-title",children:e.jsx(i,{pt:"Última Chance!",en:"Last chance!"})}),e.jsx(ds,{isModalVisible:c,onMakeAccusation:l,players:n,finalAssessment:s}),e.jsx(re,{finalAssessment:s,players:n}),e.jsx(M,{location:o.location,role:o.role}),e.jsxs(m,{className:"e-lists",children:[e.jsx(D,{players:n}),e.jsx(q,{locations:a})]}),e.jsx(k,{})]})}function ps({state:s,players:n}){var t,d;const{step:o,goToNextStep:a,setStep:c}=A(0),l=_(n,s),r=te(c),u=s.finalAssessment.playerOrder[s.finalAssessment.playerOrderIndex]===l.id;return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.FINAL_ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[s.finalAssessment.playerOrderIndex===0?e.jsx(j,{icon:e.jsx(Ye,{}),title:e.jsx(i,{pt:"O tempo acabou!",en:"Time's up!"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement",duration:2,type:"block"}):e.jsx(j,{icon:e.jsx(se,{}),title:e.jsx(i,{pt:"A avaliação final continua",en:"The final assessment continues"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(ms,{onMakeAccusation:r,players:n,finalAssessment:s.finalAssessment,outcome:s.outcome,user:l,locations:s.locations,isUserTheAccuser:u})]})})}function hs(s){if(s&&!s.phase)return je;switch(s.phase){case F.DEFAULT.LOBBY:return be;case F.DEFAULT.SETUP:return Ae;case S.ASSIGNMENT:return Je;case S.INVESTIGATION:return ts;case S.ASSESSMENT:return rs;case S.FINAL_ASSESSMENT:return ps;case S.RESOLUTION:return us;case F.DEFAULT.GAME_OVER:return ve;default:return fe}}function Sn(){return e.jsx(ye,{gameCollection:xe.ESPIAO_ENTRE_NOS,getActiveComponent:hs})}export{Sn as default};
