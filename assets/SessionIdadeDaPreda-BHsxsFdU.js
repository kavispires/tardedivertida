import{r as g,aB as K,a5 as J,dF as Ce,f as I,o as A,l as ve,bI as ye,j as e,n as O,bC as Ie,bD as be,e as B,F as x,D as H,aM as de,M as ne,B as k,T as l,K as ue,aL as R,ca as X,c7 as Se,dG as Ne,I as we,cb as Te,aY as _e}from"./index-DWp2cmsF.js";import{u as re,S as U,a as z,b as Q,c as V,d as L,e as W,P as q,j as Ee,k as Pe,g as Ae,h as ke,i as Re}from"./StepSwitcher-CY0tkA6R.js";import{C as Me}from"./CreateIcon-TWZLbD5p.js";import{I as se}from"./Instruction-zjNUh6ff.js";import{T as G}from"./TextHighlight-BzNDrbDD.js";import{R as Oe}from"./RoundAnnouncement-Dfx52bOq.js";import{u as Be}from"./useMakeMeReady-DNwd-_94.js";import{u as Z}from"./useMock-w8JG7UAt.js";import{I as b}from"./ItemCard-eIqnPuJ9.js";import{R as D}from"./RuleInstruction-CC8QQRrT.js";import{u as me}from"./useCache-CrxxF6Su.js";import{S as te}from"./SpeakButton-DSiQQPgb.js";import{A as pe}from"./Avatar-rVRMW9ne.js";import{C as ae}from"./index-BQlLTpyR.js";import{P as Ge}from"./index-DXWNkNoz.js";import{R as De}from"./DeleteOutlined-DQ_1NoL_.js";import{C as Fe}from"./Collapse-Ck0AmZAe.js";import{R as Ue}from"./index-WtJ1ZYKP.js";import{P as ze,E as Ve}from"./WritingIcon-mGbin45x.js";import{P as Le}from"./PencilIcon-BuZHnX6R.js";import{D as F}from"./index-CitnV17G.js";import{u as We}from"./useVotingMatch-CFKdzuxD.js";import{D as qe}from"./DevButton-GmJ-LP9k.js";import{S as $e}from"./SpeechBubble-z_xty9F4.js";import{u as He}from"./SlideShowControls-CC3Em56I.js";import{B as Ye}from"./BooksIcon-Ce-MATBS.js";import{P as $}from"./PointsHighlight-Ctc5QPdm.js";import{P as Ke}from"./PopoverRule-k0jkWL9U.js";import{S as Je}from"./SlideShow-BtVY0m_E.js";import{S as Y,a as Xe,b as Qe,c as Ze}from"./SlideShowComposableComponents-BQr1_9p-.js";import{S as es}from"./StarIcon-7PB8W8YO.js";import{A as ss}from"./AvatarEntry-CVYRTCfc.js";import{S as ns}from"./StepRankingWrapper-ClyBHSr5.js";import{T as rs}from"./TrophyIcon-CYHsz4nn.js";import{G as ts}from"./GameOverWrapper-Cf6F6Dph.js";import{T as as}from"./TitledContainer-Bh9PaWzs.js";import"./useBlurCards-B5D5NnkZ.js";import"./speech-Blo76OOO.js";import"./useDevFeatures-BD23XSo4.js";import"./RulesModal-CMO-jdz6.js";import"./DoubleRightOutlined-C15VFiHm.js";import"./PurePanel-BsDSjzJL.js";import"./Game-BbkJ-ZoQ.js";import"./useMutation-DLZVHdbI.js";import"./index-Dfz-YDsc.js";import"./index-CwwgfgM-.js";import"./Overflow-BBNrnwXU.js";import"./useEvent-GuP_lPR4.js";import"./index-Bkt7Tcy_.js";import"./GameBanner-BNUEX3HY.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-S5BPv0wu.js";import"./Loading-BJ0Vq5T1.js";import"./useBubbleLock-B88B2t8B.js";import"./AnimatedLoaderIcon-BStiDxMf.js";import"./InfoCircleOutlined-DEQWeUq8.js";import"./SignIn-Bck2AWPL.js";import"./GoogleIcon-0EVM9iwk.js";import"./WaitingRoomIcon-D0WK4k-0.js";import"./AnimatedClockIcon-dTej6M-P.js";import"./LikeFilled-BVHg6IUU.js";import"./Sprite-CAbpsOCu.js";import"./WarningOutlined-8Fu1zRgu.js";import"./StarFilled-Ba1Wlb_y.js";import"./StarFilled-CNctUIhy.js";import"./AudioIcon-CZXgmoOq.js";import"./index-DmfCv98L.js";import"./EllipsisOutlined-B871xC-b.js";import"./PlusOutlined-ByZyTB3m.js";import"./useId-DURgZtlS.js";import"./StepBackwardOutlined-Cs8heHZL.js";import"./TrophyOutlined-DxNire32.js";import"./MetricHighlight-QXZlme0S.js";import"./GarbageIcon-GNvioFwR.js";import"./RankingBoard-BxoSxfuu.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./TheEndIcon-CW3Zk0Ns.js";import"./ArrowRightOutlined-A-JRxfxG.js";import"./useMergedState-D6okRsHW.js";import"./progress-CDx_vk2Z.js";var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},os={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},cs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},ls=function(s,r){return g.createElement(K,J({},s,{ref:r,icon:Ce}))},ds=g.forwardRef(ls),us=function(s,r){return g.createElement(K,J({},s,{ref:r,icon:is}))},ms=g.forwardRef(us),ps=function(s,r){return g.createElement(K,J({},s,{ref:r,icon:os}))},hs=g.forwardRef(ps),xs=function(s,r){return g.createElement(K,J({},s,{ref:r,icon:cs}))},js=g.forwardRef(xs);const S={CREATING_CONCEPTS:"CREATING_CONCEPTS",CONCEPTS_REVEAL:"CONCEPTS_REVEAL",COMMUNICATING_THINGS:"COMMUNICATING_THINGS",GUESSING:"GUESSING",RESULTS:"RESULTS"},ie={SUBMIT_CONCEPTS:"SUBMIT_CONCEPTS",SUBMIT_NAME:"SUBMIT_NAME",SUBMIT_GUESSES:"SUBMIT_GUESSES"},gs=7,he={yes:{en:"yes",pt:"sim"},no:{en:"no/not",pt:"não"},maybe:{en:"maybe/sort of",pt:"talvez/meio"},very:{en:"very",pt:"muito"},question:{en:"question",pt:"dúvida/pergunta"}};function fs(n){const{translate:s}=I(),r=re({actionName:"submit-concept",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Conceito submetido com sucesso","Concept submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu conceito","Oops, the application found an error while trying to submit your concept")});return t=>{r({action:ie.SUBMIT_CONCEPTS,...t})}}function Cs(n){const{translate:s}=I();return Be({onSuccess:()=>n(2),successMessage:s("Pronto! Aguarde os outros jogadores estarem prontos","Done! Now wait for the other players"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar confirmar sua porta","Oops, the application failed to confirm your door")})}function vs(n){const{translate:s}=I(),r=re({actionName:"submit-name",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Nome submetido com sucesso","Name submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu nome","Oops, the application found an error while trying to submit your name")});return t=>{r({action:ie.SUBMIT_NAME,...t})}}function ys(n){const{translate:s}=I(),r=re({actionName:"submit-guesses",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Palpite submetido com sucesso","Guess submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu palpite","Oops, the application found an error while trying to submit your guess")});return t=>{r({action:ie.SUBMIT_GUESSES,...t})}}const Is=(n,s,r)=>{const t={};return r.forEach(o=>{if(o.playerId===n.id)return;const i=[o.itemId,o.itemId,...A.sampleSize(s,3).map(a=>a.id)];t[o.playerId]=A.sample(i)||o.itemId}),{guesses:t}};function E(){return ve(12,{minWidth:48,maxWidth:72,margin:12})}function bs({items:n,selectedItems:s=[],onSelectItem:r,currentAge:t}){const{dualTranslate:o,language:i}=I(),a=g.useMemo(()=>A.orderBy(Object.values(n),[m=>ye(m.name[i])],["asc"]),[n,i]),c=E(),h=Math.min(12,Math.floor(a.length/6));return e.jsx("div",{className:"idade-items-board",style:{gridTemplateColumns:`repeat(${h}, 1fr)`},children:a.map((m,u)=>{var f;const d=(f=m.decks)==null?void 0:f.includes(`age${t}`);return e.jsx(O,{onClick:()=>r(m.id),children:e.jsx(Ie.div,{...be(d?"bounceIn":"flipInX",{delay:(d?1:0)+.1*(Math.floor(u/h)+u%h)}),children:e.jsx(b,{id:m.id,title:o(m.name),width:c,className:B({"idade-items-board__item--selected":s.includes(m.id),"idade-items-board__item--current-age":t>1&&d})},m.id)})},m.id)})})}function oe({players:n,user:s,concept:r,onChange:t,showMeaning:o,isEditing:i,toggleEditing:a,onDelete:c,onSelect:h,className:m}){const u=E(),{dualTranslate:d}=I(),[f,N]=g.useState(r.meaning),y=()=>{t==null||t({...r,meaning:f}),a==null||a(null)},w=j=>{const C={...r,itemsIds:r.itemsIds.filter(T=>T!==j)};t==null||t(C)},v=Array.from({length:10-r.itemsIds.length},(j,C)=>({id:`placeholder-${C}`}));return e.jsxs(ae,{size:"small",className:B("concept-block",m,{"concept-block--editing":i}),style:{width:u*3.25},children:[e.jsxs(x,{className:"concept-block__header",justify:"space-between",align:"center",children:[e.jsxs("div",{className:"concept-block__sound",children:[e.jsx(te,{text:r.syllable}),e.jsx("div",{className:B("concept-block__syllable",{"concept-block__syllable--button":!!h}),onClick:()=>h==null?void 0:h(r.id),children:e.jsx(H,{children:r.syllable})})]}),e.jsx(de,{title:d({en:`Created by ${n[r.playerId].name}`,pt:`Criado por ${n[r.playerId].name}`}),children:e.jsx(pe,{id:n[r.playerId].avatarId,size:"small"})})]}),o&&e.jsx(ne,{defaultValue:r.meaning,readOnly:!i,placeholder:d({en:"Write the meaning here",pt:"Escreva o significado aqui"}),onChange:j=>N(j.target.value),variant:i?"outlined":"filled"}),e.jsxs(x,{wrap:"wrap",gap:6,className:"my-2",children:[r.itemsIds.map(j=>e.jsx(O,{onClick:i?()=>w(j):void 0,className:"idade-transparent-button",children:e.jsx(b,{width:u/2,id:j})},j)),!!a&&v.map(j=>e.jsx("div",{className:"concept-block__placeholder-item",children:e.jsx(b,{width:u/2,id:"0"})},j.id))]}),!!a&&e.jsx(x,{justify:"flex-end",gap:6,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{title:d({en:"Are you sure you want to delete this concept?",pt:"Tem certeza de que deseja deletar este conceito?"}),onConfirm:()=>c==null?void 0:c(r.id),children:e.jsx(k,{type:"dashed",danger:!0,size:"small",disabled:!c,children:e.jsx(De,{})})}),e.jsx(k,{type:"primary",size:"small",onClick:y,children:e.jsx(js,{})})]}):e.jsx(e.Fragment,{children:e.jsx(de,{title:d({en:"Edit Concept",pt:"Editar Conceito"}),children:e.jsx(k,{type:"dashed",size:"small",onClick:()=>a==null?void 0:a(r.id),children:e.jsx(ds,{})})})})}),!t&&e.jsx(Ss,{concept:r,userId:s==null?void 0:s.id})]})}function Ss({concept:n,userId:s}){const{dualTranslate:r}=I(),{cache:t,setCache:o}=me(),i=t[n.id]??"",a=s===n.playerId;return e.jsx(ne,{placeholder:r({en:"Notes",pt:"Anotações"}),className:"concept-block__notes",size:"small",value:a?n.meaning:i,onChange:c=>o({...t,[n.id]:c.target.value}),disabled:a})}function Ns({concept:n,onSelect:s}){const r=E(),{dualTranslate:t}=I();return e.jsxs(ae,{size:"small",className:"concept-block",style:{width:r*3},children:[e.jsx(x,{className:"concept-block__header",justify:"space-between",align:"center",children:e.jsxs("div",{className:"concept-block__sound",children:[e.jsx(te,{text:n.syllable}),e.jsx("div",{className:B("concept-block__syllable",{"concept-block__syllable--button":!!s}),onClick:()=>s==null?void 0:s(n.id),children:e.jsx(H,{children:n.syllable})})]})}),e.jsx(ne,{defaultValue:t(he[n.meaning]),readOnly:!0,variant:"filled",className:"mt-2"})]})}function ce({user:n,players:s,items:r,basicConcepts:t,concepts:o,onSelectConcept:i,pool:a,defaultActiveKey:c}){const h=E(),m=g.useMemo(()=>{const u=[];return t&&u.push({key:"basic-concepts",label:e.jsx(l,{pt:"Conceitos Básicos",en:"Basic Concepts"}),children:e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:t.map(d=>e.jsx(Ns,{concept:d,onSelect:i},d.id))})}),u.push({key:"concepts",label:e.jsx(l,{pt:"Conceitos Criados",en:"Created Concepts"}),children:e.jsx(ws,{user:n,players:s,items:r,concepts:o,onSelectConcept:i})}),a&&a.length>0&&u.push({key:"pool",label:e.jsx(l,{pt:"Itens da Rodada",en:"Round's Items"}),children:e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:a==null?void 0:a.map(d=>e.jsx(b,{id:d.id,width:h},d.id))})}),u},[t,o,r,h,i,s,a,n]);return e.jsx("div",{className:"full-width contained",children:e.jsx(Fe,{items:m,className:"full-width",size:"small",defaultActiveKey:c})})}function ws({user:n,players:s,items:r,concepts:t,onSelectConcept:o}){const[i,a]=g.useState("default"),{cache:c}=me(),h=g.useMemo(()=>i==="default"?t:i==="player"?A.orderBy(t,u=>{var d;return u.playerId===n.id?0:(d=s[u.playerId])==null?void 0:d.name.toLowerCase()},["asc"]):i==="items"?A.orderBy(t,["itemsIds.length"],["desc"]):i==="notes"?A.orderBy(t,u=>{var d;return((d=u.meaning)==null?void 0:d.toLowerCase())||c[u.id].toLowerCase()||""},["asc"]):t,[t,s,n,o,i,c]),m=[{label:e.jsx(l,{pt:"Sílaba",en:"Syllable"}),value:"default"},{label:e.jsx(l,{pt:"Jogador",en:"Player"}),value:"player"},{label:e.jsx(l,{pt:"Itens",en:"Items"}),value:"items"},{label:e.jsx(l,{pt:"Anotações",en:"Notes"}),value:"notes"}];return e.jsxs(x,{vertical:!0,children:[e.jsxs(x,{children:[e.jsx(ue.Text,{children:"Organizar por:"}),e.jsx(Ue.Group,{onChange:u=>a(u.target.value),value:i,options:m,className:"ml-2"})]}),e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:h.map(u=>e.jsx(oe,{players:s,items:r,concept:u,user:n,onSelect:o},u.id))})]})}function Ts({players:n,user:s,items:r,maxProposals:t,round:o,concepts:i,onSubmitConcepts:a}){var le;const{dualTranslate:c}=I();Z();const h=s.proposedConcepts||[],[m,u]=g.useState(h),[d,f]=g.useState(null),N=m.length>0&&!m[m.length-1].meaning&&m[m.length-1].itemsIds.length>=2,y=m.find(p=>p.id===d),w=m.length-h.length,v=m.every(p=>p.meaning&&p.itemsIds.length>=2&&p.itemsIds.length<=10),j=()=>{const p=`c-${o.current}-${s.id}-${Date.now()}`;u(_=>[..._,{id:p,key:"",soundId:"",itemsIds:[],meaning:"",syllable:{pt:"?",en:"?"},playerId:s.id,age:o.current,type:"custom"}]),f(p)},C=p=>{f(d===p?null:p)},T=p=>{u(_=>_.map(P=>P.id===p.id?p:P))},ge=p=>{d!==null&&u(_=>{const P=[..._],M=P.find(ee=>ee.id===d);return M?(M.itemsIds.includes(p)?M.itemsIds=M.itemsIds.filter(ee=>ee!==p):M.itemsIds.push(p),P):_})},fe=p=>{u(_=>_.filter(P=>P.id!==p)),d===p&&f(null)};return e.jsxs(U,{fullWidth:!0,children:[e.jsx(z,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Criação de Conceitos"}),en:e.jsx(e.Fragment,{children:"Concept Creation"})})}),e.jsx(D,{type:"action",children:e.jsx(l,{en:e.jsxs(e.Fragment,{children:["Select 2-10 items to create a concept, then propose a meaning for it. ",e.jsx("br",{}),"The meaning is secret to you and will be only revealed at the end of the game.",e.jsx("br",{}),"A syllable/sound will be assigned to the concept, which you can use to refer to it later.",e.jsx("br",{}),"You can create up to ",t," concepts this round."]}),pt:e.jsxs(e.Fragment,{children:["Selecione 3-10 itens para criar um conceito e proponha um significado para ele. ",e.jsx("br",{}),"O significado é secreto para você e só será revelado no final do jogo.",e.jsx("br",{}),"Uma sílaba/som será atribuída ao conceito que você usará para se referir a ele mais tarde.",e.jsx("br",{}),"Você pode criar até ",t," conceitos nesta rodada."]})})}),e.jsx(bs,{items:r,selectedItems:y==null?void 0:y.itemsIds,onSelectItem:ge,currentAge:o.current}),e.jsx(R,{className:"new-concepts-container",children:e.jsxs(x,{wrap:"wrap",gap:12,align:"center",children:[m.map(p=>e.jsx(oe,{players:n,concept:p,onChange:T,items:r,showMeaning:!0,toggleEditing:C,isEditing:d===p.id,onDelete:h.includes(p.id)?void 0:fe},p.id)),e.jsx(k,{disabled:w>=t||N,onClick:j,icon:e.jsx(ms,{}),children:e.jsx(l,{pt:"Criar Conceito",en:"Create Concept"})})]})}),m.length-(((le=s.proposedConcepts)==null?void 0:le.length)??0)>0&&e.jsx(R,{children:e.jsx(X,{size:"large",disabled:!!d||!v,onClick:()=>a({proposedConcepts:m}),children:e.jsx(l,{pt:"Enviar Conceitos",en:"Send Concepts"})})}),e.jsxs(D,{type:"tip",children:[e.jsx(l,{pt:"Na próxima fase do jogo, você terá que dar nome a uma dessa coisas abaixo, portanto, tente criar conceitos que te ajude nessa tarefa.",en:"In the next phase of the game, you will have to name one of the things below, so try to create concepts that help you with this task."}),e.jsx(x,{justify:"center",align:"center",className:"mt-2",gap:12,children:s.hand.map(p=>e.jsx(b,{id:p.id,title:c(p.name),width:48},p.id))}),e.jsx(l,{pt:"Sugestões de conceitos: animal, vôo, cor, pequeno, imaginário, natural, peludo, afiado, etc.",en:"Concept suggestions: animal, flight, color, small, imaginary, natural, furry, sharp, etc."})]}),i.length>0&&e.jsx(ce,{user:s,players:n,items:r,concepts:i})]})}function _s({players:n,state:s}){var c,h;const r=Q(n,s),{step:t,goToNextStep:o,setStep:i}=V(),a=fs(i);return e.jsx(L,{phase:s==null?void 0:s.phase,allowedPhase:S.CREATING_CONCEPTS,children:e.jsxs(W,{step:t,players:n,children:[e.jsx(Oe,{round:s==null?void 0:s.round,onPressButton:o,buttonText:" ",time:5,children:e.jsx(se,{contained:!0,children:Es((c=s==null?void 0:s.round)==null?void 0:c.current)})}),e.jsx(q,{icon:e.jsx(Me,{}),title:e.jsx(l,{pt:"Criação de Conceitos",en:"Concept Creation"}),currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,type:"block",onClose:o,children:e.jsx(se,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Crie até ",e.jsx(G,{children:s.maxProposals})," novos conceitos"]}),en:e.jsxs(e.Fragment,{children:["Create up to ",e.jsx(G,{children:s.maxProposals})," new concepts"]})})})}),e.jsx(Ts,{user:r,players:n,basicConcepts:s.basicConcepts,concepts:s.concepts,maxProposals:s.maxProposals,round:s.round,items:s.items,onSubmitConcepts:a})]})})}const Es=n=>{switch(n){case 1:return e.jsx(l,{pt:"Idade da Pedra",en:"Stone Age"});case 2:return e.jsx(l,{pt:"Idade Medieval",en:"Medieval Age"});case 3:return e.jsx(l,{pt:"Idade Industrial",en:"Industrial Age"});case 4:return e.jsx(l,{pt:"Idade Moderna",en:"Modern Age"});case 5:return e.jsx(l,{pt:"O Futuro?",en:"Future?"});default:return e.jsx(l,{pt:"Uma nova era se aproxima",en:"A new era is coming"})}};function Ps({user:n,players:s,announcement:r,items:t,round:o,concepts:i,onMakeMeReady:a}){return Z(),e.jsxs(U,{fullWidth:!0,announcement:r,children:[e.jsx(z,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Novos Conceitos"}),en:e.jsx(e.Fragment,{children:"New Concepts"})})}),e.jsx(D,{type:"action",children:e.jsx(l,{pt:"Analise os novos conceitos! Você pode anotar o que você achar que é o significado de cada um. Aperte o botão quando estiver pronto.",en:"Review the new concepts! You can jot down what you think each one means. Press the button when you're ready."})}),e.jsx(R,{children:e.jsx(X,{type:"primary",size:"large",onClick:a,children:e.jsx(l,{pt:"Pronto",en:"Ready"})})}),e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:12,className:"my-2",children:i.map(c=>e.jsx(oe,{players:s,items:t,concept:c,user:n,className:c.age===o.current?"new-concept-block":""},c.id))})]})}function As({players:n,state:s}){var c;const r=Q(n,s),{step:t,setStep:o}=V(),i=Cs(o),a=e.jsx(q,{icon:e.jsx(ze,{}),title:e.jsx(l,{pt:"Novos Conceitos",en:"New Concepts"}),currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"overlay"});return e.jsx(L,{phase:s==null?void 0:s.phase,allowedPhase:S.CONCEPTS_REVEAL,children:e.jsx(W,{step:t,players:n,children:e.jsx(Ps,{user:r,players:n,announcement:a,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,onMakeMeReady:i})})})}function ks({user:n,players:s,announcement:r,items:t,concepts:o,basicConcepts:i,pool:a,onSubmitName:c}){const{language:h,dualTranslate:m}=I(),u=n.hand??[],d=E(),[f,N]=g.useState(null),[y,w]=g.useState([]),v=C=>{w(T=>[...T,C])},j=()=>{!f||!y||c({itemId:f.id,name:xe(o,i,y,h),conceptsIds:y})};return Z(),e.jsxs(U,{fullWidth:!0,announcement:r,children:[e.jsx(z,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Nomeie um Item"}),en:e.jsx(e.Fragment,{children:"Name an Item"})})}),e.jsx(D,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Escolha um dos seus três itens e crie um nome para ele usando as sílabas disponíveis (clique na sílaba para adicionar).",e.jsx("br",{}),"Seu nome deve ter pelo menos duas sílabas."]}),en:e.jsxs(e.Fragment,{children:["Choose one of your three items and create a name for it using the available syllables (click on the syllable to add it).",e.jsx("br",{}),"Your name must have at least two syllables."]})})}),e.jsxs(R,{className:"mt-4 contained",children:[e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"mb-2",children:u.map(C=>e.jsx(O,{onClick:()=>N(C),activeClass:"idp-selected",active:(f==null?void 0:f.id)===C.id,children:e.jsx(b,{id:C.id,width:d,title:m(C.name)},C.id)},C.id))}),e.jsx(F,{type:"vertical"}),y.length>0&&e.jsxs(x,{justify:"center",align:"center",wrap:"wrap",gap:6,children:[e.jsx(G,{className:"idp-item-name",children:e.jsx(Rs,{concepts:o,basicConcepts:i,name:y})}),e.jsx(k,{icon:e.jsx(hs,{}),onClick:()=>w(C=>C.slice(0,-1))})]}),e.jsx(F,{type:"vertical"}),e.jsx(X,{size:"large",disabled:!f||y.length<2,onClick:j,children:e.jsx(l,{pt:"Enviar Nome",en:"Send Name"})})]}),e.jsx(ce,{user:n,players:s,items:t,basicConcepts:i,concepts:o,onSelectConcept:v,pool:a,defaultActiveKey:["basic-concepts","concepts","pool"]})]})}function Rs({concepts:n,basicConcepts:s,name:r}){const{language:t}=I(),o=g.useMemo(()=>xe(n,s,r,t),[r,n,s,t]);return e.jsx(e.Fragment,{children:o})}const xe=(n,s,r,t)=>r.map(o=>{var i,a;return((i=n.find(c=>c.id===o))==null?void 0:i.syllable[t])||((a=s.find(c=>c.id===o))==null?void 0:a.syllable[t])}).join("");function Ms({players:n,state:s}){var c;const r=Q(n,s),{step:t,setStep:o}=V(),i=vs(o),a=e.jsx(q,{icon:e.jsx(Le,{}),title:e.jsx(l,{pt:"Crie um novo nome",en:"Create a new name"}),currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"overlay",children:e.jsx(se,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Vamos expandir nosso dicionário."}),en:e.jsx(e.Fragment,{children:"Let's expand our dictionary."})})})});return e.jsx(L,{phase:s==null?void 0:s.phase,allowedPhase:S.COMMUNICATING_THINGS,children:e.jsx(W,{step:t,players:n,children:e.jsx(ks,{user:r,players:n,announcement:a,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,pool:s.pool,onSubmitName:i})})})}function Os({user:n,players:s,announcement:r,items:t,concepts:o,basicConcepts:i,pool:a,newNames:c,onSubmitGuesses:h}){const{dualTranslate:m}=I(),u=E(),{votes:d,activateItem:f,isVotingComplete:N,isItemActive:y}=We("player",!0,Object.keys(s).length,{});Z();const w=()=>{if(!N)return;const v=Object.keys(d).reduce((j,C)=>{const T=Ne(C)[1];return n.id===T||(j[T]=d[C]),j},{});h({guesses:v})};return e.jsxs(U,{fullWidth:!0,announcement:r,children:[e.jsx(z,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"O que os jogadores estão falando?"}),en:e.jsx(e.Fragment,{children:"What are the players talking about?"})})}),e.jsx(D,{type:"action",children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Faça pares de nomes e items. Escolha um nome e depois o item que ele representa ou vice-versa, e então aperte enviar!"}),en:e.jsx(e.Fragment,{children:"Make pairs of names and items. Choose a name and then the item it represents or vice versa, and then press send!"})})}),e.jsxs(R,{className:"mt-4 contained",direction:"vertical",children:[e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"mb-2",children:c.map(v=>{const j=Se(["player",v.playerId]);return e.jsx(O,{onClick:()=>f(j),activeClass:"idp-selected",active:y(j),children:e.jsxs(x,{vertical:!0,align:"center",gap:6,children:[e.jsxs(x,{align:"center",gap:6,children:[e.jsx(pe,{id:s[v.playerId].avatarId}),e.jsx($e,{children:e.jsx(G,{className:"idp-item-name-speech",children:v.name})})]}),d[j]&&e.jsx(b,{id:d[j],width:u})]})},v.id)})}),e.jsx(F,{type:"vertical"}),e.jsx(x,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:a.map(v=>e.jsx(O,{onClick:()=>f(v.id),activeClass:"idp-selected",active:y(v.id),className:"idp-pool-item",children:e.jsx(b,{id:v.id,width:u,title:m(v.name)})},v.id))}),e.jsx(F,{type:"vertical"}),e.jsxs(x,{justify:"center",align:"center",wrap:"wrap",gap:6,children:[e.jsx(qe,{onClick:()=>h(Is(n,a,c)),children:"Mock Guesses"}),e.jsx(X,{size:"large",disabled:!N,onClick:w,children:e.jsx(l,{pt:"Enviar Palpites",en:"Send Guesses"})})]})]}),e.jsx(ce,{user:n,players:s,items:t,basicConcepts:i,concepts:o})]})}function Bs({players:n,state:s}){var c;const r=Q(n,s),{step:t,setStep:o}=V(),i=ys(o),a=e.jsx(q,{icon:e.jsx(Ve,{}),title:e.jsx(l,{pt:"Adivinhação",en:"Guessing"}),currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"overlay"});return e.jsx(L,{phase:s==null?void 0:s.phase,allowedPhase:S.GUESSING,children:e.jsx(W,{step:t,players:n,children:e.jsx(Os,{user:r,players:n,announcement:a,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,pool:s.pool,newNames:s.newNames,onSubmitGuesses:i})})})}function je(){return e.jsx(l,{en:e.jsxs(e.Fragment,{children:["You gain ",e.jsx($,{type:"positive",children:"2"})," points for every name you paired correctly, and the creator gains ",e.jsx($,{type:"positive",children:"1"})," point."]}),pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx($,{type:"positive",children:"2"})," pontos por cada nome que você acertou, e o criador ganha ",e.jsx($,{type:"positive",children:"1"})," ponto."]})})}function Gs({entry:n,basicConcepts:s,concepts:r}){const t=g.useMemo(()=>n.conceptsIds.map(o=>s.find(i=>i.id===o)||r.find(i=>i.id===o)).filter(Boolean),[n.conceptsIds,s,r]);return e.jsxs("div",{className:"full-width",children:[e.jsxs(x,{align:"center",gap:12,children:[e.jsx("div",{children:e.jsx("span",{className:"idp-gallery__letter",children:n.name[0]})}),e.jsx(b,{id:n.itemId,width:64}),e.jsxs("div",{children:[e.jsx(Y,{children:e.jsx(l,{pt:"Nome",en:"Name"})}),e.jsxs(x,{align:"center",gap:6,children:[e.jsx(G,{className:"idp-item-name",children:n.name}),e.jsx(te,{text:{en:n.name,pt:n.name}})]})]})]}),e.jsx(F,{className:"my-4"}),e.jsx(Y,{children:e.jsx(l,{pt:"Definição",en:"Definition"})}),e.jsx(x,{wrap:"wrap",gap:6,className:"my-2",children:t.map(o=>e.jsx(Ds,{concept:o},o.id))})]})}function Ds({concept:n}){const s=E();return e.jsx(ae,{size:"small",children:e.jsxs("div",{className:B("concept-block__syllable"),children:[e.jsx(H,{children:n.syllable}),e.jsxs(x,{wrap:"wrap",gap:3,children:[n.type==="basic"&&e.jsx(ue.Text,{italic:!0,children:e.jsx(H,{children:he[n.key]})}),n.itemsIds.slice(-3).map(r=>e.jsx(b,{width:s/2,id:r},`${n.id}-${r}`))]})]})})}function Fs({creator:n,creatorColor:s,entry:r,players:t}){const o=E(),i=g.useMemo(()=>A.orderBy(Object.keys(r.guesses).reduce((a,c)=>{const h=r.guesses[c];return a.push({itemId:c,playersIds:h,correct:c===r.itemId}),a},[]),[a=>a.itemId===r.itemId,"playersIds.length"],["desc","desc"]),[r.guesses,r.itemId]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"idp-gallery__credits",children:[e.jsx(Y,{children:e.jsx(l,{pt:"Criador",en:"Creator"})}),e.jsx("span",{className:"uppercase",children:e.jsx(ss,{player:n})})]}),e.jsxs("div",{className:"idp-gallery__guesses",children:[e.jsx(Y,{children:e.jsx(l,{pt:"Participantes votaram",en:"Players voted"})}),e.jsx("div",{className:"idp-gallery__guess",children:i.map(a=>e.jsxs("div",{children:[e.jsx(Xe,{winner:a.correct,backgroundColor:s,extra:e.jsxs(x,{align:"center",gap:3,style:{height:"100%"},children:[e.jsx(we,{icon:e.jsx(es,{}),size:"small"})," 2"]}),children:e.jsx(b,{id:a.itemId,width:o/2})}),e.jsx(Qe,{playersIds:a.playersIds,players:t})]},a.itemId))})]}),e.jsx("div",{className:"sda-gallery__result",children:i.length===0&&e.jsx(Ze,{children:e.jsx(l,{pt:"Esse nome deve ter sido muito ruim.",en:"It must have been a very crappy name. Shame..."})})})]})}function Us({gallery:n,players:s,slideShowConfig:r,basicConcepts:t,concepts:o}){Ee();const i=n[r.slideIndex],a=s[i.playerId],c=Te(a.avatarId);return e.jsxs(U,{fullWidth:!0,children:[e.jsx(z,{size:"small",children:e.jsx(l,{pt:"Novos termos no dicionário",en:"New Terms in the Dictionary"})}),e.jsx(Ke,{content:e.jsx(je,{})}),e.jsxs(Je,{config:r,barColor:c,leftClassName:"idp-gallery__left-page",rightClassName:"idp-gallery__right-page",children:[e.jsx(Gs,{entry:i,basicConcepts:t,concepts:o}),e.jsx(Fs,{creator:a,creatorColor:c,entry:i,players:s})]})]})}function zs({players:n,ranking:s,onGoBack:r,round:t}){return e.jsxs(ns,{players:n,ranking:s,gainedPointsDescriptions:[e.jsx(l,{pt:"Pares corretos",en:"Correct matches"},"1"),e.jsx(l,{pt:"Pontos pelo nome da sua coisa",en:"Points for your thing's name"},"2")],children:[e.jsx(R,{children:e.jsx(k,{onClick:r,children:e.jsx(l,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(Pe,{round:t})]})}function Vs({players:n,state:s}){var c;const{step:r,goToNextStep:t,goToPreviousStep:o}=V(0),i=He({length:s.gallery.length,slideDuration:gs,onExpire:t}),a=()=>{i.reset(),o()};return e.jsx(L,{phase:s==null?void 0:s.phase,allowedPhase:S.RESULTS,children:e.jsxs(W,{step:r,players:n,children:[e.jsx(q,{icon:e.jsx(Ye,{}),title:e.jsx(l,{pt:"Resultados",en:"Results"}),onClose:t,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,unskippable:!0,type:"block",duration:s.round.current<3?12:void 0,children:e.jsx(je,{})}),e.jsx(Us,{players:n,basicConcepts:s.basicConcepts,concepts:s.concepts,gallery:s.gallery,slideShowConfig:i}),e.jsx(zs,{players:n,ranking:s.ranking,round:s.round,onGoBack:a})]})})}function Ls({state:n,players:s}){return e.jsx(ts,{state:n,players:s,announcementIcon:e.jsx(rs,{}),children:e.jsx(as,{title:e.jsx(l,{pt:"Dicionário",en:"Dictionary"}),className:"mt-4",children:"TBD"})})}function Ws(n){switch(n.phase){case S.CREATING_CONCEPTS:return _s;case S.CONCEPTS_REVEAL:return As;case S.COMMUNICATING_THINGS:return Ms;case S.GUESSING:return Bs;case S.RESULTS:return Vs;case Re.DEFAULT.GAME_OVER:return Ls;default:return ke}}function fr(){return e.jsx(Ae,{gameCollection:_e.IDADE_DA_PREDA,getActiveComponent:Ws})}export{fr as default};
