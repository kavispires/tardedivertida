import{h as V,j as e,e as h,b6 as F,T as m,aM as W,c2 as k,D as x,r as U,q as Y,a_ as K}from"./index-DvppfgRv.js";import{u as J,S as C,a as B,P as q,c as Z,d as $,e as ee}from"./Session-X-N4hf4T.js";import{P as M}from"./PhasePlaceholder-D3TZI6jF.js";import{u as X}from"./useWhichPlayerIsThe-0rWO1mLA.js";import{B as O}from"./BossIdeaIcon-ByRvxByS.js";import{P as y}from"./PlayerAvatarName-DErJPECv.js";import{S as L,P as oe,a as b}from"./StepSwitcher-GRRK4efZ.js";import{I as _}from"./useDevFeatures-w3W2BPgK.js";import{R as re}from"./RoundAnnouncement-Cy0tFB_F.js";import{u as se}from"./useMakeMeReady-COPsQ47V.js";import{M as z}from"./MysteryBoxIcon-Ce2PP5rd.js";import{W as D}from"./WarehouseGoodCard-vlhtFxe1.js";import{R as T}from"./RuleInstruction-Ce3WP52S.js";import{S as v}from"./ShippingBoxIcon-Cq7jNu2F.js";import{M as I}from"./MetricHighlight-g7-kGe_z.js";import{C as R}from"./ClockIcon-CQRx1N2c.js";import{D as j}from"./index-Dpp6_Nt0.js";import{u as ie}from"./useMock-Dswnhv6P.js";import{T as ne}from"./TimedButton-CI7WX-Lk.js";import"./Game-Ch5JUYDX.js";import"./useMutation-CdsDiU7r.js";import"./speech-DB2TJQrk.js";import"./index-B6lvJW0z.js";import"./index-Bk4RdLjp.js";import"./Overflow-CZZSli7j.js";import"./PurePanel-C9S70P0-.js";import"./index-JzbJh84j.js";import"./index-nROAR8Mh.js";import"./PlayerAvatar-4I-LnJ6Z.js";import"./DebugOnly-f-8UdT-g.js";import"./GameBanner-sa2yhoJA.js";import"./RulesModal-BupD63Bo.js";import"./WritingIcon-DQQLo40-.js";import"./index-qRlSqIqu.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DF_wMmXU.js";import"./index-BsP26atl.js";import"./useBubbleLock-CKJopiFI.js";import"./InfoCircleOutlined-BXVUvu-2.js";import"./useToggle-DTgQq2Yy.js";import"./SignIn-DdSI9y1n.js";import"./GoogleIcon-3W4a7kM5.js";import"./AnimatedGearIcon-B24Zs_ID.js";import"./AnimatedClockIcon-D32Srta7.js";import"./Loading-BIZ_exdO.js";import"./AnimatedLoaderIcon-D7DW2oqt.js";import"./WaitingRoomIcon-Cr_Gt9Nn.js";import"./LikeFilled-B_cr3hlL.js";import"./Sprite-B6DIA9QU.js";import"./WarningOutlined-D7wFJdME.js";import"./StarFilled-ux0NNX7L.js";const f={GOOD_PLACEMENT:"GOOD_PLACEMENT",PLACEMENT_CONFIRMATION:"PLACEMENT_CONFIRMATION",FULFILLMENT:"FULFILLMENT",RESULTS:"RESULTS"},te=[{en:"Monday",pt:"Segunda-feira"},{en:"Tuesday",pt:"Terça-feira"},{en:"Wednesday",pt:"Quarta-feira"},{en:"Thursday",pt:"Quinta-feira"},{en:"Friday",pt:"Sexta-feira"},{en:"Saturday",pt:"Sábado"},{en:"Sunday",pt:"Domingo"}],l={TINTED_GLASS:"TINTED_GLASS",CONFIDENTIAL:"CONFIDENTIAL",EYE_EXAM:"EYE_EXAM"};function H(){const{translate:s}=V(),o=J({actionName:"submit-place-good",successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{o({action:"PLACE_GOOD",...i})}}function ae(){return se({})}function G({goodsDict:s,warehouse:o,width:i,onPlaceGood:r,goodClassName:d,conceal:c}){const n={width:i,height:i};return e.jsx("div",{className:"warehouse",children:o.map((t,a)=>{if(t.available)return e.jsx("div",{className:h("warehouse__empty-shelf warehouse__empty-available-shelf"),style:n,children:r?e.jsx("button",{type:"button",className:"warehouse__empty-shelf-button",onClick:()=>r?.(a),children:t.temporaryName??"?"}):t.temporaryName??"?"},a);if(t.amenityId)return null;if(t.goodId){const u=s[t.goodId];return u.exposed?c?e.jsx(z,{width:i}):e.jsx("div",{className:h("warehouse__shelf","warehouse__shelf-active"),style:n,children:e.jsx(D,{goodId:u.id,width:i-12,className:h(F("bounce"),d)})},a):e.jsx("div",{className:h("warehouse__shelf",F("flipInY")),style:n,children:e.jsx(v,{width:i-12})},a)}return e.jsx("div",{className:h("warehouse__empty-shelf"),style:n,children:"."},a)})})}function w({stockingCount:s,stockingRoundCount:o,stocked:i}){return e.jsx(m,{en:e.jsxs(e.Fragment,{children:["Round goods:"," ",e.jsxs(I,{icon:e.jsx(R,{}),children:[s,"/",o]}),e.jsx("br",{}),"Stocked Goods: ",e.jsxs(I,{icon:e.jsx(v,{}),children:[i,"/35"]})]}),pt:e.jsxs(e.Fragment,{children:["Mercadorias da rodada:"," ",e.jsxs(I,{icon:e.jsx(R,{}),children:[s,"/",o]}),e.jsx("br",{}),"Mercadorias estocadas: ",e.jsxs(I,{icon:e.jsx(v,{}),children:[i,"/35"]})]})})}function de({players:s,user:o,announcement:i,bossIdea:r,roundGoods:d,roundsGoodIndex:c,goodsDict:n,warehouse:t,supervisor:a,isUserTheSupervisor:u,onPlaceGood:E,stocked:S}){const{isLoading:A}=W(),[p,N]=k(7,{minWidth:60,maxWidth:80,margin:16}),g=n[d[c]],P=Q=>{E({goodId:g.id,newWarehouseSlot:Q,previousWarehouseSlot:g.slot})};return u?e.jsxs(L,{fullWidth:!0,announcement:i,ref:N,children:[e.jsx(C,{icon:e.jsx(O,{}),children:e.jsx(x,{children:r.title})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Coloque a mercadoria do galpão!"}),en:e.jsx(e.Fragment,{children:"Place the good in the warehouse"})})}),e.jsx(j,{className:"my-1"}),e.jsx(x,{children:r.description}),e.jsx(j,{className:"my-1"}),e.jsx(w,{stockingCount:c,stockingRoundCount:d.length,stocked:S})]}),e.jsx(_,{contained:!0,children:e.jsx(D,{goodId:g.id,width:p,className:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})}),e.jsx(G,{goodsDict:n,warehouse:t,onPlaceGood:A?void 0:P,width:p,goodClassName:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(L,{fullWidth:!0,announcement:i,ref:N,children:[e.jsx(C,{icon:e.jsx(O,{}),children:e.jsx(x,{children:r.title})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(y,{player:a,size:"small"})," é o(a) supervisor(a) do dia e colocará a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(y,{player:a})," is the supervisor of the day and will place the good in the warehouse."]})})}),e.jsx(j,{className:"my-1"}),e.jsx(x,{children:r.description}),e.jsx(j,{className:"my-1"}),e.jsx(w,{stockingCount:c,stockingRoundCount:d.length,stocked:S})]}),e.jsx(_,{contained:!0,children:r.id===l.CONFIDENTIAL?e.jsx(z,{width:p}):e.jsx(D,{goodId:g.id,width:p,className:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS")})}),e.jsx(G,{goodsDict:n,warehouse:t,width:p,goodClassName:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:r.id===l.CONFIDENTIAL})]})}function ce({players:s,state:o,user:i}){const[r,d]=X("supervisorId",o,s),c=H(),{step:n,goToNextStep:t}=B(o.roundGoodsIndex===0?0:1),a=o?.bossIdea,u=e.jsx(oe,{icon:e.jsx(O,{}),title:e.jsx(x,{children:a.subtitle}),currentRound:o?.round?.current,type:"overlay",duration:o.roundGoodsIndex===0?15:5,children:e.jsxs(_,{children:['"',e.jsx(m,{en:"The floor supervisor for the day will be",pt:"O supervisor do dia será"})," ",e.jsx(y,{player:r,addressUser:!0}),'."']})}),E=U.useMemo(()=>Y.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(q,{phase:o?.phase,allowedPhase:f.GOOD_PLACEMENT,children:e.jsxs(b,{step:n,players:s,children:[e.jsx(re,{round:o?.round,onPressButton:t,time:o.roundGoodsIndex===0?10:4,children:e.jsx(_,{contained:!0,children:e.jsx(x,{children:te[o.round.current-1]})})}),e.jsx(de,{user:i,players:s,announcement:u,bossIdea:a,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:E,supervisor:r,isUserTheSupervisor:d,onPlaceGood:c,stocked:o.stocked})]})})}function le({user:s,bossIdea:o,roundGoods:i,roundsGoodIndex:r,goodsDict:d,warehouse:c,supervisor:n,isUserTheSupervisor:t,onPlaceGood:a,onConfirmPlacement:u,stocked:E}){const{isLoading:S}=W(),[A,p]=k(7,{minWidth:60,maxWidth:80,margin:16}),N=d[i[r]],g=P=>{a({goodId:N.id,newWarehouseSlot:P,previousWarehouseSlot:N.slot})};return ie(),t?e.jsxs(L,{fullWidth:!0,ref:p,children:[e.jsx(C,{size:"small",children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Estão todos de acordo com esse local?"}),en:e.jsx(e.Fragment,{children:"Is everyone okay with this location?"})})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:"Você pode trocar a mercadoria de lugar se há outros lugares disponíveis e a equipe decidir.",en:"You may change the location of the good if there are available options and the team agrees."})}),e.jsx(j,{className:"my-1"}),e.jsx(x,{children:o.description}),e.jsx(j,{className:"my-1"}),e.jsx(w,{stockingCount:r+1,stockingRoundCount:i.length,stocked:E})]}),e.jsx(G,{goodsDict:d,warehouse:c,onPlaceGood:S||s.ready?void 0:g,width:A,goodClassName:h(o.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",o.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(L,{fullWidth:!0,ref:p,children:[e.jsx(C,{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Concorda com o local escolhido?"}),en:e.jsx(e.Fragment,{children:"Do you agree with the chosen location?"})})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(y,{player:n,size:"small"})," é o(a) supervisor(a) do dia e colocou a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(y,{player:n})," is the supervisor of the day and placed the good in the warehouse."]})})}),e.jsx(j,{className:"my-1"}),e.jsx(x,{children:o.description}),e.jsx(j,{className:"my-1"}),e.jsx(w,{stockingCount:r+1,stockingRoundCount:i.length,stocked:E})]}),e.jsx(T,{type:"action",children:e.jsx(m,{pt:"Se você concorda com o local, confirme sua escolha.",en:"If you agree with the location, confirm your choice."})}),e.jsx(_,{children:e.jsx(ne,{size:"large",type:"primary",onClick:u,onExpire:u,loading:S,disabled:s.ready,duration:40,children:e.jsx(m,{pt:"Confirmar",en:"Confirm"})})}),e.jsx(G,{goodsDict:d,warehouse:c,width:A,goodClassName:h(o.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:o.id===l.CONFIDENTIAL})]})}function ue({players:s,state:o,user:i}){const[r,d]=X("supervisorId",o,s),c=H(),n=ae(),{step:t}=B(),a=o?.bossIdea,u=U.useMemo(()=>Y.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(q,{phase:o?.phase,allowedPhase:f.PLACEMENT_CONFIRMATION,children:e.jsx(b,{step:t,players:s,children:e.jsx(le,{user:i,players:s,bossIdea:a,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:u,supervisor:r,isUserTheSupervisor:d,onPlaceGood:c,onConfirmPlacement:n,stocked:o.stocked})})})}function he(s){switch(s.phase){case f.GOOD_PLACEMENT:return ce;case f.PLACEMENT_CONFIRMATION:return ue;case f.FULFILLMENT:return M;case f.RESULTS:return M;case ee.DEFAULT.GAME_OVER:return M;default:return $}}function uo(){return e.jsx(Z,{gameCollection:K.CONTROLE_DE_ESTOQUE,getActiveComponent:he})}export{uo as default};
