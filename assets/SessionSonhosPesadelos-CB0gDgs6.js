import{j as e,B as f,T as l,f as C,cG as y,e as x,l as v,aH as L,r as F,aK as S,K as z,cE as j,b3 as _,aO as O,n as K,cF as X,aM as Y,b1 as M,b0 as J,cI as Q,aX as Z}from"./index-BS0hsUD1.js";import{u as V,S as I,a as T,c as E,b as w,d as A,e as D,P as R,j as ee,k as se,g as re,h as oe,i as ae}from"./StepSwitcher-BKyIvmwe.js";import{T as te}from"./TrophyIcon-PkAB2poO.js";import{G as ne}from"./GameOverWrapper-XHEKhteQ.js";import{D as ie}from"./DreamIcon-CK2fSn-0.js";/* empty css                             */import{I as ce}from"./ImageCardPreloadHand-alDqb1M3.js";import{I as g}from"./Instruction-DUAPGt55.js";import{R as le}from"./RoundAnnouncement-Cz1JyOxi.js";import{u as W}from"./useMock-CxECnoJo.js";import{C as q}from"./Card-C5Yx0XUJ.js";import{I as $}from"./ImageBlurButton-CScGR12e.js";import{I as H}from"./ImageCard-dX7kt5ej.js";import{E as me}from"./WritingIcon-BnoXUNhM.js";import{u as de}from"./useVotingMatch-DE8MjQe5.js";import{R as G}from"./UpCircleOutlined-NsGj8VSv.js";import"./Ribbon-C6ll0e-T.js";import{R as ue}from"./RibbonGroup-DEZDWTos.js";import{u as pe}from"./SlideShowControls-CrHD9SdL.js";import{C as he}from"./CountdownIcon-DRk3faWF.js";import{P as k}from"./PointsHighlight-CY_FFJUL.js";import{S as xe}from"./SlideShow-BkG9DmAn.js";import{A as je}from"./AvatarName-DStMx25E.js";import{A as ge}from"./Avatar-C-HWYTGu.js";import{S as B}from"./StarPoints-DunJUyTz.js";import{S as fe}from"./StepRankingWrapper-Cu0xuhgN.js";import{R as be}from"./RoundsLeftInstruction-CUUFl44b.js";import{R as ye}from"./PictureOutlined-Blsj9ucl.js";/* empty css                            */import"./toFinite-rwjb8oht.js";import"./speech-CPRQBtUZ.js";import"./useDevFeatures-BUEu0vJ8.js";import"./RulesModal-0pyNsCFz.js";import"./DoubleRightOutlined-CvqosNvY.js";import"./PurePanel-75AEGX8C.js";import"./Game-CM-19vDv.js";import"./useMutation-CMZMlLab.js";import"./index-D5t_tlqc.js";import"./index-ym2otjsn.js";import"./Overflow-D4qkMHc2.js";import"./useEvent-BQmHtF9R.js";import"./index-DuKeo7c9.js";import"./index-Kp_Y0ySL.js";import"./GameBanner-DD0RdXg7.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CnUa0PQX.js";import"./Loading-yGwkvqD6.js";import"./useBubbleLock-C4aIsqor.js";import"./AnimatedLoaderIcon-DZkyNQ-y.js";import"./InfoCircleOutlined-CBmTNLvp.js";import"./index-UhDw3S3t.js";import"./sampleSize-DI6bOR3l.js";import"./_copyArray-DyNXx8uz.js";import"./_isIterateeCall-BLgE4UX_.js";import"./SignIn-DmNay0da.js";import"./GoogleIcon-DY-o4b_L.js";import"./WaitingRoomIcon-BSmyYI4j.js";import"./AnimatedClockIcon-BvJnSz4s.js";import"./TheEndIcon-BVgdNPcn.js";import"./StarFilled-BloOH8NA.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-DCfvb3Bc.js";import"./useMergedState-zyxlJ68V.js";import"./progress-DqQtShTg.js";import"./StepBackwardOutlined-DTuXR_wt.js";import"./TrophyOutlined-ZSRb48vs.js";import"./StarIcon-BpMHk_iE.js";import"./MetricHighlight-CmX5t4k0.js";import"./RankingBoard-D_stD3b8.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./RuleInstruction-YGoXArkz.js";function Se({onClick:s,cardId:r,selectLabel:a,deselectLabel:n,isSelected:o=!1}){return e.jsxs(f,{shape:"round",size:"small",ghost:!o,className:"image-card-select-button",onClick:()=>s(r),children:[e.jsx(G,{}),o?e.jsx(l,{pt:"Desmarcar",en:"Deselect",custom:n}):e.jsx(l,{pt:"Selecionar",en:"Select",custom:a}),e.jsx(G,{})]})}const h={DREAM_TELLING:"DREAM_TELLING",MATCHING:"MATCHING",RESOLUTION:"RESOLUTION"},U={SUBMIT_DREAM:"SUBMIT_DREAM",SUBMIT_VOTING:"SUBMIT_VOTING"};function ve({state:s,players:r}){return e.jsx(ne,{state:s,players:r,announcementIcon:e.jsx(te,{})})}function Ie(s){const{translate:r}=C(),a=V({actionName:"submit-dream",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:r("Sonho submetido com sucesso","Dream submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seu sonho","Oops, the application found an error while trying to submit your dream")});return n=>{a({action:U.SUBMIT_DREAM,...n})}}function Ne(s){const{translate:r}=C(),a=V({actionName:"submit-votes",onBeforeCall:()=>s(2),onError:()=>s(0),successMessage:r("Votos submetidos com sucesso","Votes submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seus votos","Oops, the application found an error while trying to submit your votes")});return n=>{a({action:U.SUBMIT_VOTING,...n})}}const Ce=()=>e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Escreva uma dica dentro do tema dado para o seu sonho (carta com borda amarela).",e.jsx("br",{}),"Preste atenção em seu pesadelo (carta com borda roxa), se alguém achar que sua dica é relacionada a seu pesadelo, você perde pontos."]}),en:e.jsxs(e.Fragment,{children:["Write a clue for your dream (yellow bordered card).",e.jsx("br",{}),"Pay attention to your nightmare (purple bordered card) because if any player thinks that your clue is related to that card, you lose points."]})}),_e=["água","bola","calderão do huck","dedo","esmalte","fatídico","ganhar","hereditário","simpático","abismo","rola","a branca de neve","oops i did it again","pesquisa","saborosa","amargo"],Te=()=>y(_e)[0],Ee=(s,r,a)=>{const n=y(s.map(t=>t.id).filter(t=>t!==a.id)),o=y(r);return n.reduce((t,i,c)=>(t[i]=o[c],t),{})};function P({cardId:s,cardWidth:r,isDream:a=!1,isNightmare:n=!1,hideBlurButton:o=!1}){const t="s-dream-board-card";return e.jsxs(e.Fragment,{children:[e.jsx(H,{id:s,cardWidth:r,className:x(t,a&&`${t}--dream`,n&&`${t}--nightmare`)}),!o&&e.jsx($,{cardId:s})]})}function Ae({table:s,user:r,className:a=""}){const n=v(s.length+1,{gap:20});return e.jsx("ul",{className:x("s-dream-board",a),children:s.map(o=>{const t=r.dreamId===o,i=r.nightmareId===o;return e.jsxs("li",{className:"s-dream-board__entry",style:{maxWidth:`${n+20}px`},children:[e.jsx(P,{cardId:o,cardWidth:n,isDream:t,isNightmare:i}),t&&e.jsx("div",{className:"s-dream-board__dream-label",style:{maxWidth:`${n}px`},children:e.jsx(l,{pt:"Sonho",en:"Dream"})}),i&&e.jsx("div",{className:"s-dream-board__nightmare-label",style:{maxWidth:`${n}px`},children:e.jsx(l,{pt:"Pesadelo",en:"Nightmare"})})]},`board-${o}`)})})}function De({table:s,user:r,onSubmitDream:a}){const{isLoading:n}=L(),{translate:o}=C(),[t,i]=F.useState("");W(()=>{a({dream:Te()})},[]);const c=()=>{a({dream:t})};return e.jsxs(I,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(T,{children:e.jsx(q,{header:o("Tema do Sonho","Dream Theme"),className:"s-theme-card",randomColor:!0,footer:Array(r.theme.level).fill("•").join(""),footerClassName:"s-theme-card__description",children:r.theme.text})}),e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Dentro do tema acima, escreva sua dica no campo abaixo. Lembre-se que seu sonho é a carta de borda amarela e seu pesadelo é a carta de borda roxa.",en:"Write a clue in the field below within the given theme. Remember that your dream is the card with the yellow border and your nightmare is the card with the purple border."})}),e.jsx(Ae,{table:s,user:r}),e.jsx(S,{children:e.jsx(z,{size:"large",onPressEnter:c,onChange:m=>i(m.target.value),placeholder:o("Escreva aqui","Write here")})}),e.jsx(S,{children:e.jsx(f,{type:"primary",disabled:n||!t,onClick:c,children:e.jsx(l,{pt:"Enviar Sonho",en:"Submit Dream"})})})]})}function Re({state:s,players:r}){var c;const{step:a,goToNextStep:n,setStep:o}=E(0),t=w(r,s),i=Ie(o);return e.jsx(A,{phase:s==null?void 0:s.phase,allowedPhase:h.DREAM_TELLING,children:e.jsxs(D,{step:a,players:r,children:[e.jsx(le,{round:s.round,buttonText:"",onPressButton:n,time:5,children:e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Sabe quando você sonha com uma coisa, mas não consegue explicar? Então...",en:"You know when you dream about something but you can't quite explain? So..."})})}),e.jsxs(R,{icon:e.jsx(ie,{}),title:e.jsx(l,{pt:"Conte-nos sobre seu sonho",en:"Tell us about your dream..."}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:[e.jsx(g,{children:e.jsx(Ce,{})}),e.jsx(ce,{hand:s.table})]}),e.jsx(De,{table:s.table,onSubmitDream:i,user:t})]})})}const Pe=(s,r)=>Object.keys(s).filter(a=>s[a]===r),Oe=(s,r)=>Object.entries(s).reduce((a,[n,o])=>{const t=n.split(O)[1],i=o.split(O)[1];return t!==r.id&&(a[t]=i),a},{}),Me=(s,r)=>s.reduce((a,n,o)=>{if(n.id===r.id){const t=j(["dream",n.id,_[o]]),i=j(["card",r.dreamId]);a[t]=i}return a},{}),Ge=(s,r,a)=>({...r.reduce((o,t,i)=>{const c=y(a),m=j(["dream",t.id,_[i]]),d=j(["card",c[0]]);return o[m]=d,o},{}),...s});function ke({dreams:s,activeItem:r,onActivateItem:a,votes:n,players:o}){const t="a-evaluation-all-cards__li-card-button";return e.jsx(S,{children:s.map(({id:i,dream:c},m)=>{const d=o[i],u=_[m],p=j(["dream",i,u]),b=r===p,N=Object.keys(n).includes(p);return e.jsx(K,{className:x(t,b&&`${t}--active`,N&&`${t}--used`),onClick:()=>a(p),children:e.jsx(q,{color:X(u),header:u,size:"medium",footer:d.name,className:"s-clue-card",footerClassName:"s-clue-card__footer",children:c})},p)})})}function Be({table:s,activeItem:r,onActivateItem:a,votes:n}){const o=v(s.length+1,{gap:20,margin:50}),t="a-evaluation-all-drawings__li-drawing-button";return e.jsx("ul",{className:"s-dream-board",children:s.map(i=>{const c=j(["card",i]),m=r===c,d=Pe(n,c);return e.jsxs("li",{className:x("s-dream-board__entry",t,m&&`${t}--active`),style:{maxWidth:`${o+20}px`},children:[e.jsxs("div",{className:"s-dream-board__card-container",children:[e.jsx(ue,{labels:d}),e.jsx(P,{cardId:i,cardWidth:o,hideBlurButton:!0}),e.jsx(Se,{cardId:c,onClick:a})]}),e.jsx($,{cardId:i})]},`board-${i}`)})})}function Le({players:s,user:r,table:a,onSubmitVotes:n,dreams:o}){const{isLoading:t}=L(),{votes:i,setVotes:c,activeItem:m,activateItem:d,isVotingComplete:u}=de("dream",!0,o.length);Y(()=>{const b=Me(o,r);b&&c(N=>({...N,...b}))}),W(()=>{n({votes:Ee(o,a,r)})},[]);const p=()=>{n({votes:Oe(i,r)})};return e.jsxs(I,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(T,{children:e.jsx(l,{pt:"Adivinhação",en:"Match the Pairs"})}),e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Clique em uma carta e então uma botão da imagem correspondente ou vice e versa. Aperte enviar quando terminar te combinar todas as dicas.",en:"Click on a clue then on an image button or vice versa. When you're done matching all clues, press Submit."})}),e.jsxs(S,{children:[e.jsx(f,{type:"default",disabled:t,onClick:()=>c(Ge(i,o,a)),className:x(u&&M("tada")),size:"large",children:e.jsx(l,{pt:"Vote pra mim",en:"Vote for me"})}),e.jsx(f,{type:"primary",disabled:t||!u,onClick:p,className:x(u&&M("tada")),size:"large",children:e.jsx(l,{pt:"Enviar",en:"Submit"})})]}),e.jsx(Be,{user:r,table:a,activeItem:m,onActivateItem:d,votes:i}),e.jsx(ke,{dreams:o,activeItem:m,onActivateItem:d,votes:i,players:s})]})}function Ve({state:s,players:r}){var c;const{step:a,goToNextStep:n,setStep:o}=E(0),t=w(r,s),i=Ne(o);return e.jsx(A,{phase:s==null?void 0:s.phase,allowedPhase:h.MATCHING,children:e.jsxs(D,{step:a,players:r,children:[e.jsx(R,{icon:e.jsx(me,{}),title:e.jsx(l,{pt:"Combine os sonhos",en:"Match the dreams"}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:e.jsx(g,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Selecione os pares de dica e carta.",e.jsx("br",{}),"Mais de um jogador pode ter o mesmo sonho."]}),en:e.jsxs(e.Fragment,{children:["Match the pairs of cards and clues.",e.jsx("br",{}),"More than one player may have the same card."]})})})}),e.jsx(Le,{players:r,user:t,table:s.table,onSubmitVotes:i,dreams:s.dreams})]})})}function we({entry:s,activePlayer:r}){const a=v(5,{gap:40});return e.jsxs("div",{className:"s-gallery-dream-display",children:[e.jsx("div",{className:"s-gallery-dream-display__player",children:e.jsx(je,{player:r})}),e.jsxs("div",{className:"s-gallery-dream-display__theme-container",children:[e.jsxs("div",{className:"s-gallery-dream-display__theme",children:[r.theme.text,":"]}),e.jsx("div",{className:"s-gallery-dream-display__dream",children:s.dream})]}),e.jsx("div",{className:"s-gallery-dream-display__dream-image-container",children:e.jsx(H,{id:s.dreamId,cardWidth:a,className:"s-gallery-dream-display__dream-image"})})]})}function We({entry:s,players:r,correctGuessPoints:a}){const n=v(8,{gap:20});return e.jsx("ul",{className:"s-gallery-guesses",children:s.cards.map(o=>e.jsxs("li",{className:"s-gallery-guesses__votes-container",style:{width:`${n+16}px`},children:[e.jsx("div",{children:e.jsx(P,{cardId:o.cardId,cardWidth:n,isDream:o.isDream,isNightmare:o.isNightmare,hideBlurButton:!0})}),e.jsxs("div",{className:"s-gallery-guesses__votes",children:[e.jsx(J.Group,{children:o.votes.map(t=>{const i=r[t];return e.jsx(ge,{id:i.avatarId,alt:i.name,size:"small"},t)})}),o.votes.length>0&&o.isDream&&e.jsx(B,{quantity:a,keyPrefix:"dream-correct",hideText:!0}),o.votes.length>0&&o.isNightmare&&e.jsx(B,{quantity:-1,keyPrefix:"dream-incorrect",hideText:!0})]})]},`gallery-guess-${o.cardId}`))})}function qe({players:s,gallery:r,slideShowConfig:a,correctGuessPoints:n}){ee();const o=r[a.slideIndex],t=s[o.playerId];return e.jsxs(I,{fullWidth:!0,className:"s-results-step",children:[e.jsx(T,{children:e.jsx(l,{pt:"Resultado",en:"Results"})}),e.jsxs(xe,{config:a,barColor:Q(t.avatarId),children:[e.jsx(we,{entry:o,activePlayer:t}),e.jsx(We,{entry:o,players:s,correctGuessPoints:n})]})]})}function $e({players:s,ranking:r,round:a,onGoBack:n}){return e.jsxs(I,{children:[e.jsx(fe,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(l,{pt:"Votos corretos",en:"Correct guesses"},"1"),e.jsx(l,{pt:"Votos corretos em seu sonho por outros jogadores",en:"Correct guesses on your dream by other players"},"2"),e.jsx(l,{pt:"Votos em pesadelos",en:"Nightmares selected"},"3")]}),a.current<a.total&&e.jsx(be,{round:a}),e.jsx(f,{size:"large",onClick:n,icon:e.jsx(ye,{}),children:e.jsx(l,{pt:"Ver Galeria De Novo",en:"See Gallery Again"})}),e.jsx(se,{round:a})]})}function He({state:s,players:r}){var c;const{step:a,goToNextStep:n,goToPreviousStep:o}=E(0),t=pe({length:s.gallery.length,slideDuration:10,onExpire:n}),i=()=>{t.reset(),o()};return e.jsx(A,{phase:s==null?void 0:s.phase,allowedPhase:h.RESOLUTION,children:e.jsxs(D,{step:a,players:r,children:[e.jsx(R,{icon:e.jsx(he,{}),title:e.jsx(l,{pt:"Resultado",en:"Results"}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:e.jsx(g,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Acertos ganham ",e.jsx(k,{children:s.correctGuessPoints})," pontos nessa rodada."]}),en:e.jsxs(e.Fragment,{children:["Correct guesses get ",e.jsx(k,{children:s.correctGuessPoints})," points this round."]})})})}),e.jsx(qe,{players:r,gallery:s.gallery,slideShowConfig:t,correctGuessPoints:s.correctGuessPoints}),e.jsx($e,{players:r,ranking:s.ranking,round:s.round,onGoBack:i})]})})}function Ue(s){switch(s.phase){case h.DREAM_TELLING:return Re;case h.MATCHING:return Ve;case h.RESOLUTION:return He;case ae.DEFAULT.GAME_OVER:return ve;default:return oe}}function lr(){return e.jsx(re,{gameCollection:Z.SONHOS_PESADELOS,getActiveComponent:Ue})}export{lr as default};
