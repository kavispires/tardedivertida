import{h as $,j as e,e as v,x as C,cg as D,aM as H,r as R,T as o,o as y,b6 as G,aP as x,ch as V,k as A,b5 as T,B as W,b0 as Y}from"./index-D-4we-Vq.js";import{u as Q,S as q,a as B,b as J,c as O,P as U,d as L,e as z,k as K,g as X,h as Z,i as ee}from"./StepSwitcher-I-lnjbRH.js";import{S as re}from"./SocksIcon-Y3KD8nIk.js";import{I as E}from"./useDevFeatures-BINfYcee.js";import{R as se}from"./RoundAnnouncement-CJHl__Sh.js";import{C as te}from"./ClubberAvatar-BV28w-p-.js";import{C as ie}from"./CostumeAvatar-DVsa5kuj.js";import{S as ae}from"./SuperHeroAvatar-BTXxYqRu.js";import{C as ne}from"./Card-CxTTpSze.js";import{C as oe}from"./CharacterCard-BeoBLpRC.js";import{E as ce}from"./EmojiCard-DzXRUbJp.js";import{G as de}from"./GlyphCard-n9EGnMNQ.js";import{I as me}from"./ItemCard-DmsDoOgY.js";import{S as le}from"./SuspectCard-CF8RfkSq.js";/* empty css                             */import{I as pe}from"./ImageBlurButtonContainer-k-A_nII9.js";import{I as ue}from"./ImageCard-B6fNRyTC.js";import{u as he}from"./useMock-CHSOqb56.js";import{D as xe}from"./DevButton-BUWrpiul.js";import{P}from"./PointsHighlight-7NMF0QKF.js";import{R as _}from"./RuleInstruction-D5hxARTv.js";import{P as je}from"./WritingIcon-BqhGyCrX.js";import{A as N}from"./Avatar-Cdr6gfU8.js";import{T as ge}from"./speech-w3179Pm8.js";import{R as fe}from"./TrophyOutlined-BJmoz92A.js";import{S as ve}from"./StepRankingWrapper-kNWstkyO.js";import{T as Ie}from"./TrophyIcon-BMTZ5QRZ.js";import"./GameBanner-BTD3AmyA.js";import{G as Se}from"./GameOverWrapper-DYC3VO5a.js";import{A as Pe}from"./Achievements-CsQ5dsy6.js";import{T as Ce}from"./TitledContainer-DiLhp-EO.js";import{a as _e}from"./achievements-_vvMKcjs.js";import"./DebugOnly-DEmtF63I.js";import"./RulesModal-YIYG5Cyn.js";import"./index-BGYUOUu6.js";import"./PurePanel-DVWVaPps.js";import"./Game-DmsOgdGH.js";import"./useMutation-BTway68E.js";import"./index-BxK7djCV.js";import"./index-DdMroFYC.js";import"./Overflow-gB0Zmj24.js";import"./index-D1snMmRr.js";import"./index-DlKJnXUl.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DEP1g_jx.js";import"./Loading-jcAvboY8.js";import"./useBubbleLock-P0htYNxA.js";import"./AnimatedLoaderIcon-CGARUUcL.js";import"./InfoCircleOutlined-BuGLSfBY.js";import"./index-Duhzw4Ox.js";import"./SignIn-BJTte-r3.js";import"./GoogleIcon-WXbXrVoL.js";import"./WaitingRoomIcon-BvJHaJkn.js";import"./AnimatedClockIcon--8XBy9hb.js";import"./LikeFilled-C7x2n0L7.js";import"./CustomAvatarWrapper-YbtaD_aa.js";import"./Sprite-D-RtwGAA.js";import"./WarningOutlined-BQV0F8no.js";import"./ImageBlurButton-BRuKyx_B.js";import"./StarIcon-EGRUrGxD.js";import"./MetricHighlight-CzEfni0H.js";import"./StarFilled-De1NKtFX.js";import"./RankingBoard-DBsm8fPo.js";import"./CaretUpOutlined-Cs-E9UCY.js";import"./TheEndIcon-DGBf1g4r.js";import"./ArrowRightOutlined-BFxiNqYH.js";import"./progress-D7lJcItY.js";import"./Medal-CoGzG9uR.js";const w={PAIRING:"PAIRING",RESULTS:"RESULTS"},be={SUBMIT_PAIRS:"SUBMIT_PAIRS"};function Re(r){const{translate:s}=$(),t=Q({actionName:"submit-pairs",onSuccess:()=>r(2),onError:()=>r(0),successMessage:s("Pares submetidos com sucesso","Paris submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seus pares","Oops, the application found an error while trying to submit your pairs")});return a=>{t({action:be.SUBMIT_PAIRS,...a})}}function g({itemEntry:r,className:s,size:t,looseItem:a}){const{dualTranslate:c}=$(),i=t==="small"?.75:1;return r.type==="alien-item"?e.jsx(me,{id:r.value.id,width:75*i,className:s,title:c(r.value.name)}):r.type==="images"?e.jsx(pe,{cardId:r.value,children:e.jsx(ue,{id:r.value,cardWidth:(a?1.5:1)*100*i,className:s,preview:!1})}):r.type==="words"?e.jsx(ne,{hideHeader:!0,className:s,size:t,children:r.value.text}):r.type==="suspects"?e.jsx("div",{className:s,children:e.jsx(le,{suspect:r.value,width:100*i,hideName:!0})}):r.type==="contenders"?e.jsx(oe,{character:r.value,size:120*i,className:s},r.value.id):r.type==="emojis"?e.jsx(ce,{id:String(r.value),width:75*i,className:s}):r.type==="glyphs"?e.jsx(de,{id:r.value,width:75*i,className:s}):r.type==="clubbers"?e.jsx(te,{id:r.value,width:75*i,className:v("avatar-entry-background",s)}):r.type==="costumes"?e.jsx(ie,{id:r.value,width:75*i,className:v("avatar-entry-background",s)}):r.type==="superHeroes"?e.jsx(ae,{id:r.value,width:75*i,className:v("avatar-entry-background",s)}):e.jsx("div",{className:s,children:r.type})}function b({index:r,firstItem:s,secondItem:t,placeholder:a,size:c}){return e.jsxs(C,{className:v("pairs-grid__pair",`pairs-grid__pair--${r}`),direction:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:s?e.jsx(g,{itemEntry:s,size:c}):e.jsx(g,{itemEntry:a,className:"pairs-grid__empty-slot",size:c})}),e.jsx("div",{className:"pairs-grid__slot",children:t?e.jsx(g,{itemEntry:t,size:c}):e.jsx(g,{itemEntry:a,className:"pairs-grid__empty-slot",size:c})})]},`pair-${r}`)}function we({pool:r,pairs:s,size:t}){const a=Math.floor(r.length/2);return e.jsx(C,{className:v("pairs-grid",`pairs-grid--made-${a}`),wrap:!0,children:Array.from({length:a}).map((c,i)=>{const u=i*2,m=s[u],n=s[u+1],h=r.find(I=>I.id===m),l=r.find(I=>I.id===n);return!h||!l?null:e.jsx(b,{index:i,firstItem:h,secondItem:l,placeholder:r[0],size:t},`${m}${n}`)})})}const ye=r=>{const s=D(r.map(t=>t.id));return r.length%2===0||s.pop(),s};function Ae({user:r,announcement:s,pool:t,onSubmitPairs:a}){const{isLoading:c}=H(),[i,u]=R.useState([]),m=Math.floor(t.length/2),n=R.useMemo(()=>i.map(d=>t.find(j=>j.id===d)),[i,t]),h=i.length===m*2&&i.every(Boolean);he();const l=d=>{h||u(j=>{const p=[...j],f=p.findIndex(S=>typeof S!="string");return f!==-1?p[f]=d:p.push(d),p})},I=d=>{u(j=>{const p=[...j],f=p.findIndex(S=>S===d);return f!==-1&&(p[f]=null),p})};return e.jsxs(q,{fullWidth:!0,announcement:s,children:[e.jsx(B,{children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Agrupe os itens em ",m," pares"]}),en:e.jsxs(e.Fragment,{children:["Group the items into ",m," pairs"]})})}),c,e.jsx(_,{type:"rule",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!",e.jsx("br",{}),e.jsx("strong",{children:"Clique"})," em um item para adicioná-lo ao par.",e.jsx("br",{}),"Para remover, basta clicar no item novamente."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!",e.jsx("br",{}),e.jsx("strong",{children:"Click"})," on an item to add it to the pair.",e.jsx("br",{}),"To remove, just click on the item again."]})})}),t.length%2===1&&e.jsx(_,{type:"event",children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Um item ficará sobrando, você também ganha pontos por cada jogador que também deixou esse item sobrando!"}),en:e.jsx(e.Fragment,{children:"One item will be left out, you also get points for each player who also left this item out!"})})}),e.jsx(C,{className:v("pairs-grid",`pairs-grid--${m}`),wrap:!0,children:Array.from({length:m}).map((d,j)=>{const p=j*2,f=i[p],S=i[p+1],k=n[p],M=n[p+1],F=t[0].type==="alien-item"?{...t[0],value:{id:t[0].id,name:{pt:"?",en:"?"}}}:t[0];return e.jsxs(C,{className:v("pairs-grid__pair",`pairs-grid__pair--${j}`),direction:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:f&&k?e.jsx(y,{onClick:()=>I(f),className:G("bounceIn"),children:e.jsx(g,{itemEntry:k})}):e.jsx(g,{itemEntry:F,className:"pairs-grid__empty-slot"})}),e.jsx("div",{className:"pairs-grid__slot",children:S&&M?e.jsx(y,{onClick:()=>I(S),className:G("bounceIn"),children:e.jsx(g,{itemEntry:M})}):e.jsx(g,{itemEntry:F,className:"pairs-grid__empty-slot"})})]},`pair-${j}`)})}),e.jsxs(x,{children:[e.jsx(xe,{onClick:()=>u(ye(t)),children:"Mock Pairs"}),e.jsx(V,{size:"large",disabled:r.ready||!h,onClick:()=>a({pairs:i.map(d=>String(d))}),children:e.jsx(o,{pt:"Enviar Pares",en:"Submit Pairs"})})]}),e.jsx(C,{wrap:!0,className:v("options-grid",`options-grid--${t.length}`),children:t.map(d=>i.includes(d.id)?e.jsx(g,{itemEntry:d,className:"options-grid--selected"},d.id):e.jsx(y,{onClick:()=>l(d.id),children:e.jsx(g,{itemEntry:d,looseItem:!0})},d.id))})]})}function Te({players:r,state:s}){const t=J(r,s),{step:a,setStep:c,goToNextStep:i}=O(),u=Re(c),m=e.jsx(U,{icon:e.jsx(re,{}),title:e.jsx(o,{pt:"Coloque os itens em pares",en:"Pair the items"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(E,{children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Faça pares com os itens e ganhe pontos por cada par igual a de outros jogadores."}),en:e.jsx(e.Fragment,{children:"Pair the items and get points for each pair you match with other players "})})})});return e.jsx(L,{phase:s?.phase,allowedPhase:w.PAIRING,children:e.jsxs(z,{step:a,players:r,waitingRoom:{content:e.jsx(we,{pool:s.pool,pairs:t?.pairs??[],size:"small"})},children:[e.jsx(se,{round:s.round,time:3,onPressButton:i}),e.jsx(Ae,{user:t,announcement:m,pool:s.pool,onSubmitPairs:u})]})})}function Ne({announcement:r,pool:s,goToNextStep:t,gallery:a,leftOut:c,players:i}){const u=R.useMemo(()=>a.filter(n=>n.players.length>1),[a]),m=R.useMemo(()=>a.filter(n=>n.players.length===1),[a]);return e.jsxs(q,{fullWidth:!0,announcement:r,children:[e.jsx(B,{children:e.jsx(o,{pt:"Resultado",en:"Results"})}),e.jsx(A,{size:"xx-small",children:e.jsx(o,{pt:"Pares Vencedores",en:"Winnings Pairs"})}),u.length>0&&e.jsx(_,{type:"scoring",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!"]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!"]})})}),e.jsxs(x,{wrap:!0,children:[u.length===0&&e.jsx(_,{type:"event",children:e.jsx(o,{pt:"Ninguém deu match!",en:"Nobody matched anything!"})}),u.map((n,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:n.players.map(l=>e.jsx(N,{id:i[l].avatarId,size:"small"},`${n.pairId}-${l}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:n.pair[0],secondItem:n.pair[1]})]},n.pairId))]}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(o,{pt:"Sobras Vencedoras",en:"Left Out Matches"})}),e.jsx(_,{type:"scoring",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Para o item que ficou sobrando, você também ganha ",e.jsx(P,{children:"pontos"})," ","por cada jogador que deixou de fora o mesmo item que você!"]}),en:e.jsxs(e.Fragment,{children:["For the item that was left over, you also get ",e.jsx(P,{children:"points"})," for each player who left out the same item as you!"]})})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:c.map((n,h)=>e.jsxs(C,{className:"results",direction:"vertical",children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:n.players.map(l=>e.jsx(N,{id:i[l].avatarId,size:"small"},`${n.id}-${l}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:n.item})]},n.id))})]}),e.jsx(x,{children:e.jsx(ge,{duration:45,onExpire:t,onClick:t,icon:e.jsx(fe,{}),children:e.jsx(o,{pt:"Ver Ranking",en:"See Ranking"})})}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(o,{pt:"Pares que não deram match",en:"Pairs that didn't match"})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:m.map((n,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:n.players.map(l=>e.jsx(N,{id:i[l].avatarId,size:"small"},`${n.pairId}-${l}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:n.pair[0],secondItem:n.pair[1]})]},n.pairId))})]})]})}function ke({players:r,ranking:s,goToPreviousStep:t,round:a}){return e.jsxs(ve,{players:r,ranking:s,gainedPointsDescriptions:[e.jsx(o,{pt:"Deu match com outros jogadores",en:"Match other player's paris"},"1"),e.jsx(o,{pt:"O item de fora foi o mesmo que outros jogadores",en:"The left out item was the same as other players"},"2")],children:[e.jsx(x,{children:e.jsx(W,{onClick:t,children:e.jsx(o,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(K,{round:a})]})}function Me({players:r,state:s}){const{step:t,goToNextStep:a,goToPreviousStep:c}=O(),i=e.jsx(U,{icon:e.jsx(je,{}),title:e.jsx(o,{pt:"Resultado",en:"Results"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(E,{children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Quantos pares você acertou?"}),en:e.jsx(e.Fragment,{children:"How many pairs did you get?"})})})});return e.jsx(L,{phase:s?.phase,allowedPhase:w.RESULTS,children:e.jsxs(z,{step:t,players:r,children:[e.jsx(Ne,{players:r,announcement:i,goToNextStep:a,gallery:s.gallery,leftOut:s.leftOut,pool:s.pool}),e.jsx(ke,{players:r,round:s.round,ranking:s.ranking,goToPreviousStep:c})]})})}function Fe({state:r,players:s}){const t=r.gallery??[];return e.jsxs(Se,{state:r,players:s,announcementIcon:e.jsx(Ie,{}),children:[e.jsx(Pe,{players:s,achievements:r.achievements,reference:_e}),e.jsx(Ce,{title:e.jsx(o,{pt:"Melhores Pares",en:"Best Pairs"}),className:"mt-4",children:t.map((a,c)=>e.jsx(b,{index:c%6,firstItem:a.pair[0],secondItem:a.pair[1],placeholder:a.pair[0]},a.pairId))})]})}function Ge(r){switch(r.phase){case w.PAIRING:return Te;case w.RESULTS:return Me;case ee.DEFAULT.GAME_OVER:return Fe;default:return Z}}function Jr(){return e.jsx(X,{gameCollection:Y.DUETOS,getActiveComponent:Ge})}export{Jr as default};
