import{h as C,j as e,T as l,n as ss,x as b,k as xe,e as _,cj as $e,ck as ns,r as M,q as I,P as Te,B as $,o as we,D as R,aQ as Ue,aM as me,aP as w,ch as qe,I as Oe,F as le,aN as pe,bE as ee,b6 as ze,aT as Se,s as ts,b0 as is}from"./index-WMshXzDH.js";import{u as ne,c as Q,P as Y,d as J,e as Z,S as te,a as ie,b as re,k as rs,g as os,h as as,i as cs}from"./StepSwitcher-D0d7yJs9.js";import{u as ge,a as Me}from"./useCache-FmycdMct.js";import{H as Ge,U as ls,O as ds,a as us,b as js,A as hs}from"./UfoIcon-gp0EBvMf.js";import{T as de}from"./TimeHighlight-DcScOQwg.js";import{S as xs}from"./StepSelectPlayer-CWbMhRbT.js";import{u as ms}from"./useMakeMeReady-Cc773OVF.js";import{M as ps}from"./MagicSkullIcon-Bq3mc_Np.js";import{P as ke}from"./PlayerIconsIcon-C2IRvXcb.js";import{M as F}from"./MetricHighlight-DNfqEKvj.js";import{u as z}from"./useWhichPlayerIsThe-C6nc9PU8.js";import{Q as gs}from"./QuestionIcon-C8__XkFj.js";import{R as fs}from"./RoundAnnouncement-Bv_qq08M.js";import{A as v}from"./AvatarName-YIWl8Idp.js";import{D as oe}from"./DebugOnly-BDrghVkg.js";import{R as T}from"./RuleInstruction-DVhhj4gY.js";import{P as fe}from"./PopoverRule-BNpOPMvh.js";import{V}from"./ViewIf-qgMpzyEs.js";import{I as L}from"./ItemCard-BqPTyaBG.js";import{T as ve}from"./index-WdwqLmy9.js";import{B as se,P as Ee}from"./index-Cd-HKmJt.js";import{S as ue}from"./SignCard-BgkuE3_p.js";import{R as We}from"./InfoCircleOutlined-aA6dmopU.js";import{R as bs}from"./CheckSquareOutlined-DzTpn86z.js";import{D as Ce}from"./DrawingCanvas-CCBGmwIU.js";import{u as Le}from"./useBooleanDictionary-Dq8T-4ZB.js";import{D as ys}from"./DevButton-Dq5KEW70.js";import{S as Re}from"./index-ByEvImLW.js";import{I as be}from"./useDevFeatures-Ga86Ui_a.js";import{C as Is}from"./CanvasSVG-UPa1DLWW.js";import{F as Ve}from"./Table-DxL3rfZu.js";import{B as As}from"./BoxCheckMarkIcon-C2KIWL8J.js";import{B as Ss}from"./BoxMinusIcon-BptTfIH0.js";import{B as vs}from"./BoxOneIcon-BCgaovFc.js";import{C as Es}from"./Collapse-BG7ok7q2.js";import{B as Ns}from"./BoxQuestionMarkIcon-Dj1YfIxE.js";import{F as ws}from"./speech-Z9qZb3me.js";import{R as _s}from"./RobotOutlined-CqBr_phI.js";import{T as Ke}from"./TextHighlight-C1kviUbm.js";import{A as Ts}from"./AlienCommunicationIcon-D4y5zRAF.js";import{A as qs}from"./AlienNeutralIcon-8lJreVlt.js";import{C as De}from"./ClockIcon-Bub4plpa.js";import{T as Os}from"./TrophyIcon-CtlHlSVE.js";import"./GameBanner-CkMUVzfw.js";import{G as Rs}from"./GameOverWrapper-CE3L5NXn.js";import{A as ks}from"./Achievements-7WtsNGjk.js";import{a as Cs}from"./achievements-CQg2yFUn.js";import{B as Bs}from"./BooksIcon-0Ltw_fe4.js";import{C as Ms}from"./Card-X1LsKO1M.js";import{S as Ls}from"./index-5_KceDXV.js";import"./RulesModal-DlHL4Oxu.js";import"./WritingIcon-Mlpc_9l9.js";import"./Game-DcPz_XSE.js";import"./useMutation-C9wOznj-.js";import"./index-BiMbuCNF.js";import"./PurePanel-8QTs7lf_.js";import"./index-BCCHMhqf.js";import"./Avatar-DMMtzMIg.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CHMWxj2T.js";import"./Loading-DHZizrId.js";import"./useBubbleLock-D6EsmjuU.js";import"./AnimatedLoaderIcon-CSUXU_Cj.js";import"./index-DHW4cq95.js";import"./SignIn-C3GttdW8.js";import"./GoogleIcon-Ce2wbKjX.js";import"./WaitingRoomIcon-CmndRxCp.js";import"./AnimatedClockIcon-C4m23DJL.js";import"./LikeFilled-CPDUtDQl.js";import"./AvatarCard-EdQA3fys.js";import"./StarFilled-JOFM_wNz.js";import"./Sprite-DIz-GQ1a.js";import"./WarningOutlined-CvK7Fwrn.js";import"./UndoOutlined-DohBVd0s.js";import"./DeleteOutlined-BocysEL9.js";import"./Overflow-yjFSUKjd.js";import"./EllipsisOutlined-yshxMvdo.js";import"./index-CrA7uhjl.js";import"./scrollTo-ChUvzbpT.js";import"./FilterFilled-D_xqm4uQ.js";import"./iconUtil-4CZ1MRBK.js";import"./CaretDownOutlined-BHIHRSFr.js";import"./CaretUpOutlined-EB6FGP8h.js";import"./TheEndIcon-Dme5h9Ah.js";import"./ArrowRightOutlined-awV0UPcN.js";import"./progress-Bl42zBfr.js";import"./TitledContainer-BCsbDPb0.js";import"./Medal-BrYFaeY-.js";const N={ALIEN_SELECTION:"ALIEN_SELECTION",ALIEN_SEEDING:"ALIEN_SEEDING",HUMAN_ASK:"HUMAN_ASK",ALIEN_ANSWER:"ALIEN_ANSWER",ALIEN_REQUEST:"ALIEN_REQUEST",OFFERINGS:"OFFERINGS",REVEAL:"REVEAL"},ae={SUBMIT_ALIEN:"SUBMIT_ALIEN",SUBMIT_SEEDS:"SUBMIT_SEEDS",SUBMIT_HUMAN_INQUIRY:"SUBMIT_HUMAN_INQUIRY",SUBMIT_ALIEN_RESPONSE:"SUBMIT_ALIEN_RESPONSE",SUBMIT_ALIEN_REQUEST:"SUBMIT_ALIEN_REQUEST",SUBMIT_OFFERINGS:"SUBMIT_OFFERINGS"},P={WIDTH:500,HEIGHT:120},_e={ITEM:"ITEM",CURSE:"CURSE"},Be={pt:"Quantas vezes esse item foi parte de uma pergunta",en:"How many times this item was part of a question"};function Hs(n){const{translate:s}=C(),t=ne({actionName:"submit-action",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{t({action:ae.SUBMIT_ALIEN,...i})}}function Us(n){const{translate:s}=C(),t=ne({actionName:"submit-seeds",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Análise submetida com sucesso","Analyses submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua análise","Oops, the application found an error while trying to submit your analyses")});return i=>{t({action:ae.SUBMIT_SEEDS,...i})}}function Ds(n){const{translate:s}=C(),t=ne({actionName:"submit-action",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{t({action:ae.SUBMIT_HUMAN_INQUIRY,...i})}}function Ps(){const{translate:n}=C(),s=ne({actionName:"submit-action",successMessage:n("Ação submetida com sucesso","Action submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return t=>{s({action:ae.SUBMIT_ALIEN_RESPONSE,...t})}}function Fs(){return ms({})}function $s(n){const{translate:s}=C(),t=ne({actionName:"submit-action",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{t({action:ae.SUBMIT_ALIEN_REQUEST,...i})}}function zs(n){const{translate:s}=C(),t=ne({actionName:"submit-action",onSuccess:()=>n(2),onError:()=>n(0),successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{t({action:ae.SUBMIT_OFFERINGS,...i})}}function O({children:n,type:s,iconSize:t,className:i}){return e.jsx(F,{icon:e.jsx(ke,{}),type:s,iconSize:t,className:i,children:n})}function Gs({children:n,type:s,iconSize:t,className:i}){return e.jsx(F,{icon:e.jsx(Ge,{}),type:s,iconSize:t,className:i,children:n})}function je({children:n,type:s,iconSize:t,className:i}){return e.jsx(F,{icon:e.jsx(ps,{}),type:s,iconSize:t,className:i,children:n})}function Ws({players:n,state:s}){const{step:t,setStep:i}=Q();ge({clearCache:!0}),Me({clearCache:!0});const o=Hs(i),c=s.status,a=e.jsx(Y,{icon:e.jsx(ls,{}),title:e.jsx(l,{pt:"Quem quer ser o alienígena?",en:"Who will be the Alien?"}),currentRound:s?.round?.current,type:"overlay"}),r=e.jsx(l,{pt:"Quem quer ser o alienígena?",en:"Who will be the Alien?"}),d=e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Um alienígena chegou à Terra e não fala nossa língua. Porém, descobrimos que ele quer abduzir"," ",e.jsxs(O,{type:"positive",children:[c.needed," objetos"]}),", mas não sabemos quais.",e.jsx("br",{}),"A cada rodada, devemos mostrar alguns objetos ao alienígena com o objetivo de desvendar um dos",e.jsx(Gs,{children:"25 caracteres alienígenas"}),' relacionados àqueles objetos. Por exemplo, mostrar uma "bola" e um "pneu" talvez descobriremos o símbolo para "redondo".',e.jsx("br",{}),"Então o alienígena vai pedir um objeto específico usando símbolos de sua língua alienígena.",e.jsx("br",{}),"Teremos ",e.jsx(de,{children:c.timeLeft})," chances de entregar todos os objetos ao alienígena, mas dentre os 25 objetos, há"," ",e.jsx(je,{type:"negative",children:c.totalCurses})," que o alienígena considera amaldiçoado e não quer. Se você oferece um deles, uma chance adicional é usada naquela rodada.",e.jsx("br",{}),e.jsx("strong",{children:"Um jogador deve ser o alienígena. O VIP selecionará o alienígena."})]}),en:e.jsxs(e.Fragment,{children:["An alien has arrived on Earth and does not speak our language. However, we figured out that they want to abduct",e.jsx(O,{children:c.needed})," objects but we don't know which ones.",e.jsx("br",{}),'Each round, we will show a few objects to the alien in the intent to figure out one of the 25 alien characters related to those objects. For example, if we should a "ball" and "tire" we might figure out what symbol means "round".',e.jsx("br",{}),"Then, the alien will request an specific object using their language.",e.jsx("br",{}),"We have ",e.jsx(de,{children:c.timeLeft})," chances to offer all request objects, but among the 25 objects there are"," ",e.jsx(je,{type:"negative",children:c.totalCurses})," ones that the alien considered cursed. If we offer one of them, we waste one additional chance.",e.jsx("br",{}),e.jsx("strong",{children:"One player must be the alien, the game master will select it."})]})});return e.jsx(J,{phase:s?.phase,allowedPhase:N.ALIEN_SELECTION,children:e.jsx(Z,{step:t,players:n,children:e.jsx(xs,{players:n,announcement:a,titleProps:{children:e.jsx(e.Fragment,{children:r})},ruleInstructionProps:{children:e.jsx(e.Fragment,{children:d}),type:"lore"},onSubmitPlayer:x=>o({alienId:x})})})})}function Qe(){return ss(12,{minWidth:48,maxWidth:72,margin:6})}function Ye({status:n}){return e.jsxs("div",{className:"objects-key",children:[e.jsxs("div",{className:"objects-key__entry",children:[e.jsx("span",{className:"objects-key__example objects-key__example--UNKNOWN"}),e.jsx("span",{className:"objects-key__text",children:e.jsx(l,{pt:"Desconhecido",en:"Unknown"})}),e.jsxs("span",{children:["Total: ",e.jsx(ve,{children:25})]})]}),e.jsxs("div",{className:"objects-key__entry",children:[e.jsx("span",{className:"objects-key__example objects-key__example--ITEM"}),e.jsx("span",{className:"objects-key__text",children:e.jsx(l,{pt:"O alienígena quer",en:"Alien wants it"})}),e.jsxs("span",{children:[e.jsx(l,{pt:"Entregues / Necessários",en:"Delivered / Needed"}),":"," ",e.jsxs(ve,{children:[n.found," / ",n.needed]})]})]}),e.jsxs("div",{className:"objects-key__entry",children:[e.jsx("span",{className:"objects-key__example objects-key__example--CURSE"}),e.jsx("span",{className:"objects-key__text",children:e.jsx(l,{pt:"O alienígena tem medo",en:"Alien is afraid of it"})}),e.jsxs("span",{children:["Amaldiçoados:"," ",e.jsxs(ve,{children:[Object.keys(n.curses).length,"/",n.totalCurses]})]})]}),e.jsxs("div",{className:"objects-key__entry",children:[e.jsx("span",{className:"objects-key__example objects-key__example--BLANK"}),e.jsx("span",{className:"objects-key__text",children:e.jsx(l,{pt:"Alienígena não quis",en:"Alien did not want it"})}),e.jsxs("span",{children:[e.jsx(l,{pt:"Rodadas restantes",en:"Rounds left"}),": ",e.jsx(ve,{children:n.timeLeft})]})]})]})}function D({items:n,showTypes:s=!1,activeObjects:t,showAll:i,status:o}){const{dualTranslate:c}=C(),a=Qe();return e.jsxs(b,{direction:"vertical",children:[e.jsx(xe,{level:3,size:"xx-small",children:e.jsx(l,{pt:"Itens",en:"Items"})}),e.jsx("div",{className:"objects-grid",children:n.map(r=>e.jsxs("div",{className:_("objects-grid__item",(s||r.offerings.length>0)&&`objects-grid__item--${r.type}`,t?.includes(r.id)&&"objects-grid__item--ask"),children:[e.jsx(se,{count:r.inquiries,color:"orange",title:c(Be),children:e.jsx(L,{id:`${r.id}`,className:_(r.offerings.length>0&&"objects-grid__item-offered"),title:r.name?c(r.name):void 0,width:a})}),i&&r.offerings.length>0&&r.type==="ITEM"&&e.jsx("span",{className:"objects-grid__offered-icon objects-grid__offered-icon--correct",children:e.jsx($e,{})}),i&&r.offerings.length>0&&r.type!=="ITEM"&&e.jsx("span",{className:"objects-grid__offered-icon objects-grid__offered-icon--incorrect",children:e.jsx(ns,{})})]},`objects-grid-${r.id}`))}),e.jsx(Ye,{status:o})]})}function k({attributes:n,startingAttributesIds:s=[],phase:t}){const{cache:i,setCache:o}=Me({}),{language:c}=C(),a=(r,d)=>{o(x=>{const j={...x};return j[r]=d,j})};return M.useEffect(()=>{t===N.HUMAN_ASK&&s.length&&I.isEmpty(i)&&o(r=>{const d={...r};return n.forEach(x=>{s.find(j=>j===x.id)&&(d[x.id]=!0)}),d})},[s,t]),e.jsxs(b,{direction:"vertical",children:[e.jsxs(xe,{level:3,size:"xx-small",children:[e.jsx(l,{pt:"Atributos e Símbolos",en:"Attributes and Symbols"}),e.jsx(Te,{content:e.jsx(l,{pt:"Você pode clicar no título do atributo para marcá-lo como usado",en:"You may click on the title of an attribute to mark it as used"}),title:e.jsx(l,{pt:"Dica",en:"Hint"}),arrow:!0,children:e.jsx($,{type:"text",style:{color:"white"},icon:e.jsx(We,{}),shape:"circle"})})]}),e.jsx("div",{className:"attributes-grid",children:I.orderBy(n,`attribute.${c}`).map(r=>{const d=!!s.find(x=>x===r.id);return e.jsxs("div",{className:_("attributes-grid__item",!!i[r.id]&&"attributes-grid__item--used"),children:[e.jsx(Ee,{title:d?e.jsx(l,{pt:"Atributo inicial",en:"Starting attribute"}):e.jsx(l,{pt:"Usado?",en:"Used?"}),description:r.description?e.jsx("span",{className:"attributes-grid__mini-description",children:e.jsx(R,{children:r.description})}):void 0,onConfirm:()=>a(r.id,!0),onCancel:()=>a(r.id,!1),okText:e.jsx(l,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(l,{pt:"Não",en:"No"}),okButtonProps:{disabled:d},cancelButtonProps:{disabled:d},children:e.jsxs(we,{children:[e.jsx(R,{children:r.name}),d&&e.jsx(bs,{}),!!i[r.id]&&!d&&e.jsx($e,{})]})}),e.jsx(ue,{id:`${r.spriteId}`,className:"transparent",width:48})]},r.name[c])})})]})}function X({attributes:n,startingAttributesIds:s=[]}){const{cache:t,setCache:i}=ge(),{language:o,dualTranslate:c}=C(),a=(r,d)=>{i(x=>{const j={...x};return j[r]=d??[],j})};return e.jsxs(b,{direction:"vertical",children:[e.jsxs(xe,{level:3,size:"xx-small",children:[e.jsx(l,{pt:"Atributos e Símbolos",en:"Attributes and Symbols"}),e.jsxs(Te,{content:e.jsx(l,{pt:"Você pode clicar no título do atributo para apagar o que você desenhou",en:"You may click on the title of an attribute to erase what you drew"}),title:e.jsx(l,{pt:"Dica",en:"Hint"}),arrow:!0,children:[e.jsx($,{type:"text",style:{color:"white"},icon:e.jsx(We,{}),shape:"circle"})," "]})]}),e.jsxs(b,{direction:"vertical",className:"board-container",children:[e.jsx("div",{className:"attributes-grid",children:I.orderBy(n,`attribute.${o}`).map(r=>s.find(d=>d===r.id)?e.jsxs("div",{className:"attributes-grid__item",children:[e.jsxs(Ue,{title:`${c(r.description?r.description:r.name)} (${c({pt:"Item inicial",en:"Starting item"})})`,placement:"bottom",children:[e.jsx(R,{children:r.name}),"*"]}),e.jsx(ue,{id:`${r.spriteId}`,className:"transparent",width:48})]},r.id):e.jsxs("div",{className:"attributes-grid__item",children:[e.jsx(Ee,{title:e.jsx(l,{pt:"Apagar símbolo",en:"Erase symbol"}),onConfirm:()=>a(r.id,[]),okText:e.jsx(l,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(l,{pt:"Não",en:"No"}),children:e.jsx(Ue,{title:c(r.description?r.description:r.name),placement:"bottom",children:e.jsx(we,{children:e.jsx(R,{children:r.name})})})}),e.jsx(Ce,{lines:t?.[r.id]??[],setLines:d=>a(r.id,d),width:60,height:60,showControls:!1,strokeWidth:"small",className:"attributes-grid__canvas",willReadFrequently:!0})]},r.id))}),e.jsxs("div",{className:"attributes-grid__item",children:[e.jsx(Ee,{title:e.jsx(l,{pt:"Apagar símbolo",en:"Erase symbol"}),onConfirm:()=>a("unknown",[]),okText:e.jsx(l,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(l,{pt:"Não",en:"No"}),children:e.jsx(we,{children:e.jsx(l,{pt:"Símbolos Desconhecidos",en:"Unknown Symbols"})})}),e.jsx(Ce,{lines:t?.unknown??[],setLines:r=>a("unknown",r),width:390,height:60,showControls:!1,strokeWidth:"small",className:"attributes-grid__canvas",willReadFrequently:!0})]}),e.jsx(Ee,{title:e.jsx(l,{pt:"Apagar todos",en:"Erase Clear all"}),onConfirm:()=>i({}),okText:e.jsx(l,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(l,{pt:"Não",en:"No"}),children:e.jsx($,{size:"small",type:"dashed",children:e.jsx(l,{pt:"Apagar todos",en:"Clear all"})})})]})]})}const K={OPPOSITE:{value:-10,prefix:"^",name:"OPPOSITE",label:{en:"Opposite",pt:"Oposto"},prefixLabel:{en:"really not ",pt:"muito não "}},UNRELATED:{value:-3,prefix:"!",name:"UNRELATED",label:{en:"Unrelated",pt:"Desconexo"},prefixLabel:{en:"not ",pt:"não "}},UNCLEAR:{value:-1,prefix:"~",name:"UNCLEAR",label:{en:"Unclear",pt:"Incerto"},prefixLabel:{en:"sorta ",pt:"meio "}},RELATED:{value:5,prefix:"+",name:"RELATED",label:{en:"Related",pt:"Relacionado"},prefixLabel:{en:"",pt:""}},DETERMINISTIC:{value:10,prefix:"*",name:"DETERMINISTIC",label:{en:"Deterministic",pt:"Determinístico"},prefixLabel:{en:"very ",pt:"muito "}}},Vs=I.keyBy(K,"prefix");function Je(n,s,t){const i=s.attributes,o={};for(const a of t)o[a]=i[a];const c={id:n.id,name:n.name,attributes:o,type:"ITEM",inquiries:0,offerings:[]};return n.nsfw&&(c.nsfw=n.nsfw),c}function Ze(n){const{id:s,name:t,description:i,limited:o,spriteId:c,priority:a}=n,r={id:s,name:t,description:i,spriteId:c,priority:a,known:!1};return o&&(r.limited=o),r}function Ks(n,s,t,i){const o=i?.nsfw??!1,c=i?.itemsGridSize??25,a=i?.attributesGridSize??25,r=i?.reliability??70,d=I.shuffle(s.filter(m=>m.complete&&m.signature&&(m.reliability??0)>r&&(o||!n[m.id].nsfw))),x={},j=t.map(m=>{let E=null,S=0;for(;S<500&&!E;){if(S===499)throw new Error("Could not find a deterministic item for attribute");if(m.limited){const H=d.find(U=>U.attributes[m.id]===K.RELATED.value&&!x[U.id]);H&&(E=H,x[H.id]=!0)}else{const H=d.find(U=>U.attributes[m.id]===K.DETERMINISTIC.value&&!x[U.id]);H&&(E=H,x[H.id]=!0)}S+=1}return E}).filter(Boolean),h=t.reduce((m,E)=>(m[E.id]=0,m),{}),u={};j.forEach((m,E)=>{u[t[E].id]=m,Object.keys(m.attributes).forEach(S=>{m.attributes[S]>0&&(h[S]+=m.attributes[S])})});const p=t.filter(m=>!m.limited),g=I.sortBy(p,m=>-h[m.id]).filter((m,E,S)=>{if(!m.oppositeId&&!m.relatedId)return!0;const H=m.oppositeId??m.relatedId;for(let U=0;U<E;U++)if(S[U].id===H)return!1;return!0}).slice(0,a-1),A=t.filter(m=>m.limited),q=I.sortBy(A,m=>-h[m.id])[0],f=[...g,q],y=f.map(m=>m.id),B=I.sampleSize(f.map(m=>u[m.id]),c);return{attributes:I.sortBy(f.map(Ze),["priority"]),items:B.map(m=>Je(n[m.id],m,y))}}function Qs(n,s,t){const i=n.filter(a=>t.includes(a.id));if(i.length===0)return[];const o={};return i.forEach(a=>{Object.entries(a.attributes).forEach(([r,d])=>{o[r]||(o[r]=0),o[r]+=d})}),Object.entries(o).filter(([,a])=>a>0).sort(([,a],[,r])=>r-a).map(([a])=>a).map(a=>s.find(r=>r.id===a)).filter(a=>a!==void 0)}const Ys=["*","^","+","~","!"];function Ne(n,s,t,i){const o=n.find(j=>j.id===t);if(!o)return"";const c=s.filter(j=>i?.useOnlyKnownAttributes?j.known:!0),a=new Map(c.map(j=>[j.id,j])),r=[];for(const[j,h]of Object.entries(o.attributes)){const u=a.get(j);if(u){const p=Object.values(K).find(g=>g.value===h);p&&r.push({prefix:p.prefix,id:u.id,priority:u.priority})}}const d=I.sortBy(r,[j=>Ys.indexOf(j.prefix),j=>j.prefix===K.UNRELATED.prefix&&i?.prioritizedNegatives?.includes(j.prefix)?-1:j.priority,["asc","asc"]]);return(i?.length?d.slice(0,i?.length):d).map(j=>`${j.prefix}${j.id}`).join("")}function Js(n){return(n.match(/[\^*+~!][a-zA-Z0-9]+/g)??[]).map(t=>({prefix:t[0],id:t.slice(1),variant:Vs[t[0]].name,spriteId:""}))}function Zs(n){const t=n.filter(i=>i.type==="CURSE").reduce((i,o)=>(Object.entries(o.attributes).forEach(([c,a])=>{a===K.DETERMINISTIC.value&&(i[c]=!0)}),i),{});return Object.keys(t)}function Xs(n,s){const t=n.filter(h=>h.type==="ITEM"&&h.offerings.length===0),i=n.filter(h=>h.type==="BLANK"&&h.offerings.length===0),o=n.filter(h=>h.type==="CURSE"),c=Zs(o),a=o.reduce((h,u)=>{const p=Ne(n,s,u.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:c});return h[u.id]=p,h},{}),r=i.reduce((h,u)=>{const p=Ne(n,s,u.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:c});return h[u.id]=p,h},{}),d=t.reduce((h,u)=>{const p=Ne(n,s,u.id,{useOnlyKnownAttributes:!0,length:5,prioritizedNegatives:c});return h[u.id]=p,h},{}),x=(h,u)=>Object.values(u).filter(p=>p===h).length;return I.orderBy(t.map(h=>{const u=d[h.id];return{item:h,signature:u,equivalentCurses:x(u,a),equivalentBlanks:x(u,r)}}),["equivalentCurses","equivalentBlanks"],["asc","asc"])}const en=(n,s)=>{const t={};s.forEach(o=>{t[o.id]=0}),n.forEach(o=>{Object.entries(o.attributes).forEach(([c,a])=>{a>0&&t[c]&&(t[c]=a)})});const i=I.orderBy(I.keys(t),o=>-t[o]);return[i[0],i[Math.floor(i.length/2)],i[i.length-1]]},sn=(n,s,t)=>{const i=I.orderBy(s.filter(o=>!t.includes(o.id)).map(o=>{const c=n.filter(a=>a.attributes[o.id]>0&&a.offerings.length===0).slice(0,5);return{attribute:o,items:c}}),["items.length"],["desc"]);return I.orderBy(I.shuffle(i.slice(0,5)).slice(0,3),["items.length","attribute.id"],["desc","asc"])},he={createAlienItem:Je,createAlienAttribute:Ze,buildAlienGameGrids:Ks,getBestAttributes:Qs,getAlienItemSignature:Ne,getNonClashingItem:Xs,getInitialKnownAttributes:en,parseItemSignature:Js,getInquirySuggestions:sn,ATTRIBUTE_VALUE_DICT:K};function He({items:n,selectedObjects:s,selectObject:t,user:i,maxObjects:o=5,hideKey:c=!1,showTypes:a=!1,isAlienRequest:r=!1,status:d}){const{isLoading:x}=me(),{dualTranslate:j}=C(),h=Qe();return e.jsxs(b,{direction:"vertical",children:[e.jsx(xe,{level:3,size:"xx-small",children:e.jsx(l,{pt:"Itens",en:"Items"})}),e.jsx("div",{className:"objects-grid",children:n.map(u=>u.offerings.length||r&&u.type!=="ITEM"?e.jsx("div",{className:_("objects-grid__item",`objects-grid__item--${u.type}`),children:e.jsx(se,{count:u.inquiries,color:"orange",title:j(Be),children:e.jsx(L,{id:`${u.id}`,className:_(u.offerings.length&&"objects-grid__item-offered"),title:u.name?j(u.name):void 0,width:h})})},`selectable-${u.id}`):e.jsx(we,{className:_("objects-grid__button",a&&`objects-grid__button--${u.type}`),disabled:u.offerings.length>0||!s[u.id]&&Object.keys(s).length===o||x||i.ready,active:s[u.id],activeClass:"objects-grid__button--active",onClick:()=>t(u.id),children:e.jsx(se,{count:u.inquiries,color:"orange",title:j(Be),children:e.jsx(L,{id:`${u.id}`,className:_(u.offerings.length&&"objects-grid__item-offered"),title:u.name?j(u.name):void 0,width:h})})},`selectable-${u.id}`))}),!c&&e.jsx(Ye,{status:d})]})}function nn({attributes:n,items:s,submitInquiry:t,user:i,startingAttributesIds:o,status:c}){const{isLoading:a}=me(),{language:r}=C(),[d,x]=M.useState(""),{dict:j,updateDict:h,keys:u}=Le({},g=>Object.keys(g).length<5),p=M.useMemo(()=>I.orderBy(n,`attribute.${r}`),[n,r]);return e.jsxs(w,{vertical:!0,children:[e.jsxs(b,{children:[e.jsxs(Re,{className:"intention-select",defaultValue:"",size:"large",onChange:g=>x(g),children:[e.jsx(Re.Option,{value:"",children:e.jsx(l,{pt:"Selecione um atributo",en:"Select an attribute"})}),p.map(g=>e.jsx(Re.Option,{value:g.id,style:{textDecoration:o.includes(g.id)?"line-through":"none"},children:e.jsx(R,{children:g.name})},`attribute-${g.id}`))]}),e.jsx(se,{count:u.length,children:e.jsx(qe,{size:"large",type:"primary",disabled:!d||u.length<1||a,onClick:()=>t({objectsIds:u,intention:d}),children:e.jsx(l,{pt:"Enviar Objetos",en:"Submit Objects"})})}),e.jsx(oe,{devOnly:!0,children:e.jsx(tn,{items:s,attributes:n,startingAttributesIds:o,submitInquiry:t})})]}),e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(He,{items:s,selectedObjects:j,selectObject:h,user:i,status:c}),e.jsx(X,{attributes:n,startingAttributesIds:o})]})]})}function tn({items:n,attributes:s,startingAttributesIds:t,submitInquiry:i}){const{cache:o}=ge(),c=()=>{const a=he.getInquirySuggestions(n,s,[...t,...Object.keys(o)]);i({objectsIds:a[0].items.map(r=>r.id),intention:a[0].attribute.id})};return e.jsx(ys,{onClick:c,size:"large",children:"Submit Mock"})}function G({user:n,children:s}){return n.role==="alien"?e.jsx(e.Fragment,{children:s}):null}function W({user:n,children:s}){return n.role==="human"?e.jsx(e.Fragment,{children:s}):null}function ye({request:n,isAlienBot:s,size:t,className:i,sentenceMode:o,attributes:c}){const a=t==="small"?P.WIDTH/2:P.WIDTH,r=t==="small"?P.HEIGHT/2:P.HEIGHT,d=rn(o?n:"",c);return s?o&&d.length===0?null:o?e.jsx("div",{className:_("alien-canvas alien-canvas--small alien-canvas--bot",i),style:t==="small"?void 0:{width:`${a}px`,height:`${r}px`},children:d.map(x=>e.jsx(ue,{id:x.spriteId,width:72,className:_("bot-sign",`bot-sign--${x.variant}`)},`request-${x?.spriteId}`))}):e.jsx("div",{className:_("alien-canvas alien-canvas--small alien-canvas--bot",i),style:{width:`${a}px`,height:`${r}px`},children:e.jsx(ue,{id:n,width:72,className:"transparent"})}):e.jsx(Is,{drawing:n,width:a,height:r,viewBox:`0 0 ${P.WIDTH} ${P.HEIGHT}`,strokeWidth:"large",className:_("alien-canvas alien-canvas--small",i)})}function rn(n,s){return M.useMemo(()=>{if(n){const t=I.keyBy(s,"id");return he.parseItemSignature(n).map(i=>(i.spriteId=t[i.id].spriteId,i))}return[]},[n])}function on({inquiryHistory:n,players:s,isAlienBot:t,attributes:i,showIntention:o,debugMode:c}){if(n.length<1)return null;const a=[{key:"player",title:e.jsx(l,{pt:"Jogador",en:"Player"}),dataIndex:"playerId",render:r=>e.jsx(v,{size:"small",player:s[r]})},{key:"items",title:e.jsx(l,{pt:"Objetos",en:"Objects"}),dataIndex:"objectIds",render:r=>e.jsx(an,{objectIds:r})},{key:"answer",title:e.jsx(l,{pt:"Resposta",en:"Answer"}),dataIndex:"answer",render:r=>e.jsx(ye,{request:r,isAlienBot:t,size:"small",attributes:i})}];return(o||c)&&a.push({key:"intention",title:e.jsx(l,{pt:"Intenção",en:"Intention"}),dataIndex:"intention",render:r=>e.jsx(Pe,{attributes:i,intention:r})}),c&&a.push({key:"assumption",title:e.jsx(l,{pt:"Suposição",en:"Assumption"}),dataIndex:"assumption",render:r=>e.jsx(Pe,{attributes:i,intention:r})}),e.jsx(b,{direction:"vertical",children:e.jsx(Ve,{columns:a,bordered:!0,dataSource:n})})}function an({objectIds:n}){return e.jsx(b,{children:n.map(s=>e.jsx(L,{id:`${s}`,width:48},`${n.join("-")}-${s}`))})}function Pe({attributes:n,intention:s}){const t=n.find(i=>i.id===s);return e.jsx(b,{children:t?e.jsx(R,{children:t.name}):e.jsx(l,{pt:"Desconhecido",en:"Unknown"})})}function Xe({itemId:n,items:s}){const t=s.find(i=>i.id===n);return t?.type===_e.CURSE?e.jsxs("div",{children:[e.jsx(Oe,{icon:e.jsx(Ss,{}),size:"small"})," ",e.jsx(l,{pt:"Amaldiçoado",en:"Cursed"})]}):t?.type===_e.ITEM?e.jsxs("div",{children:[e.jsx(Oe,{icon:e.jsx(As,{}),size:"small"})," ",e.jsx(l,{pt:"Correto",en:"Correct"})]}):e.jsxs("div",{children:[e.jsx(Oe,{icon:e.jsx(vs,{}),size:"small"})," ",e.jsx(l,{pt:"Irrelevante",en:"Irrelevant"})]})}function cn({requestHistory:n,players:s,items:t,attributes:i,isAlienBot:o,showIntention:c}){if(n.length<1)return null;const a=[{key:"request",title:e.jsx(l,{pt:"Pedido",en:"Request"}),dataIndex:"request",render:r=>e.jsx(ye,{request:r,isAlienBot:o,size:"small",attributes:i,sentenceMode:!0})},{key:"offers",title:e.jsx(l,{pt:"Oferendas",en:"Offerings"}),dataIndex:"offers",render:r=>e.jsx(ln,{players:s,offers:r,items:t})}];return c&&a.push({key:"intention",title:e.jsx(l,{pt:"Intenção",en:"Intention"}),dataIndex:"intention",render:r=>r?e.jsx(L,{id:`${r}`,width:50}):e.jsx(e.Fragment,{})}),e.jsx(b,{direction:"vertical",children:e.jsx(Ve,{columns:a,bordered:!0,dataSource:n})})}function ln({offers:n,players:s,items:t}){return e.jsx(b,{children:n.map(i=>e.jsxs(b,{direction:"vertical",align:"center",children:[e.jsx(L,{id:`${i.objectId}`,className:"objects-grid__item-offered",width:48}),e.jsx(v,{size:"small",player:s[i.playerId]}),e.jsx(Xe,{itemId:i.objectId,items:t})]},`offer-${i.objectId}-${i.playerId}`))})}function ce({inquiryHistory:n,requestHistory:s,players:t,items:i,isAlienBot:o,showIntention:c=!1,attributes:a,debugMode:r}){const d=[{key:"inquiries",label:e.jsx(l,{pt:"Histórico de Perguntas dos Humanos",en:"Human Inquiry History"}),children:e.jsxs(e.Fragment,{children:[e.jsx(on,{inquiryHistory:n,players:t,isAlienBot:o,attributes:a,showIntention:c,debugMode:r}),n.length===0&&e.jsx(l,{pt:"Nenhuma pergunta ainda.",en:"No questions yet."})]})},{key:"requests",label:e.jsx(l,{pt:"Histórico de Pedidos dos Alienígenas",en:"Alien Request History"}),children:e.jsxs(e.Fragment,{children:[e.jsx(cn,{requestHistory:s,players:t,items:i,isAlienBot:o,showIntention:c||r,attributes:a}),s.length===0&&e.jsx(l,{pt:"Nenhum pedido ainda.",en:"No requests yet."})]})}];return e.jsx(be,{contained:!0,children:e.jsx(Es,{items:d})})}function Ie({status:n}){return e.jsxs(be,{children:[e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(l,{pt:"Objetos entregues/queridos",en:"Delivered/Needed objects"}),":"," ",e.jsxs(O,{children:[n.found,"/",n.needed]})]}),e.jsxs("li",{children:[e.jsx(l,{pt:"Tempo Sobrando",en:"Remaining Time"}),":"," ",e.jsx(de,{children:n.timeLeft})]}),e.jsxs("li",{children:[e.jsx(l,{pt:"Objetos disponíveis",en:"Remaining Objects"}),":"," ",e.jsx(F,{icon:e.jsx(Ns,{}),children:n.total})]}),e.jsxs("li",{children:[e.jsx(l,{pt:"Objetos amaldiçoados",en:"Cursed Objects"}),":"," ",e.jsx(je,{children:n.totalCurses})]})]}),e.jsxs("p",{children:[e.jsx(se,{size:"small",count:2,color:"orange"})," -"," ",e.jsx(l,{en:"The little orange numbers on the items board indicate the number of times the object was asked about.",pt:"Os números nos círculos laranjas na grade de itens indicam quantas vezes o objeto foi usado em uma pergunta."})]})]})}function dn(){return e.jsx(be,{contained:!0,children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Entenda como o alienígena pensa:",e.jsxs("ul",{children:[e.jsx("li",{children:"Ele vai sempre tentar de falar um símbolo que você não sabe, então, se você perguntar algo similar a algo perguntando anteriormente, ele não repete e sim te dá o mais próximo."}),e.jsx("li",{children:"Nos pedidos, os símbolos são ordenados do mais a ver para o menos a ver."}),e.jsx("li",{children:"Bonito: colorido, festivo"}),e.jsx("li",{children:"Brilho: claro, luz"}),e.jsx("li",{children:"Conhecimento: sabedoria, inteligência, tecnologia, ideologia, ideia"}),e.jsx("li",{children:"Defesa: proteção"}),e.jsx("li",{children:"Força: energia, poder"}),e.jsx("li",{children:"Longo: comprido, alto"}),e.jsx("li",{children:'Máquina: tem engrenagens, usa energia, "funciona"'}),e.jsx("li",{children:"Metal: se a ilustração tiver coisas metálicas, pode ser metal"}),e.jsx("li",{children:"Pesado: pode ser carregado por alguém ou alguma coisa e é pesado"}),e.jsx("li",{children:"Segurável: você normalmente segura ou tem alça pra segurar"}),e.jsx("li",{children:"Sólido: duro, contrário de frágil ou macio"})]})]}),en:e.jsxs(e.Fragment,{children:["Learn how the alien thinks:",e.jsxs("ul",{children:[e.jsx("li",{children:"They will always give you a symbol you don't know yet, so if you ask for something similar to a previous ask, they will give you the second best symbol."}),e.jsx("li",{children:"During requests, the symbols are order from more to less matching."}),e.jsx("li",{children:"Beautiful: colorful, festive"}),e.jsx("li",{children:"Defense: protection"}),e.jsx("li",{children:"Bright: light, shiny, (not smart)"}),e.jsx("li",{children:"Heavy: can be carried by something or someone and it's heavy"}),e.jsx("li",{children:"Holdable: you normally holds it or have a handle"}),e.jsx("li",{children:"Knowledge: wisdom, smarts, technology, idea"}),e.jsx("li",{children:"Long: tall, lengthy"}),e.jsx("li",{children:'Machine: it has gears, uses powers, "works"'}),e.jsx("li",{children:"Metal: if the illustrator has anything metal, it may be metal"}),e.jsx("li",{children:"Power: force, energy"}),e.jsx("li",{children:"Solid: hard, very hard"})]})]})})})}function Ae(){return e.jsx(ws,{type:"popover",position:1,icon:e.jsx(_s,{}),content:e.jsx(dn,{}),label:e.jsx(l,{pt:" Bots",en:" Bots"})})}function un({items:n,attributes:s,startingAttributesIds:t}){const{cache:i}=ge(),o=M.useMemo(()=>he.getInquirySuggestions(n,s,[...t,...Object.keys(i)]),[n,s,t,i]),c=e.jsx("ul",{children:o.map(a=>e.jsx("li",{className:"my-1",children:e.jsxs(le,{align:"center",gap:8,children:[e.jsx(Ke,{children:e.jsx(R,{children:a.attribute.name})}),a.items.map(r=>e.jsx(L,{id:r.id,width:36,padding:2},r.id))]})},a.attribute.id))});return e.jsx(Te,{content:c,title:e.jsx(l,{pt:"Sugestões de Pergunta",en:"Ask Suggestions"}),children:e.jsx($,{type:"link",children:e.jsx(l,{pt:"Sugestões?",en:"Suggestions?"})})})}function Fe({suggestions:n}){const s=e.jsx("ul",{children:n.map(t=>e.jsx("li",{className:"my-1",children:e.jsxs(le,{align:"center",gap:8,children:[e.jsx(Ke,{children:e.jsx(R,{children:t.name})}),e.jsx(ue,{id:`${t.spriteId}`,className:"transparent",width:36})]})},t.id))});return e.jsx(Te,{content:s,title:e.jsx(l,{pt:"Sugestões de Resposta",en:"Answer Suggestions"}),children:e.jsx($,{type:"link",children:e.jsx(l,{pt:"Ajuda?",en:"Help?"})})})}function jn({user:n,announcement:s,players:t,onSubmitHumanInquiry:i,items:o,attributes:c,alien:a,isUserAlien:r,currentHuman:d,isUserTheCurrentHuman:x,requestHistory:j,inquiryHistory:h,status:u,isAlienBot:p,startingAttributesIds:g,debugMode:A}){const[q]=pe("isDebugEnabled");return e.jsxs(te,{fullWidth:!0,announcement:x?s:void 0,children:[e.jsx(ie,{children:x?e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Pergunte ao Alienígena!"}),en:e.jsx(e.Fragment,{children:"Ask the Alien!"})}):e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Perguntas ao Alienígena"}),en:e.jsx(e.Fragment,{children:"Asking the Alien"})})}),p&&e.jsx(Ae,{}),e.jsx(fe,{content:e.jsx(Ie,{status:u})}),e.jsx(T,{type:x?"action":"wait",children:x?e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Escolha um dos atributos que você deseja desvendar, então, selecione"," ",e.jsx(O,{children:"1-5 itens"}),"relacionados a esse atributo para que o alienígena diga qual é o símbolo correspondente.",e.jsx(un,{items:o,attributes:c,startingAttributesIds:g})]}),en:e.jsxs(e.Fragment,{children:["Choose one of the atributes you want to unveil, then select"," ",e.jsx(O,{children:"1-5 items"})," below to ask the alien what its symbol."]})}):e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(v,{player:d})," seleciona"," ",e.jsx(O,{children:"1-5 itens"})," para perguntar ao alienígena"," ",e.jsx(v,{player:a})," qual o símbolo relacionado a eles."]}),en:e.jsxs(e.Fragment,{children:["Please wait wile ",e.jsx(v,{player:d})," selects"," ",e.jsx(O,{children:"1-5 items"})," to ask the alien ",e.jsx(v,{player:a})," what symbol is related to them."]})})}),e.jsx(G,{user:n,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:o,showTypes:r,status:u}),e.jsx(k,{attributes:c,startingAttributesIds:g,phase:N.HUMAN_ASK})]})}),e.jsxs(W,{user:n,children:[e.jsx(V,{condition:x,children:e.jsx(nn,{items:o,attributes:c,submitInquiry:i,user:n,startingAttributesIds:g,status:u})}),e.jsx(V,{condition:!x,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:o,showTypes:!1,status:u}),e.jsx(X,{attributes:c,startingAttributesIds:g})]})})]}),e.jsx(ce,{inquiryHistory:h,requestHistory:j,players:t,items:o,isAlienBot:p,attributes:c,showIntention:q,debugMode:A}),e.jsx(oe,{children:e.jsx(k,{attributes:c,startingAttributesIds:g})})]})}function hn({players:n,state:s}){const t=re(n,s),[i,o]=z("alienId",s,n),[c,a]=z("humanId",s,n),r=s.turnOrder[0]===s.humanId,{step:d,setStep:x,goToNextStep:j}=Q(r?0:1),h=Ds(x),u=e.jsx(Y,{icon:e.jsx(gs,{}),title:e.jsx(l,{pt:"Pergunte ao alienígena",en:"Ask the Alien"}),currentRound:s?.round?.current,type:"overlay",duration:3});return e.jsx(J,{phase:s?.phase,allowedPhase:N.HUMAN_ASK,children:e.jsxs(Z,{step:d,players:n,children:[e.jsx(fs,{round:s.round,onPressButton:j,time:5}),e.jsx(jn,{players:n,onSubmitHumanInquiry:h,user:t,alien:i,isUserAlien:o,currentHuman:c,isUserTheCurrentHuman:a,items:s.items,attributes:s.attributes,announcement:u,status:s.status,requestHistory:s.requestHistory,inquiryHistory:s.inquiryHistory,isAlienBot:!!s.alienBot,startingAttributesIds:s.startingAttributesIds,debugMode:!!s.debugMode})]})})}function es({onSubmit:n,disabled:s}){const[t,i]=M.useState([]);return e.jsxs(w,{vertical:!0,children:[e.jsx(Ce,{lines:t,setLines:i,width:P.WIDTH,height:P.HEIGHT,showControls:!0,strokeWidth:"large",className:"alien-canvas"}),e.jsx(qe,{size:"large",disabled:s||t.length<1,onClick:()=>n(JSON.stringify(t)),children:e.jsx(l,{pt:"Enviar",en:"Submit"})})]})}function xn({players:n,announcement:s,user:t,onSubmitAlienResponse:i,onConfirmNote:o,items:c,attributes:a,alien:r,isUserAlien:d,currentHuman:x,currentInquiry:j,alienResponse:h,requestHistory:u,inquiryHistory:p,status:g,isAlienBot:A,startingAttributesIds:q,suggestions:f,debugMode:y}){const{isLoading:B}=me(),[m]=pe("isDebugEnabled"),E=!!h;return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(ie,{wait:!E,children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Alienígena ",e.jsx(v,{player:r})," responde"]}),en:e.jsxs(e.Fragment,{children:["Alien ",e.jsx(v,{player:r})," answers"]})})}),e.jsx(fe,{content:e.jsx(Ie,{status:g})}),A&&e.jsx(Ae,{}),e.jsx(T,{type:"rule",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:[e.jsx(v,{player:x})," quer saber qual símbolo representa"," ",ee(j.length,"o objeto","os objetos")," abaixo:"]}),en:e.jsxs(e.Fragment,{children:[e.jsx(v,{player:x})," wants to know what symbol best represents the"," ",ee(j.length,"object")," below:"]})})}),e.jsx(w,{wrap:!0,children:j.map(S=>e.jsx(L,{id:S,width:64},`inquiry-${S}`))}),e.jsx(V,{condition:!E,children:e.jsxs(G,{user:t,children:[e.jsx(T,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Escreva um único símbolo que você acha que representa"," ",ee(j.length,"o objeto","os objetos")," melhor."," ",e.jsx(Fe,{suggestions:f})]}),en:e.jsxs(e.Fragment,{children:["Write a single symbol that you think represents the"," ",ee(j.length,"object")," the best."," ",e.jsx(Fe,{suggestions:f})]})})}),e.jsx(es,{onSubmit:S=>i({alienResponse:S}),disabled:B})]})}),e.jsxs(V,{condition:E,children:[e.jsx(T,{type:"event",children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"O Alienígena respondeu:"}),en:e.jsx(e.Fragment,{children:"The Alien answered:"})})}),!!h&&e.jsx(ye,{request:h,isAlienBot:A,className:ze("fadeIn"),attributes:a}),e.jsx(W,{user:t,children:e.jsx(w,{children:e.jsx(qe,{size:"large",onClick:()=>o(),disabled:B||t.ready,children:e.jsx(l,{pt:"Anotei o símbolo e estou pronto",en:"I have noted the symbol and I'm ready"})})})})]}),e.jsx(G,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:c,showTypes:d,activeObjects:j,status:g}),e.jsx(k,{attributes:a,startingAttributesIds:q})]})}),e.jsx(W,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:c,showTypes:d,activeObjects:j,status:g}),e.jsx(X,{attributes:a,startingAttributesIds:q})]})}),e.jsx(ce,{inquiryHistory:p,requestHistory:u,players:n,items:c,isAlienBot:A,attributes:a,showIntention:m,debugMode:y}),e.jsx(oe,{children:e.jsx(k,{attributes:a,startingAttributesIds:q})})]})}function mn({players:n,state:s}){const t=re(n,s),[i,o]=z("alienId",s,n),[c]=z("humanId",s,n),{step:a}=Q(),r=Ps(),d=Fs(),x=e.jsx(Y,{icon:e.jsx(Ge,{}),title:e.jsx(l,{pt:"Resposta do Alienígena",en:"Alien Answer"}),currentRound:s?.round?.current,type:"overlay",duration:3});return e.jsx(J,{phase:s?.phase,allowedPhase:N.ALIEN_ANSWER,children:e.jsx(Z,{step:a,players:n,children:e.jsx(xn,{players:n,onSubmitAlienResponse:r,onConfirmNote:d,user:t,alien:i,isUserAlien:o,currentHuman:c,items:s.items,attributes:s.attributes,announcement:x,status:s.status,currentInquiry:s.currentInquiry,alienResponse:s.alienResponse,requestHistory:s.requestHistory,inquiryHistory:s.inquiryHistory,suggestions:s.suggestions,isAlienBot:!!s.alienBot,startingAttributesIds:s.startingAttributesIds,debugMode:!!s.debugMode})})})}function pn({players:n,announcement:s,user:t,onSubmitAlienRequest:i,items:o,attributes:c,alien:a,isUserAlien:r,requestHistory:d,inquiryHistory:x,status:j,startingAttributesIds:h,debugMode:u}){const{isLoading:p}=me(),[g,A]=M.useState(""),[q]=pe("isDebugEnabled");return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(ie,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Alienígena ",e.jsx(v,{player:a})," pede um item"]}),en:e.jsxs(e.Fragment,{children:["Alien ",e.jsx(v,{player:a})," requests an item"]})})}),e.jsx(fe,{content:e.jsx(Ie,{status:j})}),e.jsx(W,{user:t,children:e.jsx(T,{type:"wait",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(v,{player:a})," escreve o objeto que ele(a) quer."]}),en:e.jsxs(e.Fragment,{children:["Wait while ",e.jsx(v,{player:a})," describes a desired object."]})})})}),e.jsxs(G,{user:t,children:[e.jsx(T,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," um dos objetos desejados (verde).",e.jsx("br",{}),"Então, ",e.jsx("strong",{children:"descreva"})," o objeto usando quantos símbolos você quiser.",e.jsx("br",{}),"Se você precisar inferir negação, coloque um traço horizontal em cima do"," ",e.jsx("span",{style:{textDecoration:"overline"},children:"símbolo"}),".",e.jsx("br",{}),"Se você precisa inferir ênfase, coloque um traço horizontal embaixo do"," ",e.jsx("span",{style:{textDecoration:"underline"},children:"símbolo"}),"."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," one of the desired objects (green).",e.jsx("br",{}),"Then, ",e.jsx("strong",{children:"describe"})," the object using as many symbols you wish.",e.jsx("br",{}),"If you need to infer negation or the contrary, draw an horizontal line on top of the"," ",e.jsx("span",{style:{textDecoration:"overline"},children:"symbol"}),".",e.jsx("br",{}),"If you need to infer emphasis, draw an horizontal line below the"," ",e.jsx("span",{style:{textDecoration:"underline"},children:"symbol"}),"."]})})}),e.jsx(es,{onSubmit:f=>i({alienRequest:f,intention:g}),disabled:t.ready||p||!g})]}),e.jsx(G,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(He,{items:o,showTypes:r,user:t,selectedObjects:{[g]:!0},selectObject:f=>A(f),isAlienRequest:!0,status:j}),e.jsx(k,{attributes:c,startingAttributesIds:h})]})}),e.jsx(W,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:o,status:j}),e.jsx(X,{attributes:c,startingAttributesIds:h})]})}),e.jsx(ce,{inquiryHistory:x,requestHistory:d,players:n,items:o,isAlienBot:!1,attributes:c,showIntention:q,debugMode:u}),e.jsx(oe,{children:e.jsx(k,{attributes:c,startingAttributesIds:h})})]})}function gn({players:n,state:s}){const t=re(n,s),[i,o]=z("alienId",s,n),{step:c,setStep:a}=Q(),r=$s(a),d=e.jsx(Y,{icon:e.jsx(Ts,{}),title:e.jsx(l,{pt:"O Alienígena faz um pedido",en:"The Alien makes a request"}),currentRound:s?.round?.current,type:"overlay",duration:3});return e.jsx(J,{phase:s?.phase,allowedPhase:N.ALIEN_REQUEST,children:e.jsx(Z,{step:c,players:n,children:e.jsx(pn,{players:n,onSubmitAlienRequest:r,user:t,alien:i,isUserAlien:o,items:s.items,attributes:s.attributes,announcement:d,status:s.status,requestHistory:s.requestHistory,inquiryHistory:s.inquiryHistory,startingAttributesIds:s.startingAttributesIds,debugMode:!!s.debugMode})})})}function fn({items:n,attributes:s,submitOffer:t,user:i,status:o,startingAttributesIds:c}){const{dict:a,updateDict:r,keys:d}=Le({},x=>Object.keys(x).length<=3);return e.jsxs(w,{vertical:!0,children:[e.jsx(se,{count:d.length,children:e.jsx(qe,{size:"large",disabled:!d.length,onClick:()=>t({offeringsIds:d}),children:e.jsx(l,{pt:`Enviar ${ee(d.length,"Objeto")}`,en:`Submit  ${ee(d.length,"Object")}`})})}),e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(He,{items:n,selectedObjects:a,selectObject:r,user:i,maxObjects:10,status:o}),e.jsx(X,{attributes:s,startingAttributesIds:c})]}),e.jsx(T,{type:"rule",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você já entregou"," ",e.jsxs(O,{type:"positive",children:[o.found,"/",o.needed]})," ","objetos e tem ",e.jsx(de,{children:o.timeLeft})," chances sobrando. Dentre os objetos há ",e.jsx(je,{children:o.totalCurses})," objetos amaldiçoados que causará você perder uma chance adicional."]}),en:e.jsxs(e.Fragment,{children:["You already delivered"," ",e.jsxs(O,{type:"positive",children:[o.found,"/",o.needed]})," ","objects and have ",e.jsx(de,{children:o.timeLeft})," chances left. Among the objects there are ",e.jsx(je,{children:o.totalCurses})," cursed objects that will cause the lost of one additional chance."]})})})]})}function bn({players:n,announcement:s,user:t,onSubmitOfferings:i,status:o,items:c,attributes:a,startingAttributesIds:r,alien:d,isUserAlien:x,requestHistory:j,inquiryHistory:h,isAlienBot:u,debugMode:p}){const[g]=pe("isDebugEnabled");return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(ie,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Ofereça um objeto"}),en:e.jsx(e.Fragment,{children:"Offer an object"})})}),e.jsx(fe,{content:e.jsx(Ie,{status:o})}),u&&e.jsx(Ae,{}),e.jsx(W,{user:t,children:e.jsx(T,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["O(A) alienígena ",e.jsx(v,{player:d})," fez esse pedido. Você consegue decifrar qual objeto ele(a) quer?",e.jsx("br",{}),'Um símbolo sublinhado significa "muito" e um símbolo sobrelinhado significa "não".',e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," um objeto e aperte enviar. Lembre-se que que você tem que entregar"," ",e.jsx(O,{type:"negative",children:o.needed}),"objetos."]}),en:e.jsxs(e.Fragment,{children:["The alien ",e.jsx(v,{player:d})," made this request. Can you decipher what object they want?",e.jsx("br",{}),'An underlined symbol means "very" and an overscore symbol means "not".',e.jsx("br",{}),e.jsx("strong",{children:"Select"})," an object then press Submit. Remember that you must deliver"," ",e.jsx(O,{type:"negative",children:o.needed})," objects."]})})})}),e.jsx(G,{user:t,children:e.jsx(T,{type:"wait",children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Aguarde enquanto os humanos escolhem um objeto para te oferecer."}),en:e.jsx(e.Fragment,{children:"Wait while the humans choose an object to offer."})})})}),e.jsx(ye,{request:j[0].request,isAlienBot:u,attributes:a,sentenceMode:u}),e.jsx(G,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:c,showTypes:x,status:o}),e.jsx(k,{attributes:a,startingAttributesIds:r})]})}),e.jsx(W,{user:t,children:e.jsx(b,{className:"boards-container",wrap:!0,children:e.jsx(fn,{attributes:a,startingAttributesIds:r,items:c,submitOffer:i,user:t,status:o})})}),e.jsx(ce,{inquiryHistory:h,requestHistory:j,players:n,items:c,isAlienBot:u,attributes:a,showIntention:g,debugMode:p}),e.jsx(oe,{children:e.jsx(k,{attributes:a,startingAttributesIds:r})})]})}function yn({players:n,state:s}){const t=re(n,s),[i,o]=z("alienId",s,n),{step:c,setStep:a}=Q(),r=zs(a),d=e.jsx(Y,{icon:e.jsx(ds,{}),title:e.jsx(l,{pt:"Oferendas",en:"Offerings"}),currentRound:s?.round?.current,type:"overlay",duration:3});return e.jsx(J,{phase:s?.phase,allowedPhase:N.OFFERINGS,children:e.jsx(Z,{step:c,players:n,children:e.jsx(bn,{players:n,user:t,alien:i,isUserAlien:o,items:s.items,attributes:s.attributes,announcement:d,status:s.status,onSubmitOfferings:r,requestHistory:s.requestHistory,inquiryHistory:s.inquiryHistory,isAlienBot:!!s.alienBot,startingAttributesIds:s.startingAttributesIds,debugMode:!!s.debugMode})})})}function In({players:n,announcement:s,user:t,status:i,items:o,attributes:c,isUserAlien:a,round:r,requestHistory:d,inquiryHistory:x,isAlienBot:j,startingAttributesIds:h,debugMode:u}){const[p]=pe("isDebugEnabled"),g=d?.[0]??{};return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(ie,{children:e.jsx(l,{pt:e.jsx(e.Fragment,{children:"Resultado"}),en:e.jsx(e.Fragment,{children:"Results"})})}),e.jsx(fe,{content:e.jsx(Ie,{status:i})}),j&&e.jsx(Ae,{}),e.jsx(V,{condition:!!g,children:e.jsx(ye,{request:g.request,isAlienBot:j,attributes:c,sentenceMode:!0})}),e.jsx(T,{type:"rule",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Faltam"," ",e.jsx(F,{icon:e.jsx(ke,{}),children:i.needed-i.found})," ","objetos a serem oferecidos.",e.jsx("br",{}),"Temos ",e.jsxs(F,{icon:e.jsx(De,{}),children:[i.timeLeft," "]})," chances."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(F,{icon:e.jsx(ke,{}),children:i.needed-i.found})," ","objects left to be offered.",e.jsx("br",{}),"We have ",e.jsxs(F,{icon:e.jsx(De,{}),children:[i.timeLeft," "]})," attempts left."]})})}),e.jsx(be,{contained:!0,children:e.jsx(w,{wrap:!0,children:!!g&&g.offers.map(A=>e.jsxs(w,{vertical:!0,children:[e.jsx(L,{id:`${A.objectId}`,className:"",width:48}),e.jsx(v,{player:n[A.playerId]}),e.jsx(Xe,{itemId:A.objectId,items:o})]},`offer-${A.playerId}-${A.objectId}`))})}),e.jsx(rs,{round:r,withWaitingTimeBar:!0}),e.jsx(G,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:o,showTypes:a,status:i}),e.jsx(k,{attributes:c,startingAttributesIds:h})]})}),e.jsx(W,{user:t,children:e.jsxs(b,{className:"boards-container",wrap:!0,children:[e.jsx(D,{items:o,status:i}),e.jsx(X,{attributes:c,startingAttributesIds:h})]})}),e.jsx(ce,{inquiryHistory:x,requestHistory:d,players:n,items:o,isAlienBot:j,attributes:c,showIntention:p,debugMode:u}),e.jsx(oe,{children:e.jsx(k,{attributes:c,startingAttributesIds:h})})]})}function An({players:n,state:s}){const t=re(n,s),[i,o]=z("alienId",s,n),{step:c}=Q(),a=s.items??[],r=s.requestHistory?.[0]??null,d=M.useMemo(()=>{if(r?.offers){let j=!1,h=!1;return r.offers.forEach(u=>{if(u?.objectId){const p=a.find(g=>g.id===u?.objectId);p?.type===_e.CURSE?j=!0:p?.type===_e.ITEM&&(h=!0)}}),h&&j?e.jsx(us,{}):h?e.jsx(js,{}):j?e.jsx(hs,{}):e.jsx(qs,{})}},[r]),x=e.jsx(Y,{icon:d,title:e.jsx(l,{pt:"E as oferendas foram...",en:"And the offerings were..."}),currentRound:s?.round?.current,type:"overlay",duration:3});return e.jsx(J,{phase:s?.phase,allowedPhase:N.REVEAL,children:e.jsx(Z,{step:c,players:n,children:e.jsx(In,{announcement:x,players:n,user:t,alien:i,isUserAlien:o,items:s.items,attributes:s.attributes,startingAttributesIds:s.startingAttributesIds,status:s.status,wasCurseSelected:s.wasCurseSelected,curses:s.curses,round:s.round,requestHistory:s.requestHistory,inquiryHistory:s.inquiryHistory,isAlienBot:!!s.alienBot,debugMode:!!s.debugMode})})})}function Sn({state:n,players:s}){const[,t]=z("alienId",n,s);return e.jsxs(Rs,{state:n,players:s,announcementIcon:e.jsx(Os,{}),children:[e.jsx(ks,{players:s,achievements:n.achievements,reference:Cs}),e.jsxs(V,{condition:n.items&&n.attributes&&n.inquiryHistory&&n.requestHistory,children:[e.jsxs(w,{wrap:!0,children:[e.jsx(D,{items:n.items,showTypes:!0,showAll:!0,status:n.status}),e.jsxs(w,{wrap:!0,vertical:!0,children:[e.jsx(k,{attributes:n.attributes,startingAttributesIds:n.startingAttributesIds}),e.jsx(V,{condition:!t,children:e.jsx(X,{attributes:n.attributes,startingAttributesIds:n.startingAttributesIds})})]})]}),e.jsx(ce,{inquiryHistory:n.inquiryHistory,requestHistory:n.requestHistory,players:s,items:n.items,isAlienBot:n.alienBot,showIntention:!0,debugMode:!!n.debugMode,attributes:n.attributes})]})]})}function vn({user:n,onSubmitSeeds:s}){const{isLoading:t}=me(),[i,o]=M.useState(0),[c,a]=M.useState({}),{dict:r,updateDict:d,setDict:x,reset:j}=Le({}),h=Object.values(n?.seeds??{}),u=h.map(f=>({title:e.jsx(R,{children:f.attribute.name}),description:f.items.length??0})),p=h[i],g=()=>{const f=p.items.reduce((y,B)=>{const m=`${B.id}${Se}${p.attribute.id}`;return y[m]=r[m]?he.ATTRIBUTE_VALUE_DICT.RELATED.value:he.ATTRIBUTE_VALUE_DICT.UNRELATED.value,y},{});a(y=>({...y,...f})),j(),o(y=>y+1)},A=()=>{const f=i-1;o(m=>m-1);const y=h[f],B=h[f].items.reduce((m,E)=>{const S=`${E.id}${Se}${y.attribute.id}`;return c[S]===3&&(m[S]=!0),m},{});x(B)},q=()=>{const f=p.items.reduce((y,B)=>{const m=`${B.id}${Se}${p.attribute.id}`;return y[m]=r[m]?3:-3,y},{});a(y=>({...y,...f})),s({seeds:c})};return e.jsxs(w,{className:"contained seeding-container",direction:"vertical",wrap:!0,children:[e.jsx("div",{className:"seeding-container__stepper",children:e.jsx(Ls,{progressDot:!0,current:i,items:u})}),e.jsxs(w,{vertical:!0,children:[e.jsx(xe,{level:3,size:"xx-small",colorScheme:"light",children:e.jsx(l,{pt:"Análise",en:"Analysis"})}),e.jsx(T,{type:"action",children:e.jsx(l,{pt:"Ative o botão de todos os itens que possuem a característica:",en:"Activate the switch of all items that have the attribute"})}),e.jsx(w,{vertical:!0,children:e.jsx(Ms,{className:_("attribute-card",ze("tada")),hideHeader:!0,children:e.jsxs(le,{vertical:!0,children:[e.jsx(R,{children:p.attribute.name}),e.jsx("small",{children:e.jsx("em",{children:e.jsx(R,{children:p.attribute.description})})})]})},p.attribute.id)}),e.jsx(le,{justify:"center",gap:"middle",wrap:"wrap",children:p.items.map(f=>{const y=`${f.id}${Se}${p.attribute.id}`;return e.jsxs(le,{vertical:!0,justify:"center",align:"center",gap:"small",children:[e.jsx(L,{id:`${f.id}`,text:f.name,width:84}),e.jsx(ts,{checkedChildren:e.jsx(l,{pt:"Sim",en:"Yes"}),unCheckedChildren:e.jsx(l,{pt:"Não",en:"No"}),onChange:()=>d(y),checked:r[y]})]},y)})}),e.jsx(be,{children:e.jsx(l,{pt:"Se nenhum item combina com a característica, apenas vá para o próximo.",en:"If no item matches the attribute, just go to the next one."})}),e.jsxs(w,{children:[i<h.length-1&&e.jsx($,{size:"large",onClick:A,disabled:t||i===0,children:e.jsx(l,{pt:"Atributo anterior",en:"Previous attribute"})}),i<h.length-1?e.jsx($,{size:"large",type:"primary",onClick:g,disabled:n.ready,children:e.jsx(l,{pt:"Próximo atributo",en:"Next attribute"})}):e.jsx($,{size:"large",type:"primary",onClick:q,disabled:t,children:e.jsx(l,{pt:"Enviar análises",en:"Submit Analyses"})})]})]})]})}function En({user:n,announcement:s,onSubmitSeeds:t}){return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(ie,{children:e.jsx(l,{pt:"Análise de Objetos",en:"Objects analyses"})}),e.jsx(Ae,{}),e.jsx(T,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você passou sua vida analisando as propriedades de diversos objetos.",e.jsx("br",{}),"Agora, para cada uma dos atributos dados, determine se os itens tem ou não a propriedade."]}),en:e.jsxs(e.Fragment,{children:["You have spent your life analyzing the properties of various items.",e.jsx("br",{}),"Now, for each of the attributes given to you, determine whether the items have the property or not."]})})}),n.seeds&&e.jsx(vn,{onSubmitSeeds:t,user:n})]})}function Nn({players:n,state:s}){const t=re(n,s),{step:i,setStep:o}=Q(),c=Us(o);ge({clearCache:!0}),Me({clearCache:!0});const a=e.jsx(Y,{icon:e.jsx(Bs,{}),title:e.jsx(l,{pt:"Análise de Objetos",en:"Objects analyses"}),currentRound:s?.round?.current,type:"overlay"});return e.jsx(J,{phase:s?.phase,allowedPhase:N.ALIEN_SEEDING,children:e.jsx(Z,{step:i,players:n,children:e.jsx(En,{onSubmitSeeds:c,announcement:a,user:t})})})}function wn(n){switch(n.phase){case N.ALIEN_SELECTION:return Ws;case N.ALIEN_SEEDING:return Nn;case N.HUMAN_ASK:return hn;case N.ALIEN_ANSWER:return mn;case N.ALIEN_REQUEST:return gn;case N.OFFERINGS:return yn;case N.REVEAL:return An;case cs.DEFAULT.GAME_OVER:return Sn;default:return as}}function ci(){return e.jsx(os,{gameCollection:is.COMUNICACAO_ALIENIGENA,getActiveComponent:wn})}export{ci as default};
