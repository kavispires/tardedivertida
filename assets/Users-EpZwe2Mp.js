import{E as A,K as O,M as P,r as d,N as _,j as e,v as u,x as C,O as r,y as i,Q as m,B as q,U as w,V as I,W as M,X as R,Y as B,Z as L,_ as Q}from"./index-C3qBJHkP.js";import{u as F}from"./useMutation-Zxn7bkj2.js";/* empty css           */import{S as g}from"./index-Bm32o_mx.js";import"./extends-CF3RwP-h.js";import"./ResizeObserver.es-CgCMA44p.js";const o={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function G(){A("Users - Tarde Divertida");const{message:j,notification:y}=O.useApp(),S=P(),[n,U]=d.useState(o),[t,f]=d.useState(o),p=_({queryKey:["users"],queryFn:async()=>{const s=await M(R(L(Q,"users"),B("isGuest","!=",!0))),a=[];return s.forEach(D=>{a.push(D.data())}),a}}),h=F({mutationKey:["users"],mutationFn:async s=>{w.run({action:I.UPDATE_USER_DB,...s})},onSuccess:()=>{j.success("User updated"),S.invalidateQueries({queryKey:["users"]})},onError:s=>{y.error({title:"Error",description:s.message})}}),c=p.data??[],E=s=>{U(c.find(a=>a.id===s)??o)},v=s=>{f(c.find(a=>a.id===s)??o)},x=c.map(s=>e.jsxs(g.Option,{value:s.id,children:[e.jsx("strong",{children:s?.names?.[0]}),": ",s.id]},s.id)),N=e.jsx(g,{onChange:E,style:{minWidth:300},children:x}),T=e.jsx(g,{onChange:v,style:{minWidth:300},children:x}),l=d.useMemo(()=>u.merge(u.cloneDeep(n??{}),u.cloneDeep(t??{})),[n,t]);return e.jsxs(C,{children:[e.jsx(r.Title,{children:"Users"}),p.isLoading&&e.jsx(r.Paragraph,{children:"Loading..."}),e.jsxs(i,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Origin"}),e.jsx(i,{className:"margin",children:N}),e.jsx(r.Paragraph,{children:n?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(n??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Destination"}),e.jsx(i,{className:"margin",children:T}),e.jsx(r.Paragraph,{children:t?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(i,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Merge"}),e.jsx(r.Paragraph,{children:l?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(l??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(q,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(l),disabled:!l?.id,children:['Merge Users "',n.id,'" into "',t.id,'"']})]})]})}export{G as default};
