import{r as T,ay as Ge,f as Y,F as Lt,j as e,b6 as ue,b7 as Qe,b8 as xt,b9 as Pt,ba as gt,z as Ae,aD as $t,bb as L,q as P,aQ as As,B as D,T as _,bc as Ke,bd as lt,L as F,I as k,H as w,o as ws,aJ as _t,aK as $,x as et,aM as jt,be as vt,bf as He,n as S,bg as me,aO as Je,bh as Ts,b2 as yt,s as Gt,e as G,bi as Ft,D as Z,l as re,J as Ht,a$ as W,bj as Ne,bk as Fe,bl as De,v as Xe,bm as Be,bn as tt,a_ as be,aL as qt,bo as st,bp as Is,y as Ss,bq as Es,br as At,bs as ke,bt as Le,bu as Yt,bv as Bt,b3 as Ns,aH as Cs,bw as Os,aE as Rs,w as ks}from"./index-CQUMMVDG.js";import{L as Ms}from"./LoginModal-CDeM3AwA.js";import{C as Ds}from"./CalendarIcon-DL_GSJ0o.js";import{f as Vt,a as Wt,D as Ut,k as Kt,j as zt,l as Qt,e as bt,h as Jt,g as Xt,d as Zt,i as Ls,O as Ps,b as es,c as $s}from"./OnlineOrderIcon-P6osn91a.js";import{P as ts,B as Gs}from"./index-igwYyNuM.js";import{L as Fs}from"./Loading-BcJgtUMy.js";import{I as ee}from"./ItemCard-CflSsGvY.js";import{T as ss}from"./TimerBar-D6aXnNdu.js";import{u as ns,a as Hs}from"./useBlurCards-BNBaHpYL.js";import{R as B}from"./HeartFilled-DFdSuY44.js";import{R as qs,a as Ys}from"./HeartOutlined-BASGGRGk.js";import{R as Bs}from"./QuestionCircleFilled-DWN-BabN.js";import{D as Vs}from"./index-DjhFmCe7.js";import{C as rs,M as pe,R as Ws,a as Us}from"./DoubleRightOutlined-_thKMvXL.js";import{A as Ks}from"./ApplauseIcon-Gu931AXF.js";import{S as zs}from"./SealOfApprovalIcon-xhMwpqbI.js";import{S as Qs}from"./SkullIcon-J3M66cgg.js";import{T as ve}from"./TrophyIcon-Cu2z3dlk.js";import{u as Js}from"./useCopyToClipboard-DXZr1YJr.js";import{D as Xs}from"./DrawingCanvas-BU8xUVnr.js";import{C as Zs}from"./CanvasSVG-B6RswAJF.js";import{B as as}from"./BoxBlankIcon-aLFxMRZ2.js";import{B as Ce}from"./BoxXIcon-CeQ_BVPS.js";import{T as os}from"./TextHighlight-RzvVEwxu.js";import{R as Oe}from"./BarChartOutlined-U0K2Tv1J.js";import{I as K}from"./Instruction-BcmUACq2.js";import{S as ct}from"./ShippingBoxIcon-BH2rocZD.js";import{W as Ee}from"./WarehouseGoodCard-B_ePfhlr.js";import{C as en}from"./CheckMarkIcon-BMhG0t71.js";import{L as tn}from"./LocationIcon-PQOPufed.js";import{R as sn}from"./WarningFilled-DIgXvwZM.js";import{D as Ve}from"./index-CnGqfOjc.js";import{S as nn}from"./SpeechBubbleAcceptedIcon-B5Qt1_6L.js";import{A as is}from"./AnimatedProcessingIcon-Cm29_uS7.js";import{T as ls}from"./ThumbsUpIcon-CsSnNBxl.js";import{C as cs}from"./Card-CVNI8OKP.js";import{T as wt}from"./TimeHighlight-BAkcRMzN.js";import{u as ds}from"./useMutation-CNFCaVbz.js";import{C as rn}from"./CaretDownOutlined-Dv3U9ShB.js";import{C as Tt}from"./CircleIcon-CHczgoKJ.js";import{R as an}from"./QuestionCircleOutlined-DVgZxFlY.js";import{R as on,a as ln}from"./ArrowRightOutlined-CQllJ8az.js";import{S as Ye}from"./SignCard-Cz2twplz.js";import{D as cn}from"./DoorFrame-DJu-7sR_.js";/* empty css                             */import{I as dn}from"./ImageCard-DSHAVMIq.js";import{S as un}from"./SuspectCard-CNIlLjF3.js";import{I as mn}from"./ImageCardPreloadHand-omEnM137.js";import{R as pn}from"./LikeFilled-Clhf1Kqr.js";import"./SignIn-Cqng2M16.js";import"./GoogleIcon-QYeWCHdD.js";import"./AnimatedLoaderIcon-T0eGRTHJ.js";import"./Sprite-C1udt0Hk.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DM0bH6ac.js";import"./WarningOutlined-CclWfmT_.js";import"./progress-2u_7ipfX.js";import"./PurePanel-DkMXBX4K.js";import"./useSetState-C5l14-TI.js";import"./UndoOutlined-fWtck_aA.js";import"./DeleteOutlined-DX3YPL-c.js";import"./ClockIcon-CjiTzySY.js";import"./MetricHighlight-BMAOLpuw.js";import"./StarFilled-CNctUIhy.js";import"./useMergedState-D5RTwnQi.js";import"./useEvent-DBQOYUIG.js";var hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"},fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},xn={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M771.91 115a31.65 31.65 0 00-17.42 5.27L400 351.97H236a16 16 0 00-16 16v288.06a16 16 0 0016 16h164l354.5 231.7a31.66 31.66 0 0017.42 5.27c16.65 0 32.08-13.25 32.08-32.06V147.06c0-18.8-15.44-32.06-32.09-32.06M732 221v582L439.39 611.75l-17.95-11.73H292V423.98h129.44l17.95-11.73z"}}]},name:"muted",theme:"outlined"},gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},_n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892.1 737.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344zm174 132H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zM625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1z"}}]},name:"sound",theme:"filled"};function dt(){return dt=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},dt.apply(this,arguments)}const jn=(n,i)=>T.createElement(Ge,dt({},n,{ref:i,icon:hn})),vn=T.forwardRef(jn);function ut(){return ut=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},ut.apply(this,arguments)}const yn=(n,i)=>T.createElement(Ge,ut({},n,{ref:i,icon:fn})),bn=T.forwardRef(yn);function mt(){return mt=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},mt.apply(this,arguments)}const An=(n,i)=>T.createElement(Ge,mt({},n,{ref:i,icon:rn})),wn=T.forwardRef(An);function pt(){return pt=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},pt.apply(this,arguments)}const Tn=(n,i)=>T.createElement(Ge,pt({},n,{ref:i,icon:xn})),In=T.forwardRef(Tn);function ht(){return ht=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},ht.apply(this,arguments)}const Sn=(n,i)=>T.createElement(Ge,ht({},n,{ref:i,icon:gn})),En=T.forwardRef(Sn);function ft(){return ft=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},ft.apply(this,arguments)}const Nn=(n,i)=>T.createElement(Ge,ft({},n,{ref:i,icon:_n})),Cn=T.forwardRef(Nn),us=T.createContext({isLoading:!1,data:void 0,error:null,isError:!1,isRefetching:!1}),It=({children:n})=>{const{language:i}=Y(),s=ue(i),o=Lt({queryKey:[s,i],queryFn:async()=>(console.count(`Fetching ${s}...`),(await xt.run({action:gt.GET_DAILY,date:Pt(),document:s})).data),staleTime:()=>{const a=Qe();return Qe().endOf("day").diff(a)},enabled:i==="pt",retry:!1});return e.jsx(us.Provider,{value:{isLoading:o.isLoading,data:o.data,error:o.error,isError:o.isError,isRefetching:o.isRefetching},children:n})},ms=()=>{const n=T.useContext(us);if(n===void 0)throw new Error("useDailyChallenge must be used within a DailyContextProvider");return n},q={KEY:"AQUI_O",ROUTE:"aqui-o",RELEASE_DATE:"2024-04-30",COLOR:"rgba(227, 167, 111, 0.85)",EMOJI:"ðŸ”",HUB_ICON:Vt,HUB_NAME:{pt:"Aqui Ã“",en:"Find This"},NAME:{pt:"Aqui Ã“",en:"Find This"},TAGLINE:{pt:"JÃ¡ encontrou a coisa em comum? Ela estÃ¡...",en:"Have you found the matching thing?"},GOAL:15,HEARTS:3,TD_DAILY_AQUI_O_MODE:"TD_AQUI_DAILY_O_MODE",DURATION:60},ae={KEY:"ARTE_RUIM",ROUTE:"arte-ruim",RELEASE_DATE:"2023-11-04",COLOR:"rgba(158, 182, 244, 0.85)",EMOJI:"ðŸ–¼ï¸",HUB_ICON:Wt,HUB_NAME:{pt:"Arte Ruim",en:"Is It Art?"},NAME:{pt:"Arte Ruim",en:"Questionable Art"},TAGLINE:{pt:"Adivinhe o tÃ­tulo das obras de arte!",en:"Guess the title of the artworks!"},HEARTS:3},oe={KEY:"COMUNICACAO_ALIENIGENA",ROUTE:"comunicacao-alienigena",RELEASE_DATE:"2024-11-08",COLOR:"rgba(105, 218, 207, 0.85)",EMOJI:"ðŸ›¸",HUB_ICON:Ut,HUB_NAME:{pt:"AlienÃ­gena",en:"Alien"},NAME:{pt:"ComunicaÃ§Ã£o AlienÃ­gena",en:"Alien Communication"},TAGLINE:{pt:"NÃ£o sabe se comunicar com seu cÃ´njuge? Fale com alienÃ­genas!",en:"Communication with the aliens is hard"},HEARTS:4},te={KEY:"CONTROLE_DE_ESTOQUE",ROUTE:"controle-de-estoque",RELEASE_DATE:"2024-08-04",COLOR:"rgba(255, 199, 59, 0.85)",EMOJI:"ðŸ“¦",HUB_ICON:Kt,HUB_NAME:{pt:"Estoque",en:"Warehouse"},NAME:{pt:"Controle De Estoque",en:"Warehouse Stock"},TAGLINE:{pt:"Venha aplicar um feng-shui nessa prateleira!",en:"Come apply some feng-shui to this shelf!"},HEARTS:4},Pe={STOCKING:"STOCKING",FULFILLING:"FULFILLING",DELIVERING:"DELIVERING"},ie={KEY:"FILMACO",ROUTE:"filmaco",RELEASE_DATE:"2024-05-30",COLOR:"rgba(85, 161, 255, 0.85)",EMOJI:"ðŸŽ¬",HUB_ICON:zt,HUB_NAME:{pt:"FilmaÃ§o",en:"Movicon"},NAME:{pt:"FilmaÃ§o",en:"Movicon"},TAGLINE:{pt:"Pegue a pipoca e venha descobrir esse filme!",en:"Grab the popcorn and come find out about this movie!"},HEARTS:3},V={KEY:"PALAVREADO",ROUTE:"palavreado",RELEASE_DATE:"2024-05-10",COLOR:"rgba(239, 83, 80, 0.85)",EMOJI:"ðŸ”¤",HUB_ICON:Qt,HUB_NAME:{pt:"Palavreado",en:"Rewording"},NAME:{pt:"Palavreado",en:"Rewording"},TAGLINE:{pt:"E se o caÃ§a palavras estivesse todo embaralhado?",en:"What if the word search was all scrambled?"},HEARTS:4,WORD_LENGTH:4},J={KEY:"PICACO",ROUTE:"picaco",RELEASE_DATE:"2024-04-30",COLOR:"rgba(234, 236, 241, 0.85)",EMOJI:"ðŸŽ¨",HUB_ICON:bt,HUB_NAME:{pt:"PicaÃ§o!",en:"Big Artist"},NAME:{pt:"PicaÃ§o!",en:"Big Artist"},TAGLINE:{pt:"JÃ¡ desenhou hoje? Novas frases todos os dias!",en:"Already drawn today? New phrases every day!"},DURATION:60,DRAWINGS:6},se={KEY:"PORTAIS_MAGICOS",ROUTE:"portais-magicos",RELEASE_DATE:"DEMO",COLOR:"rgba(255, 171, 145, 0.85)",EMOJI:"ðŸšª",HUB_ICON:Jt,HUB_NAME:{pt:"Portais",en:"Portals"},NAME:{pt:"Portais MÃ¡gicos",en:"Magic Doors"},TAGLINE:{pt:"Descubra o que hÃ¡ por trÃ¡s desses portais!",en:"Discover what lies beyond these doors!"},HEARTS:4},le={KEY:"QUARTETOS",ROUTE:"quartetos",RELEASE_DATE:"2025-03-01",COLOR:"rgba(243, 145, 189, 0.85)",EMOJI:"ðŸ—‚",HUB_ICON:Xt,HUB_NAME:{pt:"Quartetos",en:"Quartets"},NAME:{pt:"Quartetos",en:"Connect Four"},TAGLINE:{pt:"Conecte quatro palavras relacionadas!",en:"Connect four related words!"},HEARTS:4},ne={KEY:"TEORIA_DE_CONJUNTOS",ROUTE:"teoria-de-conjuntos",RELEASE_DATE:"2024-08-31",COLOR:"rgba(172, 128, 221, 0.85)",EMOJI:"â­•ï¸",HUB_ICON:Zt,HUB_NAME:{pt:"Conjuntos",en:"Diagrams"},NAME:{pt:"Teoria de Conjuntos",en:"Diagram Theory"},TAGLINE:{pt:"Quantas vogais tÃªm em PQP?",en:"Can you solve this set challenge?"},HEARTS:4},$e={KEY:"TA_NA_CARA",ROUTE:"ta-na-cara",RELEASE_DATE:"2025-02-21",COLOR:"rgba(242, 233, 236, 0.85)",EMOJI:"ðŸ‘¤",HUB_ICON:Ls,HUB_NAME:{pt:"TÃ¡ Na Cara",en:"In Your Face"},NAME:{pt:"TÃ¡ Na Cara",en:"In Your Face"},TAGLINE:{pt:"Julgue o livro pela capa! O cara pela cara!",en:"Judge the book by its cover! The guy by his face!"}},H={AQUI_O:q,ARTE_RUIM:ae,COMUNICACAO_ALIENIGENA:oe,CONTROLE_DE_ESTOQUE:te,FILMACO:ie,PALAVREADO:V,PICACO:J,PORTAIS_MAGICOS:se,QUARTETOS:le,TEORIA_DE_CONJUNTOS:ne,TA_NA_CARA:$e},On=Object.values(H);function ps({localStorageKey:n}){const{message:i}=Ae.useApp(),s=$t(),o=()=>{n?(localStorage.removeItem(Ke(n)),localStorage.removeItem(lt(n))):On.forEach(d=>{localStorage.removeItem(Ke(d.KEY)),localStorage.removeItem(lt(d.KEY))}),i.success(e.jsx(_,{pt:"LS resetado corretamente",en:"LS reset successfully"})),s("/diario")},a=()=>{if(n){const d=JSON.parse(localStorage.getItem(Ke(n))??"{}");alert(JSON.stringify(d,null,2))}};return e.jsx(L,{justify:"center",gap:12,children:e.jsxs(P.Compact,{children:[e.jsx(ts,{title:e.jsx(_,{pt:"Tem certeza que quer resetar o jogo?",en:"Are you sure you want to reset the game?"}),onConfirm:o,children:e.jsx(D,{size:"large",type:"dashed",icon:e.jsx(bn,{}),children:e.jsx(_,{pt:"Resetar LS",en:"Reset LS"})})}),As,e.jsx(D,{size:"large",type:"dashed",onClick:a,children:"Log"})]})})}function ce({icon:n,children:i,localStorageKey:s}){const[o,a]=T.useState(0);return e.jsxs(F.Header,{className:"daily-header",children:[e.jsxs("button",{type:"button",onClick:s?()=>a(d=>d+1):void 0,className:"invisible-secret-button daily-header",children:[e.jsx(k,{icon:n,className:"daily-header__icon"}),e.jsx(w.Title,{level:1,className:"daily-heading",children:i})]}),o>=5&&e.jsx(ps,{localStorageKey:s})]})}const{Content:Rn,Footer:kn}=F;function We({children:n}){const i=ms(),[s,o]=T.useState(0);return e.jsxs(ws,{className:"app",children:[e.jsx(ce,{icon:e.jsx(Ds,{}),localStorageKey:"",children:e.jsx("button",{type:"button",onClick:()=>o(a=>a+1),className:"invisible-secret-button",children:e.jsx(_,{pt:"TD DiÃ¡rio",en:"TD Daily"})})}),i.isLoading&&e.jsx("div",{className:"loading-bar"}),e.jsx(Rn,{children:n}),s>=5&&e.jsx(kn,{children:e.jsx(ps,{})})]})}function hs(){const{toggleLanguage:n,language:i}=Y(),s=$t(),o=()=>{n(),s(i==="en"?"/diario":"/daily")};return e.jsx(We,{children:e.jsx(P,{className:"container container--center",children:e.jsx(_t,{message:e.jsx(_,{pt:"O servidor decidiu nÃ£o cooperar",en:"The server decided not to cooperate"}),description:e.jsx(P,{direction:"vertical",children:e.jsxs(w.Paragraph,{children:[e.jsx(_,{en:"It's likely that the administrator forgot to generate new challenges for today. If you know them, please complain immediately. Bullying is the way.",pt:"Provavelmente o administrador esqueceu de gerar novos desafios para hoje. Se vocÃª os conhece, reclame imediatamente. O bullying Ã© o caminho."}),e.jsx("br",{}),e.jsx(_,{en:"It is also possible that you are in the wrong URL. Press here to go back to the right page.",pt:"TambÃ©m Ã© possÃ­vel que vocÃª esteja na URL errada. Pressione aqui para voltar para a pÃ¡gina correta."}),e.jsx(D,{type:"link",onClick:o,children:"Redirecionar/Redirect"})]})}),type:"error",showIcon:!0})})})}function fs(){const{translate:n}=Y();return e.jsx(We,{children:e.jsx("div",{className:"daily-loading",children:e.jsx($,{children:e.jsx(Fs,{message:n("Carregando desafio...","Loading challenge..."),margin:!0})})})})}function ye({gameName:n,GameComponent:i}){var d;const{currentUser:s}=et(),o=ms();if(o.isLoading)return e.jsx(fs,{});const a=(d=o==null?void 0:o.data)==null?void 0:d[n];return o.isError||!a?e.jsx(hs,{}):e.jsx(i,{data:a,currentUser:s},a.id)}function Mn({GameComponent:n,useDemoHook:i,lsKey:s}){const{currentUser:o}=et(),a=i();if(jt(()=>{s&&localStorage.removeItem(`TD_DAILY_${s}_LOCAL_TODAY`)}),a.isLoading)return e.jsx(fs,{});const d=a==null?void 0:a.data;return a.isError||!d?e.jsx(hs,{}):e.jsx(n,{data:d,currentUser:o},d.id)}function he(n){const[i,s]=T.useState(n);return{state:i,setState:s,updateState:a=>{s(d=>({...d,...a}))}}}function Re(n){const[i,s]=T.useState(n);return{session:i,setSession:s,updateSession:a=>{s(d=>({...d,...a}))}}}function fe({key:n,gameId:i,defaultValue:s}){const o=Ke(n),[a,d]=vt(o,{status:"idle",...s,id:i});return{localToday:a,updateLocalStorage:h=>{d(f=>({...f??s,id:i,...h}))}}}function xe({key:n,isComplete:i}){const s=lt(n),[o,a]=vt(s,!1);T.useEffect(()=>{!o&&i&&a(!0)},[i,o,a])}function we(n,i){const[s,o]=T.useState(!1);return T.useEffect(()=>{n&&(o(!0),i==null||i())},[n]),{showResultModal:s,setShowResultModal:o}}const N={IN_PROGRESS:"IN_PROGRESS",WIN:"WIN",LOSE:"LOSE"},Dn="/tardedivertida/assets/daily-sfx-D5VPtM5G.mp3";var nt={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var St;function Ln(){return St||(St=1,function(n){(function(){var i=function(){this.init()};i.prototype={init:function(){var t=this||s;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var r=this||s;if(t=parseFloat(t),r.ctx||v(),typeof t<"u"&&t>=0&&t<=1){if(r._volume=t,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(t,s.ctx.currentTime);for(var l=0;l<r._howls.length;l++)if(!r._howls[l]._webAudio)for(var u=r._howls[l]._getSoundIds(),g=0;g<u.length;g++){var m=r._howls[l]._soundById(u[g]);m&&m._node&&(m._node.volume=m._volume*t)}return r}return r._volume},mute:function(t){var r=this||s;r.ctx||v(),r._muted=t,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(t?0:r._volume,s.ctx.currentTime);for(var l=0;l<r._howls.length;l++)if(!r._howls[l]._webAudio)for(var u=r._howls[l]._getSoundIds(),g=0;g<u.length;g++){var m=r._howls[l]._soundById(u[g]);m&&m._node&&(m._node.muted=t?!0:m._muted)}return r},stop:function(){for(var t=this||s,r=0;r<t._howls.length;r++)t._howls[r].stop();return t},unload:function(){for(var t=this||s,r=t._howls.length-1;r>=0;r--)t._howls[r].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,v()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var r=new Audio;r.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return t}if(!r||typeof r.canPlayType!="function")return t;var l=r.canPlayType("audio/mpeg;").replace(/^no$/,""),u=t._navigator?t._navigator.userAgent:"",g=u.match(/OPR\/(\d+)/g),m=g&&parseInt(g[0].split("/")[1],10)<33,p=u.indexOf("Safari")!==-1&&u.indexOf("Chrome")===-1,y=u.match(/Version\/(.*?) /),j=p&&y&&parseInt(y[1],10)<15;return t._codecs={mp3:!!(!m&&(l||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!l,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!j&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!j&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||s;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var r=function(l){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,t._releaseHtml5Audio(u)}catch{t.noAudio=!0;break}for(var g=0;g<t._howls.length;g++)if(!t._howls[g]._webAudio)for(var m=t._howls[g]._getSoundIds(),p=0;p<m.length;p++){var y=t._howls[g]._soundById(m[p]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}t._autoResume();var j=t.ctx.createBufferSource();j.buffer=t._scratchBuffer,j.connect(t.ctx.destination),typeof j.start>"u"?j.noteOn(0):j.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),j.onended=function(){j.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var b=0;b<t._howls.length;b++)t._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),t}},_obtainHtml5Audio:function(){var t=this||s;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var r=this||s;return t._unlocked&&r._html5AudioPool.push(t),r},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!s.usingWebAudio)){for(var r=0;r<t._howls.length;r++)if(t._howls[r]._webAudio){for(var l=0;l<t._howls[r]._sounds.length;l++)if(!t._howls[r]._sounds[l]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var u=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(u,u)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!s.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var r=0;r<t._howls.length;r++)t._howls[r]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var s=new i,o=function(t){var r=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(t)};o.prototype={init:function(t){var r=this;return s.ctx||v(),r._autoplay=t.autoplay||!1,r._format=typeof t.format!="string"?t.format:[t.format],r._html5=t.html5||!1,r._muted=t.mute||!1,r._loop=t.loop||!1,r._pool=t.pool||5,r._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,r._rate=t.rate||1,r._sprite=t.sprite||{},r._src=typeof t.src!="string"?t.src:[t.src],r._volume=t.volume!==void 0?t.volume:1,r._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=t.onend?[{fn:t.onend}]:[],r._onfade=t.onfade?[{fn:t.onfade}]:[],r._onload=t.onload?[{fn:t.onload}]:[],r._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],r._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],r._onpause=t.onpause?[{fn:t.onpause}]:[],r._onplay=t.onplay?[{fn:t.onplay}]:[],r._onstop=t.onstop?[{fn:t.onstop}]:[],r._onmute=t.onmute?[{fn:t.onmute}]:[],r._onvolume=t.onvolume?[{fn:t.onvolume}]:[],r._onrate=t.onrate?[{fn:t.onrate}]:[],r._onseek=t.onseek?[{fn:t.onseek}]:[],r._onunlock=t.onunlock?[{fn:t.onunlock}]:[],r._onresume=[],r._webAudio=s.usingWebAudio&&!r._html5,typeof s.ctx<"u"&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var t=this,r=null;if(s.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var l=0;l<t._src.length;l++){var u,g;if(t._format&&t._format[l])u=t._format[l];else{if(g=t._src[l],typeof g!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(g),u||(u=/\.([^.]+)$/.exec(g.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&s.codecs(u)){r=t._src[l];break}}if(!r){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=r,t._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&c(t),t},play:function(t,r){var l=this,u=null;if(typeof t=="number")u=t,t=null;else{if(typeof t=="string"&&l._state==="loaded"&&!l._sprite[t])return null;if(typeof t>"u"&&(t="__default",!l._playLock)){for(var g=0,m=0;m<l._sounds.length;m++)l._sounds[m]._paused&&!l._sounds[m]._ended&&(g++,u=l._sounds[m]._id);g===1?t=null:u=null}}var p=u?l._soundById(u):l._inactiveSound();if(!p)return null;if(u&&!t&&(t=p._sprite||"__default"),l._state!=="loaded"){p._sprite=t,p._ended=!1;var y=p._id;return l._queue.push({event:"play",action:function(){l.play(y)}}),y}if(u&&!p._paused)return r||l._loadQueue("play"),p._id;l._webAudio&&s._autoResume();var j=Math.max(0,p._seek>0?p._seek:l._sprite[t][0]/1e3),b=Math.max(0,(l._sprite[t][0]+l._sprite[t][1])/1e3-j),A=b*1e3/Math.abs(p._rate),E=l._sprite[t][0]/1e3,O=(l._sprite[t][0]+l._sprite[t][1])/1e3;p._sprite=t,p._ended=!1;var R=function(){p._paused=!1,p._seek=j,p._start=E,p._stop=O,p._loop=!!(p._loop||l._sprite[t][2])};if(j>=O){l._ended(p);return}var I=p._node;if(l._webAudio){var de=function(){l._playLock=!1,R(),l._refreshBuffer(p);var Ie=p._muted||l._muted?0:p._volume;I.gain.setValueAtTime(Ie,s.ctx.currentTime),p._playStart=s.ctx.currentTime,typeof I.bufferSource.start>"u"?p._loop?I.bufferSource.noteGrainOn(0,j,86400):I.bufferSource.noteGrainOn(0,j,b):p._loop?I.bufferSource.start(0,j,86400):I.bufferSource.start(0,j,b),A!==1/0&&(l._endTimers[p._id]=setTimeout(l._ended.bind(l,p),A)),r||setTimeout(function(){l._emit("play",p._id),l._loadQueue()},0)};s.state==="running"&&s.ctx.state!=="interrupted"?de():(l._playLock=!0,l.once("resume",de),l._clearTimer(p._id))}else{var je=function(){I.currentTime=j,I.muted=p._muted||l._muted||s._muted||I.muted,I.volume=p._volume*s.volume(),I.playbackRate=p._rate;try{var Ie=I.play();if(Ie&&typeof Promise<"u"&&(Ie instanceof Promise||typeof Ie.then=="function")?(l._playLock=!0,R(),Ie.then(function(){l._playLock=!1,I._unlocked=!0,r?l._loadQueue():l._emit("play",p._id)}).catch(function(){l._playLock=!1,l._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):r||(l._playLock=!1,R(),l._emit("play",p._id)),I.playbackRate=p._rate,I.paused){l._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||p._loop?l._endTimers[p._id]=setTimeout(l._ended.bind(l,p),A):(l._endTimers[p._id]=function(){l._ended(p),I.removeEventListener("ended",l._endTimers[p._id],!1)},I.addEventListener("ended",l._endTimers[p._id],!1))}catch(bs){l._emit("playerror",p._id,bs)}};I.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(I.src=l._src,I.load());var z=window&&window.ejecta||!I.readyState&&s._navigator.isCocoonJS;if(I.readyState>=3||z)je();else{l._playLock=!0,l._state="loading";var U=function(){l._state="loaded",je(),I.removeEventListener(s._canPlayEvent,U,!1)};I.addEventListener(s._canPlayEvent,U,!1),l._clearTimer(p._id)}}return p._id},pause:function(t){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(t)}}),r;for(var l=r._getSoundIds(t),u=0;u<l.length;u++){r._clearTimer(l[u]);var g=r._soundById(l[u]);if(g&&!g._paused&&(g._seek=r.seek(l[u]),g._rateSeek=0,g._paused=!0,r._stopFade(l[u]),g._node))if(r._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),r._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||r._emit("pause",g?g._id:null)}return r},stop:function(t,r){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"stop",action:function(){l.stop(t)}}),l;for(var u=l._getSoundIds(t),g=0;g<u.length;g++){l._clearTimer(u[g]);var m=l._soundById(u[g]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,l._stopFade(u[g]),m._node&&(l._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),l._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&l._clearSound(m._node))),r||l._emit("stop",m._id))}return l},mute:function(t,r){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"mute",action:function(){l.mute(t,r)}}),l;if(typeof r>"u")if(typeof t=="boolean")l._muted=t;else return l._muted;for(var u=l._getSoundIds(r),g=0;g<u.length;g++){var m=l._soundById(u[g]);m&&(m._muted=t,m._interval&&l._stopFade(m._id),l._webAudio&&m._node?m._node.gain.setValueAtTime(t?0:m._volume,s.ctx.currentTime):m._node&&(m._node.muted=s._muted?!0:t),l._emit("mute",m._id))}return l},volume:function(){var t=this,r=arguments,l,u;if(r.length===0)return t._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var g=t._getSoundIds(),m=g.indexOf(r[0]);m>=0?u=parseInt(r[0],10):l=parseFloat(r[0])}else r.length>=2&&(l=parseFloat(r[0]),u=parseInt(r[1],10));var p;if(typeof l<"u"&&l>=0&&l<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,r)}}),t;typeof u>"u"&&(t._volume=l),u=t._getSoundIds(u);for(var y=0;y<u.length;y++)p=t._soundById(u[y]),p&&(p._volume=l,r[2]||t._stopFade(u[y]),t._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(l,s.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=l*s.volume()),t._emit("volume",p._id))}else return p=u?t._soundById(u):t._sounds[0],p?p._volume:0;return t},fade:function(t,r,l,u){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(t,r,l,u)}}),g;t=Math.min(Math.max(0,parseFloat(t)),1),r=Math.min(Math.max(0,parseFloat(r)),1),l=parseFloat(l),g.volume(t,u);for(var m=g._getSoundIds(u),p=0;p<m.length;p++){var y=g._soundById(m[p]);if(y){if(u||g._stopFade(m[p]),g._webAudio&&!y._muted){var j=s.ctx.currentTime,b=j+l/1e3;y._volume=t,y._node.gain.setValueAtTime(t,j),y._node.gain.linearRampToValueAtTime(r,b)}g._startFadeInterval(y,t,r,l,m[p],typeof u>"u")}}return g},_startFadeInterval:function(t,r,l,u,g,m){var p=this,y=r,j=l-r,b=Math.abs(j/.01),A=Math.max(4,b>0?u/b:u),E=Date.now();t._fadeTo=l,t._interval=setInterval(function(){var O=(Date.now()-E)/u;E=Date.now(),y+=j*O,y=Math.round(y*100)/100,j<0?y=Math.max(l,y):y=Math.min(l,y),p._webAudio?t._volume=y:p.volume(y,t._id,!0),m&&(p._volume=y),(l<r&&y<=l||l>r&&y>=l)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,p.volume(l,t._id),p._emit("fade",t._id))},A)},_stopFade:function(t){var r=this,l=r._soundById(t);return l&&l._interval&&(r._webAudio&&l._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(l._interval),l._interval=null,r.volume(l._fadeTo,t),l._fadeTo=null,r._emit("fade",t)),r},loop:function(){var t=this,r=arguments,l,u,g;if(r.length===0)return t._loop;if(r.length===1)if(typeof r[0]=="boolean")l=r[0],t._loop=l;else return g=t._soundById(parseInt(r[0],10)),g?g._loop:!1;else r.length===2&&(l=r[0],u=parseInt(r[1],10));for(var m=t._getSoundIds(u),p=0;p<m.length;p++)g=t._soundById(m[p]),g&&(g._loop=l,t._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=l,l&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,t.playing(m[p])&&(t.pause(m[p],!0),t.play(m[p],!0)))));return t},rate:function(){var t=this,r=arguments,l,u;if(r.length===0)u=t._sounds[0]._id;else if(r.length===1){var g=t._getSoundIds(),m=g.indexOf(r[0]);m>=0?u=parseInt(r[0],10):l=parseFloat(r[0])}else r.length===2&&(l=parseFloat(r[0]),u=parseInt(r[1],10));var p;if(typeof l=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,r)}}),t;typeof u>"u"&&(t._rate=l),u=t._getSoundIds(u);for(var y=0;y<u.length;y++)if(p=t._soundById(u[y]),p){t.playing(u[y])&&(p._rateSeek=t.seek(u[y]),p._playStart=t._webAudio?s.ctx.currentTime:p._playStart),p._rate=l,t._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(l,s.ctx.currentTime):p._node&&(p._node.playbackRate=l);var j=t.seek(u[y]),b=(t._sprite[p._sprite][0]+t._sprite[p._sprite][1])/1e3-j,A=b*1e3/Math.abs(p._rate);(t._endTimers[u[y]]||!p._paused)&&(t._clearTimer(u[y]),t._endTimers[u[y]]=setTimeout(t._ended.bind(t,p),A)),t._emit("rate",p._id)}}else return p=t._soundById(u),p?p._rate:t._rate;return t},seek:function(){var t=this,r=arguments,l,u;if(r.length===0)t._sounds.length&&(u=t._sounds[0]._id);else if(r.length===1){var g=t._getSoundIds(),m=g.indexOf(r[0]);m>=0?u=parseInt(r[0],10):t._sounds.length&&(u=t._sounds[0]._id,l=parseFloat(r[0]))}else r.length===2&&(l=parseFloat(r[0]),u=parseInt(r[1],10));if(typeof u>"u")return 0;if(typeof l=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,r)}}),t;var p=t._soundById(u);if(p)if(typeof l=="number"&&l>=0){var y=t.playing(u);y&&t.pause(u,!0),p._seek=l,p._ended=!1,t._clearTimer(u),!t._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=l);var j=function(){y&&t.play(u,!0),t._emit("seek",u)};if(y&&!t._webAudio){var b=function(){t._playLock?setTimeout(b,0):j()};setTimeout(b,0)}else j()}else if(t._webAudio){var A=t.playing(u)?s.ctx.currentTime-p._playStart:0,E=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(E+A*Math.abs(p._rate))}else return p._node.currentTime;return t},playing:function(t){var r=this;if(typeof t=="number"){var l=r._soundById(t);return l?!l._paused:!1}for(var u=0;u<r._sounds.length;u++)if(!r._sounds[u]._paused)return!0;return!1},duration:function(t){var r=this,l=r._duration,u=r._soundById(t);return u&&(l=r._sprite[u._sprite][1]/1e3),l},state:function(){return this._state},unload:function(){for(var t=this,r=t._sounds,l=0;l<r.length;l++)r[l]._paused||t.stop(r[l]._id),t._webAudio||(t._clearSound(r[l]._node),r[l]._node.removeEventListener("error",r[l]._errorFn,!1),r[l]._node.removeEventListener(s._canPlayEvent,r[l]._loadFn,!1),r[l]._node.removeEventListener("ended",r[l]._endFn,!1),s._releaseHtml5Audio(r[l]._node)),delete r[l]._node,t._clearTimer(r[l]._id);var u=s._howls.indexOf(t);u>=0&&s._howls.splice(u,1);var g=!0;for(l=0;l<s._howls.length;l++)if(s._howls[l]._src===t._src||t._src.indexOf(s._howls[l]._src)>=0){g=!1;break}return d&&g&&delete d[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,r,l,u){var g=this,m=g["_on"+t];return typeof r=="function"&&m.push(u?{id:l,fn:r,once:u}:{id:l,fn:r}),g},off:function(t,r,l){var u=this,g=u["_on"+t],m=0;if(typeof r=="number"&&(l=r,r=null),r||l)for(m=0;m<g.length;m++){var p=l===g[m].id;if(r===g[m].fn&&p||!r&&p){g.splice(m,1);break}}else if(t)u["_on"+t]=[];else{var y=Object.keys(u);for(m=0;m<y.length;m++)y[m].indexOf("_on")===0&&Array.isArray(u[y[m]])&&(u[y[m]]=[])}return u},once:function(t,r,l){var u=this;return u.on(t,r,l,1),u},_emit:function(t,r,l){for(var u=this,g=u["_on"+t],m=g.length-1;m>=0;m--)(!g[m].id||g[m].id===r||t==="load")&&(setTimeout((function(p){p.call(this,r,l)}).bind(u,g[m].fn),0),g[m].once&&u.off(t,g[m].fn,g[m].id));return u._loadQueue(t),u},_loadQueue:function(t){var r=this;if(r._queue.length>0){var l=r._queue[0];l.event===t&&(r._queue.shift(),r._loadQueue()),t||l.action()}return r},_ended:function(t){var r=this,l=t._sprite;if(!r._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(r._ended.bind(r,t),100),r;var u=!!(t._loop||r._sprite[l][2]);if(r._emit("end",t._id),!r._webAudio&&u&&r.stop(t._id,!0).play(t._id),r._webAudio&&u){r._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var g=(t._stop-t._start)*1e3/Math.abs(t._rate);r._endTimers[t._id]=setTimeout(r._ended.bind(r,t),g)}return r._webAudio&&!u&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,r._clearTimer(t._id),r._cleanBuffer(t._node),s._autoSuspend()),!r._webAudio&&!u&&r.stop(t._id,!0),r},_clearTimer:function(t){var r=this;if(r._endTimers[t]){if(typeof r._endTimers[t]!="function")clearTimeout(r._endTimers[t]);else{var l=r._soundById(t);l&&l._node&&l._node.removeEventListener("ended",r._endTimers[t],!1)}delete r._endTimers[t]}return r},_soundById:function(t){for(var r=this,l=0;l<r._sounds.length;l++)if(t===r._sounds[l]._id)return r._sounds[l];return null},_inactiveSound:function(){var t=this;t._drain();for(var r=0;r<t._sounds.length;r++)if(t._sounds[r]._ended)return t._sounds[r].reset();return new a(t)},_drain:function(){var t=this,r=t._pool,l=0,u=0;if(!(t._sounds.length<r)){for(u=0;u<t._sounds.length;u++)t._sounds[u]._ended&&l++;for(u=t._sounds.length-1;u>=0;u--){if(l<=r)return;t._sounds[u]._ended&&(t._webAudio&&t._sounds[u]._node&&t._sounds[u]._node.disconnect(0),t._sounds.splice(u,1),l--)}}},_getSoundIds:function(t){var r=this;if(typeof t>"u"){for(var l=[],u=0;u<r._sounds.length;u++)l.push(r._sounds[u]._id);return l}else return[t]},_refreshBuffer:function(t){var r=this;return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=d[r._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,s.ctx.currentTime),r},_cleanBuffer:function(t){var r=this,l=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return r;if(s._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),l))try{t.bufferSource.buffer=s._scratchBuffer}catch{}return t.bufferSource=null,r},_clearSound:function(t){var r=/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent);r||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,r=t._parent;return t._muted=r._muted,t._loop=r._loop,t._volume=r._volume,t._rate=r._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,r._sounds.push(t),t.create(),t},create:function(){var t=this,r=t._parent,l=s._muted||t._muted||t._parent._muted?0:t._volume;return r._webAudio?(t._node=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(l,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):s.noAudio||(t._node=s._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=r._src,t._node.preload=r._preload===!0?"auto":r._preload,t._node.volume=l*s.volume(),t._node.load()),t},reset:function(){var t=this,r=t._parent;return t._muted=r._muted,t._loop=r._loop,t._volume=r._volume,t._rate=r._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,r=t._parent;r._duration=Math.ceil(t._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,r=t._parent;r._duration===1/0&&(r._duration=Math.ceil(t._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var d={},c=function(t){var r=t._src;if(d[r]){t._duration=d[r].duration,x(t);return}if(/^data:[^;]+;base64,/.test(r)){for(var l=atob(r.split(",")[1]),u=new Uint8Array(l.length),g=0;g<l.length;++g)u[g]=l.charCodeAt(g);f(u.buffer,t)}else{var m=new XMLHttpRequest;m.open(t._xhr.method,r,!0),m.withCredentials=t._xhr.withCredentials,m.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(p){m.setRequestHeader(p,t._xhr.headers[p])}),m.onload=function(){var p=(m.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}f(m.response,t)},m.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete d[r],t.load())},h(m)}},h=function(t){try{t.send()}catch{t.onerror()}},f=function(t,r){var l=function(){r._emit("loaderror",null,"Decoding audio data failed.")},u=function(g){g&&r._sounds.length>0?(d[r._src]=g,x(r,g)):l()};typeof Promise<"u"&&s.ctx.decodeAudioData.length===1?s.ctx.decodeAudioData(t).then(u).catch(l):s.ctx.decodeAudioData(t,u,l)},x=function(t,r){r&&!t._duration&&(t._duration=r.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},v=function(){if(s.usingWebAudio){try{typeof AudioContext<"u"?s.ctx=new AudioContext:typeof webkitAudioContext<"u"?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch{s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),r=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),l=r?parseInt(r[1],10):null;if(t&&l&&l<9){var u=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!u&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};n.Howler=s,n.Howl=o,typeof He<"u"?(He.HowlerGlobal=i,He.Howler=s,He.Howl=o,He.Sound=a):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=s,window.Howl=o,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(s){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var a=o._howls.length-1;a>=0;a--)o._howls[a].stereo(s);return o},HowlerGlobal.prototype.pos=function(s,o,a){var d=this;if(!d.ctx||!d.ctx.listener)return d;if(o=typeof o!="number"?d._pos[1]:o,a=typeof a!="number"?d._pos[2]:a,typeof s=="number")d._pos=[s,o,a],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]);else return d._pos;return d},HowlerGlobal.prototype.orientation=function(s,o,a,d,c,h){var f=this;if(!f.ctx||!f.ctx.listener)return f;var x=f._orientation;if(o=typeof o!="number"?x[1]:o,a=typeof a!="number"?x[2]:a,d=typeof d!="number"?x[3]:d,c=typeof c!="number"?x[4]:c,h=typeof h!="number"?x[5]:h,typeof s=="number")f._orientation=[s,o,a,d,c,h],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(s,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(s,o,a,d,c,h);else return x;return f},Howl.prototype.init=function(s){return function(o){var a=this;return a._orientation=o.orientation||[1,0,0],a._stereo=o.stereo||null,a._pos=o.pos||null,a._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},a._onstereo=o.onstereo?[{fn:o.onstereo}]:[],a._onpos=o.onpos?[{fn:o.onpos}]:[],a._onorientation=o.onorientation?[{fn:o.onorientation}]:[],s.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(s,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(s,o)}}),a;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof s=="number")a._stereo=s,a._pos=[s,0,0];else return a._stereo;for(var c=a._getSoundIds(o),h=0;h<c.length;h++){var f=a._soundById(c[h]);if(f)if(typeof s=="number")f._stereo=s,f._pos=[s,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&i(f,d),d==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(s,0,0):f._panner.pan.setValueAtTime(s,Howler.ctx.currentTime)),a._emit("stereo",f._id);else return f._stereo}return a},Howl.prototype.pos=function(s,o,a,d){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(s,o,a,d)}}),c;if(o=typeof o!="number"?0:o,a=typeof a!="number"?-.5:a,typeof d>"u")if(typeof s=="number")c._pos=[s,o,a];else return c._pos;for(var h=c._getSoundIds(d),f=0;f<h.length;f++){var x=c._soundById(h[f]);if(x)if(typeof s=="number")x._pos=[s,o,a],x._node&&((!x._panner||x._panner.pan)&&i(x,"spatial"),typeof x._panner.positionX<"u"?(x._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),x._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),x._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):x._panner.setPosition(s,o,a)),c._emit("pos",x._id);else return x._pos}return c},Howl.prototype.orientation=function(s,o,a,d){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(s,o,a,d)}}),c;if(o=typeof o!="number"?c._orientation[1]:o,a=typeof a!="number"?c._orientation[2]:a,typeof d>"u")if(typeof s=="number")c._orientation=[s,o,a];else return c._orientation;for(var h=c._getSoundIds(d),f=0;f<h.length;f++){var x=c._soundById(h[f]);if(x)if(typeof s=="number")x._orientation=[s,o,a],x._node&&(x._panner||(x._pos||(x._pos=c._pos||[0,0,-.5]),i(x,"spatial")),typeof x._panner.orientationX<"u"?(x._panner.orientationX.setValueAtTime(s,Howler.ctx.currentTime),x._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),x._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):x._panner.setOrientation(s,o,a)),c._emit("orientation",x._id);else return x._orientation}return c},Howl.prototype.pannerAttr=function(){var s=this,o=arguments,a,d,c;if(!s._webAudio)return s;if(o.length===0)return s._pannerAttr;if(o.length===1)if(typeof o[0]=="object")a=o[0],typeof d>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),s._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:s._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:s._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:s._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:s._panningModel});else return c=s._soundById(parseInt(o[0],10)),c?c._pannerAttr:s._pannerAttr;else o.length===2&&(a=o[0],d=parseInt(o[1],10));for(var h=s._getSoundIds(d),f=0;f<h.length;f++)if(c=s._soundById(h[f]),c){var x=c._pannerAttr;x={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:x.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:x.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:x.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:x.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:x.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:x.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:x.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:x.panningModel};var v=c._panner;v||(c._pos||(c._pos=s._pos||[0,0,-.5]),i(c,"spatial"),v=c._panner),v.coneInnerAngle=x.coneInnerAngle,v.coneOuterAngle=x.coneOuterAngle,v.coneOuterGain=x.coneOuterGain,v.distanceModel=x.distanceModel,v.maxDistance=x.maxDistance,v.refDistance=x.refDistance,v.rolloffFactor=x.rolloffFactor,v.panningModel=x.panningModel}return s},Sound.prototype.init=function(s){return function(){var o=this,a=o._parent;o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,s.call(this),o._stereo?a.stereo(o._stereo):o._pos&&a.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(s){return function(){var o=this,a=o._parent;return o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,o._stereo?a.stereo(o._stereo):o._pos?a.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,a._refreshBuffer(o)),s.call(this)}}(Sound.prototype.reset);var i=function(s,o){o=o||"spatial",o==="spatial"?(s._panner=Howler.ctx.createPanner(),s._panner.coneInnerAngle=s._pannerAttr.coneInnerAngle,s._panner.coneOuterAngle=s._pannerAttr.coneOuterAngle,s._panner.coneOuterGain=s._pannerAttr.coneOuterGain,s._panner.distanceModel=s._pannerAttr.distanceModel,s._panner.maxDistance=s._pannerAttr.maxDistance,s._panner.refDistance=s._pannerAttr.refDistance,s._panner.rolloffFactor=s._pannerAttr.rolloffFactor,s._panner.panningModel=s._pannerAttr.panningModel,typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(s._pos[0],Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(s._pos[1],Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(s._pos[2],Howler.ctx.currentTime)):s._panner.setPosition(s._pos[0],s._pos[1],s._pos[2]),typeof s._panner.orientationX<"u"?(s._panner.orientationX.setValueAtTime(s._orientation[0],Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(s._orientation[1],Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(s._orientation[2],Howler.ctx.currentTime)):s._panner.setOrientation(s._orientation[0],s._orientation[1],s._orientation[2])):(s._panner=Howler.ctx.createStereoPanner(),s._panner.pan.setValueAtTime(s._stereo,Howler.ctx.currentTime)),s._panner.connect(s._node),s._paused||s._parent.pause(s._id,!0).play(s._id,!0)}})()}(nt)),nt}var Pn=Ln();const $n=Dn,Q=new Pn.Howl({src:[$n],volume:1,sprite:{bubble1:[0,75],bubble2:[100,75],bubble3:[200,75],addCorrect:[300,300],addWrong:[550,500],alienYay:[1e3,700],alienBoo:[1800,800],wrong:[2600,800],correct1:[3400,300],correct2:[3700,300],select:[4050,150],swap1:[4250,150],swap2:[4400,170],shuffle:[4600,900],lose1:[5500,2200],lose2:[7800,2e3],win1:[1e4,1200],win2:[11300,1500]}}),C=n=>{switch(n){case"bubble":Q.play(S.sample(["bubble1","bubble2","bubble3"]));break;case"bubbleIn":Q.play("bubble1");break;case"bubbleOut":Q.play("bubble2");break;case"addCorrect":Q.play("addCorrect");break;case"addWrong":Q.play("addWrong");break;case"alienYay":Q.play("alienYay");break;case"alienBoo":Q.play("alienBoo");break;case"wrong":Q.play("wrong");break;case"correct":Q.play(S.sample(["correct1","correct2"]));break;case"select":Q.play("select");break;case"swap":Q.play(S.sample(["swap1","swap2"]));break;case"shuffle":Q.play("shuffle");break;case"win":Q.play(S.sample(["win1","win2"]));break;case"lose":Q.play(S.sample(["lose1","lose2"]));break}},Gn={id:"",number:0,status:N.IN_PROGRESS,maxProgress:0,hearts:q.HEARTS,hardMode:!1,attempts:0,goal:q.GOAL,discs:[]},Fn=n=>{const i=me({key:q.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(Gn),{hardMode:localStorage.getItem(q.TD_DAILY_AQUI_O_MODE)==="challenge"})});return{id:n.id,number:n.number,status:i.status,hearts:i.hearts,maxProgress:i.maxProgress,goal:i.goal,discs:i.discs,hardMode:i.hardMode,attempts:i.attempts}},Hn=(n,i,s)=>{var d;const o=S.shuffle(n.itemsIds),a=[];for(let c=0;c<17;c++){const h=a[c-1],f=Bn(o,h,i?(d=a[c-1])==null?void 0:d.match:void 0,s);a.push(f)}return a},qn=Array(9).fill(0).map((n,i)=>i),Yn=[100,90,110,80,105,130,120,150,115],Et={85:8,80:7,90:6,100:5,105:4,110:3,120:2,130:1,150:0};function Bn(n,i,s,o){const a=S.shuffle(n),d=S.shuffle(qn),c=S.shuffle(Yn);if(!i){const t=S.sampleSize(a,o?9:8).map((r,l)=>({itemId:r,position:d[l],size:c[l],rotation:S.random(0,360),zIndex:Et[c[l]]}));return{id:S.orderBy(t.map(r=>Number(r.itemId))).join(Je),items:t}}const h=i.items.map(t=>t.itemId),f=S.chain(a).difference(h).take(o?8:7).value(),x=S.sample(h.filter(t=>t!==s))??h[0],v=S.shuffle([...f,x]).map((t,r)=>({itemId:t,position:d[r],size:c[r],rotation:S.random(0,360),zIndex:Et[c[r]]}));return{id:S.orderBy(v.map(t=>Number(t.itemId))).join(Je),items:v,match:x}}function Vn(n){const i=Qe(n,"YYYY-MM-DD");return[6,0].includes(i.day())}function Wn(n,i){const[s,o]=T.useState(!1),[a,d]=vt(q.TD_DAILY_AQUI_O_MODE,"normal"),{state:c,setState:h,updateState:f}=he(i),{session:x,setSession:v,updateSession:t}=Re({discIndex:0}),{updateLocalStorage:r}=fe({key:q.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{r(c)},[c]);const l=c.discs[x.discIndex],u=c.discs[x.discIndex+1],g=T.useMemo(()=>{var z,U;return(U=(z=S.intersectionBy((l==null?void 0:l.items)??[],(u==null?void 0:u.items)??[],"itemId"))==null?void 0:z[0])==null?void 0:U.itemId},[l,u]),{timeLeft:m,isRunning:p,restart:y,pause:j}=ns({duration:q.DURATION,autoStart:!1,onExpire:()=>{o(!0),f({maxProgress:Math.max(x.discIndex,c.maxProgress)})}}),b=()=>{h(z=>({...z,discs:Hn(n,a==="challenge",Vn(n.id)),attempts:z.attempts+1})),t({discIndex:0}),C("addCorrect"),y(Ts(q.DURATION),!0)},A=z=>{if(z===g){const U=x.discIndex+1;if(U===q.GOAL){f({status:N.WIN,maxProgress:q.GOAL}),j(),o(!0),C("win");return}v(Ie=>({...Ie,discIndex:U})),f({maxProgress:Math.max(U,c.maxProgress)}),C("correct");return}if(c.hearts===1){f({status:N.LOSE,hearts:0}),j(),o(!0),C("lose");return}h(U=>({...U,hearts:U.hearts-1})),C("wrong")},E=z=>{f({hardMode:z==="challenge"}),d(z)},O=c.status===N.WIN,R=c.status===N.LOSE,I=(O||R||s||c.attempts>0)&&!p;xe({key:q.KEY,isComplete:I});const{showResultModal:de,setShowResultModal:je}=we(I,()=>j());return{hearts:c.hearts,discIndex:x.discIndex,attempts:c.attempts,maxProgress:c.maxProgress,showResultModal:de,setShowResultModal:je,isWin:O,isLose:R,isComplete:I,onStart:b,onSelect:A,timeLeft:m,mode:a,onModeChange:E,discA:l,discB:u,result:g,isPlaying:p}}function ge({hearts:n,total:i,openRules:s,rules:o}){return e.jsxs("div",{className:"menu",children:[e.jsx(zn,{}),e.jsx(Un,{remaining:n,total:i}),e.jsx(Kn,{defaultOpen:s,rules:o})]})}function Un({remaining:n,total:i}){const s=Array(i).fill(!1).map((o,a)=>a<n);return e.jsx("div",{className:"menu-hearts",children:s.map((o,a)=>o?e.jsx(B,{},a):e.jsx(qs,{},a))})}function Kn({rules:n,defaultOpen:i}){const[s,o]=T.useState(i);return e.jsxs(e.Fragment,{children:[e.jsx(D,{type:"text",style:{color:"white"},icon:e.jsx(Bs,{}),onClick:()=>o(!0)}),e.jsx(Vs,{title:e.jsx(_,{pt:"Regras",en:"Rules"}),placement:"bottom",open:s,onClose:()=>o(!1),children:e.jsxs(P,{direction:"vertical",size:"small",children:[e.jsx(Gt,{}),e.jsx("ul",{className:"list",children:n})]})})]})}function zn(){return e.jsx(yt,{to:"/diario/hub",children:e.jsx(D,{type:"text",style:{color:"white"},icon:e.jsx(vn,{})})})}function Nt({disc:n,onSelect:i,width:s,className:o}){return e.jsx("div",{className:G("aqui-o-disc",o),style:{width:s,height:s},children:n.items.map(a=>e.jsx("div",{className:G("aqui-o-disc-item",`aqui-o-disc-item--pos-${a.position}`),style:{transform:`rotate(${a.rotation}deg) scale(${a.size/100})`,zIndex:a.zIndex},role:"button",onClick:()=>i(a.itemId),children:e.jsx(ee,{id:a.itemId,className:"aqui-o-disc-sprite",width:s/4,padding:9})},a.itemId))})}function Qn({items:n}){return e.jsx("div",{style:{display:"none"},children:n.map(i=>e.jsx(ee,{id:i,className:"transparent",width:1},i))})}const Jn=[H.QUARTETOS,H.ARTE_RUIM,...S.shuffle([H.COMUNICACAO_ALIENIGENA,H.TEORIA_DE_CONJUNTOS,H.FILMACO,H.PALAVREADO,H.AQUI_O,H.CONTROLE_DE_ESTOQUE,H.TA_NA_CARA,H.PICACO])],Xn=()=>Jn.filter(n=>!Ft(n.KEY)).map(n=>Zn({settings:n}));function Zn({settings:n}){return e.jsxs(w.Paragraph,{className:"center",strong:!0,children:[e.jsx(Z,{children:n.TAGLINE}),e.jsx("br",{}),e.jsxs(yt,{to:`/diario/${n.ROUTE}`,children:[e.jsx(k,{icon:e.jsx(n.HUB_ICON,{})})," ",e.jsx(Z,{children:n.NAME}),"!"]})]})}const _e=()=>{const n=T.useMemo(()=>Xn(),[]);return n.length===0?e.jsxs(w.Paragraph,{className:"center",strong:!0,children:[e.jsx(_,{pt:"VocÃª jÃ¡ jogou todos os jogos de hoje!",en:"You've played all today's games!"}),e.jsx("br",{}),e.jsx(_,{pt:"Que eficiÃªncia!",en:"How efficient!"})]}):e.jsx("div",{style:{width:"84vw",maxWidth:500},children:e.jsx(rs,{autoplay:!0,autoplaySpeed:5e3,dots:!1,children:n.map((i,s)=>e.jsx("div",{children:i},s))})})};function Te({result:n,rows:i=4}){const{message:s}=Ae.useApp(),{translate:o}=Y(),[a,d]=Js();return T.useEffect(()=>{a.value&&s.info(o(`Copiado para a Ã¡rea de transferÃªncia: ${a.value}`,`Copied to clipboard: ${a.value}`))},[a,s,o]),e.jsxs($,{vertical:!0,fullWidth:!0,children:[e.jsx(re,{onClick:()=>d(n),children:e.jsx(Ht.TextArea,{value:n,readOnly:!0,cols:30,rows:i})}),e.jsx(w.Paragraph,{className:"center",children:e.jsx(_,{pt:"Clique no campo acima para copiar e compartilhe com os amigos",en:"Click the field above to copy and share it with friends"})})]})}const qe=[e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Qs,{})})," ",e.jsx(_,{pt:"VocÃª Ã© muito ruim!",en:"You are really bad!"})]},"1"),e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(zs,{})})," ",e.jsx(_,{pt:"Foi bem mais ou menos!",en:"Pretty Weak!"})]},"2"),e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ks,{})})," ",e.jsx(_,{pt:"Muito bom!",en:"Very good!"})]},"3"),e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]},"4"),e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"IncrÃ­vel!",en:"Incredible!"})]},"5")],er=(n,i)=>n<=3||i===0?qe[0]:n<=8?qe[1]:n<=10?qe[2]:n<15?qe[3]:qe[4];function tr({challengeTitle:n,challengeNumber:i,hearts:s,progress:o,itemsIds:a,hardMode:d,lastMatch:c,maxProgress:h,attempts:f,isWin:x,isLose:v}){const{language:t,dualTranslate:r}=Y(),l=sr({game:r(q.NAME),title:r(n),remainingHearts:s,totalHearts:q.HEARTS,progress:Math.max(o,h),goal:q.GOAL,language:t,hardMode:d,challengeNumber:i,attempts:f}),u=er(o,s),g=h>o,m=x||v;return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:u}),o>0&&e.jsx(w.Paragraph,{className:"center",children:e.jsx(_,{pt:`VocÃª avanÃ§ou ${o} discos de ${q.GOAL}.`,en:`You advanced ${o} discs out of ${q.GOAL}.`})}),e.jsxs(w.Paragraph,{className:"center",children:[!m&&e.jsx(_,{pt:"VocÃª pode tentar novamente atÃ© conseguir 15 ou atÃ© nÃ£o ter mais coraÃ§Ãµes.",en:"You can try again until you reach 15 or until you run out of hearts."}),(g||m)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(_,{pt:`Seu melhor hoje foi de ${h} discos.`,en:`Your best today was ${h} discs.`}),!m&&e.jsx(_,{pt:" Tente novamente!",en:" Try again!"})]})]}),e.jsxs(L,{gap:6,children:[!!c&&e.jsx(ee,{id:c,width:45,className:G(W("pulse",{speed:"fast"}),"item-match-outline")}),o>0&&a.filter(p=>p!==c).slice(0,Math.floor((o-1)/3)).map((p,y)=>e.jsx(ee,{id:p,width:45,className:W("pulse",{speed:"fast",delay:y*.5})},p))]}),e.jsx(Te,{result:l,rows:3}),e.jsx(_e,{})]})}function sr({game:n,title:i,challengeNumber:s,remainingHearts:o,totalHearts:a,progress:d,goal:c,language:h,hardMode:f,attempts:x}){return[`${q.EMOJI} ${Ne(h)} ${n} #${s}`,`${i}${f?"*":""}: ${d}/${c}  ${Fe(o,a)}`,`Tentativas: ${x}`,`https://www.kavispires.com/tardedivertida/#/${ue(h)}`].join(`
`)}function nr(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"VocÃª Ã© apresentado com dois discos com 8 itens cada."}),e.jsx("li",{children:"Existe apenas um item que Ã© comum nos dois discos, clique nele o mais rÃ¡pido possÃ­vel."}),e.jsx("li",{children:"VocÃª tem 60 segundos para acertar o maior nÃºmero de discos."}),e.jsxs("li",{children:["Cada item errado que vocÃª clica, remove-se um coraÃ§Ã£o e vocÃª tem apenas 3 ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Modo difÃ­cil:"})," Itens nunca repetem em sequÃªncia."]}),e.jsx("li",{children:"Boa sorte e cuidado com dedos gordos!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"You are presented with two discs with 8 items each."}),e.jsx("li",{children:"There is only one item that is common in both discs, click on it as quickly as possible."}),e.jsx("li",{children:"You have 60 seconds to hit the most discs."}),e.jsxs("li",{children:["Each wrong item you click, a heart is removed and you only have 3 ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hard mode:"})," Items never repeat in sequence."]}),e.jsx("li",{children:"Good luck and watch out for fat fingers!"})]})})})}function rr({data:n}){const[i]=T.useState(Fn(n)),{hearts:s,showResultModal:o,setShowResultModal:a,discIndex:d,isWin:c,isLose:h,isComplete:f,onStart:x,onSelect:v,timeLeft:t,mode:r,onModeChange:l,discA:u,discB:g,result:m,isPlaying:p,attempts:y,maxProgress:j}=Wn(n,i),[b,A]=De(),[E,O]=De(),R=T.useMemo(()=>{const I=A.width-24,de=(A.height-O.height)/2-24;return Math.max(Math.min(I,de,450),150)},[A.height,A.width,O.height]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Vt,{}),localStorageKey:q.KEY,children:["TD ",e.jsx(Z,{children:q.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:b,children:[e.jsxs("div",{ref:E,children:[e.jsx(ge,{hearts:s,total:q.HEARTS,openRules:!0,rules:e.jsx(nr,{})}),e.jsx($,{children:e.jsxs(w.Text,{strong:!0,children:[e.jsx(Z,{children:n.title})," | ",e.jsx(_,{pt:"Disco",en:"Disc"})," ",d,"/",q.GOAL,e.jsxs(e.Fragment,{children:[" ","| ",e.jsx(_,{pt:"Tentativa",en:"Attempt"})," ",y]})]})}),e.jsx("div",{className:"full-width padding",children:e.jsx(ss,{value:t,total:60})})]}),e.jsxs($,{direction:"vertical",children:[!p&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{size:"large",onClick:x,type:"primary",disabled:c||h,icon:"ðŸ”˜",children:[e.jsx(_,{pt:"ComeÃ§ar",en:"Start"}),"Â ",e.jsx(_,{pt:" DiÃ¡rio",en:" Daily"})]}),e.jsx(Qn,{items:n.itemsIds}),e.jsx(Xe,{unCheckedChildren:e.jsx(_,{pt:"Modo Normal",en:"Normal Mode"}),checkedChildren:e.jsx(_,{pt:"Modo DifÃ­cil",en:"Challenge Mode"}),value:r==="challenge",onChange:I=>l(I?"challenge":"normal")})]}),f&&e.jsx(P,{className:"results-container",align:"center",direction:"vertical",children:e.jsx(D,{onClick:()=>a(!0),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),p&&e.jsxs($,{direction:"vertical",children:[e.jsx(Nt,{disc:u,onSelect:v,width:R,className:W("slideInUp",{speed:"fast"})},u.id),e.jsx(Nt,{disc:g,onSelect:v,width:R,className:W("zoomIn",{speed:"fast"})},g.id),e.jsx(ar,{result:m})]}),e.jsx(pe,{open:o,onCancel:()=>a(!1),footer:null,children:e.jsx(tr,{challengeNumber:n.number,challengeTitle:n.title,hearts:s,attempts:y,progress:d,itemsIds:n.itemsIds,hardMode:r==="challenge",lastMatch:m,maxProgress:j,isWin:c,isLose:h})})]})]})]})}function ar({result:n}){return e.jsx(e.Fragment,{})}function or(){return e.jsx(ye,{gameName:"aqui-o",GameComponent:rr})}const ir=["1","2","3","4","5","6","7","8","9","0"],ze=["q","w","e","r","t","y","u","i","o","p"],Ct=["a","s","d","f","g","h","j","k","l"],Ot=["z","x","c","v","b","n","m"];function xs({lettersState:n,onLetterClick:i,disabled:s,onBackspaceClick:o,onEnterClick:a,withNumbers:d}){const c=Be(ze.length+2,{margin:16,maxWidth:30});return jt(()=>{const h=f=>{const x=f.key;if(!s){if(x==="Enter"&&a)return a();if(x==="Backspace"&&o)return o();if(!s&&(ze.includes(x)||Ct.includes(x)||Ot.includes(x))&&(n!=null&&n[x].disabled))return i(x)}};return window.addEventListener("keyup",h),()=>window.removeEventListener("keyup",h)}),e.jsxs(P,{direction:"vertical",align:"center",className:"daily-keyboard",size:"small",children:[d&&e.jsx(L,{className:"daily-keyboard__row",children:ir.map(h=>{var f,x;return e.jsx(Ue,{width:c,letter:h,state:(f=n==null?void 0:n[h])==null?void 0:f.state,onLetterClick:i,disabled:s||((x=n==null?void 0:n[h])==null?void 0:x.disabled)},h)})}),e.jsx(L,{className:"daily-keyboard__row",children:ze.map(h=>{var f,x;return e.jsx(Ue,{width:c,letter:h,state:(f=n==null?void 0:n[h])==null?void 0:f.state,onLetterClick:i,disabled:s||((x=n==null?void 0:n[h])==null?void 0:x.disabled)},h)})}),e.jsx(L,{className:"daily-keyboard__row",children:Ct.map(h=>{var f,x;return e.jsx(Ue,{width:c,letter:h,state:(f=n==null?void 0:n[h])==null?void 0:f.state,onLetterClick:i,disabled:s||((x=n==null?void 0:n[h])==null?void 0:x.disabled)},h)})}),e.jsxs(L,{className:"daily-keyboard__row",children:[!!a&&e.jsx("button",{type:"button",style:{width:c},className:"daily-keyboard__key daily-keyboard__key--enter",onClick:a,disabled:s,children:"Enter"}),Ot.map(h=>{var f,x;return e.jsx(Ue,{width:c,letter:h,state:(f=n==null?void 0:n[h])==null?void 0:f.state,onLetterClick:i,disabled:s||((x=n==null?void 0:n[h])==null?void 0:x.disabled)},h)}),!!o&&e.jsx("button",{type:"button",style:{width:c},className:"daily-keyboard__key daily-keyboard__key--backspace",onClick:o,disabled:s,children:"âŒ«"})]})]})}function Ue({letter:n,state:i,onLetterClick:s,disabled:o}){const a="daily-keyboard__key",d=Be(ze.length+2,{margin:16,maxWidth:30});return e.jsx("button",{type:"button","data-key":n,style:{width:d},className:G(a,`${a}--${i}`),onClick:()=>s(n),disabled:o||i==="disabled",children:n},n)}const lr={id:"",number:0,status:N.IN_PROGRESS,hearts:ae.HEARTS,solution:{},guesses:{}};function cr(n){const i=me({key:ae.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(lr),{solution:dr(n.text)})});return{id:n.id,number:n.number,status:i.status,solution:i.solution,hearts:i.hearts,guesses:i.guesses}}function dr(n){const s=tt(n).toLowerCase().split(""),o={};return s.forEach(a=>{a.match(/[a-zA-Z]/)&&(o[a]=!1)}),o}function gs(n){return tt(n).toLowerCase()}function ur(n){return gs(n).match(/[a-zA-Z]/)!==null}function mr(n,i){const{state:s,setState:o}=he(i),{updateLocalStorage:a}=fe({key:ae.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{a(s)},[s]);const d=t=>{if(s.guesses[t])return;const r=s.solution[t]!==void 0,l={...s.solution};r&&(l[t]=!0);const u=Object.values(l).filter(m=>m!==void 0).every(Boolean);let g=s.status;r?u?(C("win"),g=N.WIN):C("addCorrect"):s.hearts===1?(C("lose"),g=N.LOSE):C("addWrong"),o(m=>({...m,guesses:{...m.guesses,[t]:{letter:t,state:r?"correct":"incorrect",disabled:!0}},solution:l,hearts:r?m.hearts:m.hearts-1,status:g}))},c=s.status===N.WIN,h=s.status===N.LOSE,f=c||h;xe({key:ae.KEY,isComplete:f});const{showResultModal:x,setShowResultModal:v}=we(c||h||f);return{hearts:s.hearts,guesses:s.guesses,solution:s.solution,showResultModal:x,setShowResultModal:v,isWin:c,isLose:h,isComplete:f,guessLetter:d}}function pr({drawings:n}){const i=Be(1,{margin:64,maxWidth:250,minWidth:150});return e.jsx(rs,{autoplay:!0,className:"carousel",autoplaySpeed:4e3,children:n.map(s=>e.jsx(Zs,{drawing:s,width:i,height:i,className:"canvas"},s))})}function hr({text:n,guesses:i}){const s=T.useMemo(()=>n.split(" ").map(o=>o.split("")),[n]);return e.jsx(P,{className:"prompt",wrap:!0,align:"center",children:s.map((o,a,d)=>e.jsxs(P,{className:"prompt-word",wrap:!0,align:"center",children:[o.map((c,h)=>{var t;const f=gs(c),x=((t=i==null?void 0:i[f])==null?void 0:t.state)==="correct",v=`${h}-${c}-${a}`;return ur(f)?x?e.jsx(be,{className:"letter-correct",shape:"square",children:c},v):e.jsx(k,{icon:e.jsx(as,{}),className:"letter-blank"},v):e.jsx(be,{shape:"square",children:c},v)}),a+1<d.length&&e.jsx(be,{shape:"square"})]},`word-${a}`))})}function fr({text:n,challenge:i,win:s,hearts:o,solution:a}){const{language:d,dualTranslate:c}=Y(),h=xr({game:c(ae.NAME),challenge:i,remainingHearts:o,solution:a,language:d});return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx(w.Paragraph,{className:"center",children:s?e.jsx(_,{pt:"VocÃª acertou a palavra!",en:"You guessed the word!"}):e.jsx(_,{pt:"VocÃª errou a palavra!",en:"You missed the word!"})}),e.jsx(os,{className:"result-answer",children:e.jsx(w.Paragraph,{className:"text-center",children:n})}),e.jsx(Te,{result:h,rows:3}),e.jsx(_e,{})]})}function xr({game:n,challenge:i,remainingHearts:s,solution:o,language:a}){const d=Object.keys(o).length,c=Object.values(o).filter(Boolean).length;return[`${ae.EMOJI} ${Ne(a)} ${n} #${i}`,`${Fe(s,ae.HEARTS)} (${Math.round(c/d*100)}%)`,`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function gr(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Tente adivinhar a expressÃ£o secreta observando os desenhos."}),e.jsx("li",{children:"VocÃª deve apertar letra por letra atÃ© que o nome esteja completo."}),e.jsxs("li",{children:["Cada letra que vocÃª aperta que nÃ£o estÃ¡ presente na resposta remove um coraÃ§Ã£o e vocÃª tem apenas 3 ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Try to guess the secret expression by looking at the drawings."}),e.jsx("li",{children:"You must press letter by letter until the name is complete."}),e.jsxs("li",{children:["Each letter you press that is not present in the answer removes a heart and you only have 3"," ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Good luck!"})]})})})}function _r({data:n}){const[i]=T.useState(cr(n)),{hearts:s,guesses:o,showResultModal:a,setShowResultModal:d,isWin:c,isComplete:h,guessLetter:f,solution:x}=mr(n,i);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Wt,{}),localStorageKey:ae.KEY,children:["TD ",e.jsx(Z,{children:ae.NAME})," #",n.number]}),e.jsxs(F.Content,{children:[e.jsx(ge,{hearts:s,total:ae.HEARTS,openRules:!h||s===ae.HEARTS,rules:e.jsx(gr,{})}),e.jsx(pr,{drawings:n.drawings}),e.jsx(hr,{text:n.text,guesses:o}),h&&e.jsx(P,{className:"results-container",direction:"vertical",align:"center",children:e.jsx(D,{onClick:()=>d(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),e.jsx(pe,{open:a,onCancel:()=>d(!1),footer:null,children:e.jsx(fr,{challenge:n.number,win:c,hearts:s,text:n.text,solution:x})}),e.jsx(xs,{lettersState:o,onLetterClick:f,disabled:h})]})]})}function jr(){return e.jsx(ye,{gameName:"arte-ruim",GameComponent:_r})}function M({className:n,align:i,direction:s,children:o,...a}){return e.jsx($,{direction:s??"vertical",align:i??"center",...a,children:o})}function X({className:n,align:i,children:s,...o}){return e.jsx(P,{className:G("text-region",n),align:i??"center",...o,children:s})}const vr={id:"",number:0,status:N.IN_PROGRESS,hearts:te.HEARTS,phase:Pe.STOCKING,warehouse:[],fulfillments:[],lastPlacedGoodId:null,guesses:[],evaluations:[],extraAttempts:0},_s=(n,i)=>{const s=me({key:te.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(vr),{warehouse:Array(n.goods.length).fill(null)})});return{id:n.id,number:n.number,status:s.status,hearts:s.hearts,phase:s.phase,warehouse:s.warehouse,fulfillments:s.fulfillments,lastPlacedGoodId:s.lastPlacedGoodId,guesses:s.guesses,evaluations:s.evaluations,extraAttempts:s.extraAttempts,...i}},yr=(n,i)=>i.reduce((s,o)=>{if(o.shelfIndex===-1){const d=!n.some(c=>c===o.order);return s.push(d),s}const a=o.order===n[o.shelfIndex];return s.push(a),s},[]),br=n=>n.map(i=>`${i.order}${Je}${i.shelfIndex}`).join(",");function Ar(n,i){const{message:s}=Ae.useApp(),{translate:o}=Y(),{state:a,setState:d}=he(i),{session:c,updateSession:h}=Re({latestAttempt:null,activeOrder:null}),{updateLocalStorage:f}=fe({key:te.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{f(a)},[a]);const x=n.goods[a.warehouse.filter(Boolean).length],v=A=>{A>=0&&x&&d(E=>{const O=S.cloneDeep(E);return O.warehouse[A]=x,O.lastPlacedGoodId=x,C("swap"),O.warehouse.every(Boolean)&&(O.phase=Pe.FULFILLING),O})},t=A=>{C("bubbleIn"),h({activeOrder:A})},r=A=>{C("swap"),d(E=>{const O=S.cloneDeep(E);return c.activeOrder&&(O.fulfillments.push({order:c.activeOrder,shelfIndex:A}),h({activeOrder:null})),O})},l=A=>{C("bubbleOut"),d(E=>{const O=S.cloneDeep(E);return O.fulfillments=O.fulfillments.filter(R=>R.order!==A),h({activeOrder:A}),O})},u=()=>{const A=br(a.fulfillments);if(a.guesses.includes(A))return s.warning({content:o("VocÃª jÃ¡ tentou essa combinaÃ§Ã£o. Tente outra!","You already tried this combination. Try another one!"),duration:5}),h({latestAttempt:Date.now()});const E=yr(a.warehouse,a.fulfillments),O=E.every(Boolean);O||(s.warning({content:o("Um ou mais produtos estÃ£o fora de lugar. Tente novamente!","One or more products are out of place. Try again!"),duration:3}),C("wrong")),d(R=>{const I=S.cloneDeep(R);return I.evaluations.push(E),I.guesses.push(A),O?(I.status=N.WIN,C("win")):(I.hearts-=1,I.hearts===0&&(C("lose"),I.status=N.WIN)),h({latestAttempt:Date.now()}),I})},g=a.status===N.WIN,m=a.status===N.LOSE,p=g||m;xe({key:te.KEY,isComplete:p});const{showResultModal:y,setShowResultModal:j}=we(p),b=()=>{const A={warehouse:Array(n.goods.length).fill(null),guesses:[],extraAttempts:a.extraAttempts+1,hearts:te.HEARTS-a.extraAttempts-1},E=_s(n,A);d(E)};return{hearts:a.hearts,phase:a.phase,warehouse:a.warehouse,fulfillments:a.fulfillments,lastPlacedGoodId:a.lastPlacedGoodId,guesses:a.guesses,evaluations:a.evaluations,orders:n.orders,currentGood:x,latestAttempt:c.latestAttempt,activeOrder:c.activeOrder,showResultModal:y,setShowResultModal:j,isWin:g,isLose:m,isComplete:p,onPlaceGood:v,onSelectOrder:t,onFulfill:r,onTakeBack:l,onSubmit:u,reset:b}}function wr({activeOrder:n,warehouse:i,fulfillments:s,onFulfill:o,onTakeBack:a,width:d,reveal:c=!1}){const h={width:d,height:d};return e.jsx("div",{className:"shelves-board",children:i.map((f,x)=>{if(!f)return e.jsx("div",{children:"X"},x);const v=s.find(t=>t.shelfIndex===x);return v?e.jsxs("div",{className:G("shelves-board__shelf","shelves-board__shelf-fulfilled"),style:h,children:[c?e.jsx(Ee,{id:v.order,width:d-24,className:"shelves-board__placed-order"}):e.jsx(re,{onClick:()=>a(v.order),hoverType:"none",children:e.jsx(Ee,{id:v.order,width:d-24,className:"shelves-board__placed-order"})}),c?e.jsx(Ee,{id:f,width:d-12}):e.jsx(ct,{width:d-12})]},x):e.jsx("div",{className:G("shelves-board__shelf"),style:h,children:c?e.jsx(Ee,{id:f,width:d-12}):e.jsx(re,{onClick:n?()=>o(x):void 0,children:e.jsx(ct,{width:d-12,className:W("bounce")})})},x)})})}function Tr({fulfillments:n,orders:i,onSelectOrder:s,shelfWidth:o,activeOrder:a}){return e.jsxs("div",{className:"fulfillment-center",children:[e.jsx(Ps,{width:o/1.5,className:W("headShake",{infinite:!0})}),e.jsx("div",{className:G("fulfillment-center__orders",W("lightSpeedInLeft")),children:i.map(d=>{const c=n.find(h=>h.order===d);return e.jsxs(re,{onClick:()=>s(d),disabled:n.length===4||!!c,children:[!!c&&e.jsx(k,{icon:e.jsx(en,{})}),a===d&&e.jsx(k,{icon:e.jsx(tn,{}),className:W("bounce",{infinite:!0})}),e.jsx(Ee,{id:d,width:o*.85,className:G("order",a===d&&"order--active",!!c&&"order--fulfilled")},d)]},d)})})]})}function Ir({phase:n,orders:i,warehouse:s,activeOrder:o,fulfillments:a,onSelectOrder:d,onFulfill:c,onTakeBack:h,onSubmit:f,shelfWidth:x,isComplete:v,setShowResultModal:t,latestAttempt:r}){const l=n===Pe.FULFILLING&&!v,u=n===Pe.DELIVERING,g=r&&!v,m=e.jsx(M,{children:e.jsx("div",{className:g?W("shakeX"):"",children:e.jsx(wr,{activeOrder:o,warehouse:s,onFulfill:c,onTakeBack:h,width:x,fulfillments:a,reveal:v})},r)});if(l)return e.jsxs(e.Fragment,{children:[m,e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:["Recebemos 5 pedidos e 4 deles estÃ£o em estoque!",e.jsx("br",{}),"Selecione os pedidos um a um e coloque-nos na prateleira correta.",e.jsx("br",{}),e.jsxs("strong",{children:["Pedidos Posicionados (",a.length,"/4)."]})]}),en:e.jsxs(e.Fragment,{children:["We have received 5 orders and 4 of them are in stock!",e.jsx("br",{}),"Select the orders one by one and place them on the correct shelf.",e.jsx("br",{}),e.jsxs("strong",{children:["Orders Placed (",a.length,"/4)."]})]})})})}),e.jsx(Tr,{orders:i,activeOrder:o,onSelectOrder:d,shelfWidth:x,fulfillments:a}),!v&&e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:e.jsx(e.Fragment,{children:"Para desfazer um pedido, Ã© sÃ³ clicar nele na prateleira."}),en:e.jsx(e.Fragment,{children:"To undo an order, just click on it on the shelf."})})})}),a.length===4&&!v&&e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx(D,{size:"large",type:"primary",onClick:f,children:e.jsx(_,{pt:"Enviar pacotes",en:"Send packages"})})}),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:["Se tudo estiver nos confirmes, aperte o botÃ£o de enviar.",e.jsx("br",{}),"VocÃª perde um coraÃ§Ã£o se qualquer um deles estiver errado."]}),en:e.jsxs(e.Fragment,{children:["If everything is in order, press the delivery button.",e.jsx("br",{}),"You lose a heart if any of them are wrong"]})})})})]})]});if(u){const p=!a.some(y=>y.shelfIndex===-1);return e.jsxs(e.Fragment,{children:[m,e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:"Tudo pronto, hora de entregar!",en:"All set, time to deliver!"})})}),e.jsx(M,{children:e.jsx(D,{size:"large",type:"primary",onClick:f,children:e.jsx(_,{pt:"Enviar pacotes",en:"Send packages"})})}),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Pedidos Assinalados"}),p?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("span",{style:{color:"red"},children:[e.jsx(sn,{})," VocÃª nÃ£o colocou nenhum pedido na lata de lixo! Um dos produtos NÃƒO estÃ¡ na prateleira!!!"]})]}):e.jsx(e.Fragment,{}),e.jsx("br",{}),"Se tudo estiver nos confirmes, aperte o botÃ£o de enviar.",e.jsx("br",{}),"VocÃª perde um coraÃ§Ã£o se qualquer um deles estiver errado."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"All Orders have been assigned"}),e.jsx("br",{}),"If everything is in order, press the delivery button.",e.jsx("br",{}),"You lose a heart if any of them are wrong"]})})})})]})}return e.jsxs(e.Fragment,{children:[m,e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:"VocÃª completou todos os pedidos!",en:"You have completed all orders!"})})}),e.jsx(M,{children:e.jsx(D,{onClick:()=>t(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})})]})}function Sr({goods:n}){return e.jsx("div",{style:{display:"none"},children:n.map(i=>e.jsx(Ee,{id:i,className:"transparent",width:1},i))})}function Er({challenge:n,title:i,isWin:s,hearts:o,evaluations:a}){const{language:d,dualTranslate:c}=Y(),h=Nr({game:c(te.NAME),challenge:n,remainingHearts:o,language:d,evaluations:a});return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx(w.Text,{strong:!0,className:"center",children:i}),e.jsx(w.Paragraph,{className:"center",children:s?e.jsx(_,{pt:"VocÃª entregou todos os pedidos!",en:"You delivered all orders!"}):e.jsx(_,{pt:"VocÃª nÃ£o conseguiu entregar todos os pedidos.",en:"You couldn't deliver all orders."})}),e.jsx(Te,{result:h,rows:6}),e.jsx(_e,{})]})}function Nr({game:n,challenge:i,remainingHearts:s,language:o,evaluations:a}){const d=a.map(c=>c.map(h=>h?"ðŸ“«":"ðŸ¤¬"));return[`${te.EMOJI} TD ${n} #${i}`,`${Fe(s,te.HEARTS," ")}`,d.map(c=>c.join(" ").trim()).filter(Boolean).join(`
`),`https://www.kavispires.com/tardedivertida/#/${ue(o)}`].join(`
`)}function js(){return e.jsx(_t,{message:e.jsx(_,{pt:"Jogo em fase de testes. Reporte qualquer problema.",en:"Game in beta mode. Report any bugs!"}),type:"warning",showIcon:!0,banner:!0})}function Cr(){return e.jsx(_t,{message:e.jsx(_,{pt:"VocÃª jogarÃ¡ uma demonstraÃ§Ã£o. Favor dar feedback.",en:"You will play a demo game. Please give feedback."}),type:"info",showIcon:!0,banner:!0})}function Or(){return e.jsxs(w,{children:[e.jsx(js,{}),e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"VocÃª Ã© o funcionÃ¡rio uma empresa de compras online e estÃ¡ encarregado do estoque."}),e.jsx("li",{children:"Coloque os 16 produtos na prateleira do jeito que vocÃª preferir. O ideal Ã© que vocÃª siga uma lÃ³gica que depois vocÃª saiba onde eles estÃ£o."}),e.jsx("li",{children:"A pegadinha Ã© que vocÃª nÃ£o vÃª mais o produto depois de posicionÃ¡-lo."}),e.jsx("li",{children:"ApÃ³s todos os produtos estarem organizados, vocÃª receberÃ¡ 5 pedidos. Desses 5, apenas 4 estÃ£o em estoque (na prateleira)."}),e.jsx("li",{children:"Selecione os produtos em estoque deixando de fora o produto fora de estoque."}),e.jsxs("li",{children:["Tente completar todos os pedidos sem errar. A cada erro, vocÃª perde um ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:["VocÃª tem ",te.HEARTS," ",e.jsx(B,{})," chances. Boa sorte!"]})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"You are an employee at an online shopping company and are in charge of the stock."}),e.jsx("li",{children:"Place the 16 products on the shelf as you prefer. It is ideal that you follow a logic that you can remember where they are later."}),e.jsx("li",{children:"The catch is that you won't see the product anymore after you position it."}),e.jsx("li",{children:"After all products are organized, you will receive 5 orders. Of these 5, only 4 are in stock (on the shelf)."}),e.jsx("li",{children:"Select the products in stock, leaving out the out-of-stock product."}),e.jsxs("li",{children:["Try to complete all orders without making mistakes. For each mistake, you lose a ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:["You have ",te.HEARTS," ",e.jsx(B,{})," chances. Good luck!"]})]})})]})}function Rr({warehouse:n,onPlaceGood:i,width:s,lastPlacedGoodId:o}){const a={width:s,height:s};return e.jsx("div",{className:"shelves-board",children:n.map((d,c)=>d?d!==o?e.jsx("div",{className:G("shelves-board__shelf",W("flipInY")),style:a,children:e.jsx(ct,{width:s-12})},c):e.jsx("div",{className:G("shelves-board__shelf"),style:a,children:e.jsx(Ee,{id:d,width:s-12,className:W("bounce")})},c):e.jsx("div",{className:G("shelves-board__empty-shelf"),style:a,children:e.jsx("button",{type:"button",className:"shelves-board__empty-shelf-button",onClick:()=>i(c),children:"?"})},c))})}function kr({warehouse:n,currentGood:i,lastPlacedGoodId:s,onPlaceGood:o,shelfWidth:a}){return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx(Rr,{warehouse:n,onPlaceGood:o,width:a,lastPlacedGoodId:s})}),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:"Coloque o produto em uma prateleira vazia:",en:"Place the product on an empty shelf:"})})}),e.jsx(M,{children:i&&e.jsx(Ee,{id:i,width:a,className:W("lightSpeedInLeft")},i)}),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(w.Text,{children:e.jsx(_,{pt:`
                Um bom funcionÃ¡rio sempre sabe onde estÃ¡ cada produto. Lembre-se de usar uma certa lÃ³gica para memorizar a posiÃ§Ã£o de cada produto.`,en:"A good employee always knows where each product is. Remember to use a certain logic to memorize the position of each product."})})})})]})}function Mr({data:n}){const[i]=T.useState(_s(n)),{hearts:s,warehouse:o,currentGood:a,activeOrder:d,lastPlacedGoodId:c,onPlaceGood:h,onSelectOrder:f,onFulfill:x,onTakeBack:v,onSubmit:t,fulfillments:r,showResultModal:l,setShowResultModal:u,isWin:g,isComplete:m,evaluations:p,reset:y,latestAttempt:j,phase:b,orders:A}=Ar(n,i),[E,O]=De(),R=T.useMemo(()=>{const I=O.width/5-16;return Math.min(Math.max(I,48),96)},[O.width]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Kt,{}),localStorageKey:te.KEY,children:[e.jsx(Z,{children:te.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:E,children:[e.jsx(ge,{hearts:s,total:te.HEARTS,openRules:!0,rules:e.jsx(Or,{})}),e.jsx(Sr,{goods:n.goods}),e.jsx(M,{children:e.jsx(w.Text,{strong:!0,className:"controle-de-estoque-title",children:n.title})}),b===Pe.STOCKING&&a&&e.jsx(kr,{warehouse:o,currentGood:a,lastPlacedGoodId:c,onPlaceGood:h,shelfWidth:R}),b!==Pe.STOCKING&&e.jsx(Ir,{phase:b,warehouse:o,orders:A,activeOrder:d,fulfillments:r,shelfWidth:R,onSelectOrder:f,onFulfill:x,onTakeBack:v,onSubmit:t,isComplete:m,setShowResultModal:u,latestAttempt:j}),e.jsx(X,{direction:"horizontal",split:e.jsx(Ve,{type:"vertical"}),children:p.map((I,de)=>e.jsx(qt,{title:e.jsx(_,{pt:"Acertos",en:"Correct"}),children:e.jsxs("span",{children:[I.filter(Boolean).length," ðŸ“«"]})},`${I}-${de}`))}),e.jsx(pe,{open:l,onCancel:()=>u(!1),footer:null,children:e.jsx(Er,{challenge:n==null?void 0:n.number,isWin:g,hearts:s,evaluations:p,title:n.title})})]}),e.jsx(M,{children:e.jsx(ts,{title:e.jsx(_,{pt:"Deseja mesmo recomeÃ§ar o jogo?",en:"Do you really want to reset the game?"}),description:e.jsx(_,{pt:"VocÃª perderÃ¡ um coraÃ§Ã£o.",en:"You will lose a heart."}),onConfirm:y,children:e.jsx(D,{type:"primary",danger:!0,disabled:s<=0,children:e.jsx(_,{pt:"RecomeÃ§ar Jogo",en:"Reset Game"})})})})]})}function Dr(){return e.jsx(ye,{gameName:"controle-de-estoque",GameComponent:Mr})}const Lr=Object.values(H);function Pr(){const{isAdmin:n}=et();return n?e.jsx(We,{children:e.jsxs(P,{direction:"vertical",className:"margin",children:[e.jsxs("pre",{children:["Today: ",Pt()]}),Lr.map(i=>e.jsx($r,{localKey:i.KEY},i.KEY))]})}):e.jsx(w.Text,{children:"Unauthorized"})}function $r({localKey:n}){const i=T.useMemo(()=>JSON.stringify(JSON.parse(localStorage.getItem(n)||"{}"),null,2),[n]);return e.jsxs(P,{direction:"vertical",children:[e.jsx(w.Paragraph,{className:"center",strong:!0,children:n}),e.jsx(Ht.TextArea,{cols:10,rows:8,value:i,style:{width:"clamp(300px, 80vw, 960px)"}})]})}const Gr={id:"",number:0,status:N.IN_PROGRESS,hearts:ie.HEARTS,solution:{},guesses:{}},Fr=n=>{const i=me({key:ie.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(Gr),{solution:Hr(n.title)})});return{id:n.id,number:n.number,status:i.status,solution:i.solution,hearts:i.hearts,guesses:i.guesses}};function Hr(n,i){const o=tt(n).toLowerCase().split(""),a={};return o.forEach(d=>{d.match(/[a-zA-Z0-9]/)&&(a[d]=!1)}),a}function vs(n){return tt(n).toLowerCase()}function qr(n,i){return vs(n).match(/[a-zA-Z0-9]/)!==null}function Yr(n,i){const{state:s,setState:o}=he(i),{updateLocalStorage:a}=fe({key:ie.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{a(s)},[s]);const d=t=>{if(s.guesses[t])return;const r=s.solution[t]!==void 0,l={...s.solution};r&&(l[t]=!0);const u=Object.values(l).filter(m=>m!==void 0).every(Boolean);let g=s.status;r?u?(C("win"),g=N.WIN):C("addCorrect"):s.hearts===1?(C("lose"),g=N.LOSE):C("addWrong"),o(m=>({...m,guesses:{...m.guesses,[t]:{letter:t,state:r?"correct":"incorrect",disabled:!0}},solution:l,hearts:r?m.hearts:m.hearts-1,status:g}))},c=s.status===N.WIN,h=s.status===N.LOSE,f=c||h;xe({key:ie.KEY,isComplete:f});const{showResultModal:x,setShowResultModal:v}=we(c||h||f);return{hearts:s.hearts,guesses:s.guesses,solution:s.solution,showResultModal:x,setShowResultModal:v,isWin:c,isLose:h,isComplete:f,guessLetter:d}}function Br({text:n,guesses:i}){const s=T.useMemo(()=>n.split(" ").map(o=>o.split("")),[n]);return e.jsx(P,{className:"prompt",wrap:!0,align:"center",children:s.map((o,a,d)=>e.jsxs(P,{className:"prompt-word",wrap:!0,align:"center",children:[o.map((c,h)=>{var t;const f=vs(c),x=((t=i==null?void 0:i[f])==null?void 0:t.state)==="correct",v=`${h}-${c}-${a}`;return qr(f)?x?e.jsx(be,{className:"letter-correct",shape:"square",children:c},v):e.jsx(k,{icon:e.jsx(as,{}),className:"letter-blank"},v):e.jsx(be,{shape:"square",children:c},v)}),a+1<d.length&&e.jsx(be,{shape:"square"})]},`word-${a}`))})}function Vr({text:n,challenge:i,win:s,hearts:o,solution:a}){const{language:d,dualTranslate:c}=Y(),h=Wr({game:c(ie.NAME),challenge:i,remainingHearts:o,solution:a,language:d});return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx(w.Paragraph,{className:"center",children:s?e.jsx(_,{pt:"VocÃª acertou o filme!",en:"You guessed the movie!"}):e.jsx(_,{pt:"VocÃª errou o filme!",en:"You missed the movie!"})}),e.jsx(os,{className:"result-answer",children:e.jsx(w.Paragraph,{className:"text-center",children:n})}),e.jsx(Te,{result:h,rows:3}),e.jsx(_e,{})]})}function Wr({game:n,challenge:i,remainingHearts:s,solution:o,language:a}){const d=Object.keys(o).length,c=Object.values(o).filter(Boolean).length;return[`${ie.EMOJI} ${Ne(a)} ${n} #${i}`,`${Fe(s,ie.HEARTS)} (${Math.round(c/d*100)}%)`,`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function Ur(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Tente adivinhar o filme secreto observando os Ã­cones e ano do filme."}),e.jsx("li",{children:"Os Ã­cones nÃ£o estÃ£o em ordem e podem significar palavras no tÃ­tulo ou sobre o enredo do filme."}),e.jsx("li",{children:"VocÃª deve apertar letra por letra (e nÃºmeros!) atÃ© que o nome esteja completo."}),e.jsxs("li",{children:["Cada letra que vocÃª aperta que nÃ£o estÃ¡ presente na resposta remove um coraÃ§Ã£o e vocÃª tem apenas 3 ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Try to guess the secret movie by looking at the icons and movie year."}),e.jsx("li",{children:"The icons are not in order and may mean words in the movie title or about the plot."}),e.jsx("li",{children:"You must press letter by letter (and numbers!) until the name is complete."}),e.jsxs("li",{children:["Each letter you press that is not present in the answer removes a heart and you only have 3"," ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Good luck!"})]})})})}function Kr({data:n}){const[i]=T.useState(Fr(n)),{hearts:s,guesses:o,showResultModal:a,setShowResultModal:d,isWin:c,isComplete:h,guessLetter:f,solution:x}=Yr(n,i),v=Be(5,{margin:64,maxWidth:100,minWidth:65});return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(zt,{}),localStorageKey:ie.KEY,children:["TD ",e.jsx(Z,{children:ie.NAME})," #",n.number]}),e.jsxs(F.Content,{children:[e.jsx(ge,{hearts:s,total:ie.HEARTS,openRules:!h||s===ie.HEARTS,rules:e.jsx(Ur,{})}),e.jsx(M,{children:e.jsxs(w.Text,{strong:!0,children:[e.jsx(_,{pt:"Ano de LanÃ§amento",en:"Release Year"}),": ",n.year]})}),e.jsx($,{wrap:!0,children:n.itemsIds.map((t,r)=>e.jsx(ee,{id:t,width:v},`${t}-${r}`))}),e.jsx(Br,{text:n.title,guesses:o}),h&&e.jsx(P,{className:"results-container",direction:"vertical",align:"center",children:e.jsx(D,{onClick:()=>d(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),e.jsx(pe,{open:a,onCancel:()=>d(!1),footer:null,children:e.jsx(Vr,{challenge:n.number,win:c,hearts:s,text:n.title,solution:x})}),e.jsx(xs,{lettersState:o,onLetterClick:f,disabled:h,withNumbers:!0})]})]})}function zr(){return e.jsx(ye,{gameName:"filmaco",GameComponent:Kr})}const ys={KEY:"",ROUTE:"",RELEASE_DATE:Qe().add(1,"year").format("YYYY-MM-DD"),EMOJI:"",COLOR:"",HUB_ICON:es,HUB_NAME:{pt:"",en:""},NAME:{pt:"",en:""},TAGLINE:{pt:"",en:""},disabled:!0},rt=[H.ARTE_RUIM,H.COMUNICACAO_ALIENIGENA,H.AQUI_O,H.TEORIA_DE_CONJUNTOS,H.CONTROLE_DE_ESTOQUE,H.FILMACO,H.PALAVREADO,H.QUARTETOS],Rt=[H.PICACO,H.TA_NA_CARA,{...ys,HUB_ICON:es,HUB_NAME:{pt:"Responda",en:"Answer"},COLOR:"rgba(240, 240, 228, 0.85)",disabled:!0}],Qr=[H.PORTAIS_MAGICOS,{...ys,HUB_ICON:$s,HUB_NAME:{pt:"Criminologia",en:"Criminology"},COLOR:"rgba(243, 232, 145, 0.85)",disabled:!0}];function at(){const[n,i]=st(3,{maxWidth:128,minWidth:48,gap:16});return e.jsxs(We,{children:[e.jsxs("div",{className:"menu menu--hub",children:[e.jsx(Gt,{}),e.jsx(Zr,{}),e.jsx(Xr,{})]}),e.jsxs("div",{className:"hub",ref:i,children:[e.jsx(w.Title,{level:5,children:e.jsx(_,{pt:"Jogue",en:"Play"})}),e.jsx(ot,{list:rt,width:n,startingIndex:0})]}),e.jsxs("div",{className:"hub",children:[e.jsx(w.Title,{level:5,children:e.jsx(_,{pt:"Contribua",en:"Contribute"})}),e.jsx(ot,{list:Rt,width:n,startingIndex:rt.length})]}),e.jsxs("div",{className:"hub",children:[e.jsx(w.Title,{level:5,children:e.jsx(_,{pt:"Demos",en:"Demos"})}),e.jsx(ot,{list:Qr,width:n,startingIndex:rt.length+Rt.length})]}),e.jsx(ea,{})]})}function ot({list:n,width:i,startingIndex:s}){return e.jsxs("div",{className:"hub-list",children:[n.map(({KEY:o,ROUTE:a,HUB_ICON:d,HUB_NAME:c,COLOR:h,RELEASE_DATE:f,disabled:x},v)=>e.jsx(Jr,{lsKey:o,width:i,href:a,Icon:d,name:c,color:h,releaseDate:f,disabled:x||Es(f),index:s+v},o)),Array.from({length:(3-n.length%3)%3}).map((o,a)=>e.jsx("div",{style:{width:i},className:"hub-item-placeholder"},a))]})}function Jr({lsKey:n,width:i,disabled:s,href:o,Icon:a,name:d,color:c,releaseDate:h,index:f}){const x=Ft(n),v=At(h)<15&&At(h)>=0&&!x&&h!=="DEMO";return e.jsxs(ke.div,{className:"played-wrapper",children:[x&&e.jsx(k,{icon:e.jsx(nn,{}),size:"small",className:"played-wrapper__played"}),e.jsx(ke.div,{className:"played-wrapper",...v?Le("tada",{repeat:10,delay:.1*f,speed:"fast"}):{},children:e.jsx(ke.button,{className:G("transparent-button","hub-item",s&&"hub-item--disabled"),style:{width:i,height:i,backgroundColor:c},...Le("bounceIn",{delay:f*.05}),disabled:s,onClick:()=>C("swap"),children:e.jsxs(yt,{to:`/diario/${o}`,className:"hub-link",children:[e.jsx(a,{style:{width:i/2}}),e.jsx(Z,{children:d})]})})})]})}function Xr(){const[n,i]=Ss("volume");T.useEffect(()=>{Q.volume(n)},[n]);const s=o=>{i(o?.5:0)};return e.jsx(Xe,{checkedChildren:e.jsx(Cn,{}),unCheckedChildren:e.jsx(In,{}),checked:!!n,onClick:s})}function Zr(){const n=()=>{const d=new Date;return d.setHours(24,0,0,0),d},{seconds:i,minutes:s,hours:o,restart:a}=Is.useTimer({expiryTimestamp:n(),onExpire:()=>a(n())});return e.jsxs("div",{className:"hub-time-left",children:[e.jsx("span",{children:String(o).padStart(2,"0")},`h${o}`),":",e.jsx("span",{children:String(s).padStart(2,"0")},`m${s}`),":",e.jsx("span",{children:String(i).padStart(2,"0")},`s${i}`)]})}function ea(){return null}const ta={id:"",number:0,status:N.IN_PROGRESS,hearts:V.HEARTS,boardState:[],swaps:0,letters:[],guesses:[]},sa=n=>{const i=n.keyword.length,s=me({key:V.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(ta),{letters:aa(n.letters,i),hearts:Math.max(V.HEARTS,i)})});return{id:n.id,number:n.number,status:s.status,letters:s.letters,boardState:s.boardState,guesses:s.guesses,hearts:s.hearts,swaps:s.swaps}},na={4:[0,5,10,15],5:[0,6,12,18,24]},ra={4:["0","1","2","3"],5:["0","1","2","3","4"]},aa=(n,i)=>{const s=na[i],o=ra[i];return n.map((a,d)=>({letter:a,index:d,state:s.includes(d)?o[s.indexOf(d)]:"idle",locked:s.includes(d)}))};function oa(n,i){const s=n.keyword.length,{state:o,setState:a}=he(i),{session:d,updateSession:c}=Re({swap:[],selection:null,latestAttempt:0}),{updateLocalStorage:h}=fe({key:V.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{h(o)},[o]);const f=g=>{if(d.selection===g){c({selection:null,swap:[]}),C("bubbleOut");return}if(d.selection===null){c({selection:g,swap:[]}),C("select");return}a(m=>{if(d.selection===null)return m;C("swap");const p=S.cloneDeep(o.letters),y=p[d.selection];return p[d.selection]=p[g],p[g]=y,c({selection:null,swap:[d.selection,g]}),{...m,letters:p,swaps:m.swaps+1}})},x=()=>{const g=n.words.join("");a(m=>{const p=S.cloneDeep(o.letters);p.map((R,I)=>(R.state==="idle"&&R.letter===g[I]&&(R.state=String(Math.floor(I/s)),R.locked=!0),R));const y=S.chunk(p,s).map(R=>R.map(I=>I.letter).join(""));y.forEach((R,I)=>{n.words[I]===R&&R.split("").forEach((de,je)=>{p[I*s+je].state=String(I),p[I*s+je].locked=!0})});const j=p.every(R=>R.locked);C(j?"win":"wrong");const b=j?m.hearts:m.hearts-1,A=y,E=p.map(R=>R.letter);let O=m.status;return j&&(O=N.WIN),b===0&&(O=N.LOSE),c({selection:null,swap:[]}),{...m,guesses:[...m.guesses,A],boardState:[...m.boardState,E],letters:p,hearts:b,status:O}})},v=o.status===N.WIN,t=o.status===N.LOSE,r=v||t;xe({key:V.KEY,isComplete:r});const{showResultModal:l,setShowResultModal:u}=we(r);return{hearts:o.hearts,guesses:o.guesses,letters:o.letters,swaps:o.swaps,selection:d.selection,swap:d.swap,showResultModal:l,setShowResultModal:u,isWin:v,isLose:t,isComplete:r,selectLetter:f,submitGrid:x,keyword:n.keyword,size:s}}function ia({letters:n,onLetterSelection:i,selection:s,swap:o,guesses:a,size:d}){return e.jsx("div",{className:"palavreado-board",style:{gridTemplateColumns:`repeat(${d}, 1fr)`,gridTemplateRows:`repeat(${d}, 1fr)`},children:n.map(({letter:c,locked:h,state:f},x)=>{const v=Math.floor(x/d),t=x%d,r=a.some(l=>l[v][t]===c)&&!h;return e.jsx("button",{type:"button",className:G("palavreado-board__tile",o.includes(x)&&W("zoomIn",{speed:"faster"}),!h&&s!==x&&"palavreado-board__tile--button",s===x&&"palavreado-board__tile--selected",`palavreado-board__tile--${f}`,r&&"palavreado-board__tile--place-guessed"),onClick:()=>h?null:i(x),children:c},`${c}-${x}`)})})}function la({challenge:n,words:i,isWin:s,hearts:o,letters:a,swaps:d,size:c}){const{language:h,dualTranslate:f}=Y(),x=ca({game:f(V.NAME),challenge:n,remainingHearts:o,letters:a,language:h,swaps:d,size:c});return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx(w.Paragraph,{className:"center",children:s?e.jsx(_,{pt:"VocÃª acertou as palavras!",en:"You guessed the words!"}):e.jsx(_,{pt:"VocÃª nÃ£o acertou todas as palavras!",en:"You missed the words!"})}),e.jsx(P,{className:"result-answer",split:e.jsx(Ve,{type:"vertical"}),children:i.map(v=>e.jsx(w.Text,{children:v},v))}),e.jsx(Te,{result:x,rows:c+2}),e.jsx(_e,{})]})}function ca({game:n,challenge:i,remainingHearts:s,letters:o,language:a,swaps:d,size:c}){const h=S.chunk(o,c).map(f=>f.map(x=>{switch(x.state){case"0":return"ðŸŸ¥";case"1":return"ðŸŸ¦";case"2":return"ðŸŸª";case"3":return"ðŸŸ«";case"4":return"ðŸŸ§";default:return"â¬œï¸"}}));return[`${V.EMOJI} ${Ne(a)} ${n} #${i}`,`${Fe(s,Math.max(V.HEARTS,c)," ")} (${d} trocas)`,h.map(f=>f.join(" ").trim()).filter(Boolean).join(`
`),`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function da(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Junto Ã  palavra-chave de ",V.WORD_LENGTH," letras diagonal na grade existem"," ",V.HEARTS," palavras embaralhadas."]}),e.jsxs("li",{children:["VocÃª precisa ordenar as letras para formar as ",V.HEARTS," palavras horizontais."]}),e.jsx("li",{children:"Selecione uma letra e depois uma outra para que elas troquem de lugar."}),e.jsx("li",{children:'Quando vocÃª acha que a grade estÃ¡ certa, aperte "Enviar".'}),e.jsxs("li",{children:["Todas as letras colocadas na posiÃ§Ã£o corretas serÃ£o coloridas da corta da linha. Mas se vocÃª nÃ£o acertas todas, vocÃª perde um ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:["VocÃª tem ",V.HEARTS," ",e.jsx(B,{})," chances. Boa sorte!"]})]}),en:e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Next to the ",V.WORD_LENGTH,"-letter keyword diagonally in the grid are ",V.HEARTS," ","shuffled words."]}),e.jsxs("li",{children:["You need to order the letters to form the ",V.HEARTS," words in the rows."]}),e.jsx("li",{children:"Select a letter and then another so they swap places."}),e.jsx("li",{children:'When you think the grid is correct, press "Submit".'}),e.jsxs("li",{children:["All letters placed in the correct position will be colored in the line color. But if you don't get them all, you lose a ",e.jsx(B,{}),"."]}),e.jsxs("li",{children:["You have ",V.HEARTS," ",e.jsx(B,{})," chances. Good luck!"]})]})})})}function ua({data:n}){const[i]=T.useState(sa(n)),{hearts:s,selection:o,guesses:a,letters:d,showResultModal:c,setShowResultModal:h,isWin:f,isComplete:x,selectLetter:v,submitGrid:t,swap:r,swaps:l,size:u,keyword:g}=oa(n,i);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Qt,{}),localStorageKey:V.KEY,children:["TD ",e.jsx(Z,{children:V.NAME})," #",n.number]}),e.jsxs(F.Content,{children:[e.jsx(ge,{hearts:s,total:Math.max(V.HEARTS,u),openRules:!0,rules:e.jsx(da,{})}),e.jsxs(M,{children:[e.jsxs(w.Text,{strong:!0,className:"palavreado-word",children:[g," ",l>0&&` â†”ï¸ ${l}`]}),e.jsx(ia,{letters:d,onLetterSelection:v,selection:o,swap:r,guesses:a,size:u})]}),e.jsx(M,{children:x?e.jsx(D,{onClick:()=>h(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})}):e.jsx(D,{type:"primary",onClick:t,disabled:x,block:!0,children:e.jsx(_,{pt:"Enviar",en:"Submit"})})}),e.jsx(X,{direction:"vertical",size:"small",children:a.map((m,p)=>e.jsx(P,{split:e.jsx(Ve,{type:"vertical",className:"mx-0"}),size:"small",children:m.map((y,j)=>e.jsx(w.Text,{keyboard:!0,className:"palavreado-word",children:y},`${m}-${p}-${y}-${j}`))},`${m}-${p}`))}),a.length>0&&e.jsx(X,{children:e.jsxs(L,{className:"contained",gap:12,align:"center",children:[e.jsx("div",{className:"palavreado-board__tile palavreado-board__tile--place-guessed palavreado-board__tile--sample",children:"?"}),e.jsx(w.Text,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:["PosiÃ§Ãµes que jÃ¡ foram testadas com a letra especÃ­fica aparecem assim (borda preta pontilhada).",e.jsx("br",{}),"Evite enviar com letras assim, elas continuarÃ£o erradas."]}),en:e.jsxs(e.Fragment,{children:["Positions that have already been tested with a specific letter appear like this (dotted black border).",e.jsx("br",{}),"Avoid submitting with letters like this, they will remain wrong."]})})})]})}),e.jsx(pe,{open:c,onCancel:()=>h(!1),footer:null,children:e.jsx(la,{challenge:n==null?void 0:n.number,isWin:f,hearts:s,words:n.words,letters:d,swaps:l,size:u})})]})]})}function ma(){return e.jsx(ye,{gameName:"palavreado",GameComponent:ua})}const pa={id:"",number:0,played:!1},ha=n=>{const i=me({key:J.KEY,gameId:n.id,defaultValue:S.cloneDeep(pa)});return{id:n.id,number:n.number,played:i.played}};function fa(n){const{translate:i}=Y(),{notification:s}=Ae.useApp();return ds({mutationKey:["daily-save-drawings"],mutationFn:async a=>{var d,c,h,f;return await xt.run({action:gt.SAVE_DRAWING,drawings:a,language:((f=(h=(c=(d=Object.values(a))==null?void 0:d[0])==null?void 0:c.cardId)==null?void 0:h.split("-"))==null?void 0:f[2])??"pt"})},onSuccess:()=>{s.success({message:i("Desenhos salvos com sucesso!","Drawings saved successfully!"),placement:"bottomLeft"}),n()},onError:a=>{s.error({message:i("Vixi, o aplicativo encontrou um erro ao tentar salvar desenhos","Oops, the application failed when trying to save drawings"),description:JSON.stringify(a.message),placement:"bottomLeft"}),console.error(a)}})}function xa(n){const{translate:i}=Y(),{notification:s}=Ae.useApp();return ds({mutationKey:["daily-save-testimonies"],mutationFn:async a=>await xt.run({action:gt.SAVE_TESTIMONIES,answers:a}),onSuccess:()=>{s.success({message:i("Respostas salvas com sucesso!","Answers saved successfully!"),placement:"bottomLeft"}),n()},onError:a=>{s.error({message:i("Vixi, o aplicativo encontrou um erro ao tentar salvar respostas","Oops, the application failed when trying to save answers"),description:JSON.stringify(a.message),placement:"bottomLeft"}),console.error(a)}})}function ga(n,i,s){const{state:o,updateState:a}=he(s),{session:d,setSession:c,updateSession:h}=Re({cards:S.sampleSize(n.cards,J.DRAWINGS),drawings:[],cardIndex:0,screen:"idle"}),{updateLocalStorage:f}=fe({key:J.KEY,gameId:n.id,defaultValue:s});T.useEffect(()=>{f(o)},[o]);const x=d.cards[d.cardIndex],v=()=>h({screen:"playing"}),t=async u=>{if(d.cardIndex<d.cards.length-1)return c(g=>({...g,drawings:[...g.drawings,JSON.stringify(u)],cardIndex:g.cardIndex+1}));d.cardIndex===d.cards.length-1&&(h({screen:"saving"}),await Yt(1e3),l({...d,drawings:Bt([...d.drawings,JSON.stringify(u)])}))},r=fa(()=>{a({played:!0}),h({screen:"idle"})});xe({key:J.KEY,isComplete:o.played});const l=u=>{const g=u.drawings.reduce((m,p,y)=>{if(p.length>50){const j=u.cards[y];m[`${j.id}${Je}${Date.now()}`]={drawing:p,cardId:j.id,level:j.level,playerId:i.id,successRate:0,text:j.text}}return m},{});r.mutate(g)};return{cardNumber:d.cardIndex+1,card:x,isPlaying:d.screen==="playing",isIdle:d.screen==="idle",isSaving:d.screen==="saving"||r.isPending,alreadyPlayed:o.played,onStart:v,onNextCard:t}}const kt=J.DURATION/J.DRAWINGS;function _a({onNextCard:n,maxWidth:i}){const[s,o]=T.useState([]),{timeLeft:a}=ns({duration:kt+2,autoStart:!0,onExpire:()=>{n(s)}});return e.jsxs(L,{className:"full-width",vertical:!0,style:{maxWidth:i},children:[e.jsx(ss,{value:a-1,total:kt,className:"picaco-time-bar"}),a<12&&e.jsx(Xs,{lines:s,className:W("zoomIn",{speed:"faster"}),setLines:o,strokeWidth:"small",style:{transform:`scale(${i/500})`,transformOrigin:"top center"}})]})}function ja(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Contribua com o banco de dados do TD!"}),e.jsx("li",{children:"A cada 10 segundos, vocÃª irÃ¡ ler uma expressÃ£o e desenhar."}),e.jsx("li",{children:"ApÃ³s 6 expressÃµes, ou 1 minuto, seus desenhos serÃ£o salvos no banco de dados."}),e.jsx("li",{children:"Tente fazer o melhor possÃ­vel, evite pornografia, e foque nos detalhes."}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Contribute to TD's database!"}),e.jsx("li",{children:"Every 10 seconds, you will read an expression and draw."}),e.jsx("li",{children:"After 6 expressions or 1 minute, your drawings will be saved in the database"}),e.jsx("li",{children:"Try to do your best possible, avoid NSFW content, and focus on the details."}),e.jsx("li",{children:"Good luck!"})]})})})}function va({data:n,currentUser:i}){const[s]=T.useState(ha(n)),{cardNumber:o,card:a,onNextCard:d,isPlaying:c,isIdle:h,isSaving:f,alreadyPlayed:x,onStart:v}=ga(n,i,s),[t,r]=De(),[l,u]=De(),g=T.useMemo(()=>{const m=r.width-24,p=r.height-u.height-24;return Math.max(Math.min(m,p,500),150)},[r.height,r.width,u.height]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(bt,{}),localStorageKey:J.KEY,children:["TD ",e.jsx(Z,{children:J.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:t,children:[e.jsxs("div",{ref:l,children:[e.jsx(ge,{hearts:0,total:0,openRules:!0,rules:e.jsx(ja,{})}),x&&e.jsxs(K,{className:"info-screen",children:[e.jsx(k,{icon:e.jsx(ls,{})}),e.jsx(_,{pt:"VocÃª jÃ¡ jogou hoje!",en:"You've already played today!"}),e.jsx(_,{pt:"Volte amanhÃ£ para jogar novamente!",en:"Come back tomorrow to play again!"}),e.jsx(Ve,{}),e.jsx(_e,{})]}),!x&&!f&&e.jsx($,{children:e.jsx(cs,{header:c?`#${o}`:"?",color:"gold",className:c?W("tada"):"invisible",children:c?a.text:e.jsx(e.Fragment,{children:"Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore."})},c?a.id:"none")})]}),c&&e.jsx($,{children:e.jsx(_a,{maxWidth:g,onNextCard:d},a.id)}),f&&e.jsxs(K,{className:"info-screen",children:[e.jsx(k,{icon:e.jsx(is,{})}),e.jsx(_,{pt:"Salvando",en:"Saving"})]}),h&&!x&&e.jsx($,{children:e.jsxs($,{vertical:!0,children:[e.jsx(K,{contained:!0,children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:["VocÃª tem ",e.jsx(wt,{children:J.DURATION/J.DRAWINGS})," segundos para fazer cada um dos ",J.DRAWINGS," desenhos.",e.jsx("br",{}),"VocÃª ",e.jsx("strong",{children:"NÃƒO"})," pode usar letras ou nÃºmeros.",e.jsx("br",{}),'O tempo comeÃ§a assim que vocÃª aperta "ComeÃ§ar".']}),en:e.jsxs(e.Fragment,{children:["You have ",e.jsx(wt,{children:J.DURATION/J.DRAWINGS})," seconds to draw each of the ",J.DRAWINGS," drawings.",e.jsx("br",{}),"You ",e.jsx("strong",{children:"CANNOT"})," use letters or numbers.",e.jsx("br",{}),'The time starts as soon as you press "Start".']})})}),e.jsx(D,{type:"primary",size:"large",onClick:v,disabled:x,children:f?e.jsx(_,{pt:"Salvando",en:"Saving"}):e.jsx(_,{pt:"ComeÃ§ar",en:"Start"})})]})})]})]})}function ya(){return e.jsx(ye,{gameName:"artista",GameComponent:va})}const ba={id:"",number:0,hearts:ne.HEARTS,status:N.IN_PROGRESS,hand:[],deck:[],rule1Things:[],rule2Things:[],intersectingThings:[],guesses:[]},Aa=n=>{const i=me({key:ne.KEY,gameId:n.id,defaultValue:S.merge(S.cloneDeep(ba),{hand:n.things.slice(0,4),deck:n.things.slice(4),rule1Things:[{id:n.rule1.thing.id,name:n.rule1.thing.name,rule:1}],rule2Things:[{id:n.rule2.thing.id,name:n.rule2.thing.name,rule:2}],intersectingThings:[{id:n.intersectingThing.id,name:n.intersectingThing.name}]})});return{id:n.id,number:n.number,hearts:i.hearts,status:i.status,hand:i.hand,deck:i.deck,rule1Things:i.rule1Things,rule2Things:i.rule2Things,intersectingThings:i.intersectingThings,guesses:i.guesses}};function wa(n,i){const{message:s}=Ae.useApp(),{translate:o}=Y(),{state:a,setState:d}=he(i),{session:c,updateSession:h}=Re({activeThing:null,activeArea:null}),{updateLocalStorage:f}=fe({key:ne.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{f(a)},[a]);const x=p=>{C("select"),h({activeThing:p})},v=p=>{c.activeThing&&(C("swap"),h({activeArea:p}))},t=()=>{var y;if(!c.activeThing&&c.activeArea===null)return;let p=!1;((y=c.activeThing)==null?void 0:y.rule)===c.activeArea?(p=!0,C("correct"),s.success({content:o("Correto!","Correct!")})):(p=!1,C("wrong"),s.error({content:o("Incorreto!","Incorrect!")})),d(j=>{const b=S.cloneDeep(j);if(c.activeThing&&c.activeArea!==null){b.hand=b.hand.filter(E=>{var O;return E.id!==((O=c.activeThing)==null?void 0:O.id)});const A={thingId:c.activeThing.id,sectionId:c.activeArea,result:c.activeArea};if(c.activeThing.rule===1?b.rule1Things.push(c.activeThing):c.activeThing.rule===2?b.rule2Things.push(c.activeThing):c.activeThing.rule===0&&b.intersectingThings.push(c.activeThing),!p){if(A.result=!1,b.hearts-=1,b.deck.length>0){const E=b.deck.pop();E&&b.hand.push(E)}b.hearts===0&&(C("lose"),b.status=N.LOSE)}b.guesses.push(A),h({activeThing:null,activeArea:null}),b.hand.length===0&&(b.status=N.WIN,C("win"))}return b})},r=a.status===N.WIN,l=a.status===N.LOSE,u=r||l;xe({key:ne.KEY,isComplete:u});const{showResultModal:g,setShowResultModal:m}=we(u);return{hearts:a.hearts,showResultModal:g,setShowResultModal:m,isWin:r,isLose:l,isComplete:u,hand:a.hand,rule1Things:a.rule1Things,rule2Things:a.rule2Things,intersectingThings:a.intersectingThings,guesses:a.guesses,activeThing:c.activeThing,activeArea:c.activeArea,onSelectThing:x,onSelectArea:v,onConfirmPlacement:t}}function Ta({leftCircleChildren:n,rightCircleChildren:i,intersectionChildren:s,...o}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 760 500",...o,children:[e.jsx("path",{fill:"#fbb03b",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M252.78 3.5c-136.42 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.59-247-247-247zm.99 483.07C123.39 486.57 17.7 380.88 17.7 250.5S123.39 14.43 253.77 14.43 489.84 120.12 489.84 250.5 384.15 486.57 253.77 486.57z"}),e.jsx("path",{fill:"#f15a24",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"5",d:"M508.22 3.5c-136.41 0-247 110.59-247 247s110.59 247 247 247 247-110.59 247-247-110.58-247-247-247zm.99 483.07c-130.38 0-236.07-105.69-236.07-236.07S378.84 14.43 509.22 14.43 745.29 120.12 745.29 250.5 639.6 486.57 509.22 486.57z"}),e.jsx("path",{fill:"#eee",d:"M487.34 250.5c0-62.39-24.29-121.04-68.41-165.16a235.9 235.9 0 00-37.43-30.47 235.35 235.35 0 00-37.43 30.47c-44.12 44.11-68.41 102.77-68.41 165.16s24.29 121.04 68.41 165.16a235.9 235.9 0 0037.43 30.47 235.35 235.35 0 0037.43-30.47c44.12-44.11 68.41-102.77 68.41-165.16z"}),e.jsx("path",{fill:"#eee",d:"M258.72 250.5c0-66.64 25.95-129.3 73.08-176.42a253.125 253.125 0 0134.1-28.57c-33.98-18.65-72.29-28.57-112.13-28.57-62.39 0-121.04 24.29-165.16 68.41C44.5 129.46 20.2 188.11 20.2 250.5s24.29 121.04 68.41 165.16c44.11 44.12 102.77 68.41 165.16 68.41 39.84 0 78.15-9.92 112.13-28.57a252.507 252.507 0 01-34.1-28.57c-47.12-47.12-73.08-109.78-73.08-176.42zM674.37 85.34C630.25 41.22 571.6 16.93 509.21 16.93c-40.27 0-78.98 10.14-113.24 29.18 11.74 8.26 22.86 17.6 33.22 27.96 47.12 47.12 73.08 109.78 73.08 176.42s-25.95 129.3-73.08 176.42a252.312 252.312 0 01-33.22 27.96c34.25 19.04 72.96 29.18 113.24 29.18 62.39 0 121.04-24.29 165.16-68.41 44.12-44.11 68.41-102.77 68.41-165.16s-24.29-121.04-68.41-165.16z"}),e.jsx("foreignObject",{x:"30",y:"25",width:"250",height:"450",children:e.jsx("div",{className:"venn-diagram__circle-content-left",children:n})}),e.jsx("foreignObject",{x:"480",y:"25",width:"250",height:"450",children:e.jsx("div",{className:"venn-diagram__circle-content-right",children:i})}),e.jsx("foreignObject",{x:"290",y:"65",width:"182",height:"370",children:e.jsx("div",{className:"venn-diagram__circle-content-intersection",children:s})})]})}function Ze({itemId:n,name:i,width:s=50,className:o,minimize:a}){return e.jsxs(L,{vertical:!0,align:"center",className:G("thing",o),children:[!a&&e.jsx(ee,{id:n,width:Math.max(Math.min(s,100),35),padding:0,className:"thing__sprite"}),e.jsx(w.Text,{code:!0,className:"thing__name",children:i},n)]})}function Me({things:n,width:i}){return e.jsx(e.Fragment,{children:n.map((s,o,a)=>{const d=o===a.length-1;return e.jsx(Ze,{itemId:s.id,name:s.name,width:i*(d?2:1),className:"thing-enlarged",minimize:a.length>3&&!d},s.id)})})}function Ia({activeThing:n,activeArea:i,onSelectArea:s,onConfirmPlacement:o,rule1Things:a,rule2Things:d,intersectingThings:c}){const h={1:e.jsx(_,{pt:"no cÃ­rculo da esquerda",en:"in the left circle?"}),2:e.jsx(_,{pt:"no cÃ­rculo da direita",en:"in the right circle?"}),0:e.jsx(_,{pt:"na interseÃ§Ã£o",en:"in the intersection?"}),null:e.jsx(_,{pt:"",en:""})}[String(i)]??e.jsx(_,{pt:"",en:""}),f={1:a,2:d,0:c,null:[]}[String(i)]??[];return e.jsx(pe,{title:e.jsxs(e.Fragment,{children:[e.jsx(_,{pt:`Tem certeza que quer colocar ${n==null?void 0:n.name} `,en:`Are you sure you want to place ${n==null?void 0:n.name} `}),h]}),open:!0,onCancel:()=>s(null),cancelText:e.jsx(_,{pt:"NÃ£o",en:"No"}),onOk:()=>o(),okText:e.jsx(_,{pt:"Sim",en:"Yes"}),children:e.jsxs(M,{children:[n&&e.jsx(Ze,{itemId:n==null?void 0:n.id,name:n==null?void 0:n.name,width:50}),e.jsx(wn,{}),e.jsx(L,{wrap:"wrap",align:"center",justify:"center",gap:6,className:"diagram-area-sample",children:f.map(x=>e.jsx(Ze,{itemId:x.id,name:x.name,width:50},x.id))})]})})}function Sa({challenge:n,isWin:i,hearts:s,guesses:o,data:a}){const{language:d,dualTranslate:c}=Y(),h=Ea({game:c(ne.NAME),challenge:n,remainingHearts:s,language:d,guesses:o});return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsxs(w.Paragraph,{className:"center",children:["Regra do cÃ­rculo ",e.jsx(k,{icon:e.jsx(Tt,{mainColor:"gold"}),size:"small"}),e.jsx("br",{}),e.jsxs(w.Text,{code:!0,children:[" ",a.rule1.text]})]}),e.jsxs(w.Paragraph,{className:"center",children:["Regra do cÃ­rculo ",e.jsx(k,{icon:e.jsx(Tt,{mainColor:"red"}),size:"small"}),e.jsx("br",{}),e.jsxs(w.Text,{code:!0,children:[" ",a.rule2.text]})]}),e.jsx(Te,{result:h,rows:3}),e.jsx(_e,{})]})}function Ea({game:n,challenge:i,remainingHearts:s,language:o,guesses:a}){const d=a.map(c=>({1:"ðŸŸ¡",2:"ðŸ”´",0:"ðŸŸ ",false:"âœ–ï¸"})[String(c.result)]);return[`${ne.EMOJI} TD ${n} #${i}`,`${Fe(s,ne.HEARTS," ")}`,d.join(" "),`https://www.kavispires.com/tardedivertida/#/${ue(o)}`].join(`
`)}function Na(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Existem dois cÃ­rculos conectados formando um diagrama com uma intercessÃ£o."}),e.jsx("li",{children:'Cada um dos dois cÃ­rculo possui uma regra gramatical secreta que pode ir desde "ComeÃ§a com B" ou "Tem trÃªs sÃ­labas" ou "Tem mais consoantes que vogais", etc.'}),e.jsx("li",{children:'Para comeÃ§ar, existe uma "coisa" em cada uma das Ã¡reas do diagrama. A coisa na Ã¡rea central obedece a regra do cÃ­rculo amarelo e a do vermelho, enquanto a coisa em sÃ³ um lado obedece somente a regra daquele cÃ­rculo. Teoria de conjuntos bÃ¡sica! MatemÃ¡tica 5a sÃ©rie.'}),e.jsx("li",{children:"O objetivo Ã© vocÃª colocar 4 coisas, uma a uma, na Ã¡rea correta do diagrama."}),e.jsx("li",{children:"Se vocÃª colocar uma coisa na Ã¡rea errada, o jogo vai colocar a coisa na Ã¡rea correta, vocÃª perde uma vida, e ganha uma coisa para posicionar."}),e.jsx("li",{children:'Dica: o tÃ­tulo do jogo Ã© uma pista sobre a regra dos cÃ­rculos. "GramÃ¡tica" pode ser sobre o nÃºmero de sÃ­labas ou sÃ­laba tÃ´nica, "Contagem" sobre quantidade de letras. "InclusÃ£o" sobre se tem uma letra especÃ­fica, etc...'}),e.jsxs("li",{children:["VocÃª tem ",ne.HEARTS," ",e.jsx(B,{})," chances. Boa sorte!"]})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"There are two connected circles forming a diagram with an intersection."}),e.jsx("li",{children:'Each of the two circles has a secret grammar rule that can range from "Starts with B" or "Has three syllables" or "Has more consonants than vowels"'}),e.jsx("li",{children:'To start, there is a "thing" in each of the diagram areas. The thing in the central area obeys the rule of the yellow circle and the red one, while the thing on just one side obeys only the rule of that circle. Basic set theory! 5th grade math.'}),e.jsx("li",{children:"The goal is for you to place 4 things, one by one, in the correct area of the diagram."}),e.jsx("li",{children:"If you place a thing in the wrong area, the game will place the thing in the correct area, you lose a heart, and gain a thing to position."}),e.jsxs("li",{children:["You have ",ne.HEARTS," ",e.jsx(B,{})," chances. Good luck!"]})]})})})}function Ca(){const[n,i]=Hs(!1);return e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"rules-hints",children:e.jsx(D,{onClick:()=>i(!0),icon:e.jsx(an,{}),ghost:!0,children:e.jsx(_,{pt:"Entenda as regras gramaticais",en:"Understand the grammar rules"})})}),e.jsxs(pe,{title:e.jsx(_,{pt:"Regras gramaticais",en:"Grammar rules"}),open:n,footer:null,onCancel:i,children:[e.jsxs(w.Paragraph,{children:["O tÃ­tulo do jogo diÃ¡rio contÃ©m dicas sobres as regras gramaticais secretas dos cÃ­rculos em forma de categorias.",e.jsx("br",{}),"As estrelas Ã© a classificaÃ§Ã£o do nÃ­vel de dificuldade das regras (1-5)."]}),e.jsx(Se,{category:"ComparaÃ§Ã£o",hints:["Quantidade de vogais vs consoantes ou posiÃ§Ã£o"]}),e.jsx(Se,{category:"Contagem",hints:["ContÃ©m um nÃºmero especÃ­fico de letras, vogais, consoantes, ou sÃ­labas"]}),e.jsx(Se,{category:"GramÃ¡tica",hints:["SÃ­laba tÃ´nica, origem, gÃªnero"]}),e.jsx(Se,{category:"InclusÃ£o",hints:["ContÃ©m uma ou mais letras especÃ­ficas"]}),e.jsx(Se,{category:"InicializaÃ§Ã£o",hints:["ComeÃ§a com uma letra (ou letras) especÃ­fica"]}),e.jsx(Se,{category:"RepetiÃ§Ã£o",hints:["ContÃ©m letras repetidas ou repetidas de maneira especÃ­fica"]}),e.jsx(Se,{category:"SequÃªncia",hints:["ContÃ©m uma sequÃªncia de letras especÃ­fica"]}),e.jsx(Se,{category:"TerminaÃ§Ã£o",hints:["Termina com uma letra (ou letras) especÃ­fica"]})]})]})}function Se({category:n,hints:i}){return e.jsxs(e.Fragment,{children:[e.jsxs(w.Paragraph,{children:[e.jsxs(w.Text,{strong:!0,children:[n,": "]}),i.join(", "),"."]}),e.jsx("ul",{})]})}function Oa({data:n}){const[i]=T.useState(Aa(n)),{hearts:s,showResultModal:o,setShowResultModal:a,isWin:d,isComplete:c,hand:h,rule1Things:f,rule2Things:x,intersectingThings:v,activeThing:t,activeArea:r,onSelectThing:l,onSelectArea:u,onConfirmPlacement:g,guesses:m}=wa(n,i),[p,y]=De(),j=T.useMemo(()=>{const b=y.width/6-16;return Math.min(Math.max(b,48),96)},[y.width]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Zt,{}),localStorageKey:ne.KEY,children:[e.jsx(Z,{children:ne.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:p,children:[e.jsx(ge,{hearts:s,total:ne.HEARTS,openRules:!0,rules:e.jsx(Na,{})}),e.jsxs(M,{children:[e.jsx(w.Text,{strong:!0,className:"teoria-de-conjuntos-title",children:n.title}),e.jsx(qt,{title:e.jsx(_,{pt:"Dificuldade",en:"Difficulty"}),children:e.jsx(on,{disabled:!0,value:n.level,count:n.level})})]}),e.jsx(M,{children:e.jsx(Ta,{width:Math.min(y.width-16,600),leftCircleChildren:c?e.jsx(Me,{things:f,width:j}):e.jsx(re,{onClick:()=>u(1),disabled:c,hoverType:"none",children:e.jsx(Me,{things:f,width:j})}),rightCircleChildren:c?e.jsx(Me,{things:x,width:j}):e.jsx(re,{onClick:()=>u(2),disabled:c,hoverType:"none",children:e.jsx(Me,{things:x,width:j})}),intersectionChildren:c?e.jsx(Me,{things:v,width:j}):e.jsx(re,{onClick:()=>u(0),disabled:c,hoverType:"none",children:e.jsx(Me,{things:v,width:j})})})}),c?e.jsx(X,{children:e.jsx(_,{pt:"VocÃª jÃ¡ completou o desafio!",en:"You have already completed the challenge!"})}):e.jsx(X,{children:e.jsx(_,{pt:"Selecione uma coisa e coloque na Ã¡rea correta:",en:"Select a thing and place it in the correct area:"})}),c&&e.jsx(M,{children:e.jsx(D,{onClick:()=>a(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),e.jsx(M,{className:"space-center",direction:"horizontal",children:h.map(b=>e.jsx(re,{className:G("thing-button",W("heartBeat")),activeClass:"thing-button__active",onClick:()=>l(b),active:b.id===(t==null?void 0:t.id),disabled:c,hoverType:"none",children:e.jsx(Ze,{itemId:b.id,name:b.name,width:j})},b.id))}),e.jsx(Ca,{}),t&&r!==null&&e.jsx(Ia,{activeThing:t,activeArea:r,onSelectArea:u,onConfirmPlacement:g,rule1Things:f,rule2Things:x,intersectingThings:v}),e.jsx(pe,{open:o,onCancel:()=>a(!1),footer:null,children:e.jsx(Sa,{challenge:n==null?void 0:n.number,isWin:d,hearts:s,guesses:m,data:n})})]})]})}function Ra(){return e.jsx(ye,{gameName:"teoria-de-conjuntos",GameComponent:Oa})}const ka={id:"",guesses:[],number:0,hearts:oe.HEARTS,status:N.IN_PROGRESS},Ma=n=>{const i=me({key:oe.KEY,gameId:n.id,defaultValue:S.cloneDeep(ka)});return{id:n.id,number:n.number,status:i.status,hearts:i.hearts,guesses:i.guesses}};function Da(n,i){const{message:s}=Ae.useApp(),{translate:o}=Y(),{state:a,updateState:d}=he(i),{session:c,setSession:h,updateSession:f}=Re({selection:[null,null,null,null],slotIndex:null,latestAttempt:null}),{updateLocalStorage:x}=fe({key:oe.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{x(a)},[a]);const v=j=>{f({slotIndex:j})},t=j=>{if(c.selection.includes(j))f({selection:c.selection.map(b=>b===j?null:b)}),C("bubbleOut");else{const b=c.slotIndex??c.selection.indexOf(null);b!==-1&&(h(A=>{const E=[...c.selection];return E[b]=j,{...A,selection:E,slotIndex:null}}),C("bubbleIn"))}},r=()=>{const j=c.selection.join("-");if(a.guesses.includes(j))return s.warning({content:o("VocÃª jÃ¡ tentou essa combinaÃ§Ã£o. Tente outra!","You already tried this combination. Try another one!"),duration:5}),C("wrong"),f({latestAttempt:Date.now()});const b=n.solution===j;b||s.warning({content:o("CombinaÃ§Ã£o incorreta. Tente novamente!","Incorrect combination. Try again!"),duration:3});let A=a.status;const E=b?a.hearts:a.hearts-1;b?(C("alienYay"),A=N.WIN):C("alienBoo"),E===0&&(A=N.LOSE),d({guesses:[...a.guesses,j],hearts:E,status:A}),f({latestAttempt:Date.now()})},l=a.status===N.WIN,u=a.status===N.LOSE,g=l||u;xe({key:oe.KEY,isComplete:g});const{showResultModal:m,setShowResultModal:p}=we(l||u||g),y=c.selection.filter(Boolean).length===n.requests.length;return{hearts:a.hearts,guesses:a.guesses,selection:c.selection,latestAttempt:c.latestAttempt,slotIndex:c.slotIndex,showResultModal:m,setShowResultModal:p,isWin:l,isLose:u,isComplete:g,onSlotClick:v,onItemClick:t,submitGuess:r,isReady:y}}function La({guesses:n,attributes:i,requests:s,challenge:o,win:a,solution:d,width:c}){const{language:h,dualTranslate:f}=Y(),x=T.useMemo(()=>Pa({game:f(oe.NAME),challenge:o,guesses:n,solution:d,language:h}),[o,f,n,h,d]);return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:a?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx(w.Paragraph,{className:"center",children:a?e.jsx(_,{pt:"O alienÃ­gena abduziu todos os itens!",en:"The alien abducted all items!"}):e.jsx(_,{pt:"O alienÃ­gena vai destruir a Terra porque vocÃª nÃ£o entregou as coisas certas!",en:"The alien will destroy Earth because you didn't deliver the right items!"})}),e.jsx(M,{children:e.jsx(L,{className:"alien-requests",gap:8,children:s.map((v,t)=>e.jsx(ke.div,{...Le("fadeIn",{delay:t*.2}),children:e.jsx(ee,{id:v.itemId,width:c,padding:0,className:"transparent"})},v.itemId))})}),e.jsx(P,{direction:"vertical",children:i.map(v=>e.jsxs(L,{gap:6,children:[e.jsx(Ye,{id:v.spriteId,width:c}),e.jsxs(L,{vertical:!0,children:[e.jsx(w.Text,{strong:!0,children:v.name}),e.jsx(w.Text,{italic:!0,children:v.description})]})]},v.id))}),e.jsx(Te,{result:x,rows:3}),e.jsx(_e,{})]})}function Pa({game:n,challenge:i,guesses:s,solution:o,language:a}){const d=o.split("-"),c=["ðŸŸ¤","ðŸŸ¡","ðŸ”µ","ðŸŸ£"],h=s.map(f=>f.split("-").map((v,t)=>v===d[t]?c[t]:d.includes(v)?"âŒ":"ðŸ‘½").join(""));return[`${oe.EMOJI} ${Ne(a)} ${n} #${i}`,...h,`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function $a(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"O alienÃ­gena precisa de sua ajuda para abduzir 4 coisas, porÃ©m ele nÃ£o fala a lÃ­ngua dos terrÃ¡queos."}),e.jsx("li",{children:"O alienÃ­gena se comunica atravÃ©s de sÃ­mbolos que representam um atributo em comum entre os exemplos dados."}),e.jsx("li",{children:"Por exemplo, o que uma bola, uma melancia e uma pizza tem em comum? Todos sÃ£o redondos! SerÃ¡ que o alienÃ­gena quer dizer que aquele sÃ­mbolo significa redondo?"}),e.jsx("li",{children:"VocÃª deve entregar as 4 coisas na ordem correta de uma vez. O alienÃ­gena apenas te diz se todas estÃ£o corretas ou nÃ£o."}),e.jsxs("li",{children:["Cada tentativa errada remove um coraÃ§Ã£o e vocÃª tem apenas ",oe.HEARTS," ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"The alien needs to abduct some things, but it can't speak our language."}),e.jsx("li",{children:"The alien communicates through symbols that represent a common attribute between the given examples."}),e.jsx("li",{children:"For example, what does a ball, a watermelon, and a pizza have in common? They're all round! Does the alien mean that symbol represents round?"}),e.jsx("li",{children:"You must deliver 4 things in the correct order and press send. The alien only tells you if all are correct or not."}),e.jsxs("li",{children:["Each wrong attempt removes a heart and you only have 3 ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Good luck!"})]})})})}function Ga({data:n}){const[i]=T.useState(Ma(n)),{hearts:s,selection:o,showResultModal:a,setShowResultModal:d,isWin:c,isLose:h,isComplete:f,onItemClick:x,onSlotClick:v,slotIndex:t,isReady:r,submitGuess:l,latestAttempt:u,guesses:g}=Da(n,i),m=Be(7,{margin:64,maxWidth:75,minWidth:55}),p=u&&!f,y=T.useMemo(()=>g.map(j=>j.split("-")),[g]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Ut,{}),localStorageKey:oe.KEY,children:["TD ",e.jsx(Z,{children:oe.NAME})," #",n.number]}),e.jsxs(F.Content,{children:[e.jsx(ge,{hearts:s,total:oe.HEARTS,openRules:!f||s===oe.HEARTS,rules:e.jsx($a,{})}),e.jsxs(M,{children:[e.jsx(w.Text,{strong:!0,children:e.jsx(_,{pt:"Atributos",en:"Attributes"})}),e.jsx(P,{direction:"vertical",className:"alien-attributes",children:n.attributes.map(j=>e.jsxs(L,{className:"alien-attributes__attribute",gap:8,children:[e.jsx(Ye,{id:j.spriteId,width:m,className:"alien-attributes__sign"}),e.jsx(ln,{}),e.jsx(L,{className:"alien-attributes__items",children:j.itemsIds.map(b=>e.jsx(ee,{id:b,width:m-12,className:"alien-attributes__item",padding:0},b))})]},j.id))})]}),e.jsxs(M,{className:p?W("shakeX"):"",children:[e.jsx(w.Text,{strong:!0,children:e.jsx(_,{pt:"Pedidos",en:"Requests"})}),e.jsx(L,{className:"alien-requests",gap:8,children:n.requests.map((j,b)=>{const A=o[b];return e.jsxs(L,{vertical:!0,className:"alien-requests__request",align:"center",justify:"flex-start",children:[e.jsx(be,{className:"mb-2",children:b+1}),e.jsxs(L,{vertical:!0,className:"alien-requests__attributes",align:"center",children:[e.jsx(Ye,{id:j.spritesIds[2],width:m-12,className:"alien-requests__sign"}),e.jsx(Ye,{id:j.spritesIds[1],width:m-12,className:"alien-requests__sign"}),e.jsx(Ye,{id:j.spritesIds[0],width:m-12,className:"alien-requests__sign"})]}),A?e.jsx(re,{onClick:()=>x(A),className:"mt-1",disabled:f,children:e.jsx(ee,{id:A,width:h?m/2:m,padding:0})}):e.jsx(re,{onClick:()=>v(b),className:"mt-3",disabled:f,active:t===b,activeClass:"alien-request__slot--active",children:e.jsx(be,{shape:"square",size:"large",children:"?"})}),f&&h&&e.jsx(ee,{id:j.itemId,width:m,padding:0,className:G("alien-request__answer",W("zoomIn"))})]},j.itemId)})}),r&&!f&&e.jsx(M,{children:e.jsx(D,{type:"primary",onClick:l,children:e.jsx(_,{pt:"Enviar",en:"Submit"})})})]},u),f&&e.jsx(P,{className:"results-container",direction:"vertical",align:"center",size:"large",children:e.jsx(D,{onClick:()=>d(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),e.jsxs(M,{children:[e.jsx(w.Text,{strong:!0,children:e.jsx(_,{pt:"Entregue as coisas corretas:",en:"Deliver the correct things:"})}),e.jsx($,{wrap:!0,children:n.itemsIds.map(j=>e.jsx(re,{onClick:()=>x(j),disabled:f||r||o.includes(j),className:"alien-items__item-button",children:e.jsx(ee,{id:j,width:m,padding:0})},j))})]}),y.length>0&&e.jsxs(M,{children:[e.jsx(w.Text,{strong:!0,children:e.jsx(_,{pt:"Tentativas anteriores",en:"Previous Guesses:"})}),e.jsx(P,{direction:"vertical",className:"previous-guesses",children:y.map(j=>e.jsx(P,{children:j.map(b=>e.jsx(ee,{id:b,width:Math.max(m/2,40),padding:0,className:"alien-requests__previous-item"},b))},String(j)))})]}),e.jsx(pe,{open:a,onCancel:()=>d(!1),footer:null,children:e.jsx(La,{challenge:n.number,win:c,guesses:g,attributes:n.attributes,requests:n.requests,solution:n.solution,width:m*.65})})]})]})}function Fa(){return e.jsx(ye,{gameName:"comunicacao-alienigena",GameComponent:Ga})}const Ha=[{id:"2025-00-00",setId:"unicÃ³rnio-tecnologia-musicalidade",number:0,type:"portais-magicos",corridors:[{passcode:"unicÃ³rnio",imagesIds:["td-d9-215","td-d6-120","td-d8-96"],words:["uni","nÃ³s","rio","cor","cÃ³u","uro","noi","irm","cÃ£o"]},{passcode:"tecnologia",imagesIds:["td-d4-134","td-d10-105","td-d3-145"],words:["tÃ£o","eco","cÃ©u","noÃ©","log","lei","toi","gÃ¡s","iaÃ­","can"]},{passcode:"musicalidade",imagesIds:["td-d9-241","td-d6-202","td-d6-185"],words:["mÃ£o","uso","sim","ali","cad","ida","luz","dia","dor","sua","ido","eco"]}]},{id:"2025-00-01",setId:"elefante-velocidade-tempestade",number:0,type:"portais-magicos",corridors:[{passcode:"elefante",imagesIds:["td-d5-10","td-d8-67","td-d5-99"],words:["ler","mol","ele","fio","tal","zen","top","seu"]},{passcode:"velocidade",imagesIds:["td-d9-57","td-d6-19","td-d7-54"],words:["ovo","era","alÃ´","noz","cal","rim","daÃ­","uva","ida","ave"]},{passcode:"tempestade",imagesIds:["td-d5-241","td-d4-84"," td-d2-103"],words:["kit","mel","bom","pop","sem","sul","tal","era","dar","ode"]}]},{id:"2025-00-02",setId:"caveiras-insolaÃ§Ã£o-eletrizante",number:0,type:"portais-magicos",corridors:[{passcode:"caveiras",imagesIds:["td-d10-193","td-d8-228","td-d3-114"],words:["chÃ¡","daÃ­","via","vez","piÃ¡","rÃ©s","oba","rÃ©s"]},{passcode:"insolaÃ§Ã£o",imagesIds:["td-d2-190","td-d6-206","td-d10-208"],words:["rio","Ã­on","seu","vÃ´o","mal","aba","aÃ§o","cÃ£o","noz"]},{passcode:"eletrizante",imagesIds:["td-d10-192","td-d4-243","td-d8-134"],words:["gel","mol","ave","toa","rir","tio","paz","aro","nem","tal","exu"]}]}],qa=()=>{const{language:n}=Y(),i=ue(n);return Lt({queryKey:["portais-magicos-demo"],queryFn:async()=>(console.count(`Fetching demo ${i}...`),await Yt(1250),S.sample(Ha)),enabled:n==="pt",retry:!1})},Ya={id:"",number:0,status:N.IN_PROGRESS,hearts:se.HEARTS,currentCorridorIndex:0,guesses:[[],[],[]],currentCorridorIndexes:[]},Ba=n=>{const i=me({key:se.KEY,gameId:n.id,defaultValue:S.cloneDeep(Ya)});return{id:n.id,number:n.number,status:i.status,hearts:i.hearts,currentCorridorIndex:i.currentCorridorIndex,guesses:i.guesses,currentCorridorIndexes:i.currentCorridorIndexes.length>0?i.currentCorridorIndexes:Ns(n.corridors[i.currentCorridorIndex].passcode.length).fill(1)}};function Va(n,i){const{message:s}=Ae.useApp(),{translate:o}=Y(),{state:a,setState:d,updateState:c}=he(i),{updateLocalStorage:h}=fe({key:se.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{h(a)},[a]),T.useEffect(()=>{c({currentCorridorIndexes:n.corridors[a.currentCorridorIndex].words.map(()=>1)})},[a.currentCorridorIndex]);const f=g=>{d(()=>{const m=S.cloneDeep(a),p=n.corridors[m.currentCorridorIndex].words[0].length,y=m.currentCorridorIndexes[g]>=p-1?0:m.currentCorridorIndexes[g]+1;return m.currentCorridorIndexes[g]=y,m})},x=()=>{d(g=>{const m=S.cloneDeep(g),p=n.corridors[m.currentCorridorIndex].words[0].length,y=n.corridors[m.currentCorridorIndex].passcode,j=m.currentCorridorIndexes.map((A,E)=>n.corridors[m.currentCorridorIndex].words[E][p-1-A]).join("");m.guesses[m.currentCorridorIndex].push(j);const b=j===y;return b?(m.currentCorridorIndex+=1,s.success({content:o(`VocÃª acertou: ${y.toUpperCase()}!`,`Correct: ${y}`),duration:3})):(m.hearts-=1,s.warning({content:o("Palavra-chave incorreta. Tente novamente!","Incorrect passcode. Try again!"),duration:3})),b&&m.currentCorridorIndex===n.corridors.length&&(m.status=N.WIN,m.currentCorridorIndex=2),m.hearts<=0&&(m.status=N.LOSE),m})},v=a.status===N.WIN,t=a.status===N.LOSE,r=v||t;xe({key:se.KEY,isComplete:r});const{showResultModal:l,setShowResultModal:u}=we(v||t||r);return{hearts:a.hearts,guesses:a.guesses,currentCorridorIndex:a.currentCorridorIndex,currentCorridor:n.corridors[a.currentCorridorIndex],currentCorridorIndexes:a.currentCorridorIndexes,showResultModal:l,setShowResultModal:u,isWin:v,isLose:t,isComplete:r,onSlideWordPosition:f,onSubmitPasscode:x}}function Wa({challenge:n,win:i,corridors:s,guesses:o,currentCorridorIndex:a}){const{language:d,dualTranslate:c}=Y(),h=T.useMemo(()=>Ua({game:c(se.NAME),challenge:n,guesses:o,win:i,language:d}),[n,c,o,d,i]);return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx($,{vertical:!0,children:s.map(({passcode:f},x,v)=>{var t;return e.jsxs(L,{justify:"center",className:"result-passcode",children:[e.jsx(w.Text,{keyboard:!0,children:f})," ",a>x&&((t=o==null?void 0:o[x])!=null&&t.length)||v.length-1===x&&i?"ðŸ”¶":"ðŸ’¥"]},f)})}),e.jsx(Te,{result:h,rows:4}),e.jsx(_e,{})]})}function Ua({game:n,challenge:i,guesses:s,win:o,language:a}){const d=s.filter(h=>h.length>0).length-1,c=s==null?void 0:s.map((h,f)=>{const x=d===f,v=Math.max((h==null?void 0:h.length)??0,0),t=Math.max(v-(x?o?1:0:1),0),r=Array(t).fill(0).map(()=>"ðŸ©¶").join(""),l=v-t>0?"ðŸ”¶":"ðŸ’¥";return[r,l].join("")}).join(`
`);return[`${se.EMOJI} ${Ne(a)} ${n} #${i}`,c,`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function Ka(){return e.jsxs(e.Fragment,{children:[e.jsx(Cr,{}),e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"VocÃª estÃ¡ diante de 3 portais com imagens fantÃ¡sticas."}),e.jsx("li",{children:"Organize as palavras de 3 letras atÃ© formar a palavra-chave que corresponde Ã  similaridade entre os portais."}),e.jsx("li",{children:"Quando vocÃª acerta uma letra, ela se trava em verde atÃ© vocÃª acertar a palavra-chave."}),e.jsx("li",{children:"VocÃª tem que passar por 3 corredores de portas."}),e.jsxs("li",{children:["Cada tentativa errada remove um coraÃ§Ã£o e vocÃª tem apenas ",se.HEARTS," ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"?"}),e.jsx("li",{children:"?"})]})})})]})}function za({passcode:n,latestGuess:i="",words:s,onSlideWordPosition:o,currentCorridorIndexes:a,disabled:d}){const c=s[0].length;return e.jsx("div",{className:"passcode",style:{gridTemplateColumns:`repeat(${s.length}, 1fr)`},children:s.map((h,f)=>{const x=n[f]===i[f];return e.jsxs(ke.button,{type:"button",className:G("passcode-word-container"),onClick:()=>o(f),disabled:x||d,...Le("fadeIn",{delay:f*.1}),children:[e.jsx("div",{className:"passcode-letter-outline"}),e.jsx("div",{className:G("passcode-word",`passcode-word--pos-${a[f]}`),children:h.split("").map((v,t)=>e.jsx("span",{className:G("passcode-letter",x&&c-1-a[f]===t&&"passcode-letter--correct"),children:v},`${v}-${t}`))})]},h)})})}function Mt({number:n,imagesIds:i,width:s,passcode:o}){return e.jsxs(e.Fragment,{children:[o?e.jsx(L,{justify:"center",gap:6,children:e.jsx(w.Text,{keyboard:!0,children:o})}):e.jsxs(L,{justify:"center",gap:6,children:[e.jsx(it,{number:n,corridorNumber:1}),e.jsx(it,{number:n,corridorNumber:2}),e.jsx(it,{number:n,corridorNumber:3})]}),e.jsx(Cs.PreviewGroup,{children:e.jsx($,{className:"corridor",children:i.map((a,d)=>e.jsx(cn,{width:s,children:e.jsx(ke.div,{...Le("zoomIn",{delay:d*.1,speed:"fast"}),children:e.jsx(dn,{id:a,cardWidth:150})})},a))})})]})}function it({number:n,corridorNumber:i}){return e.jsx(be,{style:i===n?{backgroundColor:"gold",color:"black"}:void 0,size:"small",children:i})}function Qa({data:n}){const[i]=T.useState(Ba(n)),{hearts:s,showResultModal:o,setShowResultModal:a,isWin:d,isLose:c,isComplete:h,currentCorridorIndex:f,currentCorridorIndexes:x,currentCorridor:v,guesses:t,onSlideWordPosition:r,onSubmitPasscode:l}=Va(n,i),[u,g]=st(3,{margin:24,gap:12,maxWidth:300,minWidth:55}),m=t[f][t[f].length-1],p=T.useMemo(()=>{const y=n.corridors[f].words[0].length;return x.map((j,b)=>n.corridors[f].words[b][y-1-j]).join("")},[f,x]);return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Jt,{}),localStorageKey:se.KEY,children:["TD ",e.jsx(Z,{children:se.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:g,children:[e.jsx(ge,{hearts:s,total:se.HEARTS,openRules:!h||s===se.HEARTS,rules:e.jsx(Ka,{})}),v&&!h&&e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx(Mt,{number:f+1,imagesIds:v.imagesIds,width:u})},`doors-${v==null?void 0:v.passcode}`),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{en:"Arrange the words vertically to form the passcode",pt:"Organize as palavras verticalmente para formar a palavra-chave"})})}),e.jsx(M,{children:e.jsx(za,{passcode:v.passcode,latestGuess:m,words:v.words,currentCorridorIndexes:x,onSlideWordPosition:r,disabled:c})},`passcode-${v==null?void 0:v.passcode}`),e.jsx(M,{children:e.jsx(D,{type:"primary",icon:e.jsx(Os,{}),onClick:l,disabled:p===m||c,className:"mt-4",children:e.jsx(_,{pt:"Enviar palavra-chave",en:"Send passcode"})})})]}),h&&n.corridors.map((y,j)=>e.jsx(M,{children:e.jsx(Mt,{number:j+1,imagesIds:y.imagesIds,width:u*.75,passcode:y.passcode})},y.passcode)),h&&e.jsx(P,{className:"results-container",direction:"vertical",align:"center",size:"large",children:e.jsx(D,{onClick:()=>a(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}),e.jsx(pe,{open:o,onCancel:()=>a(!1),footer:null,children:e.jsx(Wa,{challenge:n.number,win:d,corridors:n.corridors,guesses:t,currentCorridorIndex:f})})]})]})}function Ja(){return e.jsx(Mn,{GameComponent:Qa,useDemoHook:qa,lsKey:se.KEY})}const Xa={id:"",number:0,status:N.IN_PROGRESS,hearts:le.HEARTS,matches:[],guesses:[],grid:[],completeSets:[]},Za=n=>{const i=me({key:le.KEY,gameId:n.id,defaultValue:S.cloneDeep(Xa)}),s=i.grid.length===0&&i.matches.length===0;return{id:n.id,number:n.number,status:i.status,hearts:i.hearts,matches:i.matches,guesses:i.guesses,grid:s?n.grid:i.grid,completeSets:i.completeSets}},Dt=n=>S.orderBy(n,i=>Number(i)).join("-");function eo(n,i){const{message:s}=Ae.useApp(),{translate:o}=Y(),{state:a,setState:d,updateState:c}=he(i),{session:h,setSession:f,updateSession:x}=Re({selection:[],latestAttempt:0}),{updateLocalStorage:v}=fe({key:le.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{v(a)},[a]);const t=b=>{if(a.status===N.IN_PROGRESS){if(!h.selection.includes(b)&&h.selection.length===4){s.info(o("VocÃª sÃ´ pode selecionar 4 de cada vez","You can only select 4 at a time"));return}f(A=>{const E=S.cloneDeep(A);return E.selection.indexOf(b)>-1?(C("bubbleIn"),E.selection=E.selection.filter(R=>R!==b)):(C("bubbleOut"),E.selection.push(b)),E})}},r=()=>{x({selection:[]}),C("bubbleOut")},l=()=>{c({grid:S.shuffle(a.grid)}),C("shuffle")},u=()=>{const b=h.selection.join("-");if(a.guesses.includes(b)){s.info(o("VocÃª jÃ¡ tentou essa combinaÃ§Ã£o","You already tried this combination"));return}const A=Dt(h.selection),E=n.sets.find(O=>Dt(O.itemsIds)===A);d(O=>{const R=S.cloneDeep(O),I=[...R.guesses,b],de=E?S.difference(R.grid,h.selection):R.grid,je=E?[...R.matches,E]:R.matches,z=E?R.hearts:R.hearts-1;let U=z<=0?N.LOSE:R.status;return U=je.length===n.sets.length?N.WIN:U,U===N.WIN&&C("win"),U===N.LOSE&&C("lose"),{...R,guesses:I,grid:de,matches:je,hearts:z,status:U}}),E&&a.status!==N.WIN?(C("correct"),x({selection:[]})):(C("wrong"),x({latestAttempt:Date.now()}))},g=a.status===N.WIN,m=a.status===N.LOSE,p=g||m;xe({key:le.KEY,isComplete:p});const{showResultModal:y,setShowResultModal:j}=we(g||m||p);return{hearts:a.hearts,guesses:a.guesses,grid:a.grid,matches:a.matches,selection:h.selection,latestAttempt:h.latestAttempt,showResultModal:y,setShowResultModal:j,isWin:g,isLose:m,isComplete:p,onSelectItem:t,onDeselectAll:r,onShuffle:l,onSubmit:u}}function to({challenge:n,win:i,sets:s,guesses:o}){const{language:a,dualTranslate:d}=Y(),c=T.useMemo(()=>so({game:d(le.NAME),challenge:n,sets:s,guesses:o,language:a}),[n,d,o,a,i,s]);return e.jsxs($,{vertical:!0,children:[e.jsx(w.Title,{level:2,className:"center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(ve,{})})," ",e.jsx(_,{pt:"ParabÃ©ns!",en:"Congratulations!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Ce,{})})," ",e.jsx(_,{pt:"Que pena!",en:"Too bad!"})]})}),e.jsx($,{vertical:!0,children:s.map(h=>e.jsx("div",{className:G("set-result-title",`set-match--set-${h.level}`),children:h.title},h.id))}),e.jsx(Te,{result:c,rows:5}),e.jsx(_e,{})]})}function so({game:n,challenge:i,guesses:s,sets:o,language:a}){const d=["ðŸŸ©","ðŸŸ¨","ðŸŸ§","ðŸŸª"],c=o.reduce((f,x)=>(x.itemsIds.forEach(v=>{f[v]=d[x.level]}),f),{}),h=s.map(f=>f.split("-").map(t=>c[t]||"â“").join(" "));return[`${le.EMOJI} ${Ne(a)} ${n} #${i}`,...h,`https://www.kavispires.com/tardedivertida/#/${ue(a)}`].join(`
`)}function no(){return e.jsxs(e.Fragment,{children:[e.jsx(js,{}),e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"As coisas na grade foram secretamente agrupadas em grupos de quatro com temas em comum."}),e.jsxs("li",{children:["Forme um grupo de quatro coisas que vocÃª acha que estÃ£o relacionadas e clique em"," ",e.jsx("strong",{children:"Enviar"}),"."]}),e.jsx("li",{children:"Tente adivinhar os quatro grupos um a um."}),e.jsxs("li",{children:["Cada tentativa errada remove um coraÃ§Ã£o e vocÃª tem apenas ",le.HEARTS," ",e.jsx(B,{}),"."]}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"?"}),e.jsx("li",{children:"?"})]})})})]})}function ro({data:n}){const[i]=T.useState(Za(n)),{hearts:s,showResultModal:o,setShowResultModal:a,isWin:d,isComplete:c,grid:h,matches:f,guesses:x,selection:v,onSelectItem:t,onDeselectAll:r,onShuffle:l,onSubmit:u,latestAttempt:g}=eo(n,i),[m,p]=st(4,{margin:48,gap:12,maxWidth:96,minWidth:55}),y=g&&!c&&x.length>0;return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(Xt,{}),localStorageKey:le.KEY,children:["TD ",e.jsx(Z,{children:le.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:p,children:[e.jsx(ge,{hearts:s,total:le.HEARTS,openRules:!c||s===le.HEARTS,rules:e.jsx(no,{})}),e.jsx(X,{children:e.jsx(K,{contained:!0,noMargin:!0,children:e.jsx(_,{pt:"FaÃ§a quatro grupos de quatro",en:"Connect four groups of four"})})}),e.jsxs(M,{children:[f.map(j=>e.jsxs("div",{className:G("set-match",`set-match--set-${j.level}`),children:[e.jsx("div",{className:"set-title",children:j.title}),e.jsx("div",{className:G("grid"),children:j.itemsIds.map(b=>e.jsx("div",{className:"set-match-item",children:e.jsx(ee,{id:b,className:"transparent",width:m},b)},b))})]},j.id)),e.jsx("div",{className:G("grid",y?W("shakeX"):""),children:h.map(j=>e.jsx(re,{onClick:()=>t(j),className:G("grid-item",{"grid-item--selected":v.includes(j)}),children:e.jsx(ee,{id:j,className:"transparent",width:m})},j))},g)]}),c?e.jsx(P,{className:"results-container",direction:"vertical",align:"center",size:"large",children:e.jsx(D,{onClick:()=>a(!0),type:"primary",icon:e.jsx(Oe,{}),children:e.jsx(_,{pt:"Ver Resultado",en:"Show Results"})})}):e.jsx(M,{children:e.jsxs(L,{justify:"center",gap:8,children:[e.jsx(D,{shape:"round",onClick:l,disabled:h.length===0,children:e.jsx(_,{en:"Shuffle",pt:"Embaralhar"})}),e.jsx(D,{shape:"round",onClick:r,disabled:!v.length,children:e.jsx(_,{en:"Deselect",pt:"Desmarcar"})}),e.jsx(D,{shape:"round",type:"primary",onClick:u,disabled:v.length!==4,children:e.jsx(_,{en:"Submit",pt:"Enviar"})})]})}),e.jsx(pe,{open:o,onCancel:()=>a(!1),footer:null,children:e.jsx(to,{challenge:n.number,win:d,guesses:x,sets:n.sets})})]})]})}function ao(){return e.jsx(ye,{gameName:"quartetos",GameComponent:ro})}function oo({current:n,total:i,color:s="gold",displayNumbers:o=!1}){const a=Array.from({length:i},(d,c)=>{const h=c===n;return e.jsx(Gs,{status:"default",color:h?s:"rgba(0, 0, 0, 0.25)",count:o?c+1:void 0},c)});return e.jsx(L,{gap:4,children:a})}const io={id:"",number:0,played:!1,suspectsIds:[]},lo=n=>{const i=me({key:$e.KEY,gameId:n.id,defaultValue:S.cloneDeep(io)}),s=n.suspectsIds??[];return s.length===0&&n.testimonies.forEach(o=>{o.suspectsIds&&s.push(...o.suspectsIds)}),{id:n.id,number:n.number,played:i.played,suspectsIds:Bt(s)}};function co(n,i){const{state:s,updateState:o}=he(i),{session:a,setSession:d,updateSession:c}=Re({questionIndex:0,testimonies:n.testimonies.filter(y=>!y.nsfw),suspectsIds:n.testimonies.map(()=>S.sampleSize(s.suspectsIds,6)),answers:[{testimonyId:n.testimonies[0].testimonyId,related:[],unrelated:[]}],selections:[],allowNSFW:!1,screen:"idle"}),{updateLocalStorage:h}=fe({key:$e.KEY,gameId:n.id,defaultValue:i});T.useEffect(()=>{h(s)},[s]);const f=y=>{c({allowNSFW:y,testimonies:n.testimonies.filter(j=>y?!0:!j.nsfw)})},x=n.testimonies[a.questionIndex],v=a.answers[a.questionIndex],t=a.suspectsIds[a.questionIndex],r=()=>{c({screen:"playing"})},l=()=>{if(a.screen==="idle")return c({screen:"playing"});if(a.questionIndex===a.testimonies.length-1)return m();d(y=>{const j=S.cloneDeep(y),b=j.questionIndex+1;return j.answers[b]===void 0&&j.answers.push({testimonyId:n.testimonies[b].testimonyId,related:[],unrelated:[]}),j.answers[j.questionIndex]&&(j.answers[j.questionIndex].unrelated=t.filter(A=>!j.answers[j.questionIndex].related.includes(A))),j.questionIndex=b,j})},u=()=>{if(a.questionIndex>0)return c({questionIndex:a.questionIndex-1})},g=(y,j)=>{C("swap"),d(b=>{const A=S.cloneDeep(b),E=A.answers[A.questionIndex];return E&&(A.answers[A.questionIndex].related=j?[...E.related,y]:E.related.filter(O=>O!==y),A.answers[A.questionIndex].unrelated=j?E.unrelated.filter(O=>O!==y):[...E.unrelated,y]),A})},m=()=>{a.answers[a.questionIndex]&&(a.answers[a.questionIndex].unrelated=t.filter(y=>!a.answers[a.questionIndex].related.includes(y))),p.mutate(a.answers)},p=xa(()=>{o({played:!0}),c({screen:"idle"})});return xe({key:$e.KEY,isComplete:s.played}),{questionIndex:a.questionIndex,questionNumber:a.questionIndex+1,question:x,answer:v,suspects:t,totalQuestions:a.testimonies.length,isPlaying:a.screen==="playing",isIdle:a.screen==="idle",isSaving:a.screen==="saving"||p.isPending,alreadyPlayed:s.played,onToggleAllowNSFW:f,onStart:r,onNext:l,onPrevious:u,onComplete:m,onUpdateAnswer:g}}function uo(){return e.jsx(w,{children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Contribua com o banco de dados do TD!"}),e.jsx("li",{children:"VocÃª receberÃ¡ rodadas de perguntas com seis personagens."}),e.jsx("li",{children:"Para cara pergunta, selecione todos os personagens que vocÃª acha que se encaixam Ã  pergunta."}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Contribute to TD's database!"}),e.jsx("li",{children:"You'll receive a round of questions and six characters."}),e.jsx("li",{children:"For each question, select all characters you think fit the question."}),e.jsx("li",{children:"Good luck!"})]})})})}const mo=ke(L);function po({data:n}){const[i]=T.useState(lo(n)),{questionIndex:s,totalQuestions:o,question:a,answer:d,suspects:c,onToggleAllowNSFW:h,onNext:f,onPrevious:x,onComplete:v,onStart:t,isPlaying:r,isIdle:l,isSaving:u,alreadyPlayed:g,onUpdateAnswer:m}=co(n,i),[p,y]=st(3,{margin:24,gap:12,maxWidth:300,minWidth:55});return e.jsxs(F,{className:"app",children:[e.jsxs(ce,{icon:e.jsx(bt,{}),localStorageKey:$e.KEY,children:["TD ",e.jsx(Z,{children:$e.NAME})," #",n.number]}),e.jsxs(F.Content,{ref:y,children:[e.jsx(mn,{hand:(n==null?void 0:n.suspectsIds)??[]}),e.jsxs("div",{children:[e.jsx(ge,{hearts:0,total:0,openRules:!0,rules:e.jsx(uo,{})}),g&&e.jsxs(K,{className:"info-screen",children:[e.jsx(k,{icon:e.jsx(ls,{})}),e.jsx(_,{pt:"VocÃª jÃ¡ jogou hoje!",en:"You've already played today!"}),e.jsx(_,{pt:"Volte amanhÃ£ para jogar novamente!",en:"Come back tomorrow to play again!"}),e.jsx(Ve,{}),e.jsx(_e,{})]})]}),r&&a&&e.jsxs($,{vertical:!0,children:[e.jsx(oo,{current:s,total:o}),e.jsx(cs,{hideHeader:!0,children:a.question}),e.jsx(L,{gap:8,wrap:"wrap",justify:"center",children:c.map((j,b)=>e.jsxs(mo,{vertical:!0,...Le("flipInY",{delay:.1*b}),children:[e.jsx(un,{suspect:{id:j,name:{en:"",pt:""},gender:"",ethnicity:"",age:"",build:"",height:""},width:p}),e.jsx(Xe,{loading:u,checked:d.related.includes(j),onChange:A=>m(j,A),unCheckedChildren:e.jsxs(e.Fragment,{children:[e.jsx(Ys,{})," ",e.jsx(_,{pt:"NÃ£o",en:"No"})]}),checkedChildren:e.jsxs(e.Fragment,{children:[e.jsx(pn,{})," ",e.jsx(_,{pt:"Sim",en:"Yes"})]})})]},`${s}-${j}`))}),e.jsxs(P.Compact,{className:"mt-10",children:[e.jsx(D,{shape:"round",onClick:x,icon:e.jsx(Ws,{}),iconPosition:"start",disabled:s===0,children:e.jsx(_,{pt:"Anterior",en:"Previous"})}),e.jsx(D,{shape:"round",onClick:f,icon:e.jsx(Us,{}),iconPosition:"end",disabled:s===o-1,children:e.jsx(_,{pt:"PrÃ³ximo",en:"Next"})})]}),(s>4||s===o-1)&&e.jsxs(e.Fragment,{children:[s!==o-1&&e.jsx(K,{contained:!0,children:e.jsx(_,{pt:"VocÃª jÃ¡ respondeu ao mÃ­nimo de perguntas suficientes, se quiser parar, aperte salvar.",en:"You've already answered the minimum amount of questions, if you want to stop, press save."})}),e.jsx(D,{className:s!==o-1?"mb-10":"my-10",icon:e.jsx(En,{}),loading:u,onClick:v,type:"primary",size:"large",children:e.jsx(_,{pt:"Cansei / Salvar",en:"I'm done / save"})})]})]}),u&&e.jsxs(K,{className:"info-screen",children:[e.jsx(k,{icon:e.jsx(is,{})}),e.jsx(_,{pt:"Salvando",en:"Saving"})]}),l&&!g&&e.jsxs(M,{children:[e.jsx(K,{contained:!0,children:e.jsx(_,{pt:e.jsxs(e.Fragment,{children:["Selecione todos os personagem que vocÃª acha que se encaixam na pergunta.",e.jsx("br",{}),"Se nenhum se encaixar, sÃ³ nÃ£o selecionar ninguÃ©m.",e.jsx("br",{}),'Considere talvez, como "sim".']}),en:e.jsxs(e.Fragment,{children:["Select all characters that you think fit the question.",e.jsx("br",{}),'If none fits, select "None".',e.jsx("br",{}),'Consider maybe, as "yes".']})})}),e.jsx(Xe,{checkedChildren:"Incluir conteÃºdo sensÃ­vel",unCheckedChildren:"NÃ£o incluir conteÃºdo sensÃ­vel",onChange:h,className:"my-4"}),e.jsx(D,{type:"primary",size:"large",onClick:t,disabled:g,children:u?e.jsx(_,{pt:"Salvando",en:"Saving"}):e.jsx(_,{pt:"ComeÃ§ar",en:"Start"})})]})]})]})}function ho(){return e.jsx(ye,{gameName:"ta-na-cara",GameComponent:po})}function Si(){var c;const{isAuthenticated:n}=et(),{pathname:i}=Rs(),{setLanguage:s,language:o}=Y();jt(()=>{s(i.includes("diario")?"pt":"en")});const a=(c=i.split("/"))==null?void 0:c[2];if(ks(`${Ne(o)} - Tarde Divertida`),!n)return e.jsx(It,{children:e.jsx(We,{children:e.jsx(Ms,{isAuthenticated:!1})})});const d={"":at,hub:at,"aqui-o":or,"arte-ruim":jr,"comunicacao-alienigena":Fa,"controle-de-estoque":Dr,filmaco:zr,palavreado:ma,"teoria-de-conjuntos":Ra,picaco:ya,"portais-magicos":Ja,quartetos:ao,"ta-na-cara":ho,debug:Pr}[a]??at;return e.jsx(It,{children:e.jsx(d,{})})}export{Si as default};
