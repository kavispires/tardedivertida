import{h as y,aM as W,r as b,j as e,T as i,aP as _,O as ge,B as oe,n as G,e as E,I as S,bI as Y,bK as $,bo as ie,F as L,J as ce,cl as fe,b6 as de,q as ve,ci as ye,a_ as be}from"./index-BKEu8QXE.js";import{u as M,S as f,a as A,P as N,W as Ie,f as Ee,c as Se,d as Ce,e as _e}from"./Session-C6pLfI4z.js";import{u as v}from"./useWhichPlayerIsThe-CGQ0fxhw.js";import{S as Ae,H as Ne,D as Te}from"./SecretIcon-B9FP0cyu.js";import{P as j}from"./PlayerAvatarName-MQokYl-H.js";/* empty css                             */import{I as Re}from"./ImageCardPreloadHand-CLn1xaeM.js";import{S as I,P as T,a as R,u as P,R as Pe}from"./StepSwitcher-CzOuRD8k.js";import{I as w}from"./useDevFeatures-B-qWmhXT.js";import{R as we}from"./RoundAnnouncement-nCb43FfG.js";import{V as B}from"./ViewOr-Bx1kDirb.js";import{u as H}from"./useMock-a6AOjXb5.js";import{I as D}from"./ImageCardHand-D1ScnlBg.js";import{C as q}from"./CardHighlight-DaIv1NAL.js";import{T as C}from"./TextHighlight-Dm2kL_fr.js";import{R as x}from"./RuleInstruction-B-XOf42n.js";import{F as K}from"./FloatingHand-uXN0q6wk.js";import{T as V}from"./TurnOrder-Mja-GWmc.js";import{u as De}from"./DebugOnly-CIRBTQ-d.js";import{I as re,V as Ve}from"./WritingIcon-OP8hIBRU.js";import{m as le}from"./messageContent-lUEUWVuk.js";import{T as Fe}from"./TimedTimerClock-CVlt8BjC.js";import{A as Q}from"./AnimatedLoaderIcon-BKIZx2l-.js";import{P as k}from"./PlayerAvatar-BLmCrijO.js";import{I as J}from"./ImageBlurButtonContainer-ijSjdOIq.js";import{I as X}from"./ImageCard-5ZGXX2Uk.js";import{R as qe}from"./QuestionCircleFilled-NdTH4qgX.js";import{T as Oe}from"./TimedButton-slxh4oXC.js";import{P as O}from"./PlayersHighlight-HuwMTA_W.js";import{V as z}from"./ViewIf-qgMpzyEs.js";import{R as We}from"./RankIcon-DvxEPtux.js";import{P as m}from"./PointsHighlight-DR1nmhAV.js";import{S as Le}from"./StepRankingWrapper-B62DN_TF.js";import{R as Me}from"./RoundsLeftInstruction-DkMM4c0j.js";import{T as Be}from"./TrophyIcon-B5Bho-EJ.js";import"./GameBanner-BlvIaXTs.js";import{G as ke}from"./GameOverWrapper-C0nG7VAc.js";import{A as Ue}from"./Achievements-DhAffQgp.js";import{T as ze}from"./TitledContainer-C1aewcl2.js";import{a as Ge}from"./achievements-D_nq8RdB.js";import"./Game-Be9RaeOz.js";import"./useMutation-8pJULI3W.js";import"./speech-CNvkMUME.js";import"./index-CGs80laY.js";import"./index-e1LbT1mf.js";import"./Overflow-D2aDENhv.js";import"./PurePanel-DJdqDyZ7.js";import"./index-BB-_R6eY.js";import"./index-B80drxxh.js";import"./RulesModal-8007xQOD.js";import"./index-Bs51ubVt.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-BLnabxm6.js";import"./index-DuFfzkdd.js";import"./useBubbleLock-Jz0l4q70.js";import"./InfoCircleOutlined-CDRqU8d6.js";import"./index-BKomPH4D.js";import"./SignIn-CseYVoU7.js";import"./GoogleIcon-DpUW3SWC.js";import"./AnimatedGearIcon-ChwX0PJo.js";import"./AnimatedClockIcon-kYusdpyY.js";import"./Loading-QsjE72OU.js";import"./WaitingRoomIcon-oNkDoZea.js";import"./LikeFilled-kc_T9OaO.js";import"./UpCircleOutlined-BOTY2KKL.js";import"./MetricHighlight-xqJanIY_.js";import"./StarFilled-CghwHNA0.js";import"./HandOfCardsIcon-C7sRxrLX.js";import"./DivButton-BIBR6EOn.js";import"./VideoGameControllerIcon-B4Gw-GTl.js";import"./ImageBlurButton-B7ekoPGv.js";import"./PlayersIcon-ByPJ62Hv.js";import"./StarIcon-kxvr0nRR.js";import"./RankingBoard-3VmMvOuD.js";import"./CaretUpOutlined-aaFHfn4d.js";import"./TheEndIcon-D37iZ9X8.js";import"./ArrowRightOutlined-CXKF3Nor.js";import"./progress-BV6R_Eox.js";import"./Medal-DqOg1lEu.js";const p={SECRET_CLUE:"SECRET_CLUE",CARD_PLAY:"CARD_PLAY",DEFENSE:"DEFENSE",VOTING:"VOTING",REVEAL:"REVEAL"},U={SUBMIT_CLUE:"SUBMIT_CLUE",PLAY_CARD:"PLAY_CARD",DEFEND:"DEFEND",SUBMIT_VOTE:"SUBMIT_VOTE"};function Ye(s){const{translate:t}=y(),a=M({actionName:"submit-secret-clue",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:t("Pista Secreta submetida com sucesso","Secret clue submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar sua pista secreta","Oops, the application found an error while trying to submit your secret clue")});return r=>{a({action:U.SUBMIT_CLUE,...r})}}function $e(){const{translate:s}=y(),t=M({actionName:"play-card",successMessage:s("Carta enviada com sucesso","Card submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application found an error while trying to submit your card")});return a=>{t({action:U.PLAY_CARD,...a})}}function He(){const{translate:s}=y(),t=M({actionName:"finish-defense",successMessage:s("Defesa concluída com sucesso","Defense concluded successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar concluir sua defesa","Oops, the application found an error while trying to conclude your defense")});return a=>{t({action:U.DEFEND,...a})}}function Ke(){const{translate:s}=y(),t=M({actionName:"submit-vote",successMessage:s("Voto enviado com sucesso","Vote submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return a=>{t({action:U.SUBMIT_VOTE,...a})}}function Qe({user:s,onSubmitClue:t,announcement:a}){const{translate:r}=y(),{isLoading:o}=W(),[n,d]=b.useState("");H();const c=()=>{t({clue:n})},u=l=>{l.key==="Enter"&&c()};return e.jsxs(I,{fullWidth:!0,announcement:a,children:[e.jsx(f,{children:e.jsx(i,{pt:"Escreva a Pista!",en:"Write a Clue!"})}),e.jsxs(x,{type:"action",children:[e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Escreva uma pista que relacione com ",e.jsx(q,{children:"2"})," cartas suas."]}),en:e.jsxs(e.Fragment,{children:["Write a clue that relates to ",e.jsx(q,{children:"2"})," of your cards."]})}),e.jsx("br",{}),e.jsx(i,{pt:"A pista pode ser qualquer coisa que você quiser. Não há restrições!",en:"The clue can be anything you want. There are no restrictions!"}),e.jsx("br",{}),e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Você ganha pontos somente se o ",e.jsx(C,{children:"Impostor NÃO for encontrado"}),", então escolha algo fácil e generalizado."]}),en:e.jsxs(e.Fragment,{children:["You only get points if ",e.jsx(C,{children:"the Impostor is NOT found"})," by the others, so choose something easy and general."]})})]}),e.jsxs(_,{align:"center",children:[e.jsx(ge,{className:"uppercase-input",placeholder:r("Escreva sua pista aqui","Write your clue here"),onChange:l=>d(l.target.value),onKeyDown:l=>l.key==="Enter"&&u(l)}),e.jsx(oe,{type:"primary",disabled:o||n.length<1,onClick:c,children:e.jsx(i,{pt:"Enviar pista secreta",en:"Send secret clue"})})]}),e.jsx(D,{hand:s.hand,sizeRatio:s.hand?.length})]})}function Je({leader:s,user:t,players:a,turnOrder:r,announcement:o}){return e.jsxs(I,{fullWidth:!0,announcement:o,children:[e.jsx(f,{wait:!0,children:e.jsx(i,{pt:"Aguarde...",en:"Please wait..."})}),e.jsxs(x,{type:"wait",children:[e.jsx(j,{player:s,addressUser:!0})," ",e.jsx(i,{pt:"está escrevendo a pista secreta.",en:"is writing the secret clue."}),e.jsx("br",{}),e.jsx(i,{pt:"Enquanto isso, examine suas cartas! Você as usará durante esta rodada.",en:"In the meantime, examine your cards. You're gonna use them this turn."})]}),e.jsx(V,{players:a,activePlayerId:s.id,order:r,reorderByUser:s.id}),e.jsx(K,{children:e.jsx(D,{hand:t.hand,sizeRatio:t.hand?.length})})]})}function Xe({state:s,players:t,user:a}){const{step:r,goToNextStep:o,setStep:n}=A(0),[d,c]=v("leaderId",s,t),u=Ye(n),l=e.jsxs(T,{icon:e.jsx(Ae,{}),title:e.jsx(i,{pt:"Pista Secreta",en:"Secret Clue"}),currentRound:s?.round?.current,type:"overlay",children:[e.jsx(w,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Para essa rodada, ",e.jsx(j,{player:d,addressUser:!0})," será o(a) Detetive Líder."]}),en:e.jsxs(e.Fragment,{children:["For this round, ",e.jsx(j,{player:d,addressUser:!0})," will be the Lead Detective."]})})}),e.jsx(Re,{hand:a?.hand})]});return e.jsx(N,{phase:s?.phase,allowedPhase:p.SECRET_CLUE,className:"d-secret-clue-phase",children:e.jsxs(R,{step:r,players:t,children:[e.jsx(we,{round:s.round,buttonText:" ",onPressButton:o,time:5,unskippable:!0}),e.jsxs(B,{condition:c,children:[e.jsx(Qe,{user:a,onSubmitClue:u,announcement:l}),e.jsx(Je,{user:a,leader:d,players:t,turnOrder:s.turnOrder,announcement:l})]})]})})}function Ze(s,t,a){for(let r=0;r<Math.max(s.length,a.length);r++){if(!s[r])return!0;if(!s[r]||s[r].cards[0]==="")return s[r].playerId===t}for(let r=0;r<s.length;r++)if(s[r].cards[1]==="")return s[r].playerId===t;return!1}function Z({table:s,players:t}){const a=G(12,{gap:16}),r="d-table";return!s||!s?.length?e.jsx("div",{className:E(r,`${r}--center`),children:e.jsx(S,{icon:e.jsx(Q,{})})}):e.jsx("div",{className:r,children:s.map(o=>{const{playerId:n,cards:d}=o,c=`table-${n}`;return e.jsxs("div",{className:"d-table__player-entry",children:[e.jsx("div",{className:"d-table__cards",children:d.map(u=>u?e.jsx(Y.div,{...$("flipInY",{delay:.5}),children:e.jsx(J,{cardId:u,className:"d-table__card",children:e.jsx(X,{cardId:u,cardWidth:a})})},`${c}${u}`):e.jsx("div",{className:"d-table__card d-table__card-placeholder",style:{width:"1px"}},`${c}-placeholder`))}),e.jsxs("div",{className:"d-table__player-info",children:[e.jsx(k,{avatarId:t[n].avatarId,className:"d-table__player-avatar",size:"default"}),e.jsx("span",{className:"d-table__player-bar",style:{backgroundColor:ie[t[n].avatarId].color}}),e.jsx("span",{className:"d-table__player-name",children:t[n].name})]})]},c)})})}function ue(){return e.jsxs(L,{align:"center",gap:8,children:[e.jsx(i,{pt:"A pista secreta é",en:"The secret clue is"})," ",e.jsx(C,{children:e.jsx(qe,{})})," ",e.jsx(i,{pt:"Você é o impostor!",en:"You are the impostor!"})]})}function me({clue:s}){return e.jsxs(L,{align:"center",gap:8,children:[e.jsx(i,{pt:"A pista secreta é",en:"The secret clue is"})," ",e.jsx(C,{children:s})]})}function ee({clue:s}){return e.jsxs(L,{align:"center",gap:8,children:[e.jsx(i,{pt:"Pista Secreta era: ",en:"The Secret Clue was: "}),e.jsx(C,{children:s})]})}const ne=10;function es({isUserTheImpostor:s,clue:t,currentPlayer:a,table:r,players:o,user:n,onPlayCard:d,isLoading:c,turnOrder:u,leaderId:l}){const{message:h}=ce.useApp();P();const{translate:g}=y(),F=je=>d({cardId:je}),[te,xe]=b.useState(!1);H(()=>{d({cardId:fe(n.hand)})},[],8),b.useEffect(()=>{r.length!==0&&a.id===n.id&&!te&&!c&&Ze(r,n.id,u)&&(h.info(le(g("Escolha uma carta!","Choose a card to play"),g("Aperte o botão Selecionar acima da carta escolhida","Press the select button above each card"),a.id,3)),xe(!0))},[te,a.id,g,c,n.updatedAt,r,n.id,u,h]);const{timeLeft:ae}=De({duration:ne});return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsx(f,{children:s?e.jsx(ue,{}):e.jsx(me,{clue:t})})}),e.jsxs(x,{type:"action",children:[e.jsxs(B,{condition:s,children:[e.jsxs(e.Fragment,{children:[e.jsx(S,{icon:e.jsx(re,{}),size:"large",shape:"square"})," ",e.jsx(i,{pt:`Selecione uma carta que mais combine com as cartas que os outros
                jogadores estão usando.`,en:"Select a card that best fits with what others are playing."})]}),e.jsxs(e.Fragment,{children:[e.jsx(S,{icon:e.jsx(re,{}),size:"large",shape:"square"})," ",e.jsx(i,{pt:"Selecione uma carta que mais combine com a pista secreta.",en:"Select a card that best fits the secret clue."})]})]}),e.jsx(Fe,{duration:75,onExpire:()=>F("back-default")})]}),e.jsx(Z,{table:r,players:o}),e.jsx(V,{players:o,activePlayerId:a.id,order:u,reorderByUser:l}),e.jsx(Ie,{timeLeft:ae,duration:ne}),e.jsx(D,{hand:n.hand,onSelectCard:F,disabledSelectButton:ae>0||c,sizeRatio:n.hand?.length})]})}function ss({isUserTheImpostor:s,clue:t,currentPlayer:a,table:r,players:o,user:n,isLoading:d,turnOrder:c,leaderId:u}){return P(),e.jsxs(e.Fragment,{children:[e.jsx(f,{children:s?e.jsx(ue,{}):e.jsx(me,{clue:t})}),e.jsx(x,{type:"wait",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(j,{player:a,addressUser:!0})," escolhe uma carta."]}),en:e.jsxs(e.Fragment,{children:["Wait while ",e.jsx(j,{player:a})," picks a card."]})})}),e.jsx(Z,{table:r,players:o}),e.jsx(V,{players:o,activePlayerId:a.id,order:c,reorderByUser:u}),e.jsx(K,{children:e.jsx(D,{hand:n.hand,disabledSelectButton:d,sizeRatio:n.hand?.length})})]})}function ts({isUserTheImpostor:s,clue:t,currentPlayer:a,table:r,players:o,user:n,onPlayCard:d,isLoading:c,turnOrder:u,leaderId:l,announcement:h,isUserTheCurrentPlayer:g}){return P(),e.jsx(I,{announcement:h,children:e.jsxs(B,{condition:g,children:[e.jsx(es,{clue:t,currentPlayer:a,isLoading:c,isUserTheImpostor:s,onPlayCard:d,players:o,table:r,user:n,turnOrder:u,leaderId:l}),e.jsx(ss,{clue:t,currentPlayer:a,isLoading:c,isUserTheImpostor:s,players:o,table:r,user:n,turnOrder:u,leaderId:l})]})})}function as({state:s,players:t,user:a}){const{isLoading:r}=W(),{step:o}=A(0),[n,d]=v("currentPlayerId",s,t),[,c]=v("impostorId",s,t),u=$e(),l=e.jsx(T,{icon:e.jsx(Ne,{}),title:e.jsx(i,{pt:"Apresentação das Evidências",en:"Evidence"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(w,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Agora, jogadores selecionarão ",e.jsx(q,{children:"2"})," cartas, uma de cada vez, como evidência que eles não são o impostor. Enquanto isso, o impostor está prestando bastante atenção nas cartas selecionadas e escolhendo algo que o(a) ajude a passar despercebido."]}),en:e.jsxs(e.Fragment,{children:["Now players will play ",e.jsx(q,{children:"2"})," cards, one at a time, as evidence that they are not the impostor while the impostor is looking closely to what others are playing and trying to go unnoticed."]})})})});return e.jsx(N,{phase:s?.phase,allowedPhase:p.CARD_PLAY,className:"d-phase d-play-card-phase",children:e.jsx(R,{step:o,players:t,children:e.jsx(ts,{clue:s.clue,currentPlayer:n,isLoading:r,isUserTheImpostor:c,onPlayCard:u,isUserTheCurrentPlayer:d,players:t,table:s.table,user:a,turnOrder:s.turnOrder,announcement:l,leaderId:s.leaderId})})})}function rs({onFinishDefenseClick:s,isLoading:t}){return e.jsx(_,{align:"center",children:e.jsx(Oe,{duration:40,type:"primary",onClick:a=>s({defenseTime:a}),onExpire:()=>s({defenseTime:0}),disabled:t,size:"large",loading:t,children:e.jsx(i,{pt:"Concluir Defesa",en:"End Defense"})})})}function se({table:s,currentPlayer:t}){const a=G(6,{minWidth:250}),r=s.find(n=>n.playerId===t.id),o="d-table";return!t||!r?.cards?e.jsx("div",{className:E(o,`${o}--center`),children:e.jsx(S,{icon:e.jsx(Q,{})})}):e.jsx(Y.div,{className:E(o,`${o}--center`),...$("slideInRight"),children:e.jsxs("div",{className:"d-table__player-entry",children:[e.jsx("div",{className:"d-table__cards",children:r?.cards.map(n=>e.jsx(J,{cardId:n,className:"d-table__card",children:e.jsx(X,{cardId:n,cardWidth:a},`table-focus-${n}`)},`table-focus-${n}`))}),e.jsxs("div",{className:"d-table__player-info",children:[e.jsx(k,{avatarId:t.avatarId,className:"d-table__player-avatar",size:"default"}),e.jsx("span",{className:"d-table__player-bar",style:{backgroundColor:ie[t.avatarId].color}}),e.jsx("span",{className:"d-table__player-name",children:t.name})]})]})})}function he({table:s,user:t}){const a=s.find(r=>r.playerId===t.id)?.cards;return e.jsx(K,{title:e.jsx(i,{pt:"Suas cartas selecionadas",en:"Your selected cards"}),children:e.jsx(D,{hand:a??[],sizeRatio:6})})}function ns({clue:s,currentPlayer:t,table:a,onFinishDefenseClick:r,isLoading:o,isUserTheImpostor:n,user:d,players:c,turnOrder:u}){const{message:l}=ce.useApp(),{translate:h}=y(),[g,F]=b.useState(!1);return H(),b.useEffect(()=>{!g&&!o&&Date.now()-d.updatedAt>3e6&&(l.info(le(h("Sua vez de defender suas escolhas!","It's your turn to defend your choices"),h("Aperte o botão Concluir Defesa quando terminar","Press the button End Defense when you're done"),t?.id,4)),F(!0))},[g,l,t?.id,h,o,d.updatedAt]),e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsx(ee,{clue:s})}),e.jsxs(x,{type:"action",children:[e.jsx(j,{player:t,className:de("tada")},t.id),", ",e.jsx(i,{pt:"explique porque você escolheu as cartas.",en:"explain why you chose your cards."}),e.jsx(i,{pt:" Quando terminar sua defesa, aperte concluir.",en:" When you're done, press 'End Defense'."}),n&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(i,{pt:" Suas cartas estão no fim da página pra você começar a já pensar numa desculpa esfarrapada.",en:" Your cards are displayed in the bottom of the page so you can think of your B.S.'"})]})]}),e.jsx(rs,{onFinishDefenseClick:r,isLoading:o}),e.jsx(_,{align:"center",wrap:!0,children:e.jsx(se,{table:a,currentPlayer:t})}),e.jsx(V,{players:c,activePlayerId:t.id,order:u}),e.jsx(he,{table:a,user:d})]})}function os({clue:s,currentPlayer:t,table:a,isUserTheImpostor:r,user:o,players:n,turnOrder:d}){return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsx(ee,{clue:s})}),e.jsxs(x,{type:"action",children:[e.jsx(j,{player:t,className:de("tada")},t.id),","," ",e.jsx(i,{pt:"deve explicar porque ele(a) escolheu as cartas.",en:"should explain why they chose your cards."}),r&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(i,{pt:" Suas cartas estão no fim da página pra você começar a já pensar numa desculpa esfarrapada.",en:" Your cards are displayed in the bottom of the page so you can think of your B.S.'"})]})]}),e.jsx(_,{align:"center",wrap:!0,children:e.jsx(se,{table:a,currentPlayer:t})}),e.jsx(V,{players:n,activePlayerId:t.id,order:d}),e.jsx(he,{table:a,user:o})]})}function is({clue:s,currentPlayer:t,isUserTheCurrentPlayer:a,table:r,onFinishDefenseClick:o,isLoading:n,isUserTheImpostor:d,user:c,players:u,turnOrder:l,announcement:h}){return P(),e.jsx(I,{announcement:h,children:e.jsxs(B,{condition:a,children:[e.jsx(ns,{clue:s,currentPlayer:t,table:r,onFinishDefenseClick:o,isLoading:n,isUserTheImpostor:d,user:c,players:u,turnOrder:l}),e.jsx(os,{clue:s,currentPlayer:t,table:r,isUserTheImpostor:d,user:c,players:u,turnOrder:l})]})})}function cs({state:s,players:t,user:a}){const{isLoading:r}=W(),{step:o}=A(0),[n,d]=v("currentPlayerId",s,t),[,c]=v("impostorId",s,t),u=He(),l=e.jsxs(T,{icon:e.jsx(Te,{}),title:e.jsx(i,{pt:"Defensa",en:"Defense"}),currentRound:s?.round?.current,duration:5,type:"overlay",children:[e.jsx(L,{className:"d-secret-clue-announcement",justify:"center",align:"center",gap:8,children:e.jsx(ee,{clue:s.clue})}),e.jsx(w,{children:e.jsx(i,{pt:"Agora, cada jogador em ordem deve defender porque escolheu as castas que escolheu.",en:"Now, in turn-order, each player must present the reason they chose their cards."})})]});return e.jsx(N,{phase:s?.phase,allowedPhase:p.DEFENSE,className:"d-defense-phase",children:e.jsx(R,{step:o,players:t,children:e.jsx(is,{clue:s.clue,currentPlayer:n,isUserTheCurrentPlayer:d,table:s.table,onFinishDefenseClick:u,isLoading:r,isUserTheImpostor:c,user:a,players:t,turnOrder:s.turnOrder,announcement:l})})})}function pe({players:s,leaderId:t,user:a,onVote:r,isLoading:o=!1,isAllDisabled:n=!1}){const d=b.useMemo(()=>ve.orderBy(Object.values(s).filter(c=>c.id!==t),["name"],["asc"]),[s,t]);return e.jsx(_,{className:"d-voting-options",children:d?.map(c=>{const u=Object.values(s).filter(l=>l?.vote===c.id);return e.jsxs("div",{className:"d-voting-options__container",children:[e.jsx(oe,{onClick:()=>r({vote:c.id}),ghost:!0,size:"large",disabled:n||a?.vote||o||a?.name===c.name,children:e.jsx(j,{player:c,uppercase:!0})}),e.jsxs("div",{className:"d-voting-options__vote-container",children:[e.jsx(i,{pt:"Votos",en:"Votes"}),": ",u.length,e.jsx("ul",{className:"d-voting-options__votes",children:u.map(l=>e.jsx(k,{avatarId:l.avatarId,size:"small",alt:l.name},`voted-for-player-${l.id}`))})]})]},`voting-button-${c.name}`)})})}function ds({isLoading:s,isUserTheLeader:t,user:a,leaderId:r,players:o,onVote:n,table:d,announcement:c}){return e.jsxs(I,{announcement:c,children:[e.jsx(f,{wait:s,children:!s&&e.jsx(i,{pt:"Quem é o impostor?",en:"Who is the impostor?"})}),e.jsx(z,{condition:t,children:e.jsx(x,{type:"wait",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto os outros jogadores votam em quem eles acham ser o impostor."," ",e.jsx("strong",{children:"Como Líder, você não vota."})]}),en:e.jsxs(e.Fragment,{children:["Wait while the other detectives vote. ",e.jsx("strong",{children:"As Lead Detective, you don't vote."})]})})})}),e.jsx(z,{condition:!t&&!a.vote,children:e.jsx(x,{type:"action",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Vote para quem você acha que pode ser o impostor! Lembre-se, o impostor só perde se"," ",e.jsx(O,{children:"2+"})," detetives votarem nele."]}),en:e.jsxs(e.Fragment,{children:["Vote for who you think is the impostor! Remember, the impostor only goes down if they get"," ",e.jsx(O,{children:"2+"})," votes."]})})})}),e.jsx(z,{condition:!t&&a.vote,children:e.jsx(x,{type:"wait",children:e.jsx(i,{pt:"Aguarde enquanto os outros jogadores votam...",en:"Wait while other detectives finish voting..."})})}),e.jsx(pe,{players:o,leaderId:r,user:a,onVote:n,isLoading:s,isAllDisabled:t}),e.jsx(Z,{table:d,players:o}),e.jsx(Pe,{players:o})]})}function ls({state:s,players:t,user:a}){const{isLoading:r}=W(),{step:o}=A(0),[,n]=v("leaderId",s,t),d=Ke(),c=e.jsx(T,{icon:e.jsx(Ve,{}),title:e.jsx(i,{pt:"Votação",en:"Vote"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(w,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Agora você vota! Escolha o jogador que você acredita ser o impostor. Você pode discutir com os outros antes de votar, porque uma vez votado, você não pode mudar. O impostor só pede se",e.jsx(O,{children:"2+"})," pessoas votarem nele."]}),en:e.jsxs(e.Fragment,{children:["Now it's time to vote! Vote for the player you think is the impostor. You can discuss before you vote because you can't change your vote. The impostor only loses if at least"," ",e.jsx(O,{children:"2+"})," people voted for them."]})})})});return e.jsx(N,{phase:s?.phase,allowedPhase:p.VOTING,className:"d-voting-phase",children:e.jsx(R,{step:o,players:t,children:e.jsx(ds,{players:t,leaderId:s.leaderId,user:a,onVote:d,isLoading:r,isUserTheLeader:n,table:s.table,announcement:c})})})}function us({impostor:s,impostorVotes:t,players:a,leaderId:r,round:o,ranking:n,table:d,announcement:c}){return P(),e.jsx(I,{announcement:c,children:e.jsxs(Le,{delay:5,players:a,ranking:n,gainedPointsDescriptions:[e.jsx(i,{pt:"Pontos ganhos por achar o impostor",en:"Points gained for finding the impostor"},"1"),e.jsx(i,{pt:"Pontos ganhos pelo impostor se safar",en:"Points gained for the Impostor getting away"},"2")],title:e.jsxs(e.Fragment,{children:[e.jsx(i,{pt:"O impostor era ",en:"The impostor was "}),e.jsx(j,{player:s})]}),subtitle:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"event",children:t>1?e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Ele(a) recebeu mais de dois votos! Quem votou nele(a) ganha"," ",e.jsx(m,{children:"3"})," pontos!"]}),en:e.jsxs(e.Fragment,{children:["They received more than 2 votes! Who voted for them gets"," ",e.jsx(m,{children:"3"})," points!"]})}):e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Ele(a) não recebeu mais de 2 votos: ",e.jsx("b",{children:"Impostor"})," ganha"," ",e.jsx(m,{children:"5"})," pontos e ",e.jsx("b",{children:"Líder"})," ganha"," ",e.jsx(m,{children:"4"}),"pontos!"]}),en:e.jsxs(e.Fragment,{children:["They did not get enough votes: the ",e.jsx("b",{children:"Impostor"})," gets"," ",e.jsx(m,{children:"5"})," points and the ",e.jsx("b",{children:"Lead Detective"})," gets"," ",e.jsx(m,{children:"4"})," points!"]})})}),e.jsx(pe,{players:a,isAllDisabled:!0,leaderId:r,onVote:()=>{}})]}),children:[e.jsx(Me,{round:o}),e.jsx(se,{table:d,currentPlayer:s}),e.jsx(Ee,{round:o})]})})}function ms({state:s,players:t}){const{step:a}=A(0),[r]=v("impostorId",s,t),o=e.jsx(T,{icon:e.jsx(We,{}),title:e.jsx(i,{pt:"Revelação",en:"Reveal"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(w,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Se o impostor recebeu 2 ou mais votos ele(a) é desmascarado. Quem votou nele ganha"," ",e.jsx(m,{children:"3"})," pontos.",e.jsx("br",{}),"Se o impostor recebeu menos de 2 votos, ele ganha ",e.jsx(m,{children:"5"})," pontos e o detetive líder ganha ",e.jsx(m,{children:"4"}),"pontos."]}),en:e.jsxs(e.Fragment,{children:["If the impostor gets 2 or more votes, they are exposed. Whoever voted for him get"," ",e.jsx(m,{children:"3"})," points.",e.jsx("br",{}),"If the impostor gets fewer than 2 votes, he gets ",e.jsx(m,{children:"5"})," points and the Lead detective gets ",e.jsx(m,{children:"4"}),"points."]})})})});return e.jsx(N,{phase:s?.phase,allowedPhase:p.REVEAL,className:"d-voting-phase",children:e.jsx(R,{step:a,players:t,children:e.jsx(us,{impostor:r,impostorVotes:s.impostorVotes,players:t,leaderId:s.leaderId,round:s.round,ranking:s.ranking,table:s.table,announcement:o})})})}function hs({entry:s,players:t}){const a=G(8,{minWidth:96,maxWidth:128,gap:16}),r="d-table";if(!s||!s.cards)return e.jsx("div",{className:E(r,`${r}--center`),children:e.jsx(S,{icon:e.jsx(Q,{})})});const o=t[s.playerId];return e.jsx(Y.div,{className:E(r,`${r}--center`),...$("zoomIn"),children:e.jsxs("div",{className:"d-table__player-entry",children:[e.jsx("div",{className:"d-table__cards",children:s.cards.map(n=>e.jsx(J,{cardId:n,className:"d-table__card",children:e.jsx(X,{cardId:n,cardWidth:a},`table-focus-${n}`)},`table-focus-${n}`))}),e.jsxs("div",{className:"d-table__player-info",children:[e.jsx(k,{avatarId:o.avatarId,className:"d-table__player-avatar",size:"default"}),e.jsx("span",{className:"d-table__player-bar",style:{backgroundColor:ye(o.avatarId)}}),e.jsxs("span",{className:"d-table__player-name",children:['"',s.clue,'" by ',o.name]})]})]})})}function ps({state:s,players:t}){return e.jsxs(ke,{state:s,players:t,announcementIcon:e.jsx(Be,{}),children:[e.jsx(Ue,{players:t,achievements:s.achievements,reference:Ge}),e.jsx(ze,{title:e.jsx(i,{pt:"Galeria",en:"Gallery"}),contentProps:{className:"full-width"},children:s.gallery.map(a=>e.jsx(hs,{entry:a,players:t},a.playerId))})]})}function xs(s){switch(s.phase){case p.SECRET_CLUE:return Xe;case p.CARD_PLAY:return as;case p.DEFENSE:return cs;case p.VOTING:return ls;case p.REVEAL:return ms;case _e.DEFAULT.GAME_OVER:return ps;default:return Ce}}function Bt(){return e.jsx(Se,{gameCollection:be.DETETIVES_IMAGINATIVOS,getActiveComponent:xs})}export{Bt as default};
