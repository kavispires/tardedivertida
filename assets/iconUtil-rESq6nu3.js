import{a0 as rt,a1 as X,fD as at,r as y,$ as xe,c as L,cA as K,ev as Je,fx as me,fi as it,a4 as re,m as dt,a7 as Oe,df as lt,fj as ct,a as ft,g as ht,f_ as ut,fG as gt,e as _e}from"./index-CeOwbMjx.js";import{L as pt}from"./index-DIeVNV8Q.js";import{g as yt}from"./index-mmJbUNWk.js";function I(o,e){return o[e]}function Ze(o,e){return`${o}-${e}`}function mt(o){return o&&o.type&&o.type.isTreeNode}function he(o,e){return o??e}function ve(o){const{title:e,_title:t,key:n,children:s}=o||{},r=e||"title";return{title:r,_title:t||[r],key:n||"key",children:s||"children"}}function vt(o){function e(t){return rt(t).map(s=>{if(!mt(s))return X(!s,"Tree/TreeNode can only accept TreeNode as children."),null;const{key:r}=s,{children:i,...f}=s.props,u={key:r,...f},d=e(i);return d.length&&(u.children=d),u}).filter(s=>s)}return e(o)}function Se(o,e,t){const{_title:n,key:s,children:r}=ve(t),i=new Set(e===!0?[]:e),f=[];function u(d,c=null){return d.map((h,l)=>{const g=Ze(c?c.pos:"0",l),p=he(h[s],g);let b;for(let v=0;v<n.length;v+=1){const C=n[v];if(h[C]!==void 0){b=h[C];break}}const N=Object.assign(at(h,[...n,s,r]),{title:b,key:p,parent:c,pos:g,children:null,data:h,isStart:[...c?c.isStart:[],l===0],isEnd:[...c?c.isEnd:[],l===d.length-1]});return f.push(N),e===!0||i.has(p)?N.children=u(h[r]||[],N):N.children=[],N})}return u(o),f}function bt(o,e,t){let n={};typeof t=="object"?n=t:n={externalGetKey:t},n=n||{};const{childrenPropName:s,externalGetKey:r,fieldNames:i}=n,{key:f,children:u}=ve(i),d=s||u;let c;r?typeof r=="string"?c=l=>l[r]:typeof r=="function"&&(c=l=>r(l)):c=(l,g)=>he(l[f],g);function h(l,g,p,b){const N=l?l[d]:o,v=l?Ze(p.pos,g):"0",C=l?[...b,l]:[];if(l){const E=c(l,v),x={node:l,index:g,pos:v,key:E,parentPos:p.node?p.pos:null,level:p.level+1,nodes:C};e(x)}N&&N.forEach((E,x)=>{h(E,x,{node:l,pos:v,level:p?p.level+1:-1},C)})}h(null)}function Nt(o,{initWrapper:e,processEntity:t,onProcessFinished:n,externalGetKey:s,childrenPropName:r,fieldNames:i}={},f){const u=s||f,d={},c={};let h={posEntities:d,keyEntities:c};return e&&(h=e(h)||h),bt(o,l=>{const{node:g,index:p,pos:b,key:N,parentPos:v,level:C,nodes:E}=l,x={node:g,nodes:E,index:p,key:N,pos:b,level:C},a=he(N,b);d[b]=x,c[a]=x,x.parent=d[v],x.parent&&(x.parent.children=x.parent.children||[],x.parent.children.push(x)),t&&t(x,h)},{externalGetKey:u,childrenPropName:r,fieldNames:i}),n&&n(h),h}function ce(o,{expandedKeys:e,selectedKeys:t,loadedKeys:n,loadingKeys:s,checkedKeys:r,halfCheckedKeys:i,dragOverNodeKey:f,dropPosition:u,keyEntities:d}){const c=I(d,o);return{eventKey:o,expanded:e.indexOf(o)!==-1,selected:t.indexOf(o)!==-1,loaded:n.indexOf(o)!==-1,loading:s.indexOf(o)!==-1,checked:r.indexOf(o)!==-1,halfChecked:i.indexOf(o)!==-1,pos:String(c?c.pos:""),dragOver:f===o&&u===0,dragOverGapTop:f===o&&u===-1,dragOverGapBottom:f===o&&u===1}}function w(o){const{data:e,expanded:t,selected:n,checked:s,loaded:r,loading:i,halfChecked:f,dragOver:u,dragOverGapTop:d,dragOverGapBottom:c,pos:h,active:l,eventKey:g}=o,p={...e,expanded:t,selected:n,checked:s,loaded:r,loading:i,halfChecked:f,dragOver:u,dragOverGapTop:d,dragOverGapBottom:c,pos:h,active:l,key:g};return"props"in p||Object.defineProperty(p,"props",{get(){return X(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),o}}),p}function et(o,e){const t=new Set;return o.forEach(n=>{e.has(n)||t.add(n)}),t}function xt(o){const{disabled:e,disableCheckbox:t,checkable:n}=o||{};return!!(e||t)||n===!1}function Kt(o,e,t,n){const s=new Set(o),r=new Set;for(let f=0;f<=t;f+=1)(e.get(f)||new Set).forEach(d=>{const{key:c,node:h,children:l=[]}=d;s.has(c)&&!n(h)&&l.filter(g=>!n(g.node)).forEach(g=>{s.add(g.key)})});const i=new Set;for(let f=t;f>=0;f-=1)(e.get(f)||new Set).forEach(d=>{const{parent:c,node:h}=d;if(n(h)||!d.parent||i.has(d.parent.key))return;if(n(d.parent.node)){i.add(c.key);return}let l=!0,g=!1;(c.children||[]).filter(p=>!n(p.node)).forEach(({key:p})=>{const b=s.has(p);l&&!b&&(l=!1),!g&&(b||r.has(p))&&(g=!0)}),l&&s.add(c.key),g&&r.add(c.key),i.add(c.key)});return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(et(r,s))}}function Et(o,e,t,n,s){const r=new Set(o);let i=new Set(e);for(let u=0;u<=n;u+=1)(t.get(u)||new Set).forEach(c=>{const{key:h,node:l,children:g=[]}=c;!r.has(h)&&!i.has(h)&&!s(l)&&g.filter(p=>!s(p.node)).forEach(p=>{r.delete(p.key)})});i=new Set;const f=new Set;for(let u=n;u>=0;u-=1)(t.get(u)||new Set).forEach(c=>{const{parent:h,node:l}=c;if(s(l)||!c.parent||f.has(c.parent.key))return;if(s(c.parent.node)){f.add(h.key);return}let g=!0,p=!1;(h.children||[]).filter(b=>!s(b.node)).forEach(({key:b})=>{const N=r.has(b);g&&!N&&(g=!1),!p&&(N||i.has(b))&&(p=!0)}),g||r.delete(h.key),p&&i.add(h.key),f.add(h.key)});return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(et(i,r))}}function De(o,e,t,n){const s=[];let r;n?r=n:r=xt;const i=new Set(o.filter(c=>{const h=!!I(t,c);return h||s.push(c),h})),f=new Map;let u=0;Object.keys(t).forEach(c=>{const h=t[c],{level:l}=h;let g=f.get(l);g||(g=new Set,f.set(l,g)),g.add(h),u=Math.max(u,l)}),X(!s.length,`Tree missing follow keys: ${s.slice(0,100).map(c=>`'${c}'`).join(", ")}`);let d;return e===!0?d=Kt(i,f,u,r):d=Et(i,e.halfCheckedKeys,f,u,r),d}var Ct={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};function Pe(){return Pe=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Pe.apply(this,arguments)}const kt=(o,e)=>y.createElement(xe,Pe({},o,{ref:e,icon:Ct})),wt=y.forwardRef(kt);var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};function Te(){return Te=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Te.apply(this,arguments)}const Dt=(o,e)=>y.createElement(xe,Te({},o,{ref:e,icon:St})),$t=y.forwardRef(Dt);var Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};function Ie(){return Ie=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ie.apply(this,arguments)}const Pt=(o,e)=>y.createElement(xe,Ie({},o,{ref:e,icon:Ot})),Tt=y.forwardRef(Pt);var It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};function Me(){return Me=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Me.apply(this,arguments)}const Mt=(o,e)=>y.createElement(xe,Me({},o,{ref:e,icon:It})),Lt=y.forwardRef(Mt),je=y.createContext(null),Rt=y.createContext({}),At=({prefixCls:o,level:e,isStart:t,isEnd:n})=>{const s=`${o}-indent-unit`,r=[];for(let i=0;i<e;i+=1)r.push(y.createElement("span",{key:i,className:L(s,{[`${s}-start`]:t[i],[`${s}-end`]:n[i]})}));return y.createElement("span",{"aria-hidden":"true",className:`${o}-indent`},r)},jt=y.memo(At);function Le(){return Le=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Le.apply(this,arguments)}const qe="open",ze="close",Bt="---",be=o=>{const{eventKey:e,className:t,style:n,dragOver:s,dragOverGapTop:r,dragOverGapBottom:i,isLeaf:f,isStart:u,isEnd:d,expanded:c,selected:h,checked:l,halfChecked:g,loading:p,domRef:b,active:N,data:v,onMouseMove:C,selectable:E,...x}=o,a=K.useContext(je),{classNames:O,styles:k}=a||{},S=K.useContext(Rt),T=K.useRef(null),[P,R]=K.useState(!1),D=!!(a.disabled||o.disabled||S.nodeDisabled?.(v)),M=K.useMemo(()=>!a.checkable||o.checkable===!1?!1:a.checkable,[a.checkable,o.checkable]),ae=m=>{D||a.onNodeSelect(m,w(o))},ne=m=>{D||!M||o.disableCheckbox||a.onNodeCheck(m,w(o),!l)},ie=K.useMemo(()=>typeof E=="boolean"?E:a.selectable,[E,a.selectable]),Y=m=>{a.onNodeClick(m,w(o)),ie?ae(m):ne(m)},Q=m=>{a.onNodeDoubleClick(m,w(o))},oe=m=>{a.onNodeMouseEnter(m,w(o))},se=m=>{a.onNodeMouseLeave(m,w(o))},H=m=>{a.onNodeContextMenu(m,w(o))},A=K.useMemo(()=>!!(a.draggable&&(!a.draggable.nodeDraggable||a.draggable.nodeDraggable(v))),[a.draggable,v]),de=m=>{m.stopPropagation(),R(!0),a.onNodeDragStart(m,o);try{m.dataTransfer.setData("text/plain","")}catch{}},U=m=>{m.preventDefault(),m.stopPropagation(),a.onNodeDragEnter(m,o)},le=m=>{m.preventDefault(),m.stopPropagation(),a.onNodeDragOver(m,o)},J=m=>{m.stopPropagation(),a.onNodeDragLeave(m,o)},V=m=>{m.stopPropagation(),R(!1),a.onNodeDragEnd(m,o)},Z=m=>{m.preventDefault(),m.stopPropagation(),R(!1),a.onNodeDrop(m,o)},ue=m=>{p||a.onNodeExpand(m,w(o))},ee=K.useMemo(()=>{const{children:m}=I(a.keyEntities,e)||{};return!!(m||[]).length},[a.keyEntities,e]),W=K.useMemo(()=>f===!1?!1:f||!a.loadData&&!ee||a.loadData&&o.loaded&&!ee,[f,a.loadData,ee,o.loaded]);K.useEffect(()=>{p||typeof a.loadData=="function"&&c&&!W&&!o.loaded&&a.onNodeLoad(w(o))},[p,a.loadData,a.onNodeLoad,c,W,o]);const ge=K.useMemo(()=>a.draggable?.icon?K.createElement("span",{className:`${a.prefixCls}-draggable-icon`},a.draggable.icon):null,[a.draggable]),$=m=>{const q=o.switcherIcon||a.switcherIcon;return typeof q=="function"?q({...o,isLeaf:m}):q},_=()=>{if(W){const q=$(!0);return q!==!1?K.createElement("span",{className:L(`${a.prefixCls}-switcher`,`${a.prefixCls}-switcher-noop`)},q):null}const m=$(!1);return m!==!1?K.createElement("span",{onClick:ue,className:L(`${a.prefixCls}-switcher`,`${a.prefixCls}-switcher_${c?qe:ze}`)},m):null},z=K.useMemo(()=>{if(!M)return null;const m=typeof M!="boolean"?M:null;return K.createElement("span",{className:L(`${a.prefixCls}-checkbox`,{[`${a.prefixCls}-checkbox-checked`]:l,[`${a.prefixCls}-checkbox-indeterminate`]:!l&&g,[`${a.prefixCls}-checkbox-disabled`]:D||o.disableCheckbox}),onClick:ne,role:"checkbox","aria-checked":g?"mixed":l,"aria-disabled":D||o.disableCheckbox,"aria-label":`Select ${typeof o.title=="string"?o.title:"tree node"}`},m)},[M,l,g,D,o.disableCheckbox,o.title]),j=K.useMemo(()=>W?null:c?qe:ze,[W,c]),B=K.useMemo(()=>K.createElement("span",{className:L(O?.itemIcon,`${a.prefixCls}-iconEle`,`${a.prefixCls}-icon__${j||"docu"}`,{[`${a.prefixCls}-icon_loading`]:p}),style:k?.itemIcon}),[a.prefixCls,j,p]),Ke=K.useMemo(()=>{const m=!!a.draggable;return!o.disabled&&m&&a.dragOverNodeKey===e?a.dropIndicatorRender({dropPosition:a.dropPosition,dropLevelOffset:a.dropLevelOffset,indent:a.indent,prefixCls:a.prefixCls,direction:a.direction}):null},[a.dropPosition,a.dropLevelOffset,a.indent,a.prefixCls,a.direction,a.draggable,a.dragOverNodeKey,a.dropIndicatorRender]),Ee=K.useMemo(()=>{const{title:m=Bt}=o,q=`${a.prefixCls}-node-content-wrapper`;let we;if(a.showIcon){const ye=o.icon||a.icon;we=ye?K.createElement("span",{className:L(O?.itemIcon,`${a.prefixCls}-iconEle`,`${a.prefixCls}-icon__customize`),style:k?.itemIcon},typeof ye=="function"?ye(o):ye):B}else a.loadData&&p&&(we=B);let pe;return typeof m=="function"?pe=m(v):a.titleRender?pe=a.titleRender(v):pe=m,K.createElement("span",{ref:T,title:typeof m=="string"?m:"",className:L(q,`${q}-${j||"normal"}`,{[`${a.prefixCls}-node-selected`]:!D&&(h||P)}),onMouseEnter:oe,onMouseLeave:se,onContextMenu:H,onClick:Y,onDoubleClick:Q},we,K.createElement("span",{className:L(`${a.prefixCls}-title`,O?.itemTitle),style:k?.itemTitle},pe),Ke)},[a.prefixCls,a.showIcon,o,a.icon,B,a.titleRender,v,j,oe,se,H,Y,Q]),Ce=Je(x,{aria:!0,data:!0}),{level:ke}=I(a.keyEntities,e)||{},nt=d[d.length-1],He=!D&&A,ot=a.draggingNodeKey===e,st=E!==void 0?{"aria-selected":!!E}:void 0;return K.createElement("div",Le({ref:b,role:"treeitem","aria-expanded":f?void 0:c,className:L(t,`${a.prefixCls}-treenode`,O?.item,{[`${a.prefixCls}-treenode-disabled`]:D,[`${a.prefixCls}-treenode-switcher-${c?"open":"close"}`]:!f,[`${a.prefixCls}-treenode-checkbox-checked`]:l,[`${a.prefixCls}-treenode-checkbox-indeterminate`]:g,[`${a.prefixCls}-treenode-selected`]:h,[`${a.prefixCls}-treenode-loading`]:p,[`${a.prefixCls}-treenode-active`]:N,[`${a.prefixCls}-treenode-leaf-last`]:nt,[`${a.prefixCls}-treenode-draggable`]:A,dragging:ot,"drop-target":a.dropTargetKey===e,"drop-container":a.dropContainerKey===e,"drag-over":!D&&s,"drag-over-gap-top":!D&&r,"drag-over-gap-bottom":!D&&i,"filter-node":a.filterTreeNode?.(w(o)),[`${a.prefixCls}-treenode-leaf`]:W}),style:{...n,...k?.item},draggable:He,onDragStart:He?de:void 0,onDragEnter:A?U:void 0,onDragOver:A?le:void 0,onDragLeave:A?J:void 0,onDrop:A?Z:void 0,onDragEnd:A?V:void 0,onMouseMove:C},st,Ce),K.createElement(jt,{prefixCls:a.prefixCls,level:ke,isStart:u,isEnd:d}),ge,_(),z,Ee)};be.isTreeNode=1;function F(o,e){if(!o)return[];const t=o.slice(),n=t.indexOf(e);return n>=0&&t.splice(n,1),t}function G(o,e){const t=(o||[]).slice();return t.indexOf(e)===-1&&t.push(e),t}function Be(o){return o.split("-")}function Ht(o,e){const t=[],n=I(e,o);function s(r=[]){r.forEach(({key:i,children:f})=>{t.push(i),s(f)})}return s(n.children),t}function _t(o){if(o.parent){const e=Be(o.pos);return Number(e[e.length-1])===o.parent.children.length-1}return!1}function qt(o){const e=Be(o.pos);return Number(e[e.length-1])===0}function Fe(o,e,t,n,s,r,i,f,u,d){const{clientX:c,clientY:h}=o,{top:l,height:g}=o.target.getBoundingClientRect(),b=((d==="rtl"?-1:1)*((s?.x||0)-c)-12)/n,N=u.filter(P=>f[P]?.children?.length);let v=I(f,t.eventKey);if(h<l+g/2){const P=i.findIndex(M=>M.key===v.key),R=P<=0?0:P-1,D=i[R].key;v=I(f,D)}const C=v.key,E=v,x=v.key;let a=0,O=0;if(!N.includes(C))for(let P=0;P<b&&_t(v);P+=1)v=v.parent,O+=1;const k=e.data,S=v.node;let T=!0;return qt(v)&&v.level===0&&h<l+g/2&&r({dragNode:k,dropNode:S,dropPosition:-1})&&v.key===t.eventKey?a=-1:(E.children||[]).length&&N.includes(x)?r({dragNode:k,dropNode:S,dropPosition:0})?a=0:T=!1:O===0?b>-1.5?r({dragNode:k,dropNode:S,dropPosition:1})?a=1:T=!1:r({dragNode:k,dropNode:S,dropPosition:0})?a=0:r({dragNode:k,dropNode:S,dropPosition:1})?a=1:T=!1:r({dragNode:k,dropNode:S,dropPosition:1})?a=1:T=!1,{dropPosition:a,dropLevelOffset:O,dropTargetKey:v.key,dropTargetPos:v.pos,dragOverNodeKey:x,dropContainerKey:a===0?null:v.parent?.key||null,dropAllowed:T}}function Ue(o,e){if(!o)return;const{multiple:t}=e;return t?o.slice():o.length?[o[0]]:o}function $e(o){if(!o)return null;let e;if(Array.isArray(o))e={checkedKeys:o,halfCheckedKeys:void 0};else if(typeof o=="object")e={checkedKeys:o.checked||void 0,halfCheckedKeys:o.halfChecked||void 0};else return X(!1,"`checkedKeys` is not an array or an object"),null;return e}function Ve(o,e){const t=new Set;function n(s){if(t.has(s))return;const r=I(e,s);if(!r)return;t.add(s);const{parent:i,node:f}=r;f.disabled||i&&n(i.key)}return(o||[]).forEach(s=>{n(s)}),[...t]}const zt=o=>{const{dropPosition:e,dropLevelOffset:t,indent:n}=o,s={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:s.top=0,s.left=-t*n;break;case 1:s.bottom=0,s.left=-t*n;break;case 0:s.bottom=0,s.left=n;break}return K.createElement("div",{style:s})};function Ft(o,e){const[t,n]=y.useState(!1);me(()=>{if(t)return o(),()=>{e()}},[t]),me(()=>(n(!0),()=>{n(!1)}),[])}function fe(){return fe=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},fe.apply(this,arguments)}const Ut=y.forwardRef((o,e)=>{const{className:t,style:n,motion:s,motionNodes:r,motionType:i,onMotionStart:f,onMotionEnd:u,active:d,treeNodeRequiredProps:c,...h}=o,[l,g]=y.useState(!0),{prefixCls:p}=y.useContext(je),b=r&&i!=="hide";me(()=>{r&&b!==l&&g(b)},[r]);const N=()=>{r&&f()},v=y.useRef(!1),C=()=>{r&&!v.current&&(v.current=!0,u())};Ft(N,C);const E=x=>{b===x&&C()};return r?y.createElement(it,fe({ref:e,visible:l},s,{motionAppear:i==="show",onVisibleChanged:E}),({className:x,style:a},O)=>y.createElement("div",{ref:O,className:L(`${p}-treenode-motion`,x),style:a},r.map(k=>{const{data:{...S},title:T,key:P,isStart:R,isEnd:D}=k;delete S.children;const M=ce(P,c);return y.createElement(be,fe({},S,M,{title:T,active:d,data:k.data,key:P,isStart:R,isEnd:D}))}))):y.createElement(be,fe({domRef:e,className:t,style:n},h,{active:d}))});function Vt(o=[],e=[]){const t=o.length,n=e.length;if(Math.abs(t-n)!==1)return{add:!1,key:null};function s(r,i){const f=new Map;r.forEach(d=>{f.set(d,!0)});const u=i.filter(d=>!f.has(d));return u.length===1?u[0]:null}return t<n?{add:!0,key:s(o,e)}:{add:!1,key:s(e,o)}}function We(o,e,t){const n=o.findIndex(i=>i.key===t),s=o[n+1],r=e.findIndex(i=>i.key===t);if(s){const i=e.findIndex(f=>f.key===s.key);return e.slice(r+1,i)}return e.slice(r+1)}function Ne(){return Ne=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ne.apply(this,arguments)}const Ge={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Wt=()=>{},te=`RC_TREE_MOTION_${Math.random()}`,Re={key:te},tt={key:te,level:0,index:0,pos:"0",node:Re,nodes:[Re]},Xe={parent:null,children:[],pos:tt.pos,data:Re,title:null,key:te,isStart:[],isEnd:[]};function Ye(o,e,t,n){return e===!1||!t?o:o.slice(0,Math.ceil(t/n)+1)}function Qe(o){const{key:e,pos:t}=o;return he(e,t)}function Gt(o){let e=String(o.data.key),t=o;for(;t.parent;)t=t.parent,e=`${t.data.key} > ${e}`;return e}const Xt=y.forwardRef((o,e)=>{const{prefixCls:t,data:n,selectable:s,checkable:r,expandedKeys:i,selectedKeys:f,checkedKeys:u,loadedKeys:d,loadingKeys:c,halfCheckedKeys:h,keyEntities:l,disabled:g,dragging:p,dragOverNodeKey:b,dropPosition:N,motion:v,height:C,itemHeight:E,virtual:x,scrollWidth:a,focusable:O,activeItem:k,focused:S,tabIndex:T,onKeyDown:P,onFocus:R,onBlur:D,onActiveChange:M,onListChangeStart:ae,onListChangeEnd:ne,...ie}=o,Y=y.useRef(null),Q=y.useRef(null);y.useImperativeHandle(e,()=>({scrollTo:$=>{Y.current.scrollTo($)},getIndentWidth:()=>Q.current.offsetWidth}));const[oe,se]=y.useState(i),[H,A]=y.useState(n),[de,U]=y.useState(n),[le,J]=y.useState([]),[V,Z]=y.useState(null),ue=y.useRef(n);ue.current=n;function ee(){const $=ue.current;A($),U($),J([]),Z(null),ne()}me(()=>{se(i);const $=Vt(oe,i);if($.key!==null)if($.add){const _=H.findIndex(({key:B})=>B===$.key),z=Ye(We(H,n,$.key),x,C,E),j=H.slice();j.splice(_+1,0,Xe),U(j),J(z),Z("show")}else{const _=n.findIndex(({key:B})=>B===$.key),z=Ye(We(n,H,$.key),x,C,E),j=n.slice();j.splice(_+1,0,Xe),U(j),J(z),Z("hide")}else H!==n&&(A(n),U(n))},[i,n]),y.useEffect(()=>{p||ee()},[p]);const W=v?de:n,ge={expandedKeys:i,selectedKeys:f,loadedKeys:d,loadingKeys:c,checkedKeys:u,halfCheckedKeys:h,dragOverNodeKey:b,dropPosition:N,keyEntities:l};return y.createElement(y.Fragment,null,S&&k&&y.createElement("span",{style:Ge,"aria-live":"assertive"},Gt(k)),y.createElement("div",null,y.createElement("input",{style:Ge,disabled:O===!1||g,tabIndex:O!==!1?T:null,onKeyDown:P,onFocus:R,onBlur:D,value:"",onChange:Wt,"aria-label":"for screen reader"})),y.createElement("div",{className:`${t}-treenode`,"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},y.createElement("div",{className:`${t}-indent`},y.createElement("div",{ref:Q,className:`${t}-indent-unit`}))),y.createElement(pt,Ne({},ie,{data:W,itemKey:Qe,height:C,fullHeight:!1,virtual:x,itemHeight:E,scrollWidth:a,prefixCls:`${t}-list`,ref:Y,role:"tree",onVisibleChange:$=>{$.every(_=>Qe(_)!==te)&&ee()}}),$=>{const{pos:_,data:{...z},title:j,key:B,isStart:Ke,isEnd:Ee}=$,Ce=he(B,_);delete z.key,delete z.children;const ke=ce(Ce,ge);return y.createElement(Ut,Ne({},z,ke,{title:j,active:!!k&&B===k.key,pos:_,data:$.data,isStart:Ke,isEnd:Ee,motion:v,motionNodes:B===te?le:null,motionType:V,onMotionStart:ae,onMotionEnd:ee,treeNodeRequiredProps:ge,onMouseMove:()=>{M(null)}}))}))});function Ae(){return Ae=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ae.apply(this,arguments)}const Yt=10;class ln extends y.Component{static defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:zt,allowDrop:()=>!0,expandAction:!1};static TreeNode=be;destroyed=!1;delayedDragEnterLogic;loadingRetryTimes={};state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:ve()};dragStartMousePosition=null;dragNodeProps=null;currentMouseOverDroppableNodeKey=null;listRef=y.createRef();componentDidMount(){this.destroyed=!1,this.onUpdated()}componentDidUpdate(){this.onUpdated()}onUpdated(){const{activeKey:e,itemScrollOffset:t=0}=this.props;e!==void 0&&e!==this.state.activeKey&&(this.setState({activeKey:e}),e!==null&&this.scrollTo({key:e,offset:t}))}componentWillUnmount(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}static getDerivedStateFromProps(e,t){const{prevProps:n}=t,s={prevProps:e};function r(d){return!n&&e.hasOwnProperty(d)||n&&n[d]!==e[d]}let i,{fieldNames:f}=t;if(r("fieldNames")&&(f=ve(e.fieldNames),s.fieldNames=f),r("treeData")?{treeData:i}=e:r("children")&&(X(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=vt(e.children)),i){s.treeData=i;const d=Nt(i,{fieldNames:f});s.keyEntities={[te]:tt,...d.keyEntities}}const u=s.keyEntities||t.keyEntities;if(r("expandedKeys")||n&&r("autoExpandParent"))s.expandedKeys=e.autoExpandParent||!n&&e.defaultExpandParent?Ve(e.expandedKeys,u):e.expandedKeys;else if(!n&&e.defaultExpandAll){const d={...u};delete d[te];const c=[];Object.keys(d).forEach(h=>{const l=d[h];l.children&&l.children.length&&c.push(l.key)}),s.expandedKeys=c}else!n&&e.defaultExpandedKeys&&(s.expandedKeys=e.autoExpandParent||e.defaultExpandParent?Ve(e.defaultExpandedKeys,u):e.defaultExpandedKeys);if(s.expandedKeys||delete s.expandedKeys,i||s.expandedKeys){const d=Se(i||t.treeData,s.expandedKeys||t.expandedKeys,f);s.flattenNodes=d}if(e.selectable&&(r("selectedKeys")?s.selectedKeys=Ue(e.selectedKeys,e):!n&&e.defaultSelectedKeys&&(s.selectedKeys=Ue(e.defaultSelectedKeys,e))),e.checkable){let d;if(r("checkedKeys")?d=$e(e.checkedKeys)||{}:!n&&e.defaultCheckedKeys?d=$e(e.defaultCheckedKeys)||{}:i&&(d=$e(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),d){let{checkedKeys:c=[],halfCheckedKeys:h=[]}=d;e.checkStrictly||({checkedKeys:c,halfCheckedKeys:h}=De(c,!0,u)),s.checkedKeys=c,s.halfCheckedKeys=h}}return r("loadedKeys")&&(s.loadedKeys=e.loadedKeys),s}onNodeDragStart=(e,t)=>{const{expandedKeys:n,keyEntities:s}=this.state,{onDragStart:r}=this.props,{eventKey:i}=t;this.dragNodeProps=t,this.dragStartMousePosition={x:e.clientX,y:e.clientY};const f=F(n,i);this.setState({draggingNodeKey:i,dragChildrenKeys:Ht(i,s),indent:this.listRef.current.getIndentWidth()}),this.setExpandedKeys(f),window.addEventListener("dragend",this.onWindowDragEnd),r?.({event:e,node:w(t)})};onNodeDragEnter=(e,t)=>{const{expandedKeys:n,keyEntities:s,dragChildrenKeys:r,flattenNodes:i,indent:f}=this.state,{onDragEnter:u,onExpand:d,allowDrop:c,direction:h}=this.props,{pos:l,eventKey:g}=t;if(this.currentMouseOverDroppableNodeKey!==g&&(this.currentMouseOverDroppableNodeKey=g),!this.dragNodeProps){this.resetDragState();return}const{dropPosition:p,dropLevelOffset:b,dropTargetKey:N,dropContainerKey:v,dropTargetPos:C,dropAllowed:E,dragOverNodeKey:x}=Fe(e,this.dragNodeProps,t,f,this.dragStartMousePosition,c,i,s,n,h);if(r.includes(N)||!E){this.resetDragState();return}if(this.delayedDragEnterLogic||(this.delayedDragEnterLogic={}),Object.keys(this.delayedDragEnterLogic).forEach(a=>{clearTimeout(this.delayedDragEnterLogic[a])}),this.dragNodeProps.eventKey!==t.eventKey&&(e.persist(),this.delayedDragEnterLogic[l]=window.setTimeout(()=>{if(this.state.draggingNodeKey===null)return;let a=[...n];const O=I(s,t.eventKey);O&&(O.children||[]).length&&(a=G(n,t.eventKey)),this.props.hasOwnProperty("expandedKeys")||this.setExpandedKeys(a),d?.(a,{node:w(t),expanded:!0,nativeEvent:e.nativeEvent})},800)),this.dragNodeProps.eventKey===N&&b===0){this.resetDragState();return}this.setState({dragOverNodeKey:x,dropPosition:p,dropLevelOffset:b,dropTargetKey:N,dropContainerKey:v,dropTargetPos:C,dropAllowed:E}),u?.({event:e,node:w(t),expandedKeys:n})};onNodeDragOver=(e,t)=>{const{dragChildrenKeys:n,flattenNodes:s,keyEntities:r,expandedKeys:i,indent:f}=this.state,{onDragOver:u,allowDrop:d,direction:c}=this.props;if(!this.dragNodeProps)return;const{dropPosition:h,dropLevelOffset:l,dropTargetKey:g,dropContainerKey:p,dropTargetPos:b,dropAllowed:N,dragOverNodeKey:v}=Fe(e,this.dragNodeProps,t,f,this.dragStartMousePosition,d,s,r,i,c);n.includes(g)||!N||(this.dragNodeProps.eventKey===g&&l===0?this.state.dropPosition===null&&this.state.dropLevelOffset===null&&this.state.dropTargetKey===null&&this.state.dropContainerKey===null&&this.state.dropTargetPos===null&&this.state.dropAllowed===!1&&this.state.dragOverNodeKey===null||this.resetDragState():h===this.state.dropPosition&&l===this.state.dropLevelOffset&&g===this.state.dropTargetKey&&p===this.state.dropContainerKey&&b===this.state.dropTargetPos&&N===this.state.dropAllowed&&v===this.state.dragOverNodeKey||this.setState({dropPosition:h,dropLevelOffset:l,dropTargetKey:g,dropContainerKey:p,dropTargetPos:b,dropAllowed:N,dragOverNodeKey:v}),u?.({event:e,node:w(t)}))};onNodeDragLeave=(e,t)=>{this.currentMouseOverDroppableNodeKey===t.eventKey&&!e.currentTarget.contains(e.relatedTarget)&&(this.resetDragState(),this.currentMouseOverDroppableNodeKey=null);const{onDragLeave:n}=this.props;n?.({event:e,node:w(t)})};onWindowDragEnd=e=>{this.onNodeDragEnd(e,null,!0),window.removeEventListener("dragend",this.onWindowDragEnd)};onNodeDragEnd=(e,t)=>{const{onDragEnd:n}=this.props;this.setState({dragOverNodeKey:null}),this.cleanDragState(),n?.({event:e,node:w(t)}),this.dragNodeProps=null,window.removeEventListener("dragend",this.onWindowDragEnd)};onNodeDrop=(e,t,n=!1)=>{const{dragChildrenKeys:s,dropPosition:r,dropTargetKey:i,dropTargetPos:f,dropAllowed:u}=this.state;if(!u)return;const{onDrop:d}=this.props;if(this.setState({dragOverNodeKey:null}),this.cleanDragState(),i===null)return;const c={...ce(i,this.getTreeNodeRequiredProps()),active:this.getActiveItem()?.key===i,data:I(this.state.keyEntities,i).node},h=s.includes(i);X(!h,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");const l=Be(f),g={event:e,node:w(c),dragNode:this.dragNodeProps?w(this.dragNodeProps):null,dragNodesKeys:[this.dragNodeProps.eventKey].concat(s),dropToGap:r!==0,dropPosition:r+Number(l[l.length-1])};n||d?.(g),this.dragNodeProps=null};resetDragState(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}cleanDragState=()=>{const{draggingNodeKey:e}=this.state;e!==null&&this.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),this.dragStartMousePosition=null,this.currentMouseOverDroppableNodeKey=null};triggerExpandActionExpand=(e,t)=>{const{expandedKeys:n,flattenNodes:s}=this.state,{expanded:r,key:i,isLeaf:f}=t;if(f||e.shiftKey||e.metaKey||e.ctrlKey)return;const u=s.filter(c=>c.key===i)[0],d=w({...ce(i,this.getTreeNodeRequiredProps()),data:u.data});this.setExpandedKeys(r?F(n,i):G(n,i)),this.onNodeExpand(e,d)};onNodeClick=(e,t)=>{const{onClick:n,expandAction:s}=this.props;s==="click"&&this.triggerExpandActionExpand(e,t),n?.(e,t)};onNodeDoubleClick=(e,t)=>{const{onDoubleClick:n,expandAction:s}=this.props;s==="doubleClick"&&this.triggerExpandActionExpand(e,t),n?.(e,t)};onNodeSelect=(e,t)=>{let{selectedKeys:n}=this.state;const{keyEntities:s,fieldNames:r}=this.state,{onSelect:i,multiple:f}=this.props,{selected:u}=t,d=t[r.key],c=!u;c?f?n=G(n,d):n=[d]:n=F(n,d);const h=n.map(l=>{const g=I(s,l);return g?g.node:null}).filter(Boolean);this.setUncontrolledState({selectedKeys:n}),i?.(n,{event:"select",selected:c,node:t,selectedNodes:h,nativeEvent:e.nativeEvent})};onNodeCheck=(e,t,n)=>{const{keyEntities:s,checkedKeys:r,halfCheckedKeys:i}=this.state,{checkStrictly:f,onCheck:u}=this.props,{key:d}=t;let c;const h={event:"check",node:t,checked:n,nativeEvent:e.nativeEvent};if(f){const l=n?G(r,d):F(r,d),g=F(i,d);c={checked:l,halfChecked:g},h.checkedNodes=l.map(p=>I(s,p)).filter(Boolean).map(p=>p.node),this.setUncontrolledState({checkedKeys:l})}else{let{checkedKeys:l,halfCheckedKeys:g}=De([...r,d],!0,s);if(!n){const p=new Set(l);p.delete(d),{checkedKeys:l,halfCheckedKeys:g}=De(Array.from(p),{halfCheckedKeys:g},s)}c=l,h.checkedNodes=[],h.checkedNodesPositions=[],h.halfCheckedKeys=g,l.forEach(p=>{const b=I(s,p);if(!b)return;const{node:N,pos:v}=b;h.checkedNodes.push(N),h.checkedNodesPositions.push({node:N,pos:v})}),this.setUncontrolledState({checkedKeys:l},!1,{halfCheckedKeys:g})}u?.(c,h)};onNodeLoad=e=>{const{key:t}=e,{keyEntities:n}=this.state;if(I(n,t)?.children?.length)return;const r=new Promise((i,f)=>{this.setState(({loadedKeys:u=[],loadingKeys:d=[]})=>{const{loadData:c,onLoad:h}=this.props;return!c||u.includes(t)||d.includes(t)?null:(c(e).then(()=>{const{loadedKeys:g}=this.state,p=G(g,t);h?.(p,{event:"load",node:e}),this.setUncontrolledState({loadedKeys:p}),this.setState(b=>({loadingKeys:F(b.loadingKeys,t)})),i()}).catch(g=>{if(this.setState(p=>({loadingKeys:F(p.loadingKeys,t)})),this.loadingRetryTimes[t]=(this.loadingRetryTimes[t]||0)+1,this.loadingRetryTimes[t]>=Yt){const{loadedKeys:p}=this.state;X(!1,"Retry for `loadData` many times but still failed. No more retry."),this.setUncontrolledState({loadedKeys:G(p,t)}),i()}f(g)}),{loadingKeys:G(d,t)})})});return r.catch(()=>{}),r};onNodeMouseEnter=(e,t)=>{const{onMouseEnter:n}=this.props;n?.({event:e,node:t})};onNodeMouseLeave=(e,t)=>{const{onMouseLeave:n}=this.props;n?.({event:e,node:t})};onNodeContextMenu=(e,t)=>{const{onRightClick:n}=this.props;n&&(e.preventDefault(),n({event:e,node:t}))};onFocus=(...e)=>{const{onFocus:t}=this.props;this.setState({focused:!0}),t?.(...e)};onBlur=(...e)=>{const{onBlur:t}=this.props;this.setState({focused:!1}),this.onActiveChange(null),t?.(...e)};getTreeNodeRequiredProps=()=>{const{expandedKeys:e,selectedKeys:t,loadedKeys:n,loadingKeys:s,checkedKeys:r,halfCheckedKeys:i,dragOverNodeKey:f,dropPosition:u,keyEntities:d}=this.state;return{expandedKeys:e||[],selectedKeys:t||[],loadedKeys:n||[],loadingKeys:s||[],checkedKeys:r||[],halfCheckedKeys:i||[],dragOverNodeKey:f,dropPosition:u,keyEntities:d}};setExpandedKeys=e=>{const{treeData:t,fieldNames:n}=this.state,s=Se(t,e,n);this.setUncontrolledState({expandedKeys:e,flattenNodes:s},!0)};onNodeExpand=(e,t)=>{let{expandedKeys:n}=this.state;const{listChanging:s,fieldNames:r}=this.state,{onExpand:i,loadData:f}=this.props,{expanded:u}=t,d=t[r.key];if(s)return;const c=n.includes(d),h=!u;if(X(u&&c||!u&&!c,"Expand state not sync with index check"),n=h?G(n,d):F(n,d),this.setExpandedKeys(n),i?.(n,{node:t,expanded:h,nativeEvent:e.nativeEvent}),h&&f){const l=this.onNodeLoad(t);l&&l.then(()=>{const g=Se(this.state.treeData,n,r);this.setUncontrolledState({flattenNodes:g})}).catch(()=>{const{expandedKeys:g}=this.state,p=F(g,d);this.setExpandedKeys(p)})}};onListChangeStart=()=>{this.setUncontrolledState({listChanging:!0})};onListChangeEnd=()=>{setTimeout(()=>{this.setUncontrolledState({listChanging:!1})})};onActiveChange=e=>{const{activeKey:t}=this.state,{onActiveChange:n,itemScrollOffset:s=0}=this.props;t!==e&&(this.setState({activeKey:e}),e!==null&&this.scrollTo({key:e,offset:s}),n?.(e))};getActiveItem=()=>{const{activeKey:e,flattenNodes:t}=this.state;return e===null?null:t.find(({key:n})=>n===e)||null};offsetActiveKey=e=>{const{flattenNodes:t,activeKey:n}=this.state;let s=t.findIndex(({key:i})=>i===n);s===-1&&e<0&&(s=t.length),s=(s+e+t.length)%t.length;const r=t[s];if(r){const{key:i}=r;this.onActiveChange(i)}else this.onActiveChange(null)};onKeyDown=e=>{const{activeKey:t,expandedKeys:n,checkedKeys:s,fieldNames:r}=this.state,{onKeyDown:i,checkable:f,selectable:u}=this.props;switch(e.which){case re.UP:{this.offsetActiveKey(-1),e.preventDefault();break}case re.DOWN:{this.offsetActiveKey(1),e.preventDefault();break}}const d=this.getActiveItem();if(d&&d.data){const c=this.getTreeNodeRequiredProps(),h=d.data.isLeaf===!1||!!(d.data[r.children]||[]).length,l=w({...ce(t,c),data:d.data,active:!0});switch(e.which){case re.LEFT:{h&&n.includes(t)?this.onNodeExpand({},l):d.parent&&this.onActiveChange(d.parent.key),e.preventDefault();break}case re.RIGHT:{h&&!n.includes(t)?this.onNodeExpand({},l):d.children&&d.children.length&&this.onActiveChange(d.children[0].key),e.preventDefault();break}case re.ENTER:case re.SPACE:{f&&!l.disabled&&l.checkable!==!1&&!l.disableCheckbox?this.onNodeCheck({},l,!s.includes(t)):!f&&u&&!l.disabled&&l.selectable!==!1&&this.onNodeSelect({},l);break}}}i?.(e)};setUncontrolledState=(e,t=!1,n=null)=>{if(!this.destroyed){let s=!1,r=!0;const i={};Object.keys(e).forEach(f=>{if(this.props.hasOwnProperty(f)){r=!1;return}s=!0,i[f]=e[f]}),s&&(!t||r)&&this.setState({...i,...n})}};scrollTo=e=>{this.listRef.current.scrollTo(e)};render(){const{focused:e,flattenNodes:t,keyEntities:n,draggingNodeKey:s,activeKey:r,dropLevelOffset:i,dropContainerKey:f,dropTargetKey:u,dropPosition:d,dragOverNodeKey:c,indent:h}=this.state,{prefixCls:l,className:g,style:p,styles:b,classNames:N,showLine:v,focusable:C,tabIndex:E=0,selectable:x,showIcon:a,icon:O,switcherIcon:k,draggable:S,checkable:T,checkStrictly:P,disabled:R,motion:D,loadData:M,filterTreeNode:ae,height:ne,itemHeight:ie,scrollWidth:Y,virtual:Q,titleRender:oe,dropIndicatorRender:se,onContextMenu:H,onScroll:A,direction:de,rootClassName:U,rootStyle:le}=this.props,J=Je(this.props,{aria:!0,data:!0});let V;S&&(typeof S=="object"?V=S:typeof S=="function"?V={nodeDraggable:S}:V={});const Z={styles:b,classNames:N,prefixCls:l,selectable:x,showIcon:a,icon:O,switcherIcon:k,draggable:V,draggingNodeKey:s,checkable:T,checkStrictly:P,disabled:R,keyEntities:n,dropLevelOffset:i,dropContainerKey:f,dropTargetKey:u,dropPosition:d,dragOverNodeKey:c,indent:h,direction:de,dropIndicatorRender:se,loadData:M,filterTreeNode:ae,titleRender:oe,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return y.createElement(je.Provider,{value:Z},y.createElement("div",{className:L(l,g,U,{[`${l}-show-line`]:v,[`${l}-focused`]:e,[`${l}-active-focused`]:r!==null}),style:le},y.createElement(Xt,Ae({ref:this.listRef,prefixCls:l,style:p,data:t,disabled:R,selectable:x,checkable:!!T,motion:D,dragging:s!==null,height:ne,itemHeight:ie,virtual:Q,focusable:C,focused:e,tabIndex:E,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:H,onScroll:A,scrollWidth:Y},this.getTreeNodeRequiredProps(),J))))}}const Qt=({treeCls:o,treeNodeCls:e,directoryNodeSelectedBg:t,directoryNodeSelectedColor:n,motionDurationMid:s,borderRadius:r,controlItemBgHover:i})=>({[`${o}${o}-directory ${e}`]:{[`${o}-node-content-wrapper`]:{position:"static",[`&:has(${o}-drop-indicator)`]:{position:"relative"},[`> *:not(${o}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${s}`,content:'""',borderRadius:r},"&:hover:before":{background:i}},[`${o}-switcher, ${o}-checkbox, ${o}-draggable-icon`]:{zIndex:1},"&-selected":{background:t,borderRadius:r,[`${o}-switcher, ${o}-draggable-icon`]:{color:n},[`${o}-node-content-wrapper`]:{color:n,background:"transparent","&, &:hover":{color:n},"&:before, &:hover:before":{background:t}}}}}),Jt=new lt("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),Zt=(o,e)=>({[`.${o}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${e.motionDurationSlow}`}}}),en=(o,e)=>({[`.${o}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:e.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${Oe(e.lineWidthBold)} solid ${e.colorPrimary}`,borderRadius:"50%",content:'""'}}}),tn=(o,e)=>{const{treeCls:t,treeNodeCls:n,treeNodePadding:s,titleHeight:r,indentSize:i,nodeSelectedBg:f,nodeHoverBg:u,colorTextQuaternary:d,controlItemBgActiveDisabled:c}=e;return{[t]:{...ft(e),"--rc-virtual-list-scrollbar-bg":e.colorSplit,background:e.colorBgContainer,borderRadius:e.borderRadius,transition:`background-color ${e.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${t}-rtl ${t}-switcher_close ${t}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${t}-active-focused)`]:ct(e),[`${t}-list-holder-inner`]:{alignItems:"flex-start"},[`&${t}-block-node`]:{[`${t}-list-holder-inner`]:{alignItems:"stretch",[`${t}-node-content-wrapper`]:{flex:"auto"},[`${n}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${e.colorPrimary}`,opacity:0,animationName:Jt,animationDuration:e.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:e.borderRadius}}},[n]:{display:"flex",alignItems:"flex-start",marginBottom:s,lineHeight:Oe(r),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:s},[`&-disabled ${t}-node-content-wrapper`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${t}-checkbox-disabled + ${t}-node-selected,&${n}-disabled${n}-selected ${t}-node-content-wrapper`]:{backgroundColor:c},[`${t}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${n}-disabled)`]:{[`${t}-node-content-wrapper`]:{"&:hover":{color:e.nodeHoverColor}}},[`&-active ${t}-node-content-wrapper`]:{background:e.controlItemBgHover},[`&:not(${n}-disabled).filter-node ${t}-title`]:{color:e.colorPrimary,fontWeight:e.fontWeightStrong},"&-draggable":{cursor:"grab",[`${t}-draggable-icon`]:{flexShrink:0,width:r,textAlign:"center",visibility:"visible",color:d},[`&${n}-disabled ${t}-draggable-icon`]:{visibility:"hidden"}}},[`${t}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:i}},[`${t}-draggable-icon`]:{visibility:"hidden"},[`${t}-switcher, ${t}-checkbox`]:{marginInlineEnd:e.calc(e.calc(r).sub(e.controlInteractiveSize)).div(2).equal()},[`${t}-switcher`]:{...Zt(o,e),position:"relative",flex:"none",alignSelf:"stretch",width:r,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${e.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:r,height:r,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`},[`&:not(${t}-switcher-noop):hover:before`]:{backgroundColor:e.colorBgTextHover},[`&_close ${t}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:e.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:e.calc(r).div(2).equal(),bottom:e.calc(s).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:e.calc(e.calc(r).div(2).equal()).mul(.8).equal(),height:e.calc(r).div(2).equal(),borderBottom:`1px solid ${e.colorBorder}`,content:'""'}}},[`${t}-node-content-wrapper`]:{position:"relative",minHeight:r,paddingBlock:0,paddingInline:e.paddingXS,background:"transparent",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,...en(o,e),"&:hover":{backgroundColor:u},[`&${t}-node-selected`]:{color:e.nodeSelectedColor,backgroundColor:f},[`${t}-iconEle`]:{display:"inline-block",width:r,height:r,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${t}-unselectable ${t}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${e.colorPrimary}`},"&-show-line":{[`${t}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:e.calc(r).div(2).equal(),bottom:e.calc(s).mul(-1).equal(),borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${t}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${n}-leaf-last ${t}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${Oe(e.calc(r).div(2).equal())} !important`}}}},nn=(o,e,t=!0)=>{const n=`.${o}`,s=`${n}-treenode`,r=e.calc(e.paddingXS).div(2).equal(),i=dt(e,{treeCls:n,treeNodeCls:s,treeNodePadding:r});return[tn(o,i),t&&Qt(i)].filter(Boolean)},on=o=>{const{controlHeightSM:e,controlItemBgHover:t,controlItemBgActive:n}=o,s=e;return{titleHeight:s,indentSize:s,nodeHoverBg:t,nodeHoverColor:o.colorText,nodeSelectedBg:n,nodeSelectedColor:o.colorText}},sn=o=>{const{colorTextLightSolid:e,colorPrimary:t}=o;return{...on(o),directoryNodeSelectedColor:e,directoryNodeSelectedBg:t}},cn=ht("Tree",(o,{prefixCls:e})=>[{[o.componentCls]:yt(`${e}-checkbox`,o)},nn(e,o),ut(o)],sn),fn=o=>{const{prefixCls:e,switcherIcon:t,treeNodeProps:n,showLine:s,switcherLoadingIcon:r}=o,{isLeaf:i,expanded:f,loading:u}=n;if(u)return y.isValidElement(r)?r:y.createElement(gt,{className:`${e}-switcher-loading-icon`});let d;if(s&&typeof s=="object"&&(d=s.showLeafIcon),i){if(!s)return null;if(typeof d!="boolean"&&d){const l=typeof d=="function"?d(n):d,g=`${e}-switcher-line-custom-icon`;return y.isValidElement(l)?_e(l,{className:L(l.props?.className,g)}):l}return d?y.createElement($t,{className:`${e}-switcher-line-icon`}):y.createElement("span",{className:`${e}-switcher-leaf-line`})}const c=`${e}-switcher-icon`,h=typeof t=="function"?t(n):t;return y.isValidElement(h)?_e(h,{className:L(h.props?.className,c)}):h!==void 0?h:s?f?y.createElement(Tt,{className:`${e}-switcher-line-icon`}):y.createElement(Lt,{className:`${e}-switcher-line-icon`}):y.createElement(wt,{className:c})};export{Tt as R,fn as S,ln as T,Rt as U,Nt as a,F as b,De as c,G as d,Ve as e,ve as f,nn as g,$t as h,on as i,vt as j,be as k,cn as u};
