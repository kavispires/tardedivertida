import{h as O,j as e,T as o,e2 as fe,F as w,bI as T,bK as ne,r as M,o as A,aP as S,cr as U,b8 as ye,B as D,ch as Z,q as C,c0 as Se,aM as be,aQ as Ie,b5 as Me,I as ee,a_ as Te}from"./index-Bv2JedHY.js";import{u as q,a as G,S as N,P as H,f as ie,c as _e,d as we,e as Pe}from"./Session-BC2hsnNX.js";import{u as L}from"./useWhichPlayerIsThe-CLpABNYc.js";import{B as Ee}from"./BarChartIcon-Q9aoVLm4.js";import{P}from"./PlayerAvatarName-BMN3kBN6.js";import{S as F,W as Ne,P as V,a as Q}from"./StepSwitcher-BCjhbxWB.js";import{I as $}from"./useDevFeatures-BeiftI-c.js";import{R as Ae}from"./RoundAnnouncement-BFGkGjyl.js";import{V as Ce}from"./ViewOr-Bx1kDirb.js";import{T as Re}from"./TurnOrder-BaGSppz0.js";import{C as f}from"./Card-Dz6iDFV9.js";import{R as I}from"./RuleInstruction-BV1a0RUm.js";import{R as ke}from"./UndoOutlined-CSFyJEA4.js";import{u as Be}from"./useMakeMeReady-C3M5Z6-S.js";import{G as oe}from"./GuessIcon-Cb0zx6dh.js";import{P as j}from"./PointsHighlight-5rvd3ZHy.js";import{T as se}from"./TimeHighlight-LwLaYiYw.js";import{L as Oe}from"./ListIcon-CaJ8Tg22.js";import{M as ce}from"./MetricHighlight-Cuj90xoJ.js";import{u as le}from"./DebugOnly-D7LSN2fw.js";import{u as Ge}from"./useMock-BtCeD7lq.js";import{T as Fe}from"./TextHighlight-BSLL2u3H.js";import{T as ze}from"./TimerBar-BN1e7DYS.js";import{P as de}from"./PlayerAvatar-B5XzlucT.js";import{Q as We}from"./QualitySealIcon-Ua_Zi1-7.js";import{T as Ue}from"./TimedButton-CZf0Ymvr.js";import{B as De}from"./BoxXIcon-BUF9t5UJ.js";import{X as qe}from"./XIcon-_3M5KTDZ.js";import{D as He}from"./index-CaG36SC9.js";import{R as Le}from"./TrophyOutlined-CGBmS05s.js";import{S as Ve}from"./StepRankingWrapper-DrhcRYry.js";import{T as Qe}from"./TrophyIcon-YHo5gGoh.js";import"./GameBanner-Dolwj4x9.js";import{G as $e}from"./GameOverWrapper-CnRDs_o3.js";import{A as Xe}from"./Achievements-CG3D0tEY.js";import{T as Ke}from"./TitledContainer-BmxUhwzh.js";import{a as Je}from"./achievements-XpQD-ErL.js";import"./Game-DZpwiVJl.js";import"./useMutation-DCFtoaJg.js";import"./speech-BC2r1q_K.js";import"./index-DwpyjPzl.js";import"./index-DXLNxcEI.js";import"./Overflow-B3d7Zff6.js";import"./PurePanel-DveY4EAq.js";import"./index-C5BSkKNN.js";import"./index-DaUC7QhH.js";import"./RulesModal-Blpup0Vo.js";import"./WritingIcon-By_NHQpT.js";import"./index-CMe9jnJg.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CTxvdU9G.js";import"./index-Bdm1H7ig.js";import"./useBubbleLock-DK7mwtgu.js";import"./InfoCircleOutlined-C9L3-EY0.js";import"./SignIn-DUuFbELe.js";import"./GoogleIcon-CrKEIhun.js";import"./AnimatedGearIcon-BKgkNme9.js";import"./AnimatedClockIcon-DVggaDGI.js";import"./Loading-DAY2-sf8.js";import"./AnimatedLoaderIcon-_R9dZEpI.js";import"./WaitingRoomIcon-BLlVK-GC.js";import"./LikeFilled-rJSyhYWA.js";import"./StarFilled-CQFlL-pg.js";import"./StarIcon-CpKrsoeA.js";import"./ClockIcon-CqtOz1C5.js";import"./progress-dENqAQyI.js";import"./RankingBoard-Ct5wAnUv.js";import"./CaretUpOutlined-CdAKPD24.js";import"./TheEndIcon-C7dv2XNo.js";import"./ArrowRightOutlined-DIWdYL2V.js";import"./Medal-0Kmh_WCo.js";const _={METRICS_BUILDING:"METRICS_BUILDING",GUESSING:"GUESSING",RESULTS:"RESULTS"},X={SUBMIT_POOL:"SUBMIT_POOL",SUBMIT_METRICS:"SUBMIT_METRICS",SUBMIT_GUESS:"SUBMIT_GUESS"},k=120;function Ye(){const{translate:s}=O(),r=q({actionName:"submit-pool",successMessage:s("Palavras submetidas com sucesso","Words submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application found an error while trying to submit your words")});return a=>{r({action:X.SUBMIT_POOL,...a})}}function Ze(s){const{translate:r}=O(),a=q({actionName:"submit-metrics",onSuccess:()=>s(2),onError:()=>s(0),successMessage:r("Métricas submetidas com sucesso","Metrics submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar suas métricas","Oops, the application found an error while trying to submit your metrics")});return t=>{a({action:X.SUBMIT_METRICS,...t})}}function es(){const{translate:s}=O(),r=q({actionName:"submit-guess",successMessage:s("Palpite adivinhada com sucesso","Guess submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao enviar seu palpite","Oops, the application found an error while trying to submit your guess")});return a=>{r({action:X.SUBMIT_GUESS,...a})}}function ss({players:s,presenter:r,turnOrder:a,poolIds:t,wordsDict:n,announcement:i}){return e.jsxs(F,{fullWidth:!0,announcement:i,children:[e.jsx(Ne,{players:s,title:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(P,{player:r})," cria as métricas."]}),en:e.jsxs(e.Fragment,{children:["Wait while ",e.jsx(P,{player:r})," creates the metrics."]})}),instruction:t?e.jsx(rs,{poolIds:t,wordsDict:n}):e.jsx("div",{children:"..."})}),e.jsx(Re,{players:s,order:a,activePlayerId:r.id})]})}function rs({poolIds:s,wordsDict:r}){return e.jsxs(fe,{children:[e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Palavras disponíveis para a rodada:"}),en:e.jsx(e.Fragment,{children:"Available words for the round:"})}),e.jsx(w,{wrap:!0,children:s?.map((a,t)=>{const n=r[a];return e.jsx(T.div,{className:"pool-card",...ne("fadeIn",{delay:t*.1}),children:n.text},a)})})]})}function g({position:s,value:r}){return e.jsx(T.div,{className:"metrics-board__evaluation-pip",layoutId:"item",transition:{ease:"easeInOut",duration:.3},animate:{left:r>s?`${s*1.5}rem`:"auto",right:r<=s?`${(6-s-1)*1.5}rem`:"auto"}})}function ts({metricsDescriptors:s,evaluations:r,onChange:a,disabled:t}){return e.jsx("div",{className:"metrics-board",children:Object.keys(s).map(n=>{const i=s[n],c=r?.[n]??3;return e.jsx(as,{descriptors:i,initialEvaluation:c,onChange:u=>a?.(n,u),disabled:t},n)})})}function as({descriptors:s,initialEvaluation:r=3,onChange:a,disabled:t}){const[n,i]=M.useState(r),c=()=>{const p=Math.min(n+1,6);i(p),a?.(p)},u=()=>{const p=Math.max(n-1,0);i(p),a?.(p)};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(A,{onClick:c,className:"metrics-board__card metrics-board__card--left",disabled:t,children:s[0].text}),e.jsxs("div",{className:"metrics-board__evaluation",children:[e.jsx(g,{position:0,value:n}),e.jsx(g,{position:1,value:n}),e.jsx(g,{position:2,value:n}),e.jsx(g,{position:3,value:n}),e.jsx(g,{position:4,value:n}),e.jsx(g,{position:5,value:n})]}),e.jsx(A,{onClick:u,className:"metrics-board__card metrics-board__card--right",disabled:t,children:s[1].text})]})}const B=4;function ns({wordsDict:s,secretCardsOptionsIds:r,availablePoolCardsIds:a,metricsDescriptors:t,secretWordId:n,poolIds:i=[],onSubmitMetrics:c,onSubmitPool:u,announcement:p}){const{dualTranslate:h}=O(),{step:b,goToNextStep:z,setStep:W}=G(n?3:1),[d,E]=M.useState(n||null),[y,v]=M.useState([]),[R,me]=M.useState({1:3,2:3,3:3,4:3,5:3}),pe=m=>{v(l=>{const x=[...l];return x.includes(m)?x.filter(ve=>ve!==m):l.length===B?l:[...x,m]})},he=()=>{const m=a.filter(l=>!y.includes(l));v(l=>[...l,...C.sampleSize(m,B-l.length).map(x=>x)])},xe=()=>{d&&u({poolIds:C.shuffle([...y,d]),secretWordId:d||""})},J=s[d||""],Y=r.findIndex(m=>m===n),je=()=>{c({metrics:R})};M.useEffect(()=>{b<3&&n&&W(3)},[n]);const ge=(m,l)=>{me(x=>({...x,[m]:l}))};return e.jsxs(F,{fullWidth:!0,announcement:p,children:[b===1&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Qual será a palavra secreta?",en:"Which will be the secret word?"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:"First, from these two words, select the one you want to create the metrics for.",pt:"Primeiro, dentre estas duas palavras, selecione a que você quer usar para suas métricas."})}),e.jsx(S,{children:r.map((m,l)=>{const x=s[m];return e.jsx(A,{onClick:()=>E(x.id),active:d===x.id,children:e.jsx(f,{header:ye[l],color:U(l+2),children:x.text})},x.id)})}),e.jsx(S,{children:e.jsx(D,{size:"large",type:"primary",onClick:z,disabled:!d,children:e.jsx(o,{pt:"Continuar",en:"Continue"})})})]}),b===2&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Quais outras palavras estão misturadas para os outros jogadores?",en:"Which other words will be mixed for the other players?"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Now that you have the keyword, from these other words select ",e.jsx("strong",{children:"4 words"})," to be part of the pool. Choose words that won't conflict with your keyword."]}),pt:e.jsxs(e.Fragment,{children:["Agora que você tem a palavra-chave, selecione ",e.jsx("strong",{children:"4 palavras"})," para fazer parte do pool. Escolha palavras que não entrem em conflito com sua palavra-chave."]})})}),e.jsx(f,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:U(Y+2),children:J.text}),e.jsx(S,{wrap:!0,children:a.map(m=>{const l=s[m];return e.jsx(A,{onClick:()=>pe(l.id),active:y.includes(l.id),children:e.jsx(f,{hideHeader:!0,children:l.text})},l.id)})}),e.jsxs(S,{children:[e.jsx(D,{size:"large",onClick:he,disabled:y.length>=B,icon:e.jsx(ke,{}),children:e.jsx(o,{pt:"Aleatório",en:"Random"})}),e.jsx(Z,{size:"large",onClick:xe,disabled:!d||y.length!==B,children:e.jsx(o,{pt:"Enviar",en:"Submit"})})]})]}),b===3&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Crie suas métricas",en:"Create the metrics"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Finally, evaluate each of the 5 metrics by distributing the 6 pips between the 2 descriptors that best describes your keyword so the players can try to guess it.",e.jsx("br",{}),"Just click on the descriptor to move the pips."]}),pt:e.jsxs(e.Fragment,{children:["Por fim, avalie cada uma das 5 métricas distribuindo as 6 bolinhas entre os 2 descritores que melhor descrevem sua palavra-chave para que os jogadores possam tentar adivinhá-la.",e.jsx("br",{}),"Basta clicar no descritor para mover as bolinhas."]})})}),e.jsx(f,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:U(Y+3),children:J.text}),e.jsx(ts,{metricsDescriptors:t,evaluations:R,onChange:ge}),e.jsx(S,{className:"mt-6",children:e.jsx(Z,{size:"large",onClick:je,children:e.jsx(o,{pt:"Enviar Métricas",en:"Submit Metrics"})})}),e.jsxs(I,{type:"tip",children:[e.jsx(o,{en:e.jsx(e.Fragment,{children:"Here are the other words in case you need to verify any conflicts"}),pt:e.jsx(e.Fragment,{children:"Aqui estão as outras palavras caso você precise verificar algum conflito"})}),e.jsx(w,{justify:"center",children:i.map(m=>{const l=s[m];return e.jsx(f,{hideHeader:!0,size:"small",children:l.text},l.id)})})]})]})]})}function is({state:s,players:r}){const{step:a,setStep:t,goToNextStep:n}=G(),[i,c]=L("presenterId",s,r),u=Ze(t),p=Ye(),h=e.jsx(V,{icon:e.jsx(Ee,{}),title:e.jsx(o,{en:"Metrics Building",pt:"Construção de Métricas"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx($,{children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["O apresentador ",e.jsx(P,{player:i})," vai construir as métricas para essa rodada."]}),en:e.jsxs(e.Fragment,{children:["The presenter ",e.jsx(P,{player:i})," will build the metrics for this round."]})})})});return e.jsx(H,{phase:s?.phase,allowedPhase:_.METRICS_BUILDING,children:e.jsxs(Q,{step:a,players:r,children:[e.jsx(Ae,{round:s.round,time:3,onPressButton:n}),e.jsxs(Ce,{condition:c,children:[e.jsx(ns,{announcement:h,wordsDict:s.wordsDict,secretCardsOptionsIds:s.secretCardsOptionsIds,availablePoolCardsIds:s.availablePoolCardsIds,metricsDescriptors:s.metricsDescriptors,poolIds:s.poolIds,secretWordId:s.secretWordId,onSubmitMetrics:u,onSubmitPool:p}),e.jsx(ss,{announcement:h,players:r,presenter:i,turnOrder:s.turnOrder,wordsDict:s.wordsDict,poolIds:s.poolIds})]})]})})}function re({children:s}){return e.jsx(ce,{icon:e.jsx(Oe,{}),children:s})}function te({children:s}){return e.jsx(ce,{icon:e.jsx(oe,{}),children:s})}function os(){return e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Among the ",e.jsx(re,{children:"5 words"}),", you must guess the"," ",e.jsx(te,{children:"secret word"}),". Every"," ",e.jsx(se,{children:"10 seconds"})," one of the 5 metrics shows up to help you! You can make a guess at any moment. The earlier you make the guess,"," ",e.jsx(j,{type:"positive",children:"more points"})," you get. If you decide to change your guess, you can do it once, but that will be your new score and"," ",e.jsx(j,{type:"negative",children:"- 1 point"}),"."]}),pt:e.jsxs(e.Fragment,{children:["Entre as ",e.jsx(re,{children:"5 palavras"}),", você deve adivinhar a"," ",e.jsx(te,{children:"palavra secreta"}),". A cada"," ",e.jsx(se,{children:"10 segundos"})," uma das 5 métricas aparece para ajudar. Você pode fazer um palpite a qualquer momento. Quanto mais cedo você fizer o palpite,"," ",e.jsx(j,{type:"positive",children:"mais pontos"})," você ganha. Se decidir mudar seu palpite, você pode fazê-lo uma vez, mas isso resultará em uma nova pontuação e"," ",e.jsx(j,{type:"negative",children:"- 1 ponto"}),"."]})})}function K({metricsDescriptors:s,evaluations:r,level:a}){return e.jsx("div",{className:"metrics-board",children:Object.keys(s).map((t,n)=>{const i=s[t],c=r?.[t]??3;return e.jsx(cs,{descriptors:i,evaluation:c,visible:a>n},t)})})}function cs({descriptors:s,evaluation:r,visible:a}){const t={initial:{opacity:0},transition:{delay:1,duration:2},animate:{opacity:a?1:0}};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(T.div,{...t,className:"metrics-board__card metrics-board__card--left",children:s[0].text}),e.jsxs(T.div,{className:"metrics-board__evaluation",...t,children:[e.jsx(g,{position:0,value:r}),e.jsx(g,{position:1,value:r}),e.jsx(g,{position:2,value:r}),e.jsx(g,{position:3,value:r}),e.jsx(g,{position:4,value:r}),e.jsx(g,{position:5,value:r})]}),e.jsx(T.div,{...t,className:"metrics-board__card metrics-board__card--right",children:s[1].text})]})}function ue({children:s,...r}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...r,children:[e.jsx("path",{fill:"#ffd06a",d:"M473.2 481.1H38.8a31.3 31.3 0 01-31.3-31.3V45.2A37.7 37.7 0 0145.2 7.5h421.6a37.7 37.7 0 0137.7 37.7v404.6a31.3 31.3 0 01-31.3 31.3z"}),e.jsx("path",{fill:"#ffd06a",d:"M504.5 45.2v404.6a31.3 31.3 0 01-31.3 31.3H452a31.3 31.3 0 0031.3-31.3V45.2a37.7 37.7 0 00-37.7-37.7h21.1a37.8 37.8 0 0137.8 37.7z"}),e.jsx("path",{fill:"#ffd06a",d:"M434.7 436.5H77.3a25.6 25.6 0 01-25.6-25.6V82.8A30.8 30.8 0 0182.5 52h347.1a30.8 30.8 0 0130.8 30.8v328.1a25.7 25.7 0 01-25.7 25.6z"}),e.jsx("path",{fill:"#ffd06a",d:"M429.5 52.1h-27.4a30.8 30.8 0 0130.8 30.8V411a25.6 25.6 0 01-25.6 25.6h27.4a25.6 25.6 0 0025.6-25.6V82.8a30.7 30.7 0 00-30.8-30.7z"}),e.jsx("path",{d:"M512 45.2A45.5 45.5 0 00466.8 0H45.2A45.4 45.4 0 000 45.2v404.6c0 20.5 17 38.8 38.8 38.8h357.4a7.5 7.5 0 000-15H38.8a24.4 24.4 0 01-11.4-2.9l33.1-31.3a33 33 0 0016.8 4.6h357.4a33 33 0 0016.8-4.6l33.1 31.3a23.2 23.2 0 01-11.4 2.9h-42a7.5 7.5 0 100 15h42a39 39 0 0038.8-38.8zM466.8 15a29.9 29.9 0 0116 4.6l-32.8 31a37.8 37.8 0 00-20.5-6h-347a37.6 37.6 0 00-20.5 6l-32.8-31a29.9 29.9 0 0116-4.6zM15 449.8V45.2a30.6 30.6 0 013.8-14.7L51.1 61a38.5 38.5 0 00-6.9 21.9V411a32.9 32.9 0 005.4 18.1l-32.4 30.7a24.5 24.5 0 01-2.2-10zM77.3 429a18.1 18.1 0 01-18.1-18.1V82.8a23.3 23.3 0 0123.3-23.3h347.1a23.3 23.3 0 0123.3 23.3v22.5a7.5 7.5 0 0015 0V82.8a38.5 38.5 0 00-6.9-21.9l32.3-30.5a30.6 30.6 0 013.8 14.7v404.6a23.5 23.5 0 01-2.2 9.9l-32.4-30.7a32.9 32.9 0 005.4-18.1V141.6a7.5 7.5 0 00-15 0V411a18.1 18.1 0 01-18.1 18.1z"}),e.jsx("foreignObject",{x:"72.192",y:"74.472",width:"367.904",height:"341.859",children:s})]})}function ls({players:s,pointsBrackets:r}){const a=ds(s,r.length);return e.jsx("div",{className:"m-guessing-board__points-brackets",children:r.map((t,n)=>e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(ue,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:t})}),e.jsx("div",{className:"m-guessing-board__points-bracket-value",children:a?.[n]?.map(i=>e.jsx("span",{children:e.jsx(de,{avatarId:s[i.playerId??""].avatarId},i.playerId)},i?.playerId))})]},`${t}-${n}`))})}const ds=(s,r)=>{const a={};Object.values(s).forEach(i=>{const c=Se(i.guesses??[]);c.forEach((u,p)=>{const h=Math.floor(u.timestamp/3)*3;a[h]||(a[h]=[]),a[h].push({cardId:u.cardId,level:u.level,timestamp:h,playerId:i.id,used:p<c.length-1,retry:c.length>1})})});const t=C.orderBy(Object.keys(a),i=>Number(i)).map(i=>C.orderBy(a[Number(i)],["playerId"])),n=t.slice(0,r);return t.length>r&&n.push(...t.slice(r)),n};function us({players:s,user:r,round:a,isThePresenter:t,wordsDict:n,poolIds:i,secretWordId:c,metricsDescriptors:u,metrics:p,pointsBrackets:h,onSubmitGuess:b,onMakeMeReady:z}){const{isLoading:W}=be(),d=r.guesses||[],{timeLeft:E}=le({duration:k,onExpire:()=>{if(!(r.ready||t||d.length>=2)){if(!d.length){const v=C.sample(i)||i[0];b({guesses:[...d,{cardId:v,level:5,timestamp:k}]})}z()}}}),y=ms(E);return Ge(),e.jsxs(F,{fullWidth:!0,children:[e.jsx(N,{size:"small",children:e.jsx(o,{pt:"Qual a palavra secreta?",en:"Which will be the secret word?"})}),t?e.jsxs(I,{type:"action",children:[e.jsx(o,{en:"Wait while the players guess the secret word:",pt:"Aguarde enquanto os jogadores adivinham a palavra secreta:"})," ",e.jsx(Fe,{children:n[c]?.text||"..."})]}):e.jsxs(I,{type:"action",children:[d.length===0&&e.jsx(o,{en:"Select the secret word.",pt:"Selecione a palavra secreta."}),d.length===1&&e.jsx(o,{en:e.jsxs(e.Fragment,{children:["If you change your mind, you can choose a different word, but you will lower your points and receive a ",e.jsx(j,{type:"negative",children:"1 point"})," penalty."]}),pt:e.jsxs(e.Fragment,{children:["Se você mudar de ideia, pode escolher uma palavra diferente, mas perderá pontos e receberá uma penalidade de ",e.jsx(j,{type:"negative",children:"1 ponto"}),"."]})}),d.length===2&&e.jsx(o,{en:"Wait while the other players make their guesses.",pt:"Aguarde enquanto os jogadores fazem seus palpites."})]}),e.jsx(w,{wrap:"wrap",gap:8,className:"mb-4",justify:"center",children:i.map(v=>e.jsx(A,{onClick:()=>b({guesses:[...d,{cardId:v,level:y,timestamp:Math.max(k-E,0)}]}),disabled:W||r.ready||t||d.length===2,active:d.some(R=>R.cardId===v),children:e.jsx(f,{hideHeader:!0,children:n[v].text},v)},v))}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:u,evaluations:p,level:y}),e.jsx(ls,{players:s,pointsBrackets:h})]}),e.jsx(ze,{value:E,total:k,status:"normal"}),e.jsx(ps,{players:s,round:a})]})}const ms=s=>({12:1,11:2,10:3,9:4,8:5})[Math.ceil(s/10)]||5;function ps({players:s,round:r}){return Object.values(s).every(t=>t.ready||t.guesses?.length>0)?e.jsx(ie,{round:r}):null}function hs({state:s,players:r,user:a}){const{step:t,goToNextStep:n}=G(),[,i]=L("presenterId",s,r),c=es(),u=Be({});return e.jsx(H,{phase:s?.phase,allowedPhase:_.GUESSING,children:e.jsxs(Q,{step:t,players:r,children:[e.jsx(V,{icon:e.jsx(oe,{}),title:e.jsx(o,{pt:"Adivinhação",en:"Guessing"}),onClose:n,currentRound:s?.round?.current,unskippable:!0,duration:[30,15,10][s.round.current-1]??10,type:"block",children:e.jsx($,{children:e.jsx(os,{})})}),e.jsx(us,{players:r,round:s.round,isThePresenter:i,turnOrder:s.turnOrder,user:a,wordsDict:s.wordsDict,poolIds:s.poolIds,secretWordId:s.secretWordId,metricsDescriptors:s.metricsDescriptors,metrics:s.metrics,pointsBrackets:s.pointsBrackets,onSubmitGuess:c,onMakeMeReady:u})]})})}function ae({player:s,tooltipProps:r,...a}){return e.jsx(Ie,{title:s.name,...r,children:e.jsx(de,{avatarId:s.avatarId,...a})})}function xs({brackets:s,players:r,cards:a}){return e.jsx("div",{className:"m-guessing-board__points-brackets",children:s.map((t,n)=>e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(ue,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:t.score})}),e.jsxs("div",{className:"m-guessing-board__points-bracket-value",children:[e.jsxs(Me.Group,{children:[t.playersIds.map((i,c)=>e.jsx(T.div,{...ne("tada",{repeat:10,delay:2+n*c*.25}),children:e.jsx(ae,{player:r[i]})},i)),t.playersIds.length===0&&e.jsx(ee,{icon:e.jsx(De,{})})]}),e.jsx(He,{type:"vertical"}),e.jsx(w,{vertical:!0,children:t.wrongGuesses.map(i=>e.jsxs(w,{align:"center",children:[e.jsx(ee,{icon:e.jsx(qe,{}),size:16})," ",e.jsx(ae,{player:r[i.playerId]}),e.jsx(f,{hideHeader:!0,size:"small",children:a[i.cardId]?.text||"???"})]},i.playerId))})]})]},`${t.score}-${n}`))})}function js({players:s,presenter:r,result:a,goToNextStep:t,announcement:n}){const[i,c]=M.useState(!1);return le({duration:4,onExpire:()=>c(!0)}),e.jsxs(F,{fullWidth:!0,announcement:n,children:[e.jsx(N,{size:"small",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Resultados para apresentador(a) ",e.jsx(P,{player:r})]}),en:e.jsxs(e.Fragment,{children:["Results for presenter ",e.jsx(P,{player:r})]})})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["The guessers get ",e.jsx(j,{children:"points"})," based on the bracket their last guess falls into, if correct.",e.jsx("br",{}),"They also lose ",e.jsx(j,{type:"negative",children:"1 point"})," if they made more than one guess.",e.jsx("br",{}),"The presenter gets ",e.jsx(j,{type:"positive",children:"2 points"})," for each who guessed correctly."]}),pt:e.jsxs(e.Fragment,{children:["Os adivinhadores ganham ",e.jsx(j,{children:"pontos"})," baseados no quadrado em que a última adivinhação está, se o palpite estiver correto.",e.jsx("br",{}),"Mas eles também perdem ",e.jsx(j,{type:"negative",children:"1 ponto"})," se fizeram mais de um palpite.",e.jsx("br",{}),"O apresentador ganha ",e.jsx(j,{type:"positive",children:"2 pontos"})," por cada adivinhador que acertou."]})})}),e.jsx(S,{children:e.jsx(f,{hideHeader:!0,size:"large",children:a.cards[a.secretWordId].text})}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:a.metricsDescriptors,evaluations:a.metrics,level:i?5:0}),e.jsx(xs,{brackets:a.brackets,players:s,cards:a.cards})]}),e.jsx(S,{className:"mt-8",children:e.jsx(Ue,{duration:45,onExpire:t,onClick:t,icon:e.jsx(Le,{}),children:e.jsx(o,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function gs({players:s,ranking:r,goToPreviousStep:a,round:t}){return e.jsxs(Ve,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(o,{pt:"Acertou a palavra secreta",en:"Guessed the secret word"},"1"),e.jsx(o,{pt:"Adivinhou na segunda tentativa",en:"Guessed in the second try"},"2"),e.jsx(o,{pt:"Pontos para o apresentador(a)",en:"Points for the presenter"},"3")],children:[e.jsx(S,{children:e.jsx(D,{onClick:a,children:e.jsx(o,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(ie,{round:t})]})}function vs({state:s,players:r}){const{step:a,goToNextStep:t,goToPreviousStep:n}=G(),[i]=L("presenterId",s,r),c=e.jsx(V,{icon:e.jsx(We,{}),title:e.jsx(o,{pt:"Resultado",en:"Results"}),currentRound:s?.round?.current,type:"overlay",duration:4,children:e.jsx($,{children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Quantos pontos você ganhou?"}),en:e.jsx(e.Fragment,{children:"How many points did you get?"})})})});return e.jsx(H,{phase:s?.phase,allowedPhase:_.RESULTS,children:e.jsxs(Q,{step:a,players:r,children:[e.jsx(js,{players:r,announcement:c,goToNextStep:t,presenter:i,result:s.result}),e.jsx(gs,{players:r,round:s.round,ranking:s.ranking,goToPreviousStep:n})]})})}function fs({state:s,players:r}){const a=s.gallery??[];return e.jsxs($e,{state:s,players:r,announcementIcon:e.jsx(Qe,{}),children:[e.jsx(Xe,{players:r,achievements:s.achievements,reference:Je}),e.jsx(Ke,{title:e.jsx(o,{pt:"Métricas",en:"Metrics"}),className:"mt-4",children:a.map(t=>e.jsxs(w,{vertical:!0,align:"center",justify:"center",children:[e.jsx(f,{hideHeader:!0,children:t.cards[t.secretWordId]?.text||"???"}),e.jsx(K,{metricsDescriptors:t.metricsDescriptors,evaluations:t.metrics,level:5})]},t.secretWordId))})]})}function ys(s){switch(s.phase){case _.METRICS_BUILDING:return is;case _.GUESSING:return hs;case _.RESULTS:return vs;case Pe.DEFAULT.GAME_OVER:return fs;default:return we}}function Fr(){return e.jsx(_e,{gameCollection:Te.MEDIDAS_NAO_EXATAS,getActiveComponent:ys})}export{Fr as default};
