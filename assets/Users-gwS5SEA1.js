import{x as _,E as q,F as C,r as u,H as w,j as s,q as I,J as i,s as o,K as d,B as M,U as R,M as B,N as F,O as L,Q,V as J,W as K}from"./index-BHWKQGUY.js";import{u as W}from"./useMutation-CHS_E0xF.js";import{m as b,c as S}from"./merge-CICaS-UY.js";/* empty css           */import{S as m}from"./index-J2ZwWPGM.js";import"./_copyArray-DyNXx8uz.js";import"./_baseAssignValue-B_OUkNTu.js";import"./_defineProperty-D3z14oVi.js";import"./isArrayLikeObject-DgdjKD1y.js";import"./_baseRest-CYVLErJW.js";import"./constant-BfiDtQIV.js";import"./_isIterateeCall-fF0TyRk1.js";import"./Overflow-DdhbLj5b.js";import"./useEvent-BgklPspQ.js";import"./PurePanel-Bvk1SaWn.js";const c={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function ns(){var x,j,y;_("Users - Tarde Divertida");const{message:f,notification:E}=q.useApp(),N=C(),[t,T]=u.useState(c),[n,v]=u.useState(c),p=w({queryKey:["users"],queryFn:async()=>{const e=await F(L(J(K,"users"),Q("isGuest","!=",!0))),r=[];return e.forEach(P=>r.push(P.data())),r}}),g=W({mutationKey:["users"],mutationFn:async e=>{R.run({action:B.UPDATE_USER_DB,...e})},onSuccess:()=>{f.success("User updated"),N.invalidateQueries({queryKey:["users"]})},onError:e=>{E.error({message:"Error",description:e.message})}}),l=p.data??[],A=e=>{T(l.find(r=>r.id===e)??c)},U=e=>{v(l.find(r=>r.id===e)??c)},h=l.map(e=>{var r;return s.jsxs(m.Option,{value:e.id,children:[s.jsx("strong",{children:(r=e==null?void 0:e.names)==null?void 0:r[0]}),": ",e.id]},e.id)}),D=s.jsx(m,{onChange:A,style:{minWidth:300},children:h}),O=s.jsx(m,{onChange:U,style:{minWidth:300},children:h}),a=u.useMemo(()=>b(S(t??{}),S(n??{})),[t,n]);return console.log(l),s.jsxs(I,{children:[s.jsx(i.Title,{children:"Users"}),p.isLoading&&s.jsx(i.Paragraph,{children:"Loading..."}),s.jsxs(o,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[s.jsxs(o,{direction:"vertical",children:[s.jsx(i.Title,{level:2,children:"Origin"}),s.jsx(o,{className:"margin",children:D}),s.jsx(i.Paragraph,{children:((x=t==null?void 0:t.names)==null?void 0:x.join(", "))??"No user selected"}),s.jsx(d.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]}),s.jsxs(o,{direction:"vertical",children:[s.jsx(i.Title,{level:2,children:"Destination"}),s.jsx(o,{className:"margin",children:O}),s.jsx(i.Paragraph,{children:((j=n==null?void 0:n.names)==null?void 0:j.join(", "))??"No user selected"}),s.jsx(d.TextArea,{value:JSON.stringify(n??{},null,2),rows:20,cols:50,className:"margin"})]})]}),s.jsxs(o,{direction:"vertical",children:[s.jsx(i.Title,{level:2,children:"Merge"}),s.jsx(i.Paragraph,{children:((y=a==null?void 0:a.names)==null?void 0:y.join(", "))??"No user selected"}),s.jsx(d.TextArea,{value:JSON.stringify(a??{},null,2),rows:20,cols:50,className:"margin"}),s.jsxs(M,{type:"primary",size:"large",loading:g.isPending,onClick:()=>g.mutate(a),disabled:!(a!=null&&a.id),children:['Merge Users "',t.id,'" into "',n.id,'"']})]})]})}export{ns as default};
