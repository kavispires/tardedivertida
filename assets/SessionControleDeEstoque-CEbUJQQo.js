import{h as J,j as e,e as h,b3 as F,T as m,aJ as W,c1 as k,D as j,r as U,q as Y,aZ as K}from"./index-DKLwsDFL.js";import{u as Z,S as I,a as L,b as B,c as q,P as $,d as X,e as b,g as ee,h as oe,i as re}from"./StepSwitcher-DXp7l4Ap.js";import{P as O}from"./PhasePlaceholder-atbecOXs.js";import{u as z}from"./useWhichPlayerIsThe-warTONoG.js";import{B as D}from"./BossIdeaIcon-diLha_0D.js";import{A}from"./AvatarName-CR3I9zai.js";import{I as y}from"./Instruction-CsUmjVkH.js";import{R as se}from"./RoundAnnouncement-Ck1zYJPq.js";import{u as ie}from"./useMakeMeReady-DmH8SWnR.js";import{M as H}from"./MysteryBoxIcon-ByT3jDRQ.js";import{W as P}from"./WarehouseGoodCard-B1Q0iXL1.js";import{R as T}from"./RuleInstruction-DvFM2rSW.js";import{S as v}from"./ShippingBoxIcon-DcfLRkNH.js";import{M as C}from"./MetricHighlight-DSBevgr4.js";import{C as R}from"./ClockIcon-53yIWBBI.js";import{D as E}from"./index-ClNZpA-n.js";import{u as ne}from"./useMock-fFTIGOU3.js";import{T as ae}from"./speech-CxPU1uRf.js";import"./useBlurCards-BZ2hlY8I.js";import"./RulesModal-C2P2r3_X.js";import"./WritingIcon-CxY-9Rxv.js";import"./index-l9U_lkkh.js";import"./PurePanel--OmJwFM1.js";import"./Game-C9CpeBhG.js";import"./useMutation-BGbQsuHj.js";import"./index-BU-R462y.js";import"./index-8QfuuW1q.js";import"./Overflow-BxFLJAPn.js";import"./useEvent-CdZenJ9j.js";import"./index-BzhYVpzk.js";import"./index-D3oqqCjT.js";import"./Avatar-hgAToV9m.js";import"./GameBanner-BAG1d_d2.js";import"./useDevFeatures-CIElo4nP.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-Cq8pZL-C.js";import"./Loading-C1MoP0zR.js";import"./useBubbleLock-Do_zdWsR.js";import"./AnimatedLoaderIcon-f05rfdc_.js";import"./InfoCircleOutlined-DmWK-GIR.js";import"./SignIn-BGrz4PWx.js";import"./GoogleIcon-Cg1sL8gX.js";import"./WaitingRoomIcon-DC_ZSClf.js";import"./AnimatedClockIcon-CCcvNqiN.js";import"./LikeFilled-Z16FM23J.js";import"./Sprite-DN-D_19A.js";import"./WarningOutlined-BBmxnVr6.js";import"./StarFilled-BZfYVkBH.js";const N={GOOD_PLACEMENT:"GOOD_PLACEMENT",PLACEMENT_CONFIRMATION:"PLACEMENT_CONFIRMATION",FULFILLMENT:"FULFILLMENT",RESULTS:"RESULTS"},te=[{en:"Monday",pt:"Segunda-feira"},{en:"Tuesday",pt:"Terça-feira"},{en:"Wednesday",pt:"Quarta-feira"},{en:"Thursday",pt:"Quinta-feira"},{en:"Friday",pt:"Sexta-feira"},{en:"Saturday",pt:"Sábado"},{en:"Sunday",pt:"Domingo"}],l={TINTED_GLASS:"TINTED_GLASS",CONFIDENTIAL:"CONFIDENTIAL",EYE_EXAM:"EYE_EXAM"};function Q(){const{translate:s}=J(),o=Z({actionName:"submit-place-good",successMessage:s("Ação submetida com sucesso","Action submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return i=>{o({action:"PLACE_GOOD",...i})}}function ce(){return ie({})}function w({goodsDict:s,warehouse:o,width:i,onPlaceGood:r,goodClassName:c,conceal:d}){const n={width:i,height:i};return e.jsx("div",{className:"warehouse",children:o.map((a,t)=>{if(a.available)return e.jsx("div",{className:h("warehouse__empty-shelf warehouse__empty-available-shelf"),style:n,children:r?e.jsx("button",{type:"button",className:"warehouse__empty-shelf-button",onClick:()=>r==null?void 0:r(t),children:a.temporaryName??"?"}):a.temporaryName??"?"},t);if(a.amenityId)return null;if(a.goodId){const u=s[a.goodId];return u.exposed?d?e.jsx(H,{width:i}):e.jsx("div",{className:h("warehouse__shelf","warehouse__shelf-active"),style:n,children:e.jsx(P,{id:u.id,width:i-12,className:h(F("bounce"),c)})},t):e.jsx("div",{className:h("warehouse__shelf",F("flipInY")),style:n,children:e.jsx(v,{width:i-12})},t)}return e.jsx("div",{className:h("warehouse__empty-shelf"),style:n,children:"."},t)})})}function G({stockingCount:s,stockingRoundCount:o,stocked:i}){return e.jsx(m,{en:e.jsxs(e.Fragment,{children:["Round goods:"," ",e.jsxs(C,{icon:e.jsx(R,{}),children:[s,"/",o]}),e.jsx("br",{}),"Stocked Goods: ",e.jsxs(C,{icon:e.jsx(v,{}),children:[i,"/35"]})]}),pt:e.jsxs(e.Fragment,{children:["Mercadorias da rodada:"," ",e.jsxs(C,{icon:e.jsx(R,{}),children:[s,"/",o]}),e.jsx("br",{}),"Mercadorias estocadas: ",e.jsxs(C,{icon:e.jsx(v,{}),children:[i,"/35"]})]})})}function de({players:s,user:o,announcement:i,bossIdea:r,roundGoods:c,roundsGoodIndex:d,goodsDict:n,warehouse:a,supervisor:t,isUserTheSupervisor:u,onPlaceGood:g,stocked:p}){const{isLoading:_}=W(),[x,S]=k(7,{minWidth:60,maxWidth:80,margin:16}),f=n[c[d]],M=V=>{g({goodId:f.id,newWarehouseSlot:V,previousWarehouseSlot:f.slot})};return u?e.jsxs(I,{fullWidth:!0,announcement:i,ref:S,children:[e.jsx(L,{icon:e.jsx(D,{}),children:e.jsx(j,{children:r.title})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Coloque a mercadoria do galpão!"}),en:e.jsx(e.Fragment,{children:"Place the good in the warehouse"})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:r.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:d,stockingRoundCount:c.length,stocked:p})]}),e.jsx(y,{contained:!0,children:e.jsx(P,{id:f.id,width:x,className:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})}),e.jsx(w,{goodsDict:n,warehouse:a,onPlaceGood:_?void 0:M,width:x,goodClassName:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(I,{fullWidth:!0,announcement:i,ref:S,children:[e.jsx(L,{icon:e.jsx(D,{}),children:e.jsx(j,{children:r.title})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:t,size:"small"})," é o(a) supervisor(a) do dia e colocará a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:t})," is the supervisor of the day and will place the good in the warehouse."]})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:r.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:d,stockingRoundCount:c.length,stocked:p})]}),e.jsx(y,{contained:!0,children:r.id===l.CONFIDENTIAL?e.jsx(H,{width:x}):e.jsx(P,{id:f.id,width:x,className:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS")})}),e.jsx(w,{goodsDict:n,warehouse:a,width:x,goodClassName:h(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:r.id===l.CONFIDENTIAL})]})}function le({players:s,state:o}){var p;const i=B(s,o),[r,c]=z("supervisorId",o,s),d=Q(),{step:n,goToNextStep:a}=q(o.roundGoodsIndex===0?0:1),t=o==null?void 0:o.bossIdea,u=e.jsx($,{icon:e.jsx(D,{}),title:e.jsx(j,{children:t.subtitle}),currentRound:(p=o==null?void 0:o.round)==null?void 0:p.current,type:"overlay",duration:o.roundGoodsIndex===0?15:5,children:e.jsxs(y,{children:['"',e.jsx(m,{en:"The floor supervisor for the day will be",pt:"O supervisor do dia será"})," ",e.jsx(A,{player:r,addressUser:!0}),'."']})}),g=U.useMemo(()=>Y.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(X,{phase:o==null?void 0:o.phase,allowedPhase:N.GOOD_PLACEMENT,children:e.jsxs(b,{step:n,players:s,children:[e.jsx(se,{round:o==null?void 0:o.round,onPressButton:a,time:o.roundGoodsIndex===0?10:4,children:e.jsx(y,{contained:!0,children:e.jsx(j,{children:te[o.round.current-1]})})}),e.jsx(de,{user:i,players:s,announcement:u,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:g,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,stocked:o.stocked})]})})}function ue({user:s,bossIdea:o,roundGoods:i,roundsGoodIndex:r,goodsDict:c,warehouse:d,supervisor:n,isUserTheSupervisor:a,onPlaceGood:t,onConfirmPlacement:u,stocked:g}){const{isLoading:p}=W(),[_,x]=k(7,{minWidth:60,maxWidth:80,margin:16}),S=c[i[r]],f=M=>{t({goodId:S.id,newWarehouseSlot:M,previousWarehouseSlot:S.slot})};return ne(),a?e.jsxs(I,{fullWidth:!0,ref:x,children:[e.jsx(L,{size:"small",children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Estão todos de acordo com esse local?"}),en:e.jsx(e.Fragment,{children:"Is everyone okay with this location?"})})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:"Você pode trocar a mercadoria de lugar se há outros lugares disponíveis e a equipe decidir.",en:"You may change the location of the good if there are available options and the team agrees."})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:o.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:r+1,stockingRoundCount:i.length,stocked:g})]}),e.jsx(w,{goodsDict:c,warehouse:d,onPlaceGood:p||s.ready?void 0:f,width:_,goodClassName:h(o.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",o.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(I,{fullWidth:!0,ref:x,children:[e.jsx(L,{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Concorda com o local escolhido?"}),en:e.jsx(e.Fragment,{children:"Do you agree with the chosen location?"})})}),e.jsxs(T,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:n,size:"small"})," é o(a) supervisor(a) do dia e colocou a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:n})," is the supervisor of the day and placed the good in the warehouse."]})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:o.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:r+1,stockingRoundCount:i.length,stocked:g})]}),e.jsx(T,{type:"action",children:e.jsx(m,{pt:"Se você concorda com o local, confirme sua escolha.",en:"If you agree with the location, confirm your choice."})}),e.jsx(y,{children:e.jsx(ae,{size:"large",type:"primary",onClick:u,onExpire:u,loading:p,disabled:s.ready,duration:40,children:e.jsx(m,{pt:"Confirmar",en:"Confirm"})})}),e.jsx(w,{goodsDict:c,warehouse:d,width:_,goodClassName:h(o.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:o.id===l.CONFIDENTIAL})]})}function he({players:s,state:o}){const i=B(s,o),[r,c]=z("supervisorId",o,s),d=Q(),n=ce(),{step:a}=q(),t=o==null?void 0:o.bossIdea,u=U.useMemo(()=>Y.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(X,{phase:o==null?void 0:o.phase,allowedPhase:N.PLACEMENT_CONFIRMATION,children:e.jsx(b,{step:a,players:s,children:e.jsx(ue,{user:i,players:s,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:u,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,onConfirmPlacement:n,stocked:o.stocked})})})}function me(s){switch(s.phase){case N.GOOD_PLACEMENT:return le;case N.PLACEMENT_CONFIRMATION:return he;case N.FULFILLMENT:return O;case N.RESULTS:return O;case re.DEFAULT.GAME_OVER:return O;default:return oe}}function co(){return e.jsx(ee,{gameCollection:K.CONTROLE_DE_ESTOQUE,getActiveComponent:me})}export{co as default};
