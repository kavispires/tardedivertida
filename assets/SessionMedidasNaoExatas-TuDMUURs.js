import{h as G,j as e,T as c,dG as fe,F as T,bE as w,bF as ne,r as M,o as R,aM as b,ck as D,b5 as ye,B as q,cc as ee,q as k,bX as Se,aJ as be,aN as Ie,b2 as Me,I as se,aZ as we}from"./index-BpjDcigG.js";import{u as H,S as O,n as _e,c as F,a as P,P as L,d as V,e as $,k as oe,b as Te,g as Ee,h as Ae,i as Ne}from"./StepSwitcher-DcJfDiTe.js";import{u as Q}from"./useWhichPlayerIsThe-DAbtf4L7.js";import{B as Pe}from"./BarChartIcon-C1TXa7L2.js";import{A as E}from"./AvatarName-BesDKNyC.js";import{I as X}from"./Instruction-C1q9DjQK.js";import{R as Re}from"./RoundAnnouncement-D9DLtFpg.js";import{V as ke}from"./ViewOr-Dl1t5d1Z.js";import{T as Be}from"./TurnOrder-CBmi2N6Z.js";import{C as y}from"./Card-BVq_WlOl.js";import{R as I}from"./RuleInstruction-guX6VMXQ.js";import{R as Ce}from"./UndoOutlined-CPuc22TT.js";import{u as Ge}from"./useMakeMeReady-CPHR9zdM.js";import{G as ce}from"./GuessIcon-nXRvXJ7w.js";import{P as j}from"./PointsHighlight-lenjbPfb.js";import{T as re}from"./TimeHighlight-Bu-mfPpn.js";import{L as Oe}from"./ListIcon-dYkH00nd.js";import{M as le}from"./MetricHighlight-Bjo0gr4I.js";import{u as de}from"./useBlurCards-C2m2BFkj.js";import{u as Fe}from"./useMock-DNr0HOkz.js";import{T as ze}from"./TextHighlight-VUyf9_LB.js";import{T as Ue}from"./TimerBar-BPiadIrT.js";import{A as ue}from"./Avatar-BexNIazg.js";import{Q as We}from"./QualitySealIcon-Dqm9gIB4.js";import{T as De}from"./speech-BOZH1-_o.js";import{B as qe}from"./BoxXIcon-DBhXEOxM.js";import{X as He}from"./XIcon-C2fgOnQ-.js";import{D as Le}from"./index-Do4cmXuB.js";import{R as Ve}from"./TrophyOutlined-Biy0VoMb.js";import{S as $e}from"./StepRankingWrapper-D2iRVyll.js";import{T as Qe}from"./TrophyIcon-foozD3mB.js";import{G as Xe}from"./GameOverWrapper-e9-T77xZ.js";import{A as Je}from"./Achievements-CtMNntcR.js";import{T as Ke}from"./TitledContainer-CnSmX8sq.js";import{a as Ye}from"./achievements-XpQD-ErL.js";import"./RulesModal-DRYJnR68.js";import"./WritingIcon-BdUcX03W.js";import"./index-BrWjgCC0.js";import"./PurePanel-6BosMgab.js";import"./Game-o0gfRQHQ.js";import"./useMutation-CNVmh7kl.js";import"./index-kYmhQc95.js";import"./index-Ce_RyJZR.js";import"./Overflow-BcUXQIrv.js";import"./useEvent-F1Ae_2F8.js";import"./index-CJOoKUjK.js";import"./index-D4zZL8ho.js";import"./GameBanner-CAVYok-z.js";import"./useDevFeatures-DjskBwfp.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DB5CymZ0.js";import"./Loading-D47EBP__.js";import"./useBubbleLock-DEj9y36b.js";import"./AnimatedLoaderIcon-CadnozrU.js";import"./InfoCircleOutlined-CQURFdCX.js";import"./SignIn-BgAFgpN6.js";import"./GoogleIcon-DpP5nK5e.js";import"./WaitingRoomIcon-CGPkUkYw.js";import"./AnimatedClockIcon-BmTYkDTg.js";import"./LikeFilled-qH8NTFrK.js";import"./StarFilled-BYtUWmCF.js";import"./StarIcon-DEBTHI6i.js";import"./ClockIcon-C-tt1t4Q.js";import"./progress-QiInP-1T.js";import"./RankingBoard-IHQijDGy.js";import"./CaretUpOutlined-Cv0Won4L.js";import"./TheEndIcon-DIbpI0dC.js";import"./index-BFtoU65z.js";import"./useMergedState-DDQnRc3J.js";import"./Medal-DKwPrZuE.js";const _={METRICS_BUILDING:"METRICS_BUILDING",GUESSING:"GUESSING",RESULTS:"RESULTS"},J={SUBMIT_POOL:"SUBMIT_POOL",SUBMIT_METRICS:"SUBMIT_METRICS",SUBMIT_GUESS:"SUBMIT_GUESS"},B=120;function Ze(){const{translate:r}=G(),s=H({actionName:"submit-pool",successMessage:r("Palavras submetidas com sucesso","Words submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application found an error while trying to submit your words")});return t=>{s({action:J.SUBMIT_POOL,...t})}}function es(r){const{translate:s}=G(),t=H({actionName:"submit-metrics",onSuccess:()=>r(2),onError:()=>r(0),successMessage:s("Métricas submetidas com sucesso","Metrics submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas métricas","Oops, the application found an error while trying to submit your metrics")});return a=>{t({action:J.SUBMIT_METRICS,...a})}}function ss(){const{translate:r}=G(),s=H({actionName:"submit-guess",successMessage:r("Palpite adivinhada com sucesso","Guess submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao enviar seu palpite","Oops, the application found an error while trying to submit your guess")});return t=>{s({action:J.SUBMIT_GUESS,...t})}}function rs({players:r,presenter:s,turnOrder:t,poolIds:a,wordsDict:i,announcement:n}){return e.jsxs(O,{fullWidth:!0,announcement:n,children:[e.jsx(_e,{players:r,title:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(E,{player:s})," cria as métricas."]}),en:e.jsxs(e.Fragment,{children:["Wait while ",e.jsx(E,{player:s})," creates the metrics."]})}),instruction:a?e.jsx(ts,{poolIds:a,wordsDict:i}):e.jsx("div",{children:"..."})}),e.jsx(Be,{players:r,order:t,activePlayerId:s.id})]})}function ts({poolIds:r,wordsDict:s}){return e.jsxs(fe,{children:[e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Palavras disponíveis para a rodada:"}),en:e.jsx(e.Fragment,{children:"Available words for the round:"})}),e.jsx(T,{wrap:!0,children:r==null?void 0:r.map((t,a)=>{const i=s[t];return e.jsx(w.div,{className:"pool-card",...ne("fadeIn",{delay:a*.1}),children:i.text},t)})})]})}function v({position:r,value:s}){return e.jsx(w.div,{className:"metrics-board__evaluation-pip",layoutId:"item",transition:{ease:"easeInOut",duration:.3},animate:{left:s>r?`${r*1.5}rem`:"auto",right:s<=r?`${(6-r-1)*1.5}rem`:"auto"}})}function as({metricsDescriptors:r,evaluations:s,onChange:t,disabled:a}){return e.jsx("div",{className:"metrics-board",children:Object.keys(r).map(i=>{const n=r[i],o=(s==null?void 0:s[i])??3;return e.jsx(is,{descriptors:n,initialEvaluation:o,onChange:d=>t==null?void 0:t(i,d),disabled:a},i)})})}function is({descriptors:r,initialEvaluation:s=3,onChange:t,disabled:a}){const[i,n]=M.useState(s),o=()=>{const m=Math.min(i+1,6);n(m),t==null||t(m)},d=()=>{const m=Math.max(i-1,0);n(m),t==null||t(m)};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(R,{onClick:o,className:"metrics-board__card metrics-board__card--left",disabled:a,children:r[0].text}),e.jsxs("div",{className:"metrics-board__evaluation",children:[e.jsx(v,{position:0,value:i}),e.jsx(v,{position:1,value:i}),e.jsx(v,{position:2,value:i}),e.jsx(v,{position:3,value:i}),e.jsx(v,{position:4,value:i}),e.jsx(v,{position:5,value:i})]}),e.jsx(R,{onClick:d,className:"metrics-board__card metrics-board__card--right",disabled:a,children:r[1].text})]})}const C=4;function ns({wordsDict:r,secretCardsOptionsIds:s,availablePoolCardsIds:t,metricsDescriptors:a,secretWordId:i,poolIds:n=[],onSubmitMetrics:o,onSubmitPool:d,announcement:m}){const{dualTranslate:h}=G(),{step:g,goToNextStep:z,setStep:U}=F(i?3:1),[u,A]=M.useState(i||null),[S,N]=M.useState([]),[f,W]=M.useState({1:3,2:3,3:3,4:3,5:3}),pe=p=>{N(l=>{const x=[...l];return x.includes(p)?x.filter(ge=>ge!==p):l.length===C?l:[...x,p]})},he=()=>{const p=t.filter(l=>!S.includes(l));N(l=>[...l,...k.sampleSize(p,C-l.length).map(x=>x)])},xe=()=>{u&&d({poolIds:k.shuffle([...S,u]),secretWordId:u||""})},Y=r[u||""],Z=s.findIndex(p=>p===i),je=()=>{o({metrics:f})};M.useEffect(()=>{g<3&&i&&U(3)},[i]);const ve=(p,l)=>{W(x=>({...x,[p]:l}))};return e.jsxs(O,{fullWidth:!0,announcement:m,children:[g===1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(c,{pt:"Qual será a palavra secreta?",en:"Which will be the secret word?"})}),e.jsx(I,{type:"action",children:e.jsx(c,{en:"First, from these two words, select the one you want to create the metrics for.",pt:"Primeiro, dentre estas duas palavras, selecione a que você quer usar para suas métricas."})}),e.jsx(b,{children:s.map((p,l)=>{const x=r[p];return e.jsx(R,{onClick:()=>A(x.id),active:u===x.id,children:e.jsx(y,{header:ye[l],color:D(l+2),children:x.text})},x.id)})}),e.jsx(b,{children:e.jsx(q,{size:"large",type:"primary",onClick:z,disabled:!u,children:e.jsx(c,{pt:"Continuar",en:"Continue"})})})]}),g===2&&e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(c,{pt:"Quais outras palavras estão misturadas para os outros jogadores?",en:"Which other words will be mixed for the other players?"})}),e.jsx(I,{type:"action",children:e.jsx(c,{en:e.jsxs(e.Fragment,{children:["Now that you have the keyword, from these other words select ",e.jsx("strong",{children:"4 words"})," to be part of the pool. Choose words that won't conflict with your keyword."]}),pt:e.jsxs(e.Fragment,{children:["Agora que você tem a palavra-chave, selecione ",e.jsx("strong",{children:"4 palavras"})," para fazer parte do pool. Escolha palavras que não entrem em conflito com sua palavra-chave."]})})}),e.jsx(y,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:D(Z+2),children:Y.text}),e.jsx(b,{wrap:!0,children:t.map(p=>{const l=r[p];return e.jsx(R,{onClick:()=>pe(l.id),active:S.includes(l.id),children:e.jsx(y,{hideHeader:!0,children:l.text})},l.id)})}),e.jsxs(b,{children:[e.jsx(q,{size:"large",onClick:he,disabled:S.length>=C,icon:e.jsx(Ce,{}),children:e.jsx(c,{pt:"Aleatório",en:"Random"})}),e.jsx(ee,{size:"large",onClick:xe,disabled:!u||S.length!==C,children:e.jsx(c,{pt:"Enviar",en:"Submit"})})]})]}),g===3&&e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(c,{pt:"Crie suas métricas",en:"Create the metrics"})}),e.jsx(I,{type:"action",children:e.jsx(c,{en:e.jsxs(e.Fragment,{children:["Finally, evaluate each of the 5 metrics by distributing the 6 pips between the 2 descriptors that best describes your keyword so the players can try to guess it.",e.jsx("br",{}),"Just click on the descriptor to move the pips."]}),pt:e.jsxs(e.Fragment,{children:["Por fim, avalie cada uma das 5 métricas distribuindo as 6 bolinhas entre os 2 descritores que melhor descrevem sua palavra-chave para que os jogadores possam tentar adivinhá-la.",e.jsx("br",{}),"Basta clicar no descritor para mover as bolinhas."]})})}),e.jsx(y,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:D(Z+3),children:Y.text}),e.jsx(as,{metricsDescriptors:a,evaluations:f,onChange:ve}),e.jsx(b,{className:"mt-6",children:e.jsx(ee,{size:"large",onClick:je,children:e.jsx(c,{pt:"Enviar Métricas",en:"Submit Metrics"})})}),e.jsxs(I,{type:"tip",children:[e.jsx(c,{en:e.jsx(e.Fragment,{children:"Here are the other words in case you need to verify any conflicts"}),pt:e.jsx(e.Fragment,{children:"Aqui estão as outras palavras caso você precise verificar algum conflito"})}),e.jsx(T,{justify:"center",children:n.map(p=>{const l=r[p];return e.jsx(y,{hideHeader:!0,size:"small",children:l.text},l.id)})})]})]})]})}function os({players:r,state:s}){var g;const{step:t,setStep:a,goToNextStep:i}=F(),[n,o]=Q("presenterId",s,r),d=es(a),m=Ze(),h=e.jsx(L,{icon:e.jsx(Pe,{}),title:e.jsx(c,{en:"Metrics Building",pt:"Construção de Métricas"}),currentRound:(g=s==null?void 0:s.round)==null?void 0:g.current,type:"overlay",children:e.jsx(X,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["O apresentador ",e.jsx(E,{player:n})," vai construir as métricas para essa rodada."]}),en:e.jsxs(e.Fragment,{children:["The presenter ",e.jsx(E,{player:n})," will build the metrics for this round."]})})})});return e.jsx(V,{phase:s==null?void 0:s.phase,allowedPhase:_.METRICS_BUILDING,children:e.jsxs($,{step:t,players:r,children:[e.jsx(Re,{round:s.round,time:3,onPressButton:i}),e.jsxs(ke,{condition:o,children:[e.jsx(ns,{announcement:h,wordsDict:s.wordsDict,secretCardsOptionsIds:s.secretCardsOptionsIds,availablePoolCardsIds:s.availablePoolCardsIds,metricsDescriptors:s.metricsDescriptors,poolIds:s.poolIds,secretWordId:s.secretWordId,onSubmitMetrics:d,onSubmitPool:m}),e.jsx(rs,{announcement:h,players:r,presenter:n,turnOrder:s.turnOrder,wordsDict:s.wordsDict,poolIds:s.poolIds})]})]})})}function te({children:r}){return e.jsx(le,{icon:e.jsx(Oe,{}),children:r})}function ae({children:r}){return e.jsx(le,{icon:e.jsx(ce,{}),children:r})}function cs(){return e.jsx(c,{en:e.jsxs(e.Fragment,{children:["Among the ",e.jsx(te,{children:"5 words"}),", you must guess the"," ",e.jsx(ae,{children:"secret word"}),". Every"," ",e.jsx(re,{children:"10 seconds"})," one of the 5 metrics shows up to help you! You can make a guess at any moment. The earlier you make the guess,"," ",e.jsx(j,{type:"positive",children:"more points"})," you get. If you decide to change your guess, you can do it once, but that will be your new score and"," ",e.jsx(j,{type:"negative",children:"- 1 point"}),"."]}),pt:e.jsxs(e.Fragment,{children:["Entre as ",e.jsx(te,{children:"5 palavras"}),", você deve adivinhar a"," ",e.jsx(ae,{children:"palavra secreta"}),". A cada"," ",e.jsx(re,{children:"10 segundos"})," uma das 5 métricas aparece para ajudar. Você pode fazer um palpite a qualquer momento. Quanto mais cedo você fizer o palpite,"," ",e.jsx(j,{type:"positive",children:"mais pontos"})," você ganha. Se decidir mudar seu palpite, você pode fazê-lo uma vez, mas isso resultará em uma nova pontuação e"," ",e.jsx(j,{type:"negative",children:"- 1 ponto"}),"."]})})}function K({metricsDescriptors:r,evaluations:s,level:t}){return e.jsx("div",{className:"metrics-board",children:Object.keys(r).map((a,i)=>{const n=r[a],o=(s==null?void 0:s[a])??3;return e.jsx(ls,{descriptors:n,evaluation:o,visible:t>i},a)})})}function ls({descriptors:r,evaluation:s,visible:t}){const a={initial:{opacity:0},transition:{delay:1,duration:2},animate:{opacity:t?1:0}};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(w.div,{...a,className:"metrics-board__card metrics-board__card--left",children:r[0].text}),e.jsxs(w.div,{className:"metrics-board__evaluation",...a,children:[e.jsx(v,{position:0,value:s}),e.jsx(v,{position:1,value:s}),e.jsx(v,{position:2,value:s}),e.jsx(v,{position:3,value:s}),e.jsx(v,{position:4,value:s}),e.jsx(v,{position:5,value:s})]}),e.jsx(w.div,{...a,className:"metrics-board__card metrics-board__card--right",children:r[1].text})]})}function me({children:r,...s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...s,children:[e.jsx("path",{fill:"#ffd06a",d:"M473.2 481.1H38.8a31.3 31.3 0 01-31.3-31.3V45.2A37.7 37.7 0 0145.2 7.5h421.6a37.7 37.7 0 0137.7 37.7v404.6a31.3 31.3 0 01-31.3 31.3z"}),e.jsx("path",{fill:"#ffd06a",d:"M504.5 45.2v404.6a31.3 31.3 0 01-31.3 31.3H452a31.3 31.3 0 0031.3-31.3V45.2a37.7 37.7 0 00-37.7-37.7h21.1a37.8 37.8 0 0137.8 37.7z"}),e.jsx("path",{fill:"#ffd06a",d:"M434.7 436.5H77.3a25.6 25.6 0 01-25.6-25.6V82.8A30.8 30.8 0 0182.5 52h347.1a30.8 30.8 0 0130.8 30.8v328.1a25.7 25.7 0 01-25.7 25.6z"}),e.jsx("path",{fill:"#ffd06a",d:"M429.5 52.1h-27.4a30.8 30.8 0 0130.8 30.8V411a25.6 25.6 0 01-25.6 25.6h27.4a25.6 25.6 0 0025.6-25.6V82.8a30.7 30.7 0 00-30.8-30.7z"}),e.jsx("path",{d:"M512 45.2A45.5 45.5 0 00466.8 0H45.2A45.4 45.4 0 000 45.2v404.6c0 20.5 17 38.8 38.8 38.8h357.4a7.5 7.5 0 000-15H38.8a24.4 24.4 0 01-11.4-2.9l33.1-31.3a33 33 0 0016.8 4.6h357.4a33 33 0 0016.8-4.6l33.1 31.3a23.2 23.2 0 01-11.4 2.9h-42a7.5 7.5 0 100 15h42a39 39 0 0038.8-38.8zM466.8 15a29.9 29.9 0 0116 4.6l-32.8 31a37.8 37.8 0 00-20.5-6h-347a37.6 37.6 0 00-20.5 6l-32.8-31a29.9 29.9 0 0116-4.6zM15 449.8V45.2a30.6 30.6 0 013.8-14.7L51.1 61a38.5 38.5 0 00-6.9 21.9V411a32.9 32.9 0 005.4 18.1l-32.4 30.7a24.5 24.5 0 01-2.2-10zM77.3 429a18.1 18.1 0 01-18.1-18.1V82.8a23.3 23.3 0 0123.3-23.3h347.1a23.3 23.3 0 0123.3 23.3v22.5a7.5 7.5 0 0015 0V82.8a38.5 38.5 0 00-6.9-21.9l32.3-30.5a30.6 30.6 0 013.8 14.7v404.6a23.5 23.5 0 01-2.2 9.9l-32.4-30.7a32.9 32.9 0 005.4-18.1V141.6a7.5 7.5 0 00-15 0V411a18.1 18.1 0 01-18.1 18.1z"}),e.jsx("foreignObject",{x:"72.192",y:"74.472",width:"367.904",height:"341.859",children:r})]})}function ds({players:r,pointsBrackets:s}){const t=us(r,s.length);return e.jsx("div",{className:"m-guessing-board__points-brackets",children:s.map((a,i)=>{var n;return e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(me,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:a})}),e.jsx("div",{className:"m-guessing-board__points-bracket-value",children:(n=t==null?void 0:t[i])==null?void 0:n.map(o=>e.jsx("span",{children:e.jsx(ue,{id:r[o.playerId??""].avatarId},o.playerId)},o==null?void 0:o.playerId))})]},`${a}-${i}`)})})}const us=(r,s)=>{const t={};Object.values(r).forEach(n=>{const o=Se(n.guesses??[]);o.forEach((d,m)=>{const h=Math.floor(d.timestamp/3)*3;t[h]||(t[h]=[]),t[h].push({cardId:d.cardId,level:d.level,timestamp:h,playerId:n.id,used:m<o.length-1,retry:o.length>1})})});const a=k.orderBy(Object.keys(t),n=>Number(n)).map(n=>k.orderBy(t[Number(n)],["playerId"])),i=a.slice(0,s);return a.length>s&&i.push(...a.slice(s)),i};function ms({players:r,user:s,round:t,isThePresenter:a,wordsDict:i,poolIds:n,secretWordId:o,metricsDescriptors:d,metrics:m,pointsBrackets:h,onSubmitGuess:g,onMakeMeReady:z}){var N;const{isLoading:U}=be(),u=s.guesses||[],{timeLeft:A}=de({duration:B,onExpire:()=>{if(!(s.ready||a||u.length>=2)){if(!u.length){const f=k.sample(n)||n[0];g({guesses:[...u,{cardId:f,level:5,timestamp:B}]})}z()}}}),S=ps(A);return Fe(),e.jsxs(O,{fullWidth:!0,children:[e.jsx(P,{size:"small",children:e.jsx(c,{pt:"Qual a palavra secreta?",en:"Which will be the secret word?"})}),a?e.jsxs(I,{type:"action",children:[e.jsx(c,{en:"Wait while the players guess the secret word:",pt:"Aguarde enquanto os jogadores adivinham a palavra secreta:"})," ",e.jsx(ze,{children:((N=i[o])==null?void 0:N.text)||"..."})]}):e.jsxs(I,{type:"action",children:[u.length===0&&e.jsx(c,{en:"Select the secret word.",pt:"Selecione a palavra secreta."}),u.length===1&&e.jsx(c,{en:e.jsxs(e.Fragment,{children:["If you change your mind, you can choose a different word, but you will lower your points and receive a ",e.jsx(j,{type:"negative",children:"1 point"})," penalty."]}),pt:e.jsxs(e.Fragment,{children:["Se você mudar de ideia, pode escolher uma palavra diferente, mas perderá pontos e receberá uma penalidade de ",e.jsx(j,{type:"negative",children:"1 ponto"}),"."]})}),u.length===2&&e.jsx(c,{en:"Wait while the other players make their guesses.",pt:"Aguarde enquanto os jogadores fazem seus palpites."})]}),e.jsx(T,{wrap:"wrap",gap:8,className:"mb-4",justify:"center",children:n.map(f=>e.jsx(R,{onClick:()=>g({guesses:[...u,{cardId:f,level:S,timestamp:Math.max(B-A,0)}]}),disabled:U||s.ready||a||u.length===2,active:u.some(W=>W.cardId===f),children:e.jsx(y,{hideHeader:!0,children:i[f].text},f)},f))}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:d,evaluations:m,level:S}),e.jsx(ds,{players:r,pointsBrackets:h})]}),e.jsx(Ue,{value:A,total:B,status:"normal"}),e.jsx(hs,{players:r,round:t})]})}const ps=r=>({12:1,11:2,10:3,9:4,8:5})[Math.ceil(r/10)]||5;function hs({players:r,round:s}){return Object.values(r).every(a=>{var i;return a.ready||((i=a.guesses)==null?void 0:i.length)>0})?e.jsx(oe,{round:s}):null}function xs({players:r,state:s}){var m;const t=Te(r,s),{step:a,goToNextStep:i}=F(),[,n]=Q("presenterId",s,r),o=ss(),d=Ge({});return e.jsx(V,{phase:s==null?void 0:s.phase,allowedPhase:_.GUESSING,children:e.jsxs($,{step:a,players:r,children:[e.jsx(L,{icon:e.jsx(ce,{}),title:e.jsx(c,{pt:"Adivinhação",en:"Guessing"}),onClose:i,currentRound:(m=s==null?void 0:s.round)==null?void 0:m.current,unskippable:!0,duration:[30,15,10][s.round.current-1]??10,type:"block",children:e.jsx(X,{children:e.jsx(cs,{})})}),e.jsx(ms,{players:r,round:s.round,isThePresenter:n,turnOrder:s.turnOrder,user:t,wordsDict:s.wordsDict,poolIds:s.poolIds,secretWordId:s.secretWordId,metricsDescriptors:s.metricsDescriptors,metrics:s.metrics,pointsBrackets:s.pointsBrackets,onSubmitGuess:o,onMakeMeReady:d})]})})}function ie({player:r,tooltipProps:s,...t}){return e.jsx(Ie,{title:r.name,...s,children:e.jsx(ue,{id:r.avatarId,...t})})}function js({brackets:r,players:s,cards:t}){return e.jsx("div",{className:"m-guessing-board__points-brackets",children:r.map((a,i)=>e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(me,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:a.score})}),e.jsxs("div",{className:"m-guessing-board__points-bracket-value",children:[e.jsxs(Me.Group,{children:[a.playersIds.map((n,o)=>e.jsx(w.div,{...ne("tada",{repeat:10,delay:2+i*o*.25}),children:e.jsx(ie,{player:s[n]})},n)),a.playersIds.length===0&&e.jsx(se,{icon:e.jsx(qe,{})})]}),e.jsx(Le,{type:"vertical"}),e.jsx(T,{vertical:!0,children:a.wrongGuesses.map(n=>{var o;return e.jsxs(T,{align:"center",children:[e.jsx(se,{icon:e.jsx(He,{}),size:16})," ",e.jsx(ie,{player:s[n.playerId]}),e.jsx(y,{hideHeader:!0,size:"small",children:((o=t[n.cardId])==null?void 0:o.text)||"???"})]},n.playerId)})})]})]},`${a.score}-${i}`))})}function vs({players:r,presenter:s,result:t,goToNextStep:a,announcement:i}){const[n,o]=M.useState(!1);return de({duration:4,onExpire:()=>o(!0)}),e.jsxs(O,{fullWidth:!0,announcement:i,children:[e.jsx(P,{size:"small",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Resultados para apresentador(a) ",e.jsx(E,{player:s})]}),en:e.jsxs(e.Fragment,{children:["Results for presenter ",e.jsx(E,{player:s})]})})}),e.jsx(I,{type:"action",children:e.jsx(c,{en:e.jsxs(e.Fragment,{children:["The guessers get ",e.jsx(j,{children:"points"})," based on the bracket their last guess falls into, if correct.",e.jsx("br",{}),"They also lose ",e.jsx(j,{type:"negative",children:"1 point"})," if they made more than one guess.",e.jsx("br",{}),"The presenter gets ",e.jsx(j,{type:"positive",children:"2 points"})," for each who guessed correctly."]}),pt:e.jsxs(e.Fragment,{children:["Os adivinhadores ganham ",e.jsx(j,{children:"pontos"})," baseados no quadrado em que a última adivinhação está, se o palpite estiver correto.",e.jsx("br",{}),"Mas eles também perdem ",e.jsx(j,{type:"negative",children:"1 ponto"})," se fizeram mais de um palpite.",e.jsx("br",{}),"O apresentador ganha ",e.jsx(j,{type:"positive",children:"2 pontos"})," por cada adivinhador que acertou."]})})}),e.jsx(b,{children:e.jsx(y,{hideHeader:!0,size:"large",children:t.cards[t.secretWordId].text})}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:t.metricsDescriptors,evaluations:t.metrics,level:n?5:0}),e.jsx(js,{brackets:t.brackets,players:r,cards:t.cards})]}),e.jsx(b,{className:"mt-8",children:e.jsx(De,{duration:45,onExpire:a,onClick:a,icon:e.jsx(Ve,{}),children:e.jsx(c,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function gs({players:r,ranking:s,goToPreviousStep:t,round:a}){return e.jsxs($e,{players:r,ranking:s,gainedPointsDescriptions:[e.jsx(c,{pt:"Acertou a palavra secreta",en:"Guessed the secret word"},"1"),e.jsx(c,{pt:"Adivinhou na segunda tentativa",en:"Guessed in the second try"},"2"),e.jsx(c,{pt:"Pontos para o apresentador(a)",en:"Points for the presenter"},"3")],children:[e.jsx(b,{children:e.jsx(q,{onClick:t,children:e.jsx(c,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(oe,{round:a})]})}function fs({players:r,state:s}){var d;const{step:t,goToNextStep:a,goToPreviousStep:i}=F(),[n]=Q("presenterId",s,r),o=e.jsx(L,{icon:e.jsx(We,{}),title:e.jsx(c,{pt:"Resultado",en:"Results"}),currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,type:"overlay",duration:4,children:e.jsx(X,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Quantos pontos você ganhou?"}),en:e.jsx(e.Fragment,{children:"How many points did you get?"})})})});return e.jsx(V,{phase:s==null?void 0:s.phase,allowedPhase:_.RESULTS,children:e.jsxs($,{step:t,players:r,children:[e.jsx(vs,{players:r,announcement:o,goToNextStep:a,presenter:n,result:s.result}),e.jsx(gs,{players:r,round:s.round,ranking:s.ranking,goToPreviousStep:i})]})})}function ys({state:r,players:s}){const t=r.gallery??[];return e.jsxs(Xe,{state:r,players:s,announcementIcon:e.jsx(Qe,{}),children:[e.jsx(Je,{players:s,achievements:r.achievements,reference:Ye}),e.jsx(Ke,{title:e.jsx(c,{pt:"Métricas",en:"Metrics"}),className:"mt-4",children:t.map(a=>{var i;return e.jsxs(T,{vertical:!0,align:"center",justify:"center",children:[e.jsx(y,{hideHeader:!0,children:((i=a.cards[a.secretWordId])==null?void 0:i.text)||"???"}),e.jsx(K,{metricsDescriptors:a.metricsDescriptors,evaluations:a.metrics,level:5})]},a.secretWordId)})})]})}function Ss(r){switch(r.phase){case _.METRICS_BUILDING:return os;case _.GUESSING:return xs;case _.RESULTS:return fs;case Ne.DEFAULT.GAME_OVER:return ys;default:return Ae}}function Fr(){return e.jsx(Ee,{gameCollection:we.MEDIDAS_NAO_EXATAS,getActiveComponent:Ss})}export{Fr as default};
