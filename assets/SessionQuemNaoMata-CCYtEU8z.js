import{r as x,h as b,j as e,P as W,B as _,T as c,dN as f,cJ as $,e as A,I as B,b1 as D,n as J,bK as X,E as Z,aH as ee,aO as se,aZ as oe,aX as re,aY as ne}from"./index-Vw57CEN-.js";import{u as w,S as te,b as ae,c as y,d as S,e as T,f as m,g as E,P as M,i as ie,j as ce,k as le,l as ue}from"./StepSwitcher-BCR2DGha.js";import{P as de}from"./PhasePlaceholder-CAguQNZc.js";import{R as me,T as N}from"./TDIcon-HPT9dvUY.js";import{I}from"./Instruction-D7Tn2Dv1.js";import{m as he}from"./messageContent-vrtlpHBZ.js";import{T as pe}from"./TimedTimerBar-CSEesyBH.js";import{A as O}from"./AvatarName-B24WWCqL.js";import{S as v}from"./index-C676bHiK.js";import{c as je}from"./WritingIcon-CsZ6Zrqy.js";import{A as P}from"./AvatarCard-uf4Mya0e.js";import{K as xe}from"./KnifeIcon-D7TyrelA.js";import{b as ge}from"./RulesModal-d9O90WdN.js";import"./useBlurCards-DOK7HwS-.js";import"./speech-CfSCm4wv.js";import"./useDevFeatures-DofYkQOJ.js";import"./useMutation-Bm-mtOSI.js";import"./Game-KwWnvbw7.js";import"./WaitingRoomIcon-Bvp9HYFo.js";import"./AnimatedClockIcon-DJ2t1FhV.js";import"./index-BN6mvInZ.js";import"./useBubbleLock-COax8yFK.js";import"./PurePanel-DULuiT7D.js";import"./index-D6jgGGxq.js";import"./index-DDBYXE76.js";import"./Avatar-yx2rb8Te.js";import"./GameBanner-D9OMyDG1.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DwZJHyoF.js";import"./InfoCircleOutlined-De59D9o1.js";import"./index-DOvvu0pO.js";import"./SignIn-CzquHbwE.js";import"./GoogleIcon-BG2v1Ozx.js";import"./index-CkAC6SzL.js";import"./Loading-DLud394M.js";import"./AnimatedLoaderIcon-BTOIEdDS.js";import"./LikeFilled-Csh8QZoA.js";import"./VideoGameControllerIcon-DhOwz7qf.js";import"./TimerBar-BpcfWxmT.js";import"./progress-DH6_ibVo.js";import"./Overflow-Bke7JJh6.js";import"./useEvent-DnS_cXrR.js";var fe=function(o){return(o+1)%1e6};function ve(){var o=x.useReducer(fe,0),s=o[1];return s}function j(o,s){return typeof o=="function"?o.length?o(s):o():o}function Ae(o){var s=x.useRef(j(o)),r=ve();return x.useMemo(function(){return[function(){return s.current},function(n){s.current=j(n,s.current),r()}]},[])}function be(o,s,r){s===void 0&&(s=null),r===void 0&&(r=null);var n=j(o);typeof n!="number"&&console.error("initialValue has to be a number, got number"),typeof r=="number"?n=Math.max(n,r):r!==null&&console.error("min has to be a number, got "+typeof r),typeof s=="number"?n=Math.min(n,s):s!==null&&console.error("max has to be a number, got "+typeof s);var t=Ae(n),a=t[0],p=t[1];return[a(),x.useMemo(function(){var h=function(i){var l=a(),u=j(i,l);l!==u&&(typeof r=="number"&&(u=Math.max(u,r)),typeof s=="number"&&(u=Math.min(u,s)),l!==u&&p(u))};return{get:a,set:h,inc:function(i){i===void 0&&(i=1);var l=j(i,a());typeof l!="number"&&console.error("delta has to be a number or function returning a number, got "+typeof l),h(function(u){return u+l})},dec:function(i){i===void 0&&(i=1);var l=j(i,a());typeof l!="number"&&console.error("delta has to be a number or function returning a number, got "+typeof l),h(function(u){return u-l})},reset:function(i){i===void 0&&(i=n);var l=j(i,a());typeof l!="number"&&console.error("value has to be a number or function returning a number, got "+typeof l),n=l,h(l)}}},[n,r,s])]}const G={SUBMIT_TARGET:"SUBMIT_TARGET",SUBMIT_MESSAGE:"SUBMIT_MESSAGE"};function ye(){const{translate:o}=b(),s=w({actionName:"submit-target",successMessage:o("Alvo selecionado com sucesso","Target set successfully"),errorMessage:o("Vixi, o aplicativo encontrou um erro ao tentar enviar seu alvo","Oops, the application failed to send your target")});return r=>{s({action:G.SUBMIT_TARGET,...r})}}function Se(){const{translate:o}=b(),s=w({actionName:"submit-message",successMessage:o("Mensagem enviada com sucesso!","Message sent successfully!"),errorMessage:o("Vixi, o aplicativo encontrou um erro ao tentar enviar a mensagem","Oops, the application failed to send the message")});return r=>{s({action:G.SUBMIT_MESSAGE,...r})}}function Te({messages:o,onSubmitMessage:s,disabled:r,players:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"q-message-board",children:[e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'})]}),e.jsx("div",{className:"q-message-send",children:e.jsx(W,{placement:"top",title:e.jsx(c,{pt:"Enviar mensagem anônima",en:"Send anonymous message"}),content:e.jsx(Ee,{players:n,onSubmitMessage:s}),trigger:"click",children:e.jsx(_,{size:"small",disabled:r,children:"Enviar mensagem"})})})]})}function Ee({onSubmitMessage:o,players:s}){const{translate:r}=b(),[n]=f.useForm();return e.jsxs(f,{form:n,initialValues:{recipientId:"ALL"},className:"q-message-form",size:"small",onFinish:t=>console.log(t),children:[e.jsx(f.Item,{label:e.jsx(c,{pt:"Apontem para",en:"Aim on"}),name:"targetId",required:!0,children:e.jsx(v,{placeholder:e.jsx(c,{pt:"Selecione alguém",en:"Select someone"}),children:Object.values(s).map(t=>e.jsx(v.Option,{value:t.id,children:e.jsx(O,{player:t})},t.id))})}),e.jsx(f.Item,{label:e.jsx(c,{pt:"Enviar para",en:"Send to"}),name:"recipientId",required:!0,children:e.jsxs(v,{placeholder:e.jsx(c,{pt:"Selecione alguém",en:"Select someone"}),children:[e.jsx(v.Option,{value:"ALL",children:e.jsx(O,{player:{...$,id:"unknown",avatarId:"N",name:r("TODOS","EVERYBODY")}})}),Object.values(s).map(t=>e.jsx(v.Option,{value:t.id,children:e.jsx(O,{player:t})},t.id))]})}),e.jsx(f.Item,{label:"",children:e.jsx(_,{type:"primary",htmlType:"submit",children:e.jsx(c,{pt:"Enviar",en:"Send"})})})]})}function F({player:o,side:s}){return e.jsxs("div",{className:A("q-player-status",`q-player-status--${s}`),children:[e.jsx(P,{player:o,withName:!0,size:"small"}),e.jsx("div",{className:A("q-player-status__icon",`q-player-status__icon--${s}`),children:e.jsx(B,{icon:o.target?e.jsx(me,{className:A(D("rotateInDownLeft"))}):e.jsx(je,{className:A(D("flash",{speed:"slower",infinite:!0}))})})})]})}function V({player:o,width:s,target:r,onClick:n,disabled:t=!1,isAmbush:a=!1}){return e.jsx(J,{className:"q-player-target-card-button",style:{backgroundColor:X(o.avatarId),width:`${s}%`},active:r===o.id,onClick:()=>n(o.id),disabled:t,children:a?e.jsxs("div",{className:"q-ambush-card",children:[e.jsx(P,{player:o,replacementAvatar:e.jsx(B,{icon:e.jsx(xe,{})}),size:"small"}),e.jsx("div",{className:"a",children:e.jsx(c,{pt:"Emboscar!",en:"Ambush!"})})]}):e.jsx(P,{player:o,withName:!0,addressUser:!0,size:"small"})})}function Me(){return e.jsx(c,{pt:e.jsxs("ul",{children:[e.jsx("li",{children:"O grupo tem 90 segundos para decidir quem deve morrer."}),e.jsx("li",{children:"Cada um vota secretamente, escolha seu alvo clicando em um dos avatares abaixo."}),e.jsx("li",{children:"Você pode trocar seu alvo até 3 vezes durante o tempo."}),e.jsx("li",{children:"Você pode se comunicar verbalmente ou usando 1 dos meios de comunicação:"}),e.jsx("li",{children:"- Mandar uma mensagem anônima para todos"}),e.jsx("li",{children:"- Mandar uma mensagem secreta para alguém"}),e.jsx("li",{children:"O objetivo é sobreviver:"}),e.jsx("li",{children:"- Se você não votar no mais votado, você morre"}),e.jsx("li",{children:'- Se você acha que será o mais votado, você pode usar "Emboscada", mas...'}),e.jsx("li",{children:'- Se você usar "Emboscada" e não for o mais votado, você morre'}),e.jsx("li",{children:'- Se você for o mais votado e não votou usou "Emboscada", você morre'}),e.jsx("li",{children:'- Se você votou no mais votado, mas o mais votado usou "Emboscada", você morre'}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs("ul",{children:[e.jsx("li",{children:"The group has 90 seconds to decide who dies."}),e.jsx("li",{children:"Each player votes secretly by selecting one of the targets in the bottom of the page."}),e.jsx("li",{children:"You can swap your vote up to 3 times within the timer."}),e.jsx("li",{children:"You may communicate openly or use one of the means of communication:"}),e.jsx("li",{children:"- Send a public anonymous message to all"}),e.jsx("li",{children:"- Send a private anonymous message to someone"}),e.jsx("li",{children:"Your objective is to survive:"}),e.jsx("li",{children:"- If you don't vote for the most voted player, you die"}),e.jsx("li",{children:'- If you think you are the most voted player, you may use "Ambush" , but...'}),e.jsx("li",{children:`- If you use "Ambush" and you're not the most voted, you die`}),e.jsx("li",{children:'- If you are the most voted and did not used "Ambush", you die'}),e.jsx("li",{children:'- If you voted for the most voted player but they played "Ambush", you die'}),e.jsx("li",{children:"Good luck!"})]})})}function Ne({players:o,user:s,onSubmitTarget:r,onSubmitMessage:n,messages:t}){const{message:a}=Z.useApp(),{isLoading:p}=ee(),{translate:h}=b(),[i,l]=x.useState(!1),[u,Q]=be(3);x.useEffect(()=>{u<=0&&l(!0)},[u]);const Y=()=>l(!0),g=Object.keys(o).sort(),{leftPlayersIds:z,rightPlayersIds:H}=x.useMemo(()=>{const d=Math.ceil(g.length/2),U=[],L=[];return g.forEach((k,K)=>{K<d?U.push(k):L.push(k)}),{leftPlayersIds:U,rightPlayersIds:L}},[g]),R=Math.floor(100/g.length),C=()=>{a.info(he(h("Você controla!","You control!"),e.jsx(Me,{}),"rules",20,"rules"))};se(()=>C());const q=d=>{Q.dec(),r({targetId:d})};return e.jsxs(te,{fullWidth:!0,className:"q-target-grid",children:[e.jsxs("div",{className:"q-target-content",children:[e.jsx(ae,{size:"small",children:e.jsx(c,{pt:"Escolha seu alvo!",en:"Choose your target!"})}),e.jsx(pe,{duration:90,steps:18,onExpire:Y}),e.jsx(_,{shape:"round",size:"small",onClick:C,icon:e.jsx(ge,{}),children:e.jsx(c,{pt:" Regras",en:" Rules"})}),e.jsx(Te,{messages:t,onSubmitMessage:n,disabled:!!s.messaged||p,players:o,user:s})]}),e.jsx("div",{className:"q-target-players q-target-players--left",children:z.map(d=>e.jsx(F,{player:o[d],side:"left"},d))}),e.jsx("div",{className:"q-target-players q-target-players--right",children:H.map(d=>e.jsx(F,{player:o[d],side:"right"},d))}),e.jsxs("div",{className:"q-target-section",children:[i?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Você não pode mais trocar seu alvo."}),en:e.jsx(e.Fragment,{children:"You can not change your target anymore."})})}),e.jsx("p",{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Aguarde enquanto o resultado é calculado."}),en:e.jsx(e.Fragment,{children:"Wait to see the outcome..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx(c,{pt:"Clique em um jogador para aportar sua arma",en:"Click on a player to aim your gun"})}),e.jsx("p",{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Você pode trocar seu alvo ",u,' vezes. Se você acha que será o alvo, use "Emboscada" para contra-atacar.']}),en:e.jsxs(e.Fragment,{children:["You may change your target ",u,' times. If you think you are the target, use "Ambush" to counterattack.']})})})]}),e.jsxs("div",{className:"q-target-cards",children:[e.jsx(V,{player:s,width:R,onClick:q,target:s.target,disabled:i||p,isAmbush:!0}),g.filter(d=>d!==s.id).map(d=>e.jsx(V,{player:o[d],width:R,target:s.target,onClick:q,disabled:i||p},d))]})]})]})}function Ie({players:o,state:s}){var i;const r=y(o,s),{step:n,goToNextStep:t}=S(0),a=ye(),p=Se(),h=o;return e.jsx(T,{phase:s==null?void 0:s.phase,allowedPhase:m.QUEM_NAO_MATA.TARGETING,children:e.jsxs(E,{step:n,players:o,children:[e.jsx(M,{icon:e.jsx(N,{}),title:e.jsx(c,{pt:"Apontem suas armas!",en:"Point your guns!"}),onClose:t,currentRound:(i=s==null?void 0:s.round)==null?void 0:i.current,type:"block",children:e.jsx(I,{children:e.jsx(c,{pt:"Tem alguém te olhando torto, heim...",en:"Is anyone looking at you funny?"})})}),e.jsx(Ne,{players:h,user:r,onSubmitTarget:a,onSubmitMessage:p,messages:s.messages??{}})]})})}function Oe({players:o,state:s}){var a;const r=y(o,s),{step:n,goToNextStep:t}=S(0);return e.jsx(T,{phase:s==null?void 0:s.phase,allowedPhase:m.QUEM_NAO_MATA.STANDOFF,children:e.jsxs(E,{step:n,players:o,children:[e.jsx(M,{icon:e.jsx(N,{}),title:e.jsx(c,{pt:"O pega pra capar!",en:"Standoff Results"}),onClose:t,currentRound:(a=s==null?void 0:s.round)==null?void 0:a.current,type:"block",children:e.jsx(I,{children:"Add text here"})}),e.jsxs("div",{children:["Add Content Here ",r.name]})]})})}function Pe({players:o,state:s}){var a;const r=y(o,s),{step:n,goToNextStep:t}=S(0);return e.jsx(T,{phase:s==null?void 0:s.phase,allowedPhase:m.QUEM_NAO_MATA.DUEL,children:e.jsxs(E,{step:n,players:o,children:[e.jsx(M,{icon:e.jsx(N,{}),title:e.jsx(c,{pt:"Duelo de Dois",en:"The Duel"}),onClose:t,currentRound:(a=s==null?void 0:s.round)==null?void 0:a.current,type:"block",children:e.jsx(I,{children:e.jsx(c,{pt:"Pega tudo? Divide irmãmente? Garante um?",en:"Take one? Share equally? Or garante one?"})})}),e.jsxs("div",{children:["Add Content Here ",r.name,"s"]})]})})}function _e({players:o,state:s}){var a;const r=y(o,s),{step:n,goToNextStep:t}=S(0);return e.jsx(T,{phase:s==null?void 0:s.phase,allowedPhase:m.QUEM_NAO_MATA.RESOLUTION,children:e.jsxs(E,{step:n,players:o,children:[e.jsx(M,{icon:e.jsx(N,{}),title:e.jsx(c,{pt:"Resultado",en:"Resultado"}),onClose:t,currentRound:(a=s==null?void 0:s.round)==null?void 0:a.current,type:"block",children:e.jsx(I,{children:"Add text here"})}),e.jsxs("div",{children:["Add Content Here ",r.name]})]})})}function Re(o){if(o&&!o.phase)return re;switch(o.phase){case m.DEFAULT.LOBBY:return ue;case m.DEFAULT.RULES:return le;case m.DEFAULT.SETUP:return ce;case m.QUEM_NAO_MATA.TARGETING:return Ie;case m.QUEM_NAO_MATA.STANDOFF:return Oe;case m.QUEM_NAO_MATA.DUEL:return Pe;case m.QUEM_NAO_MATA.RESOLUTION:return _e;case m.DEFAULT.GAME_OVER:return de;default:return ne}}function bs(){return e.jsx(ie,{gameCollection:oe.QUEM_NAO_MATA,getActiveComponent:Re})}export{bs as default};
