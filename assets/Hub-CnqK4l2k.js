import{r as l,W as nt,X as Ee,_ as It,Y as ie,Z as Q,$ as G,a0 as ur,a1 as Gt,a2 as E,a3 as at,a4 as pt,a5 as dr,a6 as fr,a7 as Pe,a8 as vr,a9 as Xt,aa as gr,ab as mr,ac as Sa,ad as hr,ae as wa,af as pr,ag as yr,ah as br,ai as Cr,aj as de,ak as xr,g as Sr,m as Ea,al as Hn,am as wr,an as Er,ao as Nr,ap as Wn,aq as kr,c as Bn,ar as Dr,as as Na,at as Kr,au as Ir,av as Or,aw as Rr,ax as zn,ay as Tr,az as ka,z as Da,x as Mr,aA as Pr,aB as _r,aC as Ka,aD as Ia,j as b,H as $t,T as rt,e as bn,v as Lr,B as Cn,aE as Ar,aF as jr,f as cn,aG as $r,aH as qt,y as Vr,aI as Oa,aJ as rn,s as Ra,aK as nn,i as Fr,aL as Hr,n as Jt,h as Ta,q as xn,aM as Wr,t as Gn,aN as Br,aO as Un,aP as Ma,w as zr,G as Pa,aQ as Gr,o as Ur,L as qr,aR as Yr,R as Xr,C as Jr}from"./index-B8BHUXQ_.js";import{D as Qr}from"./DevHeader-BSIIegEj.js";import{R as Zr,L as eo}from"./LogoutButton-CWasvibQ.js";import{R as to,G as no}from"./RulesModal-RYEmc4qy.js";import{u as ao}from"./useMutation-DzXLYbhk.js";import{L as ro}from"./Loading-DR3lKI8P.js";import{I as vn}from"./Instruction-CII4xaRG.js";import{R as qn}from"./index-DR0S1CBU.js";import{g as oo,C as io,T as Yn}from"./index-C7xcn8DR.js";import{u as lo}from"./useCopyToClipboard-CLg4f8N4.js";import{M as so,T as co}from"./DoubleRightOutlined-CwJd1ChE.js";import{D as on}from"./index-Ccfq4Gfc.js";import{C as jt}from"./index-C2KTsfJz.js";import{B as uo}from"./index-BqAXyCeq.js";import{u as fo}from"./useDevFeatures-CfjVRBoZ.js";import{L as _a,u as vo,a as go,b as mo,D as ho,m as po,S as an}from"./index-wdDDeT-9.js";import{u as Sn}from"./useMergedState-yguI3-dM.js";import{F as yo}from"./Overflow-BQNQYv6o.js";import{o as La}from"./index-BQyHClNC.js";import{_ as Aa,i as bo,g as Co,S as xo}from"./iconUtil-oGxaPdWR.js";import{g as So}from"./PurePanel-DI4SKpWZ.js";import"./WritingIcon-DHsxmkj2.js";import"./AnimatedLoaderIcon-CnxHtUgD.js";import"./useBubbleLock-Bk18_6jR.js";import"./useId-rp5ni_Cw.js";import"./useSetState-xfHlxCLt.js";import"./index-CuslI4tv.js";import"./EllipsisOutlined-CLW3BJmG.js";import"./PlusOutlined-ByZyTB3m.js";import"./useEvent-Cy6jNMGE.js";var Xn={};function wo(e,n){}function Eo(e,n,a){!n&&!Xn[a]&&(Xn[a]=!0)}function Kt(e,n){Eo(wo,e,n)}const No=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var un=function(n){var a=n.className,t=n.customizeIcon,r=n.customizeIconProps,c=n.children,u=n.onMouseDown,o=n.onClick,s=typeof t=="function"?t(r):t;return l.createElement("span",{className:a,onMouseDown:function(d){d.preventDefault(),u==null||u(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:o,"aria-hidden":!0},s!==void 0?s:l.createElement("span",{className:nt(a.split(/\s+/).map(function(i){return"".concat(i,"-icon")}))},c))},ko=function(n,a,t,r,c){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,i=Ee.useMemo(function(){if(It(r)==="object")return r.clearIcon;if(c)return c},[r,c]),d=Ee.useMemo(function(){return!!(!u&&r&&(t.length||o)&&!(s==="combobox"&&o===""))},[r,u,t.length,o,s]);return{allowClear:d,clearIcon:Ee.createElement(un,{className:"".concat(n,"-clear"),onMouseDown:a,customizeIcon:i},"×")}},ja=l.createContext(null);function $a(){return l.useContext(ja)}function Do(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=l.useState(!1),a=ie(n,2),t=a[0],r=a[1],c=l.useRef(null),u=function(){window.clearTimeout(c.current)};l.useEffect(function(){return u},[]);var o=function(i,d){u(),c.current=window.setTimeout(function(){r(i),d&&d()},e)};return[t,o,u]}function Va(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,n=l.useRef(null),a=l.useRef(null);l.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function t(r){(r||n.current===null)&&(n.current=r),window.clearTimeout(a.current),a.current=window.setTimeout(function(){n.current=null},e)}return[function(){return n.current},t]}function Ko(e,n,a,t){var r=l.useRef(null);r.current={open:n,triggerOpen:a,customizedTrigger:t},l.useEffect(function(){function c(u){var o;if(!((o=r.current)!==null&&o!==void 0&&o.customizedTrigger)){var s=u.target;s.shadowRoot&&u.composed&&(s=u.composedPath()[0]||s),r.current.open&&e().filter(function(i){return i}).every(function(i){return!i.contains(s)&&i!==s})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",c),function(){return window.removeEventListener("mousedown",c)}},[])}function Io(e){return![Q.ESC,Q.SHIFT,Q.BACKSPACE,Q.TAB,Q.WIN_KEY,Q.ALT,Q.META,Q.WIN_KEY_RIGHT,Q.CTRL,Q.SEMICOLON,Q.EQUALS,Q.CAPS_LOCK,Q.CONTEXT_MENU,Q.F1,Q.F2,Q.F3,Q.F4,Q.F5,Q.F6,Q.F7,Q.F8,Q.F9,Q.F10,Q.F11,Q.F12].includes(e)}var Oo=function(n,a){var t,r=n.prefixCls,c=n.id,u=n.inputElement,o=n.disabled,s=n.tabIndex,i=n.autoFocus,d=n.autoComplete,f=n.editable,h=n.activeDescendantId,v=n.value,p=n.maxLength,y=n.onKeyDown,g=n.onMouseDown,C=n.onChange,N=n.onPaste,x=n.onCompositionStart,S=n.onCompositionEnd,w=n.open,k=n.attrs,K=u||l.createElement("input",null),m=K,D=m.ref,M=m.props,T=M.onKeyDown,L=M.onChange,$=M.onMouseDown,I=M.onCompositionStart,P=M.onCompositionEnd,H=M.style;return"maxLength"in K.props,K=l.cloneElement(K,G(G(G({type:"search"},M),{},{id:c,ref:ur(a,D),disabled:o,tabIndex:s,autoComplete:d||"off",autoFocus:i,className:nt("".concat(r,"-selection-search-input"),(t=K)===null||t===void 0||(t=t.props)===null||t===void 0?void 0:t.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(c,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(c,"_list"),"aria-activedescendant":w?h:void 0},k),{},{value:f?v:"",maxLength:p,readOnly:!f,unselectable:f?null:"on",style:G(G({},H),{},{opacity:f?null:0}),onKeyDown:function(F){y(F),T&&T(F)},onMouseDown:function(F){g(F),$&&$(F)},onChange:function(F){C(F),L&&L(F)},onCompositionStart:function(F){x(F),I&&I(F)},onCompositionEnd:function(F){S(F),P&&P(F)},onPaste:N})),K},Fa=l.forwardRef(Oo);function Ha(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var Ro=typeof window<"u"&&window.document&&window.document.documentElement,To=Ro;function Mo(e){return e!=null}function Po(e){return!e&&e!==0}function Jn(e){return["string","number"].includes(It(e))}function Wa(e){var n=void 0;return e&&(Jn(e.title)?n=e.title.toString():Jn(e.label)&&(n=e.label.toString())),n}function _o(e,n){To?l.useLayoutEffect(e,n):l.useEffect(e,n)}function Lo(e){var n;return(n=e.key)!==null&&n!==void 0?n:e.value}var Qn=function(n){n.preventDefault(),n.stopPropagation()},Ao=function(n){var a=n.id,t=n.prefixCls,r=n.values,c=n.open,u=n.searchValue,o=n.autoClearSearchValue,s=n.inputRef,i=n.placeholder,d=n.disabled,f=n.mode,h=n.showSearch,v=n.autoFocus,p=n.autoComplete,y=n.activeDescendantId,g=n.tabIndex,C=n.removeIcon,N=n.maxTagCount,x=n.maxTagTextLength,S=n.maxTagPlaceholder,w=S===void 0?function(V){return"+ ".concat(V.length," ...")}:S,k=n.tagRender,K=n.onToggleOpen,m=n.onRemove,D=n.onInputChange,M=n.onInputPaste,T=n.onInputKeyDown,L=n.onInputMouseDown,$=n.onInputCompositionStart,I=n.onInputCompositionEnd,P=l.useRef(null),H=l.useState(0),q=ie(H,2),F=q[0],Z=q[1],X=l.useState(!1),ge=ie(X,2),Oe=ge[0],we=ge[1],me="".concat(t,"-selection"),he=c||f==="multiple"&&o===!1||f==="tags"?u:"",qe=f==="tags"||f==="multiple"&&o===!1||h&&(c||Oe);_o(function(){Z(P.current.scrollWidth)},[he]);var re=function(W,_,U,ce,ue){return l.createElement("span",{title:Wa(W),className:nt("".concat(me,"-item"),E({},"".concat(me,"-item-disabled"),U))},l.createElement("span",{className:"".concat(me,"-item-content")},_),ce&&l.createElement(un,{className:"".concat(me,"-item-remove"),onMouseDown:Qn,onClick:ue,customizeIcon:C},"×"))},Te=function(W,_,U,ce,ue,oe){var Ne=function(Me){Qn(Me),K(!c)};return l.createElement("span",{onMouseDown:Ne},k({label:_,value:W,disabled:U,closable:ce,onClose:ue,isMaxTag:!!oe}))},He=function(W){var _=W.disabled,U=W.label,ce=W.value,ue=!d&&!_,oe=U;if(typeof x=="number"&&(typeof U=="string"||typeof U=="number")){var Ne=String(oe);Ne.length>x&&(oe="".concat(Ne.slice(0,x),"..."))}var te=function(pe){pe&&pe.stopPropagation(),m(W)};return typeof k=="function"?Te(ce,oe,_,ue,te):re(W,oe,_,ue,te)},ae=function(W){var _=typeof w=="function"?w(W):w;return typeof k=="function"?Te(void 0,_,!1,!1,void 0,!0):re({title:_},_,!1)},A=l.createElement("div",{className:"".concat(me,"-search"),style:{width:F},onFocus:function(){we(!0)},onBlur:function(){we(!1)}},l.createElement(Fa,{ref:s,open:c,prefixCls:t,id:a,inputElement:null,disabled:d,autoFocus:v,autoComplete:p,editable:qe,activeDescendantId:y,value:he,onKeyDown:T,onMouseDown:L,onChange:D,onPaste:M,onCompositionStart:$,onCompositionEnd:I,tabIndex:g,attrs:Gt(n,!0)}),l.createElement("span",{ref:P,className:"".concat(me,"-search-mirror"),"aria-hidden":!0},he," ")),R=l.createElement(yo,{prefixCls:"".concat(me,"-overflow"),data:r,renderItem:He,renderRest:ae,suffix:A,itemKey:Lo,maxCount:N});return l.createElement("span",{className:"".concat(me,"-wrap")},R,!r.length&&!he&&l.createElement("span",{className:"".concat(me,"-placeholder")},i))},jo=function(n){var a=n.inputElement,t=n.prefixCls,r=n.id,c=n.inputRef,u=n.disabled,o=n.autoFocus,s=n.autoComplete,i=n.activeDescendantId,d=n.mode,f=n.open,h=n.values,v=n.placeholder,p=n.tabIndex,y=n.showSearch,g=n.searchValue,C=n.activeValue,N=n.maxLength,x=n.onInputKeyDown,S=n.onInputMouseDown,w=n.onInputChange,k=n.onInputPaste,K=n.onInputCompositionStart,m=n.onInputCompositionEnd,D=n.title,M=l.useState(!1),T=ie(M,2),L=T[0],$=T[1],I=d==="combobox",P=I||y,H=h[0],q=g||"";I&&C&&!L&&(q=C),l.useEffect(function(){I&&$(!1)},[I,C]);var F=d!=="combobox"&&!f&&!y?!1:!!q,Z=D===void 0?Wa(H):D,X=l.useMemo(function(){return H?null:l.createElement("span",{className:"".concat(t,"-selection-placeholder"),style:F?{visibility:"hidden"}:void 0},v)},[H,F,v,t]);return l.createElement("span",{className:"".concat(t,"-selection-wrap")},l.createElement("span",{className:"".concat(t,"-selection-search")},l.createElement(Fa,{ref:c,prefixCls:t,id:r,open:f,inputElement:a,disabled:u,autoFocus:o,autoComplete:s,editable:P,activeDescendantId:i,value:q,onKeyDown:x,onMouseDown:S,onChange:function(Oe){$(!0),w(Oe)},onPaste:k,onCompositionStart:K,onCompositionEnd:m,tabIndex:p,attrs:Gt(n,!0),maxLength:I?N:void 0})),!I&&H?l.createElement("span",{className:"".concat(t,"-selection-item"),title:Z,style:F?{visibility:"hidden"}:void 0},H.label):null,X)},$o=function(n,a){var t=l.useRef(null),r=l.useRef(!1),c=n.prefixCls,u=n.open,o=n.mode,s=n.showSearch,i=n.tokenWithEnter,d=n.disabled,f=n.prefix,h=n.autoClearSearchValue,v=n.onSearch,p=n.onSearchSubmit,y=n.onToggleOpen,g=n.onInputKeyDown,C=n.domRef;l.useImperativeHandle(a,function(){return{focus:function(Z){t.current.focus(Z)},blur:function(){t.current.blur()}}});var N=Va(0),x=ie(N,2),S=x[0],w=x[1],k=function(Z){var X=Z.which,ge=t.current instanceof HTMLTextAreaElement;!ge&&u&&(X===Q.UP||X===Q.DOWN)&&Z.preventDefault(),g&&g(Z),X===Q.ENTER&&o==="tags"&&!r.current&&!u&&(p==null||p(Z.target.value)),!(ge&&!u&&~[Q.UP,Q.DOWN,Q.LEFT,Q.RIGHT].indexOf(X))&&Io(X)&&y(!0)},K=function(){w(!0)},m=l.useRef(null),D=function(Z){v(Z,!0,r.current)!==!1&&y(!0)},M=function(){r.current=!0},T=function(Z){r.current=!1,o!=="combobox"&&D(Z.target.value)},L=function(Z){var X=Z.target.value;if(i&&m.current&&/[\r\n]/.test(m.current)){var ge=m.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");X=X.replace(ge,m.current)}m.current=null,D(X)},$=function(Z){var X=Z.clipboardData,ge=X==null?void 0:X.getData("text");m.current=ge||""},I=function(Z){var X=Z.target;if(X!==t.current){var ge=document.body.style.msTouchAction!==void 0;ge?setTimeout(function(){t.current.focus()}):t.current.focus()}},P=function(Z){var X=S();Z.target!==t.current&&!X&&!(o==="combobox"&&d)&&Z.preventDefault(),(o!=="combobox"&&(!s||!X)||!u)&&(u&&h!==!1&&v("",!0,!1),y())},H={inputRef:t,onInputKeyDown:k,onInputMouseDown:K,onInputChange:L,onInputPaste:$,onInputCompositionStart:M,onInputCompositionEnd:T},q=o==="multiple"||o==="tags"?l.createElement(Ao,at({},n,H)):l.createElement(jo,at({},n,H));return l.createElement("div",{ref:C,className:"".concat(c,"-selector"),onClick:I,onMouseDown:P},f&&l.createElement("div",{className:"".concat(c,"-prefix")},f),q)},Vo=l.forwardRef($o),Fo=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Ho=function(n){var a=n===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},Wo=function(n,a){var t=n.prefixCls;n.disabled;var r=n.visible,c=n.children,u=n.popupElement,o=n.animation,s=n.transitionName,i=n.dropdownStyle,d=n.dropdownClassName,f=n.direction,h=f===void 0?"ltr":f,v=n.placement,p=n.builtinPlacements,y=n.dropdownMatchSelectWidth,g=n.dropdownRender,C=n.dropdownAlign,N=n.getPopupContainer,x=n.empty,S=n.getTriggerDOMNode,w=n.onPopupVisibleChange,k=n.onPopupMouseEnter,K=pt(n,Fo),m="".concat(t,"-dropdown"),D=u;g&&(D=g(u));var M=l.useMemo(function(){return p||Ho(y)},[p,y]),T=o?"".concat(m,"-").concat(o):s,L=typeof y=="number",$=l.useMemo(function(){return L?null:y===!1?"minWidth":"width"},[y,L]),I=i;L&&(I=G(G({},I),{},{width:y}));var P=l.useRef(null);return l.useImperativeHandle(a,function(){return{getPopupElement:function(){var q;return(q=P.current)===null||q===void 0?void 0:q.popupElement}}}),l.createElement(dr,at({},K,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:v||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:m,popupTransitionName:T,popup:l.createElement("div",{onMouseEnter:k},D),ref:P,stretch:$,popupAlign:C,popupVisible:r,getPopupContainer:N,popupClassName:nt(d,E({},"".concat(m,"-empty"),x)),popupStyle:I,getTriggerDOMNode:S,onPopupVisibleChange:w}),c)},Bo=l.forwardRef(Wo);function Zn(e,n){var a=e.key,t;return"value"in e&&(t=e.value),a??(t!==void 0?t:"rc-index-key-".concat(n))}function wn(e){return typeof e<"u"&&!Number.isNaN(e)}function Ba(e,n){var a=e||{},t=a.label,r=a.value,c=a.options,u=a.groupLabel,o=t||(n?"children":"label");return{label:o,value:r||"value",options:c||"options",groupLabel:u||o}}function zo(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.fieldNames,t=n.childrenAsData,r=[],c=Ba(a,!1),u=c.label,o=c.value,s=c.options,i=c.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(v){if(h||!(s in v)){var p=v[o];r.push({key:Zn(v,r.length),groupOption:h,data:v,label:v[u],value:p})}else{var y=v[i];y===void 0&&t&&(y=v.label),r.push({key:Zn(v,r.length),group:!0,data:v,label:y}),d(v[s],!0)}})}return d(e,!1),r}function En(e){var n=G({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return Kt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),n}}),n}var Go=function(n,a,t){if(!a||!a.length)return null;var r=!1,c=function o(s,i){var d=fr(i),f=d[0],h=d.slice(1);if(!f)return[s];var v=s.split(f);return r=r||v.length>1,v.reduce(function(p,y){return[].concat(Pe(p),Pe(o(y,h)))},[]).filter(Boolean)},u=c(n,a);return r?typeof t<"u"?u.slice(0,t):u:null},Pn=l.createContext(null);function Uo(e){var n=e.visible,a=e.values;if(!n)return null;var t=50;return l.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(a.slice(0,t).map(function(r){var c=r.label,u=r.value;return["number","string"].includes(It(c))?c:u}).join(", ")),a.length>t?", ...":null)}var qo=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Yo=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Nn=function(n){return n==="tags"||n==="multiple"},za=l.forwardRef(function(e,n){var a,t=e.id,r=e.prefixCls,c=e.className,u=e.showSearch,o=e.tagRender,s=e.direction,i=e.omitDomProps,d=e.displayValues,f=e.onDisplayValuesChange,h=e.emptyOptions,v=e.notFoundContent,p=v===void 0?"Not Found":v,y=e.onClear,g=e.mode,C=e.disabled,N=e.loading,x=e.getInputElement,S=e.getRawInputElement,w=e.open,k=e.defaultOpen,K=e.onDropdownVisibleChange,m=e.activeValue,D=e.onActiveValueChange,M=e.activeDescendantId,T=e.searchValue,L=e.autoClearSearchValue,$=e.onSearch,I=e.onSearchSplit,P=e.tokenSeparators,H=e.allowClear,q=e.prefix,F=e.suffixIcon,Z=e.clearIcon,X=e.OptionList,ge=e.animation,Oe=e.transitionName,we=e.dropdownStyle,me=e.dropdownClassName,he=e.dropdownMatchSelectWidth,qe=e.dropdownRender,re=e.dropdownAlign,Te=e.placement,He=e.builtinPlacements,ae=e.getPopupContainer,A=e.showAction,R=A===void 0?[]:A,V=e.onFocus,W=e.onBlur,_=e.onKeyUp,U=e.onKeyDown,ce=e.onMouseDown,ue=pt(e,qo),oe=Nn(g),Ne=(u!==void 0?u:oe)||g==="combobox",te=G({},ue);Yo.forEach(function(Se){delete te[Se]}),i==null||i.forEach(function(Se){delete te[Se]});var Me=l.useState(!1),pe=ie(Me,2),be=pe[0],ze=pe[1];l.useEffect(function(){ze(No())},[]);var Le=l.useRef(null),De=l.useRef(null),ye=l.useRef(null),ne=l.useRef(null),B=l.useRef(null),O=l.useRef(!1),We=Do(),Be=ie(We,3),Ge=Be[0],ke=Be[1],bt=Be[2];l.useImperativeHandle(n,function(){var Se,se;return{focus:(Se=ne.current)===null||Se===void 0?void 0:Se.focus,blur:(se=ne.current)===null||se===void 0?void 0:se.blur,scrollTo:function(dt){var et;return(et=B.current)===null||et===void 0?void 0:et.scrollTo(dt)},nativeElement:Le.current||De.current}});var Ke=l.useMemo(function(){var Se;if(g!=="combobox")return T;var se=(Se=d[0])===null||Se===void 0?void 0:Se.value;return typeof se=="string"||typeof se=="number"?String(se):""},[T,g,d]),Ye=g==="combobox"&&typeof x=="function"&&x()||null,ee=typeof S=="function"&&S(),fe=vr(De,ee==null||(a=ee.props)===null||a===void 0?void 0:a.ref),Ve=l.useState(!1),Ie=ie(Ve,2),Fe=Ie[0],Qe=Ie[1];Xt(function(){Qe(!0)},[]);var Xe=Sn(!1,{defaultValue:k,value:w}),st=ie(Xe,2),tt=st[0],ct=st[1],Ue=Fe?tt:!1,Ht=!p&&h;(C||Ht&&Ue&&g==="combobox")&&(Ue=!1);var wt=Ht?!1:Ue,j=l.useCallback(function(Se){var se=Se!==void 0?Se:!Ue;C||(ct(se),Ue!==se&&(K==null||K(se)))},[C,Ue,ct,K]),J=l.useMemo(function(){return(P||[]).some(function(Se){return[`
`,`\r
`].includes(Se)})},[P]),z=l.useContext(Pn)||{},Y=z.maxCount,Ce=z.rawValues,Re=function(se,ut,dt){if(!(oe&&wn(Y)&&(Ce==null?void 0:Ce.size)>=Y)){var et=!0,ot=se;D==null||D(null);var kt=Go(se,P,wn(Y)?Y-Ce.size:void 0),St=dt?null:kt;return g!=="combobox"&&St&&(ot="",I==null||I(St),j(!1),et=!1),$&&Ke!==ot&&$(ot,{source:ut?"typing":"effect"}),et}},gt=function(se){!se||!se.trim()||$(se,{source:"submit"})};l.useEffect(function(){!Ue&&!oe&&g!=="combobox"&&Re("",!1,!1)},[Ue]),l.useEffect(function(){tt&&C&&ct(!1),C&&!O.current&&ke(!1)},[C]);var it=Va(),mt=ie(it,2),Ze=mt[0],Ct=mt[1],Mt=l.useRef(!1),Ut=function(se){var ut=Ze(),dt=se.key,et=dt==="Enter";if(et&&(g!=="combobox"&&se.preventDefault(),Ue||j(!0)),Ct(!!Ke),dt==="Backspace"&&!ut&&oe&&!Ke&&d.length){for(var ot=Pe(d),kt=null,St=ot.length-1;St>=0;St-=1){var Lt=ot[St];if(!Lt.disabled){ot.splice(St,1),kt=Lt;break}}kt&&f(ot,{type:"remove",values:[kt]})}for(var Wt=arguments.length,At=new Array(Wt>1?Wt-1:0),en=1;en<Wt;en++)At[en-1]=arguments[en];if(Ue&&(!et||!Mt.current)){var tn;(tn=B.current)===null||tn===void 0||tn.onKeyDown.apply(tn,[se].concat(At))}et&&(Mt.current=!0),U==null||U.apply(void 0,[se].concat(At))},xe=function(se){for(var ut=arguments.length,dt=new Array(ut>1?ut-1:0),et=1;et<ut;et++)dt[et-1]=arguments[et];if(Ue){var ot;(ot=B.current)===null||ot===void 0||ot.onKeyUp.apply(ot,[se].concat(dt))}se.key==="Enter"&&(Mt.current=!1),_==null||_.apply(void 0,[se].concat(dt))},ve=function(se){var ut=d.filter(function(dt){return dt!==se});f(ut,{type:"remove",values:[se]})},le=l.useRef(!1),_e=function(){ke(!0),C||(V&&!le.current&&V.apply(void 0,arguments),R.includes("focus")&&j(!0)),le.current=!0},vt=function(){O.current=!0,ke(!1,function(){le.current=!1,O.current=!1,j(!1)}),!C&&(Ke&&(g==="tags"?$(Ke,{source:"submit"}):g==="multiple"&&$("",{source:"blur"})),W&&W.apply(void 0,arguments))},Ae=[];l.useEffect(function(){return function(){Ae.forEach(function(Se){return clearTimeout(Se)}),Ae.splice(0,Ae.length)}},[]);var je=function(se){var ut,dt=se.target,et=(ut=ye.current)===null||ut===void 0?void 0:ut.getPopupElement();if(et&&et.contains(dt)){var ot=setTimeout(function(){var Wt=Ae.indexOf(ot);if(Wt!==-1&&Ae.splice(Wt,1),bt(),!be&&!et.contains(document.activeElement)){var At;(At=ne.current)===null||At===void 0||At.focus()}});Ae.push(ot)}for(var kt=arguments.length,St=new Array(kt>1?kt-1:0),Lt=1;Lt<kt;Lt++)St[Lt-1]=arguments[Lt];ce==null||ce.apply(void 0,[se].concat(St))},$e=l.useState({}),lt=ie($e,2),xt=lt[1];function Pt(){xt({})}var Ot;ee&&(Ot=function(se){j(se)}),Ko(function(){var Se;return[Le.current,(Se=ye.current)===null||Se===void 0?void 0:Se.getPopupElement()]},wt,j,!!ee);var Et=l.useMemo(function(){return G(G({},e),{},{notFoundContent:p,open:Ue,triggerOpen:wt,id:t,showSearch:Ne,multiple:oe,toggleOpen:j})},[e,p,wt,Ue,t,Ne,oe,j]),Nt=!!F||N,_t;Nt&&(_t=l.createElement(un,{className:nt("".concat(r,"-arrow"),E({},"".concat(r,"-arrow-loading"),N)),customizeIcon:F,customizeIconProps:{loading:N,searchValue:Ke,open:Ue,focused:Ge,showSearch:Ne}}));var ht=function(){var se;y==null||y(),(se=ne.current)===null||se===void 0||se.focus(),f([],{type:"clear",values:d}),Re("",!1,!1)},yt=ko(r,ht,d,H,Z,C,Ke,g),ir=yt.allowClear,lr=yt.clearIcon,sr=l.createElement(X,{ref:B}),cr=nt(r,c,E(E(E(E(E(E(E(E(E(E({},"".concat(r,"-focused"),Ge),"".concat(r,"-multiple"),oe),"".concat(r,"-single"),!oe),"".concat(r,"-allow-clear"),H),"".concat(r,"-show-arrow"),Nt),"".concat(r,"-disabled"),C),"".concat(r,"-loading"),N),"".concat(r,"-open"),Ue),"".concat(r,"-customize-input"),Ye),"".concat(r,"-show-search"),Ne)),Fn=l.createElement(Bo,{ref:ye,disabled:C,prefixCls:r,visible:wt,popupElement:sr,animation:ge,transitionName:Oe,dropdownStyle:we,dropdownClassName:me,direction:s,dropdownMatchSelectWidth:he,dropdownRender:qe,dropdownAlign:re,placement:Te,builtinPlacements:He,getPopupContainer:ae,empty:h,getTriggerDOMNode:function(se){return De.current||se},onPopupVisibleChange:Ot,onPopupMouseEnter:Pt},ee?l.cloneElement(ee,{ref:fe}):l.createElement(Vo,at({},e,{domRef:De,prefixCls:r,inputElement:Ye,ref:ne,id:t,prefix:q,showSearch:Ne,autoClearSearchValue:L,mode:g,activeDescendantId:M,tagRender:o,values:d,open:Ue,onToggleOpen:j,activeValue:m,searchValue:Ke,onSearch:Re,onSearchSubmit:gt,onRemove:ve,tokenWithEnter:J}))),fn;return ee?fn=Fn:fn=l.createElement("div",at({className:cr},te,{ref:Le,onMouseDown:je,onKeyDown:Ut,onKeyUp:xe,onFocus:_e,onBlur:vt}),l.createElement(Uo,{visible:Ge&&!Ue,values:d}),Fn,_t,ir&&lr),l.createElement(ja.Provider,{value:Et},fn)}),Ga=function(){return null};Ga.isSelectOptGroup=!0;var Ua=function(){return null};Ua.isSelectOption=!0;function Xo(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Jo=["disabled","title","children","style","className"];function ea(e){return typeof e=="string"||typeof e=="number"}var Qo=function(n,a){var t=$a(),r=t.prefixCls,c=t.id,u=t.open,o=t.multiple,s=t.mode,i=t.searchValue,d=t.toggleOpen,f=t.notFoundContent,h=t.onPopupScroll,v=l.useContext(Pn),p=v.maxCount,y=v.flattenOptions,g=v.onActiveValue,C=v.defaultActiveFirstOption,N=v.onSelect,x=v.menuItemSelectedIcon,S=v.rawValues,w=v.fieldNames,k=v.virtual,K=v.direction,m=v.listHeight,D=v.listItemHeight,M=v.optionRender,T="".concat(r,"-item"),L=gr(function(){return y},[u,y],function(A,R){return R[0]&&A[1]!==R[1]}),$=l.useRef(null),I=l.useMemo(function(){return o&&wn(p)&&(S==null?void 0:S.size)>=p},[o,p,S==null?void 0:S.size]),P=function(R){R.preventDefault()},H=function(R){var V;(V=$.current)===null||V===void 0||V.scrollTo(typeof R=="number"?{index:R}:R)},q=function(R){for(var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=L.length,_=0;_<W;_+=1){var U=(R+_*V+W)%W,ce=L[U]||{},ue=ce.group,oe=ce.data;if(!ue&&!(oe!=null&&oe.disabled)&&!I)return U}return-1},F=l.useState(function(){return q(0)}),Z=ie(F,2),X=Z[0],ge=Z[1],Oe=function(R){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ge(R);var W={source:V?"keyboard":"mouse"},_=L[R];if(!_){g(null,-1,W);return}g(_.value,R,W)};l.useEffect(function(){Oe(C!==!1?q(0):-1)},[L.length,i]);var we=l.useCallback(function(A){return s==="combobox"?!1:S.has(A)},[s,Pe(S).toString(),S.size]),me=l.useCallback(function(A){return s==="combobox"?String(A).toLowerCase()===i.toLowerCase():S.has(A)},[s,i,Pe(S).toString(),S.size]);l.useEffect(function(){var A=setTimeout(function(){if(!o&&u&&S.size===1){var V=Array.from(S)[0],W=L.findIndex(function(_){var U=_.data;return U.value===V});W!==-1&&(Oe(W),H(W))}});if(u){var R;(R=$.current)===null||R===void 0||R.scrollTo(void 0)}return function(){return clearTimeout(A)}},[u,i]);var he=function(R){R!==void 0&&N(R,{selected:!S.has(R)}),o||d(!1)};if(l.useImperativeHandle(a,function(){return{onKeyDown:function(R){var V=R.which,W=R.ctrlKey;switch(V){case Q.N:case Q.P:case Q.UP:case Q.DOWN:{var _=0;if(V===Q.UP?_=-1:V===Q.DOWN?_=1:Xo()&&W&&(V===Q.N?_=1:V===Q.P&&(_=-1)),_!==0){var U=q(X+_,_);H(U),Oe(U,!0)}break}case Q.TAB:case Q.ENTER:{var ce,ue=L[X];ue&&!(ue!=null&&(ce=ue.data)!==null&&ce!==void 0&&ce.disabled)&&!I?he(ue.value):he(void 0),u&&R.preventDefault();break}case Q.ESC:d(!1),u&&R.stopPropagation()}},onKeyUp:function(){},scrollTo:function(R){H(R)}}}),L.length===0)return l.createElement("div",{role:"listbox",id:"".concat(c,"_list"),className:"".concat(T,"-empty"),onMouseDown:P},f);var qe=Object.keys(w).map(function(A){return w[A]}),re=function(R){return R.label};function Te(A,R){var V=A.group;return{role:V?"presentation":"option",id:"".concat(c,"_list_").concat(R)}}var He=function(R){var V=L[R];if(!V)return null;var W=V.data||{},_=W.value,U=V.group,ce=Gt(W,!0),ue=re(V);return V?l.createElement("div",at({"aria-label":typeof ue=="string"&&!U?ue:null},ce,{key:R},Te(V,R),{"aria-selected":me(_)}),_):null},ae={role:"listbox",id:"".concat(c,"_list")};return l.createElement(l.Fragment,null,k&&l.createElement("div",at({},ae,{style:{height:0,width:0,overflow:"hidden"}}),He(X-1),He(X),He(X+1)),l.createElement(_a,{itemKey:"key",ref:$,data:L,height:m,itemHeight:D,fullHeight:!1,onMouseDown:P,onScroll:h,virtual:k,direction:K,innerProps:k?null:ae},function(A,R){var V=A.group,W=A.groupOption,_=A.data,U=A.label,ce=A.value,ue=_.key;if(V){var oe,Ne=(oe=_.title)!==null&&oe!==void 0?oe:ea(U)?U.toString():void 0;return l.createElement("div",{className:nt(T,"".concat(T,"-group"),_.className),title:Ne},U!==void 0?U:ue)}var te=_.disabled,Me=_.title;_.children;var pe=_.style,be=_.className,ze=pt(_,Jo),Le=La(ze,qe),De=we(ce),ye=te||!De&&I,ne="".concat(T,"-option"),B=nt(T,ne,be,E(E(E(E({},"".concat(ne,"-grouped"),W),"".concat(ne,"-active"),X===R&&!ye),"".concat(ne,"-disabled"),ye),"".concat(ne,"-selected"),De)),O=re(A),We=!x||typeof x=="function"||De,Be=typeof O=="number"?O:O||ce,Ge=ea(Be)?Be.toString():void 0;return Me!==void 0&&(Ge=Me),l.createElement("div",at({},Gt(Le),k?{}:Te(A,R),{"aria-selected":me(ce),className:B,title:Ge,onMouseMove:function(){X===R||ye||Oe(R)},onClick:function(){ye||he(ce)},style:pe}),l.createElement("div",{className:"".concat(ne,"-content")},typeof M=="function"?M(A,{index:R}):Be),l.isValidElement(x)||De,We&&l.createElement(un,{className:"".concat(T,"-option-state"),customizeIcon:x,customizeIconProps:{value:ce,disabled:ye,isSelected:De}},De?"✓":null))}))},Zo=l.forwardRef(Qo);const ei=function(e,n){var a=l.useRef({values:new Map,options:new Map}),t=l.useMemo(function(){var c=a.current,u=c.values,o=c.options,s=e.map(function(f){if(f.label===void 0){var h;return G(G({},f),{},{label:(h=u.get(f.value))===null||h===void 0?void 0:h.label})}return f}),i=new Map,d=new Map;return s.forEach(function(f){i.set(f.value,f),d.set(f.value,n.get(f.value)||o.get(f.value))}),a.current.values=i,a.current.options=d,s},[e,n]),r=l.useCallback(function(c){return n.get(c)||a.current.options.get(c)},[n]);return[t,r]};function gn(e,n){return Ha(e).join("").toUpperCase().includes(n)}const ti=function(e,n,a,t,r){return l.useMemo(function(){if(!a||t===!1)return e;var c=n.options,u=n.label,o=n.value,s=[],i=typeof t=="function",d=a.toUpperCase(),f=i?t:function(v,p){return r?gn(p[r],d):p[c]?gn(p[u!=="children"?u:"label"],d):gn(p[o],d)},h=i?function(v){return En(v)}:function(v){return v};return e.forEach(function(v){if(v[c]){var p=f(a,h(v));if(p)s.push(v);else{var y=v[c].filter(function(g){return f(a,h(g))});y.length&&s.push(G(G({},v),{},E({},c,y)))}return}f(a,h(v))&&s.push(v)}),s},[e,t,r,a,n])};var ta=0,ni=mr();function ai(){var e;return ni?(e=ta,ta+=1):e="TEST_OR_SSR",e}function qa(e){var n=l.useState(),a=ie(n,2),t=a[0],r=a[1];return l.useEffect(function(){r("rc_select_".concat(ai()))},[]),e||t}var ri=["children","value"],oi=["children"];function ii(e){var n=e,a=n.key,t=n.props,r=t.children,c=t.value,u=pt(t,ri);return G({key:a,value:c!==void 0?c:a,children:r},u)}function Ya(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Sa(e).map(function(a,t){if(!l.isValidElement(a)||!a.type)return null;var r=a,c=r.type.isSelectOptGroup,u=r.key,o=r.props,s=o.children,i=pt(o,oi);return n||!c?ii(a):G(G({key:"__RC_SELECT_GRP__".concat(u===null?t:u,"__"),label:u},i),{},{options:Ya(s)})}).filter(function(a){return a})}var li=function(n,a,t,r,c){return l.useMemo(function(){var u=n,o=!n;o&&(u=Ya(a));var s=new Map,i=new Map,d=function(v,p,y){y&&typeof y=="string"&&v.set(p[y],p)},f=function h(v){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<v.length;y+=1){var g=v[y];!g[t.options]||p?(s.set(g[t.value],g),d(i,g,t.label),d(i,g,r),d(i,g,c)):h(g[t.options],!0)}};return f(u),{options:u,valueOptions:s,labelOptions:i}},[n,a,t,r,c])};function na(e){var n=l.useRef();n.current=e;var a=l.useCallback(function(){return n.current.apply(n,arguments)},[]);return a}var si=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],ci=["inputValue"];function ui(e){return!e||It(e)!=="object"}var di=l.forwardRef(function(e,n){var a=e.id,t=e.mode,r=e.prefixCls,c=r===void 0?"rc-select":r,u=e.backfill,o=e.fieldNames,s=e.inputValue,i=e.searchValue,d=e.onSearch,f=e.autoClearSearchValue,h=f===void 0?!0:f,v=e.onSelect,p=e.onDeselect,y=e.dropdownMatchSelectWidth,g=y===void 0?!0:y,C=e.filterOption,N=e.filterSort,x=e.optionFilterProp,S=e.optionLabelProp,w=e.options,k=e.optionRender,K=e.children,m=e.defaultActiveFirstOption,D=e.menuItemSelectedIcon,M=e.virtual,T=e.direction,L=e.listHeight,$=L===void 0?200:L,I=e.listItemHeight,P=I===void 0?20:I,H=e.labelRender,q=e.value,F=e.defaultValue,Z=e.labelInValue,X=e.onChange,ge=e.maxCount,Oe=pt(e,si),we=qa(a),me=Nn(t),he=!!(!w&&K),qe=l.useMemo(function(){return C===void 0&&t==="combobox"?!1:C},[C,t]),re=l.useMemo(function(){return Ba(o,he)},[JSON.stringify(o),he]),Te=Sn("",{value:i!==void 0?i:s,postState:function(J){return J||""}}),He=ie(Te,2),ae=He[0],A=He[1],R=li(w,K,re,x,S),V=R.valueOptions,W=R.labelOptions,_=R.options,U=l.useCallback(function(j){var J=Ha(j);return J.map(function(z){var Y,Ce,Re,gt,it;if(ui(z))Y=z;else{var mt;Re=z.key,Ce=z.label,Y=(mt=z.value)!==null&&mt!==void 0?mt:Re}var Ze=V.get(Y);if(Ze){var Ct;Ce===void 0&&(Ce=Ze==null?void 0:Ze[S||re.label]),Re===void 0&&(Re=(Ct=Ze==null?void 0:Ze.key)!==null&&Ct!==void 0?Ct:Y),gt=Ze==null?void 0:Ze.disabled,it=Ze==null?void 0:Ze.title}return{label:Ce,value:Y,key:Re,disabled:gt,title:it}})},[re,S,V]),ce=Sn(F,{value:q}),ue=ie(ce,2),oe=ue[0],Ne=ue[1],te=l.useMemo(function(){var j,J=me&&oe===null?[]:oe,z=U(J);return t==="combobox"&&Po((j=z[0])===null||j===void 0?void 0:j.value)?[]:z},[oe,U,t,me]),Me=ei(te,V),pe=ie(Me,2),be=pe[0],ze=pe[1],Le=l.useMemo(function(){if(!t&&be.length===1){var j=be[0];if(j.value===null&&(j.label===null||j.label===void 0))return[]}return be.map(function(J){var z;return G(G({},J),{},{label:(z=typeof H=="function"?H(J):J.label)!==null&&z!==void 0?z:J.value})})},[t,be,H]),De=l.useMemo(function(){return new Set(be.map(function(j){return j.value}))},[be]);l.useEffect(function(){if(t==="combobox"){var j,J=(j=be[0])===null||j===void 0?void 0:j.value;A(Mo(J)?String(J):"")}},[be]);var ye=na(function(j,J){var z=J??j;return E(E({},re.value,j),re.label,z)}),ne=l.useMemo(function(){if(t!=="tags")return _;var j=Pe(_),J=function(Y){return V.has(Y)};return Pe(be).sort(function(z,Y){return z.value<Y.value?-1:1}).forEach(function(z){var Y=z.value;J(Y)||j.push(ye(Y,z.label))}),j},[ye,_,V,be,t]),B=ti(ne,re,ae,qe,x),O=l.useMemo(function(){return t!=="tags"||!ae||B.some(function(j){return j[x||"value"]===ae})||B.some(function(j){return j[re.value]===ae})?B:[ye(ae)].concat(Pe(B))},[ye,x,t,B,ae,re]),We=function j(J){var z=Pe(J).sort(function(Y,Ce){return N(Y,Ce,{searchValue:ae})});return z.map(function(Y){return Array.isArray(Y.options)?G(G({},Y),{},{options:Y.options.length>0?j(Y.options):Y.options}):Y})},Be=l.useMemo(function(){return N?We(O):O},[O,N,ae]),Ge=l.useMemo(function(){return zo(Be,{fieldNames:re,childrenAsData:he})},[Be,re,he]),ke=function(J){var z=U(J);if(Ne(z),X&&(z.length!==be.length||z.some(function(Re,gt){var it;return((it=be[gt])===null||it===void 0?void 0:it.value)!==(Re==null?void 0:Re.value)}))){var Y=Z?z:z.map(function(Re){return Re.value}),Ce=z.map(function(Re){return En(ze(Re.value))});X(me?Y:Y[0],me?Ce:Ce[0])}},bt=l.useState(null),Ke=ie(bt,2),Ye=Ke[0],ee=Ke[1],fe=l.useState(0),Ve=ie(fe,2),Ie=Ve[0],Fe=Ve[1],Qe=m!==void 0?m:t!=="combobox",Xe=l.useCallback(function(j,J){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Y=z.source,Ce=Y===void 0?"keyboard":Y;Fe(J),u&&t==="combobox"&&j!==null&&Ce==="keyboard"&&ee(String(j))},[u,t]),st=function(J,z,Y){var Ce=function(){var ve,le=ze(J);return[Z?{label:le==null?void 0:le[re.label],value:J,key:(ve=le==null?void 0:le.key)!==null&&ve!==void 0?ve:J}:J,En(le)]};if(z&&v){var Re=Ce(),gt=ie(Re,2),it=gt[0],mt=gt[1];v(it,mt)}else if(!z&&p&&Y!=="clear"){var Ze=Ce(),Ct=ie(Ze,2),Mt=Ct[0],Ut=Ct[1];p(Mt,Ut)}},tt=na(function(j,J){var z,Y=me?J.selected:!0;Y?z=me?[].concat(Pe(be),[j]):[j]:z=be.filter(function(Ce){return Ce.value!==j}),ke(z),st(j,Y),t==="combobox"?ee(""):(!Nn||h)&&(A(""),ee(""))}),ct=function(J,z){ke(J);var Y=z.type,Ce=z.values;(Y==="remove"||Y==="clear")&&Ce.forEach(function(Re){st(Re.value,!1,Y)})},Ue=function(J,z){if(A(J),ee(null),z.source==="submit"){var Y=(J||"").trim();if(Y){var Ce=Array.from(new Set([].concat(Pe(De),[Y])));ke(Ce),st(Y,!0),A("")}return}z.source!=="blur"&&(t==="combobox"&&ke(J),d==null||d(J))},Ht=function(J){var z=J;t!=="tags"&&(z=J.map(function(Ce){var Re=W.get(Ce);return Re==null?void 0:Re.value}).filter(function(Ce){return Ce!==void 0}));var Y=Array.from(new Set([].concat(Pe(De),Pe(z))));ke(Y),Y.forEach(function(Ce){st(Ce,!0)})},wt=l.useMemo(function(){var j=M!==!1&&g!==!1;return G(G({},R),{},{flattenOptions:Ge,onActiveValue:Xe,defaultActiveFirstOption:Qe,onSelect:tt,menuItemSelectedIcon:D,rawValues:De,fieldNames:re,virtual:j,direction:T,listHeight:$,listItemHeight:P,childrenAsData:he,maxCount:ge,optionRender:k})},[ge,R,Ge,Xe,Qe,tt,D,De,re,M,g,T,$,P,he,k]);return l.createElement(Pn.Provider,{value:wt},l.createElement(za,at({},Oe,{id:we,prefixCls:c,ref:n,omitDomProps:ci,mode:t,displayValues:Le,onDisplayValuesChange:ct,direction:T,searchValue:ae,onSearch:Ue,autoClearSearchValue:h,onSearchSplit:Ht,dropdownMatchSelectWidth:g,OptionList:Zo,emptyOptions:!Ge.length,activeValue:Ye,activeDescendantId:"".concat(we,"_list_").concat(Ie)})))}),Xa=di;Xa.Option=Ua;Xa.OptGroup=Ga;function ft(e,n){return e[n]}var fi=["children"];function Ja(e,n){return"".concat(e,"-").concat(n)}function vi(e){return e&&e.type&&e.type.isTreeNode}function Qt(e,n){return e??n}function ln(e){var n=e||{},a=n.title,t=n._title,r=n.key,c=n.children,u=a||"title";return{title:u,_title:t||[u],key:r||"key",children:c||"children"}}function gi(e){function n(a){var t=Sa(a);return t.map(function(r){if(!vi(r))return Kt(!r,"Tree/TreeNode can only accept TreeNode as children."),null;var c=r.key,u=r.props,o=u.children,s=pt(u,fi),i=G({key:c},s),d=n(o);return d.length&&(i.children=d),i}).filter(function(r){return r})}return n(e)}function mn(e,n,a){var t=ln(a),r=t._title,c=t.key,u=t.children,o=new Set(n===!0?[]:n),s=[];function i(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return d.map(function(h,v){for(var p=Ja(f?f.pos:"0",v),y=Qt(h[c],p),g,C=0;C<r.length;C+=1){var N=r[C];if(h[N]!==void 0){g=h[N];break}}var x=Object.assign(La(h,[].concat(Pe(r),[c,u])),{title:g,key:y,parent:f,pos:p,children:null,data:h,isStart:[].concat(Pe(f?f.isStart:[]),[v===0]),isEnd:[].concat(Pe(f?f.isEnd:[]),[v===d.length-1])});return s.push(x),n===!0||o.has(y)?x.children=i(h[u]||[],x):x.children=[],x})}return i(e),s}function mi(e,n,a){var t={};It(a)==="object"?t=a:t={externalGetKey:a},t=t||{};var r=t,c=r.childrenPropName,u=r.externalGetKey,o=r.fieldNames,s=ln(o),i=s.key,d=s.children,f=c||d,h;u?typeof u=="string"?h=function(y){return y[u]}:typeof u=="function"&&(h=function(y){return u(y)}):h=function(y,g){return Qt(y[i],g)};function v(p,y,g,C){var N=p?p[f]:e,x=p?Ja(g.pos,y):"0",S=p?[].concat(Pe(C),[p]):[];if(p){var w=h(p,x),k={node:p,index:y,pos:x,key:w,parentPos:g.node?g.pos:null,level:g.level+1,nodes:S};n(k)}N&&N.forEach(function(K,m){v(K,m,{node:p,pos:x,level:g?g.level+1:-1},S)})}v(null)}function Qa(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.initWrapper,t=n.processEntity,r=n.onProcessFinished,c=n.externalGetKey,u=n.childrenPropName,o=n.fieldNames,s=arguments.length>2?arguments[2]:void 0,i=c||s,d={},f={},h={posEntities:d,keyEntities:f};return a&&(h=a(h)||h),mi(e,function(v){var p=v.node,y=v.index,g=v.pos,C=v.key,N=v.parentPos,x=v.level,S=v.nodes,w={node:p,nodes:S,index:y,key:C,pos:g,level:x},k=Qt(C,g);d[g]=w,f[k]=w,w.parent=d[N],w.parent&&(w.parent.children=w.parent.children||[],w.parent.children.push(w)),t&&t(w,h)},{externalGetKey:i,childrenPropName:u,fieldNames:o}),r&&r(h),h}function Yt(e,n){var a=n.expandedKeys,t=n.selectedKeys,r=n.loadedKeys,c=n.loadingKeys,u=n.checkedKeys,o=n.halfCheckedKeys,s=n.dragOverNodeKey,i=n.dropPosition,d=n.keyEntities,f=ft(d,e),h={eventKey:e,expanded:a.indexOf(e)!==-1,selected:t.indexOf(e)!==-1,loaded:r.indexOf(e)!==-1,loading:c.indexOf(e)!==-1,checked:u.indexOf(e)!==-1,halfChecked:o.indexOf(e)!==-1,pos:String(f?f.pos:""),dragOver:s===e&&i===0,dragOverGapTop:s===e&&i===-1,dragOverGapBottom:s===e&&i===1};return h}function Je(e){var n=e.data,a=e.expanded,t=e.selected,r=e.checked,c=e.loaded,u=e.loading,o=e.halfChecked,s=e.dragOver,i=e.dragOverGapTop,d=e.dragOverGapBottom,f=e.pos,h=e.active,v=e.eventKey,p=G(G({},n),{},{expanded:a,selected:t,checked:r,loaded:c,loading:u,halfChecked:o,dragOver:s,dragOverGapTop:i,dragOverGapBottom:d,pos:f,active:h,key:v});return"props"in p||Object.defineProperty(p,"props",{get:function(){return Kt(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),p}function Za(e,n){var a=new Set;return e.forEach(function(t){n.has(t)||a.add(t)}),a}function hi(e){var n=e||{},a=n.disabled,t=n.disableCheckbox,r=n.checkable;return!!(a||t)||r===!1}function pi(e,n,a,t){for(var r=new Set(e),c=new Set,u=0;u<=a;u+=1){var o=n.get(u)||new Set;o.forEach(function(f){var h=f.key,v=f.node,p=f.children,y=p===void 0?[]:p;r.has(h)&&!t(v)&&y.filter(function(g){return!t(g.node)}).forEach(function(g){r.add(g.key)})})}for(var s=new Set,i=a;i>=0;i-=1){var d=n.get(i)||new Set;d.forEach(function(f){var h=f.parent,v=f.node;if(!(t(v)||!f.parent||s.has(f.parent.key))){if(t(f.parent.node)){s.add(h.key);return}var p=!0,y=!1;(h.children||[]).filter(function(g){return!t(g.node)}).forEach(function(g){var C=g.key,N=r.has(C);p&&!N&&(p=!1),!y&&(N||c.has(C))&&(y=!0)}),p&&r.add(h.key),y&&c.add(h.key),s.add(h.key)}})}return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(Za(c,r))}}function yi(e,n,a,t,r){for(var c=new Set(e),u=new Set(n),o=0;o<=t;o+=1){var s=a.get(o)||new Set;s.forEach(function(h){var v=h.key,p=h.node,y=h.children,g=y===void 0?[]:y;!c.has(v)&&!u.has(v)&&!r(p)&&g.filter(function(C){return!r(C.node)}).forEach(function(C){c.delete(C.key)})})}u=new Set;for(var i=new Set,d=t;d>=0;d-=1){var f=a.get(d)||new Set;f.forEach(function(h){var v=h.parent,p=h.node;if(!(r(p)||!h.parent||i.has(h.parent.key))){if(r(h.parent.node)){i.add(v.key);return}var y=!0,g=!1;(v.children||[]).filter(function(C){return!r(C.node)}).forEach(function(C){var N=C.key,x=c.has(N);y&&!x&&(y=!1),!g&&(x||u.has(N))&&(g=!0)}),y||c.delete(v.key),g&&u.add(v.key),i.add(v.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(Za(u,c))}}function zt(e,n,a,t){var r=[],c;c=hi;var u=new Set(e.filter(function(d){var f=!!ft(a,d);return f||r.push(d),f})),o=new Map,s=0;Object.keys(a).forEach(function(d){var f=a[d],h=f.level,v=o.get(h);v||(v=new Set,o.set(h,v)),v.add(f),s=Math.max(s,h)}),Kt(!r.length,"Tree missing follow keys: ".concat(r.slice(0,100).map(function(d){return"'".concat(d,"'")}).join(", ")));var i;return n===!0?i=pi(u,o,s,c):i=yi(u,n.halfCheckedKeys,o,s,c),i}function bi(e,n){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=hr(e))||n){a&&(e=a);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(i){throw i},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,u=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var i=a.next();return u=i.done,i},e:function(i){o=!0,c=i},f:function(){try{u||a.return==null||a.return()}finally{if(o)throw c}}}}var Ci={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v224h704V96c0-17.7-14.3-32-32-32zM288 232c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zM160 928c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V704H160v224zm128-136c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM160 640h704V384H160v256zm128-168c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"}}]},name:"database",theme:"filled"},xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function kn(e){var n=l.useRef();n.current=e;var a=l.useCallback(function(){for(var t,r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(t=n.current)===null||t===void 0?void 0:t.call.apply(t,[n].concat(c))},[]);return a}function Si(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var aa=Si()?l.useLayoutEffect:l.useEffect,wi=function(n,a){var t=l.useRef(!0);aa(function(){return n(t.current)},a),aa(function(){return t.current=!1,function(){t.current=!0}},[])},ra=function(n,a){wi(function(t){if(!t)return n()},a)};function oa(e){var n=l.useRef(!1),a=l.useState(e),t=ie(a,2),r=t[0],c=t[1];l.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]);function u(o,s){s&&n.current||c(o)}return[r,u]}function hn(e){return e!==void 0}function ia(e,n){var a=n||{},t=a.defaultValue,r=a.value,c=a.onChange,u=a.postState,o=oa(function(){return hn(r)?r:hn(t)?typeof t=="function"?t():t:typeof e=="function"?e():e}),s=ie(o,2),i=s[0],d=s[1],f=r!==void 0?r:i,h=u?u(f):f,v=kn(c),p=oa([f]),y=ie(p,2),g=y[0],C=y[1];ra(function(){var x=g[0];i!==x&&v(i,x)},[g]),ra(function(){hn(r)||d(r)},[r]);var N=kn(function(x,S){d(x,S),C([f],S)});return[h,N]}var Dn={},Ei=function(n){};function Ni(e,n){}function ki(e,n){}function Di(){Dn={}}function er(e,n,a){!n&&!Dn[a]&&(e(!1,a),Dn[a]=!0)}function Vt(e,n){er(Ni,e,n)}function Ki(e,n){er(ki,e,n)}Vt.preMessage=Ei;Vt.resetWarned=Di;Vt.noteOnce=Ki;const Ii=function(e){var n=l.useRef({valueLabels:new Map});return l.useMemo(function(){var a=n.current.valueLabels,t=new Map,r=e.map(function(c){var u=c.value,o=c.label,s=o??a.get(u);return t.set(u,s),G(G({},c),{},{label:s})});return n.current.valueLabels=t,[r]},[e])};var Oi=function(n,a,t,r){return l.useMemo(function(){var c=function(v){return v.map(function(p){var y=p.value;return y})},u=c(n),o=c(a),s=u.filter(function(h){return!r[h]}),i=u,d=o;if(t){var f=zt(u,!0,r);i=f.checkedKeys,d=f.halfCheckedKeys}return[Array.from(new Set([].concat(Pe(s),Pe(i)))),d]},[n,a,t,r])},Ri=function(n){return Array.isArray(n)?n:n!==void 0?[n]:[]},Ti=function(n){var a=n||{},t=a.label,r=a.value,c=a.children;return{_title:t?[t]:["title","label"],value:r||"value",key:r||"value",children:c||"children"}},Kn=function(n){return!n||n.disabled||n.disableCheckbox||n.checkable===!1},Mi=function(n,a){var t=[],r=function c(u){u.forEach(function(o){var s=o[a.children];s&&(t.push(o[a.value]),c(s))})};return r(n),t},la=function(n){return n==null};const Pi=function(e,n){return l.useMemo(function(){var a=Qa(e,{fieldNames:n,initWrapper:function(r){return G(G({},r),{},{valueEntities:new Map})},processEntity:function(r,c){var u=r.node[n.value];c.valueEntities.set(u,r)}});return a},[e,n])};function In(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[];return Ee.Children.forEach(e,function(t){t==null&&!n.keepEmpty||(Array.isArray(t)?a=a.concat(In(t)):wa.isFragment(t)&&t.props?a=a.concat(In(t.props.children,n)):a.push(t))}),a}var _n=function(){return null},_i=["children","value"];function tr(e){return In(e).map(function(n){if(!l.isValidElement(n)||!n.type)return null;var a=n,t=a.key,r=a.props,c=r.children,u=r.value,o=pt(r,_i),s=G({key:t,value:u},o),i=tr(c);return i.length&&(s.children=i),s}).filter(function(n){return n})}function On(e){if(!e)return e;var n=G({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return Vt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),n}}),n}function Li(e,n,a,t,r,c){var u=null,o=null;function s(){function i(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(v,p){var y="".concat(f,"-").concat(p),g=v[c.value],C=a.includes(g),N=i(v[c.children]||[],y,C),x=l.createElement(_n,v,N.map(function(w){return w.node}));if(n===g&&(u=x),C){var S={pos:y,node:x,children:N};return h||o.push(S),S}return null}).filter(function(v){return v})}o||(o=[],i(t),o.sort(function(d,f){var h=d.node.props.value,v=f.node.props.value,p=a.indexOf(h),y=a.indexOf(v);return p-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return Vt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),s(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Vt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),s(),r?o:o.map(function(d){var f=d.node;return f})}})}var Ai=function(n,a,t){var r=t.fieldNames,c=t.treeNodeFilterProp,u=t.filterTreeNode,o=r.children;return l.useMemo(function(){if(!a||u===!1)return n;var s=typeof u=="function"?u:function(d,f){return String(f[c]).toUpperCase().includes(a.toUpperCase())},i=function d(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return f.reduce(function(v,p){var y=p[o],g=h||s(a,On(p)),C=d(y||[],g);return(g||C.length)&&v.push(G(G({},p),{},E({isLeaf:void 0},o,C))),v},[])};return i(n)},[n,a,o,c,u])};function sa(e){var n=l.useRef();n.current=e;var a=l.useCallback(function(){return n.current.apply(n,arguments)},[]);return a}function ji(e,n){var a=n.id,t=n.pId,r=n.rootPId,c=new Map,u=[];return e.forEach(function(o){var s=o[a],i=G(G({},o),{},{key:o.key||s});c.set(s,i)}),c.forEach(function(o){var s=o[t],i=c.get(s);i?(i.children=i.children||[],i.children.push(o)):(s===r||r===null)&&u.push(o)}),u}function $i(e,n,a){return l.useMemo(function(){if(e){if(a){var t=G({id:"id",pId:"pId",rootPId:null},It(a)==="object"?a:{});return ji(e,t)}return e}return tr(n)},[n,a,e])}var nr=l.createContext(null),Ln=l.createContext(null),ar=l.createContext({}),Vi=function(n){var a=n.dropPosition,t=n.dropLevelOffset,r=n.indent,c={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(a){case-1:c.top=0,c.left=-t*r;break;case 1:c.bottom=0,c.left=-t*r;break;case 0:c.bottom=0,c.left=r;break}return Ee.createElement("div",{style:c})},Fi=function(n){for(var a=n.prefixCls,t=n.level,r=n.isStart,c=n.isEnd,u="".concat(a,"-indent-unit"),o=[],s=0;s<t;s+=1)o.push(l.createElement("span",{key:s,className:nt(u,E(E({},"".concat(u,"-start"),r[s]),"".concat(u,"-end"),c[s]))}));return l.createElement("span",{"aria-hidden":"true",className:"".concat(a,"-indent")},o)};const Hi=l.memo(Fi);var Wi=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],ca="open",ua="close",Bi="---",sn=function(n){var a,t,r=n.eventKey,c=n.className,u=n.style,o=n.dragOver,s=n.dragOverGapTop,i=n.dragOverGapBottom,d=n.isLeaf,f=n.isStart,h=n.isEnd,v=n.expanded,p=n.selected,y=n.checked,g=n.halfChecked,C=n.loading,N=n.domRef,x=n.active,S=n.data,w=n.onMouseMove,k=n.selectable,K=pt(n,Wi),m=Ee.useContext(Ln),D=Ee.useContext(ar),M=Ee.useRef(null),T=Ee.useState(!1),L=ie(T,2),$=L[0],I=L[1],P=Ee.useMemo(function(){var B;return!!(m.disabled||n.disabled||(B=D.nodeDisabled)!==null&&B!==void 0&&B.call(D,S))},[m.disabled,n.disabled,D.nodeDisabled,S]),H=Ee.useMemo(function(){return!m.checkable||n.checkable===!1?!1:m.checkable},[m.checkable,n.checkable]),q=function(O){P||m.onNodeSelect(O,Je(n))},F=function(O){P||!H||n.disableCheckbox||m.onNodeCheck(O,Je(n),!y)},Z=Ee.useMemo(function(){return typeof k=="boolean"?k:m.selectable},[k,m.selectable]),X=function(O){m.onNodeClick(O,Je(n)),Z?q(O):F(O)},ge=function(O){m.onNodeDoubleClick(O,Je(n))},Oe=function(O){m.onNodeMouseEnter(O,Je(n))},we=function(O){m.onNodeMouseLeave(O,Je(n))},me=function(O){m.onNodeContextMenu(O,Je(n))},he=Ee.useMemo(function(){return!!(m.draggable&&(!m.draggable.nodeDraggable||m.draggable.nodeDraggable(S)))},[m.draggable,S]),qe=function(O){O.stopPropagation(),I(!0),m.onNodeDragStart(O,n);try{O.dataTransfer.setData("text/plain","")}catch{}},re=function(O){O.preventDefault(),O.stopPropagation(),m.onNodeDragEnter(O,n)},Te=function(O){O.preventDefault(),O.stopPropagation(),m.onNodeDragOver(O,n)},He=function(O){O.stopPropagation(),m.onNodeDragLeave(O,n)},ae=function(O){O.stopPropagation(),I(!1),m.onNodeDragEnd(O,n)},A=function(O){O.preventDefault(),O.stopPropagation(),I(!1),m.onNodeDrop(O,n)},R=function(O){C||m.onNodeExpand(O,Je(n))},V=Ee.useMemo(function(){var B=ft(m.keyEntities,r)||{},O=B.children;return!!(O||[]).length},[m.keyEntities,r]),W=Ee.useMemo(function(){return d===!1?!1:d||!m.loadData&&!V||m.loadData&&n.loaded&&!V},[d,m.loadData,V,n.loaded]);Ee.useEffect(function(){C||typeof m.loadData=="function"&&v&&!W&&!n.loaded&&m.onNodeLoad(Je(n))},[C,m.loadData,m.onNodeLoad,v,W,n]);var _=Ee.useMemo(function(){var B;return(B=m.draggable)!==null&&B!==void 0&&B.icon?Ee.createElement("span",{className:"".concat(m.prefixCls,"-draggable-icon")},m.draggable.icon):null},[m.draggable]),U=function(O){var We=n.switcherIcon||m.switcherIcon;return typeof We=="function"?We(G(G({},n),{},{isLeaf:O})):We},ce=function(){if(W){var O=U(!0);return O!==!1?Ee.createElement("span",{className:nt("".concat(m.prefixCls,"-switcher"),"".concat(m.prefixCls,"-switcher-noop"))},O):null}var We=U(!1);return We!==!1?Ee.createElement("span",{onClick:R,className:nt("".concat(m.prefixCls,"-switcher"),"".concat(m.prefixCls,"-switcher_").concat(v?ca:ua))},We):null},ue=Ee.useMemo(function(){if(!H)return null;var B=typeof H!="boolean"?H:null;return Ee.createElement("span",{className:nt("".concat(m.prefixCls,"-checkbox"),E(E(E({},"".concat(m.prefixCls,"-checkbox-checked"),y),"".concat(m.prefixCls,"-checkbox-indeterminate"),!y&&g),"".concat(m.prefixCls,"-checkbox-disabled"),P||n.disableCheckbox)),onClick:F,role:"checkbox","aria-checked":g?"mixed":y,"aria-disabled":P||n.disableCheckbox,"aria-label":"Select ".concat(typeof n.title=="string"?n.title:"tree node")},B)},[H,y,g,P,n.disableCheckbox,n.title]),oe=Ee.useMemo(function(){return W?null:v?ca:ua},[W,v]),Ne=Ee.useMemo(function(){return Ee.createElement("span",{className:nt("".concat(m.prefixCls,"-iconEle"),"".concat(m.prefixCls,"-icon__").concat(oe||"docu"),E({},"".concat(m.prefixCls,"-icon_loading"),C))})},[m.prefixCls,oe,C]),te=Ee.useMemo(function(){var B=!!m.draggable,O=!n.disabled&&B&&m.dragOverNodeKey===r;return O?m.dropIndicatorRender({dropPosition:m.dropPosition,dropLevelOffset:m.dropLevelOffset,indent:m.indent,prefixCls:m.prefixCls,direction:m.direction}):null},[m.dropPosition,m.dropLevelOffset,m.indent,m.prefixCls,m.direction,m.draggable,m.dragOverNodeKey,m.dropIndicatorRender]),Me=Ee.useMemo(function(){var B=n.title,O=B===void 0?Bi:B,We="".concat(m.prefixCls,"-node-content-wrapper"),Be;if(m.showIcon){var Ge=n.icon||m.icon;Be=Ge?Ee.createElement("span",{className:nt("".concat(m.prefixCls,"-iconEle"),"".concat(m.prefixCls,"-icon__customize"))},typeof Ge=="function"?Ge(n):Ge):Ne}else m.loadData&&C&&(Be=Ne);var ke;return typeof O=="function"?ke=O(S):m.titleRender?ke=m.titleRender(S):ke=O,Ee.createElement("span",{ref:M,title:typeof O=="string"?O:"",className:nt(We,"".concat(We,"-").concat(oe||"normal"),E({},"".concat(m.prefixCls,"-node-selected"),!P&&(p||$))),onMouseEnter:Oe,onMouseLeave:we,onContextMenu:me,onClick:X,onDoubleClick:ge},Be,Ee.createElement("span",{className:"".concat(m.prefixCls,"-title")},ke),te)},[m.prefixCls,m.showIcon,n,m.icon,Ne,m.titleRender,S,oe,Oe,we,me,X,ge]),pe=Gt(K,{aria:!0,data:!0}),be=ft(m.keyEntities,r)||{},ze=be.level,Le=h[h.length-1],De=!P&&he,ye=m.draggingNodeKey===r,ne=k!==void 0?{"aria-selected":!!k}:void 0;return Ee.createElement("div",at({ref:N,role:"treeitem","aria-expanded":d?void 0:v,className:nt(c,"".concat(m.prefixCls,"-treenode"),(t={},E(E(E(E(E(E(E(E(E(E(t,"".concat(m.prefixCls,"-treenode-disabled"),P),"".concat(m.prefixCls,"-treenode-switcher-").concat(v?"open":"close"),!d),"".concat(m.prefixCls,"-treenode-checkbox-checked"),y),"".concat(m.prefixCls,"-treenode-checkbox-indeterminate"),g),"".concat(m.prefixCls,"-treenode-selected"),p),"".concat(m.prefixCls,"-treenode-loading"),C),"".concat(m.prefixCls,"-treenode-active"),x),"".concat(m.prefixCls,"-treenode-leaf-last"),Le),"".concat(m.prefixCls,"-treenode-draggable"),he),"dragging",ye),E(E(E(E(E(E(E(t,"drop-target",m.dropTargetKey===r),"drop-container",m.dropContainerKey===r),"drag-over",!P&&o),"drag-over-gap-top",!P&&s),"drag-over-gap-bottom",!P&&i),"filter-node",(a=m.filterTreeNode)===null||a===void 0?void 0:a.call(m,Je(n))),"".concat(m.prefixCls,"-treenode-leaf"),W))),style:u,draggable:De,onDragStart:De?qe:void 0,onDragEnter:he?re:void 0,onDragOver:he?Te:void 0,onDragLeave:he?He:void 0,onDrop:he?A:void 0,onDragEnd:he?ae:void 0,onMouseMove:w},ne,pe),Ee.createElement(Hi,{prefixCls:m.prefixCls,level:ze,isStart:f,isEnd:h}),_,ce(),ue,Me)};sn.isTreeNode=1;function zi(e,n){var a=l.useState(!1),t=ie(a,2),r=t[0],c=t[1];Xt(function(){if(r)return e(),function(){n()}},[r]),Xt(function(){return c(!0),function(){c(!1)}},[])}var Gi=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Ui=l.forwardRef(function(e,n){var a=e.className,t=e.style,r=e.motion,c=e.motionNodes,u=e.motionType,o=e.onMotionStart,s=e.onMotionEnd,i=e.active,d=e.treeNodeRequiredProps,f=pt(e,Gi),h=l.useState(!0),v=ie(h,2),p=v[0],y=v[1],g=l.useContext(Ln),C=g.prefixCls,N=c&&u!=="hide";Xt(function(){c&&N!==p&&y(N)},[c]);var x=function(){c&&o()},S=l.useRef(!1),w=function(){c&&!S.current&&(S.current=!0,s())};zi(x,w);var k=function(m){N===m&&w()};return c?l.createElement(pr,at({ref:n,visible:p},r,{motionAppear:u==="show",onVisibleChanged:k}),function(K,m){var D=K.className,M=K.style;return l.createElement("div",{ref:m,className:nt("".concat(C,"-treenode-motion"),D),style:M},c.map(function(T){var L=Object.assign({},(Aa(T.data),T.data)),$=T.title,I=T.key,P=T.isStart,H=T.isEnd;delete L.children;var q=Yt(I,d);return l.createElement(sn,at({},L,q,{title:$,active:i,data:T.data,key:I,isStart:P,isEnd:H}))}))}):l.createElement(sn,at({domRef:n,className:a,style:t},f,{active:i}))});function qi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=e.length,t=n.length;if(Math.abs(a-t)!==1)return{add:!1,key:null};function r(c,u){var o=new Map;c.forEach(function(i){o.set(i,!0)});var s=u.filter(function(i){return!o.has(i)});return s.length===1?s[0]:null}return a<t?{add:!0,key:r(e,n)}:{add:!1,key:r(n,e)}}function da(e,n,a){var t=e.findIndex(function(o){return o.key===a}),r=e[t+1],c=n.findIndex(function(o){return o.key===a});if(r){var u=n.findIndex(function(o){return o.key===r.key});return n.slice(c+1,u)}return n.slice(c+1)}var Yi=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],fa={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Xi=function(){},Ft="RC_TREE_MOTION_".concat(Math.random()),Rn={key:Ft},rr={key:Ft,level:0,index:0,pos:"0",node:Rn,nodes:[Rn]},va={parent:null,children:[],pos:rr.pos,data:Rn,title:null,key:Ft,isStart:[],isEnd:[]};function ga(e,n,a,t){return n===!1||!a?e:e.slice(0,Math.ceil(a/t)+1)}function ma(e){var n=e.key,a=e.pos;return Qt(n,a)}function Ji(e){for(var n=String(e.data.key),a=e;a.parent;)a=a.parent,n="".concat(a.data.key," > ").concat(n);return n}var Qi=l.forwardRef(function(e,n){var a=e.prefixCls,t=e.data;e.selectable,e.checkable;var r=e.expandedKeys,c=e.selectedKeys,u=e.checkedKeys,o=e.loadedKeys,s=e.loadingKeys,i=e.halfCheckedKeys,d=e.keyEntities,f=e.disabled,h=e.dragging,v=e.dragOverNodeKey,p=e.dropPosition,y=e.motion,g=e.height,C=e.itemHeight,N=e.virtual,x=e.scrollWidth,S=e.focusable,w=e.activeItem,k=e.focused,K=e.tabIndex,m=e.onKeyDown,D=e.onFocus,M=e.onBlur,T=e.onActiveChange,L=e.onListChangeStart,$=e.onListChangeEnd,I=pt(e,Yi),P=l.useRef(null),H=l.useRef(null);l.useImperativeHandle(n,function(){return{scrollTo:function(Me){P.current.scrollTo(Me)},getIndentWidth:function(){return H.current.offsetWidth}}});var q=l.useState(r),F=ie(q,2),Z=F[0],X=F[1],ge=l.useState(t),Oe=ie(ge,2),we=Oe[0],me=Oe[1],he=l.useState(t),qe=ie(he,2),re=qe[0],Te=qe[1],He=l.useState([]),ae=ie(He,2),A=ae[0],R=ae[1],V=l.useState(null),W=ie(V,2),_=W[0],U=W[1],ce=l.useRef(t);ce.current=t;function ue(){var te=ce.current;me(te),Te(te),R([]),U(null),$()}Xt(function(){X(r);var te=qi(Z,r);if(te.key!==null)if(te.add){var Me=we.findIndex(function(ye){var ne=ye.key;return ne===te.key}),pe=ga(da(we,t,te.key),N,g,C),be=we.slice();be.splice(Me+1,0,va),Te(be),R(pe),U("show")}else{var ze=t.findIndex(function(ye){var ne=ye.key;return ne===te.key}),Le=ga(da(t,we,te.key),N,g,C),De=t.slice();De.splice(ze+1,0,va),Te(De),R(Le),U("hide")}else we!==t&&(me(t),Te(t))},[r,t]),l.useEffect(function(){h||ue()},[h]);var oe=y?re:t,Ne={expandedKeys:r,selectedKeys:c,loadedKeys:o,loadingKeys:s,checkedKeys:u,halfCheckedKeys:i,dragOverNodeKey:v,dropPosition:p,keyEntities:d};return l.createElement(l.Fragment,null,k&&w&&l.createElement("span",{style:fa,"aria-live":"assertive"},Ji(w)),l.createElement("div",null,l.createElement("input",{style:fa,disabled:S===!1||f,tabIndex:S!==!1?K:null,onKeyDown:m,onFocus:D,onBlur:M,value:"",onChange:Xi,"aria-label":"for screen reader"})),l.createElement("div",{className:"".concat(a,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},l.createElement("div",{className:"".concat(a,"-indent")},l.createElement("div",{ref:H,className:"".concat(a,"-indent-unit")}))),l.createElement(_a,at({},I,{data:oe,itemKey:ma,height:g,fullHeight:!1,virtual:N,itemHeight:C,scrollWidth:x,prefixCls:"".concat(a,"-list"),ref:P,role:"tree",onVisibleChange:function(Me){Me.every(function(pe){return ma(pe)!==Ft})&&ue()}}),function(te){var Me=te.pos,pe=Object.assign({},(Aa(te.data),te.data)),be=te.title,ze=te.key,Le=te.isStart,De=te.isEnd,ye=Qt(ze,Me);delete pe.key,delete pe.children;var ne=Yt(ye,Ne);return l.createElement(Ui,at({},pe,ne,{title:be,active:!!w&&ze===w.key,pos:Me,data:te.data,isStart:Le,isEnd:De,motion:y,motionNodes:ze===Ft?A:null,motionType:_,onMotionStart:L,onMotionEnd:ue,treeNodeRequiredProps:Ne,onMouseMove:function(){T(null)}}))}))});function Dt(e,n){if(!e)return[];var a=e.slice(),t=a.indexOf(n);return t>=0&&a.splice(t,1),a}function Rt(e,n){var a=(e||[]).slice();return a.indexOf(n)===-1&&a.push(n),a}function An(e){return e.split("-")}function Zi(e,n){var a=[],t=ft(n,e);function r(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(u){var o=u.key,s=u.children;a.push(o),r(s)})}return r(t.children),a}function el(e){if(e.parent){var n=An(e.pos);return Number(n[n.length-1])===e.parent.children.length-1}return!1}function tl(e){var n=An(e.pos);return Number(n[n.length-1])===0}function ha(e,n,a,t,r,c,u,o,s,i){var d,f=e.clientX,h=e.clientY,v=e.target.getBoundingClientRect(),p=v.top,y=v.height,g=(i==="rtl"?-1:1)*(((r==null?void 0:r.x)||0)-f),C=(g-12)/t,N=s.filter(function(H){var q;return(q=o[H])===null||q===void 0||(q=q.children)===null||q===void 0?void 0:q.length}),x=ft(o,a.eventKey);if(h<p+y/2){var S=u.findIndex(function(H){return H.key===x.key}),w=S<=0?0:S-1,k=u[w].key;x=ft(o,k)}var K=x.key,m=x,D=x.key,M=0,T=0;if(!N.includes(K))for(var L=0;L<C&&el(x);L+=1)x=x.parent,T+=1;var $=n.data,I=x.node,P=!0;return tl(x)&&x.level===0&&h<p+y/2&&c({dragNode:$,dropNode:I,dropPosition:-1})&&x.key===a.eventKey?M=-1:(m.children||[]).length&&N.includes(D)?c({dragNode:$,dropNode:I,dropPosition:0})?M=0:P=!1:T===0?C>-1.5?c({dragNode:$,dropNode:I,dropPosition:1})?M=1:P=!1:c({dragNode:$,dropNode:I,dropPosition:0})?M=0:c({dragNode:$,dropNode:I,dropPosition:1})?M=1:P=!1:c({dragNode:$,dropNode:I,dropPosition:1})?M=1:P=!1,{dropPosition:M,dropLevelOffset:T,dropTargetKey:x.key,dropTargetPos:x.pos,dragOverNodeKey:D,dropContainerKey:M===0?null:((d=x.parent)===null||d===void 0?void 0:d.key)||null,dropAllowed:P}}function pa(e,n){if(e){var a=n.multiple;return a?e.slice():e.length?[e[0]]:e}}function pn(e){if(!e)return null;var n;if(Array.isArray(e))n={checkedKeys:e,halfCheckedKeys:void 0};else if(It(e)==="object")n={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return Kt(!1,"`checkedKeys` is not an array or an object"),null;return n}function ya(e,n){var a=new Set;function t(r){if(!a.has(r)){var c=ft(n,r);if(c){a.add(r);var u=c.parent,o=c.node;o.disabled||u&&t(u.key)}}}return(e||[]).forEach(function(r){t(r)}),Pe(a)}var nl=10,jn=function(e){yr(a,e);var n=br(a);function a(){var t;Cr(this,a);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return t=n.call.apply(n,[this].concat(c)),E(de(t),"destroyed",!1),E(de(t),"delayedDragEnterLogic",void 0),E(de(t),"loadingRetryTimes",{}),E(de(t),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:ln()}),E(de(t),"dragStartMousePosition",null),E(de(t),"dragNodeProps",null),E(de(t),"currentMouseOverDroppableNodeKey",null),E(de(t),"listRef",l.createRef()),E(de(t),"onNodeDragStart",function(o,s){var i=t.state,d=i.expandedKeys,f=i.keyEntities,h=t.props.onDragStart,v=s.eventKey;t.dragNodeProps=s,t.dragStartMousePosition={x:o.clientX,y:o.clientY};var p=Dt(d,v);t.setState({draggingNodeKey:v,dragChildrenKeys:Zi(v,f),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(p),window.addEventListener("dragend",t.onWindowDragEnd),h==null||h({event:o,node:Je(s)})}),E(de(t),"onNodeDragEnter",function(o,s){var i=t.state,d=i.expandedKeys,f=i.keyEntities,h=i.dragChildrenKeys,v=i.flattenNodes,p=i.indent,y=t.props,g=y.onDragEnter,C=y.onExpand,N=y.allowDrop,x=y.direction,S=s.pos,w=s.eventKey;if(t.currentMouseOverDroppableNodeKey!==w&&(t.currentMouseOverDroppableNodeKey=w),!t.dragNodeProps){t.resetDragState();return}var k=ha(o,t.dragNodeProps,s,p,t.dragStartMousePosition,N,v,f,d,x),K=k.dropPosition,m=k.dropLevelOffset,D=k.dropTargetKey,M=k.dropContainerKey,T=k.dropTargetPos,L=k.dropAllowed,$=k.dragOverNodeKey;if(h.includes(D)||!L){t.resetDragState();return}if(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach(function(I){clearTimeout(t.delayedDragEnterLogic[I])}),t.dragNodeProps.eventKey!==s.eventKey&&(o.persist(),t.delayedDragEnterLogic[S]=window.setTimeout(function(){if(t.state.draggingNodeKey!==null){var I=Pe(d),P=ft(f,s.eventKey);P&&(P.children||[]).length&&(I=Rt(d,s.eventKey)),t.props.hasOwnProperty("expandedKeys")||t.setExpandedKeys(I),C==null||C(I,{node:Je(s),expanded:!0,nativeEvent:o.nativeEvent})}},800)),t.dragNodeProps.eventKey===D&&m===0){t.resetDragState();return}t.setState({dragOverNodeKey:$,dropPosition:K,dropLevelOffset:m,dropTargetKey:D,dropContainerKey:M,dropTargetPos:T,dropAllowed:L}),g==null||g({event:o,node:Je(s),expandedKeys:d})}),E(de(t),"onNodeDragOver",function(o,s){var i=t.state,d=i.dragChildrenKeys,f=i.flattenNodes,h=i.keyEntities,v=i.expandedKeys,p=i.indent,y=t.props,g=y.onDragOver,C=y.allowDrop,N=y.direction;if(t.dragNodeProps){var x=ha(o,t.dragNodeProps,s,p,t.dragStartMousePosition,C,f,h,v,N),S=x.dropPosition,w=x.dropLevelOffset,k=x.dropTargetKey,K=x.dropContainerKey,m=x.dropTargetPos,D=x.dropAllowed,M=x.dragOverNodeKey;d.includes(k)||!D||(t.dragNodeProps.eventKey===k&&w===0?t.state.dropPosition===null&&t.state.dropLevelOffset===null&&t.state.dropTargetKey===null&&t.state.dropContainerKey===null&&t.state.dropTargetPos===null&&t.state.dropAllowed===!1&&t.state.dragOverNodeKey===null||t.resetDragState():S===t.state.dropPosition&&w===t.state.dropLevelOffset&&k===t.state.dropTargetKey&&K===t.state.dropContainerKey&&m===t.state.dropTargetPos&&D===t.state.dropAllowed&&M===t.state.dragOverNodeKey||t.setState({dropPosition:S,dropLevelOffset:w,dropTargetKey:k,dropContainerKey:K,dropTargetPos:m,dropAllowed:D,dragOverNodeKey:M}),g==null||g({event:o,node:Je(s)}))}}),E(de(t),"onNodeDragLeave",function(o,s){t.currentMouseOverDroppableNodeKey===s.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var i=t.props.onDragLeave;i==null||i({event:o,node:Je(s)})}),E(de(t),"onWindowDragEnd",function(o){t.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)}),E(de(t),"onNodeDragEnd",function(o,s){var i=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),i==null||i({event:o,node:Je(s)}),t.dragNodeProps=null,window.removeEventListener("dragend",t.onWindowDragEnd)}),E(de(t),"onNodeDrop",function(o,s){var i,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=t.state,h=f.dragChildrenKeys,v=f.dropPosition,p=f.dropTargetKey,y=f.dropTargetPos,g=f.dropAllowed;if(g){var C=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),p!==null){var N=G(G({},Yt(p,t.getTreeNodeRequiredProps())),{},{active:((i=t.getActiveItem())===null||i===void 0?void 0:i.key)===p,data:ft(t.state.keyEntities,p).node}),x=h.includes(p);Kt(!x,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var S=An(y),w={event:o,node:Je(N),dragNode:t.dragNodeProps?Je(t.dragNodeProps):null,dragNodesKeys:[t.dragNodeProps.eventKey].concat(h),dropToGap:v!==0,dropPosition:v+Number(S[S.length-1])};d||C==null||C(w),t.dragNodeProps=null}}}),E(de(t),"cleanDragState",function(){var o=t.state.draggingNodeKey;o!==null&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null}),E(de(t),"triggerExpandActionExpand",function(o,s){var i=t.state,d=i.expandedKeys,f=i.flattenNodes,h=s.expanded,v=s.key,p=s.isLeaf;if(!(p||o.shiftKey||o.metaKey||o.ctrlKey)){var y=f.filter(function(C){return C.key===v})[0],g=Je(G(G({},Yt(v,t.getTreeNodeRequiredProps())),{},{data:y.data}));t.setExpandedKeys(h?Dt(d,v):Rt(d,v)),t.onNodeExpand(o,g)}}),E(de(t),"onNodeClick",function(o,s){var i=t.props,d=i.onClick,f=i.expandAction;f==="click"&&t.triggerExpandActionExpand(o,s),d==null||d(o,s)}),E(de(t),"onNodeDoubleClick",function(o,s){var i=t.props,d=i.onDoubleClick,f=i.expandAction;f==="doubleClick"&&t.triggerExpandActionExpand(o,s),d==null||d(o,s)}),E(de(t),"onNodeSelect",function(o,s){var i=t.state.selectedKeys,d=t.state,f=d.keyEntities,h=d.fieldNames,v=t.props,p=v.onSelect,y=v.multiple,g=s.selected,C=s[h.key],N=!g;N?y?i=Rt(i,C):i=[C]:i=Dt(i,C);var x=i.map(function(S){var w=ft(f,S);return w?w.node:null}).filter(Boolean);t.setUncontrolledState({selectedKeys:i}),p==null||p(i,{event:"select",selected:N,node:s,selectedNodes:x,nativeEvent:o.nativeEvent})}),E(de(t),"onNodeCheck",function(o,s,i){var d=t.state,f=d.keyEntities,h=d.checkedKeys,v=d.halfCheckedKeys,p=t.props,y=p.checkStrictly,g=p.onCheck,C=s.key,N,x={event:"check",node:s,checked:i,nativeEvent:o.nativeEvent};if(y){var S=i?Rt(h,C):Dt(h,C),w=Dt(v,C);N={checked:S,halfChecked:w},x.checkedNodes=S.map(function(T){return ft(f,T)}).filter(Boolean).map(function(T){return T.node}),t.setUncontrolledState({checkedKeys:S})}else{var k=zt([].concat(Pe(h),[C]),!0,f),K=k.checkedKeys,m=k.halfCheckedKeys;if(!i){var D=new Set(K);D.delete(C);var M=zt(Array.from(D),{halfCheckedKeys:m},f);K=M.checkedKeys,m=M.halfCheckedKeys}N=K,x.checkedNodes=[],x.checkedNodesPositions=[],x.halfCheckedKeys=m,K.forEach(function(T){var L=ft(f,T);if(L){var $=L.node,I=L.pos;x.checkedNodes.push($),x.checkedNodesPositions.push({node:$,pos:I})}}),t.setUncontrolledState({checkedKeys:K},!1,{halfCheckedKeys:m})}g==null||g(N,x)}),E(de(t),"onNodeLoad",function(o){var s,i=o.key,d=t.state.keyEntities,f=ft(d,i);if(!(f!=null&&(s=f.children)!==null&&s!==void 0&&s.length)){var h=new Promise(function(v,p){t.setState(function(y){var g=y.loadedKeys,C=g===void 0?[]:g,N=y.loadingKeys,x=N===void 0?[]:N,S=t.props,w=S.loadData,k=S.onLoad;if(!w||C.includes(i)||x.includes(i))return null;var K=w(o);return K.then(function(){var m=t.state.loadedKeys,D=Rt(m,i);k==null||k(D,{event:"load",node:o}),t.setUncontrolledState({loadedKeys:D}),t.setState(function(M){return{loadingKeys:Dt(M.loadingKeys,i)}}),v()}).catch(function(m){if(t.setState(function(M){return{loadingKeys:Dt(M.loadingKeys,i)}}),t.loadingRetryTimes[i]=(t.loadingRetryTimes[i]||0)+1,t.loadingRetryTimes[i]>=nl){var D=t.state.loadedKeys;Kt(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:Rt(D,i)}),v()}p(m)}),{loadingKeys:Rt(x,i)}})});return h.catch(function(){}),h}}),E(de(t),"onNodeMouseEnter",function(o,s){var i=t.props.onMouseEnter;i==null||i({event:o,node:s})}),E(de(t),"onNodeMouseLeave",function(o,s){var i=t.props.onMouseLeave;i==null||i({event:o,node:s})}),E(de(t),"onNodeContextMenu",function(o,s){var i=t.props.onRightClick;i&&(o.preventDefault(),i({event:o,node:s}))}),E(de(t),"onFocus",function(){var o=t.props.onFocus;t.setState({focused:!0});for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];o==null||o.apply(void 0,i)}),E(de(t),"onBlur",function(){var o=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];o==null||o.apply(void 0,i)}),E(de(t),"getTreeNodeRequiredProps",function(){var o=t.state,s=o.expandedKeys,i=o.selectedKeys,d=o.loadedKeys,f=o.loadingKeys,h=o.checkedKeys,v=o.halfCheckedKeys,p=o.dragOverNodeKey,y=o.dropPosition,g=o.keyEntities;return{expandedKeys:s||[],selectedKeys:i||[],loadedKeys:d||[],loadingKeys:f||[],checkedKeys:h||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:y,keyEntities:g}}),E(de(t),"setExpandedKeys",function(o){var s=t.state,i=s.treeData,d=s.fieldNames,f=mn(i,o,d);t.setUncontrolledState({expandedKeys:o,flattenNodes:f},!0)}),E(de(t),"onNodeExpand",function(o,s){var i=t.state.expandedKeys,d=t.state,f=d.listChanging,h=d.fieldNames,v=t.props,p=v.onExpand,y=v.loadData,g=s.expanded,C=s[h.key];if(!f){var N=i.includes(C),x=!g;if(Kt(g&&N||!g&&!N,"Expand state not sync with index check"),i=x?Rt(i,C):Dt(i,C),t.setExpandedKeys(i),p==null||p(i,{node:s,expanded:x,nativeEvent:o.nativeEvent}),x&&y){var S=t.onNodeLoad(s);S&&S.then(function(){var w=mn(t.state.treeData,i,h);t.setUncontrolledState({flattenNodes:w})}).catch(function(){var w=t.state.expandedKeys,k=Dt(w,C);t.setExpandedKeys(k)})}}}),E(de(t),"onListChangeStart",function(){t.setUncontrolledState({listChanging:!0})}),E(de(t),"onListChangeEnd",function(){setTimeout(function(){t.setUncontrolledState({listChanging:!1})})}),E(de(t),"onActiveChange",function(o){var s=t.state.activeKey,i=t.props,d=i.onActiveChange,f=i.itemScrollOffset,h=f===void 0?0:f;s!==o&&(t.setState({activeKey:o}),o!==null&&t.scrollTo({key:o,offset:h}),d==null||d(o))}),E(de(t),"getActiveItem",function(){var o=t.state,s=o.activeKey,i=o.flattenNodes;return s===null?null:i.find(function(d){var f=d.key;return f===s})||null}),E(de(t),"offsetActiveKey",function(o){var s=t.state,i=s.flattenNodes,d=s.activeKey,f=i.findIndex(function(p){var y=p.key;return y===d});f===-1&&o<0&&(f=i.length),f=(f+o+i.length)%i.length;var h=i[f];if(h){var v=h.key;t.onActiveChange(v)}else t.onActiveChange(null)}),E(de(t),"onKeyDown",function(o){var s=t.state,i=s.activeKey,d=s.expandedKeys,f=s.checkedKeys,h=s.fieldNames,v=t.props,p=v.onKeyDown,y=v.checkable,g=v.selectable;switch(o.which){case Q.UP:{t.offsetActiveKey(-1),o.preventDefault();break}case Q.DOWN:{t.offsetActiveKey(1),o.preventDefault();break}}var C=t.getActiveItem();if(C&&C.data){var N=t.getTreeNodeRequiredProps(),x=C.data.isLeaf===!1||!!(C.data[h.children]||[]).length,S=Je(G(G({},Yt(i,N)),{},{data:C.data,active:!0}));switch(o.which){case Q.LEFT:{x&&d.includes(i)?t.onNodeExpand({},S):C.parent&&t.onActiveChange(C.parent.key),o.preventDefault();break}case Q.RIGHT:{x&&!d.includes(i)?t.onNodeExpand({},S):C.children&&C.children.length&&t.onActiveChange(C.children[0].key),o.preventDefault();break}case Q.ENTER:case Q.SPACE:{y&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?t.onNodeCheck({},S,!f.includes(i)):!y&&g&&!S.disabled&&S.selectable!==!1&&t.onNodeSelect({},S);break}}}p==null||p(o)}),E(de(t),"setUncontrolledState",function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t.destroyed){var d=!1,f=!0,h={};Object.keys(o).forEach(function(v){if(t.props.hasOwnProperty(v)){f=!1;return}d=!0,h[v]=o[v]}),d&&(!s||f)&&t.setState(G(G({},h),i))}}),E(de(t),"scrollTo",function(o){t.listRef.current.scrollTo(o)}),t}return xr(a,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var r=this.props,c=r.activeKey,u=r.itemScrollOffset,o=u===void 0?0:u;c!==void 0&&c!==this.state.activeKey&&(this.setState({activeKey:c}),c!==null&&this.scrollTo({key:c,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var r=this.state,c=r.focused,u=r.flattenNodes,o=r.keyEntities,s=r.draggingNodeKey,i=r.activeKey,d=r.dropLevelOffset,f=r.dropContainerKey,h=r.dropTargetKey,v=r.dropPosition,p=r.dragOverNodeKey,y=r.indent,g=this.props,C=g.prefixCls,N=g.className,x=g.style,S=g.showLine,w=g.focusable,k=g.tabIndex,K=k===void 0?0:k,m=g.selectable,D=g.showIcon,M=g.icon,T=g.switcherIcon,L=g.draggable,$=g.checkable,I=g.checkStrictly,P=g.disabled,H=g.motion,q=g.loadData,F=g.filterTreeNode,Z=g.height,X=g.itemHeight,ge=g.scrollWidth,Oe=g.virtual,we=g.titleRender,me=g.dropIndicatorRender,he=g.onContextMenu,qe=g.onScroll,re=g.direction,Te=g.rootClassName,He=g.rootStyle,ae=Gt(this.props,{aria:!0,data:!0}),A;L&&(It(L)==="object"?A=L:typeof L=="function"?A={nodeDraggable:L}:A={});var R={prefixCls:C,selectable:m,showIcon:D,icon:M,switcherIcon:T,draggable:A,draggingNodeKey:s,checkable:$,checkStrictly:I,disabled:P,keyEntities:o,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:h,dropPosition:v,dragOverNodeKey:p,indent:y,direction:re,dropIndicatorRender:me,loadData:q,filterTreeNode:F,titleRender:we,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return l.createElement(Ln.Provider,{value:R},l.createElement("div",{className:nt(C,N,Te,E(E(E({},"".concat(C,"-show-line"),S),"".concat(C,"-focused"),c),"".concat(C,"-active-focused"),i!==null)),style:He},l.createElement(Qi,at({ref:this.listRef,prefixCls:C,style:x,data:u,disabled:P,selectable:m,checkable:!!$,motion:H,dragging:s!==null,height:Z,itemHeight:X,virtual:Oe,focusable:w,focused:c,tabIndex:K,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:he,onScroll:qe,scrollWidth:ge},this.getTreeNodeRequiredProps(),ae))))}}],[{key:"getDerivedStateFromProps",value:function(r,c){var u=c.prevProps,o={prevProps:r};function s(K){return!u&&r.hasOwnProperty(K)||u&&u[K]!==r[K]}var i,d=c.fieldNames;if(s("fieldNames")&&(d=ln(r.fieldNames),o.fieldNames=d),s("treeData")?i=r.treeData:s("children")&&(Kt(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=gi(r.children)),i){o.treeData=i;var f=Qa(i,{fieldNames:d});o.keyEntities=G(E({},Ft,rr),f.keyEntities)}var h=o.keyEntities||c.keyEntities;if(s("expandedKeys")||u&&s("autoExpandParent"))o.expandedKeys=r.autoExpandParent||!u&&r.defaultExpandParent?ya(r.expandedKeys,h):r.expandedKeys;else if(!u&&r.defaultExpandAll){var v=G({},h);delete v[Ft];var p=[];Object.keys(v).forEach(function(K){var m=v[K];m.children&&m.children.length&&p.push(m.key)}),o.expandedKeys=p}else!u&&r.defaultExpandedKeys&&(o.expandedKeys=r.autoExpandParent||r.defaultExpandParent?ya(r.defaultExpandedKeys,h):r.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,i||o.expandedKeys){var y=mn(i||c.treeData,o.expandedKeys||c.expandedKeys,d);o.flattenNodes=y}if(r.selectable&&(s("selectedKeys")?o.selectedKeys=pa(r.selectedKeys,r):!u&&r.defaultSelectedKeys&&(o.selectedKeys=pa(r.defaultSelectedKeys,r))),r.checkable){var g;if(s("checkedKeys")?g=pn(r.checkedKeys)||{}:!u&&r.defaultCheckedKeys?g=pn(r.defaultCheckedKeys)||{}:i&&(g=pn(r.checkedKeys)||{checkedKeys:c.checkedKeys,halfCheckedKeys:c.halfCheckedKeys}),g){var C=g,N=C.checkedKeys,x=N===void 0?[]:N,S=C.halfCheckedKeys,w=S===void 0?[]:S;if(!r.checkStrictly){var k=zt(x,!0,h);x=k.checkedKeys,w=k.halfCheckedKeys}o.checkedKeys=x,o.halfCheckedKeys=w}}return s("loadedKeys")&&(o.loadedKeys=r.loadedKeys),o}}]),a}(l.Component);E(jn,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Vi,allowDrop:function(){return!0},expandAction:!1});E(jn,"TreeNode",sn);var Bt={ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40};function ba(e,n,a){var t=l.useRef({});return(!("value"in t.current)||a(t.current.condition,n))&&(t.current.value=e(),t.current.condition=n),t.current.value}var or=l.createContext(null);function Ca(e){return l.isValidElement(e)&&!wa.isFragment(e)}Number(l.version.split(".")[0])>=19;var al={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},rl=function(n,a){var t=$a(),r=t.prefixCls,c=t.multiple,u=t.searchValue,o=t.toggleOpen,s=t.open,i=t.notFoundContent,d=l.useContext(or),f=d.virtual,h=d.listHeight,v=d.listItemHeight,p=d.listItemScrollOffset,y=d.treeData,g=d.fieldNames,C=d.onSelect,N=d.dropdownMatchSelectWidth,x=d.treeExpandAction,S=d.treeTitleRender,w=d.onPopupScroll,k=d.leftMaxCount,K=d.leafCountOnly,m=d.valueEntities,D=l.useContext(nr),M=D.checkable,T=D.checkedKeys,L=D.halfCheckedKeys,$=D.treeExpandedKeys,I=D.treeDefaultExpandAll,P=D.treeDefaultExpandedKeys,H=D.onTreeExpand,q=D.treeIcon,F=D.showTreeIcon,Z=D.switcherIcon,X=D.treeLine,ge=D.treeNodeFilterProp,Oe=D.loadData,we=D.treeLoadedKeys,me=D.treeMotion,he=D.onTreeLoad,qe=D.keyEntities,re=l.useRef(),Te=ba(function(){return y},[s,y],function(ee,fe){return fe[0]&&ee[1]!==fe[1]}),He=l.useMemo(function(){return M?{checked:T,halfChecked:L}:null},[M,T,L]);l.useEffect(function(){if(s&&!c&&T.length){var ee;(ee=re.current)===null||ee===void 0||ee.scrollTo({key:T[0]})}},[s]);var ae=function(fe){fe.preventDefault()},A=function(fe,Ve){var Ie=Ve.node;M&&Kn(Ie)||(C(Ie.key,{selected:!T.includes(Ie.key)}),c||o(!1))},R=l.useState(P),V=ie(R,2),W=V[0],_=V[1],U=l.useState(null),ce=ie(U,2),ue=ce[0],oe=ce[1],Ne=l.useMemo(function(){return $?Pe($):u?ue:W},[W,ue,$,u]),te=function(fe){_(fe),oe(fe),H&&H(fe)},Me=String(u).toLowerCase(),pe=function(fe){return Me?String(fe[ge]).toLowerCase().includes(Me):!1};l.useEffect(function(){u&&oe(Mi(y,g))},[u]);var be=l.useState(function(){return new Map}),ze=ie(be,2),Le=ze[0],De=ze[1];l.useEffect(function(){k&&De(new Map)},[k]);function ye(ee){var fe=ee[g.value];if(!Le.has(fe)){var Ve=m.get(fe),Ie=(Ve.children||[]).length===0;if(Ie)Le.set(fe,!1);else{var Fe=Ve.children.filter(function(Xe){return!Xe.node.disabled&&!Xe.node.disableCheckbox&&!T.includes(Xe.node[g.value])}),Qe=Fe.length;Le.set(fe,Qe>k)}}return Le.get(fe)}var ne=kn(function(ee){var fe=ee[g.value];return T.includes(fe)||k===null?!1:k<=0?!0:K&&k?ye(ee):!1}),B=function ee(fe){var Ve=bi(fe),Ie;try{for(Ve.s();!(Ie=Ve.n()).done;){var Fe=Ie.value;if(!(Fe.disabled||Fe.selectable===!1)){if(u){if(pe(Fe))return Fe}else return Fe;if(Fe[g.children]){var Qe=ee(Fe[g.children]);if(Qe)return Qe}}}}catch(Xe){Ve.e(Xe)}finally{Ve.f()}return null},O=l.useState(null),We=ie(O,2),Be=We[0],Ge=We[1],ke=qe[Be];l.useEffect(function(){if(s){var ee=null,fe=function(){var Ie=B(Te);return Ie?Ie[g.value]:null};!c&&T.length&&!u?ee=T[0]:ee=fe(),Ge(ee)}},[s,u]),l.useImperativeHandle(a,function(){var ee;return{scrollTo:(ee=re.current)===null||ee===void 0?void 0:ee.scrollTo,onKeyDown:function(Ve){var Ie,Fe=Ve.which;switch(Fe){case Bt.UP:case Bt.DOWN:case Bt.LEFT:case Bt.RIGHT:(Ie=re.current)===null||Ie===void 0||Ie.onKeyDown(Ve);break;case Bt.ENTER:{if(ke){var Qe=ne(ke.node),Xe=(ke==null?void 0:ke.node)||{},st=Xe.selectable,tt=Xe.value,ct=Xe.disabled;st!==!1&&!ct&&!Qe&&A(null,{node:{key:Be},selected:!T.includes(tt)})}break}case Bt.ESC:o(!1)}},onKeyUp:function(){}}});var bt=ba(function(){return!u},[u,$||W],function(ee,fe){var Ve=ie(ee,1),Ie=Ve[0],Fe=ie(fe,2),Qe=Fe[0],Xe=Fe[1];return Ie!==Qe&&!!(Qe||Xe)}),Ke=bt?Oe:null;if(Te.length===0)return l.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:ae},i);var Ye={fieldNames:g};return we&&(Ye.loadedKeys=we),Ne&&(Ye.expandedKeys=Ne),l.createElement("div",{onMouseDown:ae},ke&&s&&l.createElement("span",{style:al,"aria-live":"assertive"},ke.node.value),l.createElement(ar.Provider,{value:{nodeDisabled:ne}},l.createElement(jn,at({ref:re,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:Te,height:h,itemHeight:v,itemScrollOffset:p,virtual:f!==!1&&N!==!1,multiple:c,icon:q,showIcon:F,switcherIcon:Z,showLine:X,loadData:Ke,motion:me,activeKey:Be,checkable:M,checkStrictly:!0,checkedKeys:He,selectedKeys:M?[]:T,defaultExpandAll:I,titleRender:S},Ye,{onActiveChange:Ge,onSelect:A,onCheck:A,onExpand:te,onLoad:he,filterTreeNode:pe,expandAction:x,onScroll:w}))))},ol=l.forwardRef(rl),$n="SHOW_ALL",Vn="SHOW_PARENT",dn="SHOW_CHILD";function xa(e,n,a,t){var r=new Set(e);return n===dn?e.filter(function(c){var u=a[c];return!u||!u.children||!u.children.some(function(o){var s=o.node;return r.has(s[t.value])})||!u.children.every(function(o){var s=o.node;return Kn(s)||r.has(s[t.value])})}):n===Vn?e.filter(function(c){var u=a[c],o=u?u.parent:null;return!o||Kn(o.node)||!r.has(o.key)}):e}var il=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function ll(e){return!e||It(e)!=="object"}var sl=l.forwardRef(function(e,n){var a=e.id,t=e.prefixCls,r=t===void 0?"rc-tree-select":t,c=e.value,u=e.defaultValue,o=e.onChange,s=e.onSelect,i=e.onDeselect,d=e.searchValue,f=e.inputValue,h=e.onSearch,v=e.autoClearSearchValue,p=v===void 0?!0:v,y=e.filterTreeNode,g=e.treeNodeFilterProp,C=g===void 0?"value":g,N=e.showCheckedStrategy,x=e.treeNodeLabelProp,S=e.multiple,w=e.treeCheckable,k=e.treeCheckStrictly,K=e.labelInValue,m=e.maxCount,D=e.fieldNames,M=e.treeDataSimpleMode,T=e.treeData,L=e.children,$=e.loadData,I=e.treeLoadedKeys,P=e.onTreeLoad,H=e.treeDefaultExpandAll,q=e.treeExpandedKeys,F=e.treeDefaultExpandedKeys,Z=e.onTreeExpand,X=e.treeExpandAction,ge=e.virtual,Oe=e.listHeight,we=Oe===void 0?200:Oe,me=e.listItemHeight,he=me===void 0?20:me,qe=e.listItemScrollOffset,re=qe===void 0?0:qe,Te=e.onDropdownVisibleChange,He=e.dropdownMatchSelectWidth,ae=He===void 0?!0:He,A=e.treeLine,R=e.treeIcon,V=e.showTreeIcon,W=e.switcherIcon,_=e.treeMotion,U=e.treeTitleRender,ce=e.onPopupScroll,ue=pt(e,il),oe=qa(a),Ne=w&&!k,te=w||k,Me=k||K,pe=te||S,be=ia(u,{value:c}),ze=ie(be,2),Le=ze[0],De=ze[1],ye=l.useMemo(function(){return w?N||dn:$n},[N,w]),ne=l.useMemo(function(){return Ti(D)},[JSON.stringify(D)]),B=ia("",{value:d!==void 0?d:f,postState:function(ve){return ve||""}}),O=ie(B,2),We=O[0],Be=O[1],Ge=function(ve){Be(ve),h==null||h(ve)},ke=$i(T,L,M),bt=Pi(ke,ne),Ke=bt.keyEntities,Ye=bt.valueEntities,ee=l.useCallback(function(xe){var ve=[],le=[];return xe.forEach(function(_e){Ye.has(_e)?le.push(_e):ve.push(_e)}),{missingRawValues:ve,existRawValues:le}},[Ye]),fe=Ai(ke,We,{fieldNames:ne,treeNodeFilterProp:C,filterTreeNode:y}),Ve=l.useCallback(function(xe){if(xe){if(x)return xe[x];for(var ve=ne._title,le=0;le<ve.length;le+=1){var _e=xe[ve[le]];if(_e!==void 0)return _e}}},[ne,x]),Ie=l.useCallback(function(xe){var ve=Ri(xe);return ve.map(function(le){return ll(le)?{value:le}:le})},[]),Fe=l.useCallback(function(xe){var ve=Ie(xe);return ve.map(function(le){var _e=le.label,vt=le.value,Ae=le.halfChecked,je,$e=Ye.get(vt);if($e){var lt;_e=U?U($e.node):(lt=_e)!==null&&lt!==void 0?lt:Ve($e.node),je=$e.node.disabled}else if(_e===void 0){var xt=Ie(Le).find(function(Pt){return Pt.value===vt});_e=xt.label}return{label:_e,value:vt,halfChecked:Ae,disabled:je}})},[Ye,Ve,Ie,Le]),Qe=l.useMemo(function(){return Ie(Le===null?[]:Le)},[Ie,Le]),Xe=l.useMemo(function(){var xe=[],ve=[];return Qe.forEach(function(le){le.halfChecked?ve.push(le):xe.push(le)}),[xe,ve]},[Qe]),st=ie(Xe,2),tt=st[0],ct=st[1],Ue=l.useMemo(function(){return tt.map(function(xe){return xe.value})},[tt]),Ht=Oi(tt,ct,Ne,Ke),wt=ie(Ht,2),j=wt[0],J=wt[1],z=l.useMemo(function(){var xe=xa(j,ye,Ke,ne),ve=xe.map(function(Ae){var je,$e;return(je=($e=Ke[Ae])===null||$e===void 0||($e=$e.node)===null||$e===void 0?void 0:$e[ne.value])!==null&&je!==void 0?je:Ae}),le=ve.map(function(Ae){var je=tt.find(function(lt){return lt.value===Ae}),$e=K?je==null?void 0:je.label:U==null?void 0:U(je);return{value:Ae,label:$e}}),_e=Fe(le),vt=_e[0];return!pe&&vt&&la(vt.value)&&la(vt.label)?[]:_e.map(function(Ae){var je;return G(G({},Ae),{},{label:(je=Ae.label)!==null&&je!==void 0?je:Ae.value})})},[ne,pe,j,tt,Fe,ye,Ke]),Y=Ii(z),Ce=ie(Y,1),Re=Ce[0],gt=l.useMemo(function(){return pe&&(ye==="SHOW_CHILD"||k||!w)?m:null},[m,pe,k,ye,w]),it=sa(function(xe,ve,le){var _e=xa(xe,ye,Ke,ne);if(!(gt&&_e.length>gt)){var vt=Fe(xe);if(De(vt),p&&Be(""),o){var Ae=xe;Ne&&(Ae=_e.map(function(ht){var yt=Ye.get(ht);return yt?yt.node[ne.value]:ht}));var je=ve||{triggerValue:void 0,selected:void 0},$e=je.triggerValue,lt=je.selected,xt=Ae;if(k){var Pt=ct.filter(function(ht){return!Ae.includes(ht.value)});xt=[].concat(Pe(xt),Pe(Pt))}var Ot=Fe(xt),Et={preValue:tt,triggerValue:$e},Nt=!0;(k||le==="selection"&&!lt)&&(Nt=!1),Li(Et,$e,xe,ke,Nt,ne),te?Et.checked=lt:Et.selected=lt;var _t=Me?Ot:Ot.map(function(ht){return ht.value});o(pe?_t:_t[0],Me?null:Ot.map(function(ht){return ht.label}),Et)}}}),mt=l.useCallback(function(xe,ve){var le,_e=ve.selected,vt=ve.source,Ae=Ke[xe],je=Ae==null?void 0:Ae.node,$e=(le=je==null?void 0:je[ne.value])!==null&&le!==void 0?le:xe;if(!pe)it([$e],{selected:!0,triggerValue:$e},"option");else{var lt=_e?[].concat(Pe(Ue),[$e]):j.filter(function(yt){return yt!==$e});if(Ne){var xt=ee(lt),Pt=xt.missingRawValues,Ot=xt.existRawValues,Et=Ot.map(function(yt){return Ye.get(yt).key}),Nt;if(_e){var _t=zt(Et,!0,Ke);Nt=_t.checkedKeys}else{var ht=zt(Et,{halfCheckedKeys:J},Ke);Nt=ht.checkedKeys}lt=[].concat(Pe(Pt),Pe(Nt.map(function(yt){return Ke[yt].node[ne.value]})))}it(lt,{selected:_e,triggerValue:$e},vt||"option")}_e||!pe?s==null||s($e,On(je)):i==null||i($e,On(je))},[ee,Ye,Ke,ne,pe,Ue,it,Ne,s,i,j,J,m]),Ze=l.useCallback(function(xe){if(Te){var ve={};Object.defineProperty(ve,"documentClickClose",{get:function(){return Vt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),Te(xe,ve)}},[Te]),Ct=sa(function(xe,ve){var le=xe.map(function(_e){return _e.value});if(ve.type==="clear"){it(le,{},"selection");return}ve.values.length&&mt(ve.values[0].value,{selected:!1,source:"selection"})}),Mt=l.useMemo(function(){return{virtual:ge,dropdownMatchSelectWidth:ae,listHeight:we,listItemHeight:he,listItemScrollOffset:re,treeData:fe,fieldNames:ne,onSelect:mt,treeExpandAction:X,treeTitleRender:U,onPopupScroll:ce,leftMaxCount:m===void 0?null:m-Re.length,leafCountOnly:ye==="SHOW_CHILD"&&!k&&!!w,valueEntities:Ye}},[ge,ae,we,he,re,fe,ne,mt,X,U,ce,m,Re.length,ye,k,w,Ye]),Ut=l.useMemo(function(){return{checkable:te,loadData:$,treeLoadedKeys:I,onTreeLoad:P,checkedKeys:j,halfCheckedKeys:J,treeDefaultExpandAll:H,treeExpandedKeys:q,treeDefaultExpandedKeys:F,onTreeExpand:Z,treeIcon:R,treeMotion:_,showTreeIcon:V,switcherIcon:W,treeLine:A,treeNodeFilterProp:C,keyEntities:Ke}},[te,$,I,P,j,J,H,q,F,Z,R,_,V,W,A,C,Ke]);return l.createElement(or.Provider,{value:Mt},l.createElement(nr.Provider,{value:Ut},l.createElement(za,at({ref:n},ue,{id:oe,prefixCls:r,mode:pe?"multiple":void 0,displayValues:Re,onDisplayValuesChange:Ct,searchValue:We,onSearch:Ge,OptionList:ol,emptyOptions:!ke.length,onDropdownVisibleChange:Ze,dropdownMatchSelectWidth:ae}))))}),Zt=sl;Zt.TreeNode=_n;Zt.SHOW_ALL=$n;Zt.SHOW_PARENT=Vn;Zt.SHOW_CHILD=dn;const cl=e=>{const{componentCls:n,treePrefixCls:a,colorBgElevated:t}=e,r=`.${a}`;return[{[`${n}-dropdown`]:[{padding:`${Hn(e.paddingXS)} ${Hn(e.calc(e.paddingXS).div(2).equal())}`},Co(a,Ea(e,{colorBgContainer:t}),!1),{[r]:{borderRadius:0,[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},oo(`${a}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function ul(e,n,a){return Sr("TreeSelect",t=>{const r=Ea(t,{treePrefixCls:n});return[cl(r)]},bo)(e,a)}var dl=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const fl=(e,n)=>{var a;const{prefixCls:t,size:r,disabled:c,bordered:u=!0,className:o,rootClassName:s,treeCheckable:i,multiple:d,listHeight:f=256,listItemHeight:h,placement:v,notFoundContent:p,switcherIcon:y,treeLine:g,getPopupContainer:C,popupClassName:N,dropdownClassName:x,treeIcon:S=!1,transitionName:w,choiceTransitionName:k="",status:K,treeExpandAction:m,builtinPlacements:D,dropdownMatchSelectWidth:M,popupMatchSelectWidth:T,allowClear:L,variant:$,dropdownStyle:I,tagRender:P,maxCount:H,showCheckedStrategy:q,treeCheckStrictly:F}=e,Z=dl(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:X,getPrefixCls:ge,renderEmpty:Oe,direction:we,virtual:me,popupMatchSelectWidth:he,popupOverflow:qe}=l.useContext(wr),[,re]=Er(),Te=h??(re==null?void 0:re.controlHeightSM)+(re==null?void 0:re.paddingXXS),He=ge(),ae=ge("select",t),A=ge("select-tree",t),R=ge("tree-select",t),{compactSize:V,compactItemClassnames:W}=Nr(ae,we),_=Wn(ae),U=Wn(R),[ce,ue,oe]=vo(ae,_),[Ne]=ul(R,A,U),[te,Me]=kr("treeSelect",$,u),pe=Bn(N||x,`${R}-dropdown`,{[`${R}-dropdown-rtl`]:we==="rtl"},s,oe,_,U,ue),be=!!(i||d),ze=l.useMemo(()=>{if(!(H&&(q==="SHOW_ALL"&&!F||q==="SHOW_PARENT")))return H},[H,q,F]),Le=go(e.suffixIcon,e.showArrow),De=(a=T??M)!==null&&a!==void 0?a:he,{status:ye,hasFeedback:ne,isFormItemInput:B,feedbackIcon:O}=l.useContext(Dr),We=Tr(ye,K),{suffixIcon:Be,removeIcon:Ge,clearIcon:ke}=mo(Object.assign(Object.assign({},Z),{multiple:be,showSuffixIcon:Le,hasFeedback:ne,feedbackIcon:O,prefixCls:ae,componentName:"TreeSelect"})),bt=L===!0?{clearIcon:ke}:L;let Ke;p!==void 0?Ke=p:Ke=(Oe==null?void 0:Oe("Select"))||l.createElement(ho,{componentName:"Select"});const Ye=Na(Z,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),ee=l.useMemo(()=>v!==void 0?v:we==="rtl"?"bottomRight":"bottomLeft",[v,we]),fe=Kr(tt=>{var ct;return(ct=r??V)!==null&&ct!==void 0?ct:tt}),Ve=l.useContext(Ir),Ie=c??Ve,Fe=Bn(!t&&R,{[`${ae}-lg`]:fe==="large",[`${ae}-sm`]:fe==="small",[`${ae}-rtl`]:we==="rtl",[`${ae}-${te}`]:Me,[`${ae}-in-form-item`]:B},Or(ae,We,ne),W,o,s,oe,_,U,ue),Qe=tt=>l.createElement(xo,{prefixCls:A,switcherIcon:y,treeNodeProps:tt,showLine:g}),[Xe]=Rr("SelectLike",I==null?void 0:I.zIndex),st=l.createElement(Zt,Object.assign({virtual:me,disabled:Ie},Ye,{dropdownMatchSelectWidth:De,builtinPlacements:po(D,qe),ref:n,prefixCls:ae,className:Fe,listHeight:f,listItemHeight:Te,treeCheckable:i&&l.createElement("span",{className:`${ae}-tree-checkbox-inner`}),treeLine:!!g,suffixIcon:Be,multiple:be,placement:ee,removeIcon:Ge,allowClear:bt,switcherIcon:Qe,showTreeIcon:S,notFoundContent:Ke,getPopupContainer:C||X,treeMotion:null,dropdownClassName:pe,dropdownStyle:Object.assign(Object.assign({},I),{zIndex:Xe}),choiceTransitionName:zn(He,"",k),transitionName:zn(He,"slide-up",w),treeExpandAction:m,tagRender:be?P:void 0,maxCount:ze,showCheckedStrategy:q,treeCheckStrictly:F}));return ce(Ne(st))},vl=l.forwardRef(fl),Tt=vl,gl=So(Tt,"dropdownAlign",e=>Na(e,["visible"]));Tt.TreeNode=_n;Tt.SHOW_ALL=$n;Tt.SHOW_PARENT=Vn;Tt.SHOW_CHILD=dn;Tt._InternalPanelDoNotUseOrYouWillBeFired=gl;function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},Tn.apply(this,arguments)}const ml=(e,n)=>l.createElement(ka,Tn({},e,{ref:n,icon:Ci})),hl=l.forwardRef(ml);function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},Mn.apply(this,arguments)}const pl=(e,n)=>l.createElement(ka,Mn({},e,{ref:n,icon:xi})),yl=l.forwardRef(pl);function bl(){const{notification:e}=Da.useApp(),{currentUser:n}=Mr(),[a,t]=l.useState(!1),[r,c]=l.useState({gameId:"",gameName:""}),u=ao({mutationKey:["oldState",r.gameId],mutationFn:async({prevGameId:s,payload:i})=>{const f=(await Pr.run({action:_r.LOAD_GAME,gameId:s})).data;return await Ka.run({gameId:s,gameName:(f==null?void 0:f.gameName)??"",playerId:n.id,action:Ia.FORCE_STATE_PROPERTY,state:i})},onSuccess:async()=>{e.success({message:"Redirect successfully triggered"})},onError:s=>{console.error(s),e.error({message:"Failed to load previous game to continue the redirect",description:JSON.stringify(s.message)})}}),o=async(s,i,d)=>{if(a){e.error({message:"Redirect has failed to trigger"});return}c({gameId:i,gameName:d}),await u.mutateAsync({prevGameId:s,gameName:d,payload:{redirect:{redirectAt:Date.now(),gameId:i,gameName:d}}}),t(!0)};return{isSettingRedirect:u.isPending,startRedirect:o,wasRedirectSuccessful:u.isSuccess}}function Cl({options:e=[],disabled:n,onChangeOptions:a,selectedOptions:t}){return!e||e.length===0?b.jsx("div",{className:"create-game-modal-options create-game-modal-options__no-options",children:b.jsx($t.Text,{children:b.jsx(rt,{pt:"Este jogo não possui customizações",en:"This game does not support customizations"})})}):b.jsxs("div",{className:"create-game-modal-options",children:[b.jsx($t.Title,{level:5,className:"create-game-modal-options__title",children:b.jsx(rt,{pt:"Opções:",en:"Options:"})}),b.jsx("div",{className:"create-game-modal-options__list",children:(e??[]).map(r=>b.jsxs($t.Paragraph,{className:bn("create-game-modal-options__option",r.disabled&&"create-game-modal-options__option--disabled"),children:[b.jsxs("div",{className:"create-game-modal-options__label",children:[b.jsx("span",{children:r.label}),r.kind!=="switch"&&!!r.description&&b.jsx("div",{className:"create-game-modal-options__option-description",children:r.description})]}),r.kind==="switch"&&b.jsx(xl,{option:r,disabled:n,onChangeOptions:a,selectedOptions:t}),r.kind==="radio"&&b.jsx(Sl,{option:r,disabled:n,onChangeOptions:a,selectedOptions:t}),r.kind==="checkbox"&&b.jsx(wl,{option:r,disabled:n,onChangeOptions:a,selectedOptions:t}),r.kind==="switch"&&!!r.description&&b.jsx("span",{className:"create-game-modal-options__option-description",children:r.description})]},`option-${r.label}`))})]})}function xl({option:e,disabled:n,onChangeOptions:a,selectedOptions:t}){return b.jsxs(b.Fragment,{children:[b.jsx("span",{className:bn("create-game-modal-options__off",!t[e.key]&&"create-game-modal-options--selected"),children:(e==null?void 0:e.values[0].label)??""}),b.jsx(Lr,{disabled:n||e.disabled,onChange:r=>a(e.key,r)}),b.jsx("span",{className:bn("create-game-modal-options__on",t[e.key]&&"create-game-modal-options--selected"),children:(e==null?void 0:e.values[1].label)??""})]})}function Sl({option:e,disabled:n,onChangeOptions:a}){return b.jsx(qn.Group,{disabled:n||e.disabled,onChange:t=>a(e.key,t.target.value),defaultValue:e.values[0].value,className:"create-game-modal-options__selections",children:e.values.map(t=>b.jsx(qn,{value:t.value,children:t.label},String(t.value)))})}function wl({option:e,disabled:n,onChangeOptions:a}){return b.jsx(io.Group,{disabled:n||e.disabled,onChange:t=>a(e.key,t),className:"create-game-modal-options__selections",options:e.values})}const El=(e,n)=>{const a=Date.now(),t=a-1e3*60*60*24;return{...Object.entries(e??{}).reduce((c,[u,o])=>(o>t&&(c[u]=o),c),{}),[n]:a}},Nl=e=>{const n=Object.entries(e).map(([c,u])=>({gameId:c,createdAt:u}));if(n.length<2)return null;const a=Jt.orderBy(n,"createdAt","desc"),t=2*60*60*1e3,r=Date.now();return a[1].createdAt-r>t?null:a[1].gameId},kl=e=>(e==null?void 0:e.reduce((n,a)=>(a.kind==="switch"&&(n[a.key]=!1),a.kind==="radio"&&(n[a.key]=a.values[0].value),a.kind==="checkbox"&&(n[a.key]=[]),n),{}))??{};function Dl({gameInfo:e}){const[n,a]=l.useState(!1);return b.jsxs(b.Fragment,{children:[b.jsx(Cn,{type:"primary",onClick:()=>a(!0),block:!0,disabled:!e.available,children:b.jsx(rt,{pt:"Criar",en:"Create"})}),n&&b.jsx(Kl,{gameInfo:e,open:n,setOpen:a})]})}function Kl({gameInfo:e,open:n,setOpen:a}){const{message:t,notification:r}=Da.useApp(),c=Ar(),{pathname:u}=jr(),[o,s]=lo(),{language:i,translate:d}=cn(),{setLoader:f}=$r(),[h,v]=l.useState(!1),[p,y]=l.useState(null),[,g]=qt("userId"),[,C]=qt("username"),[,N]=qt("userAvatarId"),[x,S]=l.useState(kl(e.options)),[w,k]=Vr("latestGameIds"),K=Nl(w),{startRedirect:m,isSettingRedirect:D,wasRedirectSuccessful:M}=bl();l.useEffect(()=>{o.value&&p&&t.info(`Copied to clipboard: ${o.value}`)},[o,p,t]);const T=(I,P)=>{S(H=>({...H,[I]:P}))},L=async()=>{try{f("create",!0),v(!0);const I=await Ka.run({action:Ia.CREATE_GAME,gameName:e.gameName,language:i,options:x,version:e.version});if(I.data.gameId){y(I.data.gameId),g(null),C(""),N(""),k(El(w,I.data.gameId));const P=window.location.href.split(u)[0];s(`${P}/${I.data.gameId}`)}}catch(I){r.error({message:d("Aplicativo encontrou um erro ao tentar criar o jogo","The application found an error while trying to create a game",i),description:JSON.stringify(I.message),placement:"bottomLeft"}),console.error(I),a(!1)}finally{v(!1),f("create",!1)}},$=async()=>{p?c(`/${p}`):t.info(d("Péra! O jogo ainda não foi inicializado.","Wait! The game has not been created"))};return b.jsx(so,{title:`${d("Criando novo jogo","Creating new game")}: ${e.title[i]}`,open:n,onCancel:()=>a(!1),onOk:$,okButtonProps:{disabled:!p||D},maskClosable:!1,children:b.jsxs(b.Fragment,{children:[b.jsx(Oa,{alt:e.title[i],src:`${rn.BANNERS}${e.gameName}-${i}.jpg`,fallback:`${rn.BANNERS}/em-breve-${i}.jpg`,className:"round-corners"}),!p&&b.jsxs(vn,{children:[b.jsx(rt,{pt:"Você está criando um jogo em:",en:"You are creating a game in:"})," ",b.jsx(Ra,{})]}),b.jsx(Cl,{options:e.options,disabled:h||!!p,onChangeOptions:T,selectedOptions:x}),b.jsx(on,{}),h&&b.jsxs(b.Fragment,{children:[b.jsx(vn,{children:b.jsx(rt,{pt:"O jogo está sendo criado...",en:"The game session is being created"})}),b.jsx(ro,{message:d("Gerando...","Generating..."),margin:!0})]}),e.version.startsWith("alpha")&&b.jsx(nn,{type:"warning",showIcon:!0,message:b.jsx(rt,{pt:"Este jogo está em alpha, não o jogue",en:"This game is still in alpha and shouldn't be played"})}),e.version.startsWith("beta")&&b.jsx(nn,{type:"warning",showIcon:!0,message:b.jsx(rt,{pt:"Este jogo está em beta, prossiga com cuidado",en:"This game is in beta and bugs might be everywhere"})}),p?b.jsxs("div",{children:[b.jsxs(Fr,{className:"center",children:[b.jsx(rt,{pt:"Jogo inicializado",en:"Game Initialized"}),": ",p]}),b.jsxs(vn,{children:[K&&!M&&b.jsx(nn,{type:"info",showIcon:!0,message:b.jsxs(b.Fragment,{children:[b.jsx(rt,{pt:b.jsxs(b.Fragment,{children:["Você quer redirecionar jogadores em ",K," para essa nova partida?"]}),en:b.jsxs(b.Fragment,{children:["Redirect players in ",K," to this new play?"]})}),b.jsx(Cn,{size:"large",onClick:()=>{m(K??"",p??"",e.gameName)},disabled:!p||!K,loading:D,children:b.jsx(rt,{pt:"Redirecione-os",en:"Redirect them"})})]})}),M&&b.jsx(nn,{type:"info",showIcon:!0,message:b.jsx(rt,{pt:b.jsxs(b.Fragment,{children:["Jogadores em ",K," foram convidados para o jogo ",p]}),en:b.jsxs(b.Fragment,{children:["Players in ",K," have been invited to ",p]})})})]})]}):b.jsx(Hr,{align:"center",children:b.jsx(Cn,{type:"primary",size:"large",disabled:h,onClick:L,children:b.jsx(rt,{pt:"Criar Jogo",en:"Create Game"})})})]})})}const Il=e=>{if(e.includes("dev"))return"#6cb3f6";if(e.includes("alpha"))return"#F97659";if(e.includes("beta"))return"#F9D859";const n=Number(e.split(".")[0]);return Number.isNaN(n)?"#96A0A3":n===0?"#F9D859":n===1?"#72D984":n===2||n>=3?"#7CBD51":"#96A0A3"};function Ol({game:e,isAdmin:n=!0}){var c,u;const{language:a,translate:t}=cn(),r=Ta(e);return b.jsxs(jt,{className:"game-card",cover:b.jsx(uo.Ribbon,{text:e.version,color:Il(e.version),children:b.jsx(Oa,{alt:e.title[a],src:`${rn.BANNERS}${e.gameName}-${a}.jpg`,fallback:`${rn.BANNERS}/em-breve-${a}.jpg`})}),children:[b.jsx("div",{className:"game-card__contents",children:b.jsxs(xn,{direction:"vertical",className:"full-width",children:[b.jsx(jt.Meta,{title:b.jsxs("span",{className:"game-card__title",title:e.title[a],children:[e.title[a]," ",b.jsx("span",{children:b.jsx(Wr,{title:t("Código do jogo começará com","The game id will start with"),children:b.jsx(co,{children:e.gameCode})})})]}),description:`${t("Baseado em","Based on")} ${e.basedOn.split("").reverse().join("")}`}),b.jsx(jt.Meta,{className:"game-card__description",description:e.summary[a]}),((u=(c=e.rules)==null?void 0:c[a])==null?void 0:u.length)>1&&b.jsx(to,{gameInfo:e,buttonProps:{size:"small",className:"game-card__margin-bottom"}}),b.jsx(no,{wrap:!0,size:[1,6],style:{display:"flex"},gameCode:e.gameCode,tags:e.tags})]})}),b.jsxs("div",{className:"game-card__actions",children:[e.duration&&b.jsx(jt.Meta,{description:b.jsxs(b.Fragment,{children:[b.jsx(Zr,{})," ",r.min," min - ",r.max," min (Avg: ",r.ideal," min)"]})}),b.jsx(on,{className:"game-card__divider"}),b.jsxs(xn,{direction:"vertical",children:[b.jsx(jt.Meta,{description:t(`Para ${e.playerCount.min}-${e.playerCount.max} jogadores`,`For ${e.playerCount.min}-${e.playerCount.max} players`)}),b.jsx(jt.Meta,{className:"game-card__player-count",description:t(`Melhor com ${e.playerCount.best||"?"} jogadores`,`Best wih ${e.playerCount.best||"?"} players`)}),b.jsx(jt.Meta,{className:"game-card__player-count game-card__margin-bottom",description:t(`Recomendado jogar com ${Gn(e.playerCount.recommended)}`,`Recommended with ${Gn(e.playerCount.recommended)}`)})]}),n&&b.jsx("div",{style:{marginTop:"1rem"},children:["dev","beta","stable"].includes(e.release)&&b.jsx(Dl,{gameInfo:e})})]})]},e.gameName)}function Rl(){fo();const[e,n]=l.useState(!1);return qt("usingFirestoreEmulator"),qt("usingFunctionsEmulator"),Br(()=>{}),b.jsx(b.Fragment,{})}const{SHOW_PARENT:Tl}=Tt;function Ml({availabilityCount:e,setTagFilters:n,setNumberFilters:a}){const t=(c,u)=>{a(o=>({...o,[c]:u}))},r=c=>{t("recommendedWith",+(c==="recommended")),t("bestWith",+(c==="best"))};return b.jsxs(xn,{className:"hub-filters",wrap:!0,size:"middle",children:[b.jsxs("span",{children:[b.jsx(yl,{})," (",e,")"]}),b.jsxs(an,{defaultValue:"",style:{minWidth:"20ch"},size:"small",onChange:r,children:[b.jsx(an.Option,{value:"",children:"Playing with"}),b.jsx(an.Option,{value:"recommended",children:"Recommended with"}),b.jsx(an.Option,{value:"best",children:"Best with"})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"players-input",children:"Players"}),b.jsx(Yn,{id:"players-input",min:2,max:12,size:"small",className:"hub-filters__input-number",onChange:c=>t("players",c??0)})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"duration",children:"Duration"}),b.jsx(Yn,{id:"duration",min:15,step:15,size:"small",className:"hub-filters__input-number",onChange:c=>t("duration",c??0)})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"tags",children:"Tags"}),b.jsx(Pl,{value:void 0,onTreeSelectChange:n})]})]})}function Pl({value:e,onTreeSelectChange:n}){const{dualTranslate:a}=cn(),t=c=>{n(c)},r=l.useMemo(()=>Object.values(Object.keys(Un).reduce((c,u)=>{const o=Un[u];return c[o.group]===void 0&&(c[o.group]={title:Jt.capitalize(o.group),value:o.group,children:[]}),c[o.group].children.push({title:Jt.capitalize(a(o.label)),value:`${o.group}${Ma}${u}`}),c},{})),[a]);return b.jsx(Tt,{treeData:r,value:e,onChange:t,treeCheckable:!0,showCheckedStrategy:Tl,placeholder:"Select Game Tags",size:"small",style:{width:"100%",minWidth:"400px"}})}Jt.orderBy(Object.entries(Object.values(Pa).reduce((e,n)=>(e[n.gameCode]===void 0&&(e[n.gameCode]=0),e[n.gameCode]++,e),{})).map(([e,n])=>`${e}: ${n}`));function ds(){zr("Hub - Tarde Divertida");const{language:e}=cn(),[n,a]=l.useState([]),[t,r]=l.useState({}),c=l.useMemo(()=>Object.values(Pa).filter(i=>{const d=[];if(t.players&&(d.push(i.playerCount.min<=t.players&&i.playerCount.max>=t.players),t.bestWith&&d.push(t.players===i.playerCount.best),t.recommendedWith&&d.push(i.playerCount.recommended.includes(t.players))),n.forEach(f=>{var p;const[h,v]=f.split(Ma);(h&&v&&((p=Gr)==null?void 0:p[h])==="exclusive"||v)&&d.push(i.tags.includes(v))}),t.duration){const f=Ta(i,t.players??0);t.players?d.push(t.duration>=f.customTime-10&&t.duration<=f.customTime+10):d.push(t.duration>=f.min&&t.duration<=f.max)}return d.every(Boolean)}),[n,t]),{availableGames:u,comingSoonGames:o,devGames:s}=l.useMemo(()=>Jt.orderBy(c,[`title.[${e}]`],["asc"]).reduce((d,f)=>(["stable"].includes(f.release)?d.availableGames.push(f):["dev","beta"].includes(f.release)?d.devGames.push(f):d.comingSoonGames.push(f),d),{availableGames:[],devGames:[],comingSoonGames:[]}),[c,e]);return b.jsxs(Ur,{className:"dev-layout",children:[b.jsx(Qr,{title:b.jsxs(b.Fragment,{children:[b.jsx(hl,{})," Hub"]}),subTitle:b.jsx(rt,{pt:"Selecione um jogo para começar",en:"Select a game to start"}),extra:[b.jsx(Ra,{},"language-switch"),b.jsx(eo,{danger:!0,ghost:!0,size:"small"},"logout-button")]}),b.jsx(Rl,{}),b.jsx(Ml,{setTagFilters:a,setNumberFilters:r,availabilityCount:u.length}),b.jsxs(qr.Content,{className:"container",id:"main-container",children:[Yr,b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Disponíveis",en:"Available"})}),b.jsx(yn,{games:u}),b.jsx(on,{}),b.jsxs(b.Fragment,{children:[b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Em Desenvolvimento",en:"Under Development"})}),b.jsx(yn,{games:s}),b.jsx(on,{})]}),b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Em Breve",en:"Coming Soon"})}),b.jsx(yn,{games:o})]})]})}function yn({games:e}){return e.length===0?b.jsx($t.Text,{type:"secondary",children:b.jsx(rt,{pt:"Nenhum jogo encontrado nessa categoria",en:"No games found in this category"})}):b.jsx(Xr,{gutter:[8,16],children:e.map(n=>b.jsx(Jr,{xs:24,sm:12,md:8,lg:8,xl:6,xxl:4,children:b.jsx(Ol,{game:n,isAdmin:["dev","beta","stable"].includes(n.release)})},n.gameName))})}export{ds as default};
