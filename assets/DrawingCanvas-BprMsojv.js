import{bx as Fl,c7 as Qu,eH as Nc,r as ve,_ as le,j as pe,F as Fc,e as Ac,w as Mc,B as ma,T as ya}from"./index-Bc8e1i4G.js";import{R as Al}from"./UndoOutlined-HFQCt8Mc.js";import{R as Lc}from"./DeleteOutlined-hobaqOZ3.js";var Qi={exports:{}},fr={},va={},_a={},Ml;function vt(){return Ml||(Ml=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const g=Math.PI/180;function O(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof Fl<"u"?Fl:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.22",isBrowser:O(),isUnminified:/param/.test((function(T){}).toString()),dblClickWindow:400,getAngle(T){return o.Konva.angleDeg?T*g:T},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var T;return(T=o.Konva.Transformer)===null||T===void 0?void 0:T.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(T){o.glob.Konva=T}};const L=T=>{o.Konva[T.prototype.getClassName()]=T};o._registerNode=L,o.Konva._injectGlobal(o.Konva)}(_a)),_a}var Sa={},Ll;function Dt(){return Ll||(Ll=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const g=vt();class O{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new O(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){const x=this.m;return{x:x[0]*v.x+x[2]*v.y+x[4],y:x[1]*v.x+x[3]*v.y+x[5]}}translate(v,x){return this.m[4]+=this.m[0]*v+this.m[2]*x,this.m[5]+=this.m[1]*v+this.m[3]*x,this}scale(v,x){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=x,this.m[3]*=x,this}rotate(v){const x=Math.cos(v),M=Math.sin(v),B=this.m[0]*x+this.m[2]*M,k=this.m[1]*x+this.m[3]*M,R=this.m[0]*-M+this.m[2]*x,N=this.m[1]*-M+this.m[3]*x;return this.m[0]=B,this.m[1]=k,this.m[2]=R,this.m[3]=N,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,x){const M=this.m[0]+this.m[2]*x,B=this.m[1]+this.m[3]*x,k=this.m[2]+this.m[0]*v,R=this.m[3]+this.m[1]*v;return this.m[0]=M,this.m[1]=B,this.m[2]=k,this.m[3]=R,this}multiply(v){const x=this.m[0]*v.m[0]+this.m[2]*v.m[1],M=this.m[1]*v.m[0]+this.m[3]*v.m[1],B=this.m[0]*v.m[2]+this.m[2]*v.m[3],k=this.m[1]*v.m[2]+this.m[3]*v.m[3],R=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],N=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=x,this.m[1]=M,this.m[2]=B,this.m[3]=k,this.m[4]=R,this.m[5]=N,this}invert(){const v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),x=this.m[3]*v,M=-this.m[1]*v,B=-this.m[2]*v,k=this.m[0]*v,R=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),N=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=x,this.m[1]=M,this.m[2]=B,this.m[3]=k,this.m[4]=R,this.m[5]=N,this}getMatrix(){return this.m}decompose(){const v=this.m[0],x=this.m[1],M=this.m[2],B=this.m[3],k=this.m[4],R=this.m[5],N=v*B-x*M,G={x:k,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||x!=0){const z=Math.sqrt(v*v+x*x);G.rotation=x>0?Math.acos(v/z):-Math.acos(v/z),G.scaleX=z,G.scaleY=N/z,G.skewX=(v*M+x*B)/N,G.skewY=0}else if(M!=0||B!=0){const z=Math.sqrt(M*M+B*B);G.rotation=Math.PI/2-(B>0?Math.acos(-M/z):-Math.acos(M/z)),G.scaleX=N/z,G.scaleY=z,G.skewX=0,G.skewY=(v*M+x*B)/N}return G.rotation=o.Util._getRotation(G.rotation),G}}o.Transform=O;const L="[object Array]",T="[object Number]",_="[object String]",a="[object Boolean]",d=Math.PI/180,f=180/Math.PI,m="#",y="",w="0",p="Konva warning: ",h="Konva error: ",c="rgb(",S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let F=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};o.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===L},_isNumber(s){return Object.prototype.toString.call(s)===T&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===_},_isBoolean(s){return Object.prototype.toString.call(s)===a},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const v=s[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){F.push(s),F.length===1&&u(function(){const v=F;F=[],v.forEach(function(x){x()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,v){const x=o.Util.createImageElement();x.onload=function(){v(x)},x.src=s},_rgbToHex(s,v,x){return((1<<24)+(s<<16)+(v<<8)+x).toString(16).slice(1)},_hexToRgb(s){s=s.replace(m,y);const v=parseInt(s,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=w+s;return m+s},getRGB(s){let v;return s in S?(v=S[s],{r:v[0],g:v[1],b:v[2]}):s[0]===m?this._hexToRgb(s.substring(1)):s.substr(0,4)===c?(v=E.exec(s.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",o.Util._namedColorToRBA(s)||o.Util._hex3ColorToRGBA(s)||o.Util._hex4ColorToRGBA(s)||o.Util._hex6ColorToRGBA(s)||o.Util._hex8ColorToRGBA(s)||o.Util._rgbColorToRGBA(s)||o.Util._rgbaColorToRGBA(s)||o.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const v=S[s.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const v=s.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const v=s.split(/ *, */).map((x,M)=>x.slice(-1)==="%"?M===3?parseInt(x)/100:parseInt(x)/100*255:Number(x));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[v,...x]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),M=Number(x[0])/360,B=Number(x[1])/100,k=Number(x[2])/100;let R,N,G;if(B===0)return G=k*255,{r:Math.round(G),g:Math.round(G),b:Math.round(G),a:1};k<.5?R=k*(1+B):R=k+B-k*B;const z=2*k-R,V=[0,0,0];for(let j=0;j<3;j++)N=M+1/3*-(j-1),N<0&&N++,N>1&&N--,6*N<1?G=z+(R-z)*6*N:2*N<1?G=R:3*N<2?G=z+(R-z)*(2/3-N)*6:G=z,V[j]=G*255;return{r:Math.round(V[0]),g:Math.round(V[1]),b:Math.round(V[2]),a:1}}},haveIntersection(s,v){return!(v.x>s.x+s.width||v.x+v.width<s.x||v.y>s.y+s.height||v.y+v.height<s.y)},cloneObject(s){const v={};for(const x in s)this._isPlainObject(s[x])?v[x]=this.cloneObject(s[x]):this._isArray(s[x])?v[x]=this.cloneArray(s[x]):v[x]=s[x];return v},cloneArray(s){return s.slice(0)},degToRad(s){return s*d},radToDeg(s){return s*f},_degToRad(s){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(s)},_radToDeg(s){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(s)},_getRotation(s){return g.Konva.angleDeg?o.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(h+s)},error(s){console.error(h+s)},warn(s){g.Konva.showWarnings&&console.warn(p+s)},each(s,v){for(const x in s)v(x,s[x])},_inRange(s,v,x){return v<=s&&s<x},_getProjectionToSegment(s,v,x,M,B,k){let R,N,G;const z=(s-x)*(s-x)+(v-M)*(v-M);if(z==0)R=s,N=v,G=(B-x)*(B-x)+(k-M)*(k-M);else{const V=((B-s)*(x-s)+(k-v)*(M-v))/z;V<0?(R=s,N=v,G=(s-B)*(s-B)+(v-k)*(v-k)):V>1?(R=x,N=M,G=(x-B)*(x-B)+(M-k)*(M-k)):(R=s+V*(x-s),N=v+V*(M-v),G=(R-B)*(R-B)+(N-k)*(N-k))}return[R,N,G]},_getProjectionToLine(s,v,x){const M=o.Util.cloneObject(s);let B=Number.MAX_VALUE;return v.forEach(function(k,R){if(!x&&R===v.length-1)return;const N=v[(R+1)%v.length],G=o.Util._getProjectionToSegment(k.x,k.y,N.x,N.y,s.x,s.y),z=G[0],V=G[1],j=G[2];j<B&&(M.x=z,M.y=V,B=j)}),M},_prepareArrayForTween(s,v,x){const M=[],B=[];if(s.length>v.length){const R=v;v=s,s=R}for(let R=0;R<s.length;R+=2)M.push({x:s[R],y:s[R+1]});for(let R=0;R<v.length;R+=2)B.push({x:v[R],y:v[R+1]});const k=[];return B.forEach(function(R){const N=o.Util._getProjectionToLine(R,M,x);k.push(N.x),k.push(N.y)}),k},_prepareToStringify(s){let v;s.visitedByCircularReferenceRemoval=!0;for(const x in s)if(s.hasOwnProperty(x)&&s[x]&&typeof s[x]=="object"){if(v=Object.getOwnPropertyDescriptor(s,x),s[x].visitedByCircularReferenceRemoval||o.Util._isElement(s[x]))if(v.configurable)delete s[x];else return null;else if(o.Util._prepareToStringify(s[x])===null)if(v.configurable)delete s[x];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,v){for(const x in v)s[x]=v[x];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){g.Konva.releaseCanvasOnDestroy&&s.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(s,v,x,M){let B=0,k=0,R=0,N=0;typeof M=="number"?B=k=R=N=Math.min(M,v/2,x/2):(B=Math.min(M[0]||0,v/2,x/2),k=Math.min(M[1]||0,v/2,x/2),N=Math.min(M[2]||0,v/2,x/2),R=Math.min(M[3]||0,v/2,x/2)),s.moveTo(B,0),s.lineTo(v-k,0),s.arc(v-k,k,k,Math.PI*3/2,0,!1),s.lineTo(v,x-N),s.arc(v-N,x-N,N,0,Math.PI/2,!1),s.lineTo(R,x),s.arc(R,x-R,R,Math.PI/2,Math.PI,!1),s.lineTo(0,B),s.arc(B,B,B,Math.PI,Math.PI*3/2,!1)}}}(Sa)),Sa}var gr={},en={},nn={},bl;function Ju(){if(bl)return nn;bl=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.HitContext=nn.SceneContext=nn.Context=void 0;const o=Dt(),g=vt();function O(F){const u=[],s=F.length,v=o.Util;for(let x=0;x<s;x++){let M=F[x];v._isNumber(M)?M=Math.round(M*1e3)/1e3:v._isString(M)||(M=M+""),u.push(M)}return u}const L=",",T="(",_=")",a="([",d="])",f=";",m="()",y="=",w=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],h=100;let c=class{constructor(u){this.canvas=u,g.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,s){let v=this.traceArr,x=v.length,M="",B,k,R,N;for(B=0;B<x;B++)k=v[B],R=k.method,R?(N=k.args,M+=R,u?M+=m:o.Util._isArray(N[0])?M+=a+N.join(L)+d:(s&&(N=N.map(G=>typeof G=="number"?Math.floor(G):G)),M+=T+N.join(L)+_)):(M+=k.property,u||(M+=y+k.val)),M+=f;return M}clearTrace(){this.traceArr=[]}_trace(u){let s=this.traceArr,v;s.push(u),v=s.length,v>=h&&s.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const s=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(u){const s=u.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(u){const s=u.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(u){const s=u.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(u,s){this._context[u]=s}arc(u,s,v,x,M,B){this._context.arc(u,s,v,x,M,B)}arcTo(u,s,v,x,M){this._context.arcTo(u,s,v,x,M)}beginPath(){this._context.beginPath()}bezierCurveTo(u,s,v,x,M,B){this._context.bezierCurveTo(u,s,v,x,M,B)}clearRect(u,s,v,x){this._context.clearRect(u,s,v,x)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,s){const v=arguments;if(v.length===2)return this._context.createImageData(u,s);if(v.length===1)return this._context.createImageData(u)}createLinearGradient(u,s,v,x){return this._context.createLinearGradient(u,s,v,x)}createPattern(u,s){return this._context.createPattern(u,s)}createRadialGradient(u,s,v,x,M,B){return this._context.createRadialGradient(u,s,v,x,M,B)}drawImage(u,s,v,x,M,B,k,R,N){const G=arguments,z=this._context;G.length===3?z.drawImage(u,s,v):G.length===5?z.drawImage(u,s,v,x,M):G.length===9&&z.drawImage(u,s,v,x,M,B,k,R,N)}ellipse(u,s,v,x,M,B,k,R){this._context.ellipse(u,s,v,x,M,B,k,R)}isPointInPath(u,s,v,x){return v?this._context.isPointInPath(v,u,s,x):this._context.isPointInPath(u,s,x)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,s,v,x){this._context.fillRect(u,s,v,x)}strokeRect(u,s,v,x){this._context.strokeRect(u,s,v,x)}fillText(u,s,v,x){x?this._context.fillText(u,s,v,x):this._context.fillText(u,s,v)}measureText(u){return this._context.measureText(u)}getImageData(u,s,v,x){return this._context.getImageData(u,s,v,x)}lineTo(u,s){this._context.lineTo(u,s)}moveTo(u,s){this._context.moveTo(u,s)}rect(u,s,v,x){this._context.rect(u,s,v,x)}roundRect(u,s,v,x,M){this._context.roundRect(u,s,v,x,M)}putImageData(u,s,v){this._context.putImageData(u,s,v)}quadraticCurveTo(u,s,v,x){this._context.quadraticCurveTo(u,s,v,x)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,s){this._context.scale(u,s)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,s,v,x,M,B){this._context.setTransform(u,s,v,x,M,B)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,s,v,x){this._context.strokeText(u,s,v,x)}transform(u,s,v,x,M,B){this._context.transform(u,s,v,x,M,B)}translate(u,s){this._context.translate(u,s)}_enableTrace(){let u=this,s=w.length,v=this.setAttr,x,M;const B=function(k){let R=u[k],N;u[k]=function(){return M=O(Array.prototype.slice.call(arguments,0)),N=R.apply(u,arguments),u._trace({method:k,args:M}),N}};for(x=0;x<s;x++)B(w[x]);u.setAttr=function(){v.apply(u,arguments);const k=arguments[0];let R=arguments[1];(k==="shadowOffsetX"||k==="shadowOffsetY"||k==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),u._trace({property:k,val:R})}}_applyGlobalCompositeOperation(u){const s=u.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};nn.Context=c,p.forEach(function(F){Object.defineProperty(c.prototype,F,{get(){return this._context[F]},set(u){this._context[F]=u}})});class S extends c{constructor(u,{willReadFrequently:s=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(u){const s=u.fill();this.setAttr("fillStyle",s),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const s=u._getLinearGradient();s&&(this.setAttr("fillStyle",s),u._fillFunc(this))}_fillRadialGradient(u){const s=u._getRadialGradient();s&&(this.setAttr("fillStyle",s),u._fillFunc(this))}_fill(u){const s=u.fill(),v=u.getFillPriority();if(s&&v==="color"){this._fillColor(u);return}const x=u.getFillPatternImage();if(x&&v==="pattern"){this._fillPattern(u);return}const M=u.getFillLinearGradientColorStops();if(M&&v==="linear-gradient"){this._fillLinearGradient(u);return}const B=u.getFillRadialGradientColorStops();if(B&&v==="radial-gradient"){this._fillRadialGradient(u);return}s?this._fillColor(u):x?this._fillPattern(u):M?this._fillLinearGradient(u):B&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const s=u.getStrokeLinearGradientStartPoint(),v=u.getStrokeLinearGradientEndPoint(),x=u.getStrokeLinearGradientColorStops(),M=this.createLinearGradient(s.x,s.y,v.x,v.y);if(x){for(let B=0;B<x.length;B+=2)M.addColorStop(x[B],x[B+1]);this.setAttr("strokeStyle",M)}}_stroke(u){const s=u.dash(),v=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!v){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(u),s&&u.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),v||this.restore()}}_applyShadow(u){var s,v,x;const M=(s=u.getShadowRGBA())!==null&&s!==void 0?s:"black",B=(v=u.getShadowBlur())!==null&&v!==void 0?v:5,k=(x=u.getShadowOffset())!==null&&x!==void 0?x:{x:0,y:0},R=u.getAbsoluteScale(),N=this.canvas.getPixelRatio(),G=R.x*N,z=R.y*N;this.setAttr("shadowColor",M),this.setAttr("shadowBlur",B*Math.min(Math.abs(G),Math.abs(z))),this.setAttr("shadowOffsetX",k.x*G),this.setAttr("shadowOffsetY",k.y*z)}}nn.SceneContext=S;class E extends c{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const s=u.getStrokeScaleEnabled();if(!s){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(u);const v=u.hitStrokeWidth(),x=v==="auto"?u.strokeWidth():v;this.setAttr("lineWidth",x),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),s||this.restore()}}}return nn.HitContext=E,nn}var Ol;function Ji(){if(Ol)return en;Ol=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HitCanvas=en.SceneCanvas=en.Canvas=void 0;const o=Dt(),g=Ju(),O=vt();let L;function T(){if(L)return L;const f=o.Util.createCanvasElement(),m=f.getContext("2d");return L=function(){const y=O.Konva._global.devicePixelRatio||1,w=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return y/w}(),o.Util.releaseCanvas(f),L}let _=class{constructor(m){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const w=(m||{}).pixelRatio||O.Konva.pixelRatio||T();this.pixelRatio=w,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(m){const y=this.pixelRatio;this.pixelRatio=m,this.setSize(this.getWidth()/y,this.getHeight()/y)}setWidth(m){this.width=this._canvas.width=m*this.pixelRatio,this._canvas.style.width=m+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}setHeight(m){this.height=this._canvas.height=m*this.pixelRatio,this._canvas.style.height=m+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}getWidth(){return this.width}getHeight(){return this.height}setSize(m,y){this.setWidth(m||0),this.setHeight(y||0)}toDataURL(m,y){try{return this._canvas.toDataURL(m,y)}catch{try{return this._canvas.toDataURL()}catch(p){return o.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};en.Canvas=_;class a extends _{constructor(m={width:0,height:0,willReadFrequently:!1}){super(m),this.context=new g.SceneContext(this,{willReadFrequently:m.willReadFrequently}),this.setSize(m.width,m.height)}}en.SceneCanvas=a;class d extends _{constructor(m={width:0,height:0}){super(m),this.hitCanvas=!0,this.context=new g.HitContext(this),this.setSize(m.width,m.height)}}return en.HitCanvas=d,en}var Ca={},Il;function Oa(){return Il||(Il=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const g=vt(),O=Dt();o.DD={get isDragging(){let L=!1;return o.DD._dragElements.forEach(T=>{T.dragStatus==="dragging"&&(L=!0)}),L},justDragged:!1,get node(){let L;return o.DD._dragElements.forEach(T=>{L=T.node}),L},_dragElements:new Map,_drag(L){const T=[];o.DD._dragElements.forEach((_,a)=>{const{node:d}=_,f=d.getStage();f.setPointersPositions(L),_.pointerId===void 0&&(_.pointerId=O.Util._getFirstPointerId(L));const m=f._changedPointerPositions.find(y=>y.id===_.pointerId);if(m){if(_.dragStatus!=="dragging"){const y=d.dragDistance();if(Math.max(Math.abs(m.x-_.startPointerPos.x),Math.abs(m.y-_.startPointerPos.y))<y||(d.startDrag({evt:L}),!d.isDragging()))return}d._setDragPosition(L,_),T.push(d)}}),T.forEach(_=>{_.fire("dragmove",{type:"dragmove",target:_,evt:L},!0)})},_endDragBefore(L){const T=[];o.DD._dragElements.forEach(_=>{const{node:a}=_,d=a.getStage();if(L&&d.setPointersPositions(L),!d._changedPointerPositions.find(y=>y.id===_.pointerId))return;(_.dragStatus==="dragging"||_.dragStatus==="stopped")&&(o.DD.justDragged=!0,g.Konva._mouseListenClick=!1,g.Konva._touchListenClick=!1,g.Konva._pointerListenClick=!1,_.dragStatus="stopped");const m=_.node.getLayer()||_.node instanceof g.Konva.Stage&&_.node;m&&T.indexOf(m)===-1&&T.push(m)}),T.forEach(_=>{_.draw()})},_endDragAfter(L){o.DD._dragElements.forEach((T,_)=>{T.dragStatus==="stopped"&&T.node.fire("dragend",{type:"dragend",target:T.node,evt:L},!0),T.dragStatus!=="dragging"&&o.DD._dragElements.delete(_)})}},g.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(Ca)),Ca}var wa={},me={},Dl;function Ct(){if(Dl)return me;Dl=1,Object.defineProperty(me,"__esModule",{value:!0}),me.RGBComponent=L,me.alphaComponent=T,me.getNumberValidator=_,me.getNumberOrArrayOfNumbersValidator=a,me.getNumberOrAutoValidator=d,me.getStringValidator=f,me.getStringOrGradientValidator=m,me.getFunctionValidator=y,me.getNumberArrayValidator=w,me.getBooleanValidator=p,me.getComponentValidator=h;const o=vt(),g=Dt();function O(c){return g.Util._isString(c)?'"'+c+'"':Object.prototype.toString.call(c)==="[object Number]"||g.Util._isBoolean(c)?c:Object.prototype.toString.call(c)}function L(c){return c>255?255:c<0?0:Math.round(c)}function T(c){return c>1?1:c<1e-4?1e-4:c}function _(){if(o.Konva.isUnminified)return function(c,S){return g.Util._isNumber(c)||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a number.'),c}}function a(c){if(o.Konva.isUnminified)return function(S,E){let F=g.Util._isNumber(S),u=g.Util._isArray(S)&&S.length==c;return!F&&!u&&g.Util.warn(O(S)+' is a not valid value for "'+E+'" attribute. The value should be a number or Array<number>('+c+")"),S}}function d(){if(o.Konva.isUnminified)return function(c,S){return g.Util._isNumber(c)||c==="auto"||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a number or "auto".'),c}}function f(){if(o.Konva.isUnminified)return function(c,S){return g.Util._isString(c)||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a string.'),c}}function m(){if(o.Konva.isUnminified)return function(c,S){const E=g.Util._isString(c),F=Object.prototype.toString.call(c)==="[object CanvasGradient]"||c&&c.addColorStop;return E||F||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a string or a native gradient.'),c}}function y(){if(o.Konva.isUnminified)return function(c,S){return g.Util._isFunction(c)||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a function.'),c}}function w(){if(o.Konva.isUnminified)return function(c,S){const E=Int8Array?Object.getPrototypeOf(Int8Array):null;return E&&c instanceof E||(g.Util._isArray(c)?c.forEach(function(F){g.Util._isNumber(F)||g.Util.warn('"'+S+'" attribute has non numeric element '+F+". Make sure that all elements are numbers.")}):g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a array of numbers.')),c}}function p(){if(o.Konva.isUnminified)return function(c,S){return c===!0||c===!1||g.Util.warn(O(c)+' is a not valid value for "'+S+'" attribute. The value should be a boolean.'),c}}function h(c){if(o.Konva.isUnminified)return function(S,E){return S==null||g.Util.isObject(S)||g.Util.warn(O(S)+' is a not valid value for "'+E+'" attribute. The value should be an object with properties '+c),S}}return me}var Gl;function St(){return Gl||(Gl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const g=Dt(),O=Ct(),L="get",T="set";o.Factory={addGetterSetter(_,a,d,f,m){o.Factory.addGetter(_,a,d),o.Factory.addSetter(_,a,f,m),o.Factory.addOverloadedGetterSetter(_,a)},addGetter(_,a,d){const f=L+g.Util._capitalize(a);_.prototype[f]=_.prototype[f]||function(){const m=this.attrs[a];return m===void 0?d:m}},addSetter(_,a,d,f){const m=T+g.Util._capitalize(a);_.prototype[m]||o.Factory.overWriteSetter(_,a,d,f)},overWriteSetter(_,a,d,f){const m=T+g.Util._capitalize(a);_.prototype[m]=function(y){return d&&y!==void 0&&y!==null&&(y=d.call(this,y,a)),this._setAttr(a,y),f&&f.call(this),this}},addComponentsGetterSetter(_,a,d,f,m){const y=d.length,w=g.Util._capitalize,p=L+w(a),h=T+w(a);_.prototype[p]=function(){const S={};for(let E=0;E<y;E++){const F=d[E];S[F]=this.getAttr(a+w(F))}return S};const c=(0,O.getComponentValidator)(d);_.prototype[h]=function(S){const E=this.attrs[a];f&&(S=f.call(this,S,a)),c&&c.call(this,S,a);for(const F in S)S.hasOwnProperty(F)&&this._setAttr(a+w(F),S[F]);return S||d.forEach(F=>{this._setAttr(a+w(F),void 0)}),this._fireChangeEvent(a,E,S),m&&m.call(this),this},o.Factory.addOverloadedGetterSetter(_,a)},addOverloadedGetterSetter(_,a){const d=g.Util._capitalize(a),f=T+d,m=L+d;_.prototype[a]=function(){return arguments.length?(this[f](arguments[0]),this):this[m]()}},addDeprecatedGetterSetter(_,a,d,f){g.Util.error("Adding deprecated "+a);const m=L+g.Util._capitalize(a),y=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";_.prototype[m]=function(){g.Util.error(y);const w=this.attrs[a];return w===void 0?d:w},o.Factory.addSetter(_,a,f,function(){g.Util.error(y)}),o.Factory.addOverloadedGetterSetter(_,a)},backCompat(_,a){g.Util.each(a,function(d,f){const m=_.prototype[f],y=L+g.Util._capitalize(d),w=T+g.Util._capitalize(d);function p(){m.apply(this,arguments),g.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}_.prototype[d]=p,_.prototype[y]=p,_.prototype[w]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(wa)),wa}var Ul;function Ut(){if(Ul)return gr;Ul=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Node=void 0;const o=Ji(),g=Oa(),O=St(),L=vt(),T=Dt(),_=Ct(),a="absoluteOpacity",d="allEventListeners",f="absoluteTransform",m="absoluteScale",y="canvas",w="Change",p="children",h="konva",c="listening",S="mouseenter",E="mouseleave",F="pointerenter",u="pointerleave",s="touchenter",v="touchleave",x="set",M="Shape",B=" ",k="stage",R="transform",N="Stage",G="visible",z=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(B);let V=1,j=class La{constructor(C){this._id=V++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(C),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(C){(C===R||C===f)&&this._cache.get(C)?this._cache.get(C).dirty=!0:C?this._cache.delete(C):this._cache.clear()}_getCache(C,P){let I=this._cache.get(C);return(I===void 0||(C===R||C===f)&&I.dirty===!0)&&(I=P.call(this),this._cache.set(C,I)),I}_calculate(C,P,I){if(!this._attachedDepsListeners.get(C)){const b=P.map(U=>U+"Change.konva").join(B);this.on(b,()=>{this._clearCache(C)}),this._attachedDepsListeners.set(C,!0)}return this._getCache(C,I)}_getCanvasCache(){return this._cache.get(y)}_clearSelfAndDescendantCache(C){this._clearCache(C),C===f&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(y)){const{scene:C,filter:P,hit:I,buffer:b}=this._cache.get(y);T.Util.releaseCanvas(C,P,I,b),this._cache.delete(y)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(C){const P=C||{};let I={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let b=Math.ceil(P.width||I.width),U=Math.ceil(P.height||I.height),Y=P.pixelRatio,W=P.x===void 0?Math.floor(I.x):P.x,tt=P.y===void 0?Math.floor(I.y):P.y,it=P.offset||0,Q=P.drawBorder||!1,D=P.hitCanvasPixelRatio||1;if(!b||!U){T.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const X=Math.abs(Math.round(I.x)-W)>.5?1:0,rt=Math.abs(Math.round(I.y)-tt)>.5?1:0;b+=it*2+X,U+=it*2+rt,W-=it,tt-=it;const st=new o.SceneCanvas({pixelRatio:Y,width:b,height:U}),at=new o.SceneCanvas({pixelRatio:Y,width:0,height:0,willReadFrequently:!0}),ft=new o.HitCanvas({pixelRatio:D,width:b,height:U}),ct=st.getContext(),Et=ft.getContext(),gt=new o.SceneCanvas({width:st.width/st.pixelRatio+Math.abs(W),height:st.height/st.pixelRatio+Math.abs(tt),pixelRatio:st.pixelRatio}),Bt=gt.getContext();return ft.isCache=!0,st.isCache=!0,this._cache.delete(y),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(st.getContext()._context.imageSmoothingEnabled=!1,at.getContext()._context.imageSmoothingEnabled=!1),ct.save(),Et.save(),Bt.save(),ct.translate(-W,-tt),Et.translate(-W,-tt),Bt.translate(-W,-tt),gt.x=W,gt.y=tt,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(m),this.drawScene(st,this,gt),this.drawHit(ft,this),this._isUnderCache=!1,ct.restore(),Et.restore(),Q&&(ct.save(),ct.beginPath(),ct.rect(0,0,b,U),ct.closePath(),ct.setAttr("strokeStyle","red"),ct.setAttr("lineWidth",5),ct.stroke(),ct.restore()),this._cache.set(y,{scene:st,filter:at,hit:ft,buffer:gt,x:W,y:tt}),this._requestDraw(),this}isCached(){return this._cache.has(y)}getClientRect(C){throw new Error('abstract "getClientRect" method call')}_transformedRect(C,P){const I=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}];let b=1/0,U=1/0,Y=-1/0,W=-1/0;const tt=this.getAbsoluteTransform(P);return I.forEach(function(it){const Q=tt.point(it);b===void 0&&(b=Y=Q.x,U=W=Q.y),b=Math.min(b,Q.x),U=Math.min(U,Q.y),Y=Math.max(Y,Q.x),W=Math.max(W,Q.y)}),{x:b,y:U,width:Y-b,height:W-U}}_drawCachedSceneCanvas(C){C.save(),C._applyOpacity(this),C._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();C.translate(P.x,P.y);const I=this._getCachedSceneCanvas(),b=I.pixelRatio;C.drawImage(I._canvas,0,0,I.width/b,I.height/b),C.restore()}_drawCachedHitCanvas(C){const P=this._getCanvasCache(),I=P.hit;C.save(),C.translate(P.x,P.y),C.drawImage(I._canvas,0,0,I.width/I.pixelRatio,I.height/I.pixelRatio),C.restore()}_getCachedSceneCanvas(){let C=this.filters(),P=this._getCanvasCache(),I=P.scene,b=P.filter,U=b.getContext(),Y,W,tt,it;if(C){if(!this._filterUpToDate){const Q=I.pixelRatio;b.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(Y=C.length,U.clear(),U.drawImage(I._canvas,0,0,I.getWidth()/Q,I.getHeight()/Q),W=U.getImageData(0,0,b.getWidth(),b.getHeight()),tt=0;tt<Y;tt++){if(it=C[tt],typeof it!="function"){T.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,W),U.putImageData(W,0,0)}}catch(D){T.Util.error("Unable to apply filter. "+D.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return b}return I}on(C,P){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);const I=C.split(B);for(let b=0;b<I.length;b++){const Y=I[b].split("."),W=Y[0],tt=Y[1]||"";this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:tt,handler:P})}return this}off(C,P){let I=(C||"").split(B),b=I.length,U,Y,W,tt,it,Q;if(this._cache&&this._cache.delete(d),!C)for(Y in this.eventListeners)this._off(Y);for(U=0;U<b;U++)if(W=I[U],tt=W.split("."),it=tt[0],Q=tt[1],it)this.eventListeners[it]&&this._off(it,Q,P);else for(Y in this.eventListeners)this._off(Y,Q,P);return this}dispatchEvent(C){const P={target:this,type:C.type,evt:C};return this.fire(C.type,P),this}addEventListener(C,P){return this.on(C,function(I){P.call(this,I.evt)}),this}removeEventListener(C){return this.off(C),this}_delegate(C,P,I){const b=this;this.on(C,function(U){const Y=U.target.findAncestors(P,!0,b);for(let W=0;W<Y.length;W++)U=T.Util.cloneObject(U),U.currentTarget=Y[W],I.call(Y[W],U)})}remove(){return this.isDragging()&&this.stopDrag(),g.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(c)}_remove(){this._clearCaches();const C=this.getParent();C&&C.children&&(C.children.splice(this.index,1),C._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(C){const P="get"+T.Util._capitalize(C);return T.Util._isFunction(this[P])?this[P]():this.attrs[C]}getAncestors(){let C=this.getParent(),P=[];for(;C;)P.push(C),C=C.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(C){return this._batchTransformChanges(()=>{let P,I;if(!C)return this;for(P in C)P!==p&&(I=x+T.Util._capitalize(P),T.Util._isFunction(this[I])?this[I](C[P]):this._setAttr(P,C[P]))}),this}isListening(){return this._getCache(c,this._isListening)}_isListening(C){if(!this.listening())return!1;const I=this.getParent();return I&&I!==C&&this!==C?I._isListening(C):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(C){if(!this.visible())return!1;const I=this.getParent();return I&&I!==C&&this!==C?I._isVisible(C):!0}shouldDrawHit(C,P=!1){if(C)return this._isVisible(C)&&this._isListening(C);const I=this.getLayer();let b=!1;g.DD._dragElements.forEach(Y=>{Y.dragStatus==="dragging"&&(Y.node.nodeType==="Stage"||Y.node.getLayer()===I)&&(b=!0)});const U=!P&&!L.Konva.hitOnDragEnabled&&(b||L.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!U}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let C=this.getDepth(),P=this,I=0,b,U,Y,W;function tt(Q){for(b=[],U=Q.length,Y=0;Y<U;Y++)W=Q[Y],I++,W.nodeType!==M&&(b=b.concat(W.getChildren().slice())),W._id===P._id&&(Y=U);b.length>0&&b[0].getDepth()<=C&&tt(b)}const it=this.getStage();return P.nodeType!==N&&it&&tt(it.getChildren()),I}getDepth(){let C=0,P=this.parent;for(;P;)C++,P=P.parent;return C}_batchTransformChanges(C){this._batchingTransformChange=!0,C(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(R),this._clearSelfAndDescendantCache(f)),this._needClearTransformCache=!1}setPosition(C){return this._batchTransformChanges(()=>{this.x(C.x),this.y(C.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const C=this.getStage();if(!C)return null;const P=C.getPointerPosition();if(!P)return null;const I=this.getAbsoluteTransform().copy();return I.invert(),I.point(P)}getAbsolutePosition(C){let P=!1,I=this.parent;for(;I;){if(I.isCached()){P=!0;break}I=I.parent}P&&!C&&(C=!0);const b=this.getAbsoluteTransform(C).getMatrix(),U=new T.Transform,Y=this.offset();return U.m=b.slice(),U.translate(Y.x,Y.y),U.getTranslation()}setAbsolutePosition(C){const{x:P,y:I,...b}=this._clearTransform();this.attrs.x=P,this.attrs.y=I,this._clearCache(R);const U=this._getAbsoluteTransform().copy();return U.invert(),U.translate(C.x,C.y),C={x:this.attrs.x+U.getTranslation().x,y:this.attrs.y+U.getTranslation().y},this._setTransform(b),this.setPosition({x:C.x,y:C.y}),this._clearCache(R),this._clearSelfAndDescendantCache(f),this}_setTransform(C){let P;for(P in C)this.attrs[P]=C[P]}_clearTransform(){const C={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,C}move(C){let P=C.x,I=C.y,b=this.x(),U=this.y();return P!==void 0&&(b+=P),I!==void 0&&(U+=I),this.setPosition({x:b,y:U}),this}_eachAncestorReverse(C,P){let I=[],b=this.getParent(),U,Y;if(!(P&&P._id===this._id)){for(I.unshift(this);b&&(!P||b._id!==P._id);)I.unshift(b),b=b.parent;for(U=I.length,Y=0;Y<U;Y++)C(I[Y])}}rotate(C){return this.rotation(this.rotation()+C),this}moveToTop(){if(!this.parent)return T.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const C=this.index,P=this.parent.getChildren().length;return C<P-1?(this.parent.children.splice(C,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return T.Util.warn("Node has no parent. moveUp function is ignored."),!1;const C=this.index,P=this.parent.getChildren().length;return C<P-1?(this.parent.children.splice(C,1),this.parent.children.splice(C+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return T.Util.warn("Node has no parent. moveDown function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.splice(C-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return T.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(C){if(!this.parent)return T.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(C<0||C>=this.parent.children.length)&&T.Util.warn("Unexpected value "+C+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(C,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let C=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(C*=P.getAbsoluteOpacity()),C}moveTo(C){return this.getParent()!==C&&(this._remove(),C.add(this)),this}toObject(){let C=this.getAttrs(),P,I,b,U,Y;const W={attrs:{},className:this.getClassName()};for(P in C)I=C[P],Y=T.Util.isObject(I)&&!T.Util._isPlainObject(I)&&!T.Util._isArray(I),!Y&&(b=typeof this[P]=="function"&&this[P],delete C[P],U=b?b.call(this):null,C[P]=I,U!==I&&(W.attrs[P]=I));return T.Util._prepareToStringify(W)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(C,P,I){const b=[];P&&this._isMatch(C)&&b.push(this);let U=this.parent;for(;U;){if(U===I)return b;U._isMatch(C)&&b.push(U),U=U.parent}return b}isAncestorOf(C){return!1}findAncestor(C,P,I){return this.findAncestors(C,P,I)[0]}_isMatch(C){if(!C)return!1;if(typeof C=="function")return C(this);let P=C.replace(/ /g,"").split(","),I=P.length,b,U;for(b=0;b<I;b++)if(U=P[b],T.Util.isValidSelector(U)||(T.Util.warn('Selector "'+U+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),T.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),T.Util.warn("Konva is awesome, right?")),U.charAt(0)==="#"){if(this.id()===U.slice(1))return!0}else if(U.charAt(0)==="."){if(this.hasName(U.slice(1)))return!0}else if(this.className===U||this.nodeType===U)return!0;return!1}getLayer(){const C=this.getParent();return C?C.getLayer():null}getStage(){return this._getCache(k,this._getStage)}_getStage(){const C=this.getParent();return C?C.getStage():null}fire(C,P={},I){return P.target=P.target||this,I?this._fireAndBubble(C,P):this._fire(C,P),this}getAbsoluteTransform(C){return C?this._getAbsoluteTransform(C):this._getCache(f,this._getAbsoluteTransform)}_getAbsoluteTransform(C){let P;if(C)return P=new T.Transform,this._eachAncestorReverse(function(I){const b=I.transformsEnabled();b==="all"?P.multiply(I.getTransform()):b==="position"&&P.translate(I.x()-I.offsetX(),I.y()-I.offsetY())},C),P;{P=this._cache.get(f)||new T.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const I=this.transformsEnabled();if(I==="all")P.multiply(this.getTransform());else if(I==="position"){const b=this.attrs.x||0,U=this.attrs.y||0,Y=this.attrs.offsetX||0,W=this.attrs.offsetY||0;P.translate(b-Y,U-W)}return P.dirty=!1,P}}getAbsoluteScale(C){let P=this;for(;P;)P._isUnderCache&&(C=P),P=P.getParent();const b=this.getAbsoluteTransform(C).decompose();return{x:b.scaleX,y:b.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(R,this._getTransform)}_getTransform(){var C,P;const I=this._cache.get(R)||new T.Transform;I.reset();const b=this.x(),U=this.y(),Y=L.Konva.getAngle(this.rotation()),W=(C=this.attrs.scaleX)!==null&&C!==void 0?C:1,tt=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,it=this.attrs.skewX||0,Q=this.attrs.skewY||0,D=this.attrs.offsetX||0,X=this.attrs.offsetY||0;return(b!==0||U!==0)&&I.translate(b,U),Y!==0&&I.rotate(Y),(it!==0||Q!==0)&&I.skew(it,Q),(W!==1||tt!==1)&&I.scale(W,tt),(D!==0||X!==0)&&I.translate(-1*D,-1*X),I.dirty=!1,I}clone(C){let P=T.Util.cloneObject(this.attrs),I,b,U,Y,W;for(I in C)P[I]=C[I];const tt=new this.constructor(P);for(I in this.eventListeners)for(b=this.eventListeners[I],U=b.length,Y=0;Y<U;Y++)W=b[Y],W.name.indexOf(h)<0&&(tt.eventListeners[I]||(tt.eventListeners[I]=[]),tt.eventListeners[I].push(W));return tt}_toKonvaCanvas(C){C=C||{};const P=this.getClientRect(),I=this.getStage(),b=C.x!==void 0?C.x:Math.floor(P.x),U=C.y!==void 0?C.y:Math.floor(P.y),Y=C.pixelRatio||1,W=new o.SceneCanvas({width:C.width||Math.ceil(P.width)||(I?I.width():0),height:C.height||Math.ceil(P.height)||(I?I.height():0),pixelRatio:Y}),tt=W.getContext(),it=new o.SceneCanvas({width:W.width/W.pixelRatio+Math.abs(b),height:W.height/W.pixelRatio+Math.abs(U),pixelRatio:W.pixelRatio});return C.imageSmoothingEnabled===!1&&(tt._context.imageSmoothingEnabled=!1),tt.save(),(b||U)&&tt.translate(-1*b,-1*U),this.drawScene(W,void 0,it),tt.restore(),W}toCanvas(C){return this._toKonvaCanvas(C)._canvas}toDataURL(C){C=C||{};const P=C.mimeType||null,I=C.quality||null,b=this._toKonvaCanvas(C).toDataURL(P,I);return C.callback&&C.callback(b),b}toImage(C){return new Promise((P,I)=>{try{const b=C==null?void 0:C.callback;b&&delete C.callback,T.Util._urlToImage(this.toDataURL(C),function(U){P(U),b==null||b(U)})}catch(b){I(b)}})}toBlob(C){return new Promise((P,I)=>{try{const b=C==null?void 0:C.callback;b&&delete C.callback,this.toCanvas(C).toBlob(U=>{P(U),b==null||b(U)},C==null?void 0:C.mimeType,C==null?void 0:C.quality)}catch(b){I(b)}})}setSize(C){return this.width(C.width),this.height(C.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():L.Konva.dragDistance}_off(C,P,I){let b=this.eventListeners[C],U,Y,W;for(U=0;U<b.length;U++)if(Y=b[U].name,W=b[U].handler,(Y!=="konva"||P==="konva")&&(!P||Y===P)&&(!I||I===W)){if(b.splice(U,1),b.length===0){delete this.eventListeners[C];break}U--}}_fireChangeEvent(C,P,I){this._fire(C+w,{oldVal:P,newVal:I})}addName(C){if(!this.hasName(C)){const P=this.name(),I=P?P+" "+C:C;this.name(I)}return this}hasName(C){if(!C)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(C)!==-1:!1}removeName(C){const P=(this.name()||"").split(/\s/g),I=P.indexOf(C);return I!==-1&&(P.splice(I,1),this.name(P.join(" "))),this}setAttr(C,P){const I=this[x+T.Util._capitalize(C)];return T.Util._isFunction(I)?I.call(this,P):this._setAttr(C,P),this}_requestDraw(){if(L.Konva.autoDrawEnabled){const C=this.getLayer()||this.getStage();C==null||C.batchDraw()}}_setAttr(C,P){const I=this.attrs[C];I===P&&!T.Util.isObject(P)||(P==null?delete this.attrs[C]:this.attrs[C]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(C,I,P),this._requestDraw())}_setComponentAttr(C,P,I){let b;I!==void 0&&(b=this.attrs[C],b||(this.attrs[C]=this.getAttr(C)),this.attrs[C][P]=I,this._fireChangeEvent(C,b,I))}_fireAndBubble(C,P,I){P&&this.nodeType===M&&(P.target=this);const b=[S,E,F,u,s,v];if(!(b.indexOf(C)!==-1&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I))){this._fire(C,P);const Y=b.indexOf(C)!==-1&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!Y&&(I&&I.parent?this._fireAndBubble.call(this.parent,C,P,I):this._fireAndBubble.call(this.parent,C,P))}}_getProtoListeners(C){var P,I,b;const U=(P=this._cache.get(d))!==null&&P!==void 0?P:{};let Y=U==null?void 0:U[C];if(Y===void 0){Y=[];let W=Object.getPrototypeOf(this);for(;W;){const tt=(b=(I=W.eventListeners)===null||I===void 0?void 0:I[C])!==null&&b!==void 0?b:[];Y.push(...tt),W=Object.getPrototypeOf(W)}U[C]=Y,this._cache.set(d,U)}return Y}_fire(C,P){P=P||{},P.currentTarget=this,P.type=C;const I=this._getProtoListeners(C);if(I)for(let U=0;U<I.length;U++)I[U].handler.call(this,P);const b=this.eventListeners[C];if(b)for(let U=0;U<b.length;U++)b[U].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(C){const P=C?C.pointerId:void 0,I=this.getStage(),b=this.getAbsolutePosition();if(!I)return;const U=I._getPointerById(P)||I._changedPointerPositions[0]||b;g.DD._dragElements.set(this._id,{node:this,startPointerPos:U,offset:{x:U.x-b.x,y:U.y-b.y},dragStatus:"ready",pointerId:P})}startDrag(C,P=!0){g.DD._dragElements.has(this._id)||this._createDragElement(C);const I=g.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:C&&C.evt},P)}_setDragPosition(C,P){const I=this.getStage()._getPointerById(P.pointerId);if(!I)return;let b={x:I.x-P.offset.x,y:I.y-P.offset.y};const U=this.dragBoundFunc();if(U!==void 0){const Y=U.call(this,b,C);Y?b=Y:T.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==b.x||this._lastPos.y!==b.y)&&(this.setAbsolutePosition(b),this._requestDraw()),this._lastPos=b}stopDrag(C){const P=g.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),g.DD._endDragBefore(C),g.DD._endDragAfter(C)}setDraggable(C){this._setAttr("draggable",C),this._dragChange()}isDragging(){const C=g.DD._dragElements.get(this._id);return C?C.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(C){if(!(!(C.evt.button!==void 0)||L.Konva.dragButtons.indexOf(C.evt.button)>=0)||this.isDragging())return;let b=!1;g.DD._dragElements.forEach(U=>{this.isAncestorOf(U.node)&&(b=!0)}),b||this._createDragElement(C)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=g.DD._dragElements.get(this._id),I=P&&P.dragStatus==="dragging",b=P&&P.dragStatus==="ready";I?this.stopDrag():b&&g.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(C={x:0,y:0}){const P=this.getStage();if(!P)return!1;const I={x:-C.x,y:-C.y,width:P.width()+2*C.x,height:P.height()+2*C.y};return T.Util.haveIntersection(I,this.getClientRect())}static create(C,P){return T.Util._isString(C)&&(C=JSON.parse(C)),this._createNode(C,P)}static _createNode(C,P){let I=La.prototype.getClassName.call(C),b=C.children,U,Y,W;P&&(C.attrs.container=P),L.Konva[I]||(T.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");const tt=L.Konva[I];if(U=new tt(C.attrs),b)for(Y=b.length,W=0;W<Y;W++)U.add(La._createNode(b[W]));return U}};gr.Node=j,j.prototype.nodeType="Node",j.prototype._attrsAffectingSize=[],j.prototype.eventListeners={},j.prototype.on.call(j.prototype,z,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(R),this._clearSelfAndDescendantCache(f)}),j.prototype.on.call(j.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),j.prototype.on.call(j.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(c)}),j.prototype.on.call(j.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const H=O.Factory.addGetterSetter;return H(j,"zIndex"),H(j,"absolutePosition"),H(j,"position"),H(j,"x",0,(0,_.getNumberValidator)()),H(j,"y",0,(0,_.getNumberValidator)()),H(j,"globalCompositeOperation","source-over",(0,_.getStringValidator)()),H(j,"opacity",1,(0,_.getNumberValidator)()),H(j,"name","",(0,_.getStringValidator)()),H(j,"id","",(0,_.getStringValidator)()),H(j,"rotation",0,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(j,"scale",["x","y"]),H(j,"scaleX",1,(0,_.getNumberValidator)()),H(j,"scaleY",1,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(j,"skew",["x","y"]),H(j,"skewX",0,(0,_.getNumberValidator)()),H(j,"skewY",0,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(j,"offset",["x","y"]),H(j,"offsetX",0,(0,_.getNumberValidator)()),H(j,"offsetY",0,(0,_.getNumberValidator)()),H(j,"dragDistance",void 0,(0,_.getNumberValidator)()),H(j,"width",0,(0,_.getNumberValidator)()),H(j,"height",0,(0,_.getNumberValidator)()),H(j,"listening",!0,(0,_.getBooleanValidator)()),H(j,"preventDefault",!0,(0,_.getBooleanValidator)()),H(j,"filters",void 0,function(et){return this._filterUpToDate=!1,et}),H(j,"visible",!0,(0,_.getBooleanValidator)()),H(j,"transformsEnabled","all",(0,_.getStringValidator)()),H(j,"size"),H(j,"dragBoundFunc"),H(j,"draggable",!1,(0,_.getBooleanValidator)()),O.Factory.backCompat(j,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),gr}var pr={},zl;function Zi(){if(zl)return pr;zl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Container=void 0;const o=St(),g=Ut(),O=Ct();let L=class extends g.Node{constructor(){super(...arguments),this.children=[]}getChildren(_){const a=this.children||[];return _?a.filter(_):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.destroy()}),this.children=[],this._requestDraw(),this}add(..._){if(_.length===0)return this;if(_.length>1){for(let d=0;d<_.length;d++)this.add(_[d]);return this}const a=_[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(_){return this._generalFind(_,!1)}findOne(_){const a=this._generalFind(_,!0);return a.length>0?a[0]:void 0}_generalFind(_,a){const d=[];return this._descendants(f=>{const m=f._isMatch(_);return m&&d.push(f),!!(m&&a)}),d}_descendants(_){let a=!1;const d=this.getChildren();for(const f of d){if(a=_(f),a)return!0;if(f.hasChildren()&&(a=f._descendants(_),a))return!0}return!1}toObject(){const _=g.Node.prototype.toObject.call(this);return _.children=[],this.getChildren().forEach(a=>{_.children.push(a.toObject())}),_}isAncestorOf(_){let a=_.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(_){const a=g.Node.prototype.clone.call(this,_);return this.getChildren().forEach(function(d){a.add(d.clone())}),a}getAllIntersections(_){const a=[];return this.find("Shape").forEach(d=>{d.isVisible()&&d.intersects(_)&&a.push(d)}),a}_clearSelfAndDescendantCache(_){var a;super._clearSelfAndDescendantCache(_),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(d){d._clearSelfAndDescendantCache(_)}))}_setChildrenIndices(){var _;(_=this.children)===null||_===void 0||_.forEach(function(a,d){a.index=d}),this._requestDraw()}drawScene(_,a,d){const f=this.getLayer(),m=_||f&&f.getCanvas(),y=m&&m.getContext(),w=this._getCanvasCache(),p=w&&w.scene,h=m&&m.isCache;if(!this.isVisible()&&!h)return this;if(p){y.save();const c=this.getAbsoluteTransform(a).getMatrix();y.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(y),y.restore()}else this._drawChildren("drawScene",m,a,d);return this}drawHit(_,a){if(!this.shouldDrawHit(a))return this;const d=this.getLayer(),f=_||d&&d.hitCanvas,m=f&&f.getContext(),y=this._getCanvasCache();if(y&&y.hit){m.save();const p=this.getAbsoluteTransform(a).getMatrix();m.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(m),m.restore()}else this._drawChildren("drawHit",f,a);return this}_drawChildren(_,a,d,f){var m;const y=a&&a.getContext(),w=this.clipWidth(),p=this.clipHeight(),h=this.clipFunc(),c=typeof w=="number"&&typeof p=="number"||h,S=d===this;if(c){y.save();const F=this.getAbsoluteTransform(d);let u=F.getMatrix();y.transform(u[0],u[1],u[2],u[3],u[4],u[5]),y.beginPath();let s;if(h)s=h.call(this,y,this);else{const v=this.clipX(),x=this.clipY();y.rect(v||0,x||0,w,p)}y.clip.apply(y,s),u=F.copy().invert().getMatrix(),y.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const E=!S&&this.globalCompositeOperation()!=="source-over"&&_==="drawScene";E&&(y.save(),y._applyGlobalCompositeOperation(this)),(m=this.children)===null||m===void 0||m.forEach(function(F){F[_](a,d,f)}),E&&y.restore(),c&&y.restore()}getClientRect(_={}){var a;const d=_.skipTransform,f=_.relativeTo;let m,y,w,p,h={x:1/0,y:1/0,width:0,height:0};const c=this;(a=this.children)===null||a===void 0||a.forEach(function(F){if(!F.visible())return;const u=F.getClientRect({relativeTo:c,skipShadow:_.skipShadow,skipStroke:_.skipStroke});u.width===0&&u.height===0||(m===void 0?(m=u.x,y=u.y,w=u.x+u.width,p=u.y+u.height):(m=Math.min(m,u.x),y=Math.min(y,u.y),w=Math.max(w,u.x+u.width),p=Math.max(p,u.y+u.height)))});const S=this.find("Shape");let E=!1;for(let F=0;F<S.length;F++)if(S[F]._isVisible(this)){E=!0;break}return E&&m!==void 0?h={x:m,y,width:w-m,height:p-y}:h={x:0,y:0,width:0,height:0},d?h:this._transformedRect(h,f)}};return pr.Container=L,o.Factory.addComponentsGetterSetter(L,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(L,"clipX",void 0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(L,"clipY",void 0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(L,"clipWidth",void 0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(L,"clipHeight",void 0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(L,"clipFunc"),pr}var xa={},pn={},Bl;function Zu(){if(Bl)return pn;Bl=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.getCapturedShape=L,pn.createEvent=T,pn.hasPointerCapture=_,pn.setPointerCapture=a,pn.releaseCapture=d;const o=vt(),g=new Map,O=o.Konva._global.PointerEvent!==void 0;function L(f){return g.get(f)}function T(f){return{evt:f,pointerId:f.pointerId}}function _(f,m){return g.get(f)===m}function a(f,m){d(f),m.getStage()&&(g.set(f,m),O&&m._fire("gotpointercapture",T(new PointerEvent("gotpointercapture"))))}function d(f,m){const y=g.get(f);if(!y)return;const w=y.getStage();w&&w.content,g.delete(f),O&&y._fire("lostpointercapture",T(new PointerEvent("lostpointercapture")))}return pn}var Hl;function bc(){return Hl||(Hl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const g=Dt(),O=St(),L=Zi(),T=vt(),_=Ji(),a=Oa(),d=vt(),f=Zu(),m="Stage",y="string",w="px",p="mouseout",h="mouseleave",c="mouseover",S="mouseenter",E="mousemove",F="mousedown",u="mouseup",s="pointermove",v="pointerdown",x="pointerup",M="pointercancel",B="lostpointercapture",k="pointerout",R="pointerleave",N="pointerover",G="pointerenter",z="contextmenu",V="touchstart",j="touchend",H="touchmove",et="touchcancel",C="wheel",P=5,I=[[S,"_pointerenter"],[F,"_pointerdown"],[E,"_pointermove"],[u,"_pointerup"],[h,"_pointerleave"],[V,"_pointerdown"],[H,"_pointermove"],[j,"_pointerup"],[et,"_pointercancel"],[c,"_pointerover"],[C,"_wheel"],[z,"_contextmenu"],[v,"_pointerdown"],[s,"_pointermove"],[x,"_pointerup"],[M,"_pointercancel"],[R,"_pointerleave"],[B,"_lostpointercapture"]],b={mouse:{[k]:p,[R]:h,[N]:c,[G]:S,[s]:E,[v]:F,[x]:u,[M]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[R]:"touchleave",[N]:"touchover",[G]:"touchenter",[s]:H,[v]:V,[x]:j,[M]:et,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[R]:R,[N]:N,[G]:G,[s]:s,[v]:v,[x]:x,[M]:M,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},U=Q=>Q.indexOf("pointer")>=0?"pointer":Q.indexOf("touch")>=0?"touch":"mouse",Y=Q=>{const D=U(Q);if(D==="pointer")return T.Konva.pointerEventsEnabled&&b.pointer;if(D==="touch")return b.touch;if(D==="mouse")return b.mouse};function W(Q={}){return(Q.clipFunc||Q.clipWidth||Q.clipHeight)&&g.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Q}const tt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class it extends L.Container{constructor(D){super(W(D)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(D){const X=D.getType()==="Layer",rt=D.getType()==="FastLayer";X||rt||g.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const D=this.visible()?"":"none";this.content.style.display=D}setContainer(D){if(typeof D===y){let X;if(D.charAt(0)==="."){const rt=D.slice(1);D=document.getElementsByClassName(rt)[0]}else D.charAt(0)!=="#"?X=D:X=D.slice(1),D=document.getElementById(X);if(!D)throw"Can not find container in document with id "+X}return this._setAttr("container",D),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),D.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const D=this.children,X=D.length;for(let rt=0;rt<X;rt++)D[rt].clear();return this}clone(D){return D||(D={}),D.container=typeof document<"u"&&document.createElement("div"),L.Container.prototype.clone.call(this,D)}destroy(){super.destroy();const D=this.content;D&&g.Util._isInDocument(D)&&this.container().removeChild(D);const X=o.stages.indexOf(this);return X>-1&&o.stages.splice(X,1),g.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const D=this._pointerPositions[0]||this._changedPointerPositions[0];return D?{x:D.x,y:D.y}:(g.Util.warn(tt),null)}_getPointerById(D){return this._pointerPositions.find(X=>X.id===D)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(D){D=D||{},D.x=D.x||0,D.y=D.y||0,D.width=D.width||this.width(),D.height=D.height||this.height();const X=new _.SceneCanvas({width:D.width,height:D.height,pixelRatio:D.pixelRatio||1}),rt=X.getContext()._context,st=this.children;return(D.x||D.y)&&rt.translate(-1*D.x,-1*D.y),st.forEach(function(at){if(!at.isVisible())return;const ft=at._toKonvaCanvas(D);rt.drawImage(ft._canvas,D.x,D.y,ft.getWidth()/ft.getPixelRatio(),ft.getHeight()/ft.getPixelRatio())}),X}getIntersection(D){if(!D)return null;const X=this.children,rt=X.length,st=rt-1;for(let at=st;at>=0;at--){const ft=X[at].getIntersection(D);if(ft)return ft}return null}_resizeDOM(){const D=this.width(),X=this.height();this.content&&(this.content.style.width=D+w,this.content.style.height=X+w),this.bufferCanvas.setSize(D,X),this.bufferHitCanvas.setSize(D,X),this.children.forEach(rt=>{rt.setSize({width:D,height:X}),rt.draw()})}add(D,...X){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.add(arguments[st]);return this}super.add(D);const rt=this.children.length;return rt>P&&g.Util.warn("The stage has "+rt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),D.setSize({width:this.width(),height:this.height()}),D.draw(),T.Konva.isBrowser&&this.content.appendChild(D.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(D){return f.hasPointerCapture(D,this)}setPointerCapture(D){f.setPointerCapture(D,this)}releaseCapture(D){f.releaseCapture(D,this)}getLayers(){return this.children}_bindContentEvents(){T.Konva.isBrowser&&I.forEach(([D,X])=>{this.content.addEventListener(D,rt=>{this[X](rt)},{passive:!1})})}_pointerenter(D){this.setPointersPositions(D);const X=Y(D.type);X&&this._fire(X.pointerenter,{evt:D,target:this,currentTarget:this})}_pointerover(D){this.setPointersPositions(D);const X=Y(D.type);X&&this._fire(X.pointerover,{evt:D,target:this,currentTarget:this})}_getTargetShape(D){let X=this[D+"targetShape"];return X&&!X.getStage()&&(X=null),X}_pointerleave(D){const X=Y(D.type),rt=U(D.type);if(!X)return;this.setPointersPositions(D);const st=this._getTargetShape(rt),at=!(T.Konva.isDragging()||T.Konva.isTransforming())||T.Konva.hitOnDragEnabled;st&&at?(st._fireAndBubble(X.pointerout,{evt:D}),st._fireAndBubble(X.pointerleave,{evt:D}),this._fire(X.pointerleave,{evt:D,target:this,currentTarget:this}),this[rt+"targetShape"]=null):at&&(this._fire(X.pointerleave,{evt:D,target:this,currentTarget:this}),this._fire(X.pointerout,{evt:D,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(D){const X=Y(D.type),rt=U(D.type);if(!X)return;this.setPointersPositions(D);let st=!1;this._changedPointerPositions.forEach(at=>{const ft=this.getIntersection(at);if(a.DD.justDragged=!1,T.Konva["_"+rt+"ListenClick"]=!0,!ft||!ft.isListening()){this[rt+"ClickStartShape"]=void 0;return}T.Konva.capturePointerEventsEnabled&&ft.setPointerCapture(at.id),this[rt+"ClickStartShape"]=ft,ft._fireAndBubble(X.pointerdown,{evt:D,pointerId:at.id}),st=!0;const ct=D.type.indexOf("touch")>=0;ft.preventDefault()&&D.cancelable&&ct&&D.preventDefault()}),st||this._fire(X.pointerdown,{evt:D,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(D){const X=Y(D.type),rt=U(D.type);if(!X||(T.Konva.isDragging()&&a.DD.node.preventDefault()&&D.cancelable&&D.preventDefault(),this.setPointersPositions(D),!(!(T.Konva.isDragging()||T.Konva.isTransforming())||T.Konva.hitOnDragEnabled)))return;const at={};let ft=!1;const ct=this._getTargetShape(rt);this._changedPointerPositions.forEach(Et=>{const gt=f.getCapturedShape(Et.id)||this.getIntersection(Et),Bt=Et.id,kt={evt:D,pointerId:Bt},bt=ct!==gt;if(bt&&ct&&(ct._fireAndBubble(X.pointerout,{...kt},gt),ct._fireAndBubble(X.pointerleave,{...kt},gt)),gt){if(at[gt._id])return;at[gt._id]=!0}gt&&gt.isListening()?(ft=!0,bt&&(gt._fireAndBubble(X.pointerover,{...kt},ct),gt._fireAndBubble(X.pointerenter,{...kt},ct),this[rt+"targetShape"]=gt),gt._fireAndBubble(X.pointermove,{...kt})):ct&&(this._fire(X.pointerover,{evt:D,target:this,currentTarget:this,pointerId:Bt}),this[rt+"targetShape"]=null)}),ft||this._fire(X.pointermove,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(D){const X=Y(D.type),rt=U(D.type);if(!X)return;this.setPointersPositions(D);const st=this[rt+"ClickStartShape"],at=this[rt+"ClickEndShape"],ft={};let ct=!1;this._changedPointerPositions.forEach(Et=>{const gt=f.getCapturedShape(Et.id)||this.getIntersection(Et);if(gt){if(gt.releaseCapture(Et.id),ft[gt._id])return;ft[gt._id]=!0}const Bt=Et.id,kt={evt:D,pointerId:Bt};let bt=!1;T.Konva["_"+rt+"InDblClickWindow"]?(bt=!0,clearTimeout(this[rt+"DblTimeout"])):a.DD.justDragged||(T.Konva["_"+rt+"InDblClickWindow"]=!0,clearTimeout(this[rt+"DblTimeout"])),this[rt+"DblTimeout"]=setTimeout(function(){T.Konva["_"+rt+"InDblClickWindow"]=!1},T.Konva.dblClickWindow),gt&&gt.isListening()?(ct=!0,this[rt+"ClickEndShape"]=gt,gt._fireAndBubble(X.pointerup,{...kt}),T.Konva["_"+rt+"ListenClick"]&&st&&st===gt&&(gt._fireAndBubble(X.pointerclick,{...kt}),bt&&at&&at===gt&&gt._fireAndBubble(X.pointerdblclick,{...kt}))):(this[rt+"ClickEndShape"]=null,T.Konva["_"+rt+"ListenClick"]&&this._fire(X.pointerclick,{evt:D,target:this,currentTarget:this,pointerId:Bt}),bt&&this._fire(X.pointerdblclick,{evt:D,target:this,currentTarget:this,pointerId:Bt}))}),ct||this._fire(X.pointerup,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),T.Konva["_"+rt+"ListenClick"]=!1,D.cancelable&&rt!=="touch"&&rt!=="pointer"&&D.preventDefault()}_contextmenu(D){this.setPointersPositions(D);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(z,{evt:D}):this._fire(z,{evt:D,target:this,currentTarget:this})}_wheel(D){this.setPointersPositions(D);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(C,{evt:D}):this._fire(C,{evt:D,target:this,currentTarget:this})}_pointercancel(D){this.setPointersPositions(D);const X=f.getCapturedShape(D.pointerId)||this.getIntersection(this.getPointerPosition());X&&X._fireAndBubble(x,f.createEvent(D)),f.releaseCapture(D.pointerId)}_lostpointercapture(D){f.releaseCapture(D.pointerId)}setPointersPositions(D){const X=this._getContentPosition();let rt=null,st=null;D=D||window.event,D.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(D.touches,at=>{this._pointerPositions.push({id:at.identifier,x:(at.clientX-X.left)/X.scaleX,y:(at.clientY-X.top)/X.scaleY})}),Array.prototype.forEach.call(D.changedTouches||D.touches,at=>{this._changedPointerPositions.push({id:at.identifier,x:(at.clientX-X.left)/X.scaleX,y:(at.clientY-X.top)/X.scaleY})})):(rt=(D.clientX-X.left)/X.scaleX,st=(D.clientY-X.top)/X.scaleY,this.pointerPos={x:rt,y:st},this._pointerPositions=[{x:rt,y:st,id:g.Util._getFirstPointerId(D)}],this._changedPointerPositions=[{x:rt,y:st,id:g.Util._getFirstPointerId(D)}])}_setPointerPosition(D){g.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(D)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const D=this.content.getBoundingClientRect();return{top:D.top,left:D.left,scaleX:D.width/this.content.clientWidth||1,scaleY:D.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new _.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!T.Konva.isBrowser)return;const D=this.container();if(!D)throw"Stage has no container. A container is required.";D.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),D.appendChild(this.content),this._resizeDOM()}cache(){return g.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(D){D.batchDraw()}),this}}o.Stage=it,it.prototype.nodeType=m,(0,d._registerNode)(it),O.Factory.addGetterSetter(it,"container"),T.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(Q=>{Q.batchDraw()})})}(xa)),xa}var mr={},Pa={},Vl;function Xt(){return Vl||(Vl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const g=vt(),O=Dt(),L=St(),T=Ut(),_=Ct(),a=vt(),d=Zu(),f="hasShadow",m="shadowRGBA",y="patternImage",w="linearGradient",p="radialGradient";let h;function c(){return h||(h=O.Util.createCanvasElement().getContext("2d"),h)}o.shapes={};function S(R){const N=this.attrs.fillRule;N?R.fill(N):R.fill()}function E(R){R.stroke()}function F(R){const N=this.attrs.fillRule;N?R.fill(N):R.fill()}function u(R){R.stroke()}function s(){this._clearCache(f)}function v(){this._clearCache(m)}function x(){this._clearCache(y)}function M(){this._clearCache(w)}function B(){this._clearCache(p)}class k extends T.Node{constructor(N){super(N);let G;for(;G=O.Util.getRandomColor(),!(G&&!(G in o.shapes)););this.colorKey=G,o.shapes[G]=this}getContext(){return O.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return O.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(y,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const G=c().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(G&&G.setTransform){const z=new O.Transform;z.translate(this.fillPatternX(),this.fillPatternY()),z.rotate(g.Konva.getAngle(this.fillPatternRotation())),z.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),z.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const V=z.getMatrix(),j=typeof DOMMatrix>"u"?{a:V[0],b:V[1],c:V[2],d:V[3],e:V[4],f:V[5]}:new DOMMatrix(V);G.setTransform(j)}return G}}_getLinearGradient(){return this._getCache(w,this.__getLinearGradient)}__getLinearGradient(){const N=this.fillLinearGradientColorStops();if(N){const G=c(),z=this.fillLinearGradientStartPoint(),V=this.fillLinearGradientEndPoint(),j=G.createLinearGradient(z.x,z.y,V.x,V.y);for(let H=0;H<N.length;H+=2)j.addColorStop(N[H],N[H+1]);return j}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const N=this.fillRadialGradientColorStops();if(N){const G=c(),z=this.fillRadialGradientStartPoint(),V=this.fillRadialGradientEndPoint(),j=G.createRadialGradient(z.x,z.y,this.fillRadialGradientStartRadius(),V.x,V.y,this.fillRadialGradientEndRadius());for(let H=0;H<N.length;H+=2)j.addColorStop(N[H],N[H+1]);return j}}getShadowRGBA(){return this._getCache(m,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const N=O.Util.colorToRGBA(this.shadowColor());if(N)return"rgba("+N.r+","+N.g+","+N.b+","+N.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const N=this.hitStrokeWidth();return N==="auto"?this.hasStroke():this.strokeEnabled()&&!!N}intersects(N){const G=this.getStage();if(!G)return!1;const z=G.bufferHitCanvas;return z.getContext().clear(),this.drawHit(z,void 0,!0),z.context.getImageData(Math.round(N.x),Math.round(N.y),1,1).data[3]>0}destroy(){return T.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(N){var G;if(!((G=this.attrs.perfectDrawEnabled)!==null&&G!==void 0?G:!0))return!1;const V=N||this.hasFill(),j=this.hasStroke(),H=this.getAbsoluteOpacity()!==1;if(V&&j&&H)return!0;const et=this.hasShadow(),C=this.shadowForStrokeEnabled();return!!(V&&j&&et&&C)}setStrokeHitEnabled(N){O.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),N?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const N=this.size();return{x:this._centroid?-N.width/2:0,y:this._centroid?-N.height/2:0,width:N.width,height:N.height}}getClientRect(N={}){let G=!1,z=this.getParent();for(;z;){if(z.isCached()){G=!0;break}z=z.getParent()}const V=N.skipTransform,j=N.relativeTo||G&&this.getStage()||void 0,H=this.getSelfRect(),C=!N.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,P=H.width+C,I=H.height+C,b=!N.skipShadow&&this.hasShadow(),U=b?this.shadowOffsetX():0,Y=b?this.shadowOffsetY():0,W=P+Math.abs(U),tt=I+Math.abs(Y),it=b&&this.shadowBlur()||0,Q=W+it*2,D=tt+it*2,X={width:Q,height:D,x:-(C/2+it)+Math.min(U,0)+H.x,y:-(C/2+it)+Math.min(Y,0)+H.y};return V?X:this._transformedRect(X,j)}drawScene(N,G,z){const V=this.getLayer(),j=N||V.getCanvas(),H=j.getContext(),et=this._getCanvasCache(),C=this.getSceneFunc(),P=this.hasShadow();let I;const b=G===this;if(!this.isVisible()&&!b)return this;if(et){H.save();const U=this.getAbsoluteTransform(G).getMatrix();return H.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(H),H.restore(),this}if(!C)return this;if(H.save(),this._useBufferCanvas()){I=this.getStage();const U=z||I.bufferCanvas,Y=U.getContext();Y.clear(),Y.save(),Y._applyLineJoin(this);const W=this.getAbsoluteTransform(G).getMatrix();Y.transform(W[0],W[1],W[2],W[3],W[4],W[5]),C.call(this,Y,this),Y.restore();const tt=U.pixelRatio;P&&H._applyShadow(this),H._applyOpacity(this),H._applyGlobalCompositeOperation(this),H.drawImage(U._canvas,U.x||0,U.y||0,U.width/tt,U.height/tt)}else{if(H._applyLineJoin(this),!b){const U=this.getAbsoluteTransform(G).getMatrix();H.transform(U[0],U[1],U[2],U[3],U[4],U[5]),H._applyOpacity(this),H._applyGlobalCompositeOperation(this)}P&&H._applyShadow(this),C.call(this,H,this)}return H.restore(),this}drawHit(N,G,z=!1){if(!this.shouldDrawHit(G,z))return this;const V=this.getLayer(),j=N||V.hitCanvas,H=j&&j.getContext(),et=this.hitFunc()||this.sceneFunc(),C=this._getCanvasCache(),P=C&&C.hit;if(this.colorKey||O.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),P){H.save();const b=this.getAbsoluteTransform(G).getMatrix();return H.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(H),H.restore(),this}if(!et)return this;if(H.save(),H._applyLineJoin(this),!(this===G)){const b=this.getAbsoluteTransform(G).getMatrix();H.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return et.call(this,H,this),H.restore(),this}drawHitFromCache(N=0){const G=this._getCanvasCache(),z=this._getCachedSceneCanvas(),V=G.hit,j=V.getContext(),H=V.getWidth(),et=V.getHeight();j.clear(),j.drawImage(z._canvas,0,0,H,et);try{const C=j.getImageData(0,0,H,et),P=C.data,I=P.length,b=O.Util._hexToRgb(this.colorKey);for(let U=0;U<I;U+=4)P[U+3]>N?(P[U]=b.r,P[U+1]=b.g,P[U+2]=b.b,P[U+3]=255):P[U+3]=0;j.putImageData(C,0,0)}catch(C){O.Util.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(N){return d.hasPointerCapture(N,this)}setPointerCapture(N){d.setPointerCapture(N,this)}releaseCapture(N){d.releaseCapture(N,this)}}o.Shape=k,k.prototype._fillFunc=S,k.prototype._strokeFunc=E,k.prototype._fillFuncHit=F,k.prototype._strokeFuncHit=u,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,a._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",x),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",B),L.Factory.addGetterSetter(k,"stroke",void 0,(0,_.getStringOrGradientValidator)()),L.Factory.addGetterSetter(k,"strokeWidth",2,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),L.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,_.getNumberOrAutoValidator)()),L.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(k,"lineJoin"),L.Factory.addGetterSetter(k,"lineCap"),L.Factory.addGetterSetter(k,"sceneFunc"),L.Factory.addGetterSetter(k,"hitFunc"),L.Factory.addGetterSetter(k,"dash"),L.Factory.addGetterSetter(k,"dashOffset",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"shadowColor",void 0,(0,_.getStringValidator)()),L.Factory.addGetterSetter(k,"shadowBlur",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"shadowOpacity",1,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),L.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillPatternImage"),L.Factory.addGetterSetter(k,"fill",void 0,(0,_.getStringOrGradientValidator)()),L.Factory.addGetterSetter(k,"fillPatternX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillPatternY",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),L.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),L.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),L.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),L.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),L.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),L.Factory.addGetterSetter(k,"fillEnabled",!0),L.Factory.addGetterSetter(k,"strokeEnabled",!0),L.Factory.addGetterSetter(k,"shadowEnabled",!0),L.Factory.addGetterSetter(k,"dashEnabled",!0),L.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),L.Factory.addGetterSetter(k,"fillPriority","color"),L.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),L.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),L.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),L.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),L.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),L.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),L.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),L.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),L.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),L.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),L.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),L.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),L.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),L.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),L.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),L.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),L.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),L.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),L.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),L.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),L.Factory.addGetterSetter(k,"fillPatternRotation",0),L.Factory.addGetterSetter(k,"fillRule",void 0,(0,_.getStringValidator)()),L.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Pa)),Pa}var Wl;function $u(){if(Wl)return mr;Wl=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.Layer=void 0;const o=Dt(),g=Zi(),O=Ut(),L=St(),T=Ji(),_=Ct(),a=Xt(),d=vt(),f="#",m="beforeDraw",y="draw",w=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=w.length;class h extends g.Container{constructor(S){super(S),this.canvas=new T.SceneCanvas,this.hitCanvas=new T.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(S){return this.getContext().clear(S),this.getHitCanvas().getContext().clear(S),this}setZIndex(S){super.setZIndex(S);const E=this.getStage();return E&&E.content&&(E.content.removeChild(this.getNativeCanvasElement()),S<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[S+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){O.Node.prototype.moveToTop.call(this);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!O.Node.prototype.moveUp.call(this))return!1;const E=this.getStage();return!E||!E.content?!1:(E.content.removeChild(this.getNativeCanvasElement()),this.index<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[this.index+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(O.Node.prototype.moveDown.call(this)){const S=this.getStage();if(S){const E=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),E[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(O.Node.prototype.moveToBottom.call(this)){const S=this.getStage();if(S){const E=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),E[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const S=this.getNativeCanvasElement();return O.Node.prototype.remove.call(this),S&&S.parentNode&&o.Util._isInDocument(S)&&S.parentNode.removeChild(S),this}getStage(){return this.parent}setSize({width:S,height:E}){return this.canvas.setSize(S,E),this.hitCanvas.setSize(S,E),this._setSmoothEnabled(),this}_validateAdd(S){const E=S.getType();E!=="Group"&&E!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(S){return S=S||{},S.width=S.width||this.getWidth(),S.height=S.height||this.getHeight(),S.x=S.x!==void 0?S.x:this.x(),S.y=S.y!==void 0?S.y:this.y(),O.Node.prototype._toKonvaCanvas.call(this,S)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(S){if(!this.isListening()||!this.isVisible())return null;let E=1,F=!1;for(;;){for(let u=0;u<p;u++){const s=w[u],v=this._getIntersection({x:S.x+s.x*E,y:S.y+s.y*E}),x=v.shape;if(x)return x;if(F=!!v.antialiased,!v.antialiased)break}if(F)E+=1;else return null}}_getIntersection(S){const E=this.hitCanvas.pixelRatio,F=this.hitCanvas.context.getImageData(Math.round(S.x*E),Math.round(S.y*E),1,1).data,u=F[3];if(u===255){const s=o.Util._rgbToHex(F[0],F[1],F[2]),v=a.shapes[f+s];return v?{shape:v}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(S,E,F){const u=this.getLayer(),s=S||u&&u.getCanvas();return this._fire(m,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),g.Container.prototype.drawScene.call(this,s,E,F),this._fire(y,{node:this}),this}drawHit(S,E){const F=this.getLayer(),u=S||F&&F.hitCanvas;return F&&F.clearBeforeDraw()&&F.getHitCanvas().getContext().clear(),g.Container.prototype.drawHit.call(this,u,E),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(S){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(S)}getHitGraphEnabled(S){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const S=this.parent;!!this.hitCanvas._canvas.parentNode?S.content.removeChild(this.hitCanvas._canvas):S.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return mr.Layer=h,h.prototype.nodeType="Layer",(0,d._registerNode)(h),L.Factory.addGetterSetter(h,"imageSmoothingEnabled",!0),L.Factory.addGetterSetter(h,"clearBeforeDraw",!0),L.Factory.addGetterSetter(h,"hitGraphEnabled",!0,(0,_.getBooleanValidator)()),mr}var yr={},ql;function Oc(){if(ql)return yr;ql=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.FastLayer=void 0;const o=Dt(),g=$u(),O=vt();let L=class extends g.Layer{constructor(_){super(_),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return yr.FastLayer=L,L.prototype.nodeType="FastLayer",(0,O._registerNode)(L),yr}var vr={},jl;function Ia(){if(jl)return vr;jl=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.Group=void 0;const o=Dt(),g=Zi(),O=vt();let L=class extends g.Container{_validateAdd(_){const a=_.getType();a!=="Group"&&a!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return vr.Group=L,L.prototype.nodeType="Group",(0,O._registerNode)(L),vr}var _r={},Kl;function Da(){if(Kl)return _r;Kl=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Animation=void 0;const o=vt(),g=Dt(),O=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let L=class Kn{constructor(_,a){this.id=Kn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:O(),frameRate:0},this.func=_,this.setLayers(a)}setLayers(_){let a=[];return _&&(a=Array.isArray(_)?_:[_]),this.layers=a,this}getLayers(){return this.layers}addLayer(_){const a=this.layers,d=a.length;for(let f=0;f<d;f++)if(a[f]._id===_._id)return!1;return this.layers.push(_),!0}isRunning(){const a=Kn.animations,d=a.length;for(let f=0;f<d;f++)if(a[f].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=O(),Kn._addAnimation(this),this}stop(){return Kn._removeAnimation(this),this}_updateFrameObject(_){this.frame.timeDiff=_-this.frame.lastTime,this.frame.lastTime=_,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(_){this.animations.push(_),this._handleAnimation()}static _removeAnimation(_){const a=_.id,d=this.animations,f=d.length;for(let m=0;m<f;m++)if(d[m].id===a){this.animations.splice(m,1);break}}static _runFrames(){const _={},a=this.animations;for(let d=0;d<a.length;d++){const f=a[d],m=f.layers,y=f.func;f._updateFrameObject(O());const w=m.length;let p;if(y?p=y.call(f,f.frame)!==!1:p=!0,!!p)for(let h=0;h<w;h++){const c=m[h];c._id!==void 0&&(_[c._id]=c)}}for(const d in _)_.hasOwnProperty(d)&&_[d].batchDraw()}static _animationLoop(){const _=Kn;_.animations.length?(_._runFrames(),g.Util.requestAnimFrame(_._animationLoop)):_.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,g.Util.requestAnimFrame(this._animationLoop))}};return _r.Animation=L,L.animations=[],L.animIdCounter=0,L.animRunning=!1,_r}var Ea={},Yl;function Ic(){return Yl||(Yl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const g=Dt(),O=Da(),L=Ut(),T=vt(),_={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,d=2,f=3,m=["fill","stroke","shadowColor"];let y=0;class w{constructor(c,S,E,F,u,s,v){this.prop=c,this.propFunc=S,this.begin=F,this._pos=F,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=E,this._change=u-this.begin,this.pause()}fire(c){const S=this[c];S&&S()}setTime(c){c>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():c<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=c,this.update())}getTime(){return this._time}setPosition(c){this.prevPos=this._pos,this.propFunc(c),this._pos=c}getPosition(c){return c===void 0&&(c=this._time),this.func(c,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(c){this.pause(),this._time=c,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const c=this.getTimer()-this._startTime;this.state===d?this.setTime(c):this.state===f&&this.setTime(this.duration-c)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(c){const S=this,E=c.node,F=E._id,u=c.easing||o.Easings.Linear,s=!!c.yoyo;let v,x;typeof c.duration>"u"?v=.3:c.duration===0?v=.001:v=c.duration,this.node=E,this._id=y++;const M=E.getLayer()||(E instanceof T.Konva.Stage?E.getLayers():null);M||g.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new O.Animation(function(){S.tween.onEnterFrame()},M),this.tween=new w(x,function(B){S._tweenFunc(B)},u,0,1,v*1e3,s),this._addListeners(),p.attrs[F]||(p.attrs[F]={}),p.attrs[F][this._id]||(p.attrs[F][this._id]={}),p.tweens[F]||(p.tweens[F]={});for(x in c)_[x]===void 0&&this._addAttr(x,c[x]);this.reset(),this.onFinish=c.onFinish,this.onReset=c.onReset,this.onUpdate=c.onUpdate}_addAttr(c,S){const E=this.node,F=E._id;let u,s,v,x,M;const B=p.tweens[F][c];B&&delete p.attrs[F][B][c];let k=E.getAttr(c);if(g.Util._isArray(S))if(u=[],s=Math.max(S.length,k.length),c==="points"&&S.length!==k.length&&(S.length>k.length?(x=k,k=g.Util._prepareArrayForTween(k,S,E.closed())):(v=S,S=g.Util._prepareArrayForTween(S,k,E.closed()))),c.indexOf("fill")===0)for(let R=0;R<s;R++)if(R%2===0)u.push(S[R]-k[R]);else{const N=g.Util.colorToRGBA(k[R]);M=g.Util.colorToRGBA(S[R]),k[R]=N,u.push({r:M.r-N.r,g:M.g-N.g,b:M.b-N.b,a:M.a-N.a})}else for(let R=0;R<s;R++)u.push(S[R]-k[R]);else m.indexOf(c)!==-1?(k=g.Util.colorToRGBA(k),M=g.Util.colorToRGBA(S),u={r:M.r-k.r,g:M.g-k.g,b:M.b-k.b,a:M.a-k.a}):u=S-k;p.attrs[F][this._id][c]={start:k,diff:u,end:S,trueEnd:v,trueStart:x},p.tweens[F][c]=this._id}_tweenFunc(c){const S=this.node,E=p.attrs[S._id][this._id];let F,u,s,v,x,M,B,k;for(F in E){if(u=E[F],s=u.start,v=u.diff,k=u.end,g.Util._isArray(s))if(x=[],B=Math.max(s.length,k.length),F.indexOf("fill")===0)for(M=0;M<B;M++)M%2===0?x.push((s[M]||0)+v[M]*c):x.push("rgba("+Math.round(s[M].r+v[M].r*c)+","+Math.round(s[M].g+v[M].g*c)+","+Math.round(s[M].b+v[M].b*c)+","+(s[M].a+v[M].a*c)+")");else for(M=0;M<B;M++)x.push((s[M]||0)+v[M]*c);else m.indexOf(F)!==-1?x="rgba("+Math.round(s.r+v.r*c)+","+Math.round(s.g+v.g*c)+","+Math.round(s.b+v.b*c)+","+(s.a+v.a*c)+")":x=s+v*c;S.setAttr(F,x)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const c=this.node,S=p.attrs[c._id][this._id];S.points&&S.points.trueEnd&&c.setAttr("points",S.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const c=this.node,S=p.attrs[c._id][this._id];S.points&&S.points.trueStart&&c.points(S.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(c){return this.tween.seek(c*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const c=this.node._id,S=this._id,E=p.tweens[c];this.pause(),this.anim&&this.anim.stop();for(const F in E)delete p.tweens[c][F];delete p.attrs[c][S],p.tweens[c]&&(Object.keys(p.tweens[c]).length===0&&delete p.tweens[c],Object.keys(p.attrs[c]).length===0&&delete p.attrs[c])}}o.Tween=p,p.attrs={},p.tweens={},L.Node.prototype.to=function(h){const c=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),c&&c()},new p(h).play()},o.Easings={BackEaseIn(h,c,S,E){return S*(h/=E)*h*((1.70158+1)*h-1.70158)+c},BackEaseOut(h,c,S,E){return S*((h=h/E-1)*h*((1.70158+1)*h+1.70158)+1)+c},BackEaseInOut(h,c,S,E){let F=1.70158;return(h/=E/2)<1?S/2*(h*h*(((F*=1.525)+1)*h-F))+c:S/2*((h-=2)*h*(((F*=1.525)+1)*h+F)+2)+c},ElasticEaseIn(h,c,S,E,F,u){let s=0;return h===0?c:(h/=E)===1?c+S:(u||(u=E*.3),!F||F<Math.abs(S)?(F=S,s=u/4):s=u/(2*Math.PI)*Math.asin(S/F),-(F*Math.pow(2,10*(h-=1))*Math.sin((h*E-s)*(2*Math.PI)/u))+c)},ElasticEaseOut(h,c,S,E,F,u){let s=0;return h===0?c:(h/=E)===1?c+S:(u||(u=E*.3),!F||F<Math.abs(S)?(F=S,s=u/4):s=u/(2*Math.PI)*Math.asin(S/F),F*Math.pow(2,-10*h)*Math.sin((h*E-s)*(2*Math.PI)/u)+S+c)},ElasticEaseInOut(h,c,S,E,F,u){let s=0;return h===0?c:(h/=E/2)===2?c+S:(u||(u=E*(.3*1.5)),!F||F<Math.abs(S)?(F=S,s=u/4):s=u/(2*Math.PI)*Math.asin(S/F),h<1?-.5*(F*Math.pow(2,10*(h-=1))*Math.sin((h*E-s)*(2*Math.PI)/u))+c:F*Math.pow(2,-10*(h-=1))*Math.sin((h*E-s)*(2*Math.PI)/u)*.5+S+c)},BounceEaseOut(h,c,S,E){return(h/=E)<1/2.75?S*(7.5625*h*h)+c:h<2/2.75?S*(7.5625*(h-=1.5/2.75)*h+.75)+c:h<2.5/2.75?S*(7.5625*(h-=2.25/2.75)*h+.9375)+c:S*(7.5625*(h-=2.625/2.75)*h+.984375)+c},BounceEaseIn(h,c,S,E){return S-o.Easings.BounceEaseOut(E-h,0,S,E)+c},BounceEaseInOut(h,c,S,E){return h<E/2?o.Easings.BounceEaseIn(h*2,0,S,E)*.5+c:o.Easings.BounceEaseOut(h*2-E,0,S,E)*.5+S*.5+c},EaseIn(h,c,S,E){return S*(h/=E)*h+c},EaseOut(h,c,S,E){return-S*(h/=E)*(h-2)+c},EaseInOut(h,c,S,E){return(h/=E/2)<1?S/2*h*h+c:-S/2*(--h*(h-2)-1)+c},StrongEaseIn(h,c,S,E){return S*(h/=E)*h*h*h*h+c},StrongEaseOut(h,c,S,E){return S*((h=h/E-1)*h*h*h*h+1)+c},StrongEaseInOut(h,c,S,E){return(h/=E/2)<1?S/2*h*h*h*h*h+c:S/2*((h-=2)*h*h*h*h+2)+c},Linear(h,c,S,E){return S*h/E+c}}}(Ea)),Ea}var Xl;function ba(){return Xl||(Xl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const g=vt(),O=Dt(),L=Ut(),T=Zi(),_=bc(),a=$u(),d=Oc(),f=Ia(),m=Oa(),y=Xt(),w=Da(),p=Ic(),h=Ju(),c=Ji();o.Konva=O.Util._assign(g.Konva,{Util:O.Util,Transform:O.Transform,Node:L.Node,Container:T.Container,Stage:_.Stage,stages:_.stages,Layer:a.Layer,FastLayer:d.FastLayer,Group:f.Group,DD:m.DD,Shape:y.Shape,shapes:y.shapes,Animation:w.Animation,Tween:p.Tween,Easings:p.Easings,Context:h.Context,Canvas:c.Canvas}),o.default=o.Konva}(va)),va}var Sr={},Ql;function Dc(){if(Ql)return Sr;Ql=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Arc=void 0;const o=St(),g=Xt(),O=vt(),L=Ct(),T=vt();let _=class extends g.Shape{_sceneFunc(d){const f=O.Konva.getAngle(this.angle()),m=this.clockwise();d.beginPath(),d.arc(0,0,this.outerRadius(),0,f,m),d.arc(0,0,this.innerRadius(),f,0,!m),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}getSelfRect(){const d=this.innerRadius(),f=this.outerRadius(),m=this.clockwise(),y=O.Konva.getAngle(m?360-this.angle():this.angle()),w=Math.cos(Math.min(y,Math.PI)),p=1,h=Math.sin(Math.min(Math.max(Math.PI,y),3*Math.PI/2)),c=Math.sin(Math.min(y,Math.PI/2)),S=w*(w>0?d:f),E=p*f,F=h*(h>0?d:f),u=c*(c>0?f:d);return{x:S,y:m?-1*u:F,width:E-S,height:u-F}}};return Sr.Arc=_,_.prototype._centroid=!0,_.prototype.className="Arc",_.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,T._registerNode)(_),o.Factory.addGetterSetter(_,"innerRadius",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"outerRadius",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"angle",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"clockwise",!1,(0,L.getBooleanValidator)()),Sr}var Cr={},wr={},Jl;function th(){if(Jl)return wr;Jl=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Line=void 0;const o=St(),g=vt(),O=Xt(),L=Ct();function T(d,f,m,y,w,p,h){const c=Math.sqrt(Math.pow(m-d,2)+Math.pow(y-f,2)),S=Math.sqrt(Math.pow(w-m,2)+Math.pow(p-y,2)),E=h*c/(c+S),F=h*S/(c+S),u=m-E*(w-d),s=y-E*(p-f),v=m+F*(w-d),x=y+F*(p-f);return[u,s,v,x]}function _(d,f){const m=d.length,y=[];for(let w=2;w<m-2;w+=2){const p=T(d[w-2],d[w-1],d[w],d[w+1],d[w+2],d[w+3],f);isNaN(p[0])||(y.push(p[0]),y.push(p[1]),y.push(d[w]),y.push(d[w+1]),y.push(p[2]),y.push(p[3]))}return y}class a extends O.Shape{constructor(f){super(f),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(f){const m=this.points(),y=m.length,w=this.tension(),p=this.closed(),h=this.bezier();if(!y)return;let c=0;if(f.beginPath(),f.moveTo(m[0],m[1]),w!==0&&y>4){const S=this.getTensionPoints(),E=S.length;for(c=p?0:4,p||f.quadraticCurveTo(S[0],S[1],S[2],S[3]);c<E-2;)f.bezierCurveTo(S[c++],S[c++],S[c++],S[c++],S[c++],S[c++]);p||f.quadraticCurveTo(S[E-2],S[E-1],m[y-2],m[y-1])}else if(h)for(c=2;c<y;)f.bezierCurveTo(m[c++],m[c++],m[c++],m[c++],m[c++],m[c++]);else for(c=2;c<y;c+=2)f.lineTo(m[c],m[c+1]);p?(f.closePath(),f.fillStrokeShape(this)):f.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_(this.points(),this.tension())}_getTensionPointsClosed(){const f=this.points(),m=f.length,y=this.tension(),w=T(f[m-2],f[m-1],f[0],f[1],f[2],f[3],y),p=T(f[m-4],f[m-3],f[m-2],f[m-1],f[0],f[1],y),h=_(f,y);return[w[2],w[3]].concat(h).concat([p[0],p[1],f[m-2],f[m-1],p[2],p[3],w[0],w[1],f[0],f[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let f=this.points();if(f.length<4)return{x:f[0]||0,y:f[1]||0,width:0,height:0};this.tension()!==0?f=[f[0],f[1],...this._getTensionPoints(),f[f.length-2],f[f.length-1]]:f=this.points();let m=f[0],y=f[0],w=f[1],p=f[1],h,c;for(let S=0;S<f.length/2;S++)h=f[S*2],c=f[S*2+1],m=Math.min(m,h),y=Math.max(y,h),w=Math.min(w,c),p=Math.max(p,c);return{x:m,y:w,width:y-m,height:p-w}}}return wr.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,g._registerNode)(a),o.Factory.addGetterSetter(a,"closed",!1),o.Factory.addGetterSetter(a,"bezier",!1),o.Factory.addGetterSetter(a,"tension",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(a,"points",[],(0,L.getNumberArrayValidator)()),wr}var xr={},ka={},Zl;function Gc(){return Zl||(Zl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const g=(a,d,f)=>{let m,y;const p=f/2;m=0;for(let h=0;h<20;h++)y=p*o.tValues[20][h]+p,m+=o.cValues[20][h]*L(a,d,y);return p*m};o.getCubicArcLength=g;const O=(a,d,f)=>{f===void 0&&(f=1);const m=a[0]-2*a[1]+a[2],y=d[0]-2*d[1]+d[2],w=2*a[1]-2*a[0],p=2*d[1]-2*d[0],h=4*(m*m+y*y),c=4*(m*w+y*p),S=w*w+p*p;if(h===0)return f*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(d[2]-d[0],2));const E=c/(2*h),F=S/h,u=f+E,s=F-E*E,v=u*u+s>0?Math.sqrt(u*u+s):0,x=E*E+s>0?Math.sqrt(E*E+s):0,M=E+Math.sqrt(E*E+s)!==0?s*Math.log(Math.abs((u+v)/(E+x))):0;return Math.sqrt(h)/2*(u*v-E*x+M)};o.getQuadraticArcLength=O;function L(a,d,f){const m=T(1,f,a),y=T(1,f,d),w=m*m+y*y;return Math.sqrt(w)}const T=(a,d,f)=>{const m=f.length-1;let y,w;if(m===0)return 0;if(a===0){w=0;for(let p=0;p<=m;p++)w+=o.binomialCoefficients[m][p]*Math.pow(1-d,m-p)*Math.pow(d,p)*f[p];return w}else{y=new Array(m);for(let p=0;p<m;p++)y[p]=m*(f[p+1]-f[p]);return T(a-1,d,y)}},_=(a,d,f)=>{let m=1,y=a/d,w=(a-f(y))/d,p=0;for(;m>.001;){const h=f(y+w),c=Math.abs(a-h)/d;if(c<m)m=c,y+=w;else{const S=f(y-w),E=Math.abs(a-S)/d;E<m?(m=E,y-=w):w/=2}if(p++,p>500)break}return y};o.t2length=_}(ka)),ka}var $l;function Ga(){if($l)return xr;$l=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Path=void 0;const o=St(),g=vt(),O=Xt(),L=Gc();let T=class ye extends O.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ye.parsePathData(this.data()),this.pathLength=ye.getPathLength(this.dataArray)}_sceneFunc(a){const d=this.dataArray;a.beginPath();let f=!1;for(let m=0;m<d.length;m++){const y=d[m].command,w=d[m].points;switch(y){case"L":a.lineTo(w[0],w[1]);break;case"M":a.moveTo(w[0],w[1]);break;case"C":a.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]);break;case"Q":a.quadraticCurveTo(w[0],w[1],w[2],w[3]);break;case"A":const p=w[0],h=w[1],c=w[2],S=w[3],E=w[4],F=w[5],u=w[6],s=w[7],v=c>S?c:S,x=c>S?1:c/S,M=c>S?S/c:1;a.translate(p,h),a.rotate(u),a.scale(x,M),a.arc(0,0,v,E,E+F,1-s),a.scale(1/x,1/M),a.rotate(-u),a.translate(-p,-h);break;case"z":f=!0,a.closePath();break}}!f&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(h){if(h.command==="A"){const c=h.points[4],S=h.points[5],E=h.points[4]+S;let F=Math.PI/180;if(Math.abs(c-E)<F&&(F=Math.abs(c-E)),S<0)for(let u=c-F;u>E;u-=F){const s=ye.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],u,0);a.push(s.x,s.y)}else for(let u=c+F;u<E;u+=F){const s=ye.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],u,0);a.push(s.x,s.y)}}else if(h.command==="C")for(let c=0;c<=1;c+=.01){const S=ye.getPointOnCubicBezier(c,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);a.push(S.x,S.y)}else a=a.concat(h.points)});let d=a[0],f=a[0],m=a[1],y=a[1],w,p;for(let h=0;h<a.length/2;h++)w=a[h*2],p=a[h*2+1],isNaN(w)||(d=Math.min(d,w),f=Math.max(f,w)),isNaN(p)||(m=Math.min(m,p),y=Math.max(y,p));return{x:d,y:m,width:f-d,height:y-m}}getLength(){return this.pathLength}getPointAtLength(a){return ye.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,d,f,m){return Math.sqrt((f-a)*(f-a)+(m-d)*(m-d))}static getPathLength(a){let d=0;for(let f=0;f<a.length;++f)d+=a[f].pathLength;return d}static getPointAtLengthOfDataArray(a,d){let f,m=0,y=d.length;if(!y)return null;for(;m<y&&a>d[m].pathLength;)a-=d[m].pathLength,++m;if(m===y)return f=d[m-1].points.slice(-2),{x:f[0],y:f[1]};if(a<.01)return d[m].command==="M"?(f=d[m].points.slice(0,2),{x:f[0],y:f[1]}):{x:d[m].start.x,y:d[m].start.y};const w=d[m],p=w.points;switch(w.command){case"L":return ye.getPointOnLine(a,w.start.x,w.start.y,p[0],p[1]);case"C":return ye.getPointOnCubicBezier((0,L.t2length)(a,ye.getPathLength(d),v=>(0,L.getCubicArcLength)([w.start.x,p[0],p[2],p[4]],[w.start.y,p[1],p[3],p[5]],v)),w.start.x,w.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return ye.getPointOnQuadraticBezier((0,L.t2length)(a,ye.getPathLength(d),v=>(0,L.getQuadraticArcLength)([w.start.x,p[0],p[2]],[w.start.y,p[1],p[3]],v)),w.start.x,w.start.y,p[0],p[1],p[2],p[3]);case"A":const h=p[0],c=p[1],S=p[2],E=p[3],F=p[5],u=p[6];let s=p[4];return s+=F*a/w.pathLength,ye.getPointOnEllipticalArc(h,c,S,E,s,u)}return null}static getPointOnLine(a,d,f,m,y,w,p){w=w??d,p=p??f;const h=this.getLineLength(d,f,m,y);if(h<1e-10)return{x:d,y:f};if(m===d)return{x:w,y:p+(y>f?a:-a)};const c=(y-f)/(m-d),S=Math.sqrt(a*a/(1+c*c))*(m<d?-1:1),E=c*S;if(Math.abs(p-f-c*(w-d))<1e-10)return{x:w+S,y:p+E};const F=((w-d)*(m-d)+(p-f)*(y-f))/(h*h),u=d+F*(m-d),s=f+F*(y-f),v=this.getLineLength(w,p,u,s),x=Math.sqrt(a*a-v*v),M=Math.sqrt(x*x/(1+c*c))*(m<d?-1:1),B=c*M;return{x:u+M,y:s+B}}static getPointOnCubicBezier(a,d,f,m,y,w,p,h,c){function S(x){return x*x*x}function E(x){return 3*x*x*(1-x)}function F(x){return 3*x*(1-x)*(1-x)}function u(x){return(1-x)*(1-x)*(1-x)}const s=h*S(a)+w*E(a)+m*F(a)+d*u(a),v=c*S(a)+p*E(a)+y*F(a)+f*u(a);return{x:s,y:v}}static getPointOnQuadraticBezier(a,d,f,m,y,w,p){function h(u){return u*u}function c(u){return 2*u*(1-u)}function S(u){return(1-u)*(1-u)}const E=w*h(a)+m*c(a)+d*S(a),F=p*h(a)+y*c(a)+f*S(a);return{x:E,y:F}}static getPointOnEllipticalArc(a,d,f,m,y,w){const p=Math.cos(w),h=Math.sin(w),c={x:f*Math.cos(y),y:m*Math.sin(y)};return{x:a+(c.x*p-c.y*h),y:d+(c.x*h+c.y*p)}}static parsePathData(a){if(!a)return[];let d=a;const f=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];d=d.replace(new RegExp(" ","g"),",");for(let E=0;E<f.length;E++)d=d.replace(new RegExp(f[E],"g"),"|"+f[E]);const m=d.split("|"),y=[],w=[];let p=0,h=0;const c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let S;for(let E=1;E<m.length;E++){let F=m[E],u=F.charAt(0);for(F=F.slice(1),w.length=0;S=c.exec(F);)w.push(S[0]);const s=[];for(let v=0,x=w.length;v<x;v++){if(w[v]==="00"){s.push(0,0);continue}const M=parseFloat(w[v]);isNaN(M)?s.push(0):s.push(M)}for(;s.length>0&&!isNaN(s[0]);){let v="",x=[];const M=p,B=h;let k,R,N,G,z,V,j,H,et,C;switch(u){case"l":p+=s.shift(),h+=s.shift(),v="L",x.push(p,h);break;case"L":p=s.shift(),h=s.shift(),x.push(p,h);break;case"m":const P=s.shift(),I=s.shift();if(p+=P,h+=I,v="M",y.length>2&&y[y.length-1].command==="z"){for(let b=y.length-2;b>=0;b--)if(y[b].command==="M"){p=y[b].points[0]+P,h=y[b].points[1]+I;break}}x.push(p,h),u="l";break;case"M":p=s.shift(),h=s.shift(),v="M",x.push(p,h),u="L";break;case"h":p+=s.shift(),v="L",x.push(p,h);break;case"H":p=s.shift(),v="L",x.push(p,h);break;case"v":h+=s.shift(),v="L",x.push(p,h);break;case"V":h=s.shift(),v="L",x.push(p,h);break;case"C":x.push(s.shift(),s.shift(),s.shift(),s.shift()),p=s.shift(),h=s.shift(),x.push(p,h);break;case"c":x.push(p+s.shift(),h+s.shift(),p+s.shift(),h+s.shift()),p+=s.shift(),h+=s.shift(),v="C",x.push(p,h);break;case"S":R=p,N=h,k=y[y.length-1],k.command==="C"&&(R=p+(p-k.points[2]),N=h+(h-k.points[3])),x.push(R,N,s.shift(),s.shift()),p=s.shift(),h=s.shift(),v="C",x.push(p,h);break;case"s":R=p,N=h,k=y[y.length-1],k.command==="C"&&(R=p+(p-k.points[2]),N=h+(h-k.points[3])),x.push(R,N,p+s.shift(),h+s.shift()),p+=s.shift(),h+=s.shift(),v="C",x.push(p,h);break;case"Q":x.push(s.shift(),s.shift()),p=s.shift(),h=s.shift(),x.push(p,h);break;case"q":x.push(p+s.shift(),h+s.shift()),p+=s.shift(),h+=s.shift(),v="Q",x.push(p,h);break;case"T":R=p,N=h,k=y[y.length-1],k.command==="Q"&&(R=p+(p-k.points[0]),N=h+(h-k.points[1])),p=s.shift(),h=s.shift(),v="Q",x.push(R,N,p,h);break;case"t":R=p,N=h,k=y[y.length-1],k.command==="Q"&&(R=p+(p-k.points[0]),N=h+(h-k.points[1])),p+=s.shift(),h+=s.shift(),v="Q",x.push(R,N,p,h);break;case"A":G=s.shift(),z=s.shift(),V=s.shift(),j=s.shift(),H=s.shift(),et=p,C=h,p=s.shift(),h=s.shift(),v="A",x=this.convertEndpointToCenterParameterization(et,C,p,h,j,H,G,z,V);break;case"a":G=s.shift(),z=s.shift(),V=s.shift(),j=s.shift(),H=s.shift(),et=p,C=h,p+=s.shift(),h+=s.shift(),v="A",x=this.convertEndpointToCenterParameterization(et,C,p,h,j,H,G,z,V);break}y.push({command:v||u,points:x,start:{x:M,y:B},pathLength:this.calcLength(M,B,v||u,x)})}(u==="z"||u==="Z")&&y.push({command:"z",points:[],start:void 0,pathLength:0})}return y}static calcLength(a,d,f,m){let y,w,p,h;const c=ye;switch(f){case"L":return c.getLineLength(a,d,m[0],m[1]);case"C":return(0,L.getCubicArcLength)([a,m[0],m[2],m[4]],[d,m[1],m[3],m[5]],1);case"Q":return(0,L.getQuadraticArcLength)([a,m[0],m[2]],[d,m[1],m[3]],1);case"A":y=0;const S=m[4],E=m[5],F=m[4]+E;let u=Math.PI/180;if(Math.abs(S-F)<u&&(u=Math.abs(S-F)),w=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],S,0),E<0)for(h=S-u;h>F;h-=u)p=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],h,0),y+=c.getLineLength(w.x,w.y,p.x,p.y),w=p;else for(h=S+u;h<F;h+=u)p=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],h,0),y+=c.getLineLength(w.x,w.y,p.x,p.y),w=p;return p=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],F,0),y+=c.getLineLength(w.x,w.y,p.x,p.y),y}return 0}static convertEndpointToCenterParameterization(a,d,f,m,y,w,p,h,c){const S=c*(Math.PI/180),E=Math.cos(S)*(a-f)/2+Math.sin(S)*(d-m)/2,F=-1*Math.sin(S)*(a-f)/2+Math.cos(S)*(d-m)/2,u=E*E/(p*p)+F*F/(h*h);u>1&&(p*=Math.sqrt(u),h*=Math.sqrt(u));let s=Math.sqrt((p*p*(h*h)-p*p*(F*F)-h*h*(E*E))/(p*p*(F*F)+h*h*(E*E)));y===w&&(s*=-1),isNaN(s)&&(s=0);const v=s*p*F/h,x=s*-h*E/p,M=(a+f)/2+Math.cos(S)*v-Math.sin(S)*x,B=(d+m)/2+Math.sin(S)*v+Math.cos(S)*x,k=function(H){return Math.sqrt(H[0]*H[0]+H[1]*H[1])},R=function(H,et){return(H[0]*et[0]+H[1]*et[1])/(k(H)*k(et))},N=function(H,et){return(H[0]*et[1]<H[1]*et[0]?-1:1)*Math.acos(R(H,et))},G=N([1,0],[(E-v)/p,(F-x)/h]),z=[(E-v)/p,(F-x)/h],V=[(-1*E-v)/p,(-1*F-x)/h];let j=N(z,V);return R(z,V)<=-1&&(j=Math.PI),R(z,V)>=1&&(j=0),w===0&&j>0&&(j=j-2*Math.PI),w===1&&j<0&&(j=j+2*Math.PI),[M,B,p,h,G,j,S,w]}};return xr.Path=T,T.prototype.className="Path",T.prototype._attrsAffectingSize=["data"],(0,g._registerNode)(T),o.Factory.addGetterSetter(T,"data"),xr}var tu;function Uc(){if(tu)return Cr;tu=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Arrow=void 0;const o=St(),g=th(),O=Ct(),L=vt(),T=Ga();let _=class extends g.Line{_sceneFunc(d){super._sceneFunc(d);const f=Math.PI*2,m=this.points();let y=m;const w=this.tension()!==0&&m.length>4;w&&(y=this.getTensionPoints());const p=this.pointerLength(),h=m.length;let c,S;if(w){const u=[y[y.length-4],y[y.length-3],y[y.length-2],y[y.length-1],m[h-2],m[h-1]],s=T.Path.calcLength(y[y.length-4],y[y.length-3],"C",u),v=T.Path.getPointOnQuadraticBezier(Math.min(1,1-p/s),u[0],u[1],u[2],u[3],u[4],u[5]);c=m[h-2]-v.x,S=m[h-1]-v.y}else c=m[h-2]-m[h-4],S=m[h-1]-m[h-3];const E=(Math.atan2(S,c)+f)%f,F=this.pointerWidth();this.pointerAtEnding()&&(d.save(),d.beginPath(),d.translate(m[h-2],m[h-1]),d.rotate(E),d.moveTo(0,0),d.lineTo(-p,F/2),d.lineTo(-p,-F/2),d.closePath(),d.restore(),this.__fillStroke(d)),this.pointerAtBeginning()&&(d.save(),d.beginPath(),d.translate(m[0],m[1]),w?(c=(y[0]+y[2])/2-m[0],S=(y[1]+y[3])/2-m[1]):(c=m[2]-m[0],S=m[3]-m[1]),d.rotate((Math.atan2(-S,-c)+f)%f),d.moveTo(0,0),d.lineTo(-p,F/2),d.lineTo(-p,-F/2),d.closePath(),d.restore(),this.__fillStroke(d))}__fillStroke(d){const f=this.dashEnabled();f&&(this.attrs.dashEnabled=!1,d.setLineDash([])),d.fillStrokeShape(this),f&&(this.attrs.dashEnabled=!0)}getSelfRect(){const d=super.getSelfRect(),f=this.pointerWidth()/2;return{x:d.x,y:d.y-f,width:d.width,height:d.height+f*2}}};return Cr.Arrow=_,_.prototype.className="Arrow",(0,L._registerNode)(_),o.Factory.addGetterSetter(_,"pointerLength",10,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(_,"pointerWidth",10,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(_,"pointerAtBeginning",!1),o.Factory.addGetterSetter(_,"pointerAtEnding",!0),Cr}var Pr={},eu;function zc(){if(eu)return Pr;eu=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.Circle=void 0;const o=St(),g=Xt(),O=Ct(),L=vt();let T=class extends g.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return Pr.Circle=T,T.prototype._centroid=!0,T.prototype.className="Circle",T.prototype._attrsAffectingSize=["radius"],(0,L._registerNode)(T),o.Factory.addGetterSetter(T,"radius",0,(0,O.getNumberValidator)()),Pr}var Er={},nu;function Bc(){if(nu)return Er;nu=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Ellipse=void 0;const o=St(),g=Xt(),O=Ct(),L=vt();let T=class extends g.Shape{_sceneFunc(a){const d=this.radiusX(),f=this.radiusY();a.beginPath(),a.save(),d!==f&&a.scale(1,f/d),a.arc(0,0,d,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return Er.Ellipse=T,T.prototype.className="Ellipse",T.prototype._centroid=!0,T.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,L._registerNode)(T),o.Factory.addComponentsGetterSetter(T,"radius",["x","y"]),o.Factory.addGetterSetter(T,"radiusX",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(T,"radiusY",0,(0,O.getNumberValidator)()),Er}var kr={},ru;function Hc(){if(ru)return kr;ru=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.Image=void 0;const o=Dt(),g=St(),O=Xt(),L=vt(),T=Ct();let _=class eh extends O.Shape{constructor(d){super(d),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",f=>{this._removeImageLoad(f.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const d=this.image();d&&d.complete||d&&d.readyState===4||d&&d.addEventListener&&d.addEventListener("load",this._loadListener)}_removeImageLoad(d){d&&d.removeEventListener&&d.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const d=!!this.cornerRadius(),f=this.hasShadow();return d&&f?!0:super._useBufferCanvas(!0)}_sceneFunc(d){const f=this.getWidth(),m=this.getHeight(),y=this.cornerRadius(),w=this.attrs.image;let p;if(w){const h=this.attrs.cropWidth,c=this.attrs.cropHeight;h&&c?p=[w,this.cropX(),this.cropY(),h,c,0,0,f,m]:p=[w,0,0,f,m]}(this.hasFill()||this.hasStroke()||y)&&(d.beginPath(),y?o.Util.drawRoundedRectPath(d,f,m,y):d.rect(0,0,f,m),d.closePath(),d.fillStrokeShape(this)),w&&(y&&d.clip(),d.drawImage.apply(d,p))}_hitFunc(d){const f=this.width(),m=this.height(),y=this.cornerRadius();d.beginPath(),y?o.Util.drawRoundedRectPath(d,f,m,y):d.rect(0,0,f,m),d.closePath(),d.fillStrokeShape(this)}getWidth(){var d,f;return(d=this.attrs.width)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.width}getHeight(){var d,f;return(d=this.attrs.height)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.height}static fromURL(d,f,m=null){const y=o.Util.createImageElement();y.onload=function(){const w=new eh({image:y});f(w)},y.onerror=m,y.crossOrigin="Anonymous",y.src=d}};return kr.Image=_,_.prototype.className="Image",(0,L._registerNode)(_),g.Factory.addGetterSetter(_,"cornerRadius",0,(0,T.getNumberOrArrayOfNumbersValidator)(4)),g.Factory.addGetterSetter(_,"image"),g.Factory.addComponentsGetterSetter(_,"crop",["x","y","width","height"]),g.Factory.addGetterSetter(_,"cropX",0,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(_,"cropY",0,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(_,"cropWidth",0,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(_,"cropHeight",0,(0,T.getNumberValidator)()),kr}var Fn={},iu;function Vc(){if(iu)return Fn;iu=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Tag=Fn.Label=void 0;const o=St(),g=Xt(),O=Ia(),L=Ct(),T=vt(),_=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",d="none",f="up",m="right",y="down",w="left",p=_.length;let h=class extends O.Group{constructor(E){super(E),this.on("add.konva",function(F){this._addListeners(F.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(E){let F=this,u;const s=function(){F._sync()};for(u=0;u<p;u++)E.on(_[u]+a,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let E=this.getText(),F=this.getTag(),u,s,v,x,M,B,k;if(E&&F){switch(u=E.width(),s=E.height(),v=F.pointerDirection(),x=F.pointerWidth(),k=F.pointerHeight(),M=0,B=0,v){case f:M=u/2,B=-1*k;break;case m:M=u+x,B=s/2;break;case y:M=u/2,B=s+k;break;case w:M=-1*x,B=s/2;break}F.setAttrs({x:-1*M,y:-1*B,width:u,height:s}),E.setAttrs({x:-1*M,y:-1*B})}}};Fn.Label=h,h.prototype.className="Label",(0,T._registerNode)(h);class c extends g.Shape{_sceneFunc(E){const F=this.width(),u=this.height(),s=this.pointerDirection(),v=this.pointerWidth(),x=this.pointerHeight(),M=this.cornerRadius();let B=0,k=0,R=0,N=0;typeof M=="number"?B=k=R=N=Math.min(M,F/2,u/2):(B=Math.min(M[0]||0,F/2,u/2),k=Math.min(M[1]||0,F/2,u/2),N=Math.min(M[2]||0,F/2,u/2),R=Math.min(M[3]||0,F/2,u/2)),E.beginPath(),E.moveTo(B,0),s===f&&(E.lineTo((F-v)/2,0),E.lineTo(F/2,-1*x),E.lineTo((F+v)/2,0)),E.lineTo(F-k,0),E.arc(F-k,k,k,Math.PI*3/2,0,!1),s===m&&(E.lineTo(F,(u-x)/2),E.lineTo(F+v,u/2),E.lineTo(F,(u+x)/2)),E.lineTo(F,u-N),E.arc(F-N,u-N,N,0,Math.PI/2,!1),s===y&&(E.lineTo((F+v)/2,u),E.lineTo(F/2,u+x),E.lineTo((F-v)/2,u)),E.lineTo(R,u),E.arc(R,u-R,R,Math.PI/2,Math.PI,!1),s===w&&(E.lineTo(0,(u+x)/2),E.lineTo(-1*v,u/2),E.lineTo(0,(u-x)/2)),E.lineTo(0,B),E.arc(B,B,B,Math.PI,Math.PI*3/2,!1),E.closePath(),E.fillStrokeShape(this)}getSelfRect(){let E=0,F=0,u=this.pointerWidth(),s=this.pointerHeight(),v=this.pointerDirection(),x=this.width(),M=this.height();return v===f?(F-=s,M+=s):v===y?M+=s:v===w?(E-=u*1.5,x+=u):v===m&&(x+=u*1.5),{x:E,y:F,width:x,height:M}}}return Fn.Tag=c,c.prototype.className="Tag",(0,T._registerNode)(c),o.Factory.addGetterSetter(c,"pointerDirection",d),o.Factory.addGetterSetter(c,"pointerWidth",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(c,"pointerHeight",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(c,"cornerRadius",0,(0,L.getNumberOrArrayOfNumbersValidator)(4)),Fn}var Rr={},su;function nh(){if(su)return Rr;su=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Rect=void 0;const o=St(),g=Xt(),O=vt(),L=Dt(),T=Ct();let _=class extends g.Shape{_sceneFunc(d){const f=this.cornerRadius(),m=this.width(),y=this.height();d.beginPath(),f?L.Util.drawRoundedRectPath(d,m,y,f):d.rect(0,0,m,y),d.closePath(),d.fillStrokeShape(this)}};return Rr.Rect=_,_.prototype.className="Rect",(0,O._registerNode)(_),o.Factory.addGetterSetter(_,"cornerRadius",0,(0,T.getNumberOrArrayOfNumbersValidator)(4)),Rr}var Tr={},au;function Wc(){if(au)return Tr;au=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.RegularPolygon=void 0;const o=St(),g=Xt(),O=Ct(),L=vt();let T=class extends g.Shape{_sceneFunc(a){const d=this._getPoints();a.beginPath(),a.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++)a.lineTo(d[f].x,d[f].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,d=this.attrs.radius||0,f=[];for(let m=0;m<a;m++)f.push({x:d*Math.sin(m*2*Math.PI/a),y:-1*d*Math.cos(m*2*Math.PI/a)});return f}getSelfRect(){const a=this._getPoints();let d=a[0].x,f=a[0].y,m=a[0].x,y=a[0].y;return a.forEach(w=>{d=Math.min(d,w.x),f=Math.max(f,w.x),m=Math.min(m,w.y),y=Math.max(y,w.y)}),{x:d,y:m,width:f-d,height:y-m}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Tr.RegularPolygon=T,T.prototype.className="RegularPolygon",T.prototype._centroid=!0,T.prototype._attrsAffectingSize=["radius"],(0,L._registerNode)(T),o.Factory.addGetterSetter(T,"radius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(T,"sides",0,(0,O.getNumberValidator)()),Tr}var Nr={},ou;function qc(){if(ou)return Nr;ou=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Ring=void 0;const o=St(),g=Xt(),O=Ct(),L=vt(),T=Math.PI*2;let _=class extends g.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.innerRadius(),0,T,!1),d.moveTo(this.outerRadius(),0),d.arc(0,0,this.outerRadius(),T,0,!0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Nr.Ring=_,_.prototype.className="Ring",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,L._registerNode)(_),o.Factory.addGetterSetter(_,"innerRadius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(_,"outerRadius",0,(0,O.getNumberValidator)()),Nr}var Fr={},lu;function jc(){if(lu)return Fr;lu=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Sprite=void 0;const o=St(),g=Xt(),O=Da(),L=Ct(),T=vt();let _=class extends g.Shape{constructor(d){super(d),this._updated=!0,this.anim=new O.Animation(()=>{const f=this._updated;return this._updated=!1,f}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(d){const f=this.animation(),m=this.frameIndex(),y=m*4,w=this.animations()[f],p=this.frameOffsets(),h=w[y+0],c=w[y+1],S=w[y+2],E=w[y+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(d.beginPath(),d.rect(0,0,S,E),d.closePath(),d.fillStrokeShape(this)),F)if(p){const u=p[f],s=m*2;d.drawImage(F,h,c,S,E,u[s+0],u[s+1],S,E)}else d.drawImage(F,h,c,S,E,0,0,S,E)}_hitFunc(d){const f=this.animation(),m=this.frameIndex(),y=m*4,w=this.animations()[f],p=this.frameOffsets(),h=w[y+2],c=w[y+3];if(d.beginPath(),p){const S=p[f],E=m*2;d.rect(S[E+0],S[E+1],h,c)}else d.rect(0,0,h,c);d.closePath(),d.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const d=this;this.interval=setInterval(function(){d._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const d=this.getLayer();this.anim.setLayers(d),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const d=this.frameIndex(),f=this.animation(),m=this.animations(),y=m[f],w=y.length/4;d<w-1?this.frameIndex(d+1):this.frameIndex(0)}};return Fr.Sprite=_,_.prototype.className="Sprite",(0,T._registerNode)(_),o.Factory.addGetterSetter(_,"animation"),o.Factory.addGetterSetter(_,"animations"),o.Factory.addGetterSetter(_,"frameOffsets"),o.Factory.addGetterSetter(_,"image"),o.Factory.addGetterSetter(_,"frameIndex",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"frameRate",17,(0,L.getNumberValidator)()),o.Factory.backCompat(_,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Fr}var Ar={},uu;function Kc(){if(uu)return Ar;uu=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Star=void 0;const o=St(),g=Xt(),O=Ct(),L=vt();let T=class extends g.Shape{_sceneFunc(a){const d=this.innerRadius(),f=this.outerRadius(),m=this.numPoints();a.beginPath(),a.moveTo(0,0-f);for(let y=1;y<m*2;y++){const w=y%2===0?f:d,p=w*Math.sin(y*Math.PI/m),h=-1*w*Math.cos(y*Math.PI/m);a.lineTo(p,h)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ar.Star=T,T.prototype.className="Star",T.prototype._centroid=!0,T.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,L._registerNode)(T),o.Factory.addGetterSetter(T,"numPoints",5,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(T,"innerRadius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(T,"outerRadius",0,(0,O.getNumberValidator)()),Ar}var jn={},hu;function rh(){if(hu)return jn;hu=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.Text=void 0,jn.stringToArray=a;const o=Dt(),g=St(),O=Xt(),L=vt(),T=Ct(),_=vt();function a(Y){return[...Y].reduce((W,tt,it,Q)=>{if(new RegExp("\\p{Emoji}","u").test(tt)){const D=Q[it+1];D&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(D)?(W.push(tt+D),Q[it+1]=""):W.push(tt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(tt+(Q[it+1]||""))?W.push(tt+Q[it+1]):it>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(tt)?W[W.length-1]+=tt:tt&&W.push(tt);return W},[])}const d="auto",f="center",m="inherit",y="justify",w="Change.konva",p="2d",h="-",c="left",S="text",E="Text",F="top",u="bottom",s="middle",v="normal",x="px ",M=" ",B="right",k="rtl",R="word",N="char",G="none",z="",V=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],j=V.length;function H(Y){return Y.split(",").map(W=>{W=W.trim();const tt=W.indexOf(" ")>=0,it=W.indexOf('"')>=0||W.indexOf("'")>=0;return tt&&!it&&(W=`"${W}"`),W}).join(", ")}let et;function C(){return et||(et=o.Util.createCanvasElement().getContext(p),et)}function P(Y){Y.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(Y){Y.setAttr("miterLimit",2),Y.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function b(Y){return Y=Y||{},!Y.fillLinearGradientColorStops&&!Y.fillRadialGradientColorStops&&!Y.fillPatternImage&&(Y.fill=Y.fill||"black"),Y}let U=class extends O.Shape{constructor(W){super(b(W)),this._partialTextX=0,this._partialTextY=0;for(let tt=0;tt<j;tt++)this.on(V[tt]+w,this._setTextData);this._setTextData()}_sceneFunc(W){const tt=this.textArr,it=tt.length;if(!this.text())return;let Q=this.padding(),D=this.fontSize(),X=this.lineHeight()*D,rt=this.verticalAlign(),st=this.direction(),at=0,ft=this.align(),ct=this.getWidth(),Et=this.letterSpacing(),gt=this.fill(),Bt=this.textDecoration(),kt=Bt.indexOf("underline")!==-1,bt=Bt.indexOf("line-through")!==-1,rn;st=st===m?W.direction:st;let Wt=X/2,vn=s;if(L.Konva._fixTextRendering){const Tt=this.measureSize("M");vn="alphabetic",Wt=(Tt.fontBoundingBoxAscent-Tt.fontBoundingBoxDescent)/2+X/2}for(st===k&&W.setAttr("direction",st),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",vn),W.setAttr("textAlign",c),rt===s?at=(this.getHeight()-it*X-Q*2)/2:rt===u&&(at=this.getHeight()-it*X-Q*2),W.translate(Q,at+Q),rn=0;rn<it;rn++){let Tt=0,_e=0;const Zt=tt[rn],Ke=Zt.text,$t=Zt.width,Ge=Zt.lastInParagraph;if(W.save(),ft===B?Tt+=ct-$t-Q*2:ft===f&&(Tt+=(ct-$t-Q*2)/2),kt){W.save(),W.beginPath();const Se=L.Konva._fixTextRendering?Math.round(D/4):Math.round(D/2),xe=Tt,te=Wt+_e+Se;W.moveTo(xe,te);const ee=ft===y&&!Ge?ct-Q*2:$t;W.lineTo(xe+Math.round(ee),te),W.lineWidth=D/15;const _n=this._getLinearGradient();W.strokeStyle=_n||gt,W.stroke(),W.restore()}if(bt){W.save(),W.beginPath();const Se=L.Konva._fixTextRendering?-Math.round(D/4):0;W.moveTo(Tt,Wt+_e+Se);const xe=ft===y&&!Ge?ct-Q*2:$t;W.lineTo(Tt+Math.round(xe),Wt+_e+Se),W.lineWidth=D/15;const te=this._getLinearGradient();W.strokeStyle=te||gt,W.stroke(),W.restore()}if(st!==k&&(Et!==0||ft===y)){const Se=Ke.split(" ").length-1,xe=a(Ke);for(let te=0;te<xe.length;te++){const ee=xe[te];ee===" "&&!Ge&&ft===y&&(Tt+=(ct-Q*2-$t)/Se),this._partialTextX=Tt,this._partialTextY=Wt+_e,this._partialText=ee,W.fillStrokeShape(this),Tt+=this.measureSize(ee).width+Et}}else Et!==0&&W.setAttr("letterSpacing",`${Et}px`),this._partialTextX=Tt,this._partialTextY=Wt+_e,this._partialText=Ke,W.fillStrokeShape(this);W.restore(),it>1&&(Wt+=X)}}_hitFunc(W){const tt=this.getWidth(),it=this.getHeight();W.beginPath(),W.rect(0,0,tt,it),W.closePath(),W.fillStrokeShape(this)}setText(W){const tt=o.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(S,tt),this}getWidth(){return this.attrs.width===d||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===d||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var tt,it,Q,D,X,rt,st,at,ft,ct,Et;let gt=C(),Bt=this.fontSize(),kt;gt.save(),gt.font=this._getContextFont(),kt=gt.measureText(W),gt.restore();const bt=Bt/100;return{actualBoundingBoxAscent:(tt=kt.actualBoundingBoxAscent)!==null&&tt!==void 0?tt:71.58203125*bt,actualBoundingBoxDescent:(it=kt.actualBoundingBoxDescent)!==null&&it!==void 0?it:0,actualBoundingBoxLeft:(Q=kt.actualBoundingBoxLeft)!==null&&Q!==void 0?Q:-7.421875*bt,actualBoundingBoxRight:(D=kt.actualBoundingBoxRight)!==null&&D!==void 0?D:75.732421875*bt,alphabeticBaseline:(X=kt.alphabeticBaseline)!==null&&X!==void 0?X:0,emHeightAscent:(rt=kt.emHeightAscent)!==null&&rt!==void 0?rt:100*bt,emHeightDescent:(st=kt.emHeightDescent)!==null&&st!==void 0?st:-20*bt,fontBoundingBoxAscent:(at=kt.fontBoundingBoxAscent)!==null&&at!==void 0?at:91*bt,fontBoundingBoxDescent:(ft=kt.fontBoundingBoxDescent)!==null&&ft!==void 0?ft:21*bt,hangingBaseline:(ct=kt.hangingBaseline)!==null&&ct!==void 0?ct:72.80000305175781*bt,ideographicBaseline:(Et=kt.ideographicBaseline)!==null&&Et!==void 0?Et:-21*bt,width:kt.width,height:Bt}}_getContextFont(){return this.fontStyle()+M+this.fontVariant()+M+(this.fontSize()+x)+H(this.fontFamily())}_addTextLine(W){this.align()===y&&(W=W.trim());const it=this._getTextWidth(W);return this.textArr.push({text:W,width:it,lastInParagraph:!1})}_getTextWidth(W){const tt=this.letterSpacing(),it=W.length;return C().measureText(W).width+tt*it}_setTextData(){let W=this.text().split(`
`),tt=+this.fontSize(),it=0,Q=this.lineHeight()*tt,D=this.attrs.width,X=this.attrs.height,rt=D!==d&&D!==void 0,st=X!==d&&X!==void 0,at=this.padding(),ft=D-at*2,ct=X-at*2,Et=0,gt=this.wrap(),Bt=gt!==G,kt=gt!==N&&Bt,bt=this.ellipsis();this.textArr=[],C().font=this._getContextFont();const rn=bt?this._getTextWidth(z):0;for(let Wt=0,vn=W.length;Wt<vn;++Wt){let Tt=W[Wt],_e=this._getTextWidth(Tt);if(rt&&_e>ft)for(;Tt.length>0;){let Zt=0,Ke=a(Tt).length,$t="",Ge=0;for(;Zt<Ke;){const Se=Zt+Ke>>>1,xe=a(Tt),te=xe.slice(0,Se+1).join(""),ee=this._getTextWidth(te);(bt&&st&&Et+Q>ct?ee+rn:ee)<=ft?(Zt=Se+1,$t=te,Ge=ee):Ke=Se}if($t){if(kt){const te=a(Tt),ee=a($t),_n=te[ee.length],ni=_n===M||_n===h;let An;if(ni&&Ge<=ft)An=ee.length;else{const ts=ee.lastIndexOf(M),es=ee.lastIndexOf(h);An=Math.max(ts,es)+1}An>0&&(Zt=An,$t=te.slice(0,Zt).join(""),Ge=this._getTextWidth($t))}if($t=$t.trimRight(),this._addTextLine($t),it=Math.max(it,Ge),Et+=Q,this._shouldHandleEllipsis(Et)){this._tryToAddEllipsisToLastLine();break}if(Tt=a(Tt).slice(Zt).join("").trimLeft(),Tt.length>0&&(_e=this._getTextWidth(Tt),_e<=ft)){this._addTextLine(Tt),Et+=Q,it=Math.max(it,_e);break}}else break}else this._addTextLine(Tt),Et+=Q,it=Math.max(it,_e),this._shouldHandleEllipsis(Et)&&Wt<vn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),st&&Et+Q>ct)break}this.textHeight=tt,this.textWidth=it}_shouldHandleEllipsis(W){const tt=+this.fontSize(),it=this.lineHeight()*tt,Q=this.attrs.height,D=Q!==d&&Q!==void 0,X=this.padding(),rt=Q-X*2;return!(this.wrap()!==G)||D&&W+it>rt}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,tt=W!==d&&W!==void 0,it=this.padding(),Q=W-it*2,D=this.ellipsis(),X=this.textArr[this.textArr.length-1];!X||!D||(tt&&(this._getTextWidth(X.text+z)<Q||(X.text=X.text.slice(0,X.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(X.text+z))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,tt=this.hasShadow();return W&&tt?!0:super._useBufferCanvas()}};return jn.Text=U,U.prototype._fillFunc=P,U.prototype._strokeFunc=I,U.prototype.className=E,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,_._registerNode)(U),g.Factory.overWriteSetter(U,"width",(0,T.getNumberOrAutoValidator)()),g.Factory.overWriteSetter(U,"height",(0,T.getNumberOrAutoValidator)()),g.Factory.addGetterSetter(U,"direction",m),g.Factory.addGetterSetter(U,"fontFamily","Arial"),g.Factory.addGetterSetter(U,"fontSize",12,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(U,"fontStyle",v),g.Factory.addGetterSetter(U,"fontVariant",v),g.Factory.addGetterSetter(U,"padding",0,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(U,"align",c),g.Factory.addGetterSetter(U,"verticalAlign",F),g.Factory.addGetterSetter(U,"lineHeight",1,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(U,"wrap",R),g.Factory.addGetterSetter(U,"ellipsis",!1,(0,T.getBooleanValidator)()),g.Factory.addGetterSetter(U,"letterSpacing",0,(0,T.getNumberValidator)()),g.Factory.addGetterSetter(U,"text","",(0,T.getStringValidator)()),g.Factory.addGetterSetter(U,"textDecoration",""),jn}var Mr={},cu;function Yc(){if(cu)return Mr;cu=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.TextPath=void 0;const o=Dt(),g=St(),O=Xt(),L=Ga(),T=rh(),_=Ct(),a=vt(),d="",f="normal";function m(p){p.fillText(this.partialText,0,0)}function y(p){p.strokeText(this.partialText,0,0)}let w=class extends O.Shape{constructor(h){super(h),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return L.Path.getPathLength(this.dataArray)}_getPointAtLength(h){if(!this.attrs.data)return null;const c=this.pathLength;return h-1>c?null:L.Path.getPointAtLengthOfDataArray(h,this.dataArray)}_readDataAttribute(){this.dataArray=L.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(h){h.setAttr("font",this._getContextFont()),h.setAttr("textBaseline",this.textBaseline()),h.setAttr("textAlign","left"),h.save();const c=this.textDecoration(),S=this.fill(),E=this.fontSize(),F=this.glyphInfo;c==="underline"&&h.beginPath();for(let u=0;u<F.length;u++){h.save();const s=F[u].p0;h.translate(s.x,s.y),h.rotate(F[u].rotation),this.partialText=F[u].text,h.fillStrokeShape(this),c==="underline"&&(u===0&&h.moveTo(0,E/2+1),h.lineTo(E,E/2+1)),h.restore()}c==="underline"&&(h.strokeStyle=S,h.lineWidth=E/20,h.stroke()),h.restore()}_hitFunc(h){h.beginPath();const c=this.glyphInfo;if(c.length>=1){const S=c[0].p0;h.moveTo(S.x,S.y)}for(let S=0;S<c.length;S++){const E=c[S].p1;h.lineTo(E.x,E.y)}h.setAttr("lineWidth",this.fontSize()),h.setAttr("strokeStyle",this.colorKey),h.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(h){return T.Text.prototype.setText.call(this,h)}_getContextFont(){return T.Text.prototype._getContextFont.call(this)}_getTextSize(h){const S=this.dummyCanvas.getContext("2d");S.save(),S.font=this._getContextFont();const E=S.measureText(h);return S.restore(),{width:E.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:h,height:c}=this._getTextSize(this.attrs.text);if(this.textWidth=h,this.textHeight=c,this.glyphInfo=[],!this.attrs.data)return null;const S=this.letterSpacing(),E=this.align(),F=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*S,0);let s=0;E==="center"&&(s=Math.max(0,this.pathLength/2-u/2)),E==="right"&&(s=Math.max(0,this.pathLength-u));const v=(0,T.stringToArray)(this.text());let x=s;for(let M=0;M<v.length;M++){const B=this._getPointAtLength(x);if(!B)return;let k=this._getTextSize(v[M]).width+S;if(v[M]===" "&&E==="justify"){const j=this.text().split(" ").length-1;k+=(this.pathLength-u)/j}const R=this._getPointAtLength(x+k);if(!R)return;const N=L.Path.getLineLength(B.x,B.y,R.x,R.y);let G=0;if(F)try{G=F(v[M-1],v[M])*this.fontSize()}catch{G=0}B.x+=G,R.x+=G,this.textWidth+=G;const z=L.Path.getPointOnLine(G+N/2,B.x,B.y,R.x,R.y),V=Math.atan2(R.y-B.y,R.x-B.x);this.glyphInfo.push({transposeX:z.x,transposeY:z.y,text:v[M],rotation:V,p0:B,p1:R}),x+=k}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const h=[];this.glyphInfo.forEach(function(x){h.push(x.p0.x),h.push(x.p0.y),h.push(x.p1.x),h.push(x.p1.y)});let c=h[0]||0,S=h[0]||0,E=h[1]||0,F=h[1]||0,u,s;for(let x=0;x<h.length/2;x++)u=h[x*2],s=h[x*2+1],c=Math.min(c,u),S=Math.max(S,u),E=Math.min(E,s),F=Math.max(F,s);const v=this.fontSize();return{x:c-v/2,y:E-v/2,width:S-c+v,height:F-E+v}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Mr.TextPath=w,w.prototype._fillFunc=m,w.prototype._strokeFunc=y,w.prototype._fillFuncHit=m,w.prototype._strokeFuncHit=y,w.prototype.className="TextPath",w.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(w),g.Factory.addGetterSetter(w,"data"),g.Factory.addGetterSetter(w,"fontFamily","Arial"),g.Factory.addGetterSetter(w,"fontSize",12,(0,_.getNumberValidator)()),g.Factory.addGetterSetter(w,"fontStyle",f),g.Factory.addGetterSetter(w,"align","left"),g.Factory.addGetterSetter(w,"letterSpacing",0,(0,_.getNumberValidator)()),g.Factory.addGetterSetter(w,"textBaseline","middle"),g.Factory.addGetterSetter(w,"fontVariant",f),g.Factory.addGetterSetter(w,"text",d),g.Factory.addGetterSetter(w,"textDecoration",""),g.Factory.addGetterSetter(w,"kerningFunc",void 0),Mr}var Lr={},du;function Xc(){if(du)return Lr;du=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Transformer=void 0;const o=Dt(),g=St(),O=Ut(),L=Xt(),T=nh(),_=Ia(),a=vt(),d=Ct(),f=vt(),m="tr-konva",y=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(k=>k+`.${m}`).join(" "),w="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],h={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},c="ontouchstart"in a.Konva._global;function S(k,R,N){if(k==="rotater")return N;R+=o.Util.degToRad(h[k]||0);const G=(o.Util.radToDeg(R)%360+360)%360;return o.Util._inRange(G,315+22.5,360)||o.Util._inRange(G,0,22.5)?"ns-resize":o.Util._inRange(G,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(G,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(G,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(G,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(G,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(G,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(G,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+G),"pointer")}const E=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function F(k){return{x:k.x+k.width/2*Math.cos(k.rotation)+k.height/2*Math.sin(-k.rotation),y:k.y+k.height/2*Math.cos(k.rotation)+k.width/2*Math.sin(k.rotation)}}function u(k,R,N){const G=N.x+(k.x-N.x)*Math.cos(R)-(k.y-N.y)*Math.sin(R),z=N.y+(k.x-N.x)*Math.sin(R)+(k.y-N.y)*Math.cos(R);return{...k,rotation:k.rotation+R,x:G,y:z}}function s(k,R){const N=F(k);return u(k,R,N)}function v(k,R,N){let G=R;for(let z=0;z<k.length;z++){const V=a.Konva.getAngle(k[z]),j=Math.abs(V-R)%(Math.PI*2);Math.min(j,Math.PI*2-j)<N&&(G=V)}return G}let x=0,M=class extends _.Group{constructor(R){super(R),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(y,this.update),this.getNode()&&this.update()}attachTo(R){return this.setNode(R),this}setNode(R){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([R])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return m+this._id}setNodes(R=[]){this._nodes&&this._nodes.length&&this.detach();const N=R.filter(z=>z.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=R=N,R.length===1&&this.useSingleNodeRotation()?this.rotation(R[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(z=>{const V=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(z._attrsAffectingSize.length){const j=z._attrsAffectingSize.map(H=>H+"Change."+this._getEventNamespace()).join(" ");z.on(j,V)}z.on(p.map(j=>j+`.${this._getEventNamespace()}`).join(" "),V),z.on(`absoluteTransformChange.${this._getEventNamespace()}`,V),this._proxyDrag(z)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(R){let N;R.on(`dragstart.${this._getEventNamespace()}`,G=>{N=R.getAbsolutePosition(),!this.isDragging()&&R!==this.findOne(".back")&&this.startDrag(G,!1)}),R.on(`dragmove.${this._getEventNamespace()}`,G=>{if(!N)return;const z=R.getAbsolutePosition(),V=z.x-N.x,j=z.y-N.y;this.nodes().forEach(H=>{if(H===R||H.isDragging())return;const et=H.getAbsolutePosition();H.setAbsolutePosition({x:et.x+V,y:et.y+j}),H.startDrag(G)}),N=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(R=>{R.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(w),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(w,this.__getNodeRect)}__getNodeShape(R,N=this.rotation(),G){const z=R.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),V=R.getAbsoluteScale(G),j=R.getAbsolutePosition(G),H=z.x*V.x-R.offsetX()*V.x,et=z.y*V.y-R.offsetY()*V.y,C=(a.Konva.getAngle(R.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),P={x:j.x+H*Math.cos(C)+et*Math.sin(-C),y:j.y+et*Math.cos(C)+H*Math.sin(C),width:z.width*V.x,height:z.height*V.y,rotation:C};return u(P,-a.Konva.getAngle(N),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const N=[];this.nodes().map(C=>{const P=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}],b=C.getAbsoluteTransform();I.forEach(function(U){const Y=b.point(U);N.push(Y)})});const G=new o.Transform;G.rotate(-a.Konva.getAngle(this.rotation()));let z=1/0,V=1/0,j=-1/0,H=-1/0;N.forEach(function(C){const P=G.point(C);z===void 0&&(z=j=P.x,V=H=P.y),z=Math.min(z,P.x),V=Math.min(V,P.y),j=Math.max(j,P.x),H=Math.max(H,P.y)}),G.invert();const et=G.point({x:z,y:V});return{x:et.x,y:et.y,width:j-z,height:H-V,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),E.forEach(R=>{this._createAnchor(R)}),this._createAnchor("rotater")}_createAnchor(R){const N=new T.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:R+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:c?10:"auto"}),G=this;N.on("mousedown touchstart",function(z){G._handleMouseDown(z)}),N.on("dragstart",z=>{N.stopDrag(),z.cancelBubble=!0}),N.on("dragend",z=>{z.cancelBubble=!0}),N.on("mouseenter",()=>{const z=a.Konva.getAngle(this.rotation()),V=this.rotateAnchorCursor(),j=S(R,z,V);N.getStage().content&&(N.getStage().content.style.cursor=j),this._cursorChange=!0}),N.on("mouseout",()=>{N.getStage().content&&(N.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(N)}_createBack(){const R=new L.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(N,G){const z=G.getParent(),V=z.padding();N.beginPath(),N.rect(-V,-V,G.width()+V*2,G.height()+V*2),N.moveTo(G.width()/2,-V),z.rotateEnabled()&&z.rotateLineVisible()&&N.lineTo(G.width()/2,-z.rotateAnchorOffset()*o.Util._sign(G.height())-V),N.fillStrokeShape(G)},hitFunc:(N,G)=>{if(!this.shouldOverdrawWholeArea())return;const z=this.padding();N.beginPath(),N.rect(-z,-z,G.width()+z*2,G.height()+z*2),N.fillStrokeShape(G)}});this.add(R),this._proxyDrag(R),R.on("dragstart",N=>{N.cancelBubble=!0}),R.on("dragmove",N=>{N.cancelBubble=!0}),R.on("dragend",N=>{N.cancelBubble=!0}),this.on("dragmove",N=>{this.update()})}_handleMouseDown(R){if(this._transforming)return;this._movingAnchorName=R.target.name().split(" ")[0];const N=this._getNodeRect(),G=N.width,z=N.height,V=Math.sqrt(Math.pow(G,2)+Math.pow(z,2));this.sin=Math.abs(z/V),this.cos=Math.abs(G/V),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const j=R.target.getAbsolutePosition(),H=R.target.getStage().getPointerPosition();this._anchorDragOffset={x:H.x-j.x,y:H.y-j.y},x++,this._fire("transformstart",{evt:R.evt,target:this.getNode()}),this._nodes.forEach(et=>{et._fire("transformstart",{evt:R.evt,target:et})})}_handleMouseMove(R){let N,G,z;const V=this.findOne("."+this._movingAnchorName),j=V.getStage();j.setPointersPositions(R);const H=j.getPointerPosition();let et={x:H.x-this._anchorDragOffset.x,y:H.y-this._anchorDragOffset.y};const C=V.getAbsolutePosition();this.anchorDragBoundFunc()&&(et=this.anchorDragBoundFunc()(C,et,R)),V.setAbsolutePosition(et);const P=V.getAbsolutePosition();if(C.x===P.x&&C.y===P.y)return;if(this._movingAnchorName==="rotater"){const Q=this._getNodeRect();N=V.x()-Q.width/2,G=-V.y()+Q.height/2;let D=Math.atan2(-G,N)+Math.PI/2;Q.height<0&&(D-=Math.PI);const rt=a.Konva.getAngle(this.rotation())+D,st=a.Konva.getAngle(this.rotationSnapTolerance()),ft=v(this.rotationSnaps(),rt,st)-Q.rotation,ct=s(Q,ft);this._fitNodesInto(ct,R);return}const I=this.shiftBehavior();let b;I==="inverted"?b=this.keepRatio()&&!R.shiftKey:I==="none"?b=this.keepRatio():b=this.keepRatio()||R.shiftKey;let U=this.centeredScaling()||R.altKey;if(this._movingAnchorName==="top-left"){if(b){const Q=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};z=Math.sqrt(Math.pow(Q.x-V.x(),2)+Math.pow(Q.y-V.y(),2));const D=this.findOne(".top-left").x()>Q.x?-1:1,X=this.findOne(".top-left").y()>Q.y?-1:1;N=z*this.cos*D,G=z*this.sin*X,this.findOne(".top-left").x(Q.x-N),this.findOne(".top-left").y(Q.y-G)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(V.y());else if(this._movingAnchorName==="top-right"){if(b){const Q=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};z=Math.sqrt(Math.pow(V.x()-Q.x,2)+Math.pow(Q.y-V.y(),2));const D=this.findOne(".top-right").x()<Q.x?-1:1,X=this.findOne(".top-right").y()>Q.y?-1:1;N=z*this.cos*D,G=z*this.sin*X,this.findOne(".top-right").x(Q.x+N),this.findOne(".top-right").y(Q.y-G)}var Y=V.position();this.findOne(".top-left").y(Y.y),this.findOne(".bottom-right").x(Y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(V.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(V.x());else if(this._movingAnchorName==="bottom-left"){if(b){const Q=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};z=Math.sqrt(Math.pow(Q.x-V.x(),2)+Math.pow(V.y()-Q.y,2));const D=Q.x<V.x()?-1:1,X=V.y()<Q.y?-1:1;N=z*this.cos*D,G=z*this.sin*X,V.x(Q.x-N),V.y(Q.y+G)}Y=V.position(),this.findOne(".top-left").x(Y.x),this.findOne(".bottom-right").y(Y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(V.y());else if(this._movingAnchorName==="bottom-right"){if(b){const Q=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};z=Math.sqrt(Math.pow(V.x()-Q.x,2)+Math.pow(V.y()-Q.y,2));const D=this.findOne(".bottom-right").x()<Q.x?-1:1,X=this.findOne(".bottom-right").y()<Q.y?-1:1;N=z*this.cos*D,G=z*this.sin*X,this.findOne(".bottom-right").x(Q.x+N),this.findOne(".bottom-right").y(Q.y+G)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(U=this.centeredScaling()||R.altKey,U){const Q=this.findOne(".top-left"),D=this.findOne(".bottom-right"),X=Q.x(),rt=Q.y(),st=this.getWidth()-D.x(),at=this.getHeight()-D.y();D.move({x:-X,y:-rt}),Q.move({x:st,y:at})}const W=this.findOne(".top-left").getAbsolutePosition();N=W.x,G=W.y;const tt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),it=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:N,y:G,width:tt,height:it,rotation:a.Konva.getAngle(this.rotation())},R)}_handleMouseUp(R){this._removeEvents(R)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(R){var N;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const G=this.getNode();x--,this._fire("transformend",{evt:R,target:G}),(N=this.getLayer())===null||N===void 0||N.batchDraw(),G&&this._nodes.forEach(z=>{var V;z._fire("transformend",{evt:R,target:z}),(V=z.getLayer())===null||V===void 0||V.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(R,N){const G=this._getNodeRect(),z=1;if(o.Util._inRange(R.width,-this.padding()*2-z,z)){this.update();return}if(o.Util._inRange(R.height,-this.padding()*2-z,z)){this.update();return}const V=new o.Transform;if(V.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("left")>=0){const b=V.point({x:-this.padding()*2,y:0});R.x+=b.x,R.y+=b.y,R.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y}else if(this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("right")>=0){const b=V.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,R.width+=this.padding()*2}if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("top")>=0){const b=V.point({x:0,y:-this.padding()*2});R.x+=b.x,R.y+=b.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,R.height+=this.padding()*2}else if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const b=V.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,R.height+=this.padding()*2}if(this.boundBoxFunc()){const b=this.boundBoxFunc()(G,R);b?R=b:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const j=1e7,H=new o.Transform;H.translate(G.x,G.y),H.rotate(G.rotation),H.scale(G.width/j,G.height/j);const et=new o.Transform,C=R.width/j,P=R.height/j;this.flipEnabled()===!1?(et.translate(R.x,R.y),et.rotate(R.rotation),et.translate(R.width<0?R.width:0,R.height<0?R.height:0),et.scale(Math.abs(C),Math.abs(P))):(et.translate(R.x,R.y),et.rotate(R.rotation),et.scale(C,P));const I=et.multiply(H.invert());this._nodes.forEach(b=>{var U;const Y=b.getParent().getAbsoluteTransform(),W=b.getTransform().copy();W.translate(b.offsetX(),b.offsetY());const tt=new o.Transform;tt.multiply(Y.copy().invert()).multiply(I).multiply(Y).multiply(W);const it=tt.decompose();b.setAttrs(it),(U=b.getLayer())===null||U===void 0||U.batchDraw()}),this.rotation(o.Util._getRotation(R.rotation)),this._nodes.forEach(b=>{this._fire("transform",{evt:N,target:b}),b._fire("transform",{evt:N,target:b})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(R,N){this.findOne(R).setAttrs(N)}update(){var R;const N=this._getNodeRect();this.rotation(o.Util._getRotation(N.rotation));const G=N.width,z=N.height,V=this.enabledAnchors(),j=this.resizeEnabled(),H=this.padding(),et=this.anchorSize(),C=this.find("._anchor");C.forEach(I=>{I.setAttrs({width:et,height:et,offsetX:et/2,offsetY:et/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:et/2+H,offsetY:et/2+H,visible:j&&V.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:G/2,y:0,offsetY:et/2+H,visible:j&&V.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:G,y:0,offsetX:et/2-H,offsetY:et/2+H,visible:j&&V.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:z/2,offsetX:et/2+H,visible:j&&V.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:G,y:z/2,offsetX:et/2-H,visible:j&&V.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:z,offsetX:et/2+H,offsetY:et/2-H,visible:j&&V.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:G/2,y:z,offsetY:et/2-H,visible:j&&V.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:G,y:z,offsetX:et/2-H,offsetY:et/2-H,visible:j&&V.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:G/2,y:-this.rotateAnchorOffset()*o.Util._sign(z)-H,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:G,height:z,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const P=this.anchorStyleFunc();P&&C.forEach(I=>{P(I)}),(R=this.getLayer())===null||R===void 0||R.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const R=this.findOne("."+this._movingAnchorName);R&&R.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),_.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return O.Node.prototype.toObject.call(this)}clone(R){return O.Node.prototype.clone.call(this,R)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Lr.Transformer=M,M.isTransforming=()=>x>0;function B(k){return k instanceof Array||o.Util.warn("enabledAnchors value should be an array"),k instanceof Array&&k.forEach(function(R){E.indexOf(R)===-1&&o.Util.warn("Unknown anchor name: "+R+". Available names are: "+E.join(", "))}),k||[]}return M.prototype.className="Transformer",(0,f._registerNode)(M),g.Factory.addGetterSetter(M,"enabledAnchors",E,B),g.Factory.addGetterSetter(M,"flipEnabled",!0,(0,d.getBooleanValidator)()),g.Factory.addGetterSetter(M,"resizeEnabled",!0),g.Factory.addGetterSetter(M,"anchorSize",10,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"rotateEnabled",!0),g.Factory.addGetterSetter(M,"rotateLineVisible",!0),g.Factory.addGetterSetter(M,"rotationSnaps",[]),g.Factory.addGetterSetter(M,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"rotateAnchorCursor","crosshair"),g.Factory.addGetterSetter(M,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"borderEnabled",!0),g.Factory.addGetterSetter(M,"anchorStroke","rgb(0, 161, 255)"),g.Factory.addGetterSetter(M,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"anchorFill","white"),g.Factory.addGetterSetter(M,"anchorCornerRadius",0,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"borderStroke","rgb(0, 161, 255)"),g.Factory.addGetterSetter(M,"borderStrokeWidth",1,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"borderDash"),g.Factory.addGetterSetter(M,"keepRatio",!0),g.Factory.addGetterSetter(M,"shiftBehavior","default"),g.Factory.addGetterSetter(M,"centeredScaling",!1),g.Factory.addGetterSetter(M,"ignoreStroke",!1),g.Factory.addGetterSetter(M,"padding",0,(0,d.getNumberValidator)()),g.Factory.addGetterSetter(M,"nodes"),g.Factory.addGetterSetter(M,"node"),g.Factory.addGetterSetter(M,"boundBoxFunc"),g.Factory.addGetterSetter(M,"anchorDragBoundFunc"),g.Factory.addGetterSetter(M,"anchorStyleFunc"),g.Factory.addGetterSetter(M,"shouldOverdrawWholeArea",!1),g.Factory.addGetterSetter(M,"useSingleNodeRotation",!0),g.Factory.backCompat(M,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Lr}var br={},fu;function Qc(){if(fu)return br;fu=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Wedge=void 0;const o=St(),g=Xt(),O=vt(),L=Ct(),T=vt();let _=class extends g.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.radius(),0,O.Konva.getAngle(this.angle()),this.clockwise()),d.lineTo(0,0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return br.Wedge=_,_.prototype.className="Wedge",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["radius"],(0,T._registerNode)(_),o.Factory.addGetterSetter(_,"radius",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"angle",0,(0,L.getNumberValidator)()),o.Factory.addGetterSetter(_,"clockwise",!1),o.Factory.backCompat(_,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),br}var Or={},gu;function Jc(){if(gu)return Or;gu=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Blur=void 0;const o=St(),g=Ut(),O=Ct();function L(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const T=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(f,m){const y=f.data,w=f.width,p=f.height;let h,c,S,E,F,u,s,v,x,M,B,k,R,N,G,z,V,j,H,et;const C=m+m+1,P=w-1,I=p-1,b=m+1,U=b*(b+1)/2,Y=new L,W=T[m],tt=_[m];let it=null,Q=Y,D=null,X=null;for(let rt=1;rt<C;rt++)Q=Q.next=new L,rt===b&&(it=Q);Q.next=Y,S=c=0;for(let rt=0;rt<p;rt++){k=R=N=G=E=F=u=s=0,v=b*(z=y[c]),x=b*(V=y[c+1]),M=b*(j=y[c+2]),B=b*(H=y[c+3]),E+=U*z,F+=U*V,u+=U*j,s+=U*H,Q=Y;for(let st=0;st<b;st++)Q.r=z,Q.g=V,Q.b=j,Q.a=H,Q=Q.next;for(let st=1;st<b;st++)h=c+((P<st?P:st)<<2),E+=(Q.r=z=y[h])*(et=b-st),F+=(Q.g=V=y[h+1])*et,u+=(Q.b=j=y[h+2])*et,s+=(Q.a=H=y[h+3])*et,k+=z,R+=V,N+=j,G+=H,Q=Q.next;D=Y,X=it;for(let st=0;st<w;st++)y[c+3]=H=s*W>>tt,H!==0?(H=255/H,y[c]=(E*W>>tt)*H,y[c+1]=(F*W>>tt)*H,y[c+2]=(u*W>>tt)*H):y[c]=y[c+1]=y[c+2]=0,E-=v,F-=x,u-=M,s-=B,v-=D.r,x-=D.g,M-=D.b,B-=D.a,h=S+((h=st+m+1)<P?h:P)<<2,k+=D.r=y[h],R+=D.g=y[h+1],N+=D.b=y[h+2],G+=D.a=y[h+3],E+=k,F+=R,u+=N,s+=G,D=D.next,v+=z=X.r,x+=V=X.g,M+=j=X.b,B+=H=X.a,k-=z,R-=V,N-=j,G-=H,X=X.next,c+=4;S+=w}for(let rt=0;rt<w;rt++){R=N=G=k=F=u=s=E=0,c=rt<<2,v=b*(z=y[c]),x=b*(V=y[c+1]),M=b*(j=y[c+2]),B=b*(H=y[c+3]),E+=U*z,F+=U*V,u+=U*j,s+=U*H,Q=Y;for(let at=0;at<b;at++)Q.r=z,Q.g=V,Q.b=j,Q.a=H,Q=Q.next;let st=w;for(let at=1;at<=m;at++)c=st+rt<<2,E+=(Q.r=z=y[c])*(et=b-at),F+=(Q.g=V=y[c+1])*et,u+=(Q.b=j=y[c+2])*et,s+=(Q.a=H=y[c+3])*et,k+=z,R+=V,N+=j,G+=H,Q=Q.next,at<I&&(st+=w);c=rt,D=Y,X=it;for(let at=0;at<p;at++)h=c<<2,y[h+3]=H=s*W>>tt,H>0?(H=255/H,y[h]=(E*W>>tt)*H,y[h+1]=(F*W>>tt)*H,y[h+2]=(u*W>>tt)*H):y[h]=y[h+1]=y[h+2]=0,E-=v,F-=x,u-=M,s-=B,v-=D.r,x-=D.g,M-=D.b,B-=D.a,h=rt+((h=at+b)<I?h:I)*w<<2,E+=k+=D.r=y[h],F+=R+=D.g=y[h+1],u+=N+=D.b=y[h+2],s+=G+=D.a=y[h+3],D=D.next,v+=z=X.r,x+=V=X.g,M+=j=X.b,B+=H=X.a,k-=z,R-=V,N-=j,G-=H,X=X.next,c+=w}}const d=function(m){const y=Math.round(this.blurRadius());y>0&&a(m,y)};return Or.Blur=d,o.Factory.addGetterSetter(g.Node,"blurRadius",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Or}var Ir={},pu;function Zc(){if(pu)return Ir;pu=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Brighten=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=this.brightness()*255,a=T.data,d=a.length;for(let f=0;f<d;f+=4)a[f]+=_,a[f+1]+=_,a[f+2]+=_};return Ir.Brighten=L,o.Factory.addGetterSetter(g.Node,"brightness",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Ir}var Dr={},mu;function $c(){if(mu)return Dr;mu=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Contrast=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=Math.pow((this.contrast()+100)/100,2),a=T.data,d=a.length;let f=150,m=150,y=150;for(let w=0;w<d;w+=4)f=a[w],m=a[w+1],y=a[w+2],f/=255,f-=.5,f*=_,f+=.5,f*=255,m/=255,m-=.5,m*=_,m+=.5,m*=255,y/=255,y-=.5,y*=_,y+=.5,y*=255,f=f<0?0:f>255?255:f,m=m<0?0:m>255?255:m,y=y<0?0:y>255?255:y,a[w]=f,a[w+1]=m,a[w+2]=y};return Dr.Contrast=L,o.Factory.addGetterSetter(g.Node,"contrast",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Dr}var Gr={},yu;function td(){if(yu)return Gr;yu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Emboss=void 0;const o=St(),g=Ut(),O=Dt(),L=Ct(),T=function(_){const a=this.embossStrength()*10,d=this.embossWhiteLevel()*255,f=this.embossDirection(),m=this.embossBlend(),y=_.data,w=_.width,p=_.height,h=w*4;let c=0,S=0,E=p;switch(f){case"top-left":c=-1,S=-1;break;case"top":c=-1,S=0;break;case"top-right":c=-1,S=1;break;case"right":c=0,S=1;break;case"bottom-right":c=1,S=1;break;case"bottom":c=1,S=0;break;case"bottom-left":c=1,S=-1;break;case"left":c=0,S=-1;break;default:O.Util.error("Unknown emboss direction: "+f)}do{const F=(E-1)*h;let u=c;E+u<1&&(u=0),E+u>p&&(u=0);const s=(E-1+u)*w*4;let v=w;do{const x=F+(v-1)*4;let M=S;v+M<1&&(M=0),v+M>w&&(M=0);const B=s+(v-1+M)*4,k=y[x]-y[B],R=y[x+1]-y[B+1],N=y[x+2]-y[B+2];let G=k;const z=G>0?G:-G,V=R>0?R:-R,j=N>0?N:-N;if(V>z&&(G=R),j>z&&(G=N),G*=a,m){const H=y[x]+G,et=y[x+1]+G,C=y[x+2]+G;y[x]=H>255?255:H<0?0:H,y[x+1]=et>255?255:et<0?0:et,y[x+2]=C>255?255:C<0?0:C}else{let H=d-G;H<0?H=0:H>255&&(H=255),y[x]=y[x+1]=y[x+2]=H}}while(--v)}while(--E)};return Gr.Emboss=T,o.Factory.addGetterSetter(g.Node,"embossStrength",.5,(0,L.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"embossWhiteLevel",.5,(0,L.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"embossDirection","top-left",void 0,o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"embossBlend",!1,void 0,o.Factory.afterSetFilter),Gr}var Ur={},vu;function ed(){if(vu)return Ur;vu=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Enhance=void 0;const o=St(),g=Ut(),O=Ct();function L(_,a,d,f,m){const y=d-a,w=m-f;if(y===0)return f+w/2;if(w===0)return f;let p=(_-a)/y;return p=w*p+f,p}const T=function(_){const a=_.data,d=a.length;let f=a[0],m=f,y,w=a[1],p=w,h,c=a[2],S=c,E;const F=this.enhance();if(F===0)return;for(let k=0;k<d;k+=4)y=a[k+0],y<f?f=y:y>m&&(m=y),h=a[k+1],h<w?w=h:h>p&&(p=h),E=a[k+2],E<c?c=E:E>S&&(S=E);m===f&&(m=255,f=0),p===w&&(p=255,w=0),S===c&&(S=255,c=0);let u,s,v,x,M,B;if(F>0)u=m+F*(255-m),s=f-F*(f-0),v=p+F*(255-p),x=w-F*(w-0),M=S+F*(255-S),B=c-F*(c-0);else{const k=(m+f)*.5;u=m+F*(m-k),s=f+F*(f-k);const R=(p+w)*.5;v=p+F*(p-R),x=w+F*(w-R);const N=(S+c)*.5;M=S+F*(S-N),B=c+F*(c-N)}for(let k=0;k<d;k+=4)a[k+0]=L(a[k+0],f,m,s,u),a[k+1]=L(a[k+1],w,p,x,v),a[k+2]=L(a[k+2],c,S,B,M)};return Ur.Enhance=T,o.Factory.addGetterSetter(g.Node,"enhance",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Ur}var zr={},_u;function nd(){if(_u)return zr;_u=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.Grayscale=void 0;const o=function(g){const O=g.data,L=O.length;for(let T=0;T<L;T+=4){const _=.34*O[T]+.5*O[T+1]+.16*O[T+2];O[T]=_,O[T+1]=_,O[T+2]=_}};return zr.Grayscale=o,zr}var Br={},Su;function rd(){if(Su)return Br;Su=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HSL=void 0;const o=St(),g=Ut(),O=Ct();o.Factory.addGetterSetter(g.Node,"hue",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"saturation",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"luminance",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter);const L=function(T){const _=T.data,a=_.length,d=1,f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,y=this.luminance()*127,w=d*f*Math.cos(m*Math.PI/180),p=d*f*Math.sin(m*Math.PI/180),h=.299*d+.701*w+.167*p,c=.587*d-.587*w+.33*p,S=.114*d-.114*w-.497*p,E=.299*d-.299*w-.328*p,F=.587*d+.413*w+.035*p,u=.114*d-.114*w+.293*p,s=.299*d-.3*w+1.25*p,v=.587*d-.586*w-1.05*p,x=.114*d+.886*w-.2*p;let M,B,k,R;for(let N=0;N<a;N+=4)M=_[N+0],B=_[N+1],k=_[N+2],R=_[N+3],_[N+0]=h*M+c*B+S*k+y,_[N+1]=E*M+F*B+u*k+y,_[N+2]=s*M+v*B+x*k+y,_[N+3]=R};return Br.HSL=L,Br}var Hr={},Cu;function id(){if(Cu)return Hr;Cu=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HSV=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=T.data,a=_.length,d=Math.pow(2,this.value()),f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,y=d*f*Math.cos(m*Math.PI/180),w=d*f*Math.sin(m*Math.PI/180),p=.299*d+.701*y+.167*w,h=.587*d-.587*y+.33*w,c=.114*d-.114*y-.497*w,S=.299*d-.299*y-.328*w,E=.587*d+.413*y+.035*w,F=.114*d-.114*y+.293*w,u=.299*d-.3*y+1.25*w,s=.587*d-.586*y-1.05*w,v=.114*d+.886*y-.2*w;for(let x=0;x<a;x+=4){const M=_[x+0],B=_[x+1],k=_[x+2],R=_[x+3];_[x+0]=p*M+h*B+c*k,_[x+1]=S*M+E*B+F*k,_[x+2]=u*M+s*B+v*k,_[x+3]=R}};return Hr.HSV=L,o.Factory.addGetterSetter(g.Node,"hue",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"saturation",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"value",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Hr}var Vr={},wu;function sd(){if(wu)return Vr;wu=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Invert=void 0;const o=function(g){const O=g.data,L=O.length;for(let T=0;T<L;T+=4)O[T]=255-O[T],O[T+1]=255-O[T+1],O[T+2]=255-O[T+2]};return Vr.Invert=o,Vr}var Wr={},xu;function ad(){if(xu)return Wr;xu=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Kaleidoscope=void 0;const o=St(),g=Ut(),O=Dt(),L=Ct(),T=function(d,f,m){const y=d.data,w=f.data,p=d.width,h=d.height,c=m.polarCenterX||p/2,S=m.polarCenterY||h/2;let E=Math.sqrt(c*c+S*S),F=p-c,u=h-S;const s=Math.sqrt(F*F+u*u);E=s>E?s:E;const v=h,x=p,M=360/x*Math.PI/180;for(let B=0;B<x;B+=1){const k=Math.sin(B*M),R=Math.cos(B*M);for(let N=0;N<v;N+=1){F=Math.floor(c+E*N/v*R),u=Math.floor(S+E*N/v*k);let G=(u*p+F)*4;const z=y[G+0],V=y[G+1],j=y[G+2],H=y[G+3];G=(B+N*p)*4,w[G+0]=z,w[G+1]=V,w[G+2]=j,w[G+3]=H}}},_=function(d,f,m){const y=d.data,w=f.data,p=d.width,h=d.height,c=m.polarCenterX||p/2,S=m.polarCenterY||h/2;let E=Math.sqrt(c*c+S*S),F=p-c,u=h-S;const s=Math.sqrt(F*F+u*u);E=s>E?s:E;const v=h,x=p,M=0;let B,k;for(F=0;F<p;F+=1)for(u=0;u<h;u+=1){const R=F-c,N=u-S,G=Math.sqrt(R*R+N*N)*v/E;let z=(Math.atan2(N,R)*180/Math.PI+360+M)%360;z=z*x/360,B=Math.floor(z),k=Math.floor(G);let V=(k*p+B)*4;const j=y[V+0],H=y[V+1],et=y[V+2],C=y[V+3];V=(u*p+F)*4,w[V+0]=j,w[V+1]=H,w[V+2]=et,w[V+3]=C}},a=function(d){const f=d.width,m=d.height;let y,w,p,h,c,S,E,F,u,s,v=Math.round(this.kaleidoscopePower());const x=Math.round(this.kaleidoscopeAngle()),M=Math.floor(f*(x%360)/360);if(v<1)return;const B=O.Util.createCanvasElement();B.width=f,B.height=m;const k=B.getContext("2d").getImageData(0,0,f,m);O.Util.releaseCanvas(B),T(d,k,{polarCenterX:f/2,polarCenterY:m/2});let R=f/Math.pow(2,v);for(;R<=8;)R=R*2,v-=1;R=Math.ceil(R);let N=R,G=0,z=N,V=1;for(M+R>f&&(G=N,z=0,V=-1),w=0;w<m;w+=1)for(y=G;y!==z;y+=V)p=Math.round(y+M)%f,u=(f*w+p)*4,c=k.data[u+0],S=k.data[u+1],E=k.data[u+2],F=k.data[u+3],s=(f*w+y)*4,k.data[s+0]=c,k.data[s+1]=S,k.data[s+2]=E,k.data[s+3]=F;for(w=0;w<m;w+=1)for(N=Math.floor(R),h=0;h<v;h+=1){for(y=0;y<N+1;y+=1)u=(f*w+y)*4,c=k.data[u+0],S=k.data[u+1],E=k.data[u+2],F=k.data[u+3],s=(f*w+N*2-y-1)*4,k.data[s+0]=c,k.data[s+1]=S,k.data[s+2]=E,k.data[s+3]=F;N*=2}_(k,d,{})};return Wr.Kaleidoscope=a,o.Factory.addGetterSetter(g.Node,"kaleidoscopePower",2,(0,L.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"kaleidoscopeAngle",0,(0,L.getNumberValidator)(),o.Factory.afterSetFilter),Wr}var qr={},Pu;function od(){if(Pu)return qr;Pu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Mask=void 0;const o=St(),g=Ut(),O=Ct();function L(p,h,c){let S=(c*p.width+h)*4;const E=[];return E.push(p.data[S++],p.data[S++],p.data[S++],p.data[S++]),E}function T(p,h){return Math.sqrt(Math.pow(p[0]-h[0],2)+Math.pow(p[1]-h[1],2)+Math.pow(p[2]-h[2],2))}function _(p){const h=[0,0,0];for(let c=0;c<p.length;c++)h[0]+=p[c][0],h[1]+=p[c][1],h[2]+=p[c][2];return h[0]/=p.length,h[1]/=p.length,h[2]/=p.length,h}function a(p,h){const c=L(p,0,0),S=L(p,p.width-1,0),E=L(p,0,p.height-1),F=L(p,p.width-1,p.height-1),u=h||10;if(T(c,S)<u&&T(S,F)<u&&T(F,E)<u&&T(E,c)<u){const s=_([S,c,F,E]),v=[];for(let x=0;x<p.width*p.height;x++){const M=T(s,[p.data[x*4],p.data[x*4+1],p.data[x*4+2]]);v[x]=M<u?0:255}return v}}function d(p,h){for(let c=0;c<p.width*p.height;c++)p.data[4*c+3]=h[c]}function f(p,h,c){const S=[1,1,1,1,0,1,1,1,1],E=Math.round(Math.sqrt(S.length)),F=Math.floor(E/2),u=[];for(let s=0;s<c;s++)for(let v=0;v<h;v++){const x=s*h+v;let M=0;for(let B=0;B<E;B++)for(let k=0;k<E;k++){const R=s+B-F,N=v+k-F;if(R>=0&&R<c&&N>=0&&N<h){const G=R*h+N,z=S[B*E+k];M+=p[G]*z}}u[x]=M===255*8?255:0}return u}function m(p,h,c){const S=[1,1,1,1,1,1,1,1,1],E=Math.round(Math.sqrt(S.length)),F=Math.floor(E/2),u=[];for(let s=0;s<c;s++)for(let v=0;v<h;v++){const x=s*h+v;let M=0;for(let B=0;B<E;B++)for(let k=0;k<E;k++){const R=s+B-F,N=v+k-F;if(R>=0&&R<c&&N>=0&&N<h){const G=R*h+N,z=S[B*E+k];M+=p[G]*z}}u[x]=M>=255*4?255:0}return u}function y(p,h,c){const S=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],E=Math.round(Math.sqrt(S.length)),F=Math.floor(E/2),u=[];for(let s=0;s<c;s++)for(let v=0;v<h;v++){const x=s*h+v;let M=0;for(let B=0;B<E;B++)for(let k=0;k<E;k++){const R=s+B-F,N=v+k-F;if(R>=0&&R<c&&N>=0&&N<h){const G=R*h+N,z=S[B*E+k];M+=p[G]*z}}u[x]=M}return u}const w=function(p){const h=this.threshold();let c=a(p,h);return c&&(c=f(c,p.width,p.height),c=m(c,p.width,p.height),c=y(c,p.width,p.height),d(p,c)),p};return qr.Mask=w,o.Factory.addGetterSetter(g.Node,"threshold",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),qr}var jr={},Eu;function ld(){if(Eu)return jr;Eu=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Noise=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=this.noise()*255,a=T.data,d=a.length,f=_/2;for(let m=0;m<d;m+=4)a[m+0]+=f-2*f*Math.random(),a[m+1]+=f-2*f*Math.random(),a[m+2]+=f-2*f*Math.random()};return jr.Noise=L,o.Factory.addGetterSetter(g.Node,"noise",.2,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),jr}var Kr={},ku;function ud(){if(ku)return Kr;ku=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Pixelate=void 0;const o=St(),g=Dt(),O=Ut(),L=Ct(),T=function(_){let a=Math.ceil(this.pixelSize()),d=_.width,f=_.height,m=Math.ceil(d/a),y=Math.ceil(f/a),w=_.data;if(a<=0){g.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<m;p+=1)for(let h=0;h<y;h+=1){let c=0,S=0,E=0,F=0;const u=p*a,s=u+a,v=h*a,x=v+a;let M=0;for(let B=u;B<s;B+=1)if(!(B>=d))for(let k=v;k<x;k+=1){if(k>=f)continue;const R=(d*k+B)*4;c+=w[R+0],S+=w[R+1],E+=w[R+2],F+=w[R+3],M+=1}c=c/M,S=S/M,E=E/M,F=F/M;for(let B=u;B<s;B+=1)if(!(B>=d))for(let k=v;k<x;k+=1){if(k>=f)continue;const R=(d*k+B)*4;w[R+0]=c,w[R+1]=S,w[R+2]=E,w[R+3]=F}}};return Kr.Pixelate=T,o.Factory.addGetterSetter(O.Node,"pixelSize",8,(0,L.getNumberValidator)(),o.Factory.afterSetFilter),Kr}var Yr={},Ru;function hd(){if(Ru)return Yr;Ru=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.Posterize=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=Math.round(this.levels()*254)+1,a=T.data,d=a.length,f=255/_;for(let m=0;m<d;m+=1)a[m]=Math.floor(a[m]/f)*f};return Yr.Posterize=L,o.Factory.addGetterSetter(g.Node,"levels",.5,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Yr}var Xr={},Tu;function cd(){if(Tu)return Xr;Tu=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.RGB=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=T.data,a=_.length,d=this.red(),f=this.green(),m=this.blue();for(let y=0;y<a;y+=4){const w=(.34*_[y]+.5*_[y+1]+.16*_[y+2])/255;_[y]=w*d,_[y+1]=w*f,_[y+2]=w*m,_[y+3]=_[y+3]}};return Xr.RGB=L,o.Factory.addGetterSetter(g.Node,"red",0,function(T){return this._filterUpToDate=!1,T>255?255:T<0?0:Math.round(T)}),o.Factory.addGetterSetter(g.Node,"green",0,function(T){return this._filterUpToDate=!1,T>255?255:T<0?0:Math.round(T)}),o.Factory.addGetterSetter(g.Node,"blue",0,O.RGBComponent,o.Factory.afterSetFilter),Xr}var Qr={},Nu;function dd(){if(Nu)return Qr;Nu=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.RGBA=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=T.data,a=_.length,d=this.red(),f=this.green(),m=this.blue(),y=this.alpha();for(let w=0;w<a;w+=4){const p=1-y;_[w]=d*y+_[w]*p,_[w+1]=f*y+_[w+1]*p,_[w+2]=m*y+_[w+2]*p}};return Qr.RGBA=L,o.Factory.addGetterSetter(g.Node,"red",0,function(T){return this._filterUpToDate=!1,T>255?255:T<0?0:Math.round(T)}),o.Factory.addGetterSetter(g.Node,"green",0,function(T){return this._filterUpToDate=!1,T>255?255:T<0?0:Math.round(T)}),o.Factory.addGetterSetter(g.Node,"blue",0,O.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(g.Node,"alpha",1,function(T){return this._filterUpToDate=!1,T>1?1:T<0?0:T}),Qr}var Jr={},Fu;function fd(){if(Fu)return Jr;Fu=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Sepia=void 0;const o=function(g){const O=g.data,L=O.length;for(let T=0;T<L;T+=4){const _=O[T+0],a=O[T+1],d=O[T+2];O[T+0]=Math.min(255,_*.393+a*.769+d*.189),O[T+1]=Math.min(255,_*.349+a*.686+d*.168),O[T+2]=Math.min(255,_*.272+a*.534+d*.131)}};return Jr.Sepia=o,Jr}var Zr={},Au;function gd(){if(Au)return Zr;Au=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Solarize=void 0;const o=function(g){const O=g.data,L=g.width,T=g.height,_=L*4;let a=T;do{const d=(a-1)*_;let f=L;do{const m=d+(f-1)*4;let y=O[m],w=O[m+1],p=O[m+2];y>127&&(y=255-y),w>127&&(w=255-w),p>127&&(p=255-p),O[m]=y,O[m+1]=w,O[m+2]=p}while(--f)}while(--a)};return Zr.Solarize=o,Zr}var $r={},Mu;function pd(){if(Mu)return $r;Mu=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Threshold=void 0;const o=St(),g=Ut(),O=Ct(),L=function(T){const _=this.threshold()*255,a=T.data,d=a.length;for(let f=0;f<d;f+=1)a[f]=a[f]<_?0:255};return $r.Threshold=L,o.Factory.addGetterSetter(g.Node,"threshold",.5,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),$r}var Lu;function md(){if(Lu)return fr;Lu=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Konva=void 0;const o=ba(),g=Dc(),O=Uc(),L=zc(),T=Bc(),_=Hc(),a=Vc(),d=th(),f=Ga(),m=nh(),y=Wc(),w=qc(),p=jc(),h=Kc(),c=rh(),S=Yc(),E=Xc(),F=Qc(),u=Jc(),s=Zc(),v=$c(),x=td(),M=ed(),B=nd(),k=rd(),R=id(),N=sd(),G=ad(),z=od(),V=ld(),j=ud(),H=hd(),et=cd(),C=dd(),P=fd(),I=gd(),b=pd();return fr.Konva=o.Konva.Util._assign(o.Konva,{Arc:g.Arc,Arrow:O.Arrow,Circle:L.Circle,Ellipse:T.Ellipse,Image:_.Image,Label:a.Label,Tag:a.Tag,Line:d.Line,Path:f.Path,Rect:m.Rect,RegularPolygon:y.RegularPolygon,Ring:w.Ring,Sprite:p.Sprite,Star:h.Star,Text:c.Text,TextPath:S.TextPath,Transformer:E.Transformer,Wedge:F.Wedge,Filters:{Blur:u.Blur,Brighten:s.Brighten,Contrast:v.Contrast,Emboss:x.Emboss,Enhance:M.Enhance,Grayscale:B.Grayscale,HSL:k.HSL,HSV:R.HSV,Invert:N.Invert,Kaleidoscope:G.Kaleidoscope,Mask:z.Mask,Noise:V.Noise,Pixelate:j.Pixelate,Posterize:H.Posterize,RGB:et.RGB,RGBA:C.RGBA,Sepia:P.Sepia,Solarize:I.Solarize,Threshold:b.Threshold}}),fr}var yd=Qi.exports,bu;function vd(){if(bu)return Qi.exports;bu=1,Object.defineProperty(yd,"__esModule",{value:!0});const o=md();return Qi.exports=o.Konva,Qi.exports}vd();var Xi={exports:{}},Ou;function _d(){return Ou||(Ou=1,function(o,g){Object.defineProperty(g,"__esModule",{value:!0}),g.Konva=void 0;var O=ba();Object.defineProperty(g,"Konva",{enumerable:!0,get:function(){return O.Konva}});const L=ba();o.exports=L.Konva}(Xi,Xi.exports)),Xi.exports}var Sd=_d();const ei=Qu(Sd);var Ra={exports:{}},Ta={exports:{}},Na={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu;function Cd(){return Iu||(Iu=1,function(o){function g(P,I){var b=P.length;P.push(I);t:for(;0<b;){var U=b-1>>>1,Y=P[U];if(0<T(Y,I))P[U]=I,P[b]=Y,b=U;else break t}}function O(P){return P.length===0?null:P[0]}function L(P){if(P.length===0)return null;var I=P[0],b=P.pop();if(b!==I){P[0]=b;t:for(var U=0,Y=P.length,W=Y>>>1;U<W;){var tt=2*(U+1)-1,it=P[tt],Q=tt+1,D=P[Q];if(0>T(it,b))Q<Y&&0>T(D,it)?(P[U]=D,P[Q]=b,U=Q):(P[U]=it,P[tt]=b,U=tt);else if(Q<Y&&0>T(D,b))P[U]=D,P[Q]=b,U=Q;else break t}}return I}function T(P,I){var b=P.sortIndex-I.sortIndex;return b!==0?b:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;o.unstable_now=function(){return _.now()}}else{var a=Date,d=a.now();o.unstable_now=function(){return a.now()-d}}var f=[],m=[],y=1,w=null,p=3,h=!1,c=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function s(P){for(var I=O(m);I!==null;){if(I.callback===null)L(m);else if(I.startTime<=P)L(m),I.sortIndex=I.expirationTime,g(f,I);else break;I=O(m)}}function v(P){if(S=!1,s(P),!c)if(O(f)!==null)c=!0,et(x);else{var I=O(m);I!==null&&C(v,I.startTime-P)}}function x(P,I){c=!1,S&&(S=!1,F(k),k=-1),h=!0;var b=p;try{for(s(I),w=O(f);w!==null&&(!(w.expirationTime>I)||P&&!G());){var U=w.callback;if(typeof U=="function"){w.callback=null,p=w.priorityLevel;var Y=U(w.expirationTime<=I);I=o.unstable_now(),typeof Y=="function"?w.callback=Y:w===O(f)&&L(f),s(I)}else L(f);w=O(f)}if(w!==null)var W=!0;else{var tt=O(m);tt!==null&&C(v,tt.startTime-I),W=!1}return W}finally{w=null,p=b,h=!1}}var M=!1,B=null,k=-1,R=5,N=-1;function G(){return!(o.unstable_now()-N<R)}function z(){if(B!==null){var P=o.unstable_now();N=P;var I=!0;try{I=B(!0,P)}finally{I?V():(M=!1,B=null)}}else M=!1}var V;if(typeof u=="function")V=function(){u(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=z,V=function(){H.postMessage(null)}}else V=function(){E(z,0)};function et(P){B=P,M||(M=!0,V())}function C(P,I){k=E(function(){P(o.unstable_now())},I)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(P){P.callback=null},o.unstable_continueExecution=function(){c||h||(c=!0,et(x))},o.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},o.unstable_getCurrentPriorityLevel=function(){return p},o.unstable_getFirstCallbackNode=function(){return O(f)},o.unstable_next=function(P){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var b=p;p=I;try{return P()}finally{p=b}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var b=p;p=P;try{return I()}finally{p=b}},o.unstable_scheduleCallback=function(P,I,b){var U=o.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?U+b:U):b=U,P){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=b+Y,P={id:y++,callback:I,priorityLevel:P,startTime:b,expirationTime:Y,sortIndex:-1},b>U?(P.sortIndex=b,g(m,P),O(f)===null&&P===O(m)&&(S?(F(k),k=-1):S=!0,C(v,b-U))):(P.sortIndex=Y,g(f,P),c||h||(c=!0,et(x))),P},o.unstable_shouldYield=G,o.unstable_wrapCallback=function(P){var I=p;return function(){var b=p;p=I;try{return P.apply(this,arguments)}finally{p=b}}}}(Na)),Na}var Du;function ih(){return Du||(Du=1,Ta.exports=Cd()),Ta.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa,Gu;function wd(){return Gu||(Gu=1,Fa=function(g){var O={},L=Nc(),T=ih(),_=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),c=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),x=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}function B(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case y:return"Fragment";case m:return"Portal";case p:return"Profiler";case w:return"StrictMode";case E:return"Suspense";case F:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c:return(t.displayName||"Context")+".Consumer";case h:return(t._context.displayName||"Context")+".Provider";case S:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case u:return e=t.displayName||null,e!==null?e:B(t.type)||"Memo";case s:e=t._payload,t=t._init;try{return B(t(e))}catch{}}return null}function k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function R(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N(t){if(R(t)!==t)throw Error(a(188))}function G(t){var e=t.alternate;if(!e){if(e=R(t),e===null)throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return N(i),t;if(l===r)return N(i),e;l=l.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=l;else{for(var A=!1,q=i.child;q;){if(q===n){A=!0,n=i,r=l;break}if(q===r){A=!0,r=i,n=l;break}q=q.sibling}if(!A){for(q=l.child;q;){if(q===n){A=!0,n=l,r=i;break}if(q===r){A=!0,r=l,n=i;break}q=q.sibling}if(!A)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?t:e}function z(t){return t=G(t),t!==null?V(t):null}function V(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V(t);if(e!==null)return e;t=t.sibling}return null}function j(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var e=j(t);if(e!==null)return e}t=t.sibling}return null}var H=Array.isArray,et=g.getPublicInstance,C=g.getRootHostContext,P=g.getChildHostContext,I=g.prepareForCommit,b=g.resetAfterCommit,U=g.createInstance,Y=g.appendInitialChild,W=g.finalizeInitialChildren,tt=g.prepareUpdate,it=g.shouldSetTextContent,Q=g.createTextInstance,D=g.scheduleTimeout,X=g.cancelTimeout,rt=g.noTimeout,st=g.isPrimaryRenderer,at=g.supportsMutation,ft=g.supportsPersistence,ct=g.supportsHydration,Et=g.getInstanceFromNode,gt=g.preparePortalMount,Bt=g.getCurrentEventPriority,kt=g.detachDeletedInstance,bt=g.supportsMicrotasks,rn=g.scheduleMicrotask,Wt=g.supportsTestSelectors,vn=g.findFiberRoot,Tt=g.getBoundingRect,_e=g.getTextContent,Zt=g.isHiddenSubtree,Ke=g.matchAccessibilityRole,$t=g.setFocusIfFocusable,Ge=g.setupIntersectionObserver,Se=g.appendChild,xe=g.appendChildToContainer,te=g.commitTextUpdate,ee=g.commitMount,_n=g.commitUpdate,ni=g.insertBefore,An=g.insertInContainerBefore,ts=g.removeChild,es=g.removeChildFromContainer,Ba=g.resetTextContent,ch=g.hideInstance,dh=g.hideTextInstance,fh=g.unhideInstance,gh=g.unhideTextInstance,ph=g.clearContainer,mh=g.cloneInstance,Ha=g.createContainerChildSet,Va=g.appendChildToContainerChildSet,yh=g.finalizeContainerChildren,ns=g.replaceContainerChildren,Wa=g.cloneHiddenInstance,qa=g.cloneHiddenTextInstance,vh=g.canHydrateInstance,_h=g.canHydrateTextInstance,Sh=g.canHydrateSuspenseInstance,ja=g.isSuspenseInstancePending,rs=g.isSuspenseInstanceFallback,Ch=g.getSuspenseInstanceFallbackErrorDetails,wh=g.registerSuspenseInstanceRetry,ri=g.getNextHydratableSibling,xh=g.getFirstHydratableChild,Ph=g.getFirstHydratableChildWithinContainer,Eh=g.getFirstHydratableChildWithinSuspenseInstance,kh=g.hydrateInstance,Rh=g.hydrateTextInstance,Th=g.hydrateSuspenseInstance,Nh=g.getNextHydratableInstanceAfterSuspenseInstance,Fh=g.commitHydratedContainer,Ah=g.commitHydratedSuspenseInstance,Mh=g.clearSuspenseBoundary,Lh=g.clearSuspenseBoundaryFromContainer,bh=g.shouldDeleteUnhydratedTailInstances,Oh=g.didNotMatchHydratedContainerTextInstance,Ih=g.didNotMatchHydratedTextInstance,is;function Yn(t){if(is===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);is=e&&e[1]||""}return`
`+is+t}var ss=!1;function as(t,e){if(!t||ss)return"";ss=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(nt){var r=nt}Reflect.construct(t,[],e)}else{try{e.call()}catch(nt){r=nt}t.call(e.prototype)}else{try{throw Error()}catch(nt){r=nt}t()}}catch(nt){if(nt&&r&&typeof nt.stack=="string"){for(var i=nt.stack.split(`
`),l=r.stack.split(`
`),A=i.length-1,q=l.length-1;1<=A&&0<=q&&i[A]!==l[q];)q--;for(;1<=A&&0<=q;A--,q--)if(i[A]!==l[q]){if(A!==1||q!==1)do if(A--,q--,0>q||i[A]!==l[q]){var Z=`
`+i[A].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=A&&0<=q);break}}}finally{ss=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yn(t):""}var Dh=Object.prototype.hasOwnProperty,os=[],Mn=-1;function sn(t){return{current:t}}function Ft(t){0>Mn||(t.current=os[Mn],os[Mn]=null,Mn--)}function Nt(t,e){Mn++,os[Mn]=t.current,t.current=e}var an={},ne=sn(an),ue=sn(!1),Sn=an;function Ln(t,e){var n=t.type.contextTypes;if(!n)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=e[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function he(t){return t=t.childContextTypes,t!=null}function ii(){Ft(ue),Ft(ne)}function Ka(t,e,n){if(ne.current!==an)throw Error(a(168));Nt(ne,e),Nt(ue,n)}function Ya(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(a(108,k(t)||"Unknown",i));return _({},n,r)}function si(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Sn=ne.current,Nt(ne,t),Nt(ue,ue.current),!0}function Xa(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ya(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,Ft(ue),Ft(ne),Nt(ne,t)):Ft(ue),Nt(ue,n)}var Me=Math.clz32?Math.clz32:zh,Gh=Math.log,Uh=Math.LN2;function zh(t){return t>>>=0,t===0?32:31-(Gh(t)/Uh|0)|0}var ai=64,oi=4194304;function Xn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function li(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,l=t.pingedLanes,A=n&268435455;if(A!==0){var q=A&~i;q!==0?r=Xn(q):(l&=A,l!==0&&(r=Xn(l)))}else A=n&~i,A!==0?r=Xn(A):l!==0&&(r=Xn(l));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,l=e&-e,i>=l||i===16&&(l&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Me(e),i=1<<n,r|=t[n],e&=~i;return r}function Bh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hh(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,l=t.pendingLanes;0<l;){var A=31-Me(l),q=1<<A,Z=i[A];Z===-1?((q&n)===0||(q&r)!==0)&&(i[A]=Bh(q,e)):Z<=e&&(t.expiredLanes|=q),l&=~q}}function ls(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qa(){var t=ai;return ai<<=1,(ai&4194240)===0&&(ai=64),t}function us(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qn(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Me(e),t[e]=n}function Vh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Me(n),l=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~l}}function hs(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Me(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wt=0;function Ja(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var cs=T.unstable_scheduleCallback,Za=T.unstable_cancelCallback,Wh=T.unstable_shouldYield,qh=T.unstable_requestPaint,qt=T.unstable_now,ds=T.unstable_ImmediatePriority,jh=T.unstable_UserBlockingPriority,fs=T.unstable_NormalPriority,Kh=T.unstable_IdlePriority,ui=null,Ue=null;function Yh(t){if(Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ui,t,void 0,(t.current.flags&128)===128)}catch{}}function Xh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Le=typeof Object.is=="function"?Object.is:Xh,Ye=null,hi=!1,gs=!1;function $a(t){Ye===null?Ye=[t]:Ye.push(t)}function Qh(t){hi=!0,$a(t)}function ze(){if(!gs&&Ye!==null){gs=!0;var t=0,e=wt;try{var n=Ye;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ye=null,hi=!1}catch(i){throw Ye!==null&&(Ye=Ye.slice(t+1)),cs(ds,ze),i}finally{wt=e,gs=!1}}return null}var bn=[],On=0,ci=null,di=0,Pe=[],Ee=0,Cn=null,Xe=1,Qe="";function wn(t,e){bn[On++]=di,bn[On++]=ci,ci=t,di=e}function to(t,e,n){Pe[Ee++]=Xe,Pe[Ee++]=Qe,Pe[Ee++]=Cn,Cn=t;var r=Xe;t=Qe;var i=32-Me(r)-1;r&=~(1<<i),n+=1;var l=32-Me(e)+i;if(30<l){var A=i-i%5;l=(r&(1<<A)-1).toString(32),r>>=A,i-=A,Xe=1<<32-Me(e)+i|n<<i|r,Qe=l+t}else Xe=1<<l|n<<i|r,Qe=t}function ps(t){t.return!==null&&(wn(t,1),to(t,1,0))}function ms(t){for(;t===ci;)ci=bn[--On],bn[On]=null,di=bn[--On],bn[On]=null;for(;t===Cn;)Cn=Pe[--Ee],Pe[Ee]=null,Qe=Pe[--Ee],Pe[Ee]=null,Xe=Pe[--Ee],Pe[Ee]=null}var Ce=null,ke=null,Mt=!1,Jn=!1,be=null;function eo(t,e){var n=Ae(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function no(t,e){switch(t.tag){case 5:return e=vh(e,t.type,t.pendingProps),e!==null?(t.stateNode=e,Ce=t,ke=xh(e),!0):!1;case 6:return e=_h(e,t.pendingProps),e!==null?(t.stateNode=e,Ce=t,ke=null,!0):!1;case 13:if(e=Sh(e),e!==null){var n=Cn!==null?{id:Xe,overflow:Qe}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ae(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ce=t,ke=null,!0}return!1;default:return!1}}function ys(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vs(t){if(Mt){var e=ke;if(e){var n=e;if(!no(t,e)){if(ys(t))throw Error(a(418));e=ri(n);var r=Ce;e&&no(t,e)?eo(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Ce=t)}}else{if(ys(t))throw Error(a(418));t.flags=t.flags&-4097|2,Mt=!1,Ce=t}}}function ro(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ce=t}function fi(t){if(!ct||t!==Ce)return!1;if(!Mt)return ro(t),Mt=!0,!1;if(t.tag!==3&&(t.tag!==5||bh(t.type)&&!it(t.type,t.memoizedProps))){var e=ke;if(e){if(ys(t))throw io(),Error(a(418));for(;e;)eo(t,e),e=ri(e)}}if(ro(t),t.tag===13){if(!ct)throw Error(a(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));ke=Nh(t)}else ke=Ce?ri(t.stateNode):null;return!0}function io(){for(var t=ke;t;)t=ri(t)}function In(){ct&&(ke=Ce=null,Jn=Mt=!1)}function _s(t){be===null?be=[t]:be.push(t)}var Jh=d.ReactCurrentBatchConfig;function gi(t,e){if(Le(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dh.call(e,i)||!Le(t[i],e[i]))return!1}return!0}function Zh(t){switch(t.tag){case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 2:case 15:return t=as(t.type,!1),t;case 11:return t=as(t.type.render,!1),t;case 1:return t=as(t.type,!0),t;default:return""}}function Oe(t,e){if(t&&t.defaultProps){e=_({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var pi=sn(null),mi=null,Dn=null,Ss=null;function Cs(){Ss=Dn=mi=null}function so(t,e,n){st?(Nt(pi,e._currentValue),e._currentValue=n):(Nt(pi,e._currentValue2),e._currentValue2=n)}function ws(t){var e=pi.current;Ft(pi),st?t._currentValue=e:t._currentValue2=e}function xs(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gn(t,e){mi=t,Ss=Dn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(ce=!0),t.firstContext=null)}function Re(t){var e=st?t._currentValue:t._currentValue2;if(Ss!==t)if(t={context:t,memoizedValue:e,next:null},Dn===null){if(mi===null)throw Error(a(308));Dn=t,mi.dependencies={lanes:0,firstContext:t}}else Dn=Dn.next=t;return e}var xn=null;function Ps(t){xn===null?xn=[t]:xn.push(t)}function ao(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ps(e)):(n.next=i.next,i.next=n),e.interleaved=n,Be(t,r)}function Be(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function Es(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Je(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(_t&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Be(t,n)}return i=r.interleaved,i===null?(e.next=e,Ps(r)):(e.next=i.next,i.next=e),r.interleaved=e,Be(t,n)}function yi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hs(t,n)}}function lo(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var A={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=A:l=l.next=A,n=n.next}while(n!==null);l===null?i=l=e:l=l.next=e}else i=l=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vi(t,e,n,r){var i=t.updateQueue;on=!1;var l=i.firstBaseUpdate,A=i.lastBaseUpdate,q=i.shared.pending;if(q!==null){i.shared.pending=null;var Z=q,nt=Z.next;Z.next=null,A===null?l=nt:A.next=nt,A=Z;var ht=t.alternate;ht!==null&&(ht=ht.updateQueue,q=ht.lastBaseUpdate,q!==A&&(q===null?ht.firstBaseUpdate=nt:q.next=nt,ht.lastBaseUpdate=Z))}if(l!==null){var pt=i.baseState;A=0,ht=nt=Z=null,q=l;do{var ot=q.lane,At=q.eventTime;if((r&ot)===ot){ht!==null&&(ht=ht.next={eventTime:At,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});t:{var Rt=t,ge=q;switch(ot=e,At=n,ge.tag){case 1:if(Rt=ge.payload,typeof Rt=="function"){pt=Rt.call(At,pt,ot);break t}pt=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=ge.payload,ot=typeof Rt=="function"?Rt.call(At,pt,ot):Rt,ot==null)break t;pt=_({},pt,ot);break t;case 2:on=!0}}q.callback!==null&&q.lane!==0&&(t.flags|=64,ot=i.effects,ot===null?i.effects=[q]:ot.push(q))}else At={eventTime:At,lane:ot,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ht===null?(nt=ht=At,Z=pt):ht=ht.next=At,A|=ot;if(q=q.next,q===null){if(q=i.shared.pending,q===null)break;ot=q,q=ot.next,ot.next=null,i.lastBaseUpdate=ot,i.shared.pending=null}}while(!0);if(ht===null&&(Z=pt),i.baseState=Z,i.firstBaseUpdate=nt,i.lastBaseUpdate=ht,e=i.shared.interleaved,e!==null){i=e;do A|=i.lane,i=i.next;while(i!==e)}else l===null&&(i.shared.lanes=0);En|=A,t.lanes=A,t.memoizedState=pt}}function uo(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(a(191,i));i.call(r)}}}var ho=new L.Component().refs;function ks(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _i={isMounted:function(t){return(t=t._reactInternals)?R(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ae(),i=cn(t),l=Je(r,i);l.payload=e,n!=null&&(l.callback=n),e=ln(t,l,i),e!==null&&(Fe(e,t,i,r),yi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ae(),i=cn(t),l=Je(r,i);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ln(t,l,i),e!==null&&(Fe(e,t,i,r),yi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ae(),r=cn(t),i=Je(n,r);i.tag=2,e!=null&&(i.callback=e),e=ln(t,i,r),e!==null&&(Fe(e,t,r,n),yi(e,t,r))}};function co(t,e,n,r,i,l,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,A):e.prototype&&e.prototype.isPureReactComponent?!gi(n,r)||!gi(i,l):!0}function fo(t,e,n){var r=!1,i=an,l=e.contextType;return typeof l=="object"&&l!==null?l=Re(l):(i=he(e)?Sn:ne.current,r=e.contextTypes,l=(r=r!=null)?Ln(t,i):an),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_i,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=l),e}function go(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_i.enqueueReplaceState(e,e.state,null)}function Rs(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ho,Es(t);var l=e.contextType;typeof l=="object"&&l!==null?i.context=Re(l):(l=he(e)?Sn:ne.current,i.context=Ln(t,l)),i.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(ks(t,e,l,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_i.enqueueReplaceState(i,i.state,null),vi(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(A){var q=i.refs;q===ho&&(q=i.refs={}),A===null?delete q[l]:q[l]=A},e._stringRef=l,e)}if(typeof t!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Si(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function po(t){var e=t._init;return e(t._payload)}function mo(t){function e(J,K){if(t){var $=J.deletions;$===null?(J.deletions=[K],J.flags|=16):$.push(K)}}function n(J,K){if(!t)return null;for(;K!==null;)e(J,K),K=K.sibling;return null}function r(J,K){for(J=new Map;K!==null;)K.key!==null?J.set(K.key,K):J.set(K.index,K),K=K.sibling;return J}function i(J,K){return J=fn(J,K),J.index=0,J.sibling=null,J}function l(J,K,$){return J.index=$,t?($=J.alternate,$!==null?($=$.index,$<K?(J.flags|=2,K):$):(J.flags|=2,K)):(J.flags|=1048576,K)}function A(J){return t&&J.alternate===null&&(J.flags|=2),J}function q(J,K,$,lt){return K===null||K.tag!==6?(K=ga($,J.mode,lt),K.return=J,K):(K=i(K,$),K.return=J,K)}function Z(J,K,$,lt){var dt=$.type;return dt===y?ht(J,K,$.props.children,lt,$.key):K!==null&&(K.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&po(dt)===K.type)?(lt=i(K,$.props),lt.ref=Zn(J,K,$),lt.return=J,lt):(lt=ji($.type,$.key,$.props,null,J.mode,lt),lt.ref=Zn(J,K,$),lt.return=J,lt)}function nt(J,K,$,lt){return K===null||K.tag!==4||K.stateNode.containerInfo!==$.containerInfo||K.stateNode.implementation!==$.implementation?(K=pa($,J.mode,lt),K.return=J,K):(K=i(K,$.children||[]),K.return=J,K)}function ht(J,K,$,lt,dt){return K===null||K.tag!==7?(K=Nn($,J.mode,lt,dt),K.return=J,K):(K=i(K,$),K.return=J,K)}function pt(J,K,$){if(typeof K=="string"&&K!==""||typeof K=="number")return K=ga(""+K,J.mode,$),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case f:return $=ji(K.type,K.key,K.props,null,J.mode,$),$.ref=Zn(J,null,K),$.return=J,$;case m:return K=pa(K,J.mode,$),K.return=J,K;case s:var lt=K._init;return pt(J,lt(K._payload),$)}if(H(K)||M(K))return K=Nn(K,J.mode,$,null),K.return=J,K;Si(J,K)}return null}function ot(J,K,$,lt){var dt=K!==null?K.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return dt!==null?null:q(J,K,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case f:return $.key===dt?Z(J,K,$,lt):null;case m:return $.key===dt?nt(J,K,$,lt):null;case s:return dt=$._init,ot(J,K,dt($._payload),lt)}if(H($)||M($))return dt!==null?null:ht(J,K,$,lt,null);Si(J,$)}return null}function At(J,K,$,lt,dt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return J=J.get($)||null,q(K,J,""+lt,dt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case f:return J=J.get(lt.key===null?$:lt.key)||null,Z(K,J,lt,dt);case m:return J=J.get(lt.key===null?$:lt.key)||null,nt(K,J,lt,dt);case s:var yt=lt._init;return At(J,K,$,yt(lt._payload),dt)}if(H(lt)||M(lt))return J=J.get($)||null,ht(K,J,lt,dt,null);Si(K,lt)}return null}function Rt(J,K,$,lt){for(var dt=null,yt=null,mt=K,xt=K=0,Yt=null;mt!==null&&xt<$.length;xt++){mt.index>xt?(Yt=mt,mt=null):Yt=mt.sibling;var Pt=ot(J,mt,$[xt],lt);if(Pt===null){mt===null&&(mt=Yt);break}t&&mt&&Pt.alternate===null&&e(J,mt),K=l(Pt,K,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt,mt=Yt}if(xt===$.length)return n(J,mt),Mt&&wn(J,xt),dt;if(mt===null){for(;xt<$.length;xt++)mt=pt(J,$[xt],lt),mt!==null&&(K=l(mt,K,xt),yt===null?dt=mt:yt.sibling=mt,yt=mt);return Mt&&wn(J,xt),dt}for(mt=r(J,mt);xt<$.length;xt++)Yt=At(mt,J,xt,$[xt],lt),Yt!==null&&(t&&Yt.alternate!==null&&mt.delete(Yt.key===null?xt:Yt.key),K=l(Yt,K,xt),yt===null?dt=Yt:yt.sibling=Yt,yt=Yt);return t&&mt.forEach(function(gn){return e(J,gn)}),Mt&&wn(J,xt),dt}function ge(J,K,$,lt){var dt=M($);if(typeof dt!="function")throw Error(a(150));if($=dt.call($),$==null)throw Error(a(151));for(var yt=dt=null,mt=K,xt=K=0,Yt=null,Pt=$.next();mt!==null&&!Pt.done;xt++,Pt=$.next()){mt.index>xt?(Yt=mt,mt=null):Yt=mt.sibling;var gn=ot(J,mt,Pt.value,lt);if(gn===null){mt===null&&(mt=Yt);break}t&&mt&&gn.alternate===null&&e(J,mt),K=l(gn,K,xt),yt===null?dt=gn:yt.sibling=gn,yt=gn,mt=Yt}if(Pt.done)return n(J,mt),Mt&&wn(J,xt),dt;if(mt===null){for(;!Pt.done;xt++,Pt=$.next())Pt=pt(J,Pt.value,lt),Pt!==null&&(K=l(Pt,K,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return Mt&&wn(J,xt),dt}for(mt=r(J,mt);!Pt.done;xt++,Pt=$.next())Pt=At(mt,J,xt,Pt.value,lt),Pt!==null&&(t&&Pt.alternate!==null&&mt.delete(Pt.key===null?xt:Pt.key),K=l(Pt,K,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return t&&mt.forEach(function(Tc){return e(J,Tc)}),Mt&&wn(J,xt),dt}function tn(J,K,$,lt){if(typeof $=="object"&&$!==null&&$.type===y&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case f:t:{for(var dt=$.key,yt=K;yt!==null;){if(yt.key===dt){if(dt=$.type,dt===y){if(yt.tag===7){n(J,yt.sibling),K=i(yt,$.props.children),K.return=J,J=K;break t}}else if(yt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&po(dt)===yt.type){n(J,yt.sibling),K=i(yt,$.props),K.ref=Zn(J,yt,$),K.return=J,J=K;break t}n(J,yt);break}else e(J,yt);yt=yt.sibling}$.type===y?(K=Nn($.props.children,J.mode,lt,$.key),K.return=J,J=K):(lt=ji($.type,$.key,$.props,null,J.mode,lt),lt.ref=Zn(J,K,$),lt.return=J,J=lt)}return A(J);case m:t:{for(yt=$.key;K!==null;){if(K.key===yt)if(K.tag===4&&K.stateNode.containerInfo===$.containerInfo&&K.stateNode.implementation===$.implementation){n(J,K.sibling),K=i(K,$.children||[]),K.return=J,J=K;break t}else{n(J,K);break}else e(J,K);K=K.sibling}K=pa($,J.mode,lt),K.return=J,J=K}return A(J);case s:return yt=$._init,tn(J,K,yt($._payload),lt)}if(H($))return Rt(J,K,$,lt);if(M($))return ge(J,K,$,lt);Si(J,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,K!==null&&K.tag===6?(n(J,K.sibling),K=i(K,$),K.return=J,J=K):(n(J,K),K=ga($,J.mode,lt),K.return=J,J=K),A(J)):n(J,K)}return tn}var Un=mo(!0),yo=mo(!1),$n={},Te=sn($n),tr=sn($n),zn=sn($n);function He(t){if(t===$n)throw Error(a(174));return t}function Ts(t,e){Nt(zn,e),Nt(tr,t),Nt(Te,$n),t=C(e),Ft(Te),Nt(Te,t)}function Bn(){Ft(Te),Ft(tr),Ft(zn)}function vo(t){var e=He(zn.current),n=He(Te.current);e=P(n,t.type,e),n!==e&&(Nt(tr,t),Nt(Te,e))}function Ns(t){tr.current===t&&(Ft(Te),Ft(tr))}var Ot=sn(0);function Ci(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ja(n)||rs(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fs=[];function As(){for(var t=0;t<Fs.length;t++){var e=Fs[t];st?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}Fs.length=0}var wi=d.ReactCurrentDispatcher,Ms=d.ReactCurrentBatchConfig,Pn=0,It=null,Ht=null,jt=null,xi=!1,er=!1,nr=0,$h=0;function re(){throw Error(a(321))}function Ls(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Le(t[n],e[n]))return!1;return!0}function bs(t,e,n,r,i,l){if(Pn=l,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wi.current=t===null||t.memoizedState===null?rc:ic,t=n(r,i),er){l=0;do{if(er=!1,nr=0,25<=l)throw Error(a(301));l+=1,jt=Ht=null,e.updateQueue=null,wi.current=sc,t=n(r,i)}while(er)}if(wi.current=ki,e=Ht!==null&&Ht.next!==null,Pn=0,jt=Ht=It=null,xi=!1,e)throw Error(a(300));return t}function Os(){var t=nr!==0;return nr=0,t}function Ve(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?It.memoizedState=jt=t:jt=jt.next=t,jt}function Ne(){if(Ht===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=jt===null?It.memoizedState:jt.next;if(e!==null)jt=e,Ht=t;else{if(t===null)throw Error(a(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},jt===null?It.memoizedState=jt=t:jt=jt.next=t}return jt}function rr(t,e){return typeof e=="function"?e(t):e}function Is(t){var e=Ne(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=Ht,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var A=i.next;i.next=l.next,l.next=A}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var q=A=null,Z=null,nt=l;do{var ht=nt.lane;if((Pn&ht)===ht)Z!==null&&(Z=Z.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),r=nt.hasEagerState?nt.eagerState:t(r,nt.action);else{var pt={lane:ht,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Z===null?(q=Z=pt,A=r):Z=Z.next=pt,It.lanes|=ht,En|=ht}nt=nt.next}while(nt!==null&&nt!==l);Z===null?A=r:Z.next=q,Le(r,e.memoizedState)||(ce=!0),e.memoizedState=r,e.baseState=A,e.baseQueue=Z,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do l=i.lane,It.lanes|=l,En|=l,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ds(t){var e=Ne(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,l=e.memoizedState;if(i!==null){n.pending=null;var A=i=i.next;do l=t(l,A.action),A=A.next;while(A!==i);Le(l,e.memoizedState)||(ce=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,r]}function _o(){}function So(t,e){var n=It,r=Ne(),i=e(),l=!Le(r.memoizedState,i);if(l&&(r.memoizedState=i,ce=!0),r=r.queue,Gs(xo.bind(null,n,r,t),[t]),r.getSnapshot!==e||l||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,ir(9,wo.bind(null,n,r,i,e),void 0,null),Kt===null)throw Error(a(349));(Pn&30)!==0||Co(n,e,i)}return i}function Co(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wo(t,e,n,r){e.value=n,e.getSnapshot=r,Po(e)&&Eo(t)}function xo(t,e,n){return n(function(){Po(e)&&Eo(t)})}function Po(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Le(t,n)}catch{return!0}}function Eo(t){var e=Be(t,1);e!==null&&Fe(e,t,1,-1)}function ko(t){var e=Ve();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:t},e.queue=t,t=t.dispatch=nc.bind(null,It,t),[e.memoizedState,t]}function ir(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ro(){return Ne().memoizedState}function Pi(t,e,n,r){var i=Ve();It.flags|=t,i.memoizedState=ir(1|e,n,void 0,r===void 0?null:r)}function Ei(t,e,n,r){var i=Ne();r=r===void 0?null:r;var l=void 0;if(Ht!==null){var A=Ht.memoizedState;if(l=A.destroy,r!==null&&Ls(r,A.deps)){i.memoizedState=ir(e,n,l,r);return}}It.flags|=t,i.memoizedState=ir(1|e,n,l,r)}function To(t,e){return Pi(8390656,8,t,e)}function Gs(t,e){return Ei(2048,8,t,e)}function No(t,e){return Ei(4,2,t,e)}function Fo(t,e){return Ei(4,4,t,e)}function Ao(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mo(t,e,n){return n=n!=null?n.concat([t]):null,Ei(4,4,Ao.bind(null,e,t),n)}function Us(){}function Lo(t,e){var n=Ne();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ls(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bo(t,e){var n=Ne();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ls(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oo(t,e,n){return(Pn&21)===0?(t.baseState&&(t.baseState=!1,ce=!0),t.memoizedState=n):(Le(n,e)||(n=Qa(),It.lanes|=n,En|=n,t.baseState=!0),e)}function tc(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=Ms.transition;Ms.transition={};try{t(!1),e()}finally{wt=n,Ms.transition=r}}function Io(){return Ne().memoizedState}function ec(t,e,n){var r=cn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Do(t))Go(e,n);else if(n=ao(t,e,n,r),n!==null){var i=ae();Fe(n,t,r,i),Uo(n,e,r)}}function nc(t,e,n){var r=cn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Do(t))Go(e,i);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var A=e.lastRenderedState,q=l(A,n);if(i.hasEagerState=!0,i.eagerState=q,Le(q,A)){var Z=e.interleaved;Z===null?(i.next=i,Ps(e)):(i.next=Z.next,Z.next=i),e.interleaved=i;return}}catch{}finally{}n=ao(t,e,i,r),n!==null&&(i=ae(),Fe(n,t,r,i),Uo(n,e,r))}}function Do(t){var e=t.alternate;return t===It||e!==null&&e===It}function Go(t,e){er=xi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uo(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hs(t,n)}}var ki={readContext:Re,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useInsertionEffect:re,useLayoutEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useMutableSource:re,useSyncExternalStore:re,useId:re,unstable_isNewReconciler:!1},rc={readContext:Re,useCallback:function(t,e){return Ve().memoizedState=[t,e===void 0?null:e],t},useContext:Re,useEffect:To,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pi(4194308,4,Ao.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pi(4,2,t,e)},useMemo:function(t,e){var n=Ve();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ve();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ec.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=Ve();return t={current:t},e.memoizedState=t},useState:ko,useDebugValue:Us,useDeferredValue:function(t){return Ve().memoizedState=t},useTransition:function(){var t=ko(!1),e=t[0];return t=tc.bind(null,t[1]),Ve().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,i=Ve();if(Mt){if(n===void 0)throw Error(a(407));n=n()}else{if(n=e(),Kt===null)throw Error(a(349));(Pn&30)!==0||Co(r,e,n)}i.memoizedState=n;var l={value:n,getSnapshot:e};return i.queue=l,To(xo.bind(null,r,l,t),[t]),r.flags|=2048,ir(9,wo.bind(null,r,l,n,e),void 0,null),n},useId:function(){var t=Ve(),e=Kt.identifierPrefix;if(Mt){var n=Qe,r=Xe;n=(r&~(1<<32-Me(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$h++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ic={readContext:Re,useCallback:Lo,useContext:Re,useEffect:Gs,useImperativeHandle:Mo,useInsertionEffect:No,useLayoutEffect:Fo,useMemo:bo,useReducer:Is,useRef:Ro,useState:function(){return Is(rr)},useDebugValue:Us,useDeferredValue:function(t){var e=Ne();return Oo(e,Ht.memoizedState,t)},useTransition:function(){var t=Is(rr)[0],e=Ne().memoizedState;return[t,e]},useMutableSource:_o,useSyncExternalStore:So,useId:Io,unstable_isNewReconciler:!1},sc={readContext:Re,useCallback:Lo,useContext:Re,useEffect:Gs,useImperativeHandle:Mo,useInsertionEffect:No,useLayoutEffect:Fo,useMemo:bo,useReducer:Ds,useRef:Ro,useState:function(){return Ds(rr)},useDebugValue:Us,useDeferredValue:function(t){var e=Ne();return Ht===null?e.memoizedState=t:Oo(e,Ht.memoizedState,t)},useTransition:function(){var t=Ds(rr)[0],e=Ne().memoizedState;return[t,e]},useMutableSource:_o,useSyncExternalStore:So,useId:Io,unstable_isNewReconciler:!1};function Hn(t,e){try{var n="",r=e;do n+=Zh(r),r=r.return;while(r);var i=n}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:i,digest:null}}function zs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bs(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ac=typeof WeakMap=="function"?WeakMap:Map;function zo(t,e,n){n=Je(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zi||(zi=!0,oa=r),Bs(t,e)},n}function Bo(t,e,n){n=Je(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bs(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Bs(t,e),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var A=e.stack;this.componentDidCatch(e.value,{componentStack:A!==null?A:""})}),n}function Ho(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ac;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Sc.bind(null,t,e,n),e.then(t,t))}function Vo(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wo(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Je(-1,1),e.tag=2,ln(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var oc=d.ReactCurrentOwner,ce=!1;function oe(t,e,n,r){e.child=t===null?yo(e,null,n,r):Un(e,t.child,n,r)}function qo(t,e,n,r,i){n=n.render;var l=e.ref;return Gn(e,i),r=bs(t,e,n,r,l,i),n=Os(),t!==null&&!ce?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ze(t,e,i)):(Mt&&n&&ps(e),e.flags|=1,oe(t,e,r,i),e.child)}function jo(t,e,n,r,i){if(t===null){var l=n.type;return typeof l=="function"&&!fa(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Ko(t,e,l,r,i)):(t=ji(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,(t.lanes&i)===0){var A=l.memoizedProps;if(n=n.compare,n=n!==null?n:gi,n(A,r)&&t.ref===e.ref)return Ze(t,e,i)}return e.flags|=1,t=fn(l,r),t.ref=e.ref,t.return=e,e.child=t}function Ko(t,e,n,r,i){if(t!==null){var l=t.memoizedProps;if(gi(l,r)&&t.ref===e.ref)if(ce=!1,e.pendingProps=r=l,(t.lanes&i)!==0)(t.flags&131072)!==0&&(ce=!0);else return e.lanes=t.lanes,Ze(t,e,i)}return Hs(t,e,n,r,i)}function Yo(t,e,n){var r=e.pendingProps,i=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Wn,we),we|=n;else{if((n&1073741824)===0)return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(Wn,we),we|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Nt(Wn,we),we|=r}else l!==null?(r=l.baseLanes|n,e.memoizedState=null):r=n,Nt(Wn,we),we|=r;return oe(t,e,i,n),e.child}function Xo(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hs(t,e,n,r,i){var l=he(n)?Sn:ne.current;return l=Ln(e,l),Gn(e,i),n=bs(t,e,n,r,l,i),r=Os(),t!==null&&!ce?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ze(t,e,i)):(Mt&&r&&ps(e),e.flags|=1,oe(t,e,n,i),e.child)}function Qo(t,e,n,r,i){if(he(n)){var l=!0;si(e)}else l=!1;if(Gn(e,i),e.stateNode===null)Ti(t,e),fo(e,n,r),Rs(e,n,r,i),r=!0;else if(t===null){var A=e.stateNode,q=e.memoizedProps;A.props=q;var Z=A.context,nt=n.contextType;typeof nt=="object"&&nt!==null?nt=Re(nt):(nt=he(n)?Sn:ne.current,nt=Ln(e,nt));var ht=n.getDerivedStateFromProps,pt=typeof ht=="function"||typeof A.getSnapshotBeforeUpdate=="function";pt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q!==r||Z!==nt)&&go(e,A,r,nt),on=!1;var ot=e.memoizedState;A.state=ot,vi(e,r,A,i),Z=e.memoizedState,q!==r||ot!==Z||ue.current||on?(typeof ht=="function"&&(ks(e,n,ht,r),Z=e.memoizedState),(q=on||co(e,n,q,r,ot,Z,nt))?(pt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(e.flags|=4194308)):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=Z),A.props=r,A.state=Z,A.context=nt,r=q):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{A=e.stateNode,oo(t,e),q=e.memoizedProps,nt=e.type===e.elementType?q:Oe(e.type,q),A.props=nt,pt=e.pendingProps,ot=A.context,Z=n.contextType,typeof Z=="object"&&Z!==null?Z=Re(Z):(Z=he(n)?Sn:ne.current,Z=Ln(e,Z));var At=n.getDerivedStateFromProps;(ht=typeof At=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q!==pt||ot!==Z)&&go(e,A,r,Z),on=!1,ot=e.memoizedState,A.state=ot,vi(e,r,A,i);var Rt=e.memoizedState;q!==pt||ot!==Rt||ue.current||on?(typeof At=="function"&&(ks(e,n,At,r),Rt=e.memoizedState),(nt=on||co(e,n,nt,r,ot,Rt,Z)||!1)?(ht||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(r,Rt,Z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(r,Rt,Z)),typeof A.componentDidUpdate=="function"&&(e.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof A.componentDidUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Rt),A.props=r,A.state=Rt,A.context=Z,r=nt):(typeof A.componentDidUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),r=!1)}return Vs(t,e,n,r,l,i)}function Vs(t,e,n,r,i,l){Xo(t,e);var A=(e.flags&128)!==0;if(!r&&!A)return i&&Xa(e,n,!1),Ze(t,e,l);r=e.stateNode,oc.current=e;var q=A&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&A?(e.child=Un(e,t.child,null,l),e.child=Un(e,null,q,l)):oe(t,e,q,l),e.memoizedState=r.state,i&&Xa(e,n,!0),e.child}function Jo(t){var e=t.stateNode;e.pendingContext?Ka(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ka(t,e.context,!1),Ts(t,e.containerInfo)}function Zo(t,e,n,r,i){return In(),_s(i),e.flags|=256,oe(t,e,n,r),e.child}var Ws={dehydrated:null,treeContext:null,retryLane:0};function qs(t){return{baseLanes:t,cachePool:null,transitions:null}}function $o(t,e,n){var r=e.pendingProps,i=Ot.current,l=!1,A=(e.flags&128)!==0,q;if((q=A)||(q=t!==null&&t.memoizedState===null?!1:(i&2)!==0),q?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Nt(Ot,i&1),t===null)return vs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:rs(t)?e.lanes=8:e.lanes=1073741824,null):(A=r.children,t=r.fallback,l?(r=e.mode,l=e.child,A={mode:"hidden",children:A},(r&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=A):l=Ki(A,r,0,null),t=Nn(t,r,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=qs(n),e.memoizedState=Ws,t):js(e,A));if(i=t.memoizedState,i!==null&&(q=i.dehydrated,q!==null))return lc(t,e,A,r,q,i,n);if(l){l=r.fallback,A=e.mode,i=t.child,q=i.sibling;var Z={mode:"hidden",children:r.children};return(A&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=Z,e.deletions=null):(r=fn(i,Z),r.subtreeFlags=i.subtreeFlags&14680064),q!==null?l=fn(q,l):(l=Nn(l,A,n,null),l.flags|=2),l.return=e,r.return=e,r.sibling=l,e.child=r,r=l,l=e.child,A=t.child.memoizedState,A=A===null?qs(n):{baseLanes:A.baseLanes|n,cachePool:null,transitions:A.transitions},l.memoizedState=A,l.childLanes=t.childLanes&~n,e.memoizedState=Ws,r}return l=t.child,t=l.sibling,r=fn(l,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function js(t,e){return e=Ki({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ri(t,e,n,r){return r!==null&&_s(r),Un(e,t.child,null,n),t=js(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lc(t,e,n,r,i,l,A){if(n)return e.flags&256?(e.flags&=-257,r=zs(Error(a(422))),Ri(t,e,A,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=r.fallback,i=e.mode,r=Ki({mode:"visible",children:r.children},i,0,null),l=Nn(l,i,A,null),l.flags|=2,r.return=e,l.return=e,r.sibling=l,e.child=r,(e.mode&1)!==0&&Un(e,t.child,null,A),e.child.memoizedState=qs(A),e.memoizedState=Ws,l);if((e.mode&1)===0)return Ri(t,e,A,null);if(rs(i))return r=Ch(i).digest,l=Error(a(419)),r=zs(l,r,void 0),Ri(t,e,A,r);if(n=(A&t.childLanes)!==0,ce||n){if(r=Kt,r!==null){switch(A&-A){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|A))!==0?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Be(t,i),Fe(r,t,i,-1))}return da(),r=zs(Error(a(421))),Ri(t,e,A,r)}return ja(i)?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),wh(i,e),null):(t=l.treeContext,ct&&(ke=Eh(i),Ce=e,Mt=!0,be=null,Jn=!1,t!==null&&(Pe[Ee++]=Xe,Pe[Ee++]=Qe,Pe[Ee++]=Cn,Xe=t.id,Qe=t.overflow,Cn=e)),e=js(e,r.children),e.flags|=4096,e)}function tl(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xs(t.return,e,n)}function Ks(t,e,n,r,i){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function el(t,e,n){var r=e.pendingProps,i=r.revealOrder,l=r.tail;if(oe(t,e,r.children,n),r=Ot.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tl(t,n,e);else if(t.tag===19)tl(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Nt(Ot,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ci(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ks(e,!1,i,n,l);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ci(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ks(e,!0,n,null,l);break;case"together":Ks(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ze(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),En|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(a(153));if(e.child!==null){for(t=e.child,n=fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uc(t,e,n){switch(e.tag){case 3:Jo(e),In();break;case 5:vo(e);break;case 1:he(e.type)&&si(e);break;case 4:Ts(e,e.stateNode.containerInfo);break;case 10:so(e,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Nt(Ot,Ot.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?$o(t,e,n):(Nt(Ot,Ot.current&1),t=Ze(t,e,n),t!==null?t.sibling:null);Nt(Ot,Ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return el(t,e,n);e.flags|=128}var i=e.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nt(Ot,Ot.current),r)break;return null;case 22:case 23:return e.lanes=0,Yo(t,e,n)}return Ze(t,e,n)}function We(t){t.flags|=4}function nl(t,e){if(t!==null&&t.child===e.child)return!0;if((e.flags&16)!==0)return!1;for(t=e.child;t!==null;){if((t.flags&12854)!==0||(t.subtreeFlags&12854)!==0)return!1;t=t.sibling}return!0}var sr,ar,Ni,Fi;if(at)sr=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)Y(t,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ar=function(){},Ni=function(t,e,n,r,i){if(t=t.memoizedProps,t!==r){var l=e.stateNode,A=He(Te.current);n=tt(l,n,t,r,i,A),(e.updateQueue=n)&&We(e)}},Fi=function(t,e,n,r){n!==r&&We(e)};else if(ft){sr=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var l=i.stateNode;n&&r&&(l=Wa(l,i.type,i.memoizedProps,i)),Y(t,l)}else if(i.tag===6)l=i.stateNode,n&&r&&(l=qa(l,i.memoizedProps,i)),Y(t,l);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)l=i.child,l!==null&&(l.return=i),sr(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var rl=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var l=i.stateNode;n&&r&&(l=Wa(l,i.type,i.memoizedProps,i)),Va(t,l)}else if(i.tag===6)l=i.stateNode,n&&r&&(l=qa(l,i.memoizedProps,i)),Va(t,l);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)l=i.child,l!==null&&(l.return=i),rl(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ar=function(t,e){var n=e.stateNode;if(!nl(t,e)){t=n.containerInfo;var r=Ha(t);rl(r,e,!1,!1),n.pendingChildren=r,We(e),yh(t,r)}},Ni=function(t,e,n,r,i){var l=t.stateNode,A=t.memoizedProps;if((t=nl(t,e))&&A===r)e.stateNode=l;else{var q=e.stateNode,Z=He(Te.current),nt=null;A!==r&&(nt=tt(q,n,A,r,i,Z)),t&&nt===null?e.stateNode=l:(l=mh(l,nt,n,A,r,e,t,q),W(l,n,r,i,Z)&&We(e),e.stateNode=l,t?We(e):sr(l,e,!1,!1))}},Fi=function(t,e,n,r){n!==r?(t=He(zn.current),n=He(Te.current),e.stateNode=Q(r,t,n,e),We(e)):e.stateNode=t.stateNode}}else ar=function(){},Ni=function(){},Fi=function(){};function or(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hc(t,e,n){var r=e.pendingProps;switch(ms(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(e),null;case 1:return he(e.type)&&ii(),ie(e),null;case 3:return n=e.stateNode,Bn(),Ft(ue),Ft(ne),As(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(fi(e)?We(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,be!==null&&(ha(be),be=null))),ar(t,e),ie(e),null;case 5:Ns(e),n=He(zn.current);var i=e.type;if(t!==null&&e.stateNode!=null)Ni(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(a(166));return ie(e),null}if(t=He(Te.current),fi(e)){if(!ct)throw Error(a(175));t=kh(e.stateNode,e.type,e.memoizedProps,n,t,e,!Jn),e.updateQueue=t,t!==null&&We(e)}else{var l=U(i,r,n,t,e);sr(l,e,!1,!1),e.stateNode=l,W(l,i,r,n,t)&&We(e)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ie(e),null;case 6:if(t&&e.stateNode!=null)Fi(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(a(166));if(t=He(zn.current),n=He(Te.current),fi(e)){if(!ct)throw Error(a(176));if(t=e.stateNode,n=e.memoizedProps,(r=Rh(t,n,e,!Jn))&&(i=Ce,i!==null))switch(i.tag){case 3:Oh(i.stateNode.containerInfo,t,n,(i.mode&1)!==0);break;case 5:Ih(i.type,i.memoizedProps,i.stateNode,t,n,(i.mode&1)!==0)}r&&We(e)}else e.stateNode=Q(r,t,n,e)}return ie(e),null;case 13:if(Ft(Ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&ke!==null&&(e.mode&1)!==0&&(e.flags&128)===0)io(),In(),e.flags|=98560,i=!1;else if(i=fi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(a(318));if(!ct)throw Error(a(344));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));Th(i,e)}else In(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ie(e),i=!1}else be!==null&&(ha(be),be=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(n=r!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ot.current&1)!==0?Vt===0&&(Vt=3):da())),e.updateQueue!==null&&(e.flags|=4),ie(e),null);case 4:return Bn(),ar(t,e),t===null&&gt(e.stateNode.containerInfo),ie(e),null;case 10:return ws(e.type._context),ie(e),null;case 17:return he(e.type)&&ii(),ie(e),null;case 19:if(Ft(Ot),i=e.memoizedState,i===null)return ie(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)or(i,!1);else{if(Vt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(l=Ci(t),l!==null){for(e.flags|=128,or(i,!1),t=l.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,n=e.child;n!==null;)r=n,i=t,r.flags&=14680066,l=r.alternate,l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Nt(Ot,Ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&qt()>aa&&(e.flags|=128,r=!0,or(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ci(l),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),or(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Mt)return ie(e),null}else 2*qt()-i.renderingStartTime>aa&&n!==1073741824&&(e.flags|=128,r=!0,or(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(t=i.last,t!==null?t.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qt(),e.sibling=null,t=Ot.current,Nt(Ot,r?t&1|2:t&1),e):(ie(e),null);case 22:case 23:return ca(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(we&1073741824)!==0&&(ie(e),at&&e.subtreeFlags&6&&(e.flags|=8192)):ie(e),null;case 24:return null;case 25:return null}throw Error(a(156,e.tag))}function cc(t,e){switch(ms(e),e.tag){case 1:return he(e.type)&&ii(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bn(),Ft(ue),Ft(ne),As(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Ns(e),null;case 13:if(Ft(Ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(a(340));In()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Ot),null;case 4:return Bn(),null;case 10:return ws(e.type._context),null;case 22:case 23:return ca(),null;case 24:return null;default:return null}}var Ai=!1,se=!1,dc=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Vn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Lt(t,e,r)}else n.current=null}function Ys(t,e,n){try{n()}catch(r){Lt(t,e,r)}}var il=!1;function fc(t,e){for(I(t.containerInfo),ut=e;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){t=ut;try{var n=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,l=t.stateNode,A=l.getSnapshotBeforeUpdate(t.elementType===t.type?r:Oe(t.type,r),i);l.__reactInternalSnapshotBeforeUpdate=A}break;case 3:at&&ph(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(q){Lt(t,t.return,q)}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}return n=il,il=!1,n}function lr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var l=i.destroy;i.destroy=void 0,l!==void 0&&Ys(e,n,l)}i=i.next}while(i!==r)}}function Mi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xs(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=et(n);break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sl(t){var e=t.alternate;e!==null&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&kt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return t.tag===5||t.tag===3||t.tag===4}function ol(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?An(n,t,e):xe(n,t);else if(r!==4&&(t=t.child,t!==null))for(Qs(t,e,n),t=t.sibling;t!==null;)Qs(t,e,n),t=t.sibling}function Js(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?ni(n,t,e):Se(n,t);else if(r!==4&&(t=t.child,t!==null))for(Js(t,e,n),t=t.sibling;t!==null;)Js(t,e,n),t=t.sibling}var Qt=null,Ie=!1;function qe(t,e,n){for(n=n.child;n!==null;)Zs(t,e,n),n=n.sibling}function Zs(t,e,n){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ui,n)}catch{}switch(n.tag){case 5:se||Vn(n,e);case 6:if(at){var r=Qt,i=Ie;Qt=null,qe(t,e,n),Qt=r,Ie=i,Qt!==null&&(Ie?es(Qt,n.stateNode):ts(Qt,n.stateNode))}else qe(t,e,n);break;case 18:at&&Qt!==null&&(Ie?Lh(Qt,n.stateNode):Mh(Qt,n.stateNode));break;case 4:at?(r=Qt,i=Ie,Qt=n.stateNode.containerInfo,Ie=!0,qe(t,e,n),Qt=r,Ie=i):(ft&&(r=n.stateNode.containerInfo,i=Ha(r),ns(r,i)),qe(t,e,n));break;case 0:case 11:case 14:case 15:if(!se&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,A=l.destroy;l=l.tag,A!==void 0&&((l&2)!==0||(l&4)!==0)&&Ys(n,e,A),i=i.next}while(i!==r)}qe(t,e,n);break;case 1:if(!se&&(Vn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(q){Lt(n,e,q)}qe(t,e,n);break;case 21:qe(t,e,n);break;case 22:n.mode&1?(se=(r=se)||n.memoizedState!==null,qe(t,e,n),se=r):qe(t,e,n);break;default:qe(t,e,n)}}function ll(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dc),e.forEach(function(r){var i=wc.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function De(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=t,A=e;if(at){var q=A;t:for(;q!==null;){switch(q.tag){case 5:Qt=q.stateNode,Ie=!1;break t;case 3:Qt=q.stateNode.containerInfo,Ie=!0;break t;case 4:Qt=q.stateNode.containerInfo,Ie=!0;break t}q=q.return}if(Qt===null)throw Error(a(160));Zs(l,A,i),Qt=null,Ie=!1}else Zs(l,A,i);var Z=i.alternate;Z!==null&&(Z.return=null),i.return=null}catch(nt){Lt(i,e,nt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ul(e,t),e=e.sibling}function ul(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(De(e,t),je(t),r&4){try{lr(3,t,t.return),Mi(3,t)}catch(ot){Lt(t,t.return,ot)}try{lr(5,t,t.return)}catch(ot){Lt(t,t.return,ot)}}break;case 1:De(e,t),je(t),r&512&&n!==null&&Vn(n,n.return);break;case 5:if(De(e,t),je(t),r&512&&n!==null&&Vn(n,n.return),at){if(t.flags&32){var i=t.stateNode;try{Ba(i)}catch(ot){Lt(t,t.return,ot)}}if(r&4&&(i=t.stateNode,i!=null)){var l=t.memoizedProps;if(n=n!==null?n.memoizedProps:l,r=t.type,e=t.updateQueue,t.updateQueue=null,e!==null)try{_n(i,e,r,n,l,t)}catch(ot){Lt(t,t.return,ot)}}}break;case 6:if(De(e,t),je(t),r&4&&at){if(t.stateNode===null)throw Error(a(162));i=t.stateNode,l=t.memoizedProps,n=n!==null?n.memoizedProps:l;try{te(i,n,l)}catch(ot){Lt(t,t.return,ot)}}break;case 3:if(De(e,t),je(t),r&4){if(at&&ct&&n!==null&&n.memoizedState.isDehydrated)try{Fh(e.containerInfo)}catch(ot){Lt(t,t.return,ot)}if(ft){i=e.containerInfo,l=e.pendingChildren;try{ns(i,l)}catch(ot){Lt(t,t.return,ot)}}}break;case 4:if(De(e,t),je(t),r&4&&ft){l=t.stateNode,i=l.containerInfo,l=l.pendingChildren;try{ns(i,l)}catch(ot){Lt(t,t.return,ot)}}break;case 13:De(e,t),je(t),i=t.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(sa=qt())),r&4&&ll(t);break;case 22:var A=n!==null&&n.memoizedState!==null;if(t.mode&1?(se=(n=se)||A,De(e,t),se=n):De(e,t),je(t),r&8192){if(n=t.memoizedState!==null,(t.stateNode.isHidden=n)&&!A&&(t.mode&1)!==0)for(ut=t,r=t.child;r!==null;){for(e=ut=r;ut!==null;){A=ut;var q=A.child;switch(A.tag){case 0:case 11:case 14:case 15:lr(4,A,A.return);break;case 1:Vn(A,A.return);var Z=A.stateNode;if(typeof Z.componentWillUnmount=="function"){var nt=A,ht=A.return;try{var pt=nt;Z.props=pt.memoizedProps,Z.state=pt.memoizedState,Z.componentWillUnmount()}catch(ot){Lt(nt,ht,ot)}}break;case 5:Vn(A,A.return);break;case 22:if(A.memoizedState!==null){dl(e);continue}}q!==null?(q.return=A,ut=q):dl(e)}r=r.sibling}if(at){t:if(r=null,at)for(e=t;;){if(e.tag===5){if(r===null){r=e;try{i=e.stateNode,n?ch(i):fh(e.stateNode,e.memoizedProps)}catch(ot){Lt(t,t.return,ot)}}}else if(e.tag===6){if(r===null)try{l=e.stateNode,n?dh(l):gh(l,e.memoizedProps)}catch(ot){Lt(t,t.return,ot)}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}}}break;case 19:De(e,t),je(t),r&4&&ll(t);break;case 21:break;default:De(e,t),je(t)}}function je(t){var e=t.flags;if(e&2){try{if(at){t:{for(var n=t.return;n!==null;){if(al(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ba(i),r.flags&=-33);var l=ol(t);Js(t,l,i);break;case 3:case 4:var A=r.stateNode.containerInfo,q=ol(t);Qs(t,q,A);break;default:throw Error(a(161))}}}catch(Z){Lt(t,t.return,Z)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gc(t,e,n){ut=t,hl(t)}function hl(t,e,n){for(var r=(t.mode&1)!==0;ut!==null;){var i=ut,l=i.child;if(i.tag===22&&r){var A=i.memoizedState!==null||Ai;if(!A){var q=i.alternate,Z=q!==null&&q.memoizedState!==null||se;q=Ai;var nt=se;if(Ai=A,(se=Z)&&!nt)for(ut=i;ut!==null;)A=ut,Z=A.child,A.tag===22&&A.memoizedState!==null?fl(i):Z!==null?(Z.return=A,ut=Z):fl(i);for(;l!==null;)ut=l,hl(l),l=l.sibling;ut=i,Ai=q,se=nt}cl(t)}else(i.subtreeFlags&8772)!==0&&l!==null?(l.return=i,ut=l):cl(t)}}function cl(t){for(;ut!==null;){var e=ut;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:se||Mi(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!se)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Oe(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&uo(e,l,r);break;case 3:var A=e.updateQueue;if(A!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=et(e.child.stateNode);break;case 1:n=e.child.stateNode}uo(e,A,n)}break;case 5:var q=e.stateNode;n===null&&e.flags&4&&ee(q,e.type,e.memoizedProps,e);break;case 6:break;case 4:break;case 12:break;case 13:if(ct&&e.memoizedState===null){var Z=e.alternate;if(Z!==null){var nt=Z.memoizedState;if(nt!==null){var ht=nt.dehydrated;ht!==null&&Ah(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}se||e.flags&512&&Xs(e)}catch(pt){Lt(e,e.return,pt)}}if(e===t){ut=null;break}if(n=e.sibling,n!==null){n.return=e.return,ut=n;break}ut=e.return}}function dl(t){for(;ut!==null;){var e=ut;if(e===t){ut=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ut=n;break}ut=e.return}}function fl(t){for(;ut!==null;){var e=ut;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mi(4,e)}catch(Z){Lt(e,n,Z)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(Z){Lt(e,i,Z)}}var l=e.return;try{Xs(e)}catch(Z){Lt(e,l,Z)}break;case 5:var A=e.return;try{Xs(e)}catch(Z){Lt(e,A,Z)}}}catch(Z){Lt(e,e.return,Z)}if(e===t){ut=null;break}var q=e.sibling;if(q!==null){q.return=e.return,ut=q;break}ut=e.return}}var Li=0,bi=1,Oi=2,Ii=3,Di=4;if(typeof Symbol=="function"&&Symbol.for){var ur=Symbol.for;Li=ur("selector.component"),bi=ur("selector.has_pseudo_class"),Oi=ur("selector.role"),Ii=ur("selector.test_id"),Di=ur("selector.text")}function $s(t){var e=Et(t);if(e!=null){if(typeof e.memoizedProps["data-testname"]!="string")throw Error(a(364));return e}if(t=vn(t),t===null)throw Error(a(362));return t.stateNode.current}function ta(t,e){switch(e.$$typeof){case Li:if(t.type===e.value)return!0;break;case bi:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],l=e[i];if(r.tag!==5||!Zt(r)){for(;l!=null&&ta(r,l);)i++,l=e[i];if(i===e.length){e=!0;break t}else for(r=r.child;r!==null;)t.push(r,i),r=r.sibling}}e=!1}return e;case Oi:if(t.tag===5&&Ke(t.stateNode,e.value))return!0;break;case Di:if((t.tag===5||t.tag===6)&&(t=_e(t),t!==null&&0<=t.indexOf(e.value)))return!0;break;case Ii:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ea(t){switch(t.$$typeof){case Li:return"<"+(B(t.value)||"Unknown")+">";case bi:return":has("+(ea(t)||"")+")";case Oi:return'[role="'+t.value+'"]';case Di:return'"'+t.value+'"';case Ii:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function gl(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],l=t[r++],A=e[l];if(i.tag!==5||!Zt(i)){for(;A!=null&&ta(i,A);)l++,A=e[l];if(l===e.length)n.push(i);else for(i=i.child;i!==null;)t.push(i,l),i=i.sibling}}return n}function na(t,e){if(!Wt)throw Error(a(363));t=$s(t),t=gl(t,e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(r.tag===5)Zt(r)||e.push(r.stateNode);else for(r=r.child;r!==null;)t.push(r),r=r.sibling}return e}var pc=Math.ceil,Gi=d.ReactCurrentDispatcher,ra=d.ReactCurrentOwner,Gt=d.ReactCurrentBatchConfig,_t=0,Kt=null,zt=null,Jt=0,we=0,Wn=sn(0),Vt=0,hr=null,En=0,Ui=0,ia=0,cr=null,de=null,sa=0,aa=1/0,$e=null;function qn(){aa=qt()+500}var zi=!1,oa=null,un=null,Bi=!1,hn=null,Hi=0,dr=0,la=null,Vi=-1,Wi=0;function ae(){return(_t&6)!==0?qt():Vi!==-1?Vi:Vi=qt()}function cn(t){return(t.mode&1)===0?1:(_t&2)!==0&&Jt!==0?Jt&-Jt:Jh.transition!==null?(Wi===0&&(Wi=Qa()),Wi):(t=wt,t!==0?t:Bt())}function Fe(t,e,n,r){if(50<dr)throw dr=0,la=null,Error(a(185));Qn(t,n,r),((_t&2)===0||t!==Kt)&&(t===Kt&&((_t&2)===0&&(Ui|=n),Vt===4&&dn(t,Jt)),fe(t,r),n===1&&_t===0&&(e.mode&1)===0&&(qn(),hi&&ze()))}function fe(t,e){var n=t.callbackNode;Hh(t,e);var r=li(t,t===Kt?Jt:0);if(r===0)n!==null&&Za(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Za(n),e===1)t.tag===0?Qh(ml.bind(null,t)):$a(ml.bind(null,t)),bt?rn(function(){(_t&6)===0&&ze()}):cs(ds,ze),n=null;else{switch(Ja(r)){case 1:n=ds;break;case 4:n=jh;break;case 16:n=fs;break;case 536870912:n=Kh;break;default:n=fs}n=El(n,pl.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pl(t,e){if(Vi=-1,Wi=0,(_t&6)!==0)throw Error(a(327));var n=t.callbackNode;if(Tn()&&t.callbackNode!==n)return null;var r=li(t,t===Kt?Jt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=qi(t,r);else{e=r;var i=_t;_t|=2;var l=_l();(Kt!==t||Jt!==e)&&($e=null,qn(),kn(t,e));do try{vc();break}catch(q){vl(t,q)}while(!0);Cs(),Gi.current=l,_t=i,zt!==null?e=0:(Kt=null,Jt=0,e=Vt)}if(e!==0){if(e===2&&(i=ls(t),i!==0&&(r=i,e=ua(t,i))),e===1)throw n=hr,kn(t,0),dn(t,r),fe(t,qt()),n;if(e===6)dn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!mc(i)&&(e=qi(t,r),e===2&&(l=ls(t),l!==0&&(r=l,e=ua(t,l))),e===1))throw n=hr,kn(t,0),dn(t,r),fe(t,qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:Rn(t,de,$e);break;case 3:if(dn(t,r),(r&130023424)===r&&(e=sa+500-qt(),10<e)){if(li(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ae(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=D(Rn.bind(null,t,de,$e),e);break}Rn(t,de,$e);break;case 4:if(dn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var A=31-Me(r);l=1<<A,A=e[A],A>i&&(i=A),r&=~l}if(r=i,r=qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pc(r/1960))-r,10<r){t.timeoutHandle=D(Rn.bind(null,t,de,$e),r);break}Rn(t,de,$e);break;case 5:Rn(t,de,$e);break;default:throw Error(a(329))}}}return fe(t,qt()),t.callbackNode===n?pl.bind(null,t):null}function ua(t,e){var n=cr;return t.current.memoizedState.isDehydrated&&(kn(t,e).flags|=256),t=qi(t,e),t!==2&&(e=de,de=n,e!==null&&ha(e)),t}function ha(t){de===null?de=t:de.push.apply(de,t)}function mc(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!Le(l(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dn(t,e){for(e&=~ia,e&=~Ui,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Me(e),r=1<<n;t[n]=-1,e&=~r}}function ml(t){if((_t&6)!==0)throw Error(a(327));Tn();var e=li(t,0);if((e&1)===0)return fe(t,qt()),null;var n=qi(t,e);if(t.tag!==0&&n===2){var r=ls(t);r!==0&&(e=r,n=ua(t,r))}if(n===1)throw n=hr,kn(t,0),dn(t,e),fe(t,qt()),n;if(n===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,de,$e),fe(t,qt()),null}function yl(t){hn!==null&&hn.tag===0&&(_t&6)===0&&Tn();var e=_t;_t|=1;var n=Gt.transition,r=wt;try{if(Gt.transition=null,wt=1,t)return t()}finally{wt=r,Gt.transition=n,_t=e,(_t&6)===0&&ze()}}function ca(){we=Wn.current,Ft(Wn)}function kn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==rt&&(t.timeoutHandle=rt,X(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(ms(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ii();break;case 3:Bn(),Ft(ue),Ft(ne),As();break;case 5:Ns(r);break;case 4:Bn();break;case 13:Ft(Ot);break;case 19:Ft(Ot);break;case 10:ws(r.type._context);break;case 22:case 23:ca()}n=n.return}if(Kt=t,zt=t=fn(t.current,null),Jt=we=e,Vt=0,hr=null,ia=Ui=En=0,de=cr=null,xn!==null){for(e=0;e<xn.length;e++)if(n=xn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var A=l.next;l.next=i,r.next=A}n.pending=r}xn=null}return t}function vl(t,e){do{var n=zt;try{if(Cs(),wi.current=ki,xi){for(var r=It.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xi=!1}if(Pn=0,jt=Ht=It=null,er=!1,nr=0,ra.current=null,n===null||n.return===null){Vt=1,hr=e,zt=null;break}t:{var l=t,A=n.return,q=n,Z=e;if(e=Jt,q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var nt=Z,ht=q,pt=ht.tag;if((ht.mode&1)===0&&(pt===0||pt===11||pt===15)){var ot=ht.alternate;ot?(ht.updateQueue=ot.updateQueue,ht.memoizedState=ot.memoizedState,ht.lanes=ot.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var At=Vo(A);if(At!==null){At.flags&=-257,Wo(At,A,q,l,e),At.mode&1&&Ho(l,nt,e),e=At,Z=nt;var Rt=e.updateQueue;if(Rt===null){var ge=new Set;ge.add(Z),e.updateQueue=ge}else Rt.add(Z);break t}else{if((e&1)===0){Ho(l,nt,e),da();break t}Z=Error(a(426))}}else if(Mt&&q.mode&1){var tn=Vo(A);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),Wo(tn,A,q,l,e),_s(Hn(Z,q));break t}}l=Z=Hn(Z,q),Vt!==4&&(Vt=2),cr===null?cr=[l]:cr.push(l),l=A;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var J=zo(l,Z,e);lo(l,J);break t;case 1:q=Z;var K=l.type,$=l.stateNode;if((l.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(un===null||!un.has($)))){l.flags|=65536,e&=-e,l.lanes|=e;var lt=Bo(l,q,e);lo(l,lt);break t}}l=l.return}while(l!==null)}Cl(n)}catch(dt){e=dt,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function _l(){var t=Gi.current;return Gi.current=ki,t===null?ki:t}function da(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Kt===null||(En&268435455)===0&&(Ui&268435455)===0||dn(Kt,Jt)}function qi(t,e){var n=_t;_t|=2;var r=_l();(Kt!==t||Jt!==e)&&($e=null,kn(t,e));do try{yc();break}catch(i){vl(t,i)}while(!0);if(Cs(),_t=n,Gi.current=r,zt!==null)throw Error(a(261));return Kt=null,Jt=0,Vt}function yc(){for(;zt!==null;)Sl(zt)}function vc(){for(;zt!==null&&!Wh();)Sl(zt)}function Sl(t){var e=Pl(t.alternate,t,we);t.memoizedProps=t.pendingProps,e===null?Cl(t):zt=e,ra.current=null}function Cl(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=hc(n,e,we),n!==null){zt=n;return}}else{if(n=cc(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,zt=null;return}}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Vt===0&&(Vt=5)}function Rn(t,e,n){var r=wt,i=Gt.transition;try{Gt.transition=null,wt=1,_c(t,e,n,r)}finally{Gt.transition=i,wt=r}return null}function _c(t,e,n,r){do Tn();while(hn!==null);if((_t&6)!==0)throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Vh(t,l),t===Kt&&(zt=Kt=null,Jt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Bi||(Bi=!0,El(fs,function(){return Tn(),null})),l=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||l){l=Gt.transition,Gt.transition=null;var A=wt;wt=1;var q=_t;_t|=4,ra.current=null,fc(t,n),ul(n,t),b(t.containerInfo),t.current=n,gc(n),qh(),_t=q,wt=A,Gt.transition=l}else t.current=n;if(Bi&&(Bi=!1,hn=t,Hi=i),l=t.pendingLanes,l===0&&(un=null),Yh(n.stateNode),fe(t,qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zi)throw zi=!1,t=oa,oa=null,t;return(Hi&1)!==0&&t.tag!==0&&Tn(),l=t.pendingLanes,(l&1)!==0?t===la?dr++:(dr=0,la=t):dr=0,ze(),null}function Tn(){if(hn!==null){var t=Ja(Hi),e=Gt.transition,n=wt;try{if(Gt.transition=null,wt=16>t?16:t,hn===null)var r=!1;else{if(t=hn,hn=null,Hi=0,(_t&6)!==0)throw Error(a(331));var i=_t;for(_t|=4,ut=t.current;ut!==null;){var l=ut,A=l.child;if((ut.flags&16)!==0){var q=l.deletions;if(q!==null){for(var Z=0;Z<q.length;Z++){var nt=q[Z];for(ut=nt;ut!==null;){var ht=ut;switch(ht.tag){case 0:case 11:case 15:lr(8,ht,l)}var pt=ht.child;if(pt!==null)pt.return=ht,ut=pt;else for(;ut!==null;){ht=ut;var ot=ht.sibling,At=ht.return;if(sl(ht),ht===nt){ut=null;break}if(ot!==null){ot.return=At,ut=ot;break}ut=At}}}var Rt=l.alternate;if(Rt!==null){var ge=Rt.child;if(ge!==null){Rt.child=null;do{var tn=ge.sibling;ge.sibling=null,ge=tn}while(ge!==null)}}ut=l}}if((l.subtreeFlags&2064)!==0&&A!==null)A.return=l,ut=A;else t:for(;ut!==null;){if(l=ut,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:lr(9,l,l.return)}var J=l.sibling;if(J!==null){J.return=l.return,ut=J;break t}ut=l.return}}var K=t.current;for(ut=K;ut!==null;){A=ut;var $=A.child;if((A.subtreeFlags&2064)!==0&&$!==null)$.return=A,ut=$;else t:for(A=K;ut!==null;){if(q=ut,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Mi(9,q)}}catch(dt){Lt(q,q.return,dt)}if(q===A){ut=null;break t}var lt=q.sibling;if(lt!==null){lt.return=q.return,ut=lt;break t}ut=q.return}}if(_t=i,ze(),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ui,t)}catch{}r=!0}return r}finally{wt=n,Gt.transition=e}}return!1}function wl(t,e,n){e=Hn(n,e),e=zo(t,e,1),t=ln(t,e,1),e=ae(),t!==null&&(Qn(t,1,e),fe(t,e))}function Lt(t,e,n){if(t.tag===3)wl(t,t,n);else for(;e!==null;){if(e.tag===3){wl(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){t=Hn(n,t),t=Bo(e,t,1),e=ln(e,t,1),t=ae(),e!==null&&(Qn(e,1,t),fe(e,t));break}}e=e.return}}function Sc(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ae(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(Jt&n)===n&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>qt()-sa?kn(t,0):ia|=n),fe(t,e)}function xl(t,e){e===0&&((t.mode&1)===0?e=1:(e=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var n=ae();t=Be(t,e),t!==null&&(Qn(t,e,n),fe(t,n))}function Cc(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xl(t,n)}function wc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(e),xl(t,n)}var Pl;Pl=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ue.current)ce=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return ce=!1,uc(t,e,n);ce=(t.flags&131072)!==0}else ce=!1,Mt&&(e.flags&1048576)!==0&&to(e,di,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ti(t,e),t=e.pendingProps;var i=Ln(e,ne.current);Gn(e,n),i=bs(null,e,r,t,i,n);var l=Os();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,he(r)?(l=!0,si(e)):l=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Es(e),i.updater=_i,e.stateNode=i,i._reactInternals=e,Rs(e,r,t,n),e=Vs(null,e,r,!0,l,n)):(e.tag=0,Mt&&l&&ps(e),oe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ti(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Pc(r),t=Oe(r,t),i){case 0:e=Hs(null,e,r,t,n);break t;case 1:e=Qo(null,e,r,t,n);break t;case 11:e=qo(null,e,r,t,n);break t;case 14:e=jo(null,e,r,Oe(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oe(r,i),Hs(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oe(r,i),Qo(t,e,r,i,n);case 3:t:{if(Jo(e),t===null)throw Error(a(387));r=e.pendingProps,l=e.memoizedState,i=l.element,oo(t,e),vi(e,r,null,n);var A=e.memoizedState;if(r=A.element,ct&&l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){i=Hn(Error(a(423)),e),e=Zo(t,e,r,n,i);break t}else if(r!==i){i=Hn(Error(a(424)),e),e=Zo(t,e,r,n,i);break t}else for(ct&&(ke=Ph(e.stateNode.containerInfo),Ce=e,Mt=!0,be=null,Jn=!1),n=yo(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(In(),r===i){e=Ze(t,e,n);break t}oe(t,e,r,n)}e=e.child}return e;case 5:return vo(e),t===null&&vs(e),r=e.type,i=e.pendingProps,l=t!==null?t.memoizedProps:null,A=i.children,it(r,i)?A=null:l!==null&&it(r,l)&&(e.flags|=32),Xo(t,e),oe(t,e,A,n),e.child;case 6:return t===null&&vs(e),null;case 13:return $o(t,e,n);case 4:return Ts(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Un(e,null,r,n):oe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oe(r,i),qo(t,e,r,i,n);case 7:return oe(t,e,e.pendingProps,n),e.child;case 8:return oe(t,e,e.pendingProps.children,n),e.child;case 12:return oe(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,l=e.memoizedProps,A=i.value,so(e,r,A),l!==null)if(Le(l.value,A)){if(l.children===i.children&&!ue.current){e=Ze(t,e,n);break t}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var q=l.dependencies;if(q!==null){A=l.child;for(var Z=q.firstContext;Z!==null;){if(Z.context===r){if(l.tag===1){Z=Je(-1,n&-n),Z.tag=2;var nt=l.updateQueue;if(nt!==null){nt=nt.shared;var ht=nt.pending;ht===null?Z.next=Z:(Z.next=ht.next,ht.next=Z),nt.pending=Z}}l.lanes|=n,Z=l.alternate,Z!==null&&(Z.lanes|=n),xs(l.return,n,e),q.lanes|=n;break}Z=Z.next}}else if(l.tag===10)A=l.type===e.type?null:l.child;else if(l.tag===18){if(A=l.return,A===null)throw Error(a(341));A.lanes|=n,q=A.alternate,q!==null&&(q.lanes|=n),xs(A,n,e),A=l.sibling}else A=l.child;if(A!==null)A.return=l;else for(A=l;A!==null;){if(A===e){A=null;break}if(l=A.sibling,l!==null){l.return=A.return,A=l;break}A=A.return}l=A}oe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gn(e,n),i=Re(i),r=r(i),e.flags|=1,oe(t,e,r,n),e.child;case 14:return r=e.type,i=Oe(r,e.pendingProps),i=Oe(r.type,i),jo(t,e,r,i,n);case 15:return Ko(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Oe(r,i),Ti(t,e),e.tag=1,he(r)?(t=!0,si(e)):t=!1,Gn(e,n),fo(e,r,i),Rs(e,r,i,n),Vs(null,e,r,!0,t,n);case 19:return el(t,e,n);case 22:return Yo(t,e,n)}throw Error(a(156,e.tag))};function El(t,e){return cs(t,e)}function xc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ae(t,e,n,r){return new xc(t,e,n,r)}function fa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pc(t){if(typeof t=="function")return fa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===S)return 11;if(t===u)return 14}return 2}function fn(t,e){var n=t.alternate;return n===null?(n=Ae(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ji(t,e,n,r,i,l){var A=2;if(r=t,typeof t=="function")fa(t)&&(A=1);else if(typeof t=="string")A=5;else t:switch(t){case y:return Nn(n.children,i,l,e);case w:A=8,i|=8;break;case p:return t=Ae(12,n,e,i|2),t.elementType=p,t.lanes=l,t;case E:return t=Ae(13,n,e,i),t.elementType=E,t.lanes=l,t;case F:return t=Ae(19,n,e,i),t.elementType=F,t.lanes=l,t;case v:return Ki(n,i,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h:A=10;break t;case c:A=9;break t;case S:A=11;break t;case u:A=14;break t;case s:A=16,r=null;break t}throw Error(a(130,t==null?t:typeof t,""))}return e=Ae(A,n,e,i),e.elementType=t,e.type=r,e.lanes=l,e}function Nn(t,e,n,r){return t=Ae(7,t,r,e),t.lanes=n,t}function Ki(t,e,n,r){return t=Ae(22,t,r,e),t.elementType=v,t.lanes=n,t.stateNode={isHidden:!1},t}function ga(t,e,n){return t=Ae(6,t,null,e),t.lanes=n,t}function pa(t,e,n){return e=Ae(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ec(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=us(0),this.expirationTimes=us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.identifierPrefix=r,this.onRecoverableError=i,ct&&(this.mutableSourceEagerHydrationData=null)}function kl(t,e,n,r,i,l,A,q,Z){return t=new Ec(t,e,n,q,Z),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Ae(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Es(l),t}function Rl(t){if(!t)return an;t=t._reactInternals;t:{if(R(t)!==t||t.tag!==1)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(he(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(a(171))}if(t.tag===1){var n=t.type;if(he(n))return Ya(t,n,e)}return e}function Tl(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=z(e),t===null?null:t.stateNode}function Nl(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yi(t,e){Nl(t,e),(t=t.alternate)&&Nl(t,e)}function kc(t){return t=z(t),t===null?null:t.stateNode}function Rc(){return null}return O.attemptContinuousHydration=function(t){if(t.tag===13){var e=Be(t,134217728);if(e!==null){var n=ae();Fe(e,t,134217728,n)}Yi(t,134217728)}},O.attemptDiscreteHydration=function(t){if(t.tag===13){var e=Be(t,1);if(e!==null){var n=ae();Fe(e,t,1,n)}Yi(t,1)}},O.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var e=cn(t),n=Be(t,e);if(n!==null){var r=ae();Fe(n,t,e,r)}Yi(t,e)}},O.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xn(e.pendingLanes);n!==0&&(hs(e,n|1),fe(e,qt()),(_t&6)===0&&(qn(),ze()))}break;case 13:yl(function(){var r=Be(t,1);if(r!==null){var i=ae();Fe(r,t,1,i)}}),Yi(t,1)}},O.batchedUpdates=function(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(qn(),hi&&ze())}},O.createComponentSelector=function(t){return{$$typeof:Li,value:t}},O.createContainer=function(t,e,n,r,i,l,A){return kl(t,e,!1,null,n,r,i,l,A)},O.createHasPseudoClassSelector=function(t){return{$$typeof:bi,value:t}},O.createHydrationContainer=function(t,e,n,r,i,l,A,q,Z){return t=kl(n,r,!0,t,i,l,A,q,Z),t.context=Rl(null),n=t.current,r=ae(),i=cn(n),l=Je(r,i),l.callback=e??null,ln(n,l,i),t.current.lanes=i,Qn(t,i,r),fe(t,r),t},O.createPortal=function(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}},O.createRoleSelector=function(t){return{$$typeof:Oi,value:t}},O.createTestNameSelector=function(t){return{$$typeof:Ii,value:t}},O.createTextSelector=function(t){return{$$typeof:Di,value:t}},O.deferredUpdates=function(t){var e=wt,n=Gt.transition;try{return Gt.transition=null,wt=16,t()}finally{wt=e,Gt.transition=n}},O.discreteUpdates=function(t,e,n,r,i){var l=wt,A=Gt.transition;try{return Gt.transition=null,wt=1,t(e,n,r,i)}finally{wt=l,Gt.transition=A,_t===0&&qn()}},O.findAllNodes=na,O.findBoundingRects=function(t,e){if(!Wt)throw Error(a(363));e=na(t,e),t=[];for(var n=0;n<e.length;n++)t.push(Tt(e[n]));for(e=t.length-1;0<e;e--){n=t[e];for(var r=n.x,i=r+n.width,l=n.y,A=l+n.height,q=e-1;0<=q;q--)if(e!==q){var Z=t[q],nt=Z.x,ht=nt+Z.width,pt=Z.y,ot=pt+Z.height;if(r>=nt&&l>=pt&&i<=ht&&A<=ot){t.splice(e,1);break}else if(r!==nt||n.width!==Z.width||ot<l||pt>A){if(!(l!==pt||n.height!==Z.height||ht<r||nt>i)){nt>r&&(Z.width+=nt-r,Z.x=r),ht<i&&(Z.width=i-nt),t.splice(e,1);break}}else{pt>l&&(Z.height+=pt-l,Z.y=l),ot<A&&(Z.height=A-pt),t.splice(e,1);break}}}return t},O.findHostInstance=Tl,O.findHostInstanceWithNoPortals=function(t){return t=G(t),t=t!==null?j(t):null,t===null?null:t.stateNode},O.findHostInstanceWithWarning=function(t){return Tl(t)},O.flushControlled=function(t){var e=_t;_t|=1;var n=Gt.transition,r=wt;try{Gt.transition=null,wt=1,t()}finally{wt=r,Gt.transition=n,_t=e,_t===0&&(qn(),ze())}},O.flushPassiveEffects=Tn,O.flushSync=yl,O.focusWithin=function(t,e){if(!Wt)throw Error(a(363));for(t=$s(t),e=gl(t,e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!Zt(n)){if(n.tag===5&&$t(n.stateNode))return!0;for(n=n.child;n!==null;)e.push(n),n=n.sibling}}return!1},O.getCurrentUpdatePriority=function(){return wt},O.getFindAllNodesFailureDescription=function(t,e){if(!Wt)throw Error(a(363));var n=0,r=[];t=[$s(t),0];for(var i=0;i<t.length;){var l=t[i++],A=t[i++],q=e[A];if((l.tag!==5||!Zt(l))&&(ta(l,q)&&(r.push(ea(q)),A++,A>n&&(n=A)),A<e.length))for(l=l.child;l!==null;)t.push(l,A),l=l.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(ea(e[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},O.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return et(t.child.stateNode);default:return t.child.stateNode}},O.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:kc,findFiberByHostInstance:t.findFiberByHostInstance||Rc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{ui=e.inject(t),Ue=e}catch{}t=!!e.checkDCE}}return t},O.isAlreadyRendering=function(){return!1},O.observeVisibleRects=function(t,e,n,r){if(!Wt)throw Error(a(363));t=na(t,e);var i=Ge(t,n,r).disconnect;return{disconnect:function(){i()}}},O.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},O.runWithPriority=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}},O.shouldError=function(){return null},O.shouldSuspend=function(){return!1},O.updateContainer=function(t,e,n,r){var i=e.current,l=ae(),A=cn(i);return n=Rl(n),e.context===null?e.context=n:e.pendingContext=n,e=Je(l,A),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ln(i,e,A),t!==null&&(Fe(t,i,A,l),yi(t,i,A)),A},O}),Fa}var Uu;function xd(){return Uu||(Uu=1,Ra.exports=wd()),Ra.exports}var Pd=xd();const Ed=Qu(Pd);var Aa={exports:{}},mn={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu;function kd(){return zu||(zu=1,mn.ConcurrentRoot=1,mn.ContinuousEventPriority=4,mn.DefaultEventPriority=16,mn.DiscreteEventPriority=1,mn.IdleEventPriority=536870912,mn.LegacyRoot=0),mn}var Bu;function Rd(){return Bu||(Bu=1,Aa.exports=kd()),Aa.exports}var sh=Rd(),Td=vt();const Hu={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Vu=!1,Wu=!1;const Ua=".react-konva-event",Nd=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Fd=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Ad={};function $i(o,g,O=Ad){if(!Vu&&"zIndex"in g&&(console.warn(Fd),Vu=!0),!Wu&&g.draggable){var L=g.x!==void 0||g.y!==void 0,T=g.onDragEnd||g.onDragMove;L&&!T&&(console.warn(Nd),Wu=!0)}for(var _ in O)if(!Hu[_]){var a=_.slice(0,2)==="on",d=O[_]!==g[_];if(a&&d){var f=_.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),o.off(f,O[_])}var m=!g.hasOwnProperty(_);m&&o.setAttr(_,void 0)}var y=g._useStrictMode,w={},p=!1;const h={};for(var _ in g)if(!Hu[_]){var a=_.slice(0,2)==="on",c=O[_]!==g[_];if(a&&c){var f=_.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),g[_]&&(h[f]=g[_])}!a&&(g[_]!==O[_]||y&&g[_]!==o.getAttr(_))&&(p=!0,w[_]=g[_])}p&&(o.setAttrs(w),yn(o));for(var f in h)o.on(f+Ua,h[f])}function yn(o){if(!Td.Konva.autoDrawEnabled){var g=o.getLayer()||o.getStage();g&&g.batchDraw()}}var Ma=ih();const ah={},Md={};ei.Node.prototype._applyProps=$i;function Ld(o,g){if(typeof g=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${g}`);return}o.add(g),yn(o)}function bd(o,g,O){let L=ei[o];L||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),L=ei.Group);const T={},_={};for(var a in g){var d=a.slice(0,2)==="on";d?_[a]=g[a]:T[a]=g[a]}const f=new L(T);return $i(f,_),f}function Od(o,g,O){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function Id(o,g,O){return!1}function Dd(o){return o}function Gd(){return null}function Ud(){return null}function zd(o,g,O,L){return Md}function Bd(){}function Hd(o){}function Vd(o,g){return!1}function Wd(){return ah}function qd(){return ah}const jd=setTimeout,Kd=clearTimeout,Yd=-1;function Xd(o,g){return!1}const Qd=!1,Jd=!0,Zd=!0;function $d(o,g){g.parent===o?g.moveToTop():o.add(g),yn(o)}function t0(o,g){g.parent===o?g.moveToTop():o.add(g),yn(o)}function oh(o,g,O){g._remove(),o.add(g),g.setZIndex(O.getZIndex()),yn(o)}function e0(o,g,O){oh(o,g,O)}function n0(o,g){g.destroy(),g.off(Ua),yn(o)}function r0(o,g){g.destroy(),g.off(Ua),yn(o)}function i0(o,g,O){console.error(`Text components are not yet supported in ReactKonva. You text is: "${O}"`)}function s0(o,g,O){}function a0(o,g,O,L,T){$i(o,T,L)}function o0(o){o.hide(),yn(o)}function l0(o){}function u0(o,g){(g.visible==null||g.visible)&&o.show()}function h0(o,g){}function c0(o){}function d0(){}const f0=()=>sh.DefaultEventPriority,g0=Object.freeze(Object.defineProperty({__proto__:null,appendChild:$d,appendChildToContainer:t0,appendInitialChild:Ld,cancelTimeout:Kd,clearContainer:c0,commitMount:s0,commitTextUpdate:i0,commitUpdate:a0,createInstance:bd,createTextInstance:Od,detachDeletedInstance:d0,finalizeInitialChildren:Id,getChildHostContext:qd,getCurrentEventPriority:f0,getPublicInstance:Dd,getRootHostContext:Wd,hideInstance:o0,hideTextInstance:l0,idlePriority:Ma.unstable_IdlePriority,insertBefore:oh,insertInContainerBefore:e0,isPrimaryRenderer:Qd,noTimeout:Yd,now:Ma.unstable_now,prepareForCommit:Gd,preparePortalMount:Ud,prepareUpdate:zd,removeChild:n0,removeChildFromContainer:r0,resetAfterCommit:Bd,resetTextContent:Hd,run:Ma.unstable_runWithPriority,scheduleTimeout:jd,shouldDeprioritizeSubtree:Vd,shouldSetTextContent:Xd,supportsMutation:Zd,unhideInstance:u0,unhideTextInstance:h0,warnsIfNotActing:Jd},Symbol.toStringTag,{value:"Module"}));var p0=Object.defineProperty,m0=Object.defineProperties,y0=Object.getOwnPropertyDescriptors,qu=Object.getOwnPropertySymbols,v0=Object.prototype.hasOwnProperty,_0=Object.prototype.propertyIsEnumerable,ju=(o,g,O)=>g in o?p0(o,g,{enumerable:!0,configurable:!0,writable:!0,value:O}):o[g]=O,Ku=(o,g)=>{for(var O in g||(g={}))v0.call(g,O)&&ju(o,O,g[O]);if(qu)for(var O of qu(g))_0.call(g,O)&&ju(o,O,g[O]);return o},S0=(o,g)=>m0(o,y0(g));function lh(o,g,O){if(!o)return;if(O(o)===!0)return o;let L=o.child;for(;L;){const T=lh(L,g,O);if(T)return T;L=L.sibling}}function uh(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const za=uh(ve.createContext(null));class hh extends ve.Component{render(){return ve.createElement(za.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Yu,ReactCurrentDispatcher:Xu}=ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C0(){const o=ve.useContext(za);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const g=ve.useId();return ve.useMemo(()=>{for(const L of[Yu==null?void 0:Yu.current,o,o==null?void 0:o.alternate]){if(!L)continue;const T=lh(L,!1,_=>{let a=_.memoizedState;for(;a;){if(a.memoizedState===g)return!0;a=a.next}});if(T)return T}},[o,g])}function w0(){var o,g;const O=C0(),[L]=ve.useState(()=>new Map);L.clear();let T=O;for(;T;){const _=(o=T.type)==null?void 0:o._context;_&&_!==za&&!L.has(_)&&L.set(_,(g=Xu==null?void 0:Xu.current)==null?void 0:g.readContext(uh(_))),T=T.return}return L}function x0(){const o=w0();return ve.useMemo(()=>Array.from(o.keys()).reduce((g,O)=>L=>ve.createElement(g,null,ve.createElement(O.Provider,S0(Ku({},L),{value:o.get(O)}))),g=>ve.createElement(hh,Ku({},g))),[o])}function P0(o){const g=le.useRef({});return le.useLayoutEffect(()=>{g.current=o}),le.useLayoutEffect(()=>()=>{g.current={}},[]),g.current}const E0=o=>{const g=le.useRef(),O=le.useRef(),L=le.useRef(),T=P0(o),_=x0(),a=d=>{const{forwardedRef:f}=o;f&&(typeof f=="function"?f(d):f.current=d)};return le.useLayoutEffect(()=>(O.current=new ei.Stage({width:o.width,height:o.height,container:g.current}),a(O.current),L.current=ti.createContainer(O.current,sh.LegacyRoot,!1,null),ti.updateContainer(le.createElement(_,{},o.children),L.current),()=>{ei.isBrowser&&(a(null),ti.updateContainer(null,L.current,null),O.current.destroy())}),[]),le.useLayoutEffect(()=>{a(O.current),$i(O.current,o,T),ti.updateContainer(le.createElement(_,{},o.children),L.current,null)}),le.createElement("div",{ref:g,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},k0="Layer",R0="Line",ti=Ed(g0);ti.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:le.version,rendererPackageName:"react-konva"});const T0=le.forwardRef((o,g)=>le.createElement(hh,{},le.createElement(E0,{...o,forwardedRef:g}))),J0=({lines:o,setLines:g,className:O="",showControls:L=!1,strokeWidth:T="medium",width:_=500,height:a,willReadFrequently:d=!1,style:f={},mask:m})=>{const[y,w]=ve.useState([]),p=ve.useRef(!1),h=()=>{p.current=!0},c=()=>{p.current=!1,w([])},S=z=>{h();const V=z.target.getStage().getPointerPosition();g([...o,[Math.round(V.x),Math.round(V.y)]])},E=z=>{const j=z.target.getStage().getPointerPosition(),H=Math.round(j.x),et=Math.round(j.y);let C=o[o.length-1];C=C.concat([H+.1,et+.1]),o.splice(o.length-1,1,C),g(o.concat())},F=z=>{S(z)},u=z=>{if(!p.current)return;const j=z.target.getStage().getPointerPosition();let H=o[o.length-1];H=H.concat([Math.round(j.x),Math.round(j.y)]),o.splice(o.length-1,1,H),g(o.concat())},s=z=>{p.current&&(c(),E(z))},v=()=>{c()},x=()=>{h()},M=z=>{p.current&&(E(z),window.document.addEventListener("mouseup",v),window.document.addEventListener("touchEnd",v),window.document.addEventListener("mousedown",x),window.document.addEventListener("touchStart",x))},B=z=>{p.current&&S(z),window.document.removeEventListener("mouseup",v),window.document.removeEventListener("touchEnd",v),window.document.removeEventListener("mousedown",x),window.document.removeEventListener("touchStart",x)},k=()=>g([]),R=()=>{const z=[...o],V=[...y],j=z.pop();j&&(V.push(j),g(z),w(V))},N=()=>{const z=[...o],V=[...y],j=V.pop();j&&(z.push(j),g(z),w(V))},G={small:3,medium:5,large:7}[T]??5;return pe.jsxs(Fc,{vertical:!0,align:"center",className:"relative",children:[m,pe.jsx(T0,{width:_,height:a||_,onMouseDown:F,onMousemove:u,onMouseup:s,onTouchStart:F,onTouchMove:u,onTouchEnd:s,onMouseLeave:M,onMouseEnter:B,className:Ac("drawing-canvas",O),style:{width:`${_}px`,height:`${a||_}px`,...f},willReadFrequently:d,id:"drawing-canvas",children:pe.jsx(k0,{children:o.map(z=>pe.jsx(R0,{points:z,stroke:"#222222",strokeWidth:G,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},String(z)))})}),L&&pe.jsxs(Mc,{className:"mt-2",children:[pe.jsxs(ma,{onClick:R,disabled:o.length===0,children:[pe.jsx(Al,{}),pe.jsx(ya,{pt:"Desfazer",en:"Undo"})]}),pe.jsxs(ma,{onClick:N,disabled:y.length===0,children:[pe.jsx(Al,{}),pe.jsx(ya,{pt:"Refazer",en:"Redo"})]}),pe.jsxs(ma,{onClick:k,disabled:o.length===0,children:[pe.jsx(Lc,{}),pe.jsx(ya,{pt:"Apagar",en:"Clear"})]})]})]})};export{J0 as D};
