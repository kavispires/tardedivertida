import{f as M,as as Y,r as I,b$ as C,j as e,F as n,T as o,q as V,v as le,i as R,O,ar as $,y,av as p,I as g,bZ as de,bb as me,bc as ue,c as he,bi as E,w as xe,B as je,h as ge,c0 as pe,aF as be}from"./index-p96lrkfF.js";import{u as q,S as K,a as X,P as J,c as fe,d as ve,e as _}from"./Session-DVNaFa6N.js";import{P as k}from"./PhasePlaceholder--kkrnxq9.js";import{b as Z,B as Q,S as ee,W as se,a as re,P as ye}from"./SecurityIcon-jUUJXzgS.js";import{S as te,P as oe,a as ae}from"./StepSwitcher-CyU_yS-g.js";import{I as F}from"./useDevFeatures-C35RkXoI.js";import{R as Ie}from"./RoundAnnouncement-Bro1J4z_.js";import{u as Te}from"./useMock-DsLB9hpn.js";import{P as h}from"./PlayerAvatarName-fueHWoRP.js";import{R as D}from"./RuleInstruction-CcHIK6RG.js";/* empty css                             */import{I as N}from"./ImageCard-j2_G2m7O.js";import{T as P}from"./TextHighlight--AqUGiit.js";import{B as Ae}from"./BoxBlankIcon-BIcj3i3S.js";import{f as ne}from"./WritingIcon-DYktCz65.js";import{M as A}from"./MetricHighlight-Bvv4u74p.js";import{C as Ee}from"./CollapsibleRule-i6_0uaSA.js";import{T as U}from"./index-DQImZJBH.js";import{P as Pe}from"./PlayerAvatarCard-DId9DM9e.js";import"./Game-DN2HMWSw.js";import"./useMutation-Cyg-El7Z.js";import"./FixedMenuButton-BBKPztnE.js";import"./Popconfirm-B3cuyTDb.js";import"./PurePanel-Da7mJ2nq.js";import"./index-BYZOpjeI.js";import"./extends-CF3RwP-h.js";import"./useToggle-CGEJjSAO.js";import"./useId-Bk617wUQ.js";import"./PlayerAvatar-CIJnURmg.js";import"./speech-q2vTwPOb.js";import"./RulesModal-CQYpDgvC.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-BC059rjh.js";import"./index-CHuUolkH.js";import"./index-D6rOcq4S.js";import"./SignIn-DZmQMm2A.js";import"./GoogleIcon-DFPvprAX.js";import"./AnimatedGearIcon-BKXKio45.js";import"./AnimatedClockIcon-CLeYiUgJ.js";import"./TimedButton-DVK1JVAD.js";import"./Loading-CLGNSzGM.js";import"./AnimatedLoaderIcon-CZN3e8U0.js";import"./WaitingRoomIcon-vYaoHsKA.js";import"./LikeFilled-CYYeet27.js";import"./StarFilled-DPtVyqAK.js";import"./Collapse-BM_e3ctY.js";const w={DECLARATION:"DECLARATION",EXAMINATION:"EXAMINATION"},W={SUBMIT_DECLARATION:"SUBMIT_DECLARATION",UPDATE_TARGET_PLAYER:"UPDATE_TARGET_PLAYER",SUBMIT_TARGET:"SUBMIT_TARGET"},G={AGENT:"agent",TERRORIST:"terrorist"},B={BOMB:"bomb",WIRE:"wire",BLANK:"blank"},we={[G.AGENT]:"timebomb-agent",[G.TERRORIST]:"timebomb-terrorist"},L={[B.BOMB]:"timebomb-bomb",[B.WIRE]:"timebomb-redWire",[B.BLANK]:"timebomb-blank",BACK:"timebomb-back"};function Ne(s){const{translate:r}=M(),t=q({actionName:"submit-declaration",onSuccess:()=>s(2),onError:()=>s(0),successMessage:r("Declaração submetida com sucesso","Declaration submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar sua declaração","Oops, the application found an error while trying to submit your declaration")});return a=>{t({action:W.SUBMIT_DECLARATION,...a})}}function Se(){const{translate:s}=M(),r=q({actionName:"update-target-player",successMessage:s("Jogador alvo atualizado com sucesso","Target player updated successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar atualizar o jogador alvo","Oops, the application found an error while trying to update the target player")});return t=>{r({action:W.UPDATE_TARGET_PLAYER,...t})}}function Re(s){const{translate:r}=M(),t=q({actionName:"submit-target",onSuccess:()=>s(2),onError:()=>s(0),successMessage:r("Alvo submetido com sucesso","Target submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seu alvo","Oops, the application found an error while trying to submit your target")});return a=>{t({action:W.SUBMIT_TARGET,...a})}}function ie(s,r){const[t]=Y("userId");return I.useMemo(()=>{if(s.activePlayerIds?.length>1){const l=s.activePlayerIds[s.activePlayerIds.length-2];return[r?.[l]??C,l===t]}const a=s.activePlayerIds[0];return[r?.[a]??C,a===t]},[r,s,t])}function Oe(s,r){const[t]=Y("userId");return I.useMemo(()=>{if(s.activePlayerIds?.length>1){const a=s.activePlayerIds[s.activePlayerIds.length-1];return[r?.[a]??C,a===t]}return[null,!1]},[r,s,t])}function H({children:s}){return e.jsx(A,{icon:e.jsx(ne,{}),iconPlacement:"before",children:s})}function z({children:s}){return e.jsx(A,{icon:e.jsx(ee,{}),iconPlacement:"before",children:s})}function b({children:s}){return e.jsx(A,{icon:e.jsx(Q,{}),iconPlacement:"before",children:s})}function x({children:s}){return e.jsx(A,{icon:e.jsx(Z,{}),iconPlacement:"before",children:s})}function Be({children:s}){return e.jsx(A,{icon:e.jsx(Ae,{}),iconPlacement:"before",children:s})}function Ce({role:s="agent",dataCount:r}){const t=r.wires-r.terrorists,a=r.wires-r.agents;return e.jsxs(n,{className:"contained",align:"center",children:[e.jsx(N,{cardWidth:150,cardId:we[s]}),e.jsx(D,{type:"lore",style:{maxWidth:"320px",minWidth:"auto"},children:s==="terrorist"?e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Você é um ",e.jsx(H,{children:"terrorista"}),"!",e.jsx("br",{}),"Seu objetivo é encontrar a ",e.jsx(b,{children:"Bomba"})," ",e.jsx("strong",{children:"OU"})," prevenir que os agentes cortem os ",e.jsxs(x,{children:[r.wires," fios vermelhos"]})," ","até o final da última rodada",e.jsx("br",{}),"Há"," ",e.jsxs(P,{children:[t," ou ",r.terrorists," terroristas"]})," ","no jogo."]}),en:e.jsxs(e.Fragment,{children:["You are a ",e.jsx(H,{children:"terrorist"}),"!",e.jsx("br",{}),"Your goal is to find the ",e.jsx(b,{children:"Bomb"})," ",e.jsx("strong",{children:"OR"})," prevent the agents from cutting the ",e.jsxs(x,{children:[r.wires," red wires"]})," by the end of the final round.",e.jsx("br",{}),"There are up to"," ",e.jsxs(P,{children:[a," ou ",r.terrorists," terrorists"]})," ","in the game."]})}):e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Você é um ",e.jsx(z,{children:"agente"}),"!",e.jsx("br",{}),"Seu objetivo é cortar todos os"," ",e.jsxs(x,{children:[r.wires," fios vermelhos"]})," e nunca a"," ",e.jsx(b,{children:"Bomba"}),"!",e.jsx("br",{}),"Há"," ",e.jsxs(P,{children:[t," ou ",r.agents," agentes"]})," ","no jogo, o resto é terrorista."]}),en:e.jsxs(e.Fragment,{children:["You are an ",e.jsx(z,{children:"agent"}),"!",e.jsx("br",{}),"Your goal is to cut all ",e.jsxs(x,{children:[r.wires," red wires"]})," and never the ",e.jsx(b,{children:"Bomb"}),"!",e.jsx("br",{}),"There are up to"," ",e.jsxs(P,{children:[t," ou ",r.agents," agents"]})," ","in the game, the rest are terrorists."]})})})]})}function ce(){return e.jsx(Ee,{title:e.jsx(o,{pt:"Dicas",en:"Tips"}),style:{minWidth:"320px",textAlign:"left"},children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Essas são algumas dicas sobre como tomar decisões no jogo, mas não são regras, faça o que quiser:"}),e.jsx("br",{}),"Nunca declare que você tem a bomba! Se você é um agente e um outro jogador estiver prestes a examinar uma de suas cartas, aí sim, você pode declarar verbalmente que tem a bomba.",e.jsx("br",{}),"Agentes sempre devem ser verdadeiros (a não ser que você tenha a carta da Bomba).",e.jsx("br",{}),"Se você quiser ser o alvo de investigação, declare que tem mais fios vermelhos do que realmente tem. (isso tanto para agentes quanto para terroristas)."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"These are some tips on how to make decisions in the game, but they are not rules, do as you wish:"}),e.jsx("br",{}),"Never declare that you have the bomb! If you are an agent and another player is about to examine one of your cards, only then you may verbally declare that you have the bomb.",e.jsx("br",{}),"Agents must always tell the truth (unless you have the bomb card).",e.jsx("br",{}),"If you want to be the target of investigation, declare that you have more red wires than you actually have. (this applies to both agents and terrorists)."]})})})}function Fe({hand:s,dataCount:r}){const t=V(5,{minWidth:100,maxWidth:150,gap:16});return e.jsx(n,{className:"my-4",children:le.orderBy(s,["type"],["desc"]).map(a=>e.jsxs(n,{vertical:!0,children:[e.jsx(N,{cardWidth:t,cardId:L[a.type]}),e.jsx(Me,{type:a.type,dataCount:r})]},a.id))})}function Me({type:s,dataCount:r}){return s==="bomb"?e.jsx(n,{align:"center",justify:"center",children:e.jsx(R,{title:e.jsx(o,{pt:"Essa é a bomba",en:"This is the bomb"}),content:e.jsx(O.Paragraph,{style:{maxWidth:300},children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Caso seja revelada, o jogo acaba imediatamente e os terroristas vencem."}),en:e.jsx(e.Fragment,{children:"If revealed, the game ends immediately and the terrorists win."})})}),children:e.jsx("span",{children:e.jsx(b,{children:e.jsx(o,{pt:"Bomba",en:"Bomb"})})})})}):s==="wire"?e.jsx(n,{align:"center",justify:"center",children:e.jsx(R,{title:e.jsx(o,{pt:"Esse é o fio vermelho",en:"This is the red wire"}),content:e.jsx(O.Paragraph,{style:{maxWidth:300},children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Os agentes devem achar ",r.wires," desses no total. Por enquanto acharam ",0,"."]}),en:e.jsxs(e.Fragment,{children:["Agents must find ",r.wires," of these in total. So far they have found ",0,"."]})})}),children:e.jsx("span",{children:e.jsx(x,{children:e.jsx(o,{pt:"Fio",en:"Wire"})})})})}):e.jsx(n,{align:"center",justify:"center",children:e.jsx(R,{title:e.jsx(o,{pt:"Essa carta não é nada",en:"This is the nothing"}),content:e.jsx(O.Paragraph,{style:{maxWidth:300},children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Caso seja revelada, é apenas uma perda de tempo, pelo menos você será o próximo investigador."}),en:e.jsx(e.Fragment,{children:"If revealed, it is just a waste of time, at least you will be the next investigator."})})}),children:e.jsx("span",{children:e.jsx(Be,{children:e.jsx(o,{pt:"Nada",en:"Blank"})})})})})}function qe({announcement:s,user:r,dataCount:t,nextInvestigator:a,onDeclare:i,status:c}){const{isLoading:l}=$(),[u,d]=I.useState(0),[m,f]=I.useState(0);return Te(),e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(K,{children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:'Declare as cartas que você "tem"'}),en:e.jsx(e.Fragment,{children:'Declare the cards you "have"'})})}),e.jsx(Ce,{role:r?.role??"",dataCount:t}),e.jsx(D,{type:"action",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Declare quantos ",e.jsx("strong",{children:"fios vermelhos"})," e quantas ",e.jsx("strong",{children:"bombas"})," você quer que os outros jogadores saibam que você tem.",e.jsx("br",{}),"Minta à vontade!",e.jsx("br",{}),e.jsx(h,{player:a,addressUser:!0})," ","será o próximo investigador (caso isso influencie sua decisão)."]}),en:e.jsxs(e.Fragment,{children:["Declare how many ",e.jsx("strong",{children:"red wires"})," and how many ",e.jsx("strong",{children:"bombs"})," you want the other players to know you have.",e.jsx("br",{}),"Lie as much as you want!",e.jsx("br",{}),e.jsx(h,{player:a,addressUser:!0})," ","will be the next investigator (if that influences your decision)."]})})}),e.jsxs(y,{align:"center",className:"my-4",children:[e.jsxs(y.Compact,{children:[e.jsx(y.Addon,{children:e.jsx(p,{title:e.jsx(o,{pt:"Número de fios vermelhos que você declara cortar",en:"Number of red wires you declare to cut"}),children:e.jsx(g,{icon:e.jsx(Z,{}),size:"small"})})}),e.jsx(U,{defaultValue:0,style:{width:"64px"},min:0,max:5,size:"large",onChange:j=>f(j??0),disabled:l})]}),e.jsxs(y.Compact,{children:[e.jsx(y.Addon,{children:e.jsx(p,{title:e.jsx(o,{pt:"Número de bombas que você declara cortar",en:"Number of bombs you declare to cut"}),children:e.jsx(g,{icon:e.jsx(Q,{}),size:"small"})})}),e.jsx(U,{defaultValue:0,style:{width:"64px"},min:0,max:1,size:"large",onChange:j=>d(j??0),disabled:l})]}),e.jsx(de,{size:"large",onClick:()=>i({declarations:{bombs:u,wires:m,playerId:r.id}}),children:e.jsx(o,{pt:"Confirmar",en:"Confirm"})})]}),e.jsx(Fe,{hand:r.hand,dataCount:t}),e.jsx(ce,{})]})}function De({players:s,state:r,user:t}){const{step:a,goToNextStep:i,setStep:c}=X(),l=Ne(c),[u,d]=ie(r.status,s),m=e.jsx(oe,{icon:e.jsx(re,{}),title:e.jsx(o,{pt:"Declaração",en:"Declaration"}),currentRound:r?.round?.current,type:"overlay",children:e.jsxs(F,{children:[e.jsx(g,{icon:e.jsx(se,{})}),e.jsx(o,{pt:e.jsx(e.Fragment,{children:'"Todos em seus postos! O que você tem ai?"'}),en:e.jsx(e.Fragment,{children:'"Everyone to your posts! What do you have there?"'})})]})});return e.jsx(J,{phase:r?.phase,allowedPhase:w.DECLARATION,children:e.jsxs(ae,{step:a,players:s,children:[e.jsx(Ie,{round:r?.round,onPressButton:i,buttonText:" ",time:r?.round?.current===1?10:5,unskippable:!0,children:e.jsx(F,{contained:!0,children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Há uma bomba no prédio! E um terrorista entre nós! Precisamos cortar todos os"," ",r.dataCount.wires," fios vermelhos!!!"]}),en:e.jsxs(e.Fragment,{children:["There's a bom in the building! And a terrorist among us! We need to cut all"," ",r.dataCount.wires," red wires!!!"]})})})}),e.jsx(qe,{user:t,players:s,announcement:m,dataCount:r.dataCount,nextInvestigator:u,isTheNextInvestigator:d,onDeclare:l,status:r.status,round:r.round})]})})}const We={notes:{}},T=new ue(We),Le=(s,r)=>{T.setState(t=>({notes:{...t.notes,[s]:r}}))},_e=s=>{T.setState(r=>{const t={...r.notes};return delete t[s],{notes:t}})},ke=()=>{T.setState({notes:{}})};function Ue(){const{notes:s}=me(T,()=>T.state);return{notes:s,setPlayerNote:Le,clearPlayerNote:_e,clearAllNotes:ke,getPlayerNote:t=>s[t]??""}}function Ge({player:s,onSelect:r,currentTargetPlayerId:t}){const{notes:a,setPlayerNote:i}=Ue();return e.jsxs(Pe,{player:s,withRoundCorners:!0,withName:!0,className:he({"current-target-player":t===s.id}),children:[e.jsxs(n,{justify:"center",children:[e.jsx(p,{title:e.jsx(o,{pt:`Eu tenho ${s.declarations.wires??0} ${E(s.declarations.wires??0,"fio vermelho","fios vermelhos")}`,en:`I have ${s.declarations.wires??0} ${E(s.declarations.wires??0,"red wire","red wires")}`}),children:e.jsx("span",{style:{color:"black"},children:e.jsx(x,{children:s.declarations.wires??0})})}),!!s.declarations.bombs&&e.jsx(p,{title:e.jsx(o,{pt:"Eu tenho a bomba!",en:"I have the bomb!"}),children:e.jsx("span",{style:{color:"black"},children:e.jsx(b,{children:s.declarations.bombs??0})})})]}),e.jsx(p,{title:e.jsx(o,{pt:`Esse jogador ainda tem ${s.hand?.length} ${E(s.hand.length,"carta","cartas")}`,en:`This player still has ${s.hand?.length} ${E(s.hand.length,"card","cards")}`}),children:e.jsx(n,{justify:"center",className:"mt-2",children:s.hand?.length===0?e.jsx(e.Fragment,{children:"-"}):s.hand?.map(c=>e.jsx(N,{cardWidth:16,cardId:L.BACK,preview:!1,className:"player-entry-mini-card"},c.id))})}),e.jsx(n,{justify:"center",className:"mt-2",children:e.jsx(p,{title:e.jsx(o,{pt:"Use esse botão parar marcar quem você achar que é agente ou terrorista",en:"Use this button to mark who you think is an agent or a terrorist"}),children:e.jsx(xe,{value:a[s.id]==="terrorist",styles:{root:{backgroundColor:a[s.id]==="terrorist"?"red":"green"}},onChange:c=>i(s.id,c?"terrorist":"agent"),checkedChildren:e.jsx(g,{icon:e.jsx(ne,{}),size:"small"}),unCheckedChildren:e.jsx(g,{icon:e.jsx(ee,{}),size:"small"})})})}),!!r&&e.jsx(n,{justify:"center",className:"mt-6",children:e.jsx(je,{shape:"round",onClick:()=>r(s.id),children:e.jsx(o,{pt:"Selecionar",en:"Select"})})})]},s.id)}function He({hand:s,onSelectCard:r}){const t=V(5,{minWidth:100,maxWidth:150,gap:16}),a=s.length*(t+16)-16;return e.jsxs(n,{className:"my-4",vertical:!0,children:[e.jsx(ge.div,{animate:{x:[0,a-64,0]},transition:{duration:6,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"},children:e.jsx(g,{icon:e.jsx(ye,{}),size:64,style:{rotate:"-220deg",marginBottom:"16px"}})}),e.jsx(n,{wrap:!0,children:s.map(i=>e.jsx(n,{vertical:!0,children:e.jsx(N,{cardWidth:t,cardId:L.BACK,preview:!1})},i.id))})]})}function ze({announcement:s,user:r,players:t,dataCount:a,onUpdateTargetPlayerId:i,onTargetCard:c,isTheCurrentInvestigator:l,status:u,currentTargetPlayerId:d,currentInvestigator:m}){$();const f=a.wires-(u.revealed??0),j=I.useMemo(()=>pe(t),[t]),v=d?t[d]:null;return e.jsxs(te,{fullWidth:!0,announcement:s,children:[e.jsx(K,{children:v?e.jsx(o,{pt:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:m}),", escolha uma das cartas de"," ",e.jsx(h,{player:v})]}),en:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:m}),", choose one of"," ",e.jsx(h,{player:v}),"'s cards."]})}):e.jsx(o,{pt:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:m}),", escolha um jogador para examinar uma de suas cartas."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:m}),", choose a player to examine one of their cards."]})})}),e.jsx(D,{type:"action",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Se você é um agente, você quer descobrir onde estão os"," ",e.jsxs(x,{children:[f," fios vermelhos"]})," para desarmar a bomba!",e.jsx("br",{}),"Se você é um terrorista, você quer enganar os agentes para que eles revelem a bomba ou não encontrar os fios vermelhos até o jogo acabar."]}),en:e.jsxs(e.Fragment,{children:["If you are an agent, you want to find out where the"," ",e.jsxs(x,{children:[f," red wires"]})," are to defuse the bomb!",e.jsx("br",{}),"If you are a terrorist, you want to mislead the agents so they reveal the bomb or fail to find the red wires until the game ends."]})})}),e.jsx(n,{gap:6,className:"mb-4",children:j.map(S=>e.jsx(Ge,{player:S,currentTargetPlayerId:d,onSelect:l?()=>i({targetPlayerId:S.id}):void 0},S.id))}),v&&e.jsx(He,{hand:v.hand}),e.jsx(ce,{})]})}function Ye({players:s,state:r,user:t}){const{step:a,setStep:i}=X(),c=Re(i),l=Se(),[u,d]=ie(r.status,s),[m,f]=Oe(r.status,s);console.log({currentInvestigator:u,targetPlayer:m}),r.status.cut.length;const j=e.jsx(oe,{icon:e.jsx(re,{}),title:e.jsx(o,{pt:"Encontre os fios!",en:"Find the wires!"}),currentRound:r?.round?.current,type:"overlay",children:e.jsxs(F,{children:[e.jsx(g,{icon:e.jsx(se,{})}),e.jsx(o,{pt:e.jsx(e.Fragment,{children:'"Todos em seus postos! O que você tem ai?"'}),en:e.jsx(e.Fragment,{children:'"Everyone to your posts! What do you have there?"'})})]})});return e.jsx(J,{phase:r?.phase,allowedPhase:w.EXAMINATION,children:e.jsxs(ae,{step:a,players:s,conditions:t.hand&&t.role,children:[e.jsx(ze,{user:t,players:s,announcement:j,dataCount:r.dataCount,onUpdateTargetPlayerId:l,onTargetCard:c,status:r.status,round:r.round,currentTargetPlayerId:r.currentTargetPlayerId,isTheCurrentInvestigator:d,currentInvestigator:u}),e.jsx("div",{children:"?"})]})})}function Ve(s){switch(s.phase){case w.DECLARATION:return De;case w.EXAMINATION:return Ye;case _.TEMPLATE.UNKNOWN:return k;case _.DEFAULT.GAME_OVER:return k;default:return ve}}function _s(){return e.jsx(fe,{gameCollection:be.BOMBA_RELOGIO,getActiveComponent:Ve})}export{_s as default};
