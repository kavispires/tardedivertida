import{r as x,aA as Ee,f as ne,j as e,T as t,bL as Fe,i as H,bI as Se,aH as fe,aK as ee,e as S,bG as te,b1 as b,s as V,B as We,l as Ce,o as J,aZ as De,b0 as xe,I as je,fK as Ge,bw as He,d9 as Ue,bz as X,bC as Ve,aX as qe}from"./index-BRo09B4S.js";import{u as be,P as q,S as k,a as z,W as ze,c as ie,d as ce,e as de,b as Ke,k as Ye,g as $e,h as Je,i as Xe}from"./StepSwitcher-23OTjzta.js";import{u as le}from"./useCache-BNkepadn.js";import{u as ve}from"./useWhichPlayerIsThe-DsSuCu1u.js";import{D as Qe,f as Q,i as _,e as Ze,h as Oe,j as Z,b as Ae,M as Re,c as eo,g as oe,a as oo,d as so}from"./MagicVoodooDollIcon-sezpAqwO.js";import{A as R}from"./AvatarName-B4CK4CC4.js";import{I as D}from"./Instruction-DzTgxtcD.js";import{P as Ne}from"./PhaseTimerReset-BFUIIAj4.js";import{T as ro}from"./TurnOrder-CE8EZIjz.js";import{R as ao}from"./RoundAnnouncement-B6zoGg77.js";import{V as _e}from"./ViewOr-CWyuIpW-.js";import{u as no}from"./useMakeMeReady-CSC6eSlI.js";import{F as Te}from"./speech-D5ktcXEL.js";import{M as ye}from"./MagicDoorIcon-dKV2Pv-P.js";import{M as K}from"./MetricHighlight-t0adVk77.js";import{R as to}from"./RobotOutlined-aMoW8JG2.js";import{u as io}from"./useBooleanDictionary-B3FlSpcn.js";import{u as se}from"./useMock-C2tGogPI.js";import{F as co}from"./FloatingHand-Dj820Qc4.js";import{I as Pe}from"./ImageBlurButton-BJT8P6Bx.js";/* empty css                             */import{I as f}from"./ImageCard-DsfI4K15.js";import{I as ge}from"./ImageCardHand-CC_Rh-XX.js";import{R as T}from"./RuleInstruction-nq5_ToKO.js";import{D as ue}from"./DoorFrame-B7ZS6D0A.js";import{R as lo}from"./CloseCircleFilled-DuQknW0w.js";import{P as uo}from"./PanicIcon-BHAjPYje.js";import{I as Ie}from"./ImageCardPreloadHand-DEEbG_bF.js";import{I as w}from"./ImageBlurButtonContainer-C4tMiMMU.js";import{B as he}from"./Book-BT3xMBTF.js";import{A as ho}from"./Avatar-BdP1c7Q7.js";import{I as po}from"./ImageCardBack-f-G9KFI0.js";import{u as mo}from"./useBlurCards-Bm6LG-8l.js";import{M as xo}from"./MagicSkullIcon-QD9dbgr3.js";import{G as jo}from"./GameOverWrapper-DbTQBvR6.js";import{A as Oo}from"./Achievements-CKfxznDq.js";import{a as go}from"./achievements-CqoaSvwi.js";import{D as Io}from"./index-rUhfMBO9.js";/* empty css                       */import"./RulesModal-Ca12V3NP.js";import"./WritingIcon-CqNa7D19.js";import"./DoubleRightOutlined-B3yaaKTB.js";import"./PurePanel-DDJW8IN4.js";import"./Game-C4wsmoZo.js";import"./useMutation-BzBp3SKz.js";import"./index-D5-W3Jtd.js";import"./useBubbleLock-B39biO5L.js";import"./index-DNqeBSdR.js";import"./Overflow-Cf0zCI36.js";import"./useEvent-Bhg98eNi.js";import"./index-BGDuEzz_.js";import"./index-Bizt8j6B.js";import"./GameBanner-Dzr2mCkd.js";import"./useDevFeatures-BHbGL7YT.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CRKlH6Tz.js";import"./InfoCircleOutlined-gYzDg2NA.js";import"./SignIn-C3DYxHLC.js";import"./GoogleIcon-BQ87IDgx.js";import"./WaitingRoomIcon-B1HQb6Nq.js";import"./AnimatedClockIcon-CgxPv-IC.js";import"./Loading-DvazXQGz.js";import"./AnimatedLoaderIcon-zqYOYMaZ.js";import"./LikeFilled-DlOUUFRi.js";import"./HandOfCardsIcon-C8BIW2uF.js";import"./UpCircleOutlined-V57TlDRQ.js";import"./StarFilled-C_ITgnsP.js";import"./StarFilled-CNctUIhy.js";import"./TheEndIcon-DLS68uRc.js";import"./ArrowRightOutlined-BYKiEHzI.js";import"./useMergedState-B2FkkADU.js";import"./progress-DDsNBXoj.js";import"./Container-CQH4PXb4.js";import"./Medal-CXndF8va.js";import"./QuestionCircleOutlined-B2xPcsFs.js";var Eo={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},So={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926.8 397.1l-396-288a31.81 31.81 0 00-37.6 0l-396 288a31.99 31.99 0 00-11.6 35.8l151.3 466a32 32 0 0030.4 22.1h489.5c13.9 0 26.1-8.9 30.4-22.1l151.3-466c4.2-13.2-.5-27.6-11.7-35.8zM838.6 417l-98.5 32-200-144.7V199.9L838.6 417zM466 567.2l-89.1 122.3-55.2-169.2L466 567.2zm-116.3-96.8L484 373.3v140.8l-134.3-43.7zM512 599.2l93.9 128.9H418.1L512 599.2zm28.1-225.9l134.2 97.1L540.1 514V373.3zM558 567.2l144.3-46.9-55.2 169.2L558 567.2zm-74-367.3v104.4L283.9 449l-98.5-32L484 199.9zM169.3 470.8l86.5 28.1 80.4 246.4-53.8 73.9-113.1-348.4zM327.1 853l50.3-69h269.3l50.3 69H327.1zm414.5-33.8l-53.8-73.9 80.4-246.4 86.5-28.1-113.1 348.4z"}}]},name:"radar-chart",theme:"outlined"};function re(){return re=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},re.apply(this,arguments)}const fo=(s,o)=>x.createElement(Ee,re({},s,{ref:o,icon:Eo})),Co=x.forwardRef(fo);function ae(){return ae=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},ae.apply(this,arguments)}const Do=(s,o)=>x.createElement(Ee,ae({},s,{ref:o,icon:So})),pe=x.forwardRef(Do),g={BOOK_POSSESSION:"BOOK_POSSESSION",DOOR_CHOICE:"DOOR_CHOICE",RESOLUTION:"RESOLUTION"},we={SUBMIT_PAGES:"SUBMIT_PAGES",SUBMIT_DOOR:"SUBMIT_DOOR"},A=7,a={MORE_CLUES:"MORE_CLUES",FEWER_PAGES:"FEWER_PAGES",SEPIA:"SEPIA",NO_PREVIEW:"NO_PREVIEW",NO_COMMUNICATION:"NO_COMMUNICATION",CONCEALED_DOOR:"CONCEALED_DOOR",EXTRA_DOOR:"EXTRA_DOOR",DOUBLE_MAGIC:"DOUBLE_MAGIC",SECRET_CHOICE:"SECRET_CHOICE",RANDOM_INTERJECTION:"RANDOM_INTERJECTION",HALF_TIME:"HALF_TIME",DANCING_DOORS:"DANCING_DOORS",FADED_DOORS:"FADED_DOORS",BLIND_DOOR:"BLIND_DOOR",VANISHING_DOORS:"VANISHING_DOORS",DELAYING_DOORS:"DELAYING_DOORS",LOCKED_CHOICE:"LOCKED_CHOICE"},y={SUCCESS:"SUCCESS",WIN:"WIN"},v=3,B=10;function bo(s){const{translate:o}=ne(),n=be({actionName:"submit-pages",onBeforeCall:()=>s(4),onError:()=>s(2),successMessage:o("Cartas enviadas com sucesso","Cards submitted successfully"),errorMessage:o("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application failed to send your card")});return r=>{n({action:we.SUBMIT_PAGES,...r})}}function vo(){const{translate:s}=ne(),o=be({actionName:"submit-door",successMessage:s("Porta enviada com sucesso","Door submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua porta","Oops, the application failed to send your door")});return n=>{o({action:we.SUBMIT_DOOR,...n})}}function Ao(s){const{translate:o}=ne();return no({onSuccess:()=>s(3),successMessage:o("Pronto! Aguarde os outros jogadores estarem prontos","Done! Now wait for the other players"),errorMessage:o("Vixi, o aplicativo encontrou um erro ao tentar confirmar sua porta","Oops, the application failed to confirm your door")})}function M(s,o){return o===g.BOOK_POSSESSION?[a.FEWER_PAGES,a.MORE_CLUES,a.NO_PREVIEW,a.SEPIA,a.FADED_DOORS].includes(s):[a.DOUBLE_MAGIC,a.EXTRA_DOOR,a.CONCEALED_DOOR,a.MORE_CLUES,a.NO_PREVIEW,a.RANDOM_INTERJECTION,a.SECRET_CHOICE,a.NO_COMMUNICATION,a.SEPIA,a.HALF_TIME,a.BLIND_DOOR,a.VANISHING_DOORS,a.DANCING_DOORS,a.DELAYING_DOORS,a.LOCKED_CHOICE,a.FADED_DOORS].includes(s)}function Me(s){switch(s){case a.DOUBLE_MAGIC:return{TrapIcon:Ae,title:{pt:"A Magia Dúplice",en:"The Double Magic"},description:{pt:"Nessa rodada, cada porta visitada custa 2 cristais mágicos ao invés de 1.",en:"This round each visited door costs 2 magic crystals instead of 1."}};case a.EXTRA_DOOR:return{TrapIcon:_,title:{pt:"O Caminho Estendido",en:"The Increased Path"},description:{pt:"Nessa rodada, 7 portas estão disponíveis a serem entradas.",en:"This round 7 doors can be entered."}};case a.FEWER_PAGES:return{TrapIcon:Z,title:{pt:"A Escolha Minguante",en:"The Waning Choice"},description:{pt:"O jogador possuído tem apenas 4 opções de páginas para escolher",en:"The possessed players has only 4 page options to choose from"}};case a.CONCEALED_DOOR:return{TrapIcon:_,title:{pt:"A Porta Trancada",en:"The Concealed Door"},description:{pt:"A porta C não será revelada, mas ela ainda pode ser a porta correta.",en:"The door C will not be revealed but it could still be the correct answer."}};case a.MORE_CLUES:return{TrapIcon:Z,title:{pt:"A Trindade Ilusória",en:"The Illusionary Trinity"},description:{pt:"O jogador possuído deve escolher exatamente 3 páginas do livro.",en:"The possessed player must choose exactly 3 book pages."}};case a.NO_PREVIEW:return{TrapIcon:Oe,title:{pt:"O Livreto Diminuto",en:"The Little Booklet"},description:{pt:"Páginas não podem ser ampliadas.",en:"Expanding/Zooming in cards is not available this round."}};case a.RANDOM_INTERJECTION:return{TrapIcon:Z,title:{pt:"O Intruso",en:"The Deceiving Intruder"},description:{pt:"Nessa rodada, uma página aleatória será adicionada às páginas do jogador possuído e vocês não saberão qual é a pra ignorar.",en:"This round, one page will be randomly added to the possessed player's selected pages and you will not know which one you are supposed to ignore."}};case a.SECRET_CHOICE:return{TrapIcon:_,title:{pt:"A Escolha Secreta",en:"The Secret Choice"},description:{pt:"Nessa rodada, jogadores podem discutir, mas o voto é secreto.",en:"This round, players may discuss but their selection is secret."}};case a.NO_COMMUNICATION:return{TrapIcon:_,title:{pt:"A Voz Silenciosa",en:"The Silence Voice"},description:{pt:"Jogadores não podem se comunicar e devem analisar e votar em silêncio.",en:"Players can NOT communicate and must make their analysis and decision in silence"}};case a.SEPIA:return{TrapIcon:_,title:{pt:"O Livro Ancião",en:"The Ancient Pages"},description:{pt:"As páginas do livro estão desbotadas e sem cor.",en:"The Book Pages are old and do not have color."}};case a.HALF_TIME:return{TrapIcon:_,title:{pt:"O Ansiosa Decisão",en:"The Rush Decision"},description:{pt:"Jogadores tem que decidir qual porta visitar na metade do tempo.",en:"Players have half the time to decide what door to enter"}};case a.BLIND_DOOR:return{TrapIcon:Q,title:{pt:"A Porta Cega",en:"The Blind Door"},description:{pt:"Cada jogador não pode ver uma porta aleatória.",en:"Each player cannot see one random door."}};case a.DANCING_DOORS:return{TrapIcon:Oe,title:{pt:"As Portas Dançantes",en:"The Dancing Doors"},description:{pt:"As portas ficam se movendo, possuídas pelo ritmo Ragatanga.",en:"The doors keep moving around."}};case a.DELAYING_DOORS:return{TrapIcon:Ze,title:{pt:"As Portas Atrasadas",en:"The Delaying Doors"},description:{pt:"Uma porta aparece a cada 30 segundos...",en:"A door appears every 30 seconds..."}};case a.VANISHING_DOORS:return{TrapIcon:Q,title:{pt:"As Portas Desvanecentes",en:"The Vanishing Doors"},description:{pt:"Um porta some a cada 30 segundos...",en:"A door vanishes every 30 seconds..."}};case a.LOCKED_CHOICE:return{TrapIcon:_,title:{pt:"A Escolha Permanente",en:"The Locked Choice"},description:{pt:"Jogadores não podem mudar de ideia depois de escolher uma porta.",en:"Players cannot change their mind after selecting a door."}};case a.FADED_DOORS:return{TrapIcon:Q,title:{pt:"As Portas Enfraquecidas",en:"The Fading Doors"},description:{pt:"As imagens das portas estão bem fracas e desaparecendo...",en:"The doors are fading..."}};default:return{TrapIcon:Qe,title:{pt:"Nada",en:"Nothing"},description:{pt:"Não há nenhuma armadilha nessa rodada... ufa.",en:"No trap was set this round... phew."}}}}function Le({trap:s,goToNextStep:o}){const{title:n,description:r,TrapIcon:d}=Me(s);return e.jsx(q,{icon:e.jsx(d,{}),title:e.jsx(t,{pt:n.pt,en:n.en}),onClose:o,duration:10,unskippable:!0,type:"block",children:e.jsx(D,{className:"i-trap-description",children:e.jsx(t,{pt:r.pt,en:r.en})})})}function E({children:s}){return e.jsx(K,{icon:e.jsx(Re,{}),children:s})}function m({children:s,type:o}){return e.jsx(K,{icon:e.jsx(eo,{}),type:o,children:s})}function C({children:s}){return e.jsx(K,{icon:e.jsx(ye,{}),children:s})}function U({children:s}){return e.jsx(K,{icon:e.jsx(oe,{}),children:s})}function Ro({magic:s}){return e.jsx(D,{contained:!0,children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Somos estudantes de feitiçaria presos num corredor de portas tentando voltar pra casa.",e.jsx("br",{}),"Devemos que passar por ",e.jsx(C,{children:A})," portas.",e.jsx("br",{}),"Mas o Livro só tem ",e.jsx(m,{children:s})," cristais mágicos de energia e cada porta que abrimos usamos ",e.jsx(m,{type:"negative",children:"-1"})," cristal.",e.jsx("br",{}),"Será que conseguimos sair antes que nossa mágica acabe?"]}),en:e.jsxs(e.Fragment,{children:["We are witchcraft students trapped in a corridor of doors trying to get back home.",e.jsx("br",{}),"We must go through ",e.jsx(C,{children:A}),"doors.",e.jsx("br",{}),"But the Book only has ",e.jsx(m,{children:s})," magic energy crystals and each door we go through costs us ",e.jsx(m,{type:"negative",children:"-1"})," crystal.",e.jsx("br",{}),"Can we get out before our crystals are gone?"]})})})}function No({magic:s,currentCorridor:o}){return e.jsx(D,{contained:!0,children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Porta",e.jsxs(C,{children:[o," / ",A]}),e.jsx("br",{}),"Ainda temos ",e.jsx(m,{children:s})," cristais mágicos e cada porta que abrimos usamos ",e.jsx(m,{type:"negative",children:"1"})," cristal.",e.jsx("br",{}),"Será que conseguimos sair antes que nossa mágica acabe?"]}),en:e.jsxs(e.Fragment,{children:["Door",e.jsxs(C,{children:[o," / ",A]}),e.jsx("br",{}),"We still have ",e.jsx(m,{children:s})," magic crystals left and each door we go through costs us ",e.jsx(m,{type:"negative",children:"1"})," crystal.",e.jsx("br",{}),"Can we get out before our crystals are gone?"]})})})}function _o({trap:s,showTitle:o=!1}){const{title:n,description:r,TrapIcon:d}=Me(s);return e.jsxs(D,{contained:!0,children:[e.jsx(d,{style:{width:"3rem"}}),o&&e.jsx(H,{size:"xx-small",level:3,children:e.jsx(t,{pt:n.pt,en:n.en})}),e.jsx(t,{pt:r.pt,en:r.en})]})}function F({trap:s}){return e.jsx(Te,{type:"popover",content:e.jsx(_o,{trap:s,showTitle:!0}),position:1,icon:e.jsx(pe,{})})}function To({players:s}){const o=Fe(s);return e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["A comida acabou após alguns dias e fomos obrigados a dar uma chance ao canibalismo."," ",e.jsx(R,{player:o[1]})," foi o primeiro a partir e servir de alimento aos outros. Diz a lenda que a batata da perna estava muito saborosa. No final das contas, todo mundo morreu..."]}),en:e.jsxs(e.Fragment,{children:["The food soon was gone, we had to give in and try cannibalism."," ",e.jsx(R,{player:o[1]})," was the first to go and served as food to others. The legend says its calf was very tasty and bough the rest of the group some extra days of live. In the end, we all died..."]})})}function yo(){return e.jsx(D,{contained:!0,children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Em um jogo com bots, 2 jogadores-robôs são adicionados ao jogo.",e.jsx("br",{}),"Quando a escolha das portas acontece, eles selecionam cada um uma porta aleatória, mas há 20-40% de chance um deles selecionar a página correta.",e.jsx("br",{}),"Em comparação, você tem 14-16% de chance de escolher a porta correta, dependendo da armadilha."]}),en:e.jsxs(e.Fragment,{children:["In a game with bos, the 2 bots are added to the game.",e.jsx("br",{}),"Each bot will randomly select a door, but there are 20-40% chance they will select the correct door.",e.jsx("br",{}),"In comparison, you have 14-16% chances of choosing the correct door, depending on the trap."]})})})}function Be(){return e.jsx(Te,{type:"popover",position:2,icon:e.jsx(to,{}),content:e.jsx(yo,{}),label:e.jsx(t,{pt:" Bots",en:" Bots"})})}const Po=(s,o)=>Se([...s,o,o]);function wo({pages:s,currentCorridor:o,answerDoorId:n,trap:r,onSubmitPages:d}){const{isLoading:i}=fe(),{dict:l,updateDict:c,length:u}=io({}),h=r===a.MORE_CLUES?u===3:u>0&&u<3,p=x.useMemo(()=>M(r,g.BOOK_POSSESSION),[r]);return se(),e.jsxs(k,{fullWidth:!0,children:[e.jsx(z,{children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Ajude os jogadores a encontrar a porta ",e.jsx(C,{children:o}),":"]}),en:e.jsxs(e.Fragment,{children:["Help players find the door ",e.jsx(C,{children:o}),":"]})})}),p&&e.jsx(F,{trap:r}),e.jsxs(ee,{children:[e.jsx(ue,{width:200,children:e.jsx(f,{id:n,cardWidth:150,className:S(r===a.FADED_DOORS&&"i-faded-card"),preview:{className:S(r===a.FADED_DOORS&&"image-preview-faded")}})}),e.jsx(Pe,{cardId:n})]}),e.jsxs(T,{type:"action",children:[e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Acima está a porta que você deve ajudar os outros jogadores a selecionar. ",e.jsx("br",{}),"Consulte as páginas do livro (cartas) e ",e.jsx("strong",{children:"selecione"})," as que você acha que mais vão ajudar!"]}),en:e.jsxs(e.Fragment,{children:["Above it's the door you need to help the other players to find.",e.jsx("br",{}),"Check the book pages(cards) below and ",e.jsx("strong",{children:"select"})," the one you think will help them best!"]})}),r===a.MORE_CLUES&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Selecione exatamente ",e.jsx(E,{children:"3"})," páginas do livro"]}),en:e.jsxs(e.Fragment,{children:["Select exactly ",e.jsx(E,{children:"3"})," book pages"]})})})]})]}),h&&e.jsx(te,{type:"primary",size:"large",loading:i,disabled:!h,onClick:()=>d({pageIds:Object.keys(l)}),className:b("tada"),children:e.jsx(t,{pt:"Enviar Páginas",en:"Submit Pages"})}),e.jsxs(D,{contained:!0,children:[e.jsx(H,{size:"xx-small",children:e.jsx(t,{pt:"Páginas selecionadas",en:"Selected Pages"})}),Object.keys(l).length<2&&e.jsx("p",{children:r===a.MORE_CLUES?e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Selecione exatamente ",e.jsx(E,{children:"3"})," páginas do livro"]}),en:e.jsxs(e.Fragment,{children:["Select exactly ",e.jsx(E,{children:"3"})," book pages"]})}):e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Selecione ",e.jsx(E,{children:"1"})," ou ",e.jsx(E,{children:"2"})," páginas do livro"]}),en:e.jsxs(e.Fragment,{children:["Select ",e.jsx(E,{children:"1"})," or ",e.jsx(E,{children:"2"})," book pages"]})})}),e.jsx(ge,{hand:Object.keys(l),cardSize:100,selectButtonIcon:e.jsx(lo,{}),selectButtonText:e.jsx(t,{pt:"Remover",en:"Remove"}),onSelectCard:c,cardClassName:S(r===a.SEPIA&&"i-sepia-card"),imageGroupPreview:{className:S(r===a.SEPIA&&"image-preview-sepia")}})]}),e.jsx(co,{title:e.jsx(t,{pt:"Páginas do Livro",en:"Book Pages"}),children:e.jsx(ge,{hand:s,onSelectCard:c,disabledSelectButton:i,sizeRatio:8,selectedCards:l,cardClassName:S(r===a.SEPIA&&"i-sepia-card"),imageGroupPreview:{className:S(r===a.SEPIA&&"image-preview-sepia")}})})]})}function Mo({possessed:s,players:o,trap:n}){const r=x.useMemo(()=>M(n,g.BOOK_POSSESSION),[n]);return e.jsxs(k,{fullWidth:!0,children:[e.jsx(ze,{players:o,title:e.jsx(t,{pt:"Aguarde enquanto a possessão acontece",en:"Please wait while the possession has finished"}),icon:e.jsx(Lo,{}),instruction:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:[e.jsx(R,{player:s})," está sendo possuído(a) pelo"," ",e.jsx(E,{children:"Livro que Tudo Sabe"})," e nos mostrará páginas do livro que nos ajudem a descobrir em qual porta entrar."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(R,{player:s})," is being possessed by the"," ",e.jsx(E,{children:"Book That Knows It All"})," and will show us pages of the book that could help us find out which door to enter."]})})}),r&&e.jsx(F,{trap:n})]})}function Lo(){const[s,o]=x.useState(0),n={0:b("shakeX",{speed:"fast",infinite:!0}),1:"super-possession",2:"extreme-possession",3:b("headShake",{speed:"slower",infinite:!0})},r={0:e.jsx(t,{pt:"Tentar acalmar a possessão",en:"Try to calm the possession"}),1:e.jsx(t,{pt:"Vixi, piorou!",en:"Oh no, it got worse!"}),2:e.jsx(t,{pt:"Ave Maria cheia de graça...!",en:"Oh please God make it stop!"}),3:e.jsx(t,{pt:"Melhor assim, talvez mais um clique pare de vez...",en:"This is nicer, maybe one more click will make it stop"})},d=()=>{o(i=>(i+1)%4)};return e.jsxs(V,{direction:"vertical",children:[e.jsx(uo,{style:{width:"6rem"},className:n[s]}),e.jsx(We,{size:"small",onClick:d,children:r[s]})]})}function Bo({players:s,state:o}){var h;const{step:n,goToNextStep:r,setStep:d}=ie(),[i,l]=ve("possessedId",o,s),{setCache:c}=le({defaultValue:{doors:[]}}),u=bo(d);return x.useEffect(()=>{(o.trap===a.DELAYING_DOORS||o.trap===a.VANISHING_DOORS)&&c({doors:[]})},[o.trap]),e.jsx(ce,{phase:o==null?void 0:o.phase,allowedPhase:g.BOOK_POSSESSION,children:e.jsxs(de,{step:n,players:s,children:[e.jsx(ao,{round:o==null?void 0:o.round,onPressButton:r,buttonText:" ",time:o.round.current===1?20:7,unskippable:!0,children:o.round.current===1?e.jsx(Ro,{magic:o.magic}):e.jsx(No,{magic:o.magic,currentCorridor:o.currentCorridor})}),e.jsx(q,{icon:e.jsx(Re,{}),title:e.jsx(t,{pt:"O Livro possui um jogador",en:"The Book possesses a player"}),onClose:M(o.trap,g.BOOK_POSSESSION)?r:()=>d(4),currentRound:(h=o==null?void 0:o.round)==null?void 0:h.current,type:"block",children:e.jsxs(D,{children:[e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Cada rodada um jogador é possuído pelo ",e.jsx(E,{children:"Livro que Tudo Sabe"}),".",e.jsx("br",{}),e.jsx(R,{player:i,addressUser:!0})," vai escolher cartas que representam as páginas do livro para ajudar os outros jogadores a escolherem a porta correta pra ir para o próximo corredor."]}),en:e.jsxs(e.Fragment,{children:["Each round a player is possessed by"," ",e.jsx(E,{children:"The Book That Knows It All"}),".",e.jsx("br",{}),e.jsx(R,{player:i,addressUser:!0})," will choose cards representing the pages in the book to try to help the other players choose the correct door to move to the next level."]})}),e.jsx(ro,{players:s,order:o.gameOrder,activePlayerId:o.possessedId,title:e.jsx(t,{pt:"Ordem da Possessão",en:"Possession Order"})})]})}),e.jsx(Ne,{goToNextStep:r}),e.jsx(Le,{trap:o.trap,goToNextStep:r}),e.jsxs(_e,{condition:l,children:[e.jsx(wo,{pages:o.pages,currentCorridor:o.currentCorridor,answerDoorId:o.answerDoorId,trap:o.trap,onSubmitPages:u}),e.jsx(Mo,{players:s,currentCorridor:o.currentCorridor,trap:o.trap,possessed:i})]})]})})}function ko(s){x.useEffect(()=>(s&&document.body.classList.add("image-preview-dancing"),()=>document.body.classList.remove("image-preview-dancing")),[s])}function me({doors:s,onSubmitDoor:o,trap:n,players:r,answerDoorId:d,user:i,hideVotes:l=!1,disabled:c=!1,disableTrap:u=!1}){const h=Ce(8,{gap:8,minWidth:150,maxWidth:350,margin:8}),{cache:p}=le(),N=x.useMemo(()=>Object.values(r).reduce((O,j)=>(j.doorId&&(O[j.doorId]===void 0&&(O[j.doorId]=[]),O[j.doorId].push(j.id)),O),{}),[r]),P=x.useMemo(()=>n===a.BLIND_DOOR&&!u?J.random(0,s.length-1):void 0,[n,s.length,u]),I=x.useMemo(()=>{if([a.VANISHING_DOORS,a.DELAYING_DOORS].includes(n)&&!u)return(p==null?void 0:p.doors)||[]},[p,n,u]);return e.jsx(De.PreviewGroup,{preview:{className:S(n===a.FADED_DOORS&&"image-preview-fading")},children:e.jsx("div",{className:"i-corridor",children:s.map((O,j)=>{const L=j<3?j:s.length-1-j,Y=n===a.CONCEALED_DOOR&&j===2,W=n===a.VANISHING_DOORS&&(I==null?void 0:I.includes(j)),G=n===a.DELAYING_DOORS&&!u&&!(I!=null&&I.includes(j));return e.jsxs("div",{className:S("i-door",d===O&&"i-door--answer",b("zoomIn",{delay:L})),children:[e.jsx(ue,{width:h,index:j,className:S(n===a.VANISHING_DOORS&&W?b("fadeOut",{speed:"slower"}):"",n===a.DELAYING_DOORS?G?"invisible":b("fadeIn",{speed:"slower"}):"",n===a.DANCING_DOORS&&!u&&b(J.sample(["swing","wobble","rubberBand"]),{infinite:!0,delay:J.random(0,10)/2})),children:Y||P===j?e.jsx(po,{cardWidth:150,id:"back-lockedDoor"}):e.jsx(f,{id:O,cardWidth:150,className:S(n===a.FADED_DOORS&&"i-faded-card"),preview:n!==a.NO_PREVIEW?!0:void 0,previewImageId:G||W?"back-lockedDoor":void 0})}),e.jsxs("div",{className:"i-door__options",children:[e.jsx(Pe,{cardId:O}),!!o&&e.jsx(te,{onClick:()=>o({doorId:O}),size:"small",type:"default",disabled:c||(i==null?void 0:i.ready)||(i==null?void 0:i.doorId)===O,shape:"round",ghost:!0,icon:"",children:e.jsx(t,{pt:"Selecionar",en:"Select"})}),e.jsx(xe.Group,{max:{count:7},size:"small",className:"i-door__votes",children:N[O]&&!l?e.jsx(e.Fragment,{children:N[O].map($=>e.jsx(ho,{id:r[$].avatarId,alt:r[$].name,className:b("slideInUp")},`vote-${$}`))}):e.jsx(xe,{size:"small",className:S(!l&&"invisible"),icon:e.jsx(pe,{}),style:{backgroundColor:"#000"}})})]})]},O)})})})}function ke({user:s,trap:o,doors:n,onDisableButtons:r,onSubmitDoor:d,onMakeReady:i}){const{setCache:l}=le({defaultValue:{doors:[]}}),c=()=>{s.doorId?s.ready||i():d({doorId:Se(n),ready:!0})},{timeLeft:u}=mo({duration:v*60*(o===a.HALF_TIME?.5:1)+B,onExpire:c});return x.useEffect(()=>((u-B)%30===0&&(o===a.DELAYING_DOORS&&l(h=>{const p=h.doors||[];return p.push(p.length-1+1),{doors:p}}),o===a.VANISHING_DOORS&&l(h=>{const p=h.doors||[];return p.push(p.length-2+1),{doors:p}})),()=>{}),[u]),u-B===0&&r(),u-B<0?e.jsxs("div",{className:"i-sand-timer i-sand-timer--negative",children:[e.jsx(je,{icon:e.jsx(oe,{})})," 0"]}):e.jsxs("div",{className:"i-sand-timer",children:[e.jsx(je,{icon:e.jsx(oe,{})})," ",Ge(u-B)]})}function Fo({doors:s,pages:o,currentCorridor:n,trap:r,onSubmitDoor:d,onConfirmDoor:i,players:l,user:c,possessed:u,magic:h,botEnabled:p,answerDoorId:N}){const{isLoading:P}=fe(),[I,O]=x.useState(!1),j=x.useMemo(()=>M(r,g.DOOR_CHOICE),[r]),L=r===a.SEPIA?"i-sepia-card":"";ko(r===a.DANCING_DOORS),se(()=>{c.doorId||d({doorId:Po(s,N)})},[c.ready,u.id,P,c.doorId]),se(()=>{i()},[c.doorId]);const Y=x.useMemo(()=>He(Object.values(l).map(G=>G.doorId).filter(Boolean)).length,[l]),W=!!h&&h<s.length&&Y>h;return e.jsxs(k,{fullWidth:!0,children:[e.jsx(z,{children:e.jsx(t,{pt:"Selecione a porta correta",en:"Select the correct door"})}),j&&e.jsx(F,{trap:r}),p&&e.jsx(Be,{}),e.jsxs(T,{type:"rule",className:"i-sand-timer-container",children:[e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["O livro contém dicas dadas por ",e.jsx(R,{player:u})," que ainda está possuído pelo livro e não pode falar.",e.jsx("br",{}),"Vocês tem"," ",e.jsx(U,{children:r===a.HALF_TIME?v/2:v})," ","minutos para decidir qual(quais) porta(s) entrar.",e.jsx("br",{}),"Cada porta visitada custará"," ",e.jsx(m,{children:r===a.DOUBLE_MAGIC?2:1})," cristal, portanto, escolha sabiamente.",e.jsx("br",{}),"Vocês tem ",e.jsx(m,{children:h})," cristais sobrando e"," ",e.jsx(C,{children:A-n+1})," portas para achar a saída."]}),en:e.jsxs(e.Fragment,{children:["The book contains hints given by ",e.jsx(R,{player:u})," who is still possessed by the book and can't speak.",e.jsx("br",{}),"You have"," ",e.jsx(U,{children:r===a.HALF_TIME?v/2:v})," ","minutes to decide what door(s) to visit.",e.jsx("br",{}),"Each door a player visits costs"," ",e.jsx(m,{children:r===a.DOUBLE_MAGIC?2:1})," crystal, so choose wisely.",e.jsx("br",{}),"You all have ",e.jsx(m,{children:h})," remaining crystals and"," ",e.jsx(C,{children:A-n+1})," doors to find the exit."]})}),e.jsx(ke,{trap:r,doors:s,onDisableButtons:()=>O(!0),onSubmitDoor:d,onMakeReady:i,user:c})]}),r===a.NO_COMMUNICATION&&e.jsx(D,{contained:!0,className:b("pulse",{speed:"slower",infinite:!0}),children:e.jsxs("strong",{children:[e.jsx(pe,{})," ",e.jsx(t,{pt:"Silêncio Absoluto!",en:"Absolute Silence!"})]})}),e.jsx(T,{type:"action",children:e.jsx(t,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," uma das portas que você acha que mais se relaciona com o livro.",e.jsx("br",{}),r===a.LOCKED_CHOICE?"Você não pode trocar de porta depois de escolher!":"Você pode trocar de porta quantas vezes quiser até confirmar sua escolha ou o tempo acabar."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," one of the doors you think is most related to the book.",e.jsx("br",{}),r===a.LOCKED_CHOICE?"You cannot change your door after you choose!":"You can change your door as many times as you want until you confirm your choice or time runs out."]})})}),!!c.doorId&&e.jsx(te,{size:"large",disabled:!c.doorId||c.ready||I||W,onClick:()=>i(),children:e.jsx(t,{pt:"Confirmar Porta",en:"Confirm Door"})}),e.jsx(me,{doors:s,trap:r,onSubmitDoor:d,players:l,user:c,hideVotes:r===a.SECRET_CHOICE,disabled:I||r===a.LOCKED_CHOICE&&c.doorId}),e.jsx(V,{className:"i-book-container",children:e.jsx(De.PreviewGroup,{preview:{className:S(r===a.SEPIA&&"image-preview-sepia")},children:e.jsxs(he,{children:[!!o[0]&&e.jsx(w,{cardId:o[0],ghost:!1,children:e.jsx(f,{id:o[0],cardWidth:140,className:L,preview:r!==a.NO_PREVIEW})}),!!o[1]&&e.jsx(w,{cardId:o[1],ghost:!1,children:e.jsx(f,{id:o[1],cardWidth:140,className:L,preview:r!==a.NO_PREVIEW})}),!!o[2]&&e.jsx(w,{cardId:o[2],ghost:!1,children:e.jsx(f,{id:o[2],cardWidth:140,className:L,preview:r!==a.NO_PREVIEW})})]})})})]})}function Wo({doors:s,pages:o,currentCorridor:n,trap:r,players:d,answerDoorId:i,magic:l,botEnabled:c}){const u=x.useMemo(()=>M(r,g.DOOR_CHOICE),[r]);return e.jsxs(k,{fullWidth:!0,children:[e.jsx(z,{children:e.jsx(t,{pt:"Aguarde enquanto os outros jogadores selecionam as portas",en:"Wait while the players select doors"})}),u&&e.jsx(F,{trap:r}),c&&e.jsx(Be,{}),e.jsxs(T,{type:"rule",className:"i-sand-timer-container",children:[e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Silêncio e poker face!",e.jsx("br",{}),"Eles tem"," ",e.jsx(U,{children:r===a.HALF_TIME?v/2:v})," ","minutos para decidir qual(quais) porta(s) entrar.",e.jsx("br",{}),"Cada porta visitada custará"," ",e.jsx(m,{children:r===a.DOUBLE_MAGIC?2:1})," cristal, portanto, escolha sabiamente.",e.jsx("br",{}),"Vocês tem ",e.jsx(m,{children:l})," cristais sobrando e"," ",e.jsx(C,{children:A-n+1})," portas para achar a saída."]}),en:e.jsxs(e.Fragment,{children:["Silence and poker face!",e.jsx("br",{}),"You have"," ",e.jsx(U,{children:r===a.HALF_TIME?v/2:v})," ","minutes to decide what door(s) to visit.",e.jsx("br",{}),"Each door a player visits costs"," ",e.jsx(m,{children:r===a.DOUBLE_MAGIC?2:1})," crystal, so choose wisely.",e.jsx("br",{}),"You all have ",e.jsx(m,{children:l})," remaining crystals and"," ",e.jsx(C,{children:A-n+1})," doors to find the exit."]})}),e.jsx(ke,{trap:r,doors:s,onDisableButtons:X,onSubmitDoor:X,onMakeReady:X,user:{...Ue,doorId:"ABC",ready:!0}})]}),e.jsx(me,{doors:s,trap:r,players:d,answerDoorId:i}),e.jsx(V,{className:"i-book-container",children:e.jsxs(he,{children:[!!o[0]&&e.jsx(w,{cardId:o[0],ghost:!1,children:e.jsx(f,{id:o[0],cardWidth:120})}),!!o[1]&&e.jsx(w,{cardId:o[1],ghost:!1,children:e.jsx(f,{id:o[1],cardWidth:120})}),!!o[2]&&e.jsx(w,{cardId:o[2],ghost:!1,children:e.jsx(f,{id:o[2],cardWidth:120})})]})})]})}function Go({players:s,state:o,meta:n}){var N,P,I;const r=Ke(s,o),{step:d,goToNextStep:i,setStep:l}=ie(),[c,u]=ve("possessedId",o,s),h=vo(),p=Ao(l);return e.jsx(ce,{phase:o==null?void 0:o.phase,allowedPhase:g.DOOR_CHOICE,children:e.jsxs(de,{step:d,players:s,children:[e.jsxs(q,{icon:e.jsx(ye,{}),title:e.jsx(t,{pt:"Qual porta é a correta?",en:"Which door is the correct one?"}),onClose:M(o.trap,g.DOOR_CHOICE)?i:()=>l(3),currentRound:(N=o==null?void 0:o.round)==null?void 0:N.current,duration:3,unskippable:!0,type:"block",children:[e.jsx(D,{children:e.jsx(t,{pt:"Selecione a porta que os deixa mais próximos da saída",en:"Select the door which could lead you closer to the exit"})}),e.jsx(Ie,{hand:(o==null?void 0:o.doors)??[]}),e.jsx(Ie,{hand:(o==null?void 0:o.selectedPagesIds)??[]})]}),e.jsx(Ne,{goToNextStep:i}),e.jsx(Le,{trap:o.trap,goToNextStep:i}),e.jsxs(_e,{condition:u,children:[e.jsx(Wo,{doors:o.doors,pages:o.selectedPagesIds,currentCorridor:o.currentCorridor,trap:o.trap,players:s,magic:o.magic,answerDoorId:o.answerDoorId,botEnabled:!!((P=n==null?void 0:n.options)!=null&&P.withBots)}),e.jsx(Fo,{doors:o.doors,pages:o.selectedPagesIds,currentCorridor:o.currentCorridor,trap:o.trap,onSubmitDoor:h,players:s,user:r,onConfirmDoor:p,possessed:c,magic:o.magic,answerDoorId:o.answerDoorId,botEnabled:!!((I=n==null?void 0:n.options)!=null&&I.withBots)})]})]})})}function Ho({doors:s,pages:o,currentCorridor:n,trap:r,players:d,round:i,answerDoorId:l,outcome:c,magic:u,usedMagic:h}){const p=A-n+(c===y.SUCCESS?0:1);return e.jsxs(k,{fullWidth:!0,children:[e.jsx(z,{children:e.jsx(Uo,{outcome:c})}),e.jsxs(T,{type:"event",children:[e.jsx(Vo,{outcome:c}),r===a.DOUBLE_MAGIC&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:e.jsx(t,{pt:"Essa rodada usou o dobro de mágica!!!",en:"This round used double magic!"})})]}),e.jsx("br",{}),e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["Vocês usaram ",e.jsx(m,{type:"negative",children:h})," e têm"," ",e.jsx(m,{children:u})," sobrando."]}),en:e.jsxs(e.Fragment,{children:["You used ",e.jsx(m,{type:"negative",children:h})," but still have"," ",e.jsx(m,{children:u})," remaining."]})}),e.jsx("br",{}),e.jsx(t,{pt:e.jsxs(e.Fragment,{children:["E faltam ",e.jsx(C,{children:p})," portas pra encontrar a saída."]}),en:e.jsxs(e.Fragment,{children:["And there ",Ve(p,"is","are")," ",e.jsx(C,{children:p})," doors left to find the exit."]})})]}),e.jsx(qo,{outcome:c}),e.jsx(me,{doors:s,trap:r,players:d,answerDoorId:l,disableTrap:!0}),e.jsx(V,{className:"i-book-container",children:e.jsxs(he,{children:[!!o[0]&&e.jsx(f,{id:o[0],cardWidth:140}),!!o[1]&&e.jsx(f,{id:o[1],cardWidth:140}),!!o[2]&&e.jsx(f,{id:o[2],cardWidth:140})]})}),e.jsx(F,{trap:r}),e.jsx(Ye,{round:i})]})}function Uo({outcome:s}){return s===y.SUCCESS||s===y.WIN?e.jsx(t,{pt:"Porta Correta!",en:"Correct Door!"}):e.jsx(t,{pt:"Porta Errada",en:"Wrong Door"})}function Vo({outcome:s}){return s===y.SUCCESS||s===y.WIN?e.jsx(t,{pt:"Pelo menos um jogador entrou na porta correta. Parabéns!",en:"At least one player entered the correct door. Good job!"}):e.jsx(t,{pt:"Nenhum jogador entrou na porta correta.",en:"No player has entered the correct door."})}function qo({outcome:s}){return s===y.SUCCESS||s===y.WIN?e.jsx(e.Fragment,{}):e.jsx(T,{type:"alert",children:e.jsx(t,{pt:"Para a próxima rodada, as portas e armadilha continuarão as mesmas, mas a 'porta resposta' será aleatória.",en:"For the next round, the doors and trap will remain the same, but the 'door answer' will be randomized again."})})}function zo({players:s,state:o}){var d;const{step:n,goToNextStep:r}=ie();return e.jsx(ce,{phase:o==null?void 0:o.phase,allowedPhase:g.RESOLUTION,children:e.jsxs(de,{step:n,players:s,children:[e.jsx(q,{icon:e.jsx(oo,{}),title:e.jsx(t,{pt:"Vocês escolheram a porta correta?",en:"Have you opened the right door?"}),onClose:r,currentRound:(d=o==null?void 0:o.round)==null?void 0:d.current,duration:3,type:"block",unskippable:!0}),e.jsx(Ho,{doors:o.doors,pages:o.selectedPagesIds,currentCorridor:o.currentCorridor,trap:o.trap,players:s,round:o.round,outcome:o.outcome,answerDoorId:o.answerDoorId,magic:o.magic,usedMagic:o.usedMagic})]})})}function Ko({players:s,state:o}){const n=o.winCondition==="WIN",r=Ce(10,{gap:8,minWidth:120,maxWidth:350,margin:8}),d=x.useMemo(()=>Array(7).fill("").map((i,l)=>{var c;return((c=o.doors??[])==null?void 0:c[l])??""}),[o.doors]);return e.jsxs(jo,{state:o,players:s,announcementIcon:n?e.jsx(so,{}):e.jsx(xo,{}),announcementTitle:e.jsx(t,{pt:"A jornada chegou ao fim!",en:"The journey has come to an end!"}),announcementContent:e.jsx(D,{children:"..."}),children:[e.jsx(H,{children:n?e.jsx(t,{pt:"Conseguimos!",en:"We did it!"}):e.jsx(t,{pt:"Ficamos presos",en:"We stayed trapped"})}),e.jsx(ee,{children:e.jsx(Ae,{style:{width:"4rem"}})}),e.jsx(T,{type:"lore",children:n?e.jsx(t,{pt:"Quando saímos, fomos abordados pelo Líder do Oculto e entramos para um culto de bruxaria!!! Viva!",en:"As soon as we got out, we were scouted by the Leader of the Occult to join their cult!!! Yay!"}):e.jsx(To,{players:s})}),e.jsx(Oo,{players:s,achievements:o.achievements,reference:go}),e.jsxs(e.Fragment,{children:[e.jsx(Io,{}),e.jsx(H,{size:"x-small",children:e.jsx(t,{pt:"O corredor",en:"The Corridor"})}),e.jsx(ee,{wrap:!0,children:d.map((i,l,c)=>e.jsxs(x.Fragment,{children:[e.jsx(ue,{width:r,children:e.jsx(f,{id:i||"back-lockedDoor",cardWidth:150})}),l<c.length-1&&e.jsx(Co,{})]},i||l))})]})]})}function Yo(s){switch(s.phase){case g.BOOK_POSSESSION:return Bo;case g.DOOR_CHOICE:return Go;case g.RESOLUTION:return zo;case Xe.DEFAULT.GAME_OVER:return Ko;default:return Je}}function jr(){return e.jsx($e,{gameCollection:qe.PORTA_DOS_DESESPERADOS,getActiveComponent:Yo})}export{jr as default};
