import{j as e,B as S,T as l,f as C,bE as f,e as x,bj as v,aG as G,r as F,aL as y,J as z,bC as j,b2 as E,aP as R,l as Y,bD as J,aN as X,b0 as L,a$ as K,bG as Q,aY as Z,aW as ee,aX as se}from"./index-BHxstxRa.js";import{u as V,a as w,S as N,b as _,d as D,c as W,e as P,f as d,g as A,P as O,m as re,n as ae,i as oe,j as te,k as ne,l as ie}from"./StepSwitcher-BXJo8zYy.js";import{T as ce}from"./TrophyIcon-Cqy6qBLR.js";import"./GameOver-DjFlmOyW.js";import{G as le}from"./GameOverWrapper-BE8KPX7K.js";import{D as me}from"./DreamIcon-rTPAxCEZ.js";/* empty css                             */import{I as de}from"./ImageCardPreloadHand-CobIRcFG.js";import{I as g}from"./Instruction-BybbLj7U.js";import{R as ue}from"./RoundAnnouncement-D8tdXt6N.js";import{C as U}from"./Card-DKjgga4s.js";import{I as $}from"./ImageBlurButton-CehFEyxe.js";import{I as q}from"./ImageCard-1NADAfDf.js";import{E as pe}from"./WritingIcon-RZOKDAhj.js";import{u as he,R as xe}from"./useVotingMatch-CN947WMV.js";import{R as B}from"./UpCircleOutlined-De3CITNT.js";import{R as je}from"./RibbonGroup-XcO6CCPr.js";import{u as ge}from"./SlideShowControls-Lns4hSlq.js";import{C as Se}from"./CountdownIcon-D_LoydmX.js";import{P as k}from"./PointsHighlight-DWvxDO4z.js";import{S as be}from"./SlideShow-DYbH5tZM.js";import{A as fe}from"./AvatarName-Ded-9Oeu.js";import{A as ye}from"./Avatar-c6A67G38.js";import{S as M}from"./StarPoints-CXhDF6ax.js";import{S as ve}from"./StepRankingWrapper-Bvk8BHUN.js";import{R as Ne}from"./RoundsLeftInstruction-DO0g-2bv.js";/* empty css                            */import"./useBlurCards-ByGlxzrY.js";import"./speech-DY7sRUF5.js";import"./useDevFeatures-BewB_gnt.js";import"./RulesModal-CtIeEXbk.js";import"./DoubleRightOutlined-Blb_jWym.js";import"./PurePanel-DkQQKWjz.js";import"./useMutation-BfEbaEN0.js";import"./Game-BROCs2wq.js";import"./WaitingRoomIcon-BqwLGh8b.js";import"./AnimatedClockIcon-DEmAIurJ.js";import"./index-BkC-I9pC.js";import"./useBubbleLock-8-ribwE0.js";import"./index-C9vtP08p.js";import"./Overflow-D8qpiekN.js";import"./useEvent-BrwtzNMp.js";import"./index-Q6J0dQ4X.js";import"./index-YBpBwVZ1.js";import"./GameBanner-B0G-RioB.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-C31kRhB0.js";import"./InfoCircleOutlined-BHPK27TA.js";import"./index-BZRlC0LW.js";import"./SignIn-bK2xkQed.js";import"./GoogleIcon-BfnRz8LL.js";import"./Loading-BwgeH7qs.js";import"./AnimatedLoaderIcon-CN2Xdapq.js";import"./LikeFilled-C-VhT6vf.js";import"./StarFilled-Dgjp5jwM.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-BtyUeI6C.js";import"./useMergedState-DastMU9z.js";import"./progress-eTBcOKGc.js";import"./TheEndIcon-j4gIMajT.js";import"./Ribbon-emVlTM5r.js";import"./StepBackwardOutlined-B_KrYQnG.js";import"./TrophyOutlined-Cz_HdSGs.js";import"./StarIcon-xcWRrwl6.js";import"./MetricHighlight-NE1YeT7O.js";import"./RankingBoard-CsZbDBfK.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./RuleInstruction-CJDCPjux.js";function Ie({onClick:s,cardId:r,selectLabel:o,deselectLabel:n,isSelected:a=!1}){return e.jsxs(S,{shape:"round",size:"small",ghost:!a,className:"image-card-select-button",onClick:()=>s(r),children:[e.jsx(B,{}),a?e.jsx(l,{pt:"Desmarcar",en:"Deselect",custom:n}):e.jsx(l,{pt:"Selecionar",en:"Select",custom:o}),e.jsx(B,{})]})}function Ce({state:s,players:r}){return e.jsx(le,{state:s,players:r,announcementIcon:e.jsx(ce,{})})}const H={SUBMIT_DREAM:"SUBMIT_DREAM",SUBMIT_VOTING:"SUBMIT_VOTING"};function Ee(s){const{translate:r}=C(),o=V({actionName:"submit-dream",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:r("Sonho submetido com sucesso","Dream submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seu sonho","Oops, the application found an error while trying to submit your dream")});return n=>{o({action:H.SUBMIT_DREAM,...n})}}function _e(s){const{translate:r}=C(),o=V({actionName:"submit-votes",onBeforeCall:()=>s(2),onError:()=>s(0),successMessage:r("Votos submetidos com sucesso","Votes submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seus votos","Oops, the application found an error while trying to submit your votes")});return n=>{o({action:H.SUBMIT_VOTING,...n})}}const De=()=>e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Escreva uma dica dentro do tema dado para o seu sonho (carta com borda amarela).",e.jsx("br",{}),"Preste atenção em seu pesadelo (carta com borda roxa), se alguém achar que sua dica é relacionada a seu pesadelo, você perde pontos."]}),en:e.jsxs(e.Fragment,{children:["Write a clue for your dream (yellow bordered card).",e.jsx("br",{}),"Pay attention to your nightmare (purple bordered card) because if any player thinks that your clue is related to that card, you lose points."]})}),Pe=["água","bola","calderão do huck","dedo","esmalte","fatídico","ganhar","hereditário","simpático","abismo","rola","a branca de neve","oops i did it again","pesquisa","saborosa","amargo"],Ae=()=>f(Pe)[0],Oe=(s,r,o)=>{const n=f(s.map(t=>t.id).filter(t=>t!==o.id)),a=f(r);return n.reduce((t,i,c)=>(t[i]=a[c],t),{})};function T({cardId:s,cardWidth:r,isDream:o=!1,isNightmare:n=!1,hideBlurButton:a=!1}){const t="s-dream-board-card";return e.jsxs(e.Fragment,{children:[e.jsx(q,{id:s,cardWidth:r,className:x(t,o&&`${t}--dream`,n&&`${t}--nightmare`)}),!a&&e.jsx($,{cardId:s})]})}function Te({table:s,user:r,className:o=""}){const n=v(s.length+1,{gap:20});return e.jsx("ul",{className:x("s-dream-board",o),children:s.map(a=>{const t=r.dreamId===a,i=r.nightmareId===a;return e.jsxs("li",{className:"s-dream-board__entry",style:{maxWidth:`${n+20}px`},children:[e.jsx(T,{cardId:a,cardWidth:n,isDream:t,isNightmare:i}),t&&e.jsx("div",{className:"s-dream-board__dream-label",style:{maxWidth:`${n}px`},children:e.jsx(l,{pt:"Sonho",en:"Dream"})}),i&&e.jsx("div",{className:"s-dream-board__nightmare-label",style:{maxWidth:`${n}px`},children:e.jsx(l,{pt:"Pesadelo",en:"Nightmare"})})]},`board-${a}`)})})}function Re({table:s,user:r,onSubmitDream:o}){const{isLoading:n}=G(),{translate:a}=C(),[t,i]=F.useState("");w(()=>{o({dream:Ae()})},[]);const c=()=>{o({dream:t})};return e.jsxs(N,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(_,{children:e.jsx(U,{header:a("Tema do Sonho","Dream Theme"),className:"s-theme-card",randomColor:!0,footer:Array(r.theme.level).fill("•").join(""),footerClassName:"s-theme-card__description",children:r.theme.text})}),e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Dentro do tema acima, escreva sua dica no campo abaixo. Lembre-se que seu sonho é a carta de borda amarela e seu pesadelo é a carta de borda roxa.",en:"Write a clue in the field below within the given theme. Remember that your dream is the card with the yellow border and your nightmare is the card with the purple border."})}),e.jsx(Te,{table:s,user:r}),e.jsx(y,{children:e.jsx(z,{size:"large",onPressEnter:c,onChange:m=>i(m.target.value),placeholder:a("Escreva aqui","Write here")})}),e.jsx(y,{children:e.jsx(S,{type:"primary",disabled:n||!t,onClick:c,children:e.jsx(l,{pt:"Enviar Sonho",en:"Submit Dream"})})})]})}function Le({state:s,players:r}){var c;const{step:o,goToNextStep:n,setStep:a}=D(0),t=W(r,s),i=Ee(a);return e.jsx(P,{phase:s==null?void 0:s.phase,allowedPhase:d.SONHOS_PESADELOS.DREAM_TELLING,children:e.jsxs(A,{step:o,players:r,children:[e.jsx(ue,{round:s.round,buttonText:"",onPressButton:n,time:5,children:e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Sabe quando você sonha com uma coisa, mas não consegue explicar? Então...",en:"You know when you dream about something but you can't quite explain? So..."})})}),e.jsxs(O,{icon:e.jsx(me,{}),title:e.jsx(l,{pt:"Conte-nos sobre seu sonho",en:"Tell us about your dream..."}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:[e.jsx(g,{children:e.jsx(De,{})}),e.jsx(de,{hand:s.table})]}),e.jsx(Re,{table:s.table,onSubmitDream:i,user:t})]})})}const Be=(s,r)=>Object.keys(s).filter(o=>s[o]===r),ke=(s,r)=>Object.entries(s).reduce((o,[n,a])=>{const t=n.split(R)[1],i=a.split(R)[1];return t!==r.id&&(o[t]=i),o},{}),Me=(s,r)=>s.reduce((o,n,a)=>{if(n.id===r.id){const t=j(["dream",n.id,E[a]]),i=j(["card",r.dreamId]);o[t]=i}return o},{}),Ge=(s,r,o)=>({...r.reduce((a,t,i)=>{const c=f(o),m=j(["dream",t.id,E[i]]),u=j(["card",c[0]]);return a[m]=u,a},{}),...s});function Ve({dreams:s,activeItem:r,onActivateItem:o,votes:n,players:a}){const t="a-evaluation-all-cards__li-card-button";return e.jsx(y,{children:s.map(({id:i,dream:c},m)=>{const u=a[i],p=E[m],h=j(["dream",i,p]),b=r===h,I=Object.keys(n).includes(h);return e.jsx(Y,{className:x(t,b&&`${t}--active`,I&&`${t}--used`),onClick:()=>o(h),children:e.jsx(U,{color:J(p),header:p,size:"medium",footer:u.name,className:"s-clue-card",footerClassName:"s-clue-card__footer",children:c})},h)})})}function we({table:s,activeItem:r,onActivateItem:o,votes:n}){const a=v(s.length+1,{gap:20,margin:50}),t="a-evaluation-all-drawings__li-drawing-button";return e.jsx("ul",{className:"s-dream-board",children:s.map(i=>{const c=j(["card",i]),m=r===c,u=Be(n,c);return e.jsxs("li",{className:x("s-dream-board__entry",t,m&&`${t}--active`),style:{maxWidth:`${a+20}px`},children:[e.jsxs("div",{className:"s-dream-board__card-container",children:[e.jsx(je,{labels:u}),e.jsx(T,{cardId:i,cardWidth:a,hideBlurButton:!0}),e.jsx(Ie,{cardId:c,onClick:o})]}),e.jsx($,{cardId:i})]},`board-${i}`)})})}function We({players:s,user:r,table:o,onSubmitVotes:n,dreams:a}){const{isLoading:t}=G(),{votes:i,setVotes:c,activeItem:m,activateItem:u,isVotingComplete:p}=he("dream",!0,a.length);X(()=>{const b=Me(a,r);b&&c(I=>({...I,...b}))}),w(()=>{n({votes:Oe(a,o,r)})},[]);const h=()=>{n({votes:ke(i,r)})};return e.jsxs(N,{fullWidth:!0,className:"s-tell-dream-step",children:[e.jsx(_,{children:e.jsx(l,{pt:"Adivinhação",en:"Match the Pairs"})}),e.jsx(g,{contained:!0,children:e.jsx(l,{pt:"Clique em uma carta e então uma botão da imagem correspondente ou vice e versa. Aperte enviar quando terminar te combinar todas as dicas.",en:"Click on a clue then on an image button or vice versa. When you're done matching all clues, press Submit."})}),e.jsxs(y,{children:[e.jsx(S,{type:"default",disabled:t,onClick:()=>c(Ge(i,a,o)),className:x(p&&L("tada")),size:"large",children:e.jsx(l,{pt:"Vote pra mim",en:"Vote for me"})}),e.jsx(S,{type:"primary",disabled:t||!p,onClick:h,className:x(p&&L("tada")),size:"large",children:e.jsx(l,{pt:"Enviar",en:"Submit"})})]}),e.jsx(we,{user:r,table:o,activeItem:m,onActivateItem:u,votes:i}),e.jsx(Ve,{dreams:a,activeItem:m,onActivateItem:u,votes:i,players:s})]})}function Ue({state:s,players:r}){var c;const{step:o,goToNextStep:n,setStep:a}=D(0),t=W(r,s),i=_e(a);return e.jsx(P,{phase:s==null?void 0:s.phase,allowedPhase:d.SONHOS_PESADELOS.MATCHING,children:e.jsxs(A,{step:o,players:r,children:[e.jsx(O,{icon:e.jsx(pe,{}),title:e.jsx(l,{pt:"Combine os sonhos",en:"Match the dreams"}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:e.jsx(g,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Selecione os pares de dica e carta.",e.jsx("br",{}),"Mais de um jogador pode ter o mesmo sonho."]}),en:e.jsxs(e.Fragment,{children:["Match the pairs of cards and clues.",e.jsx("br",{}),"More than one player may have the same card."]})})})}),e.jsx(We,{players:r,user:t,table:s.table,onSubmitVotes:i,dreams:s.dreams})]})})}function $e({entry:s,activePlayer:r}){const o=v(5,{gap:40});return e.jsxs("div",{className:"s-gallery-dream-display",children:[e.jsx("div",{className:"s-gallery-dream-display__player",children:e.jsx(fe,{player:r})}),e.jsxs("div",{className:"s-gallery-dream-display__theme-container",children:[e.jsxs("div",{className:"s-gallery-dream-display__theme",children:[r.theme.text,":"]}),e.jsx("div",{className:"s-gallery-dream-display__dream",children:s.dream})]}),e.jsx("div",{className:"s-gallery-dream-display__dream-image-container",children:e.jsx(q,{id:s.dreamId,cardWidth:o,className:"s-gallery-dream-display__dream-image"})})]})}function qe({entry:s,players:r,correctGuessPoints:o}){const n=v(8,{gap:20});return e.jsx("ul",{className:"s-gallery-guesses",children:s.cards.map(a=>e.jsxs("li",{className:"s-gallery-guesses__votes-container",style:{width:`${n+16}px`},children:[e.jsx("div",{children:e.jsx(T,{cardId:a.cardId,cardWidth:n,isDream:a.isDream,isNightmare:a.isNightmare,hideBlurButton:!0})}),e.jsxs("div",{className:"s-gallery-guesses__votes",children:[e.jsx(K.Group,{children:a.votes.map(t=>{const i=r[t];return e.jsx(ye,{id:i.avatarId,alt:i.name,size:"small"},t)})}),a.votes.length>0&&a.isDream&&e.jsx(M,{quantity:o,keyPrefix:"dream-correct",hideText:!0}),a.votes.length>0&&a.isNightmare&&e.jsx(M,{quantity:-1,keyPrefix:"dream-incorrect",hideText:!0})]})]},`gallery-guess-${a.cardId}`))})}function He({players:s,gallery:r,slideShowConfig:o,correctGuessPoints:n}){re();const a=r[o.slideIndex],t=s[a.playerId];return e.jsxs(N,{fullWidth:!0,className:"s-results-step",children:[e.jsx(_,{children:e.jsx(l,{pt:"Resultado",en:"Results"})}),e.jsxs(be,{config:o,barColor:Q(t.avatarId),children:[e.jsx($e,{entry:a,activePlayer:t}),e.jsx(qe,{entry:a,players:s,correctGuessPoints:n})]})]})}function Fe({players:s,ranking:r,round:o,onGoBack:n}){return e.jsxs(N,{children:[e.jsx(ve,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(l,{pt:"Votos corretos",en:"Correct guesses"},"1"),e.jsx(l,{pt:"Votos corretos em seu sonho por outros jogadores",en:"Correct guesses on your dream by other players"},"2"),e.jsx(l,{pt:"Votos em pesadelos",en:"Nightmares selected"},"3")]}),o.current<o.total&&e.jsx(Ne,{round:o}),e.jsx(S,{size:"large",onClick:n,icon:e.jsx(xe,{}),children:e.jsx(l,{pt:"Ver Galeria De Novo",en:"See Gallery Again"})}),e.jsx(ae,{round:o})]})}function ze({state:s,players:r}){var c;const{step:o,goToNextStep:n,goToPreviousStep:a}=D(0),t=ge({length:s.gallery.length,slideDuration:10,onExpire:n}),i=()=>{t.reset(),a()};return e.jsx(P,{phase:s==null?void 0:s.phase,allowedPhase:d.SONHOS_PESADELOS.RESOLUTION,children:e.jsxs(A,{step:o,players:r,children:[e.jsx(O,{icon:e.jsx(Se,{}),title:e.jsx(l,{pt:"Resultado",en:"Results"}),onClose:n,currentRound:(c=s==null?void 0:s.round)==null?void 0:c.current,type:"block",children:e.jsx(g,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Acertos ganham ",e.jsx(k,{children:s.correctGuessPoints})," pontos nessa rodada."]}),en:e.jsxs(e.Fragment,{children:["Correct guesses get ",e.jsx(k,{children:s.correctGuessPoints})," points this round."]})})})}),e.jsx(He,{players:r,gallery:s.gallery,slideShowConfig:t,correctGuessPoints:s.correctGuessPoints}),e.jsx(Fe,{players:r,ranking:s.ranking,round:s.round,onGoBack:i})]})})}function Ye(s){if(s&&!s.phase)return ee;switch(s.phase){case d.DEFAULT.LOBBY:return ie;case d.DEFAULT.RULES:return ne;case d.DEFAULT.SETUP:return te;case d.SONHOS_PESADELOS.DREAM_TELLING:return Le;case d.SONHOS_PESADELOS.MATCHING:return Ue;case d.SONHOS_PESADELOS.RESOLUTION:return ze;case d.DEFAULT.GAME_OVER:return Ce;default:return se}}function lr(){return e.jsx(oe,{gameCollection:Z.SONHOS_PESADELOS,getActiveComponent:Ye})}export{lr as default};
