import{r as m,el as we,em as Pe,bS as ls,am as ds,aw as us,as as Fe,c as ms,az as b,eS as ps,z as U,aG as $,aH as S,aC as Be,j as e,B as j,dN as w,J as hs,v,aD as G,x as z,T as d,eT as Es,eU as ie,H as T,e as _,I as gs,aN as $e,i as ye,b0 as B,f as A,aW as ze,aX as fs,n as C,bk as N,aJ as D,eV as xs,aK as ce,y as k,aA as He,eW as ue,aB as Y,P as js,D as V,b5 as F,b6 as We,aM as O,l as Ye,q,eX as J,bH as Ke,bf as re,bF as Ss,aL as Ns,aI as he,bl as Is,eY as _s,cK as As,eZ as me,cM as Os,bI as Ts,E as bs,L as ys,e_ as Rs,F as qe,e$ as vs,V as Cs,f0 as Ls,aE as Re,bK as ws,a$ as K,s as Ps,G as Us,f1 as Ue,o as Ms,ek as Gs}from"./index-Di-1oQe0.js";import{u as Q,a as Ee,b as Ds}from"./useBlurCards-9On1AZk3.js";import{F as ks,T as Vs,s as te,g as Fs,a as Bs,b as $s,c as zs,D as Hs}from"./speech-DhbCZw5K.js";import{u as Ws,G as Ys,a as Ks,T as qs,R as Js}from"./RulesModal-BM7I07_c.js";import{u as X}from"./useMutation-Cv_QLfoe.js";import{u as P,a as Qs}from"./Game-llQA0Y9l.js";import{A as Xs,W as Zs}from"./WaitingRoomIcon-B7O6u1EB.js";import{I as Je}from"./Instruction-BvZIhQ0G.js";import{A as ea}from"./AnimatedClockIcon-BMdPhBzo.js";import{T as sa,C as H}from"./index-VqJJqXn4.js";import{g as aa}from"./PurePanel-BCxu0gjP.js";import{S as R}from"./index-BHY3eHRX.js";import{D as ge}from"./index-BAxniGOi.js";import{P as ee,B as ve}from"./index-DafagF_P.js";import{a as le,A as Z}from"./Avatar-BR-3QP23.js";import{a as ta,G as na}from"./GameBanner-C7i61QDe.js";import{u as ra}from"./useDevFeatures-Bl5VqOEr.js";import{u as oa}from"./useTDBaseUrl-BF9foKiS.js";import{S as ia}from"./index-Dhp799BV.js";import{R as L}from"./InfoCircleOutlined-D99ixZt7.js";import{D as Ce}from"./index-hK3KUf1H.js";import{a as ca}from"./SignIn-DqppX8Dx.js";import{M as la}from"./DoubleRightOutlined-hEW9jQ-k.js";import{L as da}from"./Loading-C_ATOxDS.js";import{R as ua}from"./LikeFilled-CQxl2XEe.js";function ma(s,a,t,n){var r,o=!1,i=0;function c(){r&&clearTimeout(r)}function u(){c(),o=!0}typeof a!="boolean"&&(n=t,t=a,a=void 0);function h(){for(var l=arguments.length,p=new Array(l),E=0;E<l;E++)p[E]=arguments[E];var f=this,g=Date.now()-i;if(o)return;function x(){i=Date.now(),t.apply(f,p)}function I(){r=void 0}n&&!r&&x(),c(),n===void 0&&g>s?x():a!==!0&&(r=setTimeout(n?I:x,n===void 0?s-g:s))}return h.cancel=u,h}var pa=["mousemove","mousedown","resize","keydown","touchstart","wheel"],ha=function(s,a,t){a===void 0&&(a=!1),t===void 0&&(t=pa);var n=m.useState(a),r=n[0],o=n[1];return m.useEffect(function(){for(var i=!0,c,u=r,h=function(f){i&&(u=f,o(f))},l=ma(50,function(){u&&h(!1),clearTimeout(c),c=setTimeout(function(){return h(!0)},s)}),p=function(){document.hidden||l()},E=0;E<t.length;E++)we(window,t[E],l);return we(document,"visibilitychange",p),c=setTimeout(function(){return h(!0)},s),function(){i=!1;for(var f=0;f<t.length;f++)Pe(window,t[f],l);Pe(document,"visibilitychange",p)}},[s,t]),r};const{Option:Me}=R;function Ge(s){return(s==null?void 0:s.type)&&(s.type.isSelectOption||s.type.isSelectOptGroup)}const Ea=(s,a)=>{var t;const{prefixCls:n,className:r,popupClassName:o,dropdownClassName:i,children:c,dataSource:u}=s,h=ls(c);let l;h.length===1&&m.isValidElement(h[0])&&!Ge(h[0])&&([l]=h);const p=l?()=>l:void 0;let E;h.length&&Ge(h[0])?E=c:E=u?u.map(I=>{if(m.isValidElement(I))return I;switch(typeof I){case"string":return m.createElement(Me,{key:I,value:I},I);case"object":{const{value:y}=I;return m.createElement(Me,{key:y,value:y},I.text)}default:return}}):[];const{getPrefixCls:f}=m.useContext(ds),g=f("select",n),[x]=us("SelectLike",(t=s.dropdownStyle)===null||t===void 0?void 0:t.zIndex);return m.createElement(R,Object.assign({ref:a,suffixIcon:null},Fe(s,["dataSource","dropdownClassName"]),{prefixCls:g,popupClassName:o||i,dropdownStyle:Object.assign(Object.assign({},s.dropdownStyle),{zIndex:x}),className:ms(`${g}-auto-complete`,r),mode:R.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:p}),E)},Qe=m.forwardRef(Ea),{Option:ga}=R,fa=aa(Qe,"dropdownAlign",s=>Fe(s,["visible"])),de=Qe;de.Option=ga;de._InternalPanelDoNotUseOrYouWillBeFired=fa;var xa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9z"}}]},name:"fire",theme:"filled"},ja={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0058.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0012.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0024.4 59.8 73.36 73.36 0 0053.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"}}]},name:"fire",theme:"outlined"},Sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm384 200c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h304c4.4 0 8 3.6 8 8v48zm16-152a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"meh",theme:"filled"},Na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"},Ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},_a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Aa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zM300 328c0-33.1 26.9-60 60-60s60 26.9 60 60-26.9 60-60 60-60-26.9-60-60zm372 248c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-60c0-4.4 3.6-8 8-8h304c4.4 0 8 3.6 8 8v60zm-8-188c-33.1 0-60-26.9-60-60s26.9-60 60-60 60 26.9 60 60-26.9 60-60 60zm135 476H225c-13.8 0-25 14.3-25 32v56c0 4.4 2.8 8 6.2 8h611.5c3.4 0 6.2-3.6 6.2-8v-56c.1-17.7-11.1-32-24.9-32z"}}]},name:"robot",theme:"filled"},Oa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},Ta={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},ba={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm224 272c-85.5 0-155.6-67.3-160-151.6a8 8 0 018-8.4h48.1c4.2 0 7.8 3.2 8.1 7.4C420 589.9 461.5 629 512 629s92.1-39.1 95.8-88.6c.3-4.2 3.9-7.4 8.1-7.4H664a8 8 0 018 8.4C667.6 625.7 597.5 693 512 693zm176-224a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"smile",theme:"filled"};function fe(){return fe=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},fe.apply(this,arguments)}const ya=(s,a)=>m.createElement(b,fe({},s,{ref:a,icon:ps})),ne=m.forwardRef(ya);function xe(){return xe=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},xe.apply(this,arguments)}const Ra=(s,a)=>m.createElement(b,xe({},s,{ref:a,icon:xa})),Xe=m.forwardRef(Ra);function je(){return je=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},je.apply(this,arguments)}const va=(s,a)=>m.createElement(b,je({},s,{ref:a,icon:ja})),Ca=m.forwardRef(va);function Se(){return Se=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Se.apply(this,arguments)}const La=(s,a)=>m.createElement(b,Se({},s,{ref:a,icon:Sa})),wa=m.forwardRef(La);function Ne(){return Ne=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ne.apply(this,arguments)}const Pa=(s,a)=>m.createElement(b,Ne({},s,{ref:a,icon:Na})),Ua=m.forwardRef(Pa);function Ie(){return Ie=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ie.apply(this,arguments)}const Ma=(s,a)=>m.createElement(b,Ie({},s,{ref:a,icon:Ia})),Ga=m.forwardRef(Ma);function _e(){return _e=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},_e.apply(this,arguments)}const Da=(s,a)=>m.createElement(b,_e({},s,{ref:a,icon:_a})),ka=m.forwardRef(Da);function Ae(){return Ae=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ae.apply(this,arguments)}const Va=(s,a)=>m.createElement(b,Ae({},s,{ref:a,icon:Aa})),Fa=m.forwardRef(Va);function Oe(){return Oe=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Oe.apply(this,arguments)}const Ba=(s,a)=>m.createElement(b,Oe({},s,{ref:a,icon:Oa})),Ze=m.forwardRef(Ba);function Te(){return Te=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Te.apply(this,arguments)}const $a=(s,a)=>m.createElement(b,Te({},s,{ref:a,icon:Ta})),De=m.forwardRef($a);function be(){return be=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},be.apply(this,arguments)}const za=(s,a)=>m.createElement(b,be({},s,{ref:a,icon:ba})),Ha=m.forwardRef(za),Wa=(s,a=1e3)=>{let t;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{s.apply(void 0,n)},a)}};function es({actionName:s,onBeforeCall:a=()=>{},onAfterCall:t=()=>{},onError:n=()=>{},onSuccess:r=()=>{},successMessage:o="API call was successful",errorMessage:i="API call has failed"}){const{message:c,notification:u}=U.useApp(),{setLoader:h}=$(),{gameId:l,gameName:p}=P(),[E]=S("userId"),f=X({mutationKey:[s],mutationFn:g=>Be.run({gameId:l,gameName:p,playerId:E,...g}),onMutate:async()=>{h(s,!0),await a()},onSuccess:async()=>{await r(),c.success(o)},onError:g=>{u.error({message:i,description:JSON.stringify(g==null?void 0:g.message),placement:"bottomLeft"}),console.error(g),n()},onSettled:async()=>{await t(),h(s,!1)}});return Wa(f.mutate)}const se=({label:s,...a})=>e.jsx(j,{icon:e.jsx(Xe,{}),type:"primary",danger:!0,className:"full-width",...a,children:s}),Ya=({valueType:s})=>{switch(s){case"number":return e.jsx(w.Item,{label:"Value",name:"value",children:e.jsx(sa,{})});case"boolean":return e.jsx(w.Item,{label:"Value",name:"value",children:e.jsx(v,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:!0})});case"nullish":return e.jsx(w.Item,{label:"Value",name:"value",children:e.jsx(v,{checkedChildren:"null",unCheckedChildren:"undefined",defaultChecked:!0})});default:return e.jsx(w.Item,{label:"Value",name:"value",children:e.jsx(hs,{})})}},Ka=({isLoading:s,state:a,onPerformAdminAction:t})=>{const{message:n}=U.useApp(),[r]=w.useForm(),[o,i]=m.useState("string"),c=Object.keys(a).map(l=>({label:l,value:l})),u=l=>{["boolean","nullish"].includes(l)&&r.setFieldsValue({value:!0}),l==="number"&&r.setFieldsValue({value:0}),l==="string"&&r.setFieldsValue({value:""}),i(l)},h=async l=>{let p=l.value;try{l.valueType==="number"&&(p=Number(l.value)??0),l.valueType==="nullish"&&(p=l.value?null:void 0);const E={[l.key]:p};window.confirm(`Tem certeza que quer forçar o estado ${JSON.stringify(E)}`)&&(await t({state:E,action:G.FORCE_STATE_PROPERTY}),r.resetFields(),i("string"))}catch(E){n.error("Something went wrong",E)}};return e.jsxs(w,{name:"basic",form:r,initialValues:{valueType:"string"},onFinish:h,children:[e.jsx("h3",{children:"Force Property"}),e.jsx(w.Item,{label:"Key",name:"key",rules:[{required:!0}],children:e.jsx(de,{options:c})}),e.jsx(w.Item,{label:"Type",name:"valueType",children:e.jsxs(R,{onChange:u,children:[e.jsx(R.Option,{value:"string",children:"string"}),e.jsx(R.Option,{value:"number",children:"number"}),e.jsx(R.Option,{value:"boolean",children:"boolean"}),e.jsx(R.Option,{value:"nullish",children:"nullish"})]})}),e.jsx(Ya,{valueType:o}),e.jsx(j,{type:"primary",htmlType:"submit",disabled:s,danger:!0,children:"Submit"})]})};function qa({players:s}){const{readyPlayers:a,pendingPlayers:t}=Object.values(s).reduce((n,r)=>(r.ready?n.readyPlayers.push(r.name):n.pendingPlayers.push(r.name),n),{readyPlayers:[],pendingPlayers:[]});return e.jsxs("li",{className:"admin-players-ready-state",children:[e.jsx("h3",{children:"Players Ready State"}),e.jsxs("div",{className:"admin-players-ready-state__entry",children:[e.jsx(ne,{style:{color:"green"},title:"Ready:"}),e.jsx("ul",{className:"admin-players-ready-state__list",children:a.map(n=>e.jsx("li",{className:"admin-players-ready-state__item",children:n},`admin-player-${n}`))})]}),e.jsxs("div",{className:"admin-players-ready-state__entry",children:[e.jsx(Ua,{style:{color:"orange"},title:"Ready:"}),e.jsx("ul",{className:"admin-players-ready-state__list",children:t.map(n=>e.jsx("li",{className:"admin-players-ready-state__item",children:n},`admin-player-${n}`))})]})]})}const ss=({state:s,players:a})=>{var E;const{isLoading:t}=$(),{isAdmin:n}=z(),[r]=S("usingFirestoreEmulator"),[o]=S("isAdminEnabled"),[i,c]=m.useState(!1),u=P(),h=()=>{c(!0)},l=()=>{c(!1)},p=es({actionName:"perform-admin-action",successMessage:"Admin action performed successfully",errorMessage:"The selected admin action has failed",onAfterCall:l});return!n||!o||!s.phase?e.jsx("span",{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"admin-menu-drawer",children:[e.jsx(ks,{position:-1,icon:e.jsx(Xe,{}),type:"button",label:e.jsx(d,{pt:" Admin",en:" Admin"}),onClick:h,buttonProps:{type:"default"}}),e.jsx(ge,{title:"Admin Menu",placement:"left",closable:!1,open:i,onClose:l,children:e.jsxs("ul",{children:[e.jsx(qa,{players:a}),e.jsx("li",{children:e.jsx("hr",{})}),e.jsxs("li",{className:"admin-menu-drawer__buttons",children:[e.jsx("h3",{children:"Actions"}),e.jsx(ee,{placement:"right",title:"Are you sure you want to go to the next phase?",onConfirm:()=>p({action:G.GO_TO_NEXT_PHASE}),children:e.jsx(se,{disabled:t||s.phase==="GAME_OVER",label:"Force Next Phase",className:"admin-menu-drawer__button"})}),e.jsx(ee,{placement:"right",title:"Are you sure you want to go to play again?",onConfirm:()=>p({action:G.PLAY_AGAIN}),children:e.jsx(se,{disabled:!0,label:"Play Again",className:"admin-menu-drawer__button"})}),e.jsx(ee,{placement:"right",title:"Are you sure you want to go to end the game by the end of this round?",onConfirm:()=>p({action:G.FORCE_END_GAME}),children:e.jsx(se,{disabled:((E=s==null?void 0:s.round)==null?void 0:E.forceLastRound)||t||["LOBBY","RULES","GAME_OVER"].includes(s.phase),label:s!=null&&s.round.forceLastRound?"This is already set as the last round":"Make this the last round",className:"admin-menu-drawer__button"})}),e.jsx(ee,{placement:"right",title:"Are you sure you want to go to the lobby and unlock the game?",onConfirm:()=>p({action:G.RESET_GAME}),children:e.jsx(se,{disabled:(s==null?void 0:s.phase)==="LOBBY",label:"Reset and restart",className:"admin-menu-drawer__button"})})]}),e.jsx("li",{children:e.jsx("hr",{})}),e.jsx("li",{children:e.jsx(Ka,{isLoading:t,onPerformAdminAction:p,state:s})}),e.jsx("li",{children:e.jsx("hr",{})}),e.jsxs("li",{children:[e.jsx("h3",{children:"Firebase"}),e.jsx(j,{target:"_blank",href:Es(!!r,u.gameName,u.gameId),children:"Visit Firebase Collection"})]})]})})]})})},as=({colorScheme:s,children:a,icon:t,className:n,size:r="default",wait:o,level:i,...c})=>{const u=ie(),h=s??u.colorScheme??"light";return e.jsxs(T.Title,{level:i??2,className:_("step-title",`step-title--${r}`,`step-title--${h}`,n),...c,children:[(!!t||o)&&e.jsx("span",{className:"title__icon",children:e.jsx(gs,{size:r,icon:o?e.jsx(ea,{}):t})}),a]})};function Ja({duration:s,timeLeft:a,onExpire:t}){const{timeLeft:n}=Q({duration:s,autoStart:a===void 0,onExpire:t}),r=(a??n)/s*100;return e.jsx("div",{className:"timer-waiting-time-bar",children:e.jsx("span",{className:"timer-waiting-time-bar__container",children:e.jsx("span",{className:"timer-waiting-time-bar__left",style:{width:`${r}%`}})})})}const ts={DEFAULT:{LOBBY:"LOBBY",RULES:"RULES",SETUP:"SETUP",GAME_OVER:"GAME_OVER",WAIT:"WAIT"},ADEDANHX:{ANSWERING:"ANSWERING",EVALUATION:"EVALUATION",RESULTS:"RESULTS"},ARTE_RUIM:{DRAW:"DRAW",EVALUATION:"EVALUATION",GALLERY:"GALLERY"},COMUNICACAO_ALIENIGENA:{ALIEN_SELECTION:"ALIEN_SELECTION",ALIEN_SEEDING:"ALIEN_SEEDING",HUMAN_ASK:"HUMAN_ASK",ALIEN_ANSWER:"ALIEN_ANSWER",ALIEN_REQUEST:"ALIEN_REQUEST",OFFERINGS:"OFFERINGS",REVEAL:"REVEAL"},COMUNICACAO_DUO:{ASKING_FOR_SOMETHING:"ASKING_FOR_SOMETHING",DELIVER_SOMETHING:"DELIVER_SOMETHING",VERIFICATION:"VERIFICATION"},CONTADORES_HISTORIAS:{STORY:"STORY",CARD_PLAY:"CARD_PLAY",VOTING:"VOTING",RESOLUTION:"RESOLUTION"},CONTROLE_DE_ESTOQUE:{GOOD_PLACEMENT:"GOOD_PLACEMENT",PLACEMENT_CONFIRMATION:"PLACEMENT_CONFIRMATION",FULFILLMENT:"FULFILLMENT",RESULTS:"RESULTS"},CRUZA_PALAVRAS:{WORDS_SELECTION:"WORDS_SELECTION",CLUE_WRITING:"CLUE_WRITING",GUESSING:"GUESSING",REVEAL:"REVEAL"},DETETIVES_IMAGINATIVOS:{SECRET_CLUE:"SECRET_CLUE",CARD_PLAY:"CARD_PLAY",DEFENSE:"DEFENSE",VOTING:"VOTING",REVEAL:"REVEAL"},DUETOS:{PAIRING:"PAIRING",RESULTS:"RESULTS"},ESPIAO_ENTRE_NOS:{ASSIGNMENT:"ASSIGNMENT",INVESTIGATION:"INVESTIGATION",ASSESSMENT:"ASSESSMENT",FINAL_ASSESSMENT:"FINAL_ASSESSMENT",RESOLUTION:"RESOLUTION"},ESQUIADORES:{BETS:"BETS",STARTING_RESULTS:"STARTING_RESULTS",BOOSTS:"BOOSTS",PRELIMINARY_RESULTS:"PRELIMINARY_RESULTS",LAST_CHANGE:"LAST_CHANGE",FINAL_RESULTS:"FINAL_RESULTS"},FOFOCA_QUENTE:{ROLES_SELECTION:"ROLES_SELECTION",BOARD_SETUP:"BOARD_SETUP",INTIMIDATION:"INTIMIDATION"},FILEIRA_DE_FATOS:{ORDERING:"ORDERING",RESULTS:"RESULTS"},GALERIA_DE_SONHOS:{WORD_SELECTION:"WORD_SELECTION",DREAMS_SELECTION:"DREAMS_SELECTION",CARD_PLAY:"CARD_PLAY",RESOLUTION:"RESOLUTION"},CRIMES_HEDIONDOS:{CRIME_SELECTION:"CRIME_SELECTION",SCENE_MARKING:"SCENE_MARKING",GUESSING:"GUESSING",REVEAL:"REVEAL"},LABIRINTO_SECRETO:{MAP_BUILDING:"MAP_BUILDING",PATH_FOLLOWING:"PATH_FOLLOWING",RESULTS:"RESULTS"},LINHAS_CRUZADAS:{PROMPT_SELECTION:"PROMPT_SELECTION",DRAWING:"DRAWING",NAMING:"NAMING",PRESENTATION:"PRESENTATION"},MEGAMIX:{SEEDING:"SEEDING",TRACK:"TRACK",RESULT:"RESULT"},MENTE_COLETIVA:{QUESTION_SELECTION:"QUESTION_SELECTION",EVERYBODY_WRITES:"EVERYBODY_WRITES",COMPARE:"COMPARE",RESOLUTION:"RESOLUTION"},MESMICE:{CLUE_WRITING:"CLUE_WRITING",OBJECT_FEATURE_ELIMINATION:"OBJECT_FEATURE_ELIMINATION",RESULT:"RESULT"},METALINGUAGEM:{WORD_CREATION:"WORD_CREATION",GUESSING:"GUESSING",RESULTS:"RESULTS"},NA_RUA_DO_MEDO:{TRICK_OR_TREAT:"TRICK_OR_TREAT",RESULT:"RESULT",STREET_END:"STREET_END"},NAO_SOU_ROBO:{CARD_SELECTION:"CARD_SELECTION",ARE_YOU_A_ROBOT:"ARE_YOU_A_ROBOT",RESULTS:"RESULTS"},ONDA_TELEPATICA:{DIAL_CLUE:"DIAL_CLUE",GUESS:"GUESS",REVEAL:"REVEAL"},PLANEJAMENTO_URBANO:{PLANNING:"PLANNING",PLACING:"PLACING",RESOLUTION:"RESOLUTION"},POLEMICA_DA_VEZ:{TOPIC_SELECTION:"TOPIC_SELECTION",REACT:"REACT",RESOLUTION:"RESOLUTION"},PORTA_DOS_DESESPERADOS:{BOOK_POSSESSION:"BOOK_POSSESSION",DOOR_CHOICE:"DOOR_CHOICE",RESOLUTION:"RESOLUTION"},QUEM_NAO_MATA:{TARGETING:"TARGETING",STANDOFF:"STANDOFF",DUEL:"DUEL",RESOLUTION:"RESOLUTION"},QUEM_SOU_EU:{CHARACTER_FILTERING:"CHARACTER_FILTERING",CHARACTER_DESCRIPTION:"CHARACTER_DESCRIPTION",GUESSING:"GUESSING",RESULTS:"RESULTS"},RETRATO_FALADO:{COMPOSITE_SKETCH:"COMPOSITE_SKETCH",EVALUATION:"EVALUATION",REVEAL:"REVEAL"},SINAIS_DE_ALERTA:{DRAWING:"DRAWING",EVALUATION:"EVALUATION",GALLERY:"GALLERY"},SONHOS_PESADELOS:{DREAM_TELLING:"DREAM_TELLING",MATCHING:"MATCHING",RESOLUTION:"RESOLUTION"},SUPER_CAMPEONATO:{CHALLENGE_SELECTION:"CHALLENGE_SELECTION",CONTENDER_SELECTION:"CONTENDER_SELECTION",BETS:"BETS",BATTLE:"BATTLE",RESULTS:"RESULTS"},TA_NA_CARA:{PROMPT:"PROMPT",ANSWERING:"ANSWERING",GUESSING:"GUESSING",REVEAL:"REVEAL"},TEORIA_DE_CONJUNTOS:{JUDGE_SELECTION:"JUDGE_SELECTION",ITEM_PLACEMENT:"ITEM_PLACEMENT",EVALUATION:"EVALUATION"},TESTEMUNHA_OCULAR:{WITNESS_SELECTION:"WITNESS_SELECTION",QUESTION_SELECTION:"QUESTION_SELECTION",QUESTIONING:"QUESTIONING",TRIAL:"TRIAL"},TESTE_DE_ELENCO:{MOVIE_GENRE_SELECTION:"MOVIE_GENRE_SELECTION",ACTOR_SELECTION:"ACTOR_SELECTION",RESULT:"RESULT"},TREVO_DA_SORTE:{WORD_SELECTION:"WORD_SELECTION",CLOVER_WRITING:"CLOVER_WRITING",CLOVER_GUESSING:"CLOVER_GUESSING",RESULTS:"RESULTS"},UE_SO_ISSO:{WORD_SELECTION:"WORD_SELECTION",SUGGEST:"SUGGEST",COMPARE:"COMPARE",GUESS:"GUESS",VERIFY_GUESS:"VERIFY_GUESS",RESULT:"RESULT"},VAMOS_AO_CINEMA:{MOVIE_SELECTION:"MOVIE_SELECTION",MOVIE_ELIMINATION:"MOVIE_ELIMINATION",REVEAL:"REVEAL"},VENDAVAL_DE_PALPITE:{BOSS_SELECTION:"BOSS_SELECTION",SECRET_WORD_SELECTION:"SECRET_WORD_SELECTION",PLAYERS_CLUES:"PLAYERS_CLUES",CLUE_EVALUATIONS:"CLUE_EVALUATIONS"}};function ns(s=!1){const[,a]=S("showPlayersBar");$e(()=>(a(s),()=>{a(!0)}))}function fn({buttonText:s,icon:a,title:t,children:n,currentRound:r=3,onClose:o=()=>{},className:i,duration:c,withoutTimer:u=!1,unskippable:h,animationType:l="backInDown",type:p="block"}){ns(p==="overlay");const E=[7,15,7,5][r]??4,[f,g]=m.useState(!0),[x,I]=m.useState(!1),y=()=>{g(!1),M(),o()};Ws(" ",()=>{h||y()});const{start:M}=Q({autoStart:!1,duration:1,onExpire:()=>I(!0)});return x?e.jsx(e.Fragment,{}):e.jsx("div",{className:_(p==="overlay"&&"phase-announcement-overlay",!f&&B("fadeOut",{speed:"faster"})),children:e.jsx("div",{className:"phase-announcement-wrapper",children:e.jsxs("div",{className:_("phase-announcement",f?B(l,{speed:"fast"}):B("bounceOut"),i),children:[e.jsx(ye,{colorScheme:"light",children:t}),e.jsx("span",{className:"phase-announcement__icon",children:a}),n,u?e.jsx(j,{type:"primary",onClick:y,autoFocus:!0,className:"mt-2",children:e.jsx(d,{pt:"Prosseguir",en:"Continue",custom:s})}):e.jsx(Vs,{duration:c||E,type:"text",onClick:y,onExpire:y,disabled:h,autoFocus:!0,className:"mt-2",children:e.jsx(d,{pt:"Prosseguir",en:"Continue",custom:s})})]})})})}function rs({phase:s,allowedPhase:a="",children:t,className:n="",fullScreen:r=!1}){const o=ie(),{translate:i}=A(),c=m.useRef(null);if(a!==s)return e.jsx(ze,{});if(!s)return e.jsx(fs,{description:i("Estado do jogo não está correto","Game state is not correct")});const u="phase-container",h=o==null?void 0:o.backgroundColor;return e.jsx("main",{className:_(u,r&&`${u}--full-screen`,n),id:"screen",ref:c,style:h?{backgroundColor:h}:{},children:t})}function Qa(s=0){const[a,t]=m.useState(s);return{step:a,setStep:t,goToNextStep:()=>t(o=>o+1),goToPreviousStep:()=>t(o=>o-1<0?0:o-1)}}function Xa({type:s}){return e.jsx("div",{className:"cloud-background__cloud",style:{backgroundImage:`url('${D.CLOUDS}${s}.png')`,backgroundPositionX:"0"}})}const Za=[{backgroundPositionX:"0"},{backgroundPositionX:"-300px"},{backgroundPositionX:"-600px"},{backgroundPositionX:"-900px"},{backgroundPositionX:"-1200px"}];function et({type:s,index:a}){return e.jsx("div",{className:"cloud-background__cloud",style:{backgroundImage:`url('${D.CLOUDS}${s}.png')`,...Za[a]}})}function st(s){var a;return s&&((a=s.split("-cloud"))==null?void 0:a[1])==="s"?et:Xa}const at=[0,1,2,3,4],W=window.innerHeight,ae=window.innerWidth,tt=[10,25,40,55,70,85],nt=[10,25,40,55,70,85],rt=[.25,.3,.35,.4,.45,.5],ot=[0,.5,1,1.5,2],it=[15,20,25,30,35];function ct(){const s=ie(),a=s.clouds??"cloud",t=s.cloudsAnimationType??"flow",n=s.backgroundColor,r=st(a),o=m.useMemo(()=>({xs:C.sampleSize(tt,5),ys:C.sampleSize(nt,5),scales:C.sampleSize(rt,5),delays:C.sampleSize(ot,5),durations:C.sampleSize(it,5)}),[]);return e.jsx("div",{className:_("cloud-background",`cloud-background--${a}`),style:n?{backgroundColor:n}:{},children:at.map(i=>e.jsx(N.div,{...lt(t,i,o),children:e.jsx(r,{index:i,type:a})},i))})}const lt=(s,a,t)=>{const n=t.scales[a],r=t.durations[a],o=t.delays[a],i=t.xs[a]*ae/100,c=t.ys[a]*W/100,u=ae/5-300,h=W/2;return s==="falling"?{initial:{x:i,y:-W,scale:n},animate:{y:W+300},transition:{ease:"linear",delay:o,duration:r,repeat:Number.POSITIVE_INFINITY,repeatType:"loop",type:"tween"}}:s==="rising"?{initial:{x:i,y:W+300,scale:n},animate:{y:-300},transition:{ease:"linear",delay:o,duration:r,repeat:Number.POSITIVE_INFINITY,repeatType:"loop",type:"tween"}}:s==="orbit"?{initial:{rotate:0,x:u,y:h,scale:n},animate:{rotate:-360},transition:{ease:"linear",delay:o,duration:r,repeat:Number.POSITIVE_INFINITY,repeatType:"loop",type:"tween"}}:{initial:{x:-ae,y:c,scale:n},animate:{x:ae+300},transition:{ease:"linear",delay:o,duration:r,repeat:Number.POSITIVE_INFINITY,repeatType:"loop",type:"tween"}}},dt=N(T.Title);function ut({setStep:s}){const{isAuthenticated:a}=z(),{isPending:t,mutate:n,isError:r,error:o}=X({mutationKey:["sign-in-anon"],mutationFn:async()=>xs(),onSuccess:()=>s(1)});return m.useEffect(()=>{a&&s(1)},[a,s]),e.jsxs(e.Fragment,{children:[e.jsx(dt,{level:2,className:"lobby-step__title",layoutId:"lobby-step-title",children:e.jsx(d,{pt:"Bem-vindo!",en:"Welcome"})}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(ca,{onSuccess:()=>s(1),block:!0,size:"large"}),r&&e.jsx(ce,{message:"Error",description:JSON.stringify(o),type:"error",showIcon:!0}),e.jsx(Ce,{children:e.jsx(d,{pt:"ou",en:"or"})}),e.jsx(j,{type:"primary",block:!0,disabled:a,onClick:()=>n(),loading:t,children:e.jsx(d,{pt:"Entrar como visitante",en:"Join as a Guest"})})]})]})}function mt(s,a,t,n){const{gameId:r,gameName:o}=P(),[,i]=S("userId"),[,c]=S("username"),[,u]=S("userAvatarId"),[h]=k("volume"),{language:l,translate:p}=A(),{notification:E}=U.useApp();return X({mutationKey:["add-player"],mutationFn:async()=>await He.run({action:Y.JOIN_GAME,gameId:r,gameName:o,playerName:s,playerAvatarId:a,isGuest:t}),onSuccess:g=>{const x=g.data;i(x.id),c(x.name),u(x.avatarId),localStorage.setItem(ue("username"),x.name),localStorage.setItem(ue("avatarId"),x.avatarId),localStorage.setItem(ue("gameId"),r),h&&te(Fs(s??p("vei","babe")),l,h),n()},onError:g=>{E.error({message:p("Vixi, o aplicativo encontrou um erro ao tentar te adicionar como jogador","Oops, the application failed when trying to add you as a player"),description:JSON.stringify(g.message),placement:"bottomLeft"}),console.error(g)}})}function pt({players:s,setSelectedAvatar:a,selectedAvatar:t,userId:n}){const[r,o]=Ee(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lobby-step__avatar-selection",children:e.jsx(js,{arrow:!0,placement:"right",content:e.jsx(ht,{players:s,setSelectedAvatar:a,selectedAvatar:t,userId:n}),title:e.jsx(d,{pt:"Escolha seu avatar",en:"Choose your avatar"}),trigger:"click",open:r,onOpenChange:o,children:e.jsxs(N.svg,{viewBox:"0 0 100 100",className:"lobby-avatar",layoutId:"avatar",children:[e.jsx("use",{href:`${le}#avatar-${t}`}),e.jsx("title",{children:e.jsx(V,{children:F[t].description})})]})})}),e.jsx("div",{className:"lobby-step__description",children:e.jsx("small",{children:e.jsx(V,{children:F[t].description})})}),e.jsx(j,{type:"link",onClick:o,block:!0,children:e.jsx(d,{pt:"Trocar avatar",en:"Change avatar"})})]})}function ht({players:s,setSelectedAvatar:a,selectedAvatar:t,userId:n}){const r=m.useMemo(()=>Object.values(s).reduce((o,{name:i,avatarId:c,id:u})=>(u!==n&&(o[c]=i),o),{}),[s,n]);return e.jsx("div",{className:"avatar-selection-options",children:We.map(o=>{const i=F[o],c=!!r[o];return e.jsx(O,{title:c?e.jsx(d,{pt:`Usado por ${r[o]}`,en:`Used by ${r[o]}`}):e.jsx(V,{children:i.description}),children:e.jsx(Ye,{onClick:()=>a(o),disabled:c,className:_("avatar-selection-options__avatar",o===t&&"avatar-selection-options__avatar--selected",c&&"avatar-selection-options__avatar--used"),children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"avatar-selection-options__avatar-svg",children:[e.jsx("use",{href:`${le}#avatar-${o}`}),e.jsx("title",{children:e.jsx(V,{children:i.description})})]})})},o)})})}function Et({hasImages:s}){const[a,t]=k("blurEnabled"),[n,r]=k("volume"),o=c=>{t(c)},i=c=>{r(c?.5:0)};return e.jsxs(q,{className:"lobby-step__settings",split:e.jsx(Ce,{type:"vertical"}),children:[e.jsxs("div",{className:"lobby-step__settings-entry",children:[e.jsxs("div",{className:"lobby-step__switch-label",children:[e.jsx(d,{pt:"Som",en:"Sound"}),e.jsx(O,{title:e.jsx(d,{pt:"Alguns jogos tocam sons ou falas. Você pode mudar essa configuração durante o jogo.",en:"A few games will play sound effects or speech. You may change this setting during the game."}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:n>0,onClick:i})]}),e.jsxs("div",{className:"lobby-step__settings-entry",children:[e.jsxs("div",{className:"lobby-step__switch-label",children:[e.jsx(d,{pt:"Efeitos",en:"Effects"}),e.jsx(O,{title:e.jsx(d,{pt:"Alguns jogos tocam sons ou falas. Você pode mudar essa configuração durante o jogo.",en:"A few games will play sound effects or speech. You may change this setting during the game."}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",disabled:!0})]}),e.jsxs("div",{className:"lobby-step__settings-entry",children:[e.jsxs("div",{className:"lobby-step__switch-label",children:[e.jsx(d,{pt:"Credo",en:"Blur Button"}),e.jsx(O,{title:e.jsx(d,{pt:"Adiciona um botão em todas Cartas-imagem para embaça-las caso você tenha alguma fobia. Você pode mudar essa configuração durante o jogo",en:"Adds a button to every Image Card to blur them in case you have any phobia. You may change this setting during the game"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:a,onClick:o,disabled:!s})]})]})}function gt({avatarsIds:s,setSelectedAvatar:a}){return e.jsxs("div",{className:"lobby-usual-avatar-selection",children:[e.jsx("div",{className:"lobby-usual-avatar-selection__title",children:e.jsx("small",{children:e.jsx(d,{pt:"Seus avatars mais usados",en:"Frequently used avatars"})})}),e.jsx("ul",{className:"lobby-usual-avatar-selection__list",children:s.map(t=>e.jsx(Ye,{onClick:()=>a(t),children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"lobby-usual-avatar-selection__avatar",children:[e.jsx("use",{href:`${le}#avatar-${t}`}),e.jsx("title",{children:e.jsx(V,{children:F[t].description})})]})},t))})]})}const ft=N(T.Title),xt=void 0;function jt({players:s,setStep:a}){var I,y;const{currentUser:t,isGuest:n}=z(),r=J(),{translate:o}=A(),[i,c]=m.useState(((I=t==null?void 0:t.avatars)==null?void 0:I[0])??Ke(We)),[u,h]=m.useState(((t==null?void 0:t.names)??[]).at(-1)??""),[l]=re("username",""),[p]=re("avatarId","");m.useEffect(()=>{n&&(l&&c(l),p&&h(p??""))},[n]);const{isPending:E,mutate:f}=mt(u,i,n,()=>a(2)),g=!!((y=t.games)!=null&&y[r.gameName]),x=((t==null?void 0:t.names)??[]).map(M=>({value:M}));return e.jsxs(e.Fragment,{children:[e.jsx(ft,{level:2,className:"lobby-step__title",layoutId:"lobby-step-title",children:e.jsx(d,{pt:"Adicione seus dados",en:"Add your info"})}),g&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(ce,{type:"info",message:e.jsx(d,{pt:"Você jogou esse jogo anteriormente",en:"You played this game before"}),className:"margin"})}),e.jsx(pt,{players:s,setSelectedAvatar:c,selectedAvatar:i,userId:t.id}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(t==null?void 0:t.avatars.length)>0&&e.jsx(gt,{avatarsIds:t.avatars,setSelectedAvatar:c}),e.jsx(de,{className:"lobby-step__name-input",options:x,onChange:M=>h(M.trim()),onSelect:M=>h(M.trim()),placeholder:o("Digite seu nome","Type your name"),maxLength:10,value:u||xt}),e.jsx(Et,{hasImages:r.tags.includes("images")}),e.jsx(j,{block:!0,loading:E,disabled:!u||!i,type:"primary",onClick:()=>f(),children:e.jsx(d,{pt:"Entrar",en:"Enter"})})]})]})}function oe({icon:s,ghost:a=!0,className:t="",...n}){return e.jsx(Ss,{icon:s??e.jsx(Ze,{}),ghost:a,className:_("host-button",t),...n})}function xn({duration:s=10,onExpire:a,hideTimer:t,children:n,...r}){const{timeLeft:o}=Q({duration:s,autoStart:!0,onExpire:a,disabled:t});return e.jsxs(oe,{...r,children:[n,!t&&e.jsx("span",{className:"host-button-timer",children:o})]})}function Le(){const{createdBy:s}=P(),[a]=S("userId");return s===a}const os=({children:s,label:a,className:t="",...n})=>Le()?e.jsxs("fieldset",{className:_("host-only-container",t),children:[e.jsxs("legend",{className:"host-only-container__legend",children:[e.jsx(Ze,{})," ",a??"Host Controls"]}),e.jsx(q,{...n,children:s})]}):e.jsx(e.Fragment,{});function St({round:s}){return!s||s.current===s.total||s.forceLastRound?e.jsx(d,{pt:"Tela de Game Over",en:"Game Over Screen"}):e.jsx(d,{pt:"Próxima rodada",en:"Next Round"})}function Nt({round:s,autoTriggerTime:a=30,children:t,withWaitingTimeBar:n}){const r=Le(),{translate:o}=A(),{isKeyLoading:i}=$(),c=i("go-to-next-phase"),u=es({actionName:"go-to-next-phase",successMessage:o("Funcionou, próxima fase!","It worked, next phase!"),errorMessage:o("Vixi, o aplicativo encontrou um erro ao tentar ir para a próxima fase","The application found an error while trying to go to the next phase")}),h=()=>u({action:G.GO_TO_NEXT_PHASE}),l=!!a,{timeLeft:p,isRunning:E,pause:f,resume:g}=Q({autoStart:a>0,duration:a,onExpire:h,disabled:!r||!l});return m.useEffect(()=>(c&&f(),()=>f()),[c]),e.jsxs(e.Fragment,{children:[n&&e.jsx(Ja,{duration:a,timeLeft:p}),e.jsxs(os,{label:"Host Action",className:_("host-only-container--float",B("slideInUp")),children:[e.jsx(O,{title:"Pause",children:e.jsx(oe,{icon:E?e.jsx(Ga,{}):e.jsx(ka,{}),onClick:E?f:g,disabled:c})}),e.jsx(oe,{disabled:c,onClick:h,icon:l&&e.jsx("span",{className:_("host-button-timer",!E&&B("flash",{speed:"slow",infinite:!0})),children:p}),children:t??e.jsx(St,{round:s})})]})]})}const It=N(T.Title),_t=N(T.Paragraph);function At({players:s}){const{message:a,notification:t}=U.useApp(),{gameId:n,gameName:r}=P(),{translate:o}=A(),{isLoading:i,setLoader:c}=$(),u=P(),[h]=S("username"),[l]=S("userAvatarId"),{mutate:p,isPending:E}=X({mutationKey:["lock-game"],mutationFn:async()=>(c("lock-game",!0),await Be.run({action:G.LOCK_GAME,gameId:n,gameName:r})),onSuccess:g=>{g.data.isLocked&&a.success(o("Jogo trancado e iniciado com sucesso!","Game locked and initialized successfully"))},onError:g=>{t.error({message:o("Vixi, o aplicativo encontrou um erro ao tentar trancar e iniciar o jogo","Oops, the application found an error while trying to lock and start the game"),description:JSON.stringify(g.message),placement:"bottomLeft"}),console.error(g)},onSettled:()=>{c("lock-game",!1)}});m.useEffect(()=>(c("lock-game",E),()=>{c("lock-game",!1)}),[E]);const f=Object.keys(s).length;return e.jsxs(e.Fragment,{children:[e.jsx(It,{level:2,className:"lobby-step__title",layoutId:"lobby-step-title",children:e.jsx(d,{pt:"Pronto!",en:"Ready!"})}),e.jsxs(Ns,{vertical:!0,children:[e.jsx(N.svg,{viewBox:"0 0 100 100",className:"lobby-avatar",layoutId:"avatar",children:e.jsx("use",{href:`${le}#avatar-${l}`})}),e.jsx("div",{className:"lobby-step__description",children:e.jsxs("small",{children:[h||o("Fulano","Unknown"),","," ",e.jsx(V,{children:F[l].description})]})})]}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(_t,{className:"lobby-heading",children:e.jsx(d,{pt:"Aguarde os outros jogadores entrarem.",en:"Please, wait while other players join..."})}),e.jsxs(os,{className:"lobby-waiting__lock-button",direction:"vertical",children:[e.jsxs(T.Text,{className:"center padding",children:[e.jsx(d,{pt:"Jogadores necessários",en:"Players needed"}),": ",f,"/",u.min]}),e.jsx(oe,{onClick:()=>p(),disabled:i||f<u.min,loading:i,block:!0,children:e.jsx(d,{pt:"Trancar e Iniciar Jogo",en:"Lock and Start Game"})})]})]})]})}function Ot({players:s,orientation:a}){const t=m.useMemo(()=>C.orderBy(Object.values(s),["updatedAt","name"],["asc"]),[s]);return e.jsx("div",{className:_("joined-players",a==="horizontal"&&"joined-players--horizontal"),children:t.map((n,r)=>e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:r*.25},children:e.jsxs(N.div,{layoutId:`player-${n.id}`,className:"joined-players__player",animate:{y:[0,5,0],filter:["drop-shadow(0px 10px 4px rgba(0, 0, 0, 0.1))","drop-shadow(0px 20px 4px rgba(0, 0, 0, 0.05))","drop-shadow(0px 10px 4px rgba(0, 0, 0, 0.1))"],transition:{duration:C.sample([6,6.2,7,7.5,8]),ease:"easeInOut",repeat:Number.POSITIVE_INFINITY}},children:[e.jsx(Z,{id:n==null?void 0:n.avatarId,size:"large"}),e.jsx("div",{className:"joined-players__avatar-name",children:e.jsx(d,{pt:"Fulano",en:"John Doe",custom:n==null?void 0:n.name})})]})},n.id))})}function Tt(){const s=J(),{language:a}=A();return e.jsxs(N.div,{className:"lobby-step__rules",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0},transition:{delay:.25},children:[e.jsx(T.Title,{level:4,style:{marginTop:0},children:e.jsx(d,{pt:"Revise as regras",en:"Review the rules"})}),e.jsx(Ys,{wrap:!0,size:[1,10],style:{display:"flex"},gameCode:s.gameCode,tags:s.tags}),e.jsx(he.PreviewGroup,{fallback:`${D.RULES}no-rules.jpg`,preview:{countRender:(t,n)=>e.jsxs(q,{direction:"vertical",size:"small",className:"text-center",children:[e.jsx("span",{children:s.rules[a][t]}),e.jsxs("span",{children:[t,"/",n]})]})},children:e.jsx("ul",{className:"lobby-step__rule-list",children:s.rules[a].map((t,n)=>e.jsxs(N.li,{className:"lobby-step__rule",...Is("fadeIn",{delay:1+n*.1}),children:[n>0&&e.jsx(he,{src:`${D.RULES}game-rule-${s.gameName}-${n}.jpg`,width:96,className:"border-radius",fallback:`${D.RULES}no-rules.jpg`}),e.jsx(T.Paragraph,{style:{marginBottom:0},children:t})]},t))})})]})}const bt=N(T.Paragraph);function yt({players:s,meta:a}){const{step:t,setStep:n}=Qa(),{currentUser:r,isAuthenticated:o}=z(),[,i]=S("userId"),[,c]=S("username"),[,u]=S("userAvatarId"),[h]=re("username",""),[l]=re("avatarId",""),p=J(),E=s==null?void 0:s[r.id];return m.useEffect(()=>{E?(n(2),i(E.id),c(E.name),u(E.avatarId)):o?(n(1),_s()):(n(0),c(h??""),u(l??""))},[E,n,i,c,u,o,h,l]),e.jsxs(rs,{phase:"LOBBY",allowedPhase:ts.DEFAULT.LOBBY,className:"lobby",children:[e.jsxs(As,{children:[e.jsxs(N.div,{className:"lobby-step",layout:!0,children:[e.jsxs(N.div,{className:"lobby-step__card",children:[e.jsx(ta,{width:340,title:p==null?void 0:p.title,gameName:p==null?void 0:p.gameName,className:"lobby-step__banner"}),e.jsxs("div",{className:"lobby-step__content",children:[e.jsx(bt,{className:"lobby-step__summary italic",layoutId:"lobby-step-summary",children:e.jsx(V,{children:p.summary})}),a.isLocked?e.jsxs(e.Fragment,{children:[e.jsx(T.Title,{className:"lobby-step__title",children:e.jsx(d,{pt:"Esse jogo está trancado",en:"This session is locked"})}),e.jsx(ce,{type:"warning",showIcon:!0,message:e.jsx(d,{pt:"O jogo já foi iniciado e novos jogadores não podem ser adicionados",en:"The game has started and new players cannot be added at this time"})})]}):e.jsxs(e.Fragment,{children:[t===0&&e.jsx(ut,{setStep:n}),t===1&&e.jsx(jt,{players:s,setStep:n}),t===2&&e.jsx(At,{players:s})]})]})]}),e.jsxs("div",{className:"lobby-step__waiting",children:[t===2&&e.jsx(Tt,{}),e.jsx(Ot,{players:s,orientation:t===1?"vertical":"horizontal"})]})]}),e.jsx(ss,{state:{phase:"LOBBY",round:{current:0,total:0,forceLastRound:!1},players:{}},players:s})]}),e.jsx(ct,{})]})}const Rt=(s,a=1e3)=>{let t;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{s.apply(void 0,n)},a)}};function pe({actionName:s,onBeforeCall:a=()=>{},onAfterCall:t=()=>{},onError:n=()=>{},onSuccess:r=()=>{},successMessage:o="API call was successful",errorMessage:i="API call has failed"}){const{message:c,notification:u}=U.useApp(),{setLoader:h}=$(),{gameId:l,gameName:p}=P(),[E]=S("userId"),f=X({mutationKey:[s],mutationFn:g=>He.run({gameId:l,gameName:p,playerId:E,...g}),onMutate:async()=>{h(s,!0),await a()},onSuccess:async()=>{await r(),c.success(o)},onError:g=>{u.error({message:i,description:JSON.stringify(g==null?void 0:g.message),placement:"bottomLeft"}),console.error(g),n()},onSettled:async()=>{await t(),h(s,!1)}});return Rt(f.mutate)}function vt(s,a=[],t){Le(),S("userId");const[n,r]=m.useState(!1),o=t??Ke([3,4,4,5,6]);return Q({duration:o,onExpire:()=>{},disabled:n})}const Ct=3*60*1e3;function is(s,a){const[t]=S("userId"),[n,r]=S("user"),[o,i]=m.useState(!1);return m.useEffect(()=>{if(t===me){r({...Os,id:me,ready:!0});return}t&&(s!=null&&s[t])&&r(s==null?void 0:s[t])},[s,t,r]),m.useEffect(()=>{if(t===me){i(!1);return}if(t&&(n==null?void 0:n.ready)===!1){i(!1);return}if(!(a!=null&&a.updatedAt)){i((n==null?void 0:n.ready)??!0);return}if(t&&(n==null?void 0:n.updatedAt)<(a==null?void 0:a.updatedAt)){i(!1);return}i(!0)},[t,n==null?void 0:n.ready,n==null?void 0:n.updatedAt,a==null?void 0:a.updatedAt]),{...n,isReady:o,online:n.updatedAt?Date.now()-n.updatedAt<Ct:!1}}function cs({players:s}){return Ts(s)?e.jsx(Nt,{round:{current:-1,total:10,forceLastRound:!1},autoTriggerTime:20,children:e.jsx(d,{pt:"Continuar",en:"Next"})}):e.jsx(e.Fragment,{})}function jn({players:s}){var x;const{isLoading:a}=$(),t=J(),{language:n,translate:r}=A(),o=is(s),[i]=k("volume"),[,c]=S("isAdminEnabled");$e(()=>{c(!0)});const u=Qs(),h=bs();m.useEffect(()=>{h.invalidateQueries({queryKey:["meta",u]})},[u]);const l=r("Vixi, o aplicativo encontrou um erro ao tentar continuar","Oh no! The application found an error when trying to continue"),p=pe({actionName:"be-ready",successMessage:r("Pronto! Aguarde os outros jogadores estarem prontos","Done! Now wait for the other players"),errorMessage:l,onSuccess:()=>{te(Bs(o.name),n,i)}}),E=pe({actionName:"be-ready",successMessage:r("Pronto! Aguarde os outros jogadores estarem prontos","Done! Now wait for the other players"),errorMessage:l,onSuccess:()=>{te($s(o.name),n,i)}}),f=pe({actionName:"be-ready",successMessage:r("Vixi, se fudeu então, porque o jogo vai começar!","Sorry, you are screwed because the game is starting anyway!"),errorMessage:l,onSuccess:()=>{te(zs(o.name),n,i)}});if(vt(()=>p({action:Y.MAKE_ME_READY}),[],2),!(t!=null&&t.gameName))return e.jsx(ze,{});const g=(x=t.appearance)==null?void 0:x.backgroundColor;return e.jsxs(ys.Content,{className:"phase-rules",style:g?{backgroundColor:g}:{},children:[e.jsx(as,{children:e.jsx(d,{pt:"Regras do Jogo",en:"Game Rules"})}),e.jsx(Ks,{info:t,className:"phase-rules__carousel",ruleClassName:"phase-rules__rule",actionsClassName:"phase-rules__actions"}),e.jsxs(q,{className:"phase-rules__actions",wrap:!0,children:[e.jsx(j,{type:"primary",icon:o.isReady?e.jsx(ne,{}):e.jsx(Ha,{}),disabled:a||o.isReady,onClick:()=>p({action:Y.MAKE_ME_READY}),loading:a,children:e.jsx(d,{pt:"Entendi tudo e estou pronto para jogar!",en:"I understood everything and I'm ready to play!"})}),e.jsx(j,{icon:o.isReady?e.jsx(ne,{}):e.jsx(wa,{}),disabled:a||o.isReady,onClick:()=>E({action:Y.MAKE_ME_READY}),loading:a,children:e.jsx(d,{pt:"Não entendi nada, mas vamos lá!",en:"I don't get it but let's go!"})}),e.jsx(j,{type:"primary",danger:!0,icon:o.isReady?e.jsx(ne,{}):e.jsx(Fa,{}),disabled:a||o.isReady,onClick:()=>f({action:Y.MAKE_ME_READY}),loading:a,children:e.jsx(d,{pt:"Quê?",en:"What?"})})]}),e.jsx(cs,{players:s})]})}function Sn({state:s}){return e.jsx(rs,{phase:s==null?void 0:s.phase,allowedPhase:ts.DEFAULT.SETUP,className:"setup",children:e.jsxs("div",{className:"phase-announcement",children:[e.jsx(as,{colorScheme:"light",children:e.jsx(d,{pt:"Preparando o jogo...",en:"Setting up..."})}),e.jsx(Xs,{className:"phase-announcement__icon"}),e.jsx(Je,{children:e.jsx(d,{pt:"Aguarde um momento",en:"Just a moment"})})]})})}function Lt(s,a=!1){const t=Rs(Cs,s),n=qe({queryKey:["firestore","doc",s],queryFn:async()=>(await Ls(t)).data()});return m.useEffect(()=>{if(a){const r=vs(t,()=>{n.refetch()});return()=>r()}},[a]),n}function wt(s,a){const{notification:t}=U.useApp(),n=`games/${a}/${s}/state`,{isLoading:r,isRefetching:o,isError:i,error:c,data:u}=Lt(n,!0);i&&(t.error({message:"The application found an error while trying to update the game state",description:JSON.stringify(c),placement:"bottomLeft"}),console.error(c));const h=u??{};return m.useEffect(()=>{(r||o)&&console.count("Refreshing state...")},[r,o]),h}function Pt(){const{notification:s}=U.useApp(),a=Re(),{translate:t}=A(),n=ha(9e5);m.useEffect(()=>{n&&s.warning({message:t("Página parada por um longo tempo, redirecionando...","The page has been idle for too long, redirecting..."),duration:5,onClose:()=>a("/"),placement:"top"})},[n,a,t,s])}function Ut({players:s}){const[a]=S("showPlayersBar");return a?e.jsx("div",{className:_("players-status-bar",B("slideInRight")),children:e.jsx("ul",{className:"players-status-bar__list",children:ws(s).map(t=>e.jsxs("li",{className:"players-status-bar__player",children:[e.jsx(O,{title:t.name,placement:"left",trigger:"hover",children:e.jsx(ve,{dot:!0,color:t.ready?"green":"gray",children:e.jsx(Z,{id:t.avatarId,alt:t.name,size:"small",className:_(!t.ready&&"players-status-bar__avatar-not-ready")})})}),t.ready&&e.jsx("div",{className:"players-status-bar__ready",children:e.jsx("div",{className:"players-status-bar__ready-speech",children:e.jsx(d,{pt:"Pronto!",en:"I'm ready!"})})})]},`players-status-bar-${t.id}`))})}):e.jsx(e.Fragment,{})}function Mt({round:s,groupScore:a}){return e.jsxs("ul",{className:"game-info-drawer__meta",children:[e.jsxs("li",{children:[e.jsx("div",{className:"game-info-drawer__label-inline",children:e.jsx(d,{pt:"Rodada:",en:"Round:"})}),e.jsx(K,{className:"game-info-drawer__round",size:"small",children:s.current}),e.jsx("span",{className:"game-info-drawer__inline-separator",children:e.jsx(d,{pt:"de",en:"out of"})}),e.jsx(K,{className:"game-info-drawer__round",size:"small",children:s.total})]}),!!a&&e.jsxs("li",{children:[e.jsx("div",{className:"game-info-drawer__label-inline",children:e.jsx(d,{pt:"Pontos:",en:"Points:"})}),e.jsx(K,{className:"game-info-drawer__round",size:"default",style:{backgroundColor:"gold",color:"black"},children:a})]})]})}function Gt({players:s}){const{language:a}=A(),t=is(s),n=m.useMemo(()=>C.orderBy(Object.values(s),["score","name"],["desc","asc"]),[s]);return e.jsx("ul",{children:n.map((r,o)=>e.jsxs("div",{className:"game-info-drawer__ranked-player",children:[o+1,"."," ",e.jsx(ve,{count:r.score,className:"game-info-drawer__avatar-with-badge",children:e.jsx(Z,{id:r.avatarId,shape:"square"})}),r.name,", ",F[r.avatarId].description[a],r.id===t.id&&e.jsx(qs,{color:F[r.avatarId].color,className:"game-info-drawer__avatar-tag",children:e.jsx(d,{pt:"VOCÊ",en:"YOU"})})]},`ranked-${r.name}`))})}function Dt(){const{message:s}=U.useApp(),{blurCard:a}=Ds(),t=oa("resources"),{isLoading:n,isError:r,data:o}=qe({queryKey:["credo"],queryFn:async()=>await(await fetch(`${t}/images-credo.json`)).json()}),[i,c]=m.useState({aliens:!1,cockroaches:!1,scorpions:!1,snakes:!1,spiders:!1}),u=(l,p)=>{c(E=>({...E,[l]:p}))},h=()=>{const l=[];Object.keys(i).forEach(p=>{i[p]&&o[p]&&l.push(o[p])}),l.flat().forEach(a),s.success(e.jsx(d,{pt:"Cartas 'credadas' com sucesso",en:"Cards blurred successfully"}))};return n?e.jsx("div",{className:"blur-options",children:e.jsx(ia,{})}):r?e.jsx("div",{className:"blur-options",children:e.jsx(ce,{type:"error",message:e.jsx(d,{pt:"Servidor falhou ao tentar baixar a lista de cartas credo",en:"Server failed while trying to fetch blur cards list"})})}):e.jsxs("div",{className:"blur-options",children:[e.jsxs("p",{children:[e.jsx(d,{pt:"Você pode embaçar cartas automaticamente por tema",en:"You may blur cards automatically by theme"}),":"]}),e.jsx(H,{checked:i.aliens,disabled:!o.aliens,onChange:l=>u("aliens",l.target.checked),className:"blur-options__checkbox",children:e.jsx(d,{pt:"alienígenas",en:"aliens"})}),e.jsx(H,{checked:i.cockroaches,disabled:!o.cockroaches,onChange:l=>u("cockroaches",l.target.checked),className:"blur-options__checkbox",children:e.jsx(d,{pt:"baratas",en:"cockroaches"})}),e.jsx(H,{checked:i.scorpions,disabled:!o.scorpions,onChange:l=>u("scorpions",l.target.checked),className:"blur-options__checkbox",children:e.jsx(d,{pt:"escorpiões",en:"scorpions"})}),e.jsx(H,{checked:i.snakes,disabled:!o.snakes,onChange:l=>u("snakes",l.target.checked),className:"blur-options__checkbox",children:e.jsx(d,{pt:"cobras",en:"snakes"})}),e.jsx(H,{checked:i.spiders,disabled:!o.spiders,onChange:l=>u("spiders",l.target.checked),className:"blur-options__checkbox",children:e.jsx(d,{pt:"aranhas",en:"spiders"})}),e.jsx(j,{type:"primary",ghost:!0,size:"small",onClick:h,children:e.jsx(d,{pt:"Credar selecionados",en:"Blur selected"})})]})}function kt(){const{isAdmin:s}=z(),[a,t]=S("isAdminEnabled"),{isDebugEnabled:n,toggleDevFeatures:r}=ra(),[o,i]=k("blurEnabled"),[c,u]=k("volume"),h=p=>{i(p)},l=p=>{u(p?.5:0)};return e.jsxs("div",{className:"game-info-drawer__section-settings",children:[e.jsxs("div",{className:"game-info-drawer__settings-entry",children:[e.jsxs("div",{className:"game-info-drawer__switch-label",children:[e.jsx(d,{pt:"Idioma",en:"Language"})," ",e.jsx(O,{title:e.jsx(d,{pt:"Mudar língua do aplicativo, as cartas do jogo continuarão em sua língua original",en:"Change app language, the game cards will remain in its original language"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(Ps,{})]}),e.jsxs("div",{className:"game-info-drawer__settings-entry",children:[e.jsxs("div",{className:"game-info-drawer__switch-label",children:[e.jsx(d,{pt:"Som",en:"Sound"}),e.jsx(O,{title:e.jsx(d,{pt:"Muda ou desmuda sons no aplicativo",en:"Mute/Unmute sounds in the app"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:c>0,onClick:l})]}),e.jsxs("div",{className:"game-info-drawer__settings-entry",children:[e.jsxs("div",{className:"game-info-drawer__switch-label",children:[e.jsx(d,{pt:"Botão Credo",en:"Blur Button"}),e.jsx(O,{title:e.jsx(d,{pt:"Adiciona um botão em todas Cartas-imagem para embaça-las caso você tenha alguma fobia",en:"Adds a button to every Image Card to blur them in case you have any phobia"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:o,onClick:h})]}),o&&e.jsx("div",{className:"game-info-drawer__settings-entry",children:e.jsx(Dt,{})}),e.jsxs("div",{className:"game-info-drawer__settings-entry",children:[e.jsxs("div",{className:"game-info-drawer__switch-label",children:["Debug",e.jsx(O,{title:e.jsx(d,{pt:"Ativa coisas para ajudar o desenvolvedor a encontrar error. Use apenas quando instruído",en:"Activate debug mode. Only turn on when instructed"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:n,onClick:r})]}),s&&e.jsxs("div",{className:"game-info-drawer__settings-entry",children:[e.jsxs("div",{className:"game-info-drawer__switch-label",children:["Admin",e.jsx(O,{title:e.jsx(d,{pt:"Ativa recursos para o administrador",en:"Activate admin mode"}),children:e.jsx(j,{type:"text",shape:"circle",icon:e.jsx(L,{}),size:"small"})})]}),e.jsx(v,{checkedChildren:"on",unCheckedChildren:"off",checked:a,onClick:()=>t(!a)})]})]})}function Vt({players:s,state:a,userId:t}){var f,g,x;const n=J(),{language:r}=A(),[o,i]=Ee(!1),[c,u]=Ee(!1),h=Re(),{isAdmin:l,isAuthenticated:p,isGuest:E}=z();return a.phase==="LOBBY"?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"game-info-drawer-container",children:[e.jsxs("button",{type:"button",className:"game-info-drawer-button",onClick:i,children:[e.jsxs("span",{className:"game-info-drawer-button__game-title",children:[((f=n.title)==null?void 0:f[r])??"?",e.jsxs(Hs,{devOnly:!0,children:["(",(g=s==null?void 0:s[t])==null?void 0:g.name,")"]})]}),e.jsx(K,{icon:e.jsx(De,{}),size:"small"}),e.jsx("div",{className:"game-info-drawer-button__player-status-bar",children:e.jsx(Ut,{players:s})})]}),e.jsxs(ge,{title:e.jsx(na,{title:n==null?void 0:n.title,gameName:n.gameName,preview:!1,className:"round-corners"}),placement:"right",closable:!1,onClose:i,open:o,children:[p&&!E&&e.jsxs("p",{children:[e.jsx(ve,{size:"default",dot:!0,color:"green",children:e.jsx(Z,{id:(x=s==null?void 0:s[t])==null?void 0:x.avatarId,shape:"square",size:"small"})})," ",e.jsx(d,{pt:"Você está logado!",en:"You are logged in!"})]}),e.jsxs(q,{children:[e.jsx(j,{type:"default",onClick:()=>u(!0),icon:e.jsx(De,{}),children:e.jsx(d,{pt:"Configurações",en:"Settings"})}),e.jsx(Js,{gameInfo:n}),e.jsx(ge,{title:e.jsx(d,{pt:"Configurações",en:"Settings"}),width:200,closable:!1,onClose:u,open:c,children:e.jsx(kt,{})}),l&&e.jsx(j,{type:"default",danger:!0,onClick:()=>h("/hub"),icon:e.jsx(Ca,{}),children:"Hub"})]}),e.jsx(Ce,{}),e.jsx(Mt,{round:(a==null?void 0:a.round)||0,groupScore:a==null?void 0:a.groupScore}),e.jsx(Gt,{players:s})]})]})})}function ke({state:s}){const{language:a}=A(),t=Re(),[n,r]=m.useState(null),[o,i]=m.useState(!1),c=()=>{r(!1)},u=s.redirect;if(u){const l=Date.now();if(u.redirectAt-l>72e5)return e.jsx(e.Fragment,{});const p=Us[u.gameName];return e.jsx(e.Fragment,{children:e.jsxs(la,{title:e.jsx(d,{pt:"Você está convidado para uma nova partida",en:"You've been invited to a new session"}),open:n??!0,onCancel:c,onOk:()=>{i(!0),t(`/${u.gameId}`)},okButtonProps:{loading:o},okText:e.jsx(d,{pt:"Quero participar!",en:"Take me there!"}),cancelText:e.jsx(d,{pt:"Cancelar",en:"Cancel"}),children:[e.jsx(he,{alt:p.title[a],src:`${D.BANNERS}${p.gameName}-${a}.jpg`,fallback:`${D.BANNERS}/em-breve-${a}.jpg`,className:"round-corners"}),e.jsx(ye,{children:u.gameId})]})})}return e.jsx(e.Fragment,{})}function Nn({gameCollection:s,getActiveComponent:a}){const t=P(),{language:n}=A(),r=wt(t.gameId,s),[o]=S("userId"),[,i]=k("language"),c=r.players??{};if(Pt(),m.useEffect(()=>{n!==t.language&&i(t.language)},[t.language]),!o||!c[o])return e.jsx(Ue,{gameCollection:s,children:e.jsxs(Ve,{children:[e.jsx(ke,{state:r}),e.jsx(yt,{players:c,meta:t})]})});const u=a(r);return e.jsx(Ms,{children:e.jsx(Ue,{gameCollection:s,children:e.jsxs(Ve,{children:[e.jsx(Vt,{players:c,state:r,userId:o}),e.jsx(ke,{state:r}),e.jsx(u,{players:c,state:r,meta:t}),e.jsx(cs,{players:c}),e.jsx(ss,{state:r,players:c})]})})})}function Ve({children:s}){const a=Ft();return e.jsx(Gs,{theme:{token:a},children:s})}function Ft(){const s=ie();return m.useMemo(()=>{const a={};return s.primaryColor&&(a.colorPrimary=s.primaryColor,a.colorLink=s.primaryColor),s.surfaceColor&&(a.colorBgContainer=s.surfaceColor),a},[s])}const In=m.forwardRef(({children:s,announcement:a,fullWidth:t=!1,fullHeight:n=!1,className:r=""},o)=>e.jsxs("div",{ref:o,className:_("step",t&&"step--full-width",n&&"step--full-height",r),children:[a,s]}));function Bt({players:s,readyText:a,readyTextPlural:t,hideNames:n=!1}){const{readyPlayers:r,notReadyPlayers:o}=Object.values(s).reduce((i,c)=>(c.ready?i.readyPlayers.push(c):i.notReadyPlayers.push(c.name),i),{readyPlayers:[],notReadyPlayers:[]});return r.length===0?e.jsx("span",{}):e.jsxs("div",{className:"ready-player-bar",children:[e.jsxs("div",{className:"ready-player-bar__bar",children:[e.jsx(K.Group,{size:"small",children:r.map(i=>e.jsx(Z,{id:i.avatarId},i.name))}),e.jsxs("span",{className:"ready-player-bar__speech-bubble",children:[e.jsx(T.Text,{children:r.length>1?e.jsx(d,{pt:"Estamos prontos!",en:"We're ready!",custom:t}):e.jsx(d,{pt:"Estou pronto!",en:"I'm ready!",custom:a})}),e.jsx(ua,{className:"ready-player-bar__speech-bubble-icon"})]})]}),!n&&o.length>0&&e.jsxs("span",{className:"ready-player-bar__names",children:[e.jsx(d,{pt:"Esperando",en:"Waiting for"}),": ",o.join(", ")]})]})}function $t({players:s,title:a,instruction:t,children:n,icon:r}){return ns(),e.jsxs("div",{className:"waiting-room",children:[e.jsx(ye,{colorScheme:"light",children:e.jsx(d,{pt:"Pronto!",en:"Done!",custom:a})}),r??e.jsx(Zs,{style:{width:"6rem"}}),e.jsxs("div",{className:"waiting-room__content",children:[e.jsx(Je,{children:t||e.jsx(d,{pt:"Vamos aguardar os outros jogadores!",en:"Please wait for the other players!"})}),n]}),e.jsx(Bt,{players:s})]})}const zt=s=>{switch(s){case"SERVER":return e.jsx(d,{pt:"Aguardando o servidor dar sinal de vida",en:"Waiting for the server to resuscitate"});case"PLAYERS":return e.jsx(d,{pt:"Vamos aguardar enquanto os outros jogadores terminam!",en:"Please wait while other players finish!"});default:return e.jsx(d,{pt:"Aguardando algo acontecer...",en:"Waiting for something..."})}};function _n({children:s,step:a,conditions:t,players:n,waitingRoom:r={}}){const o=Array.isArray(s)?s:[s];return n&&a>=o.length?e.jsx($t,{players:n,title:e.jsx(d,{pt:"Pronto!",en:"Done!"}),instruction:r.instruction??zt(r.type??"PLAYERS"),children:r.content}):o[a]?(t==null?void 0:t[a])??!0?e.jsx(e.Fragment,{children:o[a]}):e.jsx("div",{}):e.jsx(da,{})}export{os as H,fn as P,ne as R,In as S,$t as W,vt as a,as as b,is as c,Qa as d,rs as e,ts as f,_n as g,xn as h,Nn as i,Sn as j,jn as k,yt as l,ns as m,Nt as n,Bt as o,Le as p,oe as q,Fa as r,Ga as s,ka as t,pe as u};
