import{j as e,e as f,a$ as U,T as n,r as y,az as ee,f as S,bH as re,bI as O,aG as L,aL as P,J as ae,bG as se,bj as W,bJ as oe,q as te,B as ne,aI as ie,aY as ce,aW as de,aX as le}from"./index-CKSL2Oo6.js";import{u as F,S as _,a as N,c as C,b as Y,P as T,d as w,e as A,k as me,l as ue,g as he,h as B,i as pe,j as xe}from"./StepSwitcher-CBiXRQp9.js";import{u as R}from"./useWhichPlayerIsThe-B26_bta_.js";import{F as je}from"./FairyTaleIcon-ru2ctBHA.js";import{A as j}from"./AvatarName-CZAh46pr.js";/* empty css                             */import{I as J}from"./ImageCardPreloadHand-b_ou6Nwv.js";import{I as H}from"./Instruction-DF1wPxF_.js";import{r as ge,T as ve}from"./TurnOrder-B5Ux3QCE.js";import{R as ye}from"./RoundAnnouncement-CDsNqJDf.js";import{V as Q}from"./ViewOr-D2rm82D4.js";import{F as be}from"./FloatingHand-CjQAcHWc.js";import{I as z,a as fe}from"./ImageCardHand-Cw4w-PvM.js";import{T as Ie,S as Se}from"./TableIcon-B6yBzaoz.js";import{R as V}from"./RuleInstruction-BdzuuL12.js";import{u as M}from"./useMock-BEDFNZrO.js";import{I}from"./ImageCard-bkgYYAnE.js";import{B as X}from"./BookPages-DOmHe2P_.js";import{I as _e,V as Ne}from"./WritingIcon-C4AzkpWR.js";import{P as h}from"./PointsHighlight-Cqx1q6uR.js";import{C as K}from"./Card-_rLW197d.js";import{I as Oe}from"./ImageCardBack-C4qmHB-o.js";import{A as b}from"./Avatar-DDdPWuVM.js";import{P as q}from"./PopoverRule-Bv2byWTC.js";import{T as Pe}from"./TimedTimerBar-D8WGVAiz.js";import{T as Ce}from"./speech-CqmAxZxy.js";import{I as $}from"./ImageBlurButton-CSj_Szg2.js";import{S as Te}from"./StepRankingWrapper-OzaA_Q-p.js";import{T as we}from"./TrophyIcon-BE7ScyIk.js";import"./GameOver-BHyTQYE6.js";import{G as Ae}from"./GameOverWrapper-8_nXSM8h.js";import{A as Re}from"./Achievements-DXta8Z7S.js";import{a as Ve}from"./achievements-D3bN1bkf.js";import{I as Be}from"./ImageBlurButtonContainer-ClK59aE_.js";import{C as Ee}from"./Container-U1LQeSXW.js";/* empty css                       */import"./useBlurCards-D3ZaeHZ7.js";import"./RulesModal-DlMNhdIN.js";import"./DoubleRightOutlined-CjTCQ3pG.js";import"./PurePanel-CRwM7CCN.js";import"./Game-CP7vFpvj.js";import"./WaitingRoomIcon-BKXqH9Wz.js";import"./AnimatedClockIcon-DM7zoNlE.js";import"./useMutation-D_B7Vfnl.js";import"./index-Bdi3uGfe.js";import"./useBubbleLock-C6uDvWiA.js";import"./index-CQf5PTff.js";import"./Overflow-_JyRjA96.js";import"./useEvent-BFfbDrcc.js";import"./index-C3BZauMc.js";import"./index-DrTTWnBZ.js";import"./GameBanner-mHka2_E9.js";import"./useDevFeatures-Cb6Idozw.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-D7I0RBnj.js";import"./InfoCircleOutlined-Aq5RKLpc.js";import"./index-wxCCf58o.js";import"./SignIn-BcbcbeeW.js";import"./GoogleIcon-qk2_n4kf.js";import"./Loading-D2wGLowI.js";import"./AnimatedLoaderIcon-BaK23vAb.js";import"./LikeFilled-JwMomx_o.js";import"./HandOfCardsIcon-DHZdlJsM.js";import"./UpCircleOutlined-CsCHfb18.js";import"./StarFilled-DTNAAK7x.js";import"./StarFilled-CNctUIhy.js";import"./StarIcon-CtxF96tC.js";import"./MetricHighlight-DBzD29Gf.js";import"./TimerBar-BvCuuDY2.js";import"./progress-CayaoTRB.js";import"./RankingBoard-Dt_8p3AD.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./ArrowRightOutlined-6akbC97L.js";import"./useMergedState-DBp2fCOi.js";import"./TheEndIcon-BChTc1oL.js";import"./Medal-BycRMZrJ.js";import"./QuestionCircleOutlined-aNAmMO78.js";var ke={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M485.6 249.9L198.2 498c-8.3 7.1-8.3 20.8 0 27.9l287.4 248.2c10.7 9.2 26.4.9 26.4-14V263.8c0-14.8-15.7-23.2-26.4-13.9zm320 0L518.2 498a18.6 18.6 0 00-6.2 14c0 5.2 2.1 10.4 6.2 14l287.4 248.2c10.7 9.2 26.4.9 26.4-14V263.8c0-14.8-15.7-23.2-26.4-13.9z"}}]},name:"backward",theme:"filled"};const Le=({size:r="small",className:a="",withDescription:s=!1,uppercase:o=!1})=>{const d="avatar-name";return e.jsxs("span",{className:f(d,o&&`${d}--uppercase`,a),children:[e.jsx(U,{src:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",children:[e.jsx("rect",{width:"100",height:"100",fill:"#7f8693",rx:"50"}),e.jsx("path",{fill:"#fff",d:"M81.86 38.84h-3.44V28A2.65 2.65 0 0076 25.49H52.46V10.42h-4.92v15.07H24A2.65 2.65 0 0021.58 28v10.84h-3.44a2.41 2.41 0 00-2.45 2.46v16.21A2.41 2.41 0 0018.14 60h3.44v15.12A2.65 2.65 0 0024 77.58h52a2.65 2.65 0 002.46-2.46V60h3.44a2.41 2.41 0 002.45-2.46V41.3a2.41 2.41 0 00-2.49-2.46zm-50.12 5.81a7.13 7.13 0 117.12 7.13 7.12 7.12 0 01-7.12-7.13zM60.81 66H39.19v-4.88h21.62zm7.45-21.38a7.13 7.13 0 01-7.12 7.13 7.21 7.21 0 117.12-7.29z"})]}),size:r}),e.jsx("span",{className:"avatar-name__name",children:e.jsx(n,{pt:"Computador",en:"NPC"})}),s&&e.jsx("span",{className:"avatar-name__name",children:", o robô"})]})};function E(){return E=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r},E.apply(this,arguments)}const We=(r,a)=>y.createElement(ee,E({},r,{ref:a,icon:ke})),Fe=y.forwardRef(We),g={STORY:"STORY",CARD_PLAY:"CARD_PLAY",VOTING:"VOTING",RESOLUTION:"RESOLUTION"},G={SUBMIT_STORY:"SUBMIT_STORY",PLAY_CARD:"PLAY_CARD",SUBMIT_VOTE:"SUBMIT_VOTE"};function Ye(r){const{translate:a}=S(),s=F({actionName:"submit-story",onBeforeCall:()=>r(2),onError:()=>r(0),successMessage:a("História submetida com sucesso","Story submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar sua história","Oops, the application found an error while trying to submit your story")});return o=>{s({action:G.SUBMIT_STORY,...o})}}function He(r){const{translate:a}=S(),s=F({actionName:"play-card",onError:()=>r(1),successMessage:a("Carta submetida com sucesso","Card submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application found an error while trying to submit your card")});return o=>{s({action:G.PLAY_CARD,...o})}}function ze(r){const{translate:a}=S(),s=F({actionName:"submit-vote",onError:()=>r(1),successMessage:a("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return o=>{s({action:G.SUBMIT_VOTE,...o})}}function Me({players:r,order:a,activePlayerId:s,reorderByUser:o,title:d,className:t="",size:c}){const i=y.useMemo(()=>o?ge(a,o):a,[o,a]),p=i.length*2;return e.jsx("div",{className:f("table-order",c&&`table-order--${c}`,t),children:e.jsxs("ol",{className:"table-order__players",children:[i.map((m,u)=>{const l=r[m],x=s===m,v=re(l.avatarId);return e.jsxs(y.Fragment,{children:[e.jsx("li",{style:{"--t":p,"--i":u*2},className:f("table-order__player",x&&"table-order__player--active"),children:e.jsx("span",{className:"table-order__icon",style:x?{backgroundColor:v}:void 0,children:e.jsx(j,{player:l,upright:!0})})}),e.jsx("li",{style:{"--t":p,"--i":u*2+1},className:"table-order__chevron",children:e.jsx("span",{className:"table-order__icon",children:e.jsx(Fe,{})})})]},`table-order-${m}`)}),e.jsx("li",{className:"table-order__center",children:e.jsxs("div",{className:"table-order__center-container",children:[e.jsx(Ie,{style:{width:"3rem",transform:"scaleX(-1)"}}),e.jsx("header",{className:"table-order__title",children:e.jsx(n,{en:"Player Order",pt:"Ordem dos Jogadores",custom:d})})]})})]})})}function qe({storyteller:r,user:a,players:s,gameOrder:o,announcement:d}){var t;return e.jsxs(_,{fullWidth:!0,className:"c-story-waiting",announcement:d,children:[e.jsx(N,{wait:!0,children:e.jsx(n,{pt:"Aguarde...",en:"Please wait..."})}),e.jsxs(V,{type:"wait",children:[e.jsx(j,{player:r})," ",e.jsx(n,{pt:"está escrevendo uma história para essa rodada.",en:"is writing a story for this round."}),e.jsx("br",{}),e.jsx(n,{pt:"Enquanto isso, examine suas cartas! Você as usará durante esta rodada.",en:"In the meantime, examine your cards. You're gonna use them this round."})]}),e.jsx(Me,{players:s,activePlayerId:r.id,order:o,size:"small",reorderByUser:r.id}),e.jsx(be,{children:e.jsx(z,{hand:a.hand,sizeRatio:(t=a.hand)==null?void 0:t.length})})]})}const Ge=["avocado","bell pepper","crustaceous","dinner"];function De(r){return{story:O(Ge),cardId:O(r)}}function $e(r){return{cardId:O(r)}}function Ue(r,a){return{vote:O(r.map(s=>s.cardId).filter(s=>a!==s))}}function Je({user:r,onSubmitStory:a,announcement:s}){var u;const{translate:o}=S(),{isLoading:d}=L(),[t,c]=y.useState(""),[i,p]=y.useState(""),m=()=>{i&&t&&a({story:t.trim(),cardId:i})};return M(()=>{a(De(r.hand))},[]),e.jsxs(_,{fullWidth:!0,className:"c-story-writing",announcement:s,children:[e.jsx(N,{children:e.jsx(n,{pt:"Escreva uma história",en:"Tell us a story"})}),e.jsx("div",{className:"c-story-book",children:e.jsx(X,{leftPage:e.jsx("div",{className:"c-story-book__selected-card",children:i&&e.jsx(I,{id:i,cardWidth:175})}),rightPage:e.jsx("div",{className:"c-story-book__instructions",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(n,{pt:"Selecione uma carta abaixo e escreva algo sobre ela. ",en:"Select a card below and write something about it. "}),e.jsx(n,{pt:"Escreva o que você quiser: uma frase, uma palavra única, uma expressão, letra de música. Não há restrições.",en:"Write whatever you want: a sentence, a single word, an expression, a song lyric. There are no restrictions."})]}),e.jsx("li",{children:e.jsx(n,{pt:"Pense em algo que ajudará os outros jogadores a escolher a carta selecionada. Não seja óbvio, se todos escolherem a carta correta você não ganha pontos, e não seja muito vago porque se ninguém acerta, você também fica sem pontos.",en:"You want something that will help players to find the selected card. Don't be too obvious, because if all players guess correctly you get no points. And also don't be too vague, if nobody guesses the card you also get no points."})})]})})})}),e.jsxs(P,{className:"c-input-container",wrap:!0,children:[e.jsx(ae,{placeholder:o("Escreva aqui","Write your clue here"),onChange:l=>c(l.target.value),onPressEnter:m,size:"large"}),e.jsx(se,{disabled:t.length<1||!i,onClick:m,size:"large",children:e.jsx(n,{pt:"Enviar história e carta",en:"Send secret clue and card"})})]}),e.jsx(z,{hand:r.hand,onSelectCard:p,disabledSelectButton:d,sizeRatio:(u=r.hand)==null?void 0:u.length})]})}function Qe({state:r,players:a}){var u;const{step:s,goToNextStep:o,setStep:d}=C(0),t=Y(a,r),[c,i]=R("storytellerId",r,a),p=Ye(d),m=e.jsx(T,{icon:e.jsx(je,{}),title:e.jsx(n,{pt:"Conte-nos uma história",en:"Tell us a story..."}),currentRound:(u=r==null?void 0:r.round)==null?void 0:u.current,type:"overlay",children:e.jsxs(H,{children:[e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Para essa rodada, ",e.jsx(j,{player:c,addressUser:!0,size:"small"})," será o(a) Contador(a) de Histórias."]}),en:e.jsxs(e.Fragment,{children:["For this round, ",e.jsx(j,{player:c,addressUser:!0})," will be the Storyteller."]})}),e.jsx(ve,{players:a,order:r.gameOrder,activePlayerId:r.storytellerId}),e.jsx(J,{hand:t==null?void 0:t.hand})]})});return e.jsx(w,{phase:r==null?void 0:r.phase,allowedPhase:g.STORY,children:e.jsxs(A,{step:s,players:a,children:[e.jsx(ye,{round:r.round,onPressButton:o,time:5}),e.jsxs(Q,{condition:i,children:[e.jsx(Je,{user:t,onSubmitStory:p,announcement:m}),e.jsx(qe,{user:t,storyteller:c,players:a,gameOrder:r.gameOrder,announcement:m})]})]})})}function Xe({players:r,user:a}){const s="c-table-face-down-card";return e.jsx("div",{className:"c-table-face-down",children:Object.values(r).map((o,d)=>{const t=!o.cardId,c=o.id===a.id?"hidden-user":"hidden";return e.jsx(Oe,{cardWidth:150,preview:!1,className:f(s,`${s}--${d}`,t&&`${s}--${c}`)},`card-back-${o.id}`)})})}function Ke({players:r,story:a,user:s,onPlayCard:o,storyteller:d,isUserTheStoryTeller:t,announcement:c}){var u;const{isLoading:i}=L(),p=!!s.cardId,m=l=>{o({cardId:l})};return M(()=>{t||o($e(s.hand))},[s.hand]),e.jsxs(_,{fullWidth:!0,announcement:c,children:[e.jsx(N,{children:e.jsx(K,{header:d.name,className:"c-story-card",randomColor:!0,children:a})}),e.jsx(V,{type:t?"wait":"action",children:e.jsxs(Q,{condition:t,children:[e.jsx(n,{pt:"Agora, cada jogador escolherá uma carta em mão que mais combine com a história que você escreveu.",en:"Now every other player will play a card that best matches the story you wrote."}),e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agora, escolha uma carta que mais combine com a história da rodada.",e.jsx("br",{}),"Você está tentando convencer os outros jogadores a escolherem sua carta ao invés da carta correta."]}),en:e.jsxs(e.Fragment,{children:["Now you select a card that matches the story the best.",e.jsx("br",{}),"You are trying to convince other players that your card is the correct one."]})})]})}),e.jsx(Xe,{players:r,user:s}),e.jsx(z,{hand:s.hand,onSelectCard:p?void 0:m,disabledSelectButton:i||p,sizeRatio:(u=s.hand)==null?void 0:u.length})]})}function Ze({state:r,players:a}){var m;const{step:s,setStep:o}=C(0),d=Y(a,r),[t,c]=R("storytellerId",r,a),i=He(o),p=e.jsx(T,{icon:e.jsx(_e,{}),title:e.jsx(n,{pt:"Selecione uma carta",en:"Play a card..."}),currentRound:(m=r==null?void 0:r.round)==null?void 0:m.current,type:"overlay",children:e.jsx(H,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agora, jogadores verão a história da rodada e selecionarão uma de suas cartas que mais se aproxime da história. Na próxima fase, se algum outro jogador selecionar sua carta, você ganha"," ",e.jsx(h,{children:"1"})," ponto!"]}),en:e.jsxs(e.Fragment,{children:["Now players will see the story for the round and select one of their cards that best match the story. If any other player vote for your card later, you will get"," ",e.jsx(h,{children:"1"})," point."]})})})});return e.jsx(w,{phase:r==null?void 0:r.phase,allowedPhase:g.CARD_PLAY,children:e.jsx(A,{step:s,players:a,children:e.jsx(Ke,{players:a,user:d,story:r.story,onPlayCard:i,storyteller:t,isUserTheStoryTeller:c,announcement:p})})})}function k({isUserTheStoryTeller:r}){return e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[r?"Aguarde enquanto os outros jogadores selecionam as cartas":"Hora de selecionar a carta correta!",e.jsx("br",{}),"Se todos acertarem ou todos errarem, cada jogador ganha ",e.jsx(h,{children:"2"})," pontos, menos o contador de histórias.",e.jsx("br",{}),"Se somente alguns acertarem, cada acertador e contador de histórias recebe"," ",e.jsx(h,{children:"3"})," pontos.",e.jsx("br",{}),"Sua carta (se você não for o contador de histórias) ganha ",e.jsx(h,{children:"1"})," ponto se alguém selecionar."]}),en:e.jsxs(e.Fragment,{children:[r?"Wait while other players select their cards":"Time to select the correct card!",e.jsx("br",{}),"If every player gets it correct or wrong, each player but the storyteller gets"," ",e.jsx(h,{children:"2"})," points.",e.jsx("br",{}),"If only some get it correct, those players (and the storyteller) get"," ",e.jsx(h,{children:"3"}),"3 points.",e.jsx("br",{}),"You get ",e.jsx(h,{children:"1"})," point for every vote your card gets (if you are not the storyteller)."]})})}function D({storyteller:r}){return e.jsx(H,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Hora de revelar a resposta correta!",e.jsx("br",{}),"O Contador de Histórias ",e.jsx(b,{id:r.avatarId,size:"small"})," ganha"," ",e.jsx(h,{children:"3"})," pontos se pelo menos uma pessoa acertar (mas não todas).",e.jsx("br",{}),"Cada jogador que votou corretamente ganha ",e.jsx(h,{children:"3"})," pontos.",e.jsx("br",{}),"Para cada voto que sua carta recebeu (menos ",e.jsx(b,{id:r.avatarId,size:"small"}),"), você ganha ",e.jsx(h,{children:"1"})," ponto.",e.jsx("br",{}),"Mas se todos jogadores votarem corretamente ou incorretamente, todos ganham"," ",e.jsx(h,{children:"2"})," pontos e o Contador de Histórias não ganha nada."]}),en:e.jsxs(e.Fragment,{children:["Time to reveal the answer!",e.jsx("br",{}),"The Storyteller ",e.jsx(b,{id:r.avatarId,size:"small"})," gets"," ",e.jsx(h,{children:"3"})," points if at least one player got it correctly (but not all).",e.jsx("br",{}),"Each player who voted correctly gets ",e.jsx(h,{children:"3"})," points.",e.jsx("br",{}),"Each vote your card receives grants you ",e.jsx(h,{children:"1"})," points (except"," ",e.jsx(b,{id:r.avatarId,size:"small"}),").",e.jsx("br",{}),"But if all players vote correctly or incorrectly, they get ",e.jsx(h,{children:"2"})," ","points each and the Storyteller gets nothing."]})})})}function er({players:r,story:a,user:s,onSubmitVote:o,storyteller:d,table:t,isUserTheStoryTeller:c,announcement:i}){const{isLoading:p}=L(),m=W(Math.max(Object.keys(r).length,8),{minWidth:150}),u=oe(r),l=x=>{o({vote:x})};return M(()=>{c||o(Ue(t,s.cardId))},[s==null?void 0:s.hand]),e.jsxs(_,{fullWidth:!0,announcement:i,children:[e.jsx(N,{children:e.jsx(n,{pt:"Qual carta é a ilustração correta?",en:"What card is the correct one?"})}),e.jsx(P,{children:e.jsx(K,{header:d.name,className:"c-story-card",color:"yellow",children:a})}),e.jsx(q,{content:e.jsx(k,{isUserTheStoryTeller:c})}),e.jsx(V,{type:c?"wait":"action",children:e.jsx(k,{isUserTheStoryTeller:c})}),u&&e.jsx(Pe,{duration:15,onExpire:()=>{}}),e.jsx(te,{className:"c-game-table",wrap:!0,children:t.map(x=>{const v=x.playerId===s.id,Z=x.cardId===s.vote;return e.jsx("div",{className:"c-game-table__card-container",children:e.jsx(fe,{id:x.cardId,onClick:c?void 0:l,disabled:p||v,buttonText:v?e.jsx(n,{pt:"Sua",en:"Yours"}):e.jsx(n,{pt:"Votar",en:"Vote"}),children:e.jsx(I,{id:x.cardId,cardWidth:m,className:f(Z?"c-game-table--vote":"c-game-table--idle")})})},`hand-${x.cardId}`)})})]})}function rr({state:r,players:a}){var m;const{step:s,setStep:o}=C(0),d=Y(a,r),[t,c]=R("storytellerId",r,a),i=ze(o),p=e.jsxs(T,{icon:e.jsx(Ne,{}),title:e.jsx(n,{pt:"Votação",en:"Voting"}),currentRound:(m=r==null?void 0:r.round)==null?void 0:m.current,type:"overlay",children:[e.jsx(k,{isUserTheStoryTeller:c}),e.jsx(J,{hand:r.table.map(u=>u.cardId)})]});return e.jsx(w,{phase:r==null?void 0:r.phase,allowedPhase:g.VOTING,className:"c-phase",children:e.jsx(A,{step:s,players:a,children:e.jsx(er,{players:a,user:d,story:r.story,onSubmitVote:i,storyteller:t,table:r.table,isUserTheStoryTeller:c,announcement:p})})})}function ar({players:r,story:a,storyteller:s,table:o,goToNextStep:d,announcement:t}){var m,u;me();const c=W(10,{minWidth:75}),i=o.find(l=>l.playerId===s.id),p=o.filter(l=>l.playerId!==s.id);return e.jsxs(_,{fullWidth:!0,announcement:t,children:[e.jsx(N,{children:e.jsx(n,{pt:"Solução",en:"Solution"})}),e.jsx(q,{content:e.jsx(D,{storyteller:s})}),e.jsx("div",{className:"c-story-book",children:e.jsx(X,{leftPage:e.jsx("div",{className:"c-story-book__selected-card",children:i&&e.jsxs(e.Fragment,{children:[e.jsx(I,{id:i.cardId,cardWidth:160}),e.jsx($,{cardId:i.cardId})]})}),rightPage:e.jsxs("div",{className:"c-story-book__solution",children:[e.jsx("p",{children:e.jsx(n,{pt:"Era uma vez...",en:"Once upon a time..."})}),e.jsx("p",{className:"c-story-book__story",children:a}),e.jsxs("div",{children:[e.jsx(n,{pt:"Votaram corretamente:",en:"Voted correctly:"}),e.jsxs("ul",{className:"c-story-book__correct-players",children:[(m=i==null?void 0:i.votes)==null?void 0:m.filter(l=>l!==s.id).map(l=>e.jsx("li",{children:e.jsx(j,{player:r[l],size:"small"})},`correct-vote-player-${l}`)),(((u=i==null?void 0:i.votes)==null?void 0:u.length)??0)<2&&e.jsx("li",{className:"c-story-book__nobody",children:e.jsx(n,{pt:"Vixi, ninguém acertou...",en:"Well, nobody got it..."})})]})]})]})})}),e.jsx("ul",{className:"c-other-cards",children:p.map((l,x)=>e.jsxs("li",{className:"c-other-cards__entry",children:[e.jsx("div",{className:"c-other-cards__player",children:l.playerId==="NPC"?e.jsx(Le,{size:"small"}):e.jsx(j,{player:r[l.playerId],size:"small"})}),e.jsx(I,{id:l.cardId,cardWidth:c,className:"c-other-cards__card"}),e.jsx($,{cardId:l.cardId}),e.jsx("div",{className:"c-other-cards__votes",children:e.jsx(U.Group,{size:"small",children:((l==null?void 0:l.votes)??[]).map(v=>e.jsx(b,{id:r[v].avatarId},`incorrect-vote-player-${v}`))})})]},`other-card-votes-${l.playerId}-${x}`))}),e.jsx(P,{children:e.jsx(Ce,{onClick:d,onExpire:d,duration:20,children:e.jsx(n,{pt:"Continuar",en:"Continue"})})})]})}const sr=(r,a)=>{switch(r){case"EVERYBODY_GOT":return a("Pontos porque o Contador de Histórias foi muito obscuro","Points because the Storyteller was too vague");case"NOBODY_GOT":return a("Pontos porque o Contador de Histórias foi óbvio","Points because the Storyteller was too obvious");default:return a("Pontos por acertar","Points for getting it right")}};function or({players:r,ranking:a,outcome:s,storyteller:o,round:d,goToPreviousStep:t}){const{translate:c}=S();return e.jsxs(Te,{players:r,ranking:a,gainedPointsDescriptions:[sr(s,c),"Pontos por votos em sua carta"],subtitle:e.jsxs(V,{type:s==="NORMAL"?"event":"alert",children:[s==="EVERYBODY_GOT"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Todo mundo acertou! ",e.jsx(j,{player:o}),", da próxima vez, seja menos óbvio(a)."]}),en:e.jsxs(e.Fragment,{children:["Everybody guessed it right! ",e.jsx(j,{player:o}),", be less obvious next time."]})}),s==="NOBODY_GOT"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Ninguém acertou! ",e.jsx(j,{player:o}),", da próxima vez, seja menos obscuro."]}),en:e.jsxs(e.Fragment,{children:["Nobody guessed it right! ",e.jsx(j,{player:o}),", next time be less obscure."]})}),s==="NORMAL"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Quem acertou ganha ",e.jsx(h,{type:"positive",children:"3"})," pontos! Bom trabalho, ",e.jsx(j,{player:o}),"."]}),en:e.jsxs(e.Fragment,{children:["Whoever guessed it right got ",e.jsx(h,{type:"positive",children:"3"})," points! Good job, ",e.jsx(j,{player:o})]})})]}),children:[e.jsx(q,{content:e.jsx(D,{storyteller:o})}),e.jsx(P,{children:e.jsx(ne,{onClick:t,children:c("Voltar para Solução","Back to Solution")})}),e.jsx(ue,{round:d})]})}function tr({state:r,players:a}){var i;const{step:s,goToNextStep:o,goToPreviousStep:d}=C(0),[t]=R("storytellerId",r,a),c=e.jsx(T,{icon:e.jsx(Se,{}),title:e.jsx(n,{pt:"Solução",en:"Solution"}),currentRound:(i=r==null?void 0:r.round)==null?void 0:i.current,type:"overlay",children:e.jsx(D,{storyteller:t})});return e.jsx(w,{phase:r==null?void 0:r.phase,allowedPhase:g.RESOLUTION,children:e.jsxs(A,{step:s,players:a,children:[e.jsx(ar,{players:a,story:r.story,storyteller:t,table:r.table,goToNextStep:o,announcement:c}),e.jsx(or,{players:a,ranking:r.ranking,outcome:r.outcome,storyteller:t,round:r.round,goToPreviousStep:d})]})})}function nr({gallery:r}){const a=W(6,{gap:8,minWidth:60,maxWidth:200});return e.jsx(Ee,{title:e.jsx(n,{pt:"Histórias",en:"Stories"}),children:e.jsx(ie.PreviewGroup,{children:e.jsx("ul",{className:"c-gallery",children:r.map((s,o)=>e.jsxs("div",{className:"c-gallery__entry",children:[e.jsx("div",{className:"c-gallery__label",children:e.jsx("span",{children:s.story})}),e.jsx(Be,{cardId:s.cardId,children:e.jsx(I,{id:s.cardId,cardWidth:a-6})})]},`${s.cardId}-${o}`))})})})}function ir({state:r,players:a}){return e.jsxs(Ae,{state:r,players:a,announcementIcon:e.jsx(we,{}),children:[e.jsx(Re,{players:a,achievements:r.achievements,reference:Ve}),e.jsx(nr,{gallery:r.gallery})]})}function cr(r){if(r&&!r.phase)return de;switch(r.phase){case B.DEFAULT.LOBBY:return xe;case B.DEFAULT.SETUP:return pe;case g.STORY:return Qe;case g.CARD_PLAY:return Ze;case g.VOTING:return rr;case g.RESOLUTION:return tr;case B.DEFAULT.GAME_OVER:return ir;default:return le}}function Ra(){return e.jsx(he,{gameCollection:ce.CONTADORES_HISTORIAS,getActiveComponent:cr})}export{Ra as default};
