import{aN as w,aR as E,r as m,j as e,e as p,k as j,B as A,T as t,b6 as d,b5 as _,N as I}from"./index-CU07ZNEq.js";import{u as W}from"./DebugOnly-SuSsJv04.js";import{T as B}from"./TimedButton-S9qOcua0.js";import"./Session-B5Vy5upK.js";import{u as C}from"./RulesModal-CLBLYbAl.js";import{L as T}from"./Loading-Bh2qjOHs.js";import{W as k}from"./WaitingRoomIcon-ByCEV0O6.js";import{P as L}from"./PlayerAvatar-nAQHij4M.js";import{R as O}from"./LikeFilled-Bz_cOSr0.js";import{I as D}from"./useDevFeatures-BpaKSuW4.js";function y(s=!1){const[,a]=w("showPlayersBar");E(()=>(a(s),()=>{a(!0)}))}function Z({buttonText:s,icon:a,title:n,children:o,currentRound:r=3,onClose:i=()=>{},className:l,duration:c,withoutTimer:g=!1,unskippable:h,animationType:v="backInDown",type:x="block"}){y(x==="overlay");const P=[7,15,7,5][r]??4,[f,b]=m.useState(!0),[R,N]=m.useState(!1),u=()=>{b(!1),S(),i()};C(" ",()=>{h||u()});const{start:S}=W({autoStart:!1,duration:1,onExpire:()=>N(!0)});return R?null:e.jsx("div",{className:p(x==="overlay"&&"phase-announcement-overlay",!f&&d("fadeOut",{speed:"faster"})),children:e.jsx("div",{className:"phase-announcement-wrapper",children:e.jsxs("div",{className:p("phase-announcement",f?d(v,{speed:"fast"}):d("bounceOut"),l),children:[e.jsx(j,{colorScheme:"light",children:n}),e.jsx("span",{className:"phase-announcement__icon",children:a}),o,g?e.jsx(A,{type:"primary",onClick:u,autoFocus:!0,className:"mt-2",children:e.jsx(t,{pt:"Prosseguir",en:"Continue",custom:s})}):e.jsx(B,{duration:c||P,type:"text",onClick:u,onExpire:u,disabled:h,autoFocus:!0,className:"mt-2",children:e.jsx(t,{pt:"Prosseguir",en:"Continue",custom:s})})]})})})}const $=m.forwardRef(({children:s,announcement:a,fullWidth:n=!1,fullHeight:o=!1,className:r=""},i)=>e.jsxs("div",{ref:i,className:p("step",n&&"step--full-width",o&&"step--full-height",r),children:[a,s]}));function F({players:s,readyText:a,readyTextPlural:n,hideNames:o=!1}){const{readyPlayers:r,notReadyPlayers:i}=Object.values(s).reduce((l,c)=>(c.ready?l.readyPlayers.push(c):l.notReadyPlayers.push(c.name),l),{readyPlayers:[],notReadyPlayers:[]});return r.length===0?e.jsx("span",{}):e.jsxs("div",{className:"ready-player-bar",children:[e.jsxs("div",{className:"ready-player-bar__bar",children:[e.jsx(_.Group,{size:"small",children:r.map(l=>e.jsx(L,{avatarId:l.avatarId},l.name))}),e.jsxs("span",{className:"ready-player-bar__speech-bubble",children:[e.jsx(I.Text,{children:r.length>1?e.jsx(t,{pt:"Estamos prontos!",en:"We're ready!",custom:n}):e.jsx(t,{pt:"Estou pronto!",en:"I'm ready!",custom:a})}),e.jsx(O,{className:"ready-player-bar__speech-bubble-icon"})]})]}),!o&&i.length>0&&e.jsxs("span",{className:"ready-player-bar__names",children:[e.jsx(t,{pt:"Esperando",en:"Waiting for"}),": ",i.join(", ")]})]})}function V({players:s,title:a,instruction:n,children:o,icon:r}){return y(),e.jsxs("div",{className:"waiting-room",children:[e.jsx(j,{colorScheme:"light",children:e.jsx(t,{pt:"Pronto!",en:"Done!",custom:a})}),r??e.jsx(k,{style:{width:"6rem"}}),e.jsxs("div",{className:"waiting-room__content",children:[e.jsx(D,{children:n||e.jsx(t,{pt:"Vamos aguardar os outros jogadores!",en:"Please wait for the other players!"})}),o]}),e.jsx(F,{players:s})]})}const G=s=>{switch(s){case"SERVER":return e.jsx(t,{pt:"Aguardando o servidor dar sinal de vida",en:"Waiting for the server to resuscitate"});case"PLAYERS":return e.jsx(t,{pt:"Vamos aguardar enquanto os outros jogadores terminam!",en:"Please wait while other players finish!"});default:return e.jsx(t,{pt:"Aguardando algo acontecer...",en:"Waiting for something..."})}};function ee({children:s,step:a,conditions:n,players:o,waitingRoom:r={}}){const i=Array.isArray(s)?s:[s];return o&&a>=i.length?e.jsx(V,{players:o,title:e.jsx(t,{pt:"Pronto!",en:"Done!"}),instruction:r.instruction??G(r.type??"PLAYERS"),children:r.content}):i[a]?n?.[a]??!0?e.jsx(e.Fragment,{children:i[a]}):e.jsx("div",{}):e.jsx(T,{})}export{Z as P,F as R,$ as S,V as W,ee as a,y as u};
