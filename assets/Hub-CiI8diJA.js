import{r as l,Z as at,_ as Ee,$ as It,a0 as ie,a1 as Q,a2 as B,a3 as lr,a4 as Bt,a5 as E,a6 as Qe,a7 as pt,a8 as sr,a9 as cr,aa as Pe,ab as ur,ac as Xt,ad as dr,ae as fr,af as ba,ag as vr,ah as Ca,ai as xa,aj as mr,ak as gr,al as hr,am as pr,an as de,ao as yr,g as br,m as Sa,ap as $n,aq as Cr,ar as xr,as as Sr,at as Vn,au as wr,c as Fn,av as Er,aw as wa,ax as Nr,ay as kr,az as Dr,aA as Kr,aB as Hn,aC as Ir,H as Ea,z as Or,aD as Tr,aE as Mr,aF as Na,aG as ka,j as b,M as $t,T as rt,e as yn,s as Rr,B as bn,aH as Pr,aI as _r,h as sn,aJ as Lr,aK as qt,E as Ar,x as Da,aL as nn,k as jr,aM as $r,q as Jt,i as Ka,w as Cn,t as Wn,aN as Vr,aO as Fr,aP as zn,aQ as Ia,y as Hr,G as Oa,aR as Wr,v as zr,L as Gr,aS as Br,f as Ur,C as qr}from"./index-DKLwsDFL.js";import{D as Yr}from"./DevHeader-CsMl4cQ3.js";import{R as Xr,L as Jr}from"./LogoutButton-AFuXuMtK.js";import{G as Ta}from"./GameBanner-BAG1d_d2.js";import{R as Qr,G as Zr}from"./RulesModal-C2P2r3_X.js";import{u as eo}from"./useMutation-BGbQsuHj.js";import{g as to,C as no,L as ao}from"./Loading-C1MoP0zR.js";import{I as fn}from"./Instruction-CsUmjVkH.js";import{R as Gn}from"./index-CXrkbFG-.js";import{u as ro}from"./useCopyToClipboard-nGRKKjNR.js";import{M as oo,T as io}from"./index-l9U_lkkh.js";import{D as rn}from"./index-ClNZpA-n.js";import{C as jt}from"./index-D5Oaa6ry.js";import{B as lo}from"./index-D3oqqCjT.js";import{u as so}from"./useDevFeatures-CIElo4nP.js";import{L as Ma,u as co,a as uo,b as fo,D as vo,m as mo,S as an}from"./index-8QfuuW1q.js";import{T as Bn}from"./index-BU-R462y.js";import{u as xn}from"./useMergedState-BJaT-NVW.js";import{F as go}from"./Overflow-BxFLJAPn.js";import{o as Ra}from"./index-DVrWA4-s.js";import{_ as Pa,i as ho,g as po,S as yo}from"./iconUtil-C1yptjtu.js";import{g as bo}from"./PurePanel--OmJwFM1.js";import"./WritingIcon-CxY-9Rxv.js";import"./useBubbleLock-Do_zdWsR.js";import"./AnimatedLoaderIcon-f05rfdc_.js";import"./useId-CvqvcT2F.js";import"./useSetState-CTRQRH64.js";import"./index-CNVnpEbo.js";import"./EllipsisOutlined-D5VyvrSD.js";import"./PlusOutlined-Bx4jo3ft.js";import"./useEvent-CdZenJ9j.js";var Un={};function Co(e,n){}function xo(e,n,r){!n&&!Un[r]&&(Un[r]=!0)}function Kt(e,n){xo(Co,e,n)}const So=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var cn=function(n){var r=n.className,t=n.customizeIcon,a=n.customizeIconProps,c=n.children,u=n.onMouseDown,o=n.onClick,s=typeof t=="function"?t(a):t;return l.createElement("span",{className:r,onMouseDown:function(d){d.preventDefault(),u==null||u(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:o,"aria-hidden":!0},s!==void 0?s:l.createElement("span",{className:at(r.split(/\s+/).map(function(i){return"".concat(i,"-icon")}))},c))},wo=function(n,r,t,a,c){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,i=Ee.useMemo(function(){if(It(a)==="object")return a.clearIcon;if(c)return c},[a,c]),d=Ee.useMemo(function(){return!!(!u&&a&&(t.length||o)&&!(s==="combobox"&&o===""))},[a,u,t.length,o,s]);return{allowClear:d,clearIcon:Ee.createElement(cn,{className:"".concat(n,"-clear"),onMouseDown:r,customizeIcon:i},"×")}},_a=l.createContext(null);function La(){return l.useContext(_a)}function Eo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=l.useState(!1),r=ie(n,2),t=r[0],a=r[1],c=l.useRef(null),u=function(){window.clearTimeout(c.current)};l.useEffect(function(){return u},[]);var o=function(i,d){u(),c.current=window.setTimeout(function(){a(i),d&&d()},e)};return[t,o,u]}function Aa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,n=l.useRef(null),r=l.useRef(null);l.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function t(a){(a||n.current===null)&&(n.current=a),window.clearTimeout(r.current),r.current=window.setTimeout(function(){n.current=null},e)}return[function(){return n.current},t]}function No(e,n,r,t){var a=l.useRef(null);a.current={open:n,triggerOpen:r,customizedTrigger:t},l.useEffect(function(){function c(u){var o;if(!((o=a.current)!==null&&o!==void 0&&o.customizedTrigger)){var s=u.target;s.shadowRoot&&u.composed&&(s=u.composedPath()[0]||s),a.current.open&&e().filter(function(i){return i}).every(function(i){return!i.contains(s)&&i!==s})&&a.current.triggerOpen(!1)}}return window.addEventListener("mousedown",c),function(){return window.removeEventListener("mousedown",c)}},[])}function ko(e){return![Q.ESC,Q.SHIFT,Q.BACKSPACE,Q.TAB,Q.WIN_KEY,Q.ALT,Q.META,Q.WIN_KEY_RIGHT,Q.CTRL,Q.SEMICOLON,Q.EQUALS,Q.CAPS_LOCK,Q.CONTEXT_MENU,Q.F1,Q.F2,Q.F3,Q.F4,Q.F5,Q.F6,Q.F7,Q.F8,Q.F9,Q.F10,Q.F11,Q.F12].includes(e)}var Do=function(n,r){var t,a=n.prefixCls,c=n.id,u=n.inputElement,o=n.disabled,s=n.tabIndex,i=n.autoFocus,d=n.autoComplete,f=n.editable,h=n.activeDescendantId,v=n.value,p=n.maxLength,y=n.onKeyDown,m=n.onMouseDown,C=n.onChange,N=n.onPaste,x=n.onCompositionStart,S=n.onCompositionEnd,w=n.open,k=n.attrs,K=u||l.createElement("input",null),g=K,D=g.ref,R=g.props,M=R.onKeyDown,L=R.onChange,$=R.onMouseDown,I=R.onCompositionStart,P=R.onCompositionEnd,H=R.style;return"maxLength"in K.props,K=l.cloneElement(K,B(B(B({type:"search"},R),{},{id:c,ref:lr(r,D),disabled:o,tabIndex:s,autoComplete:d||"off",autoFocus:i,className:at("".concat(a,"-selection-search-input"),(t=K)===null||t===void 0||(t=t.props)===null||t===void 0?void 0:t.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(c,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(c,"_list"),"aria-activedescendant":w?h:void 0},k),{},{value:f?v:"",maxLength:p,readOnly:!f,unselectable:f?null:"on",style:B(B({},H),{},{opacity:f?null:0}),onKeyDown:function(F){y(F),M&&M(F)},onMouseDown:function(F){m(F),$&&$(F)},onChange:function(F){C(F),L&&L(F)},onCompositionStart:function(F){x(F),I&&I(F)},onCompositionEnd:function(F){S(F),P&&P(F)},onPaste:N})),K},ja=l.forwardRef(Do);function $a(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var Ko=typeof window<"u"&&window.document&&window.document.documentElement,Io=Ko;function Oo(e){return e!=null}function To(e){return!e&&e!==0}function qn(e){return["string","number"].includes(It(e))}function Va(e){var n=void 0;return e&&(qn(e.title)?n=e.title.toString():qn(e.label)&&(n=e.label.toString())),n}function Mo(e,n){Io?l.useLayoutEffect(e,n):l.useEffect(e,n)}function Ro(e){var n;return(n=e.key)!==null&&n!==void 0?n:e.value}var Yn=function(n){n.preventDefault(),n.stopPropagation()},Po=function(n){var r=n.id,t=n.prefixCls,a=n.values,c=n.open,u=n.searchValue,o=n.autoClearSearchValue,s=n.inputRef,i=n.placeholder,d=n.disabled,f=n.mode,h=n.showSearch,v=n.autoFocus,p=n.autoComplete,y=n.activeDescendantId,m=n.tabIndex,C=n.removeIcon,N=n.maxTagCount,x=n.maxTagTextLength,S=n.maxTagPlaceholder,w=S===void 0?function(V){return"+ ".concat(V.length," ...")}:S,k=n.tagRender,K=n.onToggleOpen,g=n.onRemove,D=n.onInputChange,R=n.onInputPaste,M=n.onInputKeyDown,L=n.onInputMouseDown,$=n.onInputCompositionStart,I=n.onInputCompositionEnd,P=l.useRef(null),H=l.useState(0),q=ie(H,2),F=q[0],Z=q[1],X=l.useState(!1),me=ie(X,2),Oe=me[0],we=me[1],ge="".concat(t,"-selection"),he=c||f==="multiple"&&o===!1||f==="tags"?u:"",qe=f==="tags"||f==="multiple"&&o===!1||h&&(c||Oe);Mo(function(){Z(P.current.scrollWidth)},[he]);var re=function(W,_,U,ce,ue){return l.createElement("span",{title:Va(W),className:at("".concat(ge,"-item"),E({},"".concat(ge,"-item-disabled"),U))},l.createElement("span",{className:"".concat(ge,"-item-content")},_),ce&&l.createElement(cn,{className:"".concat(ge,"-item-remove"),onMouseDown:Yn,onClick:ue,customizeIcon:C},"×"))},Me=function(W,_,U,ce,ue,oe){var Ne=function(Re){Yn(Re),K(!c)};return l.createElement("span",{onMouseDown:Ne},k({label:_,value:W,disabled:U,closable:ce,onClose:ue,isMaxTag:!!oe}))},He=function(W){var _=W.disabled,U=W.label,ce=W.value,ue=!d&&!_,oe=U;if(typeof x=="number"&&(typeof U=="string"||typeof U=="number")){var Ne=String(oe);Ne.length>x&&(oe="".concat(Ne.slice(0,x),"..."))}var te=function(pe){pe&&pe.stopPropagation(),g(W)};return typeof k=="function"?Me(ce,oe,_,ue,te):re(W,oe,_,ue,te)},ae=function(W){var _=typeof w=="function"?w(W):w;return typeof k=="function"?Me(void 0,_,!1,!1,void 0,!0):re({title:_},_,!1)},A=l.createElement("div",{className:"".concat(ge,"-search"),style:{width:F},onFocus:function(){we(!0)},onBlur:function(){we(!1)}},l.createElement(ja,{ref:s,open:c,prefixCls:t,id:r,inputElement:null,disabled:d,autoFocus:v,autoComplete:p,editable:qe,activeDescendantId:y,value:he,onKeyDown:M,onMouseDown:L,onChange:D,onPaste:R,onCompositionStart:$,onCompositionEnd:I,tabIndex:m,attrs:Bt(n,!0)}),l.createElement("span",{ref:P,className:"".concat(ge,"-search-mirror"),"aria-hidden":!0},he," ")),T=l.createElement(go,{prefixCls:"".concat(ge,"-overflow"),data:a,renderItem:He,renderRest:ae,suffix:A,itemKey:Ro,maxCount:N});return l.createElement("span",{className:"".concat(ge,"-wrap")},T,!a.length&&!he&&l.createElement("span",{className:"".concat(ge,"-placeholder")},i))},_o=function(n){var r=n.inputElement,t=n.prefixCls,a=n.id,c=n.inputRef,u=n.disabled,o=n.autoFocus,s=n.autoComplete,i=n.activeDescendantId,d=n.mode,f=n.open,h=n.values,v=n.placeholder,p=n.tabIndex,y=n.showSearch,m=n.searchValue,C=n.activeValue,N=n.maxLength,x=n.onInputKeyDown,S=n.onInputMouseDown,w=n.onInputChange,k=n.onInputPaste,K=n.onInputCompositionStart,g=n.onInputCompositionEnd,D=n.title,R=l.useState(!1),M=ie(R,2),L=M[0],$=M[1],I=d==="combobox",P=I||y,H=h[0],q=m||"";I&&C&&!L&&(q=C),l.useEffect(function(){I&&$(!1)},[I,C]);var F=d!=="combobox"&&!f&&!y?!1:!!q,Z=D===void 0?Va(H):D,X=l.useMemo(function(){return H?null:l.createElement("span",{className:"".concat(t,"-selection-placeholder"),style:F?{visibility:"hidden"}:void 0},v)},[H,F,v,t]);return l.createElement("span",{className:"".concat(t,"-selection-wrap")},l.createElement("span",{className:"".concat(t,"-selection-search")},l.createElement(ja,{ref:c,prefixCls:t,id:a,open:f,inputElement:r,disabled:u,autoFocus:o,autoComplete:s,editable:P,activeDescendantId:i,value:q,onKeyDown:x,onMouseDown:S,onChange:function(Oe){$(!0),w(Oe)},onPaste:k,onCompositionStart:K,onCompositionEnd:g,tabIndex:p,attrs:Bt(n,!0),maxLength:I?N:void 0})),!I&&H?l.createElement("span",{className:"".concat(t,"-selection-item"),title:Z,style:F?{visibility:"hidden"}:void 0},H.label):null,X)},Lo=function(n,r){var t=l.useRef(null),a=l.useRef(!1),c=n.prefixCls,u=n.open,o=n.mode,s=n.showSearch,i=n.tokenWithEnter,d=n.disabled,f=n.prefix,h=n.autoClearSearchValue,v=n.onSearch,p=n.onSearchSubmit,y=n.onToggleOpen,m=n.onInputKeyDown,C=n.domRef;l.useImperativeHandle(r,function(){return{focus:function(Z){t.current.focus(Z)},blur:function(){t.current.blur()}}});var N=Aa(0),x=ie(N,2),S=x[0],w=x[1],k=function(Z){var X=Z.which,me=t.current instanceof HTMLTextAreaElement;!me&&u&&(X===Q.UP||X===Q.DOWN)&&Z.preventDefault(),m&&m(Z),X===Q.ENTER&&o==="tags"&&!a.current&&!u&&(p==null||p(Z.target.value)),!(me&&!u&&~[Q.UP,Q.DOWN,Q.LEFT,Q.RIGHT].indexOf(X))&&ko(X)&&y(!0)},K=function(){w(!0)},g=l.useRef(null),D=function(Z){v(Z,!0,a.current)!==!1&&y(!0)},R=function(){a.current=!0},M=function(Z){a.current=!1,o!=="combobox"&&D(Z.target.value)},L=function(Z){var X=Z.target.value;if(i&&g.current&&/[\r\n]/.test(g.current)){var me=g.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");X=X.replace(me,g.current)}g.current=null,D(X)},$=function(Z){var X=Z.clipboardData,me=X==null?void 0:X.getData("text");g.current=me||""},I=function(Z){var X=Z.target;if(X!==t.current){var me=document.body.style.msTouchAction!==void 0;me?setTimeout(function(){t.current.focus()}):t.current.focus()}},P=function(Z){var X=S();Z.target!==t.current&&!X&&!(o==="combobox"&&d)&&Z.preventDefault(),(o!=="combobox"&&(!s||!X)||!u)&&(u&&h!==!1&&v("",!0,!1),y())},H={inputRef:t,onInputKeyDown:k,onInputMouseDown:K,onInputChange:L,onInputPaste:$,onInputCompositionStart:R,onInputCompositionEnd:M},q=o==="multiple"||o==="tags"?l.createElement(Po,Qe({},n,H)):l.createElement(_o,Qe({},n,H));return l.createElement("div",{ref:C,className:"".concat(c,"-selector"),onClick:I,onMouseDown:P},f&&l.createElement("div",{className:"".concat(c,"-prefix")},f),q)},Ao=l.forwardRef(Lo),jo=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],$o=function(n){var r=n===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},Vo=function(n,r){var t=n.prefixCls;n.disabled;var a=n.visible,c=n.children,u=n.popupElement,o=n.animation,s=n.transitionName,i=n.dropdownStyle,d=n.dropdownClassName,f=n.direction,h=f===void 0?"ltr":f,v=n.placement,p=n.builtinPlacements,y=n.dropdownMatchSelectWidth,m=n.dropdownRender,C=n.dropdownAlign,N=n.getPopupContainer,x=n.empty,S=n.getTriggerDOMNode,w=n.onPopupVisibleChange,k=n.onPopupMouseEnter,K=pt(n,jo),g="".concat(t,"-dropdown"),D=u;m&&(D=m(u));var R=l.useMemo(function(){return p||$o(y)},[p,y]),M=o?"".concat(g,"-").concat(o):s,L=typeof y=="number",$=l.useMemo(function(){return L?null:y===!1?"minWidth":"width"},[y,L]),I=i;L&&(I=B(B({},I),{},{width:y}));var P=l.useRef(null);return l.useImperativeHandle(r,function(){return{getPopupElement:function(){var q;return(q=P.current)===null||q===void 0?void 0:q.popupElement}}}),l.createElement(sr,Qe({},K,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:v||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:g,popupTransitionName:M,popup:l.createElement("div",{onMouseEnter:k},D),ref:P,stretch:$,popupAlign:C,popupVisible:a,getPopupContainer:N,popupClassName:at(d,E({},"".concat(g,"-empty"),x)),popupStyle:I,getTriggerDOMNode:S,onPopupVisibleChange:w}),c)},Fo=l.forwardRef(Vo);function Xn(e,n){var r=e.key,t;return"value"in e&&(t=e.value),r??(t!==void 0?t:"rc-index-key-".concat(n))}function Sn(e){return typeof e<"u"&&!Number.isNaN(e)}function Fa(e,n){var r=e||{},t=r.label,a=r.value,c=r.options,u=r.groupLabel,o=t||(n?"children":"label");return{label:o,value:a||"value",options:c||"options",groupLabel:u||o}}function Ho(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.fieldNames,t=n.childrenAsData,a=[],c=Fa(r,!1),u=c.label,o=c.value,s=c.options,i=c.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(v){if(h||!(s in v)){var p=v[o];a.push({key:Xn(v,a.length),groupOption:h,data:v,label:v[u],value:p})}else{var y=v[i];y===void 0&&t&&(y=v.label),a.push({key:Xn(v,a.length),group:!0,data:v,label:y}),d(v[s],!0)}})}return d(e,!1),a}function wn(e){var n=B({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return Kt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),n}}),n}var Wo=function(n,r,t){if(!r||!r.length)return null;var a=!1,c=function o(s,i){var d=cr(i),f=d[0],h=d.slice(1);if(!f)return[s];var v=s.split(f);return a=a||v.length>1,v.reduce(function(p,y){return[].concat(Pe(p),Pe(o(y,h)))},[]).filter(Boolean)},u=c(n,r);return a?typeof t<"u"?u.slice(0,t):u:null},Tn=l.createContext(null);function zo(e){var n=e.visible,r=e.values;if(!n)return null;var t=50;return l.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,t).map(function(a){var c=a.label,u=a.value;return["number","string"].includes(It(c))?c:u}).join(", ")),r.length>t?", ...":null)}var Go=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Bo=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],En=function(n){return n==="tags"||n==="multiple"},Ha=l.forwardRef(function(e,n){var r,t=e.id,a=e.prefixCls,c=e.className,u=e.showSearch,o=e.tagRender,s=e.direction,i=e.omitDomProps,d=e.displayValues,f=e.onDisplayValuesChange,h=e.emptyOptions,v=e.notFoundContent,p=v===void 0?"Not Found":v,y=e.onClear,m=e.mode,C=e.disabled,N=e.loading,x=e.getInputElement,S=e.getRawInputElement,w=e.open,k=e.defaultOpen,K=e.onDropdownVisibleChange,g=e.activeValue,D=e.onActiveValueChange,R=e.activeDescendantId,M=e.searchValue,L=e.autoClearSearchValue,$=e.onSearch,I=e.onSearchSplit,P=e.tokenSeparators,H=e.allowClear,q=e.prefix,F=e.suffixIcon,Z=e.clearIcon,X=e.OptionList,me=e.animation,Oe=e.transitionName,we=e.dropdownStyle,ge=e.dropdownClassName,he=e.dropdownMatchSelectWidth,qe=e.dropdownRender,re=e.dropdownAlign,Me=e.placement,He=e.builtinPlacements,ae=e.getPopupContainer,A=e.showAction,T=A===void 0?[]:A,V=e.onFocus,W=e.onBlur,_=e.onKeyUp,U=e.onKeyDown,ce=e.onMouseDown,ue=pt(e,Go),oe=En(m),Ne=(u!==void 0?u:oe)||m==="combobox",te=B({},ue);Bo.forEach(function(Se){delete te[Se]}),i==null||i.forEach(function(Se){delete te[Se]});var Re=l.useState(!1),pe=ie(Re,2),be=pe[0],Ge=pe[1];l.useEffect(function(){Ge(So())},[]);var Le=l.useRef(null),De=l.useRef(null),ye=l.useRef(null),ne=l.useRef(null),z=l.useRef(null),O=l.useRef(!1),We=Eo(),ze=ie(We,3),Be=ze[0],ke=ze[1],bt=ze[2];l.useImperativeHandle(n,function(){var Se,se;return{focus:(Se=ne.current)===null||Se===void 0?void 0:Se.focus,blur:(se=ne.current)===null||se===void 0?void 0:se.blur,scrollTo:function(dt){var tt;return(tt=z.current)===null||tt===void 0?void 0:tt.scrollTo(dt)},nativeElement:Le.current||De.current}});var Ke=l.useMemo(function(){var Se;if(m!=="combobox")return M;var se=(Se=d[0])===null||Se===void 0?void 0:Se.value;return typeof se=="string"||typeof se=="number"?String(se):""},[M,m,d]),Ye=m==="combobox"&&typeof x=="function"&&x()||null,ee=typeof S=="function"&&S(),fe=ur(De,ee==null||(r=ee.props)===null||r===void 0?void 0:r.ref),Ve=l.useState(!1),Ie=ie(Ve,2),Fe=Ie[0],Ze=Ie[1];Xt(function(){Ze(!0)},[]);var Xe=xn(!1,{defaultValue:k,value:w}),st=ie(Xe,2),nt=st[0],ct=st[1],Ue=Fe?nt:!1,Ht=!p&&h;(C||Ht&&Ue&&m==="combobox")&&(Ue=!1);var wt=Ht?!1:Ue,j=l.useCallback(function(Se){var se=Se!==void 0?Se:!Ue;C||(ct(se),Ue!==se&&(K==null||K(se)))},[C,Ue,ct,K]),J=l.useMemo(function(){return(P||[]).some(function(Se){return[`
`,`\r
`].includes(Se)})},[P]),G=l.useContext(Tn)||{},Y=G.maxCount,Ce=G.rawValues,Te=function(se,ut,dt){if(!(oe&&Sn(Y)&&(Ce==null?void 0:Ce.size)>=Y)){var tt=!0,ot=se;D==null||D(null);var kt=Wo(se,P,Sn(Y)?Y-Ce.size:void 0),St=dt?null:kt;return m!=="combobox"&&St&&(ot="",I==null||I(St),j(!1),tt=!1),$&&Ke!==ot&&$(ot,{source:ut?"typing":"effect"}),tt}},mt=function(se){!se||!se.trim()||$(se,{source:"submit"})};l.useEffect(function(){!Ue&&!oe&&m!=="combobox"&&Te("",!1,!1)},[Ue]),l.useEffect(function(){nt&&C&&ct(!1),C&&!O.current&&ke(!1)},[C]);var it=Aa(),gt=ie(it,2),et=gt[0],Ct=gt[1],Rt=l.useRef(!1),Ut=function(se){var ut=et(),dt=se.key,tt=dt==="Enter";if(tt&&(m!=="combobox"&&se.preventDefault(),Ue||j(!0)),Ct(!!Ke),dt==="Backspace"&&!ut&&oe&&!Ke&&d.length){for(var ot=Pe(d),kt=null,St=ot.length-1;St>=0;St-=1){var Lt=ot[St];if(!Lt.disabled){ot.splice(St,1),kt=Lt;break}}kt&&f(ot,{type:"remove",values:[kt]})}for(var Wt=arguments.length,At=new Array(Wt>1?Wt-1:0),en=1;en<Wt;en++)At[en-1]=arguments[en];if(Ue&&(!tt||!Rt.current)){var tn;(tn=z.current)===null||tn===void 0||tn.onKeyDown.apply(tn,[se].concat(At))}tt&&(Rt.current=!0),U==null||U.apply(void 0,[se].concat(At))},xe=function(se){for(var ut=arguments.length,dt=new Array(ut>1?ut-1:0),tt=1;tt<ut;tt++)dt[tt-1]=arguments[tt];if(Ue){var ot;(ot=z.current)===null||ot===void 0||ot.onKeyUp.apply(ot,[se].concat(dt))}se.key==="Enter"&&(Rt.current=!1),_==null||_.apply(void 0,[se].concat(dt))},ve=function(se){var ut=d.filter(function(dt){return dt!==se});f(ut,{type:"remove",values:[se]})},le=l.useRef(!1),_e=function(){ke(!0),C||(V&&!le.current&&V.apply(void 0,arguments),T.includes("focus")&&j(!0)),le.current=!0},vt=function(){O.current=!0,ke(!1,function(){le.current=!1,O.current=!1,j(!1)}),!C&&(Ke&&(m==="tags"?$(Ke,{source:"submit"}):m==="multiple"&&$("",{source:"blur"})),W&&W.apply(void 0,arguments))},Ae=[];l.useEffect(function(){return function(){Ae.forEach(function(Se){return clearTimeout(Se)}),Ae.splice(0,Ae.length)}},[]);var je=function(se){var ut,dt=se.target,tt=(ut=ye.current)===null||ut===void 0?void 0:ut.getPopupElement();if(tt&&tt.contains(dt)){var ot=setTimeout(function(){var Wt=Ae.indexOf(ot);if(Wt!==-1&&Ae.splice(Wt,1),bt(),!be&&!tt.contains(document.activeElement)){var At;(At=ne.current)===null||At===void 0||At.focus()}});Ae.push(ot)}for(var kt=arguments.length,St=new Array(kt>1?kt-1:0),Lt=1;Lt<kt;Lt++)St[Lt-1]=arguments[Lt];ce==null||ce.apply(void 0,[se].concat(St))},$e=l.useState({}),lt=ie($e,2),xt=lt[1];function Pt(){xt({})}var Ot;ee&&(Ot=function(se){j(se)}),No(function(){var Se;return[Le.current,(Se=ye.current)===null||Se===void 0?void 0:Se.getPopupElement()]},wt,j,!!ee);var Et=l.useMemo(function(){return B(B({},e),{},{notFoundContent:p,open:Ue,triggerOpen:wt,id:t,showSearch:Ne,multiple:oe,toggleOpen:j})},[e,p,wt,Ue,t,Ne,oe,j]),Nt=!!F||N,_t;Nt&&(_t=l.createElement(cn,{className:at("".concat(a,"-arrow"),E({},"".concat(a,"-arrow-loading"),N)),customizeIcon:F,customizeIconProps:{loading:N,searchValue:Ke,open:Ue,focused:Be,showSearch:Ne}}));var ht=function(){var se;y==null||y(),(se=ne.current)===null||se===void 0||se.focus(),f([],{type:"clear",values:d}),Te("",!1,!1)},yt=wo(a,ht,d,H,Z,C,Ke,m),ar=yt.allowClear,rr=yt.clearIcon,or=l.createElement(X,{ref:z}),ir=at(a,c,E(E(E(E(E(E(E(E(E(E({},"".concat(a,"-focused"),Be),"".concat(a,"-multiple"),oe),"".concat(a,"-single"),!oe),"".concat(a,"-allow-clear"),H),"".concat(a,"-show-arrow"),Nt),"".concat(a,"-disabled"),C),"".concat(a,"-loading"),N),"".concat(a,"-open"),Ue),"".concat(a,"-customize-input"),Ye),"".concat(a,"-show-search"),Ne)),jn=l.createElement(Fo,{ref:ye,disabled:C,prefixCls:a,visible:wt,popupElement:or,animation:me,transitionName:Oe,dropdownStyle:we,dropdownClassName:ge,direction:s,dropdownMatchSelectWidth:he,dropdownRender:qe,dropdownAlign:re,placement:Me,builtinPlacements:He,getPopupContainer:ae,empty:h,getTriggerDOMNode:function(se){return De.current||se},onPopupVisibleChange:Ot,onPopupMouseEnter:Pt},ee?l.cloneElement(ee,{ref:fe}):l.createElement(Ao,Qe({},e,{domRef:De,prefixCls:a,inputElement:Ye,ref:ne,id:t,prefix:q,showSearch:Ne,autoClearSearchValue:L,mode:m,activeDescendantId:R,tagRender:o,values:d,open:Ue,onToggleOpen:j,activeValue:g,searchValue:Ke,onSearch:Te,onSearchSubmit:mt,onRemove:ve,tokenWithEnter:J}))),dn;return ee?dn=jn:dn=l.createElement("div",Qe({className:ir},te,{ref:Le,onMouseDown:je,onKeyDown:Ut,onKeyUp:xe,onFocus:_e,onBlur:vt}),l.createElement(zo,{visible:Be&&!Ue,values:d}),jn,_t,ar&&rr),l.createElement(_a.Provider,{value:Et},dn)}),Wa=function(){return null};Wa.isSelectOptGroup=!0;var za=function(){return null};za.isSelectOption=!0;function Uo(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var qo=["disabled","title","children","style","className"];function Jn(e){return typeof e=="string"||typeof e=="number"}var Yo=function(n,r){var t=La(),a=t.prefixCls,c=t.id,u=t.open,o=t.multiple,s=t.mode,i=t.searchValue,d=t.toggleOpen,f=t.notFoundContent,h=t.onPopupScroll,v=l.useContext(Tn),p=v.maxCount,y=v.flattenOptions,m=v.onActiveValue,C=v.defaultActiveFirstOption,N=v.onSelect,x=v.menuItemSelectedIcon,S=v.rawValues,w=v.fieldNames,k=v.virtual,K=v.direction,g=v.listHeight,D=v.listItemHeight,R=v.optionRender,M="".concat(a,"-item"),L=dr(function(){return y},[u,y],function(A,T){return T[0]&&A[1]!==T[1]}),$=l.useRef(null),I=l.useMemo(function(){return o&&Sn(p)&&(S==null?void 0:S.size)>=p},[o,p,S==null?void 0:S.size]),P=function(T){T.preventDefault()},H=function(T){var V;(V=$.current)===null||V===void 0||V.scrollTo(typeof T=="number"?{index:T}:T)},q=function(T){for(var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=L.length,_=0;_<W;_+=1){var U=(T+_*V+W)%W,ce=L[U]||{},ue=ce.group,oe=ce.data;if(!ue&&!(oe!=null&&oe.disabled)&&!I)return U}return-1},F=l.useState(function(){return q(0)}),Z=ie(F,2),X=Z[0],me=Z[1],Oe=function(T){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;me(T);var W={source:V?"keyboard":"mouse"},_=L[T];if(!_){m(null,-1,W);return}m(_.value,T,W)};l.useEffect(function(){Oe(C!==!1?q(0):-1)},[L.length,i]);var we=l.useCallback(function(A){return s==="combobox"?!1:S.has(A)},[s,Pe(S).toString(),S.size]),ge=l.useCallback(function(A){return s==="combobox"?String(A).toLowerCase()===i.toLowerCase():S.has(A)},[s,i,Pe(S).toString(),S.size]);l.useEffect(function(){var A=setTimeout(function(){if(!o&&u&&S.size===1){var V=Array.from(S)[0],W=L.findIndex(function(_){var U=_.data;return U.value===V});W!==-1&&(Oe(W),H(W))}});if(u){var T;(T=$.current)===null||T===void 0||T.scrollTo(void 0)}return function(){return clearTimeout(A)}},[u,i]);var he=function(T){T!==void 0&&N(T,{selected:!S.has(T)}),o||d(!1)};if(l.useImperativeHandle(r,function(){return{onKeyDown:function(T){var V=T.which,W=T.ctrlKey;switch(V){case Q.N:case Q.P:case Q.UP:case Q.DOWN:{var _=0;if(V===Q.UP?_=-1:V===Q.DOWN?_=1:Uo()&&W&&(V===Q.N?_=1:V===Q.P&&(_=-1)),_!==0){var U=q(X+_,_);H(U),Oe(U,!0)}break}case Q.TAB:case Q.ENTER:{var ce,ue=L[X];ue&&!(ue!=null&&(ce=ue.data)!==null&&ce!==void 0&&ce.disabled)&&!I?he(ue.value):he(void 0),u&&T.preventDefault();break}case Q.ESC:d(!1),u&&T.stopPropagation()}},onKeyUp:function(){},scrollTo:function(T){H(T)}}}),L.length===0)return l.createElement("div",{role:"listbox",id:"".concat(c,"_list"),className:"".concat(M,"-empty"),onMouseDown:P},f);var qe=Object.keys(w).map(function(A){return w[A]}),re=function(T){return T.label};function Me(A,T){var V=A.group;return{role:V?"presentation":"option",id:"".concat(c,"_list_").concat(T)}}var He=function(T){var V=L[T];if(!V)return null;var W=V.data||{},_=W.value,U=V.group,ce=Bt(W,!0),ue=re(V);return V?l.createElement("div",Qe({"aria-label":typeof ue=="string"&&!U?ue:null},ce,{key:T},Me(V,T),{"aria-selected":ge(_)}),_):null},ae={role:"listbox",id:"".concat(c,"_list")};return l.createElement(l.Fragment,null,k&&l.createElement("div",Qe({},ae,{style:{height:0,width:0,overflow:"hidden"}}),He(X-1),He(X),He(X+1)),l.createElement(Ma,{itemKey:"key",ref:$,data:L,height:g,itemHeight:D,fullHeight:!1,onMouseDown:P,onScroll:h,virtual:k,direction:K,innerProps:k?null:ae},function(A,T){var V=A.group,W=A.groupOption,_=A.data,U=A.label,ce=A.value,ue=_.key;if(V){var oe,Ne=(oe=_.title)!==null&&oe!==void 0?oe:Jn(U)?U.toString():void 0;return l.createElement("div",{className:at(M,"".concat(M,"-group"),_.className),title:Ne},U!==void 0?U:ue)}var te=_.disabled,Re=_.title;_.children;var pe=_.style,be=_.className,Ge=pt(_,qo),Le=Ra(Ge,qe),De=we(ce),ye=te||!De&&I,ne="".concat(M,"-option"),z=at(M,ne,be,E(E(E(E({},"".concat(ne,"-grouped"),W),"".concat(ne,"-active"),X===T&&!ye),"".concat(ne,"-disabled"),ye),"".concat(ne,"-selected"),De)),O=re(A),We=!x||typeof x=="function"||De,ze=typeof O=="number"?O:O||ce,Be=Jn(ze)?ze.toString():void 0;return Re!==void 0&&(Be=Re),l.createElement("div",Qe({},Bt(Le),k?{}:Me(A,T),{"aria-selected":ge(ce),className:z,title:Be,onMouseMove:function(){X===T||ye||Oe(T)},onClick:function(){ye||he(ce)},style:pe}),l.createElement("div",{className:"".concat(ne,"-content")},typeof R=="function"?R(A,{index:T}):ze),l.isValidElement(x)||De,We&&l.createElement(cn,{className:"".concat(M,"-option-state"),customizeIcon:x,customizeIconProps:{value:ce,disabled:ye,isSelected:De}},De?"✓":null))}))},Xo=l.forwardRef(Yo);const Jo=function(e,n){var r=l.useRef({values:new Map,options:new Map}),t=l.useMemo(function(){var c=r.current,u=c.values,o=c.options,s=e.map(function(f){if(f.label===void 0){var h;return B(B({},f),{},{label:(h=u.get(f.value))===null||h===void 0?void 0:h.label})}return f}),i=new Map,d=new Map;return s.forEach(function(f){i.set(f.value,f),d.set(f.value,n.get(f.value)||o.get(f.value))}),r.current.values=i,r.current.options=d,s},[e,n]),a=l.useCallback(function(c){return n.get(c)||r.current.options.get(c)},[n]);return[t,a]};function vn(e,n){return $a(e).join("").toUpperCase().includes(n)}const Qo=function(e,n,r,t,a){return l.useMemo(function(){if(!r||t===!1)return e;var c=n.options,u=n.label,o=n.value,s=[],i=typeof t=="function",d=r.toUpperCase(),f=i?t:function(v,p){return a?vn(p[a],d):p[c]?vn(p[u!=="children"?u:"label"],d):vn(p[o],d)},h=i?function(v){return wn(v)}:function(v){return v};return e.forEach(function(v){if(v[c]){var p=f(r,h(v));if(p)s.push(v);else{var y=v[c].filter(function(m){return f(r,h(m))});y.length&&s.push(B(B({},v),{},E({},c,y)))}return}f(r,h(v))&&s.push(v)}),s},[e,t,a,r,n])};var Qn=0,Zo=fr();function ei(){var e;return Zo?(e=Qn,Qn+=1):e="TEST_OR_SSR",e}function Ga(e){var n=l.useState(),r=ie(n,2),t=r[0],a=r[1];return l.useEffect(function(){a("rc_select_".concat(ei()))},[]),e||t}var ti=["children","value"],ni=["children"];function ai(e){var n=e,r=n.key,t=n.props,a=t.children,c=t.value,u=pt(t,ti);return B({key:r,value:c!==void 0?c:r,children:a},u)}function Ba(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ba(e).map(function(r,t){if(!l.isValidElement(r)||!r.type)return null;var a=r,c=a.type.isSelectOptGroup,u=a.key,o=a.props,s=o.children,i=pt(o,ni);return n||!c?ai(r):B(B({key:"__RC_SELECT_GRP__".concat(u===null?t:u,"__"),label:u},i),{},{options:Ba(s)})}).filter(function(r){return r})}var ri=function(n,r,t,a,c){return l.useMemo(function(){var u=n,o=!n;o&&(u=Ba(r));var s=new Map,i=new Map,d=function(v,p,y){y&&typeof y=="string"&&v.set(p[y],p)},f=function h(v){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<v.length;y+=1){var m=v[y];!m[t.options]||p?(s.set(m[t.value],m),d(i,m,t.label),d(i,m,a),d(i,m,c)):h(m[t.options],!0)}};return f(u),{options:u,valueOptions:s,labelOptions:i}},[n,r,t,a,c])};function Zn(e){var n=l.useRef();n.current=e;var r=l.useCallback(function(){return n.current.apply(n,arguments)},[]);return r}var oi=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],ii=["inputValue"];function li(e){return!e||It(e)!=="object"}var si=l.forwardRef(function(e,n){var r=e.id,t=e.mode,a=e.prefixCls,c=a===void 0?"rc-select":a,u=e.backfill,o=e.fieldNames,s=e.inputValue,i=e.searchValue,d=e.onSearch,f=e.autoClearSearchValue,h=f===void 0?!0:f,v=e.onSelect,p=e.onDeselect,y=e.dropdownMatchSelectWidth,m=y===void 0?!0:y,C=e.filterOption,N=e.filterSort,x=e.optionFilterProp,S=e.optionLabelProp,w=e.options,k=e.optionRender,K=e.children,g=e.defaultActiveFirstOption,D=e.menuItemSelectedIcon,R=e.virtual,M=e.direction,L=e.listHeight,$=L===void 0?200:L,I=e.listItemHeight,P=I===void 0?20:I,H=e.labelRender,q=e.value,F=e.defaultValue,Z=e.labelInValue,X=e.onChange,me=e.maxCount,Oe=pt(e,oi),we=Ga(r),ge=En(t),he=!!(!w&&K),qe=l.useMemo(function(){return C===void 0&&t==="combobox"?!1:C},[C,t]),re=l.useMemo(function(){return Fa(o,he)},[JSON.stringify(o),he]),Me=xn("",{value:i!==void 0?i:s,postState:function(J){return J||""}}),He=ie(Me,2),ae=He[0],A=He[1],T=ri(w,K,re,x,S),V=T.valueOptions,W=T.labelOptions,_=T.options,U=l.useCallback(function(j){var J=$a(j);return J.map(function(G){var Y,Ce,Te,mt,it;if(li(G))Y=G;else{var gt;Te=G.key,Ce=G.label,Y=(gt=G.value)!==null&&gt!==void 0?gt:Te}var et=V.get(Y);if(et){var Ct;Ce===void 0&&(Ce=et==null?void 0:et[S||re.label]),Te===void 0&&(Te=(Ct=et==null?void 0:et.key)!==null&&Ct!==void 0?Ct:Y),mt=et==null?void 0:et.disabled,it=et==null?void 0:et.title}return{label:Ce,value:Y,key:Te,disabled:mt,title:it}})},[re,S,V]),ce=xn(F,{value:q}),ue=ie(ce,2),oe=ue[0],Ne=ue[1],te=l.useMemo(function(){var j,J=ge&&oe===null?[]:oe,G=U(J);return t==="combobox"&&To((j=G[0])===null||j===void 0?void 0:j.value)?[]:G},[oe,U,t,ge]),Re=Jo(te,V),pe=ie(Re,2),be=pe[0],Ge=pe[1],Le=l.useMemo(function(){if(!t&&be.length===1){var j=be[0];if(j.value===null&&(j.label===null||j.label===void 0))return[]}return be.map(function(J){var G;return B(B({},J),{},{label:(G=typeof H=="function"?H(J):J.label)!==null&&G!==void 0?G:J.value})})},[t,be,H]),De=l.useMemo(function(){return new Set(be.map(function(j){return j.value}))},[be]);l.useEffect(function(){if(t==="combobox"){var j,J=(j=be[0])===null||j===void 0?void 0:j.value;A(Oo(J)?String(J):"")}},[be]);var ye=Zn(function(j,J){var G=J??j;return E(E({},re.value,j),re.label,G)}),ne=l.useMemo(function(){if(t!=="tags")return _;var j=Pe(_),J=function(Y){return V.has(Y)};return Pe(be).sort(function(G,Y){return G.value<Y.value?-1:1}).forEach(function(G){var Y=G.value;J(Y)||j.push(ye(Y,G.label))}),j},[ye,_,V,be,t]),z=Qo(ne,re,ae,qe,x),O=l.useMemo(function(){return t!=="tags"||!ae||z.some(function(j){return j[x||"value"]===ae})||z.some(function(j){return j[re.value]===ae})?z:[ye(ae)].concat(Pe(z))},[ye,x,t,z,ae,re]),We=function j(J){var G=Pe(J).sort(function(Y,Ce){return N(Y,Ce,{searchValue:ae})});return G.map(function(Y){return Array.isArray(Y.options)?B(B({},Y),{},{options:Y.options.length>0?j(Y.options):Y.options}):Y})},ze=l.useMemo(function(){return N?We(O):O},[O,N,ae]),Be=l.useMemo(function(){return Ho(ze,{fieldNames:re,childrenAsData:he})},[ze,re,he]),ke=function(J){var G=U(J);if(Ne(G),X&&(G.length!==be.length||G.some(function(Te,mt){var it;return((it=be[mt])===null||it===void 0?void 0:it.value)!==(Te==null?void 0:Te.value)}))){var Y=Z?G:G.map(function(Te){return Te.value}),Ce=G.map(function(Te){return wn(Ge(Te.value))});X(ge?Y:Y[0],ge?Ce:Ce[0])}},bt=l.useState(null),Ke=ie(bt,2),Ye=Ke[0],ee=Ke[1],fe=l.useState(0),Ve=ie(fe,2),Ie=Ve[0],Fe=Ve[1],Ze=g!==void 0?g:t!=="combobox",Xe=l.useCallback(function(j,J){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Y=G.source,Ce=Y===void 0?"keyboard":Y;Fe(J),u&&t==="combobox"&&j!==null&&Ce==="keyboard"&&ee(String(j))},[u,t]),st=function(J,G,Y){var Ce=function(){var ve,le=Ge(J);return[Z?{label:le==null?void 0:le[re.label],value:J,key:(ve=le==null?void 0:le.key)!==null&&ve!==void 0?ve:J}:J,wn(le)]};if(G&&v){var Te=Ce(),mt=ie(Te,2),it=mt[0],gt=mt[1];v(it,gt)}else if(!G&&p&&Y!=="clear"){var et=Ce(),Ct=ie(et,2),Rt=Ct[0],Ut=Ct[1];p(Rt,Ut)}},nt=Zn(function(j,J){var G,Y=ge?J.selected:!0;Y?G=ge?[].concat(Pe(be),[j]):[j]:G=be.filter(function(Ce){return Ce.value!==j}),ke(G),st(j,Y),t==="combobox"?ee(""):(!En||h)&&(A(""),ee(""))}),ct=function(J,G){ke(J);var Y=G.type,Ce=G.values;(Y==="remove"||Y==="clear")&&Ce.forEach(function(Te){st(Te.value,!1,Y)})},Ue=function(J,G){if(A(J),ee(null),G.source==="submit"){var Y=(J||"").trim();if(Y){var Ce=Array.from(new Set([].concat(Pe(De),[Y])));ke(Ce),st(Y,!0),A("")}return}G.source!=="blur"&&(t==="combobox"&&ke(J),d==null||d(J))},Ht=function(J){var G=J;t!=="tags"&&(G=J.map(function(Ce){var Te=W.get(Ce);return Te==null?void 0:Te.value}).filter(function(Ce){return Ce!==void 0}));var Y=Array.from(new Set([].concat(Pe(De),Pe(G))));ke(Y),Y.forEach(function(Ce){st(Ce,!0)})},wt=l.useMemo(function(){var j=R!==!1&&m!==!1;return B(B({},T),{},{flattenOptions:Be,onActiveValue:Xe,defaultActiveFirstOption:Ze,onSelect:nt,menuItemSelectedIcon:D,rawValues:De,fieldNames:re,virtual:j,direction:M,listHeight:$,listItemHeight:P,childrenAsData:he,maxCount:me,optionRender:k})},[me,T,Be,Xe,Ze,nt,D,De,re,R,m,M,$,P,he,k]);return l.createElement(Tn.Provider,{value:wt},l.createElement(Ha,Qe({},Oe,{id:we,prefixCls:c,ref:n,omitDomProps:ii,mode:t,displayValues:Le,onDisplayValuesChange:ct,direction:M,searchValue:ae,onSearch:Ue,autoClearSearchValue:h,onSearchSplit:Ht,dropdownMatchSelectWidth:m,OptionList:Xo,emptyOptions:!Be.length,activeValue:Ye,activeDescendantId:"".concat(we,"_list_").concat(Ie)})))}),Ua=si;Ua.Option=za;Ua.OptGroup=Wa;function ft(e,n){return e[n]}var ci=["children"];function qa(e,n){return"".concat(e,"-").concat(n)}function ui(e){return e&&e.type&&e.type.isTreeNode}function Qt(e,n){return e??n}function on(e){var n=e||{},r=n.title,t=n._title,a=n.key,c=n.children,u=r||"title";return{title:u,_title:t||[u],key:a||"key",children:c||"children"}}function di(e){function n(r){var t=ba(r);return t.map(function(a){if(!ui(a))return Kt(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var c=a.key,u=a.props,o=u.children,s=pt(u,ci),i=B({key:c},s),d=n(o);return d.length&&(i.children=d),i}).filter(function(a){return a})}return n(e)}function mn(e,n,r){var t=on(r),a=t._title,c=t.key,u=t.children,o=new Set(n===!0?[]:n),s=[];function i(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return d.map(function(h,v){for(var p=qa(f?f.pos:"0",v),y=Qt(h[c],p),m,C=0;C<a.length;C+=1){var N=a[C];if(h[N]!==void 0){m=h[N];break}}var x=Object.assign(Ra(h,[].concat(Pe(a),[c,u])),{title:m,key:y,parent:f,pos:p,children:null,data:h,isStart:[].concat(Pe(f?f.isStart:[]),[v===0]),isEnd:[].concat(Pe(f?f.isEnd:[]),[v===d.length-1])});return s.push(x),n===!0||o.has(y)?x.children=i(h[u]||[],x):x.children=[],x})}return i(e),s}function fi(e,n,r){var t={};It(r)==="object"?t=r:t={externalGetKey:r},t=t||{};var a=t,c=a.childrenPropName,u=a.externalGetKey,o=a.fieldNames,s=on(o),i=s.key,d=s.children,f=c||d,h;u?typeof u=="string"?h=function(y){return y[u]}:typeof u=="function"&&(h=function(y){return u(y)}):h=function(y,m){return Qt(y[i],m)};function v(p,y,m,C){var N=p?p[f]:e,x=p?qa(m.pos,y):"0",S=p?[].concat(Pe(C),[p]):[];if(p){var w=h(p,x),k={node:p,index:y,pos:x,key:w,parentPos:m.node?m.pos:null,level:m.level+1,nodes:S};n(k)}N&&N.forEach(function(K,g){v(K,g,{node:p,pos:x,level:m?m.level+1:-1},S)})}v(null)}function Ya(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.initWrapper,t=n.processEntity,a=n.onProcessFinished,c=n.externalGetKey,u=n.childrenPropName,o=n.fieldNames,s=arguments.length>2?arguments[2]:void 0,i=c||s,d={},f={},h={posEntities:d,keyEntities:f};return r&&(h=r(h)||h),fi(e,function(v){var p=v.node,y=v.index,m=v.pos,C=v.key,N=v.parentPos,x=v.level,S=v.nodes,w={node:p,nodes:S,index:y,key:C,pos:m,level:x},k=Qt(C,m);d[m]=w,f[k]=w,w.parent=d[N],w.parent&&(w.parent.children=w.parent.children||[],w.parent.children.push(w)),t&&t(w,h)},{externalGetKey:i,childrenPropName:u,fieldNames:o}),a&&a(h),h}function Yt(e,n){var r=n.expandedKeys,t=n.selectedKeys,a=n.loadedKeys,c=n.loadingKeys,u=n.checkedKeys,o=n.halfCheckedKeys,s=n.dragOverNodeKey,i=n.dropPosition,d=n.keyEntities,f=ft(d,e),h={eventKey:e,expanded:r.indexOf(e)!==-1,selected:t.indexOf(e)!==-1,loaded:a.indexOf(e)!==-1,loading:c.indexOf(e)!==-1,checked:u.indexOf(e)!==-1,halfChecked:o.indexOf(e)!==-1,pos:String(f?f.pos:""),dragOver:s===e&&i===0,dragOverGapTop:s===e&&i===-1,dragOverGapBottom:s===e&&i===1};return h}function Je(e){var n=e.data,r=e.expanded,t=e.selected,a=e.checked,c=e.loaded,u=e.loading,o=e.halfChecked,s=e.dragOver,i=e.dragOverGapTop,d=e.dragOverGapBottom,f=e.pos,h=e.active,v=e.eventKey,p=B(B({},n),{},{expanded:r,selected:t,checked:a,loaded:c,loading:u,halfChecked:o,dragOver:s,dragOverGapTop:i,dragOverGapBottom:d,pos:f,active:h,key:v});return"props"in p||Object.defineProperty(p,"props",{get:function(){return Kt(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),p}function Xa(e,n){var r=new Set;return e.forEach(function(t){n.has(t)||r.add(t)}),r}function vi(e){var n=e||{},r=n.disabled,t=n.disableCheckbox,a=n.checkable;return!!(r||t)||a===!1}function mi(e,n,r,t){for(var a=new Set(e),c=new Set,u=0;u<=r;u+=1){var o=n.get(u)||new Set;o.forEach(function(f){var h=f.key,v=f.node,p=f.children,y=p===void 0?[]:p;a.has(h)&&!t(v)&&y.filter(function(m){return!t(m.node)}).forEach(function(m){a.add(m.key)})})}for(var s=new Set,i=r;i>=0;i-=1){var d=n.get(i)||new Set;d.forEach(function(f){var h=f.parent,v=f.node;if(!(t(v)||!f.parent||s.has(f.parent.key))){if(t(f.parent.node)){s.add(h.key);return}var p=!0,y=!1;(h.children||[]).filter(function(m){return!t(m.node)}).forEach(function(m){var C=m.key,N=a.has(C);p&&!N&&(p=!1),!y&&(N||c.has(C))&&(y=!0)}),p&&a.add(h.key),y&&c.add(h.key),s.add(h.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Xa(c,a))}}function gi(e,n,r,t,a){for(var c=new Set(e),u=new Set(n),o=0;o<=t;o+=1){var s=r.get(o)||new Set;s.forEach(function(h){var v=h.key,p=h.node,y=h.children,m=y===void 0?[]:y;!c.has(v)&&!u.has(v)&&!a(p)&&m.filter(function(C){return!a(C.node)}).forEach(function(C){c.delete(C.key)})})}u=new Set;for(var i=new Set,d=t;d>=0;d-=1){var f=r.get(d)||new Set;f.forEach(function(h){var v=h.parent,p=h.node;if(!(a(p)||!h.parent||i.has(h.parent.key))){if(a(h.parent.node)){i.add(v.key);return}var y=!0,m=!1;(v.children||[]).filter(function(C){return!a(C.node)}).forEach(function(C){var N=C.key,x=c.has(N);y&&!x&&(y=!1),!m&&(x||u.has(N))&&(m=!0)}),y||c.delete(v.key),m&&u.add(v.key),i.add(v.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(Xa(u,c))}}function Gt(e,n,r,t){var a=[],c;c=vi;var u=new Set(e.filter(function(d){var f=!!ft(r,d);return f||a.push(d),f})),o=new Map,s=0;Object.keys(r).forEach(function(d){var f=r[d],h=f.level,v=o.get(h);v||(v=new Set,o.set(h,v)),v.add(f),s=Math.max(s,h)}),Kt(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(d){return"'".concat(d,"'")}).join(", ")));var i;return n===!0?i=mi(u,o,s,c):i=gi(u,n.halfCheckedKeys,o,s,c),i}function hi(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=vr(e))||n){r&&(e=r);var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(i){throw i},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var i=r.next();return u=i.done,i},e:function(i){o=!0,c=i},f:function(){try{u||r.return==null||r.return()}finally{if(o)throw c}}}}var pi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v224h704V96c0-17.7-14.3-32-32-32zM288 232c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zM160 928c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V704H160v224zm128-136c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM160 640h704V384H160v256zm128-168c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"}}]},name:"database",theme:"filled"},yi=function(n,r){return l.createElement(Ca,Qe({},n,{ref:r,icon:pi}))},bi=l.forwardRef(yi),Ci={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},xi=function(n,r){return l.createElement(Ca,Qe({},n,{ref:r,icon:Ci}))},Si=l.forwardRef(xi);function Nn(e){var n=l.useRef();n.current=e;var r=l.useCallback(function(){for(var t,a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(t=n.current)===null||t===void 0?void 0:t.call.apply(t,[n].concat(c))},[]);return r}function wi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ea=wi()?l.useLayoutEffect:l.useEffect,Ei=function(n,r){var t=l.useRef(!0);ea(function(){return n(t.current)},r),ea(function(){return t.current=!1,function(){t.current=!0}},[])},ta=function(n,r){Ei(function(t){if(!t)return n()},r)};function na(e){var n=l.useRef(!1),r=l.useState(e),t=ie(r,2),a=t[0],c=t[1];l.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]);function u(o,s){s&&n.current||c(o)}return[a,u]}function gn(e){return e!==void 0}function aa(e,n){var r=n||{},t=r.defaultValue,a=r.value,c=r.onChange,u=r.postState,o=na(function(){return gn(a)?a:gn(t)?typeof t=="function"?t():t:typeof e=="function"?e():e}),s=ie(o,2),i=s[0],d=s[1],f=a!==void 0?a:i,h=u?u(f):f,v=Nn(c),p=na([f]),y=ie(p,2),m=y[0],C=y[1];ta(function(){var x=m[0];i!==x&&v(i,x)},[m]),ta(function(){gn(a)||d(a)},[a]);var N=Nn(function(x,S){d(x,S),C([f],S)});return[h,N]}var kn={},Ni=function(n){};function ki(e,n){}function Di(e,n){}function Ki(){kn={}}function Ja(e,n,r){!n&&!kn[r]&&(e(!1,r),kn[r]=!0)}function Vt(e,n){Ja(ki,e,n)}function Ii(e,n){Ja(Di,e,n)}Vt.preMessage=Ni;Vt.resetWarned=Ki;Vt.noteOnce=Ii;const Oi=function(e){var n=l.useRef({valueLabels:new Map});return l.useMemo(function(){var r=n.current.valueLabels,t=new Map,a=e.map(function(c){var u=c.value,o=c.label,s=o??r.get(u);return t.set(u,s),B(B({},c),{},{label:s})});return n.current.valueLabels=t,[a]},[e])};var Ti=function(n,r,t,a){return l.useMemo(function(){var c=function(v){return v.map(function(p){var y=p.value;return y})},u=c(n),o=c(r),s=u.filter(function(h){return!a[h]}),i=u,d=o;if(t){var f=Gt(u,!0,a);i=f.checkedKeys,d=f.halfCheckedKeys}return[Array.from(new Set([].concat(Pe(s),Pe(i)))),d]},[n,r,t,a])},Mi=function(n){return Array.isArray(n)?n:n!==void 0?[n]:[]},Ri=function(n){var r=n||{},t=r.label,a=r.value,c=r.children;return{_title:t?[t]:["title","label"],value:a||"value",key:a||"value",children:c||"children"}},Dn=function(n){return!n||n.disabled||n.disableCheckbox||n.checkable===!1},Pi=function(n,r){var t=[],a=function c(u){u.forEach(function(o){var s=o[r.children];s&&(t.push(o[r.value]),c(s))})};return a(n),t},ra=function(n){return n==null};const _i=function(e,n){return l.useMemo(function(){var r=Ya(e,{fieldNames:n,initWrapper:function(a){return B(B({},a),{},{valueEntities:new Map})},processEntity:function(a,c){var u=a.node[n.value];c.valueEntities.set(u,a)}});return r},[e,n])};function Kn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return Ee.Children.forEach(e,function(t){t==null&&!n.keepEmpty||(Array.isArray(t)?r=r.concat(Kn(t)):xa.isFragment(t)&&t.props?r=r.concat(Kn(t.props.children,n)):r.push(t))}),r}var Mn=function(){return null},Li=["children","value"];function Qa(e){return Kn(e).map(function(n){if(!l.isValidElement(n)||!n.type)return null;var r=n,t=r.key,a=r.props,c=a.children,u=a.value,o=pt(a,Li),s=B({key:t,value:u},o),i=Qa(c);return i.length&&(s.children=i),s}).filter(function(n){return n})}function In(e){if(!e)return e;var n=B({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return Vt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),n}}),n}function Ai(e,n,r,t,a,c){var u=null,o=null;function s(){function i(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(v,p){var y="".concat(f,"-").concat(p),m=v[c.value],C=r.includes(m),N=i(v[c.children]||[],y,C),x=l.createElement(Mn,v,N.map(function(w){return w.node}));if(n===m&&(u=x),C){var S={pos:y,node:x,children:N};return h||o.push(S),S}return null}).filter(function(v){return v})}o||(o=[],i(t),o.sort(function(d,f){var h=d.node.props.value,v=f.node.props.value,p=r.indexOf(h),y=r.indexOf(v);return p-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return Vt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),s(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Vt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),s(),a?o:o.map(function(d){var f=d.node;return f})}})}var ji=function(n,r,t){var a=t.fieldNames,c=t.treeNodeFilterProp,u=t.filterTreeNode,o=a.children;return l.useMemo(function(){if(!r||u===!1)return n;var s=typeof u=="function"?u:function(d,f){return String(f[c]).toUpperCase().includes(r.toUpperCase())},i=function d(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return f.reduce(function(v,p){var y=p[o],m=h||s(r,In(p)),C=d(y||[],m);return(m||C.length)&&v.push(B(B({},p),{},E({isLeaf:void 0},o,C))),v},[])};return i(n)},[n,r,o,c,u])};function oa(e){var n=l.useRef();n.current=e;var r=l.useCallback(function(){return n.current.apply(n,arguments)},[]);return r}function $i(e,n){var r=n.id,t=n.pId,a=n.rootPId,c=new Map,u=[];return e.forEach(function(o){var s=o[r],i=B(B({},o),{},{key:o.key||s});c.set(s,i)}),c.forEach(function(o){var s=o[t],i=c.get(s);i?(i.children=i.children||[],i.children.push(o)):(s===a||a===null)&&u.push(o)}),u}function Vi(e,n,r){return l.useMemo(function(){if(e){if(r){var t=B({id:"id",pId:"pId",rootPId:null},It(r)==="object"?r:{});return $i(e,t)}return e}return Qa(n)},[n,r,e])}var Za=l.createContext(null),Rn=l.createContext(null),er=l.createContext({}),Fi=function(n){var r=n.dropPosition,t=n.dropLevelOffset,a=n.indent,c={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case-1:c.top=0,c.left=-t*a;break;case 1:c.bottom=0,c.left=-t*a;break;case 0:c.bottom=0,c.left=a;break}return Ee.createElement("div",{style:c})},Hi=function(n){for(var r=n.prefixCls,t=n.level,a=n.isStart,c=n.isEnd,u="".concat(r,"-indent-unit"),o=[],s=0;s<t;s+=1)o.push(l.createElement("span",{key:s,className:at(u,E(E({},"".concat(u,"-start"),a[s]),"".concat(u,"-end"),c[s]))}));return l.createElement("span",{"aria-hidden":"true",className:"".concat(r,"-indent")},o)};const Wi=l.memo(Hi);var zi=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],ia="open",la="close",Gi="---",ln=function(n){var r,t,a=n.eventKey,c=n.className,u=n.style,o=n.dragOver,s=n.dragOverGapTop,i=n.dragOverGapBottom,d=n.isLeaf,f=n.isStart,h=n.isEnd,v=n.expanded,p=n.selected,y=n.checked,m=n.halfChecked,C=n.loading,N=n.domRef,x=n.active,S=n.data,w=n.onMouseMove,k=n.selectable,K=pt(n,zi),g=Ee.useContext(Rn),D=Ee.useContext(er),R=Ee.useRef(null),M=Ee.useState(!1),L=ie(M,2),$=L[0],I=L[1],P=Ee.useMemo(function(){var z;return!!(g.disabled||n.disabled||(z=D.nodeDisabled)!==null&&z!==void 0&&z.call(D,S))},[g.disabled,n.disabled,D.nodeDisabled,S]),H=Ee.useMemo(function(){return!g.checkable||n.checkable===!1?!1:g.checkable},[g.checkable,n.checkable]),q=function(O){P||g.onNodeSelect(O,Je(n))},F=function(O){P||!H||n.disableCheckbox||g.onNodeCheck(O,Je(n),!y)},Z=Ee.useMemo(function(){return typeof k=="boolean"?k:g.selectable},[k,g.selectable]),X=function(O){g.onNodeClick(O,Je(n)),Z?q(O):F(O)},me=function(O){g.onNodeDoubleClick(O,Je(n))},Oe=function(O){g.onNodeMouseEnter(O,Je(n))},we=function(O){g.onNodeMouseLeave(O,Je(n))},ge=function(O){g.onNodeContextMenu(O,Je(n))},he=Ee.useMemo(function(){return!!(g.draggable&&(!g.draggable.nodeDraggable||g.draggable.nodeDraggable(S)))},[g.draggable,S]),qe=function(O){O.stopPropagation(),I(!0),g.onNodeDragStart(O,n);try{O.dataTransfer.setData("text/plain","")}catch{}},re=function(O){O.preventDefault(),O.stopPropagation(),g.onNodeDragEnter(O,n)},Me=function(O){O.preventDefault(),O.stopPropagation(),g.onNodeDragOver(O,n)},He=function(O){O.stopPropagation(),g.onNodeDragLeave(O,n)},ae=function(O){O.stopPropagation(),I(!1),g.onNodeDragEnd(O,n)},A=function(O){O.preventDefault(),O.stopPropagation(),I(!1),g.onNodeDrop(O,n)},T=function(O){C||g.onNodeExpand(O,Je(n))},V=Ee.useMemo(function(){var z=ft(g.keyEntities,a)||{},O=z.children;return!!(O||[]).length},[g.keyEntities,a]),W=Ee.useMemo(function(){return d===!1?!1:d||!g.loadData&&!V||g.loadData&&n.loaded&&!V},[d,g.loadData,V,n.loaded]);Ee.useEffect(function(){C||typeof g.loadData=="function"&&v&&!W&&!n.loaded&&g.onNodeLoad(Je(n))},[C,g.loadData,g.onNodeLoad,v,W,n]);var _=Ee.useMemo(function(){var z;return(z=g.draggable)!==null&&z!==void 0&&z.icon?Ee.createElement("span",{className:"".concat(g.prefixCls,"-draggable-icon")},g.draggable.icon):null},[g.draggable]),U=function(O){var We=n.switcherIcon||g.switcherIcon;return typeof We=="function"?We(B(B({},n),{},{isLeaf:O})):We},ce=function(){if(W){var O=U(!0);return O!==!1?Ee.createElement("span",{className:at("".concat(g.prefixCls,"-switcher"),"".concat(g.prefixCls,"-switcher-noop"))},O):null}var We=U(!1);return We!==!1?Ee.createElement("span",{onClick:T,className:at("".concat(g.prefixCls,"-switcher"),"".concat(g.prefixCls,"-switcher_").concat(v?ia:la))},We):null},ue=Ee.useMemo(function(){if(!H)return null;var z=typeof H!="boolean"?H:null;return Ee.createElement("span",{className:at("".concat(g.prefixCls,"-checkbox"),E(E(E({},"".concat(g.prefixCls,"-checkbox-checked"),y),"".concat(g.prefixCls,"-checkbox-indeterminate"),!y&&m),"".concat(g.prefixCls,"-checkbox-disabled"),P||n.disableCheckbox)),onClick:F,role:"checkbox","aria-checked":m?"mixed":y,"aria-disabled":P||n.disableCheckbox,"aria-label":"Select ".concat(typeof n.title=="string"?n.title:"tree node")},z)},[H,y,m,P,n.disableCheckbox,n.title]),oe=Ee.useMemo(function(){return W?null:v?ia:la},[W,v]),Ne=Ee.useMemo(function(){return Ee.createElement("span",{className:at("".concat(g.prefixCls,"-iconEle"),"".concat(g.prefixCls,"-icon__").concat(oe||"docu"),E({},"".concat(g.prefixCls,"-icon_loading"),C))})},[g.prefixCls,oe,C]),te=Ee.useMemo(function(){var z=!!g.draggable,O=!n.disabled&&z&&g.dragOverNodeKey===a;return O?g.dropIndicatorRender({dropPosition:g.dropPosition,dropLevelOffset:g.dropLevelOffset,indent:g.indent,prefixCls:g.prefixCls,direction:g.direction}):null},[g.dropPosition,g.dropLevelOffset,g.indent,g.prefixCls,g.direction,g.draggable,g.dragOverNodeKey,g.dropIndicatorRender]),Re=Ee.useMemo(function(){var z=n.title,O=z===void 0?Gi:z,We="".concat(g.prefixCls,"-node-content-wrapper"),ze;if(g.showIcon){var Be=n.icon||g.icon;ze=Be?Ee.createElement("span",{className:at("".concat(g.prefixCls,"-iconEle"),"".concat(g.prefixCls,"-icon__customize"))},typeof Be=="function"?Be(n):Be):Ne}else g.loadData&&C&&(ze=Ne);var ke;return typeof O=="function"?ke=O(S):g.titleRender?ke=g.titleRender(S):ke=O,Ee.createElement("span",{ref:R,title:typeof O=="string"?O:"",className:at(We,"".concat(We,"-").concat(oe||"normal"),E({},"".concat(g.prefixCls,"-node-selected"),!P&&(p||$))),onMouseEnter:Oe,onMouseLeave:we,onContextMenu:ge,onClick:X,onDoubleClick:me},ze,Ee.createElement("span",{className:"".concat(g.prefixCls,"-title")},ke),te)},[g.prefixCls,g.showIcon,n,g.icon,Ne,g.titleRender,S,oe,Oe,we,ge,X,me]),pe=Bt(K,{aria:!0,data:!0}),be=ft(g.keyEntities,a)||{},Ge=be.level,Le=h[h.length-1],De=!P&&he,ye=g.draggingNodeKey===a,ne=k!==void 0?{"aria-selected":!!k}:void 0;return Ee.createElement("div",Qe({ref:N,role:"treeitem","aria-expanded":d?void 0:v,className:at(c,"".concat(g.prefixCls,"-treenode"),(t={},E(E(E(E(E(E(E(E(E(E(t,"".concat(g.prefixCls,"-treenode-disabled"),P),"".concat(g.prefixCls,"-treenode-switcher-").concat(v?"open":"close"),!d),"".concat(g.prefixCls,"-treenode-checkbox-checked"),y),"".concat(g.prefixCls,"-treenode-checkbox-indeterminate"),m),"".concat(g.prefixCls,"-treenode-selected"),p),"".concat(g.prefixCls,"-treenode-loading"),C),"".concat(g.prefixCls,"-treenode-active"),x),"".concat(g.prefixCls,"-treenode-leaf-last"),Le),"".concat(g.prefixCls,"-treenode-draggable"),he),"dragging",ye),E(E(E(E(E(E(E(t,"drop-target",g.dropTargetKey===a),"drop-container",g.dropContainerKey===a),"drag-over",!P&&o),"drag-over-gap-top",!P&&s),"drag-over-gap-bottom",!P&&i),"filter-node",(r=g.filterTreeNode)===null||r===void 0?void 0:r.call(g,Je(n))),"".concat(g.prefixCls,"-treenode-leaf"),W))),style:u,draggable:De,onDragStart:De?qe:void 0,onDragEnter:he?re:void 0,onDragOver:he?Me:void 0,onDragLeave:he?He:void 0,onDrop:he?A:void 0,onDragEnd:he?ae:void 0,onMouseMove:w},ne,pe),Ee.createElement(Wi,{prefixCls:g.prefixCls,level:Ge,isStart:f,isEnd:h}),_,ce(),ue,Re)};ln.isTreeNode=1;function Bi(e,n){var r=l.useState(!1),t=ie(r,2),a=t[0],c=t[1];Xt(function(){if(a)return e(),function(){n()}},[a]),Xt(function(){return c(!0),function(){c(!1)}},[])}var Ui=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],qi=l.forwardRef(function(e,n){var r=e.className,t=e.style,a=e.motion,c=e.motionNodes,u=e.motionType,o=e.onMotionStart,s=e.onMotionEnd,i=e.active,d=e.treeNodeRequiredProps,f=pt(e,Ui),h=l.useState(!0),v=ie(h,2),p=v[0],y=v[1],m=l.useContext(Rn),C=m.prefixCls,N=c&&u!=="hide";Xt(function(){c&&N!==p&&y(N)},[c]);var x=function(){c&&o()},S=l.useRef(!1),w=function(){c&&!S.current&&(S.current=!0,s())};Bi(x,w);var k=function(g){N===g&&w()};return c?l.createElement(mr,Qe({ref:n,visible:p},a,{motionAppear:u==="show",onVisibleChanged:k}),function(K,g){var D=K.className,R=K.style;return l.createElement("div",{ref:g,className:at("".concat(C,"-treenode-motion"),D),style:R},c.map(function(M){var L=Object.assign({},(Pa(M.data),M.data)),$=M.title,I=M.key,P=M.isStart,H=M.isEnd;delete L.children;var q=Yt(I,d);return l.createElement(ln,Qe({},L,q,{title:$,active:i,data:M.data,key:I,isStart:P,isEnd:H}))}))}):l.createElement(ln,Qe({domRef:n,className:r,style:t},f,{active:i}))});function Yi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.length,t=n.length;if(Math.abs(r-t)!==1)return{add:!1,key:null};function a(c,u){var o=new Map;c.forEach(function(i){o.set(i,!0)});var s=u.filter(function(i){return!o.has(i)});return s.length===1?s[0]:null}return r<t?{add:!0,key:a(e,n)}:{add:!1,key:a(n,e)}}function sa(e,n,r){var t=e.findIndex(function(o){return o.key===r}),a=e[t+1],c=n.findIndex(function(o){return o.key===r});if(a){var u=n.findIndex(function(o){return o.key===a.key});return n.slice(c+1,u)}return n.slice(c+1)}var Xi=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],ca={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ji=function(){},Ft="RC_TREE_MOTION_".concat(Math.random()),On={key:Ft},tr={key:Ft,level:0,index:0,pos:"0",node:On,nodes:[On]},ua={parent:null,children:[],pos:tr.pos,data:On,title:null,key:Ft,isStart:[],isEnd:[]};function da(e,n,r,t){return n===!1||!r?e:e.slice(0,Math.ceil(r/t)+1)}function fa(e){var n=e.key,r=e.pos;return Qt(n,r)}function Qi(e){for(var n=String(e.data.key),r=e;r.parent;)r=r.parent,n="".concat(r.data.key," > ").concat(n);return n}var Zi=l.forwardRef(function(e,n){var r=e.prefixCls,t=e.data;e.selectable,e.checkable;var a=e.expandedKeys,c=e.selectedKeys,u=e.checkedKeys,o=e.loadedKeys,s=e.loadingKeys,i=e.halfCheckedKeys,d=e.keyEntities,f=e.disabled,h=e.dragging,v=e.dragOverNodeKey,p=e.dropPosition,y=e.motion,m=e.height,C=e.itemHeight,N=e.virtual,x=e.scrollWidth,S=e.focusable,w=e.activeItem,k=e.focused,K=e.tabIndex,g=e.onKeyDown,D=e.onFocus,R=e.onBlur,M=e.onActiveChange,L=e.onListChangeStart,$=e.onListChangeEnd,I=pt(e,Xi),P=l.useRef(null),H=l.useRef(null);l.useImperativeHandle(n,function(){return{scrollTo:function(Re){P.current.scrollTo(Re)},getIndentWidth:function(){return H.current.offsetWidth}}});var q=l.useState(a),F=ie(q,2),Z=F[0],X=F[1],me=l.useState(t),Oe=ie(me,2),we=Oe[0],ge=Oe[1],he=l.useState(t),qe=ie(he,2),re=qe[0],Me=qe[1],He=l.useState([]),ae=ie(He,2),A=ae[0],T=ae[1],V=l.useState(null),W=ie(V,2),_=W[0],U=W[1],ce=l.useRef(t);ce.current=t;function ue(){var te=ce.current;ge(te),Me(te),T([]),U(null),$()}Xt(function(){X(a);var te=Yi(Z,a);if(te.key!==null)if(te.add){var Re=we.findIndex(function(ye){var ne=ye.key;return ne===te.key}),pe=da(sa(we,t,te.key),N,m,C),be=we.slice();be.splice(Re+1,0,ua),Me(be),T(pe),U("show")}else{var Ge=t.findIndex(function(ye){var ne=ye.key;return ne===te.key}),Le=da(sa(t,we,te.key),N,m,C),De=t.slice();De.splice(Ge+1,0,ua),Me(De),T(Le),U("hide")}else we!==t&&(ge(t),Me(t))},[a,t]),l.useEffect(function(){h||ue()},[h]);var oe=y?re:t,Ne={expandedKeys:a,selectedKeys:c,loadedKeys:o,loadingKeys:s,checkedKeys:u,halfCheckedKeys:i,dragOverNodeKey:v,dropPosition:p,keyEntities:d};return l.createElement(l.Fragment,null,k&&w&&l.createElement("span",{style:ca,"aria-live":"assertive"},Qi(w)),l.createElement("div",null,l.createElement("input",{style:ca,disabled:S===!1||f,tabIndex:S!==!1?K:null,onKeyDown:g,onFocus:D,onBlur:R,value:"",onChange:Ji,"aria-label":"for screen reader"})),l.createElement("div",{className:"".concat(r,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},l.createElement("div",{className:"".concat(r,"-indent")},l.createElement("div",{ref:H,className:"".concat(r,"-indent-unit")}))),l.createElement(Ma,Qe({},I,{data:oe,itemKey:fa,height:m,fullHeight:!1,virtual:N,itemHeight:C,scrollWidth:x,prefixCls:"".concat(r,"-list"),ref:P,role:"tree",onVisibleChange:function(Re){Re.every(function(pe){return fa(pe)!==Ft})&&ue()}}),function(te){var Re=te.pos,pe=Object.assign({},(Pa(te.data),te.data)),be=te.title,Ge=te.key,Le=te.isStart,De=te.isEnd,ye=Qt(Ge,Re);delete pe.key,delete pe.children;var ne=Yt(ye,Ne);return l.createElement(qi,Qe({},pe,ne,{title:be,active:!!w&&Ge===w.key,pos:Re,data:te.data,isStart:Le,isEnd:De,motion:y,motionNodes:Ge===Ft?A:null,motionType:_,onMotionStart:L,onMotionEnd:ue,treeNodeRequiredProps:Ne,onMouseMove:function(){M(null)}}))}))});function Dt(e,n){if(!e)return[];var r=e.slice(),t=r.indexOf(n);return t>=0&&r.splice(t,1),r}function Tt(e,n){var r=(e||[]).slice();return r.indexOf(n)===-1&&r.push(n),r}function Pn(e){return e.split("-")}function el(e,n){var r=[],t=ft(n,e);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(u){var o=u.key,s=u.children;r.push(o),a(s)})}return a(t.children),r}function tl(e){if(e.parent){var n=Pn(e.pos);return Number(n[n.length-1])===e.parent.children.length-1}return!1}function nl(e){var n=Pn(e.pos);return Number(n[n.length-1])===0}function va(e,n,r,t,a,c,u,o,s,i){var d,f=e.clientX,h=e.clientY,v=e.target.getBoundingClientRect(),p=v.top,y=v.height,m=(i==="rtl"?-1:1)*(((a==null?void 0:a.x)||0)-f),C=(m-12)/t,N=s.filter(function(H){var q;return(q=o[H])===null||q===void 0||(q=q.children)===null||q===void 0?void 0:q.length}),x=ft(o,r.eventKey);if(h<p+y/2){var S=u.findIndex(function(H){return H.key===x.key}),w=S<=0?0:S-1,k=u[w].key;x=ft(o,k)}var K=x.key,g=x,D=x.key,R=0,M=0;if(!N.includes(K))for(var L=0;L<C&&tl(x);L+=1)x=x.parent,M+=1;var $=n.data,I=x.node,P=!0;return nl(x)&&x.level===0&&h<p+y/2&&c({dragNode:$,dropNode:I,dropPosition:-1})&&x.key===r.eventKey?R=-1:(g.children||[]).length&&N.includes(D)?c({dragNode:$,dropNode:I,dropPosition:0})?R=0:P=!1:M===0?C>-1.5?c({dragNode:$,dropNode:I,dropPosition:1})?R=1:P=!1:c({dragNode:$,dropNode:I,dropPosition:0})?R=0:c({dragNode:$,dropNode:I,dropPosition:1})?R=1:P=!1:c({dragNode:$,dropNode:I,dropPosition:1})?R=1:P=!1,{dropPosition:R,dropLevelOffset:M,dropTargetKey:x.key,dropTargetPos:x.pos,dragOverNodeKey:D,dropContainerKey:R===0?null:((d=x.parent)===null||d===void 0?void 0:d.key)||null,dropAllowed:P}}function ma(e,n){if(e){var r=n.multiple;return r?e.slice():e.length?[e[0]]:e}}function hn(e){if(!e)return null;var n;if(Array.isArray(e))n={checkedKeys:e,halfCheckedKeys:void 0};else if(It(e)==="object")n={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return Kt(!1,"`checkedKeys` is not an array or an object"),null;return n}function ga(e,n){var r=new Set;function t(a){if(!r.has(a)){var c=ft(n,a);if(c){r.add(a);var u=c.parent,o=c.node;o.disabled||u&&t(u.key)}}}return(e||[]).forEach(function(a){t(a)}),Pe(r)}var al=10,_n=function(e){gr(r,e);var n=hr(r);function r(){var t;pr(this,r);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return t=n.call.apply(n,[this].concat(c)),E(de(t),"destroyed",!1),E(de(t),"delayedDragEnterLogic",void 0),E(de(t),"loadingRetryTimes",{}),E(de(t),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:on()}),E(de(t),"dragStartMousePosition",null),E(de(t),"dragNodeProps",null),E(de(t),"currentMouseOverDroppableNodeKey",null),E(de(t),"listRef",l.createRef()),E(de(t),"onNodeDragStart",function(o,s){var i=t.state,d=i.expandedKeys,f=i.keyEntities,h=t.props.onDragStart,v=s.eventKey;t.dragNodeProps=s,t.dragStartMousePosition={x:o.clientX,y:o.clientY};var p=Dt(d,v);t.setState({draggingNodeKey:v,dragChildrenKeys:el(v,f),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(p),window.addEventListener("dragend",t.onWindowDragEnd),h==null||h({event:o,node:Je(s)})}),E(de(t),"onNodeDragEnter",function(o,s){var i=t.state,d=i.expandedKeys,f=i.keyEntities,h=i.dragChildrenKeys,v=i.flattenNodes,p=i.indent,y=t.props,m=y.onDragEnter,C=y.onExpand,N=y.allowDrop,x=y.direction,S=s.pos,w=s.eventKey;if(t.currentMouseOverDroppableNodeKey!==w&&(t.currentMouseOverDroppableNodeKey=w),!t.dragNodeProps){t.resetDragState();return}var k=va(o,t.dragNodeProps,s,p,t.dragStartMousePosition,N,v,f,d,x),K=k.dropPosition,g=k.dropLevelOffset,D=k.dropTargetKey,R=k.dropContainerKey,M=k.dropTargetPos,L=k.dropAllowed,$=k.dragOverNodeKey;if(h.includes(D)||!L){t.resetDragState();return}if(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach(function(I){clearTimeout(t.delayedDragEnterLogic[I])}),t.dragNodeProps.eventKey!==s.eventKey&&(o.persist(),t.delayedDragEnterLogic[S]=window.setTimeout(function(){if(t.state.draggingNodeKey!==null){var I=Pe(d),P=ft(f,s.eventKey);P&&(P.children||[]).length&&(I=Tt(d,s.eventKey)),t.props.hasOwnProperty("expandedKeys")||t.setExpandedKeys(I),C==null||C(I,{node:Je(s),expanded:!0,nativeEvent:o.nativeEvent})}},800)),t.dragNodeProps.eventKey===D&&g===0){t.resetDragState();return}t.setState({dragOverNodeKey:$,dropPosition:K,dropLevelOffset:g,dropTargetKey:D,dropContainerKey:R,dropTargetPos:M,dropAllowed:L}),m==null||m({event:o,node:Je(s),expandedKeys:d})}),E(de(t),"onNodeDragOver",function(o,s){var i=t.state,d=i.dragChildrenKeys,f=i.flattenNodes,h=i.keyEntities,v=i.expandedKeys,p=i.indent,y=t.props,m=y.onDragOver,C=y.allowDrop,N=y.direction;if(t.dragNodeProps){var x=va(o,t.dragNodeProps,s,p,t.dragStartMousePosition,C,f,h,v,N),S=x.dropPosition,w=x.dropLevelOffset,k=x.dropTargetKey,K=x.dropContainerKey,g=x.dropTargetPos,D=x.dropAllowed,R=x.dragOverNodeKey;d.includes(k)||!D||(t.dragNodeProps.eventKey===k&&w===0?t.state.dropPosition===null&&t.state.dropLevelOffset===null&&t.state.dropTargetKey===null&&t.state.dropContainerKey===null&&t.state.dropTargetPos===null&&t.state.dropAllowed===!1&&t.state.dragOverNodeKey===null||t.resetDragState():S===t.state.dropPosition&&w===t.state.dropLevelOffset&&k===t.state.dropTargetKey&&K===t.state.dropContainerKey&&g===t.state.dropTargetPos&&D===t.state.dropAllowed&&R===t.state.dragOverNodeKey||t.setState({dropPosition:S,dropLevelOffset:w,dropTargetKey:k,dropContainerKey:K,dropTargetPos:g,dropAllowed:D,dragOverNodeKey:R}),m==null||m({event:o,node:Je(s)}))}}),E(de(t),"onNodeDragLeave",function(o,s){t.currentMouseOverDroppableNodeKey===s.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var i=t.props.onDragLeave;i==null||i({event:o,node:Je(s)})}),E(de(t),"onWindowDragEnd",function(o){t.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)}),E(de(t),"onNodeDragEnd",function(o,s){var i=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),i==null||i({event:o,node:Je(s)}),t.dragNodeProps=null,window.removeEventListener("dragend",t.onWindowDragEnd)}),E(de(t),"onNodeDrop",function(o,s){var i,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=t.state,h=f.dragChildrenKeys,v=f.dropPosition,p=f.dropTargetKey,y=f.dropTargetPos,m=f.dropAllowed;if(m){var C=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),p!==null){var N=B(B({},Yt(p,t.getTreeNodeRequiredProps())),{},{active:((i=t.getActiveItem())===null||i===void 0?void 0:i.key)===p,data:ft(t.state.keyEntities,p).node}),x=h.includes(p);Kt(!x,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var S=Pn(y),w={event:o,node:Je(N),dragNode:t.dragNodeProps?Je(t.dragNodeProps):null,dragNodesKeys:[t.dragNodeProps.eventKey].concat(h),dropToGap:v!==0,dropPosition:v+Number(S[S.length-1])};d||C==null||C(w),t.dragNodeProps=null}}}),E(de(t),"cleanDragState",function(){var o=t.state.draggingNodeKey;o!==null&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null}),E(de(t),"triggerExpandActionExpand",function(o,s){var i=t.state,d=i.expandedKeys,f=i.flattenNodes,h=s.expanded,v=s.key,p=s.isLeaf;if(!(p||o.shiftKey||o.metaKey||o.ctrlKey)){var y=f.filter(function(C){return C.key===v})[0],m=Je(B(B({},Yt(v,t.getTreeNodeRequiredProps())),{},{data:y.data}));t.setExpandedKeys(h?Dt(d,v):Tt(d,v)),t.onNodeExpand(o,m)}}),E(de(t),"onNodeClick",function(o,s){var i=t.props,d=i.onClick,f=i.expandAction;f==="click"&&t.triggerExpandActionExpand(o,s),d==null||d(o,s)}),E(de(t),"onNodeDoubleClick",function(o,s){var i=t.props,d=i.onDoubleClick,f=i.expandAction;f==="doubleClick"&&t.triggerExpandActionExpand(o,s),d==null||d(o,s)}),E(de(t),"onNodeSelect",function(o,s){var i=t.state.selectedKeys,d=t.state,f=d.keyEntities,h=d.fieldNames,v=t.props,p=v.onSelect,y=v.multiple,m=s.selected,C=s[h.key],N=!m;N?y?i=Tt(i,C):i=[C]:i=Dt(i,C);var x=i.map(function(S){var w=ft(f,S);return w?w.node:null}).filter(Boolean);t.setUncontrolledState({selectedKeys:i}),p==null||p(i,{event:"select",selected:N,node:s,selectedNodes:x,nativeEvent:o.nativeEvent})}),E(de(t),"onNodeCheck",function(o,s,i){var d=t.state,f=d.keyEntities,h=d.checkedKeys,v=d.halfCheckedKeys,p=t.props,y=p.checkStrictly,m=p.onCheck,C=s.key,N,x={event:"check",node:s,checked:i,nativeEvent:o.nativeEvent};if(y){var S=i?Tt(h,C):Dt(h,C),w=Dt(v,C);N={checked:S,halfChecked:w},x.checkedNodes=S.map(function(M){return ft(f,M)}).filter(Boolean).map(function(M){return M.node}),t.setUncontrolledState({checkedKeys:S})}else{var k=Gt([].concat(Pe(h),[C]),!0,f),K=k.checkedKeys,g=k.halfCheckedKeys;if(!i){var D=new Set(K);D.delete(C);var R=Gt(Array.from(D),{halfCheckedKeys:g},f);K=R.checkedKeys,g=R.halfCheckedKeys}N=K,x.checkedNodes=[],x.checkedNodesPositions=[],x.halfCheckedKeys=g,K.forEach(function(M){var L=ft(f,M);if(L){var $=L.node,I=L.pos;x.checkedNodes.push($),x.checkedNodesPositions.push({node:$,pos:I})}}),t.setUncontrolledState({checkedKeys:K},!1,{halfCheckedKeys:g})}m==null||m(N,x)}),E(de(t),"onNodeLoad",function(o){var s,i=o.key,d=t.state.keyEntities,f=ft(d,i);if(!(f!=null&&(s=f.children)!==null&&s!==void 0&&s.length)){var h=new Promise(function(v,p){t.setState(function(y){var m=y.loadedKeys,C=m===void 0?[]:m,N=y.loadingKeys,x=N===void 0?[]:N,S=t.props,w=S.loadData,k=S.onLoad;if(!w||C.includes(i)||x.includes(i))return null;var K=w(o);return K.then(function(){var g=t.state.loadedKeys,D=Tt(g,i);k==null||k(D,{event:"load",node:o}),t.setUncontrolledState({loadedKeys:D}),t.setState(function(R){return{loadingKeys:Dt(R.loadingKeys,i)}}),v()}).catch(function(g){if(t.setState(function(R){return{loadingKeys:Dt(R.loadingKeys,i)}}),t.loadingRetryTimes[i]=(t.loadingRetryTimes[i]||0)+1,t.loadingRetryTimes[i]>=al){var D=t.state.loadedKeys;Kt(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:Tt(D,i)}),v()}p(g)}),{loadingKeys:Tt(x,i)}})});return h.catch(function(){}),h}}),E(de(t),"onNodeMouseEnter",function(o,s){var i=t.props.onMouseEnter;i==null||i({event:o,node:s})}),E(de(t),"onNodeMouseLeave",function(o,s){var i=t.props.onMouseLeave;i==null||i({event:o,node:s})}),E(de(t),"onNodeContextMenu",function(o,s){var i=t.props.onRightClick;i&&(o.preventDefault(),i({event:o,node:s}))}),E(de(t),"onFocus",function(){var o=t.props.onFocus;t.setState({focused:!0});for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];o==null||o.apply(void 0,i)}),E(de(t),"onBlur",function(){var o=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];o==null||o.apply(void 0,i)}),E(de(t),"getTreeNodeRequiredProps",function(){var o=t.state,s=o.expandedKeys,i=o.selectedKeys,d=o.loadedKeys,f=o.loadingKeys,h=o.checkedKeys,v=o.halfCheckedKeys,p=o.dragOverNodeKey,y=o.dropPosition,m=o.keyEntities;return{expandedKeys:s||[],selectedKeys:i||[],loadedKeys:d||[],loadingKeys:f||[],checkedKeys:h||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:y,keyEntities:m}}),E(de(t),"setExpandedKeys",function(o){var s=t.state,i=s.treeData,d=s.fieldNames,f=mn(i,o,d);t.setUncontrolledState({expandedKeys:o,flattenNodes:f},!0)}),E(de(t),"onNodeExpand",function(o,s){var i=t.state.expandedKeys,d=t.state,f=d.listChanging,h=d.fieldNames,v=t.props,p=v.onExpand,y=v.loadData,m=s.expanded,C=s[h.key];if(!f){var N=i.includes(C),x=!m;if(Kt(m&&N||!m&&!N,"Expand state not sync with index check"),i=x?Tt(i,C):Dt(i,C),t.setExpandedKeys(i),p==null||p(i,{node:s,expanded:x,nativeEvent:o.nativeEvent}),x&&y){var S=t.onNodeLoad(s);S&&S.then(function(){var w=mn(t.state.treeData,i,h);t.setUncontrolledState({flattenNodes:w})}).catch(function(){var w=t.state.expandedKeys,k=Dt(w,C);t.setExpandedKeys(k)})}}}),E(de(t),"onListChangeStart",function(){t.setUncontrolledState({listChanging:!0})}),E(de(t),"onListChangeEnd",function(){setTimeout(function(){t.setUncontrolledState({listChanging:!1})})}),E(de(t),"onActiveChange",function(o){var s=t.state.activeKey,i=t.props,d=i.onActiveChange,f=i.itemScrollOffset,h=f===void 0?0:f;s!==o&&(t.setState({activeKey:o}),o!==null&&t.scrollTo({key:o,offset:h}),d==null||d(o))}),E(de(t),"getActiveItem",function(){var o=t.state,s=o.activeKey,i=o.flattenNodes;return s===null?null:i.find(function(d){var f=d.key;return f===s})||null}),E(de(t),"offsetActiveKey",function(o){var s=t.state,i=s.flattenNodes,d=s.activeKey,f=i.findIndex(function(p){var y=p.key;return y===d});f===-1&&o<0&&(f=i.length),f=(f+o+i.length)%i.length;var h=i[f];if(h){var v=h.key;t.onActiveChange(v)}else t.onActiveChange(null)}),E(de(t),"onKeyDown",function(o){var s=t.state,i=s.activeKey,d=s.expandedKeys,f=s.checkedKeys,h=s.fieldNames,v=t.props,p=v.onKeyDown,y=v.checkable,m=v.selectable;switch(o.which){case Q.UP:{t.offsetActiveKey(-1),o.preventDefault();break}case Q.DOWN:{t.offsetActiveKey(1),o.preventDefault();break}}var C=t.getActiveItem();if(C&&C.data){var N=t.getTreeNodeRequiredProps(),x=C.data.isLeaf===!1||!!(C.data[h.children]||[]).length,S=Je(B(B({},Yt(i,N)),{},{data:C.data,active:!0}));switch(o.which){case Q.LEFT:{x&&d.includes(i)?t.onNodeExpand({},S):C.parent&&t.onActiveChange(C.parent.key),o.preventDefault();break}case Q.RIGHT:{x&&!d.includes(i)?t.onNodeExpand({},S):C.children&&C.children.length&&t.onActiveChange(C.children[0].key),o.preventDefault();break}case Q.ENTER:case Q.SPACE:{y&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?t.onNodeCheck({},S,!f.includes(i)):!y&&m&&!S.disabled&&S.selectable!==!1&&t.onNodeSelect({},S);break}}}p==null||p(o)}),E(de(t),"setUncontrolledState",function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t.destroyed){var d=!1,f=!0,h={};Object.keys(o).forEach(function(v){if(t.props.hasOwnProperty(v)){f=!1;return}d=!0,h[v]=o[v]}),d&&(!s||f)&&t.setState(B(B({},h),i))}}),E(de(t),"scrollTo",function(o){t.listRef.current.scrollTo(o)}),t}return yr(r,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props,c=a.activeKey,u=a.itemScrollOffset,o=u===void 0?0:u;c!==void 0&&c!==this.state.activeKey&&(this.setState({activeKey:c}),c!==null&&this.scrollTo({key:c,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a=this.state,c=a.focused,u=a.flattenNodes,o=a.keyEntities,s=a.draggingNodeKey,i=a.activeKey,d=a.dropLevelOffset,f=a.dropContainerKey,h=a.dropTargetKey,v=a.dropPosition,p=a.dragOverNodeKey,y=a.indent,m=this.props,C=m.prefixCls,N=m.className,x=m.style,S=m.showLine,w=m.focusable,k=m.tabIndex,K=k===void 0?0:k,g=m.selectable,D=m.showIcon,R=m.icon,M=m.switcherIcon,L=m.draggable,$=m.checkable,I=m.checkStrictly,P=m.disabled,H=m.motion,q=m.loadData,F=m.filterTreeNode,Z=m.height,X=m.itemHeight,me=m.scrollWidth,Oe=m.virtual,we=m.titleRender,ge=m.dropIndicatorRender,he=m.onContextMenu,qe=m.onScroll,re=m.direction,Me=m.rootClassName,He=m.rootStyle,ae=Bt(this.props,{aria:!0,data:!0}),A;L&&(It(L)==="object"?A=L:typeof L=="function"?A={nodeDraggable:L}:A={});var T={prefixCls:C,selectable:g,showIcon:D,icon:R,switcherIcon:M,draggable:A,draggingNodeKey:s,checkable:$,checkStrictly:I,disabled:P,keyEntities:o,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:h,dropPosition:v,dragOverNodeKey:p,indent:y,direction:re,dropIndicatorRender:ge,loadData:q,filterTreeNode:F,titleRender:we,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return l.createElement(Rn.Provider,{value:T},l.createElement("div",{className:at(C,N,Me,E(E(E({},"".concat(C,"-show-line"),S),"".concat(C,"-focused"),c),"".concat(C,"-active-focused"),i!==null)),style:He},l.createElement(Zi,Qe({ref:this.listRef,prefixCls:C,style:x,data:u,disabled:P,selectable:g,checkable:!!$,motion:H,dragging:s!==null,height:Z,itemHeight:X,virtual:Oe,focusable:w,focused:c,tabIndex:K,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:he,onScroll:qe,scrollWidth:me},this.getTreeNodeRequiredProps(),ae))))}}],[{key:"getDerivedStateFromProps",value:function(a,c){var u=c.prevProps,o={prevProps:a};function s(K){return!u&&a.hasOwnProperty(K)||u&&u[K]!==a[K]}var i,d=c.fieldNames;if(s("fieldNames")&&(d=on(a.fieldNames),o.fieldNames=d),s("treeData")?i=a.treeData:s("children")&&(Kt(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=di(a.children)),i){o.treeData=i;var f=Ya(i,{fieldNames:d});o.keyEntities=B(E({},Ft,tr),f.keyEntities)}var h=o.keyEntities||c.keyEntities;if(s("expandedKeys")||u&&s("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!u&&a.defaultExpandParent?ga(a.expandedKeys,h):a.expandedKeys;else if(!u&&a.defaultExpandAll){var v=B({},h);delete v[Ft];var p=[];Object.keys(v).forEach(function(K){var g=v[K];g.children&&g.children.length&&p.push(g.key)}),o.expandedKeys=p}else!u&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?ga(a.defaultExpandedKeys,h):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,i||o.expandedKeys){var y=mn(i||c.treeData,o.expandedKeys||c.expandedKeys,d);o.flattenNodes=y}if(a.selectable&&(s("selectedKeys")?o.selectedKeys=ma(a.selectedKeys,a):!u&&a.defaultSelectedKeys&&(o.selectedKeys=ma(a.defaultSelectedKeys,a))),a.checkable){var m;if(s("checkedKeys")?m=hn(a.checkedKeys)||{}:!u&&a.defaultCheckedKeys?m=hn(a.defaultCheckedKeys)||{}:i&&(m=hn(a.checkedKeys)||{checkedKeys:c.checkedKeys,halfCheckedKeys:c.halfCheckedKeys}),m){var C=m,N=C.checkedKeys,x=N===void 0?[]:N,S=C.halfCheckedKeys,w=S===void 0?[]:S;if(!a.checkStrictly){var k=Gt(x,!0,h);x=k.checkedKeys,w=k.halfCheckedKeys}o.checkedKeys=x,o.halfCheckedKeys=w}}return s("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),r}(l.Component);E(_n,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Fi,allowDrop:function(){return!0},expandAction:!1});E(_n,"TreeNode",ln);var zt={ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40};function ha(e,n,r){var t=l.useRef({});return(!("value"in t.current)||r(t.current.condition,n))&&(t.current.value=e(),t.current.condition=n),t.current.value}var nr=l.createContext(null);function pa(e){return l.isValidElement(e)&&!xa.isFragment(e)}Number(l.version.split(".")[0])>=19;var rl={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},ol=function(n,r){var t=La(),a=t.prefixCls,c=t.multiple,u=t.searchValue,o=t.toggleOpen,s=t.open,i=t.notFoundContent,d=l.useContext(nr),f=d.virtual,h=d.listHeight,v=d.listItemHeight,p=d.listItemScrollOffset,y=d.treeData,m=d.fieldNames,C=d.onSelect,N=d.dropdownMatchSelectWidth,x=d.treeExpandAction,S=d.treeTitleRender,w=d.onPopupScroll,k=d.leftMaxCount,K=d.leafCountOnly,g=d.valueEntities,D=l.useContext(Za),R=D.checkable,M=D.checkedKeys,L=D.halfCheckedKeys,$=D.treeExpandedKeys,I=D.treeDefaultExpandAll,P=D.treeDefaultExpandedKeys,H=D.onTreeExpand,q=D.treeIcon,F=D.showTreeIcon,Z=D.switcherIcon,X=D.treeLine,me=D.treeNodeFilterProp,Oe=D.loadData,we=D.treeLoadedKeys,ge=D.treeMotion,he=D.onTreeLoad,qe=D.keyEntities,re=l.useRef(),Me=ha(function(){return y},[s,y],function(ee,fe){return fe[0]&&ee[1]!==fe[1]}),He=l.useMemo(function(){return R?{checked:M,halfChecked:L}:null},[R,M,L]);l.useEffect(function(){if(s&&!c&&M.length){var ee;(ee=re.current)===null||ee===void 0||ee.scrollTo({key:M[0]})}},[s]);var ae=function(fe){fe.preventDefault()},A=function(fe,Ve){var Ie=Ve.node;R&&Dn(Ie)||(C(Ie.key,{selected:!M.includes(Ie.key)}),c||o(!1))},T=l.useState(P),V=ie(T,2),W=V[0],_=V[1],U=l.useState(null),ce=ie(U,2),ue=ce[0],oe=ce[1],Ne=l.useMemo(function(){return $?Pe($):u?ue:W},[W,ue,$,u]),te=function(fe){_(fe),oe(fe),H&&H(fe)},Re=String(u).toLowerCase(),pe=function(fe){return Re?String(fe[me]).toLowerCase().includes(Re):!1};l.useEffect(function(){u&&oe(Pi(y,m))},[u]);var be=l.useState(function(){return new Map}),Ge=ie(be,2),Le=Ge[0],De=Ge[1];l.useEffect(function(){k&&De(new Map)},[k]);function ye(ee){var fe=ee[m.value];if(!Le.has(fe)){var Ve=g.get(fe),Ie=(Ve.children||[]).length===0;if(Ie)Le.set(fe,!1);else{var Fe=Ve.children.filter(function(Xe){return!Xe.node.disabled&&!Xe.node.disableCheckbox&&!M.includes(Xe.node[m.value])}),Ze=Fe.length;Le.set(fe,Ze>k)}}return Le.get(fe)}var ne=Nn(function(ee){var fe=ee[m.value];return M.includes(fe)||k===null?!1:k<=0?!0:K&&k?ye(ee):!1}),z=function ee(fe){var Ve=hi(fe),Ie;try{for(Ve.s();!(Ie=Ve.n()).done;){var Fe=Ie.value;if(!(Fe.disabled||Fe.selectable===!1)){if(u){if(pe(Fe))return Fe}else return Fe;if(Fe[m.children]){var Ze=ee(Fe[m.children]);if(Ze)return Ze}}}}catch(Xe){Ve.e(Xe)}finally{Ve.f()}return null},O=l.useState(null),We=ie(O,2),ze=We[0],Be=We[1],ke=qe[ze];l.useEffect(function(){if(s){var ee=null,fe=function(){var Ie=z(Me);return Ie?Ie[m.value]:null};!c&&M.length&&!u?ee=M[0]:ee=fe(),Be(ee)}},[s,u]),l.useImperativeHandle(r,function(){var ee;return{scrollTo:(ee=re.current)===null||ee===void 0?void 0:ee.scrollTo,onKeyDown:function(Ve){var Ie,Fe=Ve.which;switch(Fe){case zt.UP:case zt.DOWN:case zt.LEFT:case zt.RIGHT:(Ie=re.current)===null||Ie===void 0||Ie.onKeyDown(Ve);break;case zt.ENTER:{if(ke){var Ze=ne(ke.node),Xe=(ke==null?void 0:ke.node)||{},st=Xe.selectable,nt=Xe.value,ct=Xe.disabled;st!==!1&&!ct&&!Ze&&A(null,{node:{key:ze},selected:!M.includes(nt)})}break}case zt.ESC:o(!1)}},onKeyUp:function(){}}});var bt=ha(function(){return!u},[u,$||W],function(ee,fe){var Ve=ie(ee,1),Ie=Ve[0],Fe=ie(fe,2),Ze=Fe[0],Xe=Fe[1];return Ie!==Ze&&!!(Ze||Xe)}),Ke=bt?Oe:null;if(Me.length===0)return l.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:ae},i);var Ye={fieldNames:m};return we&&(Ye.loadedKeys=we),Ne&&(Ye.expandedKeys=Ne),l.createElement("div",{onMouseDown:ae},ke&&s&&l.createElement("span",{style:rl,"aria-live":"assertive"},ke.node.value),l.createElement(er.Provider,{value:{nodeDisabled:ne}},l.createElement(_n,Qe({ref:re,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:Me,height:h,itemHeight:v,itemScrollOffset:p,virtual:f!==!1&&N!==!1,multiple:c,icon:q,showIcon:F,switcherIcon:Z,showLine:X,loadData:Ke,motion:ge,activeKey:ze,checkable:R,checkStrictly:!0,checkedKeys:He,selectedKeys:R?[]:M,defaultExpandAll:I,titleRender:S},Ye,{onActiveChange:Be,onSelect:A,onCheck:A,onExpand:te,onLoad:he,filterTreeNode:pe,expandAction:x,onScroll:w}))))},il=l.forwardRef(ol),Ln="SHOW_ALL",An="SHOW_PARENT",un="SHOW_CHILD";function ya(e,n,r,t){var a=new Set(e);return n===un?e.filter(function(c){var u=r[c];return!u||!u.children||!u.children.some(function(o){var s=o.node;return a.has(s[t.value])})||!u.children.every(function(o){var s=o.node;return Dn(s)||a.has(s[t.value])})}):n===An?e.filter(function(c){var u=r[c],o=u?u.parent:null;return!o||Dn(o.node)||!a.has(o.key)}):e}var ll=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function sl(e){return!e||It(e)!=="object"}var cl=l.forwardRef(function(e,n){var r=e.id,t=e.prefixCls,a=t===void 0?"rc-tree-select":t,c=e.value,u=e.defaultValue,o=e.onChange,s=e.onSelect,i=e.onDeselect,d=e.searchValue,f=e.inputValue,h=e.onSearch,v=e.autoClearSearchValue,p=v===void 0?!0:v,y=e.filterTreeNode,m=e.treeNodeFilterProp,C=m===void 0?"value":m,N=e.showCheckedStrategy,x=e.treeNodeLabelProp,S=e.multiple,w=e.treeCheckable,k=e.treeCheckStrictly,K=e.labelInValue,g=e.maxCount,D=e.fieldNames,R=e.treeDataSimpleMode,M=e.treeData,L=e.children,$=e.loadData,I=e.treeLoadedKeys,P=e.onTreeLoad,H=e.treeDefaultExpandAll,q=e.treeExpandedKeys,F=e.treeDefaultExpandedKeys,Z=e.onTreeExpand,X=e.treeExpandAction,me=e.virtual,Oe=e.listHeight,we=Oe===void 0?200:Oe,ge=e.listItemHeight,he=ge===void 0?20:ge,qe=e.listItemScrollOffset,re=qe===void 0?0:qe,Me=e.onDropdownVisibleChange,He=e.dropdownMatchSelectWidth,ae=He===void 0?!0:He,A=e.treeLine,T=e.treeIcon,V=e.showTreeIcon,W=e.switcherIcon,_=e.treeMotion,U=e.treeTitleRender,ce=e.onPopupScroll,ue=pt(e,ll),oe=Ga(r),Ne=w&&!k,te=w||k,Re=k||K,pe=te||S,be=aa(u,{value:c}),Ge=ie(be,2),Le=Ge[0],De=Ge[1],ye=l.useMemo(function(){return w?N||un:Ln},[N,w]),ne=l.useMemo(function(){return Ri(D)},[JSON.stringify(D)]),z=aa("",{value:d!==void 0?d:f,postState:function(ve){return ve||""}}),O=ie(z,2),We=O[0],ze=O[1],Be=function(ve){ze(ve),h==null||h(ve)},ke=Vi(M,L,R),bt=_i(ke,ne),Ke=bt.keyEntities,Ye=bt.valueEntities,ee=l.useCallback(function(xe){var ve=[],le=[];return xe.forEach(function(_e){Ye.has(_e)?le.push(_e):ve.push(_e)}),{missingRawValues:ve,existRawValues:le}},[Ye]),fe=ji(ke,We,{fieldNames:ne,treeNodeFilterProp:C,filterTreeNode:y}),Ve=l.useCallback(function(xe){if(xe){if(x)return xe[x];for(var ve=ne._title,le=0;le<ve.length;le+=1){var _e=xe[ve[le]];if(_e!==void 0)return _e}}},[ne,x]),Ie=l.useCallback(function(xe){var ve=Mi(xe);return ve.map(function(le){return sl(le)?{value:le}:le})},[]),Fe=l.useCallback(function(xe){var ve=Ie(xe);return ve.map(function(le){var _e=le.label,vt=le.value,Ae=le.halfChecked,je,$e=Ye.get(vt);if($e){var lt;_e=U?U($e.node):(lt=_e)!==null&&lt!==void 0?lt:Ve($e.node),je=$e.node.disabled}else if(_e===void 0){var xt=Ie(Le).find(function(Pt){return Pt.value===vt});_e=xt.label}return{label:_e,value:vt,halfChecked:Ae,disabled:je}})},[Ye,Ve,Ie,Le]),Ze=l.useMemo(function(){return Ie(Le===null?[]:Le)},[Ie,Le]),Xe=l.useMemo(function(){var xe=[],ve=[];return Ze.forEach(function(le){le.halfChecked?ve.push(le):xe.push(le)}),[xe,ve]},[Ze]),st=ie(Xe,2),nt=st[0],ct=st[1],Ue=l.useMemo(function(){return nt.map(function(xe){return xe.value})},[nt]),Ht=Ti(nt,ct,Ne,Ke),wt=ie(Ht,2),j=wt[0],J=wt[1],G=l.useMemo(function(){var xe=ya(j,ye,Ke,ne),ve=xe.map(function(Ae){var je,$e;return(je=($e=Ke[Ae])===null||$e===void 0||($e=$e.node)===null||$e===void 0?void 0:$e[ne.value])!==null&&je!==void 0?je:Ae}),le=ve.map(function(Ae){var je=nt.find(function(lt){return lt.value===Ae}),$e=K?je==null?void 0:je.label:U==null?void 0:U(je);return{value:Ae,label:$e}}),_e=Fe(le),vt=_e[0];return!pe&&vt&&ra(vt.value)&&ra(vt.label)?[]:_e.map(function(Ae){var je;return B(B({},Ae),{},{label:(je=Ae.label)!==null&&je!==void 0?je:Ae.value})})},[ne,pe,j,nt,Fe,ye,Ke]),Y=Oi(G),Ce=ie(Y,1),Te=Ce[0],mt=l.useMemo(function(){return pe&&(ye==="SHOW_CHILD"||k||!w)?g:null},[g,pe,k,ye,w]),it=oa(function(xe,ve,le){var _e=ya(xe,ye,Ke,ne);if(!(mt&&_e.length>mt)){var vt=Fe(xe);if(De(vt),p&&ze(""),o){var Ae=xe;Ne&&(Ae=_e.map(function(ht){var yt=Ye.get(ht);return yt?yt.node[ne.value]:ht}));var je=ve||{triggerValue:void 0,selected:void 0},$e=je.triggerValue,lt=je.selected,xt=Ae;if(k){var Pt=ct.filter(function(ht){return!Ae.includes(ht.value)});xt=[].concat(Pe(xt),Pe(Pt))}var Ot=Fe(xt),Et={preValue:nt,triggerValue:$e},Nt=!0;(k||le==="selection"&&!lt)&&(Nt=!1),Ai(Et,$e,xe,ke,Nt,ne),te?Et.checked=lt:Et.selected=lt;var _t=Re?Ot:Ot.map(function(ht){return ht.value});o(pe?_t:_t[0],Re?null:Ot.map(function(ht){return ht.label}),Et)}}}),gt=l.useCallback(function(xe,ve){var le,_e=ve.selected,vt=ve.source,Ae=Ke[xe],je=Ae==null?void 0:Ae.node,$e=(le=je==null?void 0:je[ne.value])!==null&&le!==void 0?le:xe;if(!pe)it([$e],{selected:!0,triggerValue:$e},"option");else{var lt=_e?[].concat(Pe(Ue),[$e]):j.filter(function(yt){return yt!==$e});if(Ne){var xt=ee(lt),Pt=xt.missingRawValues,Ot=xt.existRawValues,Et=Ot.map(function(yt){return Ye.get(yt).key}),Nt;if(_e){var _t=Gt(Et,!0,Ke);Nt=_t.checkedKeys}else{var ht=Gt(Et,{halfCheckedKeys:J},Ke);Nt=ht.checkedKeys}lt=[].concat(Pe(Pt),Pe(Nt.map(function(yt){return Ke[yt].node[ne.value]})))}it(lt,{selected:_e,triggerValue:$e},vt||"option")}_e||!pe?s==null||s($e,In(je)):i==null||i($e,In(je))},[ee,Ye,Ke,ne,pe,Ue,it,Ne,s,i,j,J,g]),et=l.useCallback(function(xe){if(Me){var ve={};Object.defineProperty(ve,"documentClickClose",{get:function(){return Vt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),Me(xe,ve)}},[Me]),Ct=oa(function(xe,ve){var le=xe.map(function(_e){return _e.value});if(ve.type==="clear"){it(le,{},"selection");return}ve.values.length&&gt(ve.values[0].value,{selected:!1,source:"selection"})}),Rt=l.useMemo(function(){return{virtual:me,dropdownMatchSelectWidth:ae,listHeight:we,listItemHeight:he,listItemScrollOffset:re,treeData:fe,fieldNames:ne,onSelect:gt,treeExpandAction:X,treeTitleRender:U,onPopupScroll:ce,leftMaxCount:g===void 0?null:g-Te.length,leafCountOnly:ye==="SHOW_CHILD"&&!k&&!!w,valueEntities:Ye}},[me,ae,we,he,re,fe,ne,gt,X,U,ce,g,Te.length,ye,k,w,Ye]),Ut=l.useMemo(function(){return{checkable:te,loadData:$,treeLoadedKeys:I,onTreeLoad:P,checkedKeys:j,halfCheckedKeys:J,treeDefaultExpandAll:H,treeExpandedKeys:q,treeDefaultExpandedKeys:F,onTreeExpand:Z,treeIcon:T,treeMotion:_,showTreeIcon:V,switcherIcon:W,treeLine:A,treeNodeFilterProp:C,keyEntities:Ke}},[te,$,I,P,j,J,H,q,F,Z,T,_,V,W,A,C,Ke]);return l.createElement(nr.Provider,{value:Rt},l.createElement(Za.Provider,{value:Ut},l.createElement(Ha,Qe({ref:n},ue,{id:oe,prefixCls:a,mode:pe?"multiple":void 0,displayValues:Te,onDisplayValuesChange:Ct,searchValue:We,onSearch:Be,OptionList:il,emptyOptions:!ke.length,onDropdownVisibleChange:et,dropdownMatchSelectWidth:ae}))))}),Zt=cl;Zt.TreeNode=Mn;Zt.SHOW_ALL=Ln;Zt.SHOW_PARENT=An;Zt.SHOW_CHILD=un;const ul=e=>{const{componentCls:n,treePrefixCls:r,colorBgElevated:t}=e,a=`.${r}`;return[{[`${n}-dropdown`]:[{padding:`${$n(e.paddingXS)} ${$n(e.calc(e.paddingXS).div(2).equal())}`},po(r,Sa(e,{colorBgContainer:t}),!1),{[a]:{borderRadius:0,[`${a}-list-holder-inner`]:{alignItems:"stretch",[`${a}-treenode`]:{[`${a}-node-content-wrapper`]:{flex:"auto"}}}}},to(`${r}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${a}-switcher${a}-switcher_close`]:{[`${a}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function dl(e,n,r){return br("TreeSelect",t=>{const a=Sa(t,{treePrefixCls:n});return[ul(a)]},ho)(e,r)}var fl=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r};const vl=(e,n)=>{var r;const{prefixCls:t,size:a,disabled:c,bordered:u=!0,className:o,rootClassName:s,treeCheckable:i,multiple:d,listHeight:f=256,listItemHeight:h,placement:v,notFoundContent:p,switcherIcon:y,treeLine:m,getPopupContainer:C,popupClassName:N,dropdownClassName:x,treeIcon:S=!1,transitionName:w,choiceTransitionName:k="",status:K,treeExpandAction:g,builtinPlacements:D,dropdownMatchSelectWidth:R,popupMatchSelectWidth:M,allowClear:L,variant:$,dropdownStyle:I,tagRender:P,maxCount:H,showCheckedStrategy:q,treeCheckStrictly:F}=e,Z=fl(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:X,getPrefixCls:me,renderEmpty:Oe,direction:we,virtual:ge,popupMatchSelectWidth:he,popupOverflow:qe}=l.useContext(Cr),[,re]=xr(),Me=h??(re==null?void 0:re.controlHeightSM)+(re==null?void 0:re.paddingXXS),He=me(),ae=me("select",t),A=me("select-tree",t),T=me("tree-select",t),{compactSize:V,compactItemClassnames:W}=Sr(ae,we),_=Vn(ae),U=Vn(T),[ce,ue,oe]=co(ae,_),[Ne]=dl(T,A,U),[te,Re]=wr("treeSelect",$,u),pe=Fn(N||x,`${T}-dropdown`,{[`${T}-dropdown-rtl`]:we==="rtl"},s,oe,_,U,ue),be=!!(i||d),Ge=l.useMemo(()=>{if(!(H&&(q==="SHOW_ALL"&&!F||q==="SHOW_PARENT")))return H},[H,q,F]),Le=uo(e.suffixIcon,e.showArrow),De=(r=M??R)!==null&&r!==void 0?r:he,{status:ye,hasFeedback:ne,isFormItemInput:z,feedbackIcon:O}=l.useContext(Er),We=Ir(ye,K),{suffixIcon:ze,removeIcon:Be,clearIcon:ke}=fo(Object.assign(Object.assign({},Z),{multiple:be,showSuffixIcon:Le,hasFeedback:ne,feedbackIcon:O,prefixCls:ae,componentName:"TreeSelect"})),bt=L===!0?{clearIcon:ke}:L;let Ke;p!==void 0?Ke=p:Ke=(Oe==null?void 0:Oe("Select"))||l.createElement(vo,{componentName:"Select"});const Ye=wa(Z,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),ee=l.useMemo(()=>v!==void 0?v:we==="rtl"?"bottomRight":"bottomLeft",[v,we]),fe=Nr(nt=>{var ct;return(ct=a??V)!==null&&ct!==void 0?ct:nt}),Ve=l.useContext(kr),Ie=c??Ve,Fe=Fn(!t&&T,{[`${ae}-lg`]:fe==="large",[`${ae}-sm`]:fe==="small",[`${ae}-rtl`]:we==="rtl",[`${ae}-${te}`]:Re,[`${ae}-in-form-item`]:z},Dr(ae,We,ne),W,o,s,oe,_,U,ue),Ze=nt=>l.createElement(yo,{prefixCls:A,switcherIcon:y,treeNodeProps:nt,showLine:m}),[Xe]=Kr("SelectLike",I==null?void 0:I.zIndex),st=l.createElement(Zt,Object.assign({virtual:ge,disabled:Ie},Ye,{dropdownMatchSelectWidth:De,builtinPlacements:mo(D,qe),ref:n,prefixCls:ae,className:Fe,listHeight:f,listItemHeight:Me,treeCheckable:i&&l.createElement("span",{className:`${ae}-tree-checkbox-inner`}),treeLine:!!m,suffixIcon:ze,multiple:be,placement:ee,removeIcon:Be,allowClear:bt,switcherIcon:Ze,showTreeIcon:S,notFoundContent:Ke,getPopupContainer:C||X,treeMotion:null,dropdownClassName:pe,dropdownStyle:Object.assign(Object.assign({},I),{zIndex:Xe}),choiceTransitionName:Hn(He,"",k),transitionName:Hn(He,"slide-up",w),treeExpandAction:g,tagRender:be?P:void 0,maxCount:Ge,showCheckedStrategy:q,treeCheckStrictly:F}));return ce(Ne(st))},ml=l.forwardRef(vl),Mt=ml,gl=bo(Mt,"dropdownAlign",e=>wa(e,["visible"]));Mt.TreeNode=Mn;Mt.SHOW_ALL=Ln;Mt.SHOW_PARENT=An;Mt.SHOW_CHILD=un;Mt._InternalPanelDoNotUseOrYouWillBeFired=gl;function hl(){const{notification:e}=Ea.useApp(),{currentUser:n}=Or(),[r,t]=l.useState(!1),[a,c]=l.useState({gameId:"",gameName:""}),u=eo({mutationKey:["oldState",a.gameId],mutationFn:async({prevGameId:s,payload:i})=>{const f=(await Tr.run({action:Mr.LOAD_GAME,gameId:s})).data;return await Na.run({gameId:s,gameName:(f==null?void 0:f.gameName)??"",playerId:n.id,action:ka.FORCE_STATE_PROPERTY,state:i})},onSuccess:async()=>{e.success({message:"Redirect successfully triggered"})},onError:s=>{console.error(s),e.error({message:"Failed to load previous game to continue the redirect",description:JSON.stringify(s.message)})}}),o=async(s,i,d)=>{if(r){e.error({message:"Redirect has failed to trigger"});return}c({gameId:i,gameName:d}),await u.mutateAsync({prevGameId:s,gameName:d,payload:{redirect:{redirectAt:Date.now(),gameId:i,gameName:d}}}),t(!0)};return{isSettingRedirect:u.isPending,startRedirect:o,wasRedirectSuccessful:u.isSuccess}}function pl({options:e=[],disabled:n,onChangeOptions:r,selectedOptions:t}){return!e||e.length===0?b.jsx("div",{className:"create-game-modal-options create-game-modal-options__no-options",children:b.jsx($t.Text,{children:b.jsx(rt,{pt:"Este jogo não possui customizações",en:"This game does not support customizations"})})}):b.jsxs("div",{className:"create-game-modal-options",children:[b.jsx($t.Title,{level:5,className:"create-game-modal-options__title",children:b.jsx(rt,{pt:"Opções:",en:"Options:"})}),b.jsx("div",{className:"create-game-modal-options__list",children:(e??[]).map(a=>b.jsxs($t.Paragraph,{className:yn("create-game-modal-options__option",a.disabled&&"create-game-modal-options__option--disabled"),children:[b.jsxs("div",{className:"create-game-modal-options__label",children:[b.jsx("span",{children:a.label}),a.kind!=="switch"&&!!a.description&&b.jsx("div",{className:"create-game-modal-options__option-description",children:a.description})]}),a.kind==="switch"&&b.jsx(yl,{option:a,disabled:n,onChangeOptions:r,selectedOptions:t}),a.kind==="radio"&&b.jsx(bl,{option:a,disabled:n,onChangeOptions:r,selectedOptions:t}),a.kind==="checkbox"&&b.jsx(Cl,{option:a,disabled:n,onChangeOptions:r,selectedOptions:t}),a.kind==="switch"&&!!a.description&&b.jsx("span",{className:"create-game-modal-options__option-description",children:a.description})]},`option-${a.label}`))})]})}function yl({option:e,disabled:n,onChangeOptions:r,selectedOptions:t}){return b.jsxs(b.Fragment,{children:[b.jsx("span",{className:yn("create-game-modal-options__off",!t[e.key]&&"create-game-modal-options--selected"),children:(e==null?void 0:e.values[0].label)??""}),b.jsx(Rr,{disabled:n||e.disabled,onChange:a=>r(e.key,a)}),b.jsx("span",{className:yn("create-game-modal-options__on",t[e.key]&&"create-game-modal-options--selected"),children:(e==null?void 0:e.values[1].label)??""})]})}function bl({option:e,disabled:n,onChangeOptions:r}){return b.jsx(Gn.Group,{disabled:n||e.disabled,onChange:t=>r(e.key,t.target.value),defaultValue:e.values[0].value,className:"create-game-modal-options__selections",children:e.values.map(t=>b.jsx(Gn,{value:t.value,children:t.label},String(t.value)))})}function Cl({option:e,disabled:n,onChangeOptions:r}){return b.jsx(no.Group,{disabled:n||e.disabled,onChange:t=>r(e.key,t),className:"create-game-modal-options__selections",options:e.values})}const xl=(e,n)=>{const r=Date.now(),t=r-1e3*60*60*24;return{...Object.entries(e??{}).reduce((c,[u,o])=>(o>t&&(c[u]=o),c),{}),[n]:r}},Sl=e=>{const n=Object.entries(e).map(([c,u])=>({gameId:c,createdAt:u}));if(n.length<2)return null;const r=Jt.orderBy(n,"createdAt","desc"),t=2*60*60*1e3,a=Date.now();return r[1].createdAt-a>t?null:r[1].gameId},wl=e=>(e==null?void 0:e.reduce((n,r)=>(r.kind==="switch"&&(n[r.key]=!1),r.kind==="radio"&&(n[r.key]=r.values[0].value),r.kind==="checkbox"&&(n[r.key]=[]),n),{}))??{};function El({gameInfo:e}){const[n,r]=l.useState(!1);return b.jsxs(b.Fragment,{children:[b.jsx(bn,{type:"primary",onClick:()=>r(!0),block:!0,disabled:!e.available,children:b.jsx(rt,{pt:"Criar",en:"Create"})}),n&&b.jsx(Nl,{gameInfo:e,open:n,setOpen:r})]})}function Nl({gameInfo:e,open:n,setOpen:r}){const{message:t,notification:a}=Ea.useApp(),c=Pr(),{pathname:u}=_r(),[o,s]=ro(),{language:i,translate:d}=sn(),{setLoader:f}=Lr(),[h,v]=l.useState(!1),[p,y]=l.useState(null),[,m]=qt("userId"),[,C]=qt("username"),[,N]=qt("userAvatarId"),[x,S]=l.useState(wl(e.options)),[w,k]=Ar("latestGameIds"),K=Sl(w),{startRedirect:g,isSettingRedirect:D,wasRedirectSuccessful:R}=hl();l.useEffect(()=>{o.value&&p&&t.info(`Copied to clipboard: ${o.value}`)},[o,p,t]);const M=(I,P)=>{S(H=>({...H,[I]:P}))},L=async()=>{try{f("create",!0),v(!0);const I=await Na.run({action:ka.CREATE_GAME,gameName:e.gameName,language:i,options:x,version:e.version});if(I.data.gameId){y(I.data.gameId),m(null),C(""),N(""),k(xl(w,I.data.gameId));const P=window.location.href.split(u)[0];s(`${P}/${I.data.gameId}`)}}catch(I){a.error({message:d("Aplicativo encontrou um erro ao tentar criar o jogo","The application found an error while trying to create a game",i),description:JSON.stringify(I.message),placement:"bottomLeft"}),console.error(I),r(!1)}finally{v(!1),f("create",!1)}},$=async()=>{p?c(`/${p}`):t.info(d("Péra! O jogo ainda não foi inicializado.","Wait! The game has not been created"))};return b.jsxs(oo,{title:`${d("Criando novo jogo","Creating new game")}: ${e.title[i]}`,open:n,onCancel:()=>r(!1),onOk:$,okButtonProps:{disabled:!p||D},maskClosable:!1,children:[b.jsx(Ta,{title:e.title,gameName:e.gameName,className:"round-corners",width:256,static:!0}),!p&&b.jsxs(fn,{children:[b.jsx(rt,{pt:"Você está criando um jogo em:",en:"You are creating a game in:"})," ",b.jsx(Da,{})]}),b.jsx(pl,{options:e.options,disabled:h||!!p,onChangeOptions:M,selectedOptions:x}),b.jsx(rn,{}),h&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{children:b.jsx(rt,{pt:"O jogo está sendo criado...",en:"The game session is being created"})}),b.jsx(ao,{message:d("Gerando...","Generating..."),margin:!0})]}),e.version.startsWith("alpha")&&b.jsx(nn,{type:"warning",showIcon:!0,message:b.jsx(rt,{pt:"Este jogo está em alpha, não o jogue",en:"This game is still in alpha and shouldn't be played"})}),e.version.startsWith("beta")&&b.jsx(nn,{type:"warning",showIcon:!0,message:b.jsx(rt,{pt:"Este jogo está em beta, prossiga com cuidado",en:"This game is in beta and bugs might be everywhere"})}),p?b.jsxs("div",{children:[b.jsxs(jr,{className:"center",children:[b.jsx(rt,{pt:"Jogo inicializado",en:"Game Initialized"}),": ",p]}),b.jsxs(fn,{children:[K&&!R&&b.jsx(nn,{type:"info",showIcon:!0,message:b.jsxs(b.Fragment,{children:[b.jsx(rt,{pt:b.jsxs(b.Fragment,{children:["Você quer redirecionar jogadores em ",K," para essa nova partida?"]}),en:b.jsxs(b.Fragment,{children:["Redirect players in ",K," to this new play?"]})}),b.jsx(bn,{size:"large",onClick:()=>{g(K??"",p??"",e.gameName)},disabled:!p||!K,loading:D,children:b.jsx(rt,{pt:"Redirecione-os",en:"Redirect them"})})]})}),R&&b.jsx(nn,{type:"info",showIcon:!0,message:b.jsx(rt,{pt:b.jsxs(b.Fragment,{children:["Jogadores em ",K," foram convidados para o jogo ",p]}),en:b.jsxs(b.Fragment,{children:["Players in ",K," have been invited to ",p]})})})]})]}):b.jsx($r,{align:"center",children:b.jsx(bn,{type:"primary",size:"large",disabled:h,onClick:L,children:b.jsx(rt,{pt:"Criar Jogo",en:"Create Game"})})})]})}const kl=e=>{if(e.includes("dev"))return"#6cb3f6";if(e.includes("alpha"))return"#F97659";if(e.includes("beta"))return"#F9D859";const n=Number(e.split(".")[0]);return Number.isNaN(n)?"#96A0A3":n===0?"#F9D859":n===1?"#72D984":n===2||n>=3?"#7CBD51":"#96A0A3"};function Dl({game:e,isAdmin:n=!0}){var c,u;const{language:r,translate:t}=sn(),a=Ka(e);return b.jsxs(jt,{className:"game-card",cover:b.jsx(lo.Ribbon,{text:e.version,color:kl(e.version),children:b.jsxs("div",{className:"game-card__image",children:[b.jsx(Ta,{gameName:e.gameName,width:256,title:e.title}),b.jsxs("span",{className:"game-card__title",title:e.title[r],children:[b.jsx("span",{className:"game-card__title-text",children:e.title[r]})," ",b.jsx("span",{children:b.jsx(Vr,{title:t("Código do jogo começará com","The game id will start with"),children:b.jsx(io,{children:e.gameCode})})})]})]})}),children:[b.jsx("div",{className:"game-card__contents",children:b.jsxs(Cn,{direction:"vertical",className:"full-width",children:[b.jsx(jt.Meta,{description:`${t("Baseado em","Based on")} ${e.basedOn.split("").reverse().join("")}`}),b.jsx(jt.Meta,{className:"game-card__description",description:e.summary[r]}),((u=(c=e.rules)==null?void 0:c[r])==null?void 0:u.length)>1&&b.jsx(Qr,{gameInfo:e,buttonProps:{size:"small",className:"game-card__margin-bottom"}}),b.jsx(Zr,{wrap:!0,size:[1,6],style:{display:"flex"},gameCode:e.gameCode,tags:e.tags})]})}),b.jsxs("div",{className:"game-card__actions",children:[e.duration&&b.jsx(jt.Meta,{description:b.jsxs(b.Fragment,{children:[b.jsx(Xr,{})," ",a.min," min - ",a.max," min (Avg: ",a.ideal," min)"]})}),b.jsx(rn,{className:"game-card__divider"}),b.jsxs(Cn,{direction:"vertical",children:[b.jsx(jt.Meta,{description:t(`Para ${e.playerCount.min}-${e.playerCount.max} jogadores`,`For ${e.playerCount.min}-${e.playerCount.max} players`)}),b.jsx(jt.Meta,{className:"game-card__player-count",description:t(`Melhor com ${e.playerCount.best||"?"} jogadores`,`Best wih ${e.playerCount.best||"?"} players`)}),b.jsx(jt.Meta,{className:"game-card__player-count game-card__margin-bottom",description:t(`Recomendado jogar com ${Wn(e.playerCount.recommended)}`,`Recommended with ${Wn(e.playerCount.recommended)}`)})]}),n&&b.jsx("div",{style:{marginTop:"1rem"},children:["dev","beta","stable"].includes(e.release)&&b.jsx(El,{gameInfo:e})})]})]},e.gameName)}function Kl(){so();const[e,n]=l.useState(!1);return qt("usingFirestoreEmulator"),qt("usingFunctionsEmulator"),Fr(()=>{}),null}const{SHOW_PARENT:Il}=Mt;function Ol({availabilityCount:e,setTagFilters:n,setNumberFilters:r}){const t=(c,u)=>{r(o=>({...o,[c]:u}))},a=c=>{t("recommendedWith",+(c==="recommended")),t("bestWith",+(c==="best"))};return b.jsxs(Cn,{className:"hub-filters",wrap:!0,size:"middle",children:[b.jsxs("span",{children:[b.jsx(Si,{})," (",e,")"]}),b.jsxs(an,{defaultValue:"",style:{minWidth:"20ch"},size:"small",onChange:a,children:[b.jsx(an.Option,{value:"",children:"Playing with"}),b.jsx(an.Option,{value:"recommended",children:"Recommended with"}),b.jsx(an.Option,{value:"best",children:"Best with"})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"players-input",children:"Players"}),b.jsx(Bn,{id:"players-input",min:2,max:12,size:"small",className:"hub-filters__input-number",onChange:c=>t("players",c??0)})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"duration",children:"Duration"}),b.jsx(Bn,{id:"duration",min:15,step:15,size:"small",className:"hub-filters__input-number",onChange:c=>t("duration",c??0)})]}),b.jsxs("div",{className:"hub-filters__entry",children:[b.jsx("label",{htmlFor:"tags",children:"Tags"}),b.jsx(Tl,{value:void 0,onTreeSelectChange:n})]})]})}function Tl({value:e,onTreeSelectChange:n}){const{dualTranslate:r}=sn(),t=c=>{n(c)},a=l.useMemo(()=>Object.values(Object.keys(zn).reduce((c,u)=>{const o=zn[u];return c[o.group]===void 0&&(c[o.group]={title:Jt.capitalize(o.group),value:o.group,children:[]}),c[o.group].children.push({title:Jt.capitalize(r(o.label)),value:`${o.group}${Ia}${u}`}),c},{})),[r]);return b.jsx(Mt,{treeData:a,value:e,onChange:t,treeCheckable:!0,showCheckedStrategy:Il,placeholder:"Select Game Tags",size:"small",style:{width:"100%",minWidth:"400px"}})}Jt.orderBy(Object.entries(Object.values(Oa).reduce((e,n)=>(e[n.gameCode]===void 0&&(e[n.gameCode]=0),e[n.gameCode]++,e),{})).map(([e,n])=>`${e}: ${n}`));function cs(){Hr("Hub - Tarde Divertida");const{language:e}=sn(),[n,r]=l.useState([]),[t,a]=l.useState({}),c=l.useMemo(()=>Object.values(Oa).filter(i=>{const d=[];if(t.players&&(d.push(i.playerCount.min<=t.players&&i.playerCount.max>=t.players),t.bestWith&&d.push(t.players===i.playerCount.best),t.recommendedWith&&d.push(i.playerCount.recommended.includes(t.players))),n.forEach(f=>{var p;const[h,v]=f.split(Ia);(h&&v&&((p=Wr)==null?void 0:p[h])==="exclusive"||v)&&d.push(i.tags.includes(v))}),t.duration){const f=Ka(i,t.players??0);t.players?d.push(t.duration>=f.customTime-10&&t.duration<=f.customTime+10):d.push(t.duration>=f.min&&t.duration<=f.max)}return d.every(Boolean)}),[n,t]),{availableGames:u,comingSoonGames:o,devGames:s}=l.useMemo(()=>Jt.orderBy(c,[`title.[${e}]`],["asc"]).reduce((d,f)=>(["stable"].includes(f.release)?d.availableGames.push(f):["dev","beta"].includes(f.release)?d.devGames.push(f):d.comingSoonGames.push(f),d),{availableGames:[],devGames:[],comingSoonGames:[]}),[c,e]);return b.jsxs(zr,{className:"dev-layout",children:[b.jsx(Yr,{title:b.jsxs(b.Fragment,{children:[b.jsx(bi,{})," Hub"]}),subTitle:b.jsx(rt,{pt:"Selecione um jogo para começar",en:"Select a game to start"}),extra:[b.jsx(Da,{},"language-switch"),b.jsx(Jr,{danger:!0,ghost:!0,size:"small"},"logout-button")]}),b.jsx(Kl,{}),b.jsx(Ol,{setTagFilters:r,setNumberFilters:a,availabilityCount:u.length}),b.jsxs(Gr.Content,{className:"container",id:"main-container",children:[Br,b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Disponíveis",en:"Available"})}),b.jsx(pn,{games:u}),b.jsx(rn,{}),b.jsxs(b.Fragment,{children:[b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Em Desenvolvimento",en:"Under Development"})}),b.jsx(pn,{games:s}),b.jsx(rn,{})]}),b.jsx($t.Title,{level:2,children:b.jsx(rt,{pt:"Em Breve",en:"Coming Soon"})}),b.jsx(pn,{games:o})]})]})}function pn({games:e}){return e.length===0?b.jsx($t.Text,{type:"secondary",children:b.jsx(rt,{pt:"Nenhum jogo encontrado nessa categoria",en:"No games found in this category"})}):b.jsx(Ur,{gutter:[8,16],children:e.map(n=>b.jsx(qr,{xs:24,sm:12,md:8,lg:8,xl:6,xxl:4,children:b.jsx(Dl,{game:n,isAdmin:["dev","beta","stable"].includes(n.release)})},n.gameName))})}export{cs as default};
