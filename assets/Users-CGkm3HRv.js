import{x as _,E as q,F as C,r as d,H as w,j as e,o as u,q as I,J as i,s as o,K as m,B as M,U as R,M as B,N as F,O as L,Q,V as J,W as K}from"./index-D3vq3Txu.js";import{u as W}from"./useMutation-CN7eIMJF.js";/* empty css           */import{S as p}from"./index-DVDD9aDl.js";import"./Overflow-CqDKdLP7.js";import"./useEvent-Dj7pk07h.js";import"./PurePanel-BF2GlNzn.js";const c={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function Y(){var j,y,S;_("Users - Tarde Divertida");const{message:f,notification:E}=q.useApp(),N=C(),[n,T]=d.useState(c),[t,v]=d.useState(c),g=w({queryKey:["users"],queryFn:async()=>{const s=await F(L(J(K,"users"),Q("isGuest","!=",!0))),a=[];return s.forEach(P=>a.push(P.data())),a}}),h=W({mutationKey:["users"],mutationFn:async s=>{R.run({action:B.UPDATE_USER_DB,...s})},onSuccess:()=>{f.success("User updated"),N.invalidateQueries({queryKey:["users"]})},onError:s=>{E.error({message:"Error",description:s.message})}}),l=g.data??[],A=s=>{T(l.find(a=>a.id===s)??c)},D=s=>{v(l.find(a=>a.id===s)??c)},x=l.map(s=>{var a;return e.jsxs(p.Option,{value:s.id,children:[e.jsx("strong",{children:(a=s==null?void 0:s.names)==null?void 0:a[0]}),": ",s.id]},s.id)}),U=e.jsx(p,{onChange:A,style:{minWidth:300},children:x}),O=e.jsx(p,{onChange:D,style:{minWidth:300},children:x}),r=d.useMemo(()=>u.merge(u.cloneDeep(n??{}),u.cloneDeep(t??{})),[n,t]);return console.log(l),e.jsxs(I,{children:[e.jsx(i.Title,{children:"Users"}),g.isLoading&&e.jsx(i.Paragraph,{children:"Loading..."}),e.jsxs(o,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Origin"}),e.jsx(o,{className:"margin",children:U}),e.jsx(i.Paragraph,{children:((j=n==null?void 0:n.names)==null?void 0:j.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(n??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Destination"}),e.jsx(o,{className:"margin",children:O}),e.jsx(i.Paragraph,{children:((y=t==null?void 0:t.names)==null?void 0:y.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Merge"}),e.jsx(i.Paragraph,{children:((S=r==null?void 0:r.names)==null?void 0:S.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(r??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(M,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(r),disabled:!(r!=null&&r.id),children:['Merge Users "',n.id,'" into "',t.id,'"']})]})]})}export{Y as default};
