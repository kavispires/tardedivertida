import{r as m,aF as W,a7 as G,h as B,j as e,T as l,aP as k,k as pe,n as z,aQ as oe,b2 as he,b3 as je,e as P,x as ge,O as fe,ch as D,P as Ce,B as R,aM as ve,aT as ae,cj as Se,cp as ye,aR as be,cg as Ie,q as ie,bo as Re,cq as Ee,o as Te,b0 as we}from"./index-BO8o3uJJ.js";import{u as H,S as L,a as $,c as O,b as M,P as U,d as _,e as q,j as Pe,k as ke,g as Ne,h as Ae,i as We}from"./StepSwitcher-ifKLfq4i.js";import{G as Ge}from"./GridIcon-DOktZYCN.js";import{R as Be}from"./RoundAnnouncement-6BrX0GVN.js";import{P as v}from"./PointsHighlight-BpMvvfha.js";import{I as Y}from"./useDevFeatures-0Y-iseFW.js";import{T as V}from"./TextHighlight-DMPA_cp_.js";import{R as F}from"./RuleInstruction-DzQmwXQG.js";import{P as K}from"./PopoverRule-B7tBNkGM.js";import{b as Le}from"./DebugOnly-CVvDyvXp.js";import{u as $e}from"./useTDBaseUrl-BF9foKiS.js";import{I as Oe}from"./ItemCard-Y2t6LD8k.js";/* empty css                             */import{I as ce}from"./ImageBlurButtonContainer-Co2SzRvy.js";import{I as Me}from"./ImageCard-Mawq-Abl.js";import{u as le}from"./useMock-DgFwKNNQ.js";import{G as Ue}from"./GuessIcon-DRQQ-8SE.js";import{A as _e}from"./Avatar-C4LJ1Wrd.js";import{R as ue}from"./PlusCircleFilled-RY-g6d2G.js";import{R as qe}from"./iconUtil-CvvPRTC_.js";import{R as Fe}from"./ThunderboltOutlined-DHzPTGq0.js";import{R as Ve}from"./RankIcon-DE4lq-QT.js";import{T as ze}from"./speech-CPKO-81P.js";import{T as De}from"./TitledContainer-Bk_-jJI3.js";import{A as Q}from"./AvatarName-DtHpAO_W.js";import{F as He}from"./Table-HQvU0P63.js";import{R as Ye}from"./TrophyOutlined-Cw0D6Jq6.js";import{S as Ke}from"./StepRankingWrapper-SwZmpvQU.js";import{V as Qe}from"./VerifyListIcon-DftNlbP-.js";import{u as Ze}from"./useBooleanDictionary-DEoH0SEA.js";import{C as Je}from"./Card-COAPNM7W.js";import{B as Xe}from"./index-BcbeZ3Ai.js";import{T as er}from"./TrophyIcon-CYUax_R8.js";import"./GameBanner-CyNOTwV2.js";import{G as rr}from"./GameOverWrapper-C--NAEQh.js";import{A as sr}from"./Achievements-C00JgFpr.js";import{a as tr}from"./achievements-B2fypp9m.js";import"./RulesModal-_TyPmn7J.js";import"./WritingIcon-DBvERseS.js";import"./index-BUXxwF7q.js";import"./PurePanel-BIV7dXcV.js";import"./Game-Bx-wkJW2.js";import"./useMutation-CAyvgnnF.js";import"./index-zoUXMVHW.js";import"./index-DBcOTiOR.js";import"./Overflow-IgEnRps0.js";import"./index-DaOOh7EP.js";import"./index-DOG1G6sG.js";import"./Loading-BaMK6ogi.js";import"./useBubbleLock-C26udfNm.js";import"./AnimatedLoaderIcon-CEAeuelg.js";import"./InfoCircleOutlined-CJPxb-5P.js";import"./index-CTKn8IR6.js";import"./SignIn-CkOxuyVk.js";import"./GoogleIcon-HqrSZq6c.js";import"./WaitingRoomIcon-DaqIalBS.js";import"./AnimatedClockIcon-CNnKxZop.js";import"./LikeFilled-CcK88sT3.js";import"./StarIcon-BvmEzS_-.js";import"./MetricHighlight-BLtgva8Q.js";import"./StarFilled-BRC_8MIu.js";import"./Sprite-C7SeP31A.js";import"./WarningOutlined-C3G1RWQh.js";import"./ImageBlurButton-BM2LLUda.js";import"./EllipsisOutlined-9mtnSM80.js";import"./index-De6cxiGj.js";import"./scrollTo-ISBziAKf.js";import"./FilterFilled-Dy5FI_-r.js";import"./CaretDownOutlined-BHNEPKu8.js";import"./CaretUpOutlined-BrhddhmJ.js";import"./RankingBoard-B0R9LLEv.js";import"./TheEndIcon-iimoFBWR.js";import"./ArrowRightOutlined-B-7u-jTs.js";import"./progress-D6qOUtRm.js";import"./Medal-CsoIq_jG.js";var nr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"},or=function(s,t){return m.createElement(W,G({},s,{ref:t,icon:nr}))},ar=m.forwardRef(or),ir={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},cr=function(s,t){return m.createElement(W,G({},s,{ref:t,icon:ir}))},lr=m.forwardRef(cr),ur={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zm-40 72H184v656h656V184zM640.01 338.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-square",theme:"outlined"},dr=function(s,t){return m.createElement(W,G({},s,{ref:t,icon:ur}))},mr=m.forwardRef(dr),xr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},pr=function(s,t){return m.createElement(W,G({},s,{ref:t,icon:xr}))},hr=m.forwardRef(pr);const b={WORDS_SELECTION:"WORDS_SELECTION",CLUE_WRITING:"CLUE_WRITING",GUESSING:"GUESSING",REVEAL:"REVEAL"},Z={SUBMIT_WORDS:"SUBMIT_WORDS",SUBMIT_CLUE:"SUBMIT_CLUE",SUBMIT_GUESSES:"SUBMIT_GUESSES"};function jr(r){const{translate:s}=B(),t=H({actionName:"submit-words",onBeforeCall:()=>r(2),onError:()=>r(0),successMessage:s("Palavras enviadas com sucesso","Words submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application failed to send your words")});return o=>{t({action:Z.SUBMIT_WORDS,...o})}}function gr(r){const{translate:s}=B(),t=H({actionName:"submit-clue",onBeforeCall:()=>r(3),onError:()=>r(1),successMessage:s("Dica enviada com sucesso","Clue submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua dica","Oops, the application failed to send your clue")});return o=>{t({action:Z.SUBMIT_CLUE,...o})}}function fr(r){const{translate:s}=B(),t=H({actionName:"submit-guesses",onBeforeCall:()=>r(2),onError:()=>r(1),successMessage:s("Respostas enviadas com sucesso","Guesses submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas respostas","Oops, the application failed to send your guesses")});return o=>{t({action:Z.SUBMIT_GUESSES,...o})}}function de({playerCount:r}){return e.jsx(Y,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você tem uma coordenada específica e única na grade de palavras.",e.jsx("br",{}),"Escreva uma dica (palavra única) que conecte as palavras da linha e da coluna assinalada a você.",e.jsx("br",{}),"Escreva algo bem simples e óbvio porque se ninguém entender você perderá"," ",e.jsxs(v,{type:"negative",children:["- ",r]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["You will get an unique coordinate in the word grid.",e.jsx("br",{}),"You must write a single word clue that connects the word in the column and in the row of your coordinate.",e.jsx("br",{}),"Write something simple and obvious because if nobody gets your clue you will lose"," ",e.jsxs(v,{type:"negative",children:["- ",r]}),"points."]})})})}function J({playerCount:r}){return e.jsx(Y,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(v,{children:"+2"})," pontos para cada célula com uma resposta correta sua.",e.jsx("br",{}),e.jsx(v,{children:"+1"})," ponto para cada célula com uma dica mas uma resposta errada sua.",e.jsx("br",{}),e.jsx(v,{children:"+1"})," ponto para cada voto correto que sua dica recebeu.",e.jsx("br",{}),"Mas se ninguém acertar sua dica, você perde"," ",e.jsxs(v,{type:"negative",children:["- ",r]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(v,{children:"+2"})," points for each cell with your correct answer.",e.jsx("br",{}),e.jsx(v,{children:"+1"})," point for each cell with a clue but with a wrong answer of yours.",e.jsx("br",{}),e.jsx(v,{children:"+1"})," point for each correct vote your clue received.",e.jsx("br",{}),"But if nobody gets your clue correctly, you lose"," ",e.jsxs(v,{type:"negative",children:["- ",r]})," points."]})})})}function Cr({user:r,grid:s}){const t=s[r.coordinate];return!r.clue||!t?null:e.jsxs(k,{direction:"vertical",children:[e.jsx(pe,{size:"xx-small",children:e.jsx(l,{pt:"Sua dica",en:"Your clue"})}),e.jsxs("span",{children:[e.jsx(V,{children:t.xText})," + ",e.jsx(V,{children:t.yText})," ="," ",e.jsx(V,{children:r.clue})]})]})}function vr(r){return r.gridType==="contenders"?e.jsx(Sr,{...r}):r.gridType==="images"?e.jsx(yr,{...r}):r.gridType==="items"?e.jsx(br,{...r}):e.jsx(e.Fragment,{children:r.cell.text})}function Sr({cell:r}){const{shouldBeBlurred:s}=Le(),t=$e("images"),o=z(8,{gap:16,minWidth:30,maxWidth:100}),i=r.id?.replace(/-/g,"/"),c=s(r.id);return e.jsxs("div",{className:"w-contender",style:{width:`${o}px`},children:[e.jsx(oe,{title:r.text,children:e.jsx("span",{className:"w-contender-name",children:r.text})}),e.jsx(he,{src:`${t}/${i}.jpg`,width:o,className:P("w-contender-image",c&&"w-contender-image--blur"),fallback:`${je.IN_GAME}/w-no-image.jpg`,alt:r.text})]})}function yr({cell:r}){const s=z(8,{gap:16,minWidth:30,maxWidth:100});return e.jsx("div",{className:"w-contender",style:{width:`${s}px`},children:e.jsx(ce,{cardId:r.id??"",children:e.jsx(Me,{id:r.id??"",cardWidth:s})})})}function br({cell:r}){const s=z(8,{gap:16,minWidth:30,maxWidth:100});return e.jsx("div",{className:"w-contender",style:{width:`${s}px`},children:e.jsx(ce,{cardId:r.id??"",children:e.jsx(Oe,{id:r.id??"",text:{pt:r.text,en:r.text},width:s,className:"transparent-gradient"})})})}function X({grid:r,user:s,CellComponent:t,gridType:o,cellComponentProps:i={}}){const c=Math.sqrt(r.length),n={gridTemplateColumns:`repeat(${c}, 1fr)`,gridTemplateRows:`repeat(${c}, auto)`};return e.jsx("div",{className:"x-grid",style:n,children:r.map(a=>e.jsxs("div",{className:P("x-grid-cell",`x-grid-cell--${a.kind}`),children:[a.kind==="header"&&e.jsx(vr,{cell:a,gridType:o}),a.kind==="cell"&&e.jsx(t,{...i,cell:a,user:s})]},`${a.index}-${a.kind}`))})}function ee({clue:r}){return e.jsx("div",{className:"x-previous-clue",children:r})}function Ir({x:r,y:s,onSubmit:t,disabled:o,index:i}){const[c,n]=m.useState(""),a=m.useRef(null),d=u=>{n(u.target.value)};return m.useEffect(()=>a?.current?.focus(),[]),le(()=>{t({clue:`${r.substring(0,r.length/2)}${s.substring(s.length/2)}`,currentClueCoordinate:i})},[]),e.jsxs(ge,{direction:"vertical",children:[e.jsx(fe,{ref:a,placeholder:`${r} + ${s}`,onChange:d,onPressEnter:()=>t({clue:c,currentClueCoordinate:i})}),e.jsx(D,{onClick:()=>t({clue:c,currentClueCoordinate:i}),disabled:o||!c.length,children:e.jsx(l,{pt:"Enviar",en:"Submit"})})]})}function Rr({onSubmitClue:r,cell:s,user:t,disabled:o}){return s.writable&&t.id===s.playerId?e.jsx(Ce,{content:e.jsx(Ir,{x:s.xText??"",y:s.yText??"",index:s.index,onSubmit:r}),title:e.jsx(l,{pt:"Escreva",en:"Write"}),trigger:"click",children:e.jsx(R,{shape:"circle",type:"primary",disabled:o,children:e.jsx(hr,{})})}):s.text?e.jsx(ee,{clue:s.text}):null}function Er({grid:r,gridType:s,user:t,onSubmitClue:o,players:i,announcement:c}){const{isLoading:n}=ve(),a=d=>{o({clue:d.clue.trim().toLowerCase(),currentClueCoordinate:d.currentClueCoordinate})};return e.jsxs(L,{fullWidth:!0,announcement:c,children:[e.jsx($,{children:e.jsx(l,{pt:"Escreva sua dica",en:"Write your clue"})}),e.jsx(K,{content:e.jsx(de,{playerCount:Object.keys(i).length})}),e.jsx(F,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Clique em um dos ícones na grade e escreva sua dica.",e.jsx("br",{}),"Você só precisa escrever a dica para uma das coordenadas.",e.jsx("br",{}),"Sua dica deve conter apenas ",e.jsx("strong",{children:"uma palavra única"}),".",e.jsx("br",{}),"Você ",e.jsx("strong",{children:"NÃO"})," pode usar nenhuma palavra que esteja na grade."]}),en:e.jsxs(e.Fragment,{children:["Click on the icon on either of the table cell and write your clue.",e.jsx("br",{}),"You only need to write the clue for one of the coordinates.",e.jsx("br",{}),"Your clue must be a ",e.jsx("strong",{children:"single-word"})," clue.",e.jsx("br",{}),"You can ",e.jsx("strong",{children:"NOT"})," use any words already in the table."]})})}),e.jsx(X,{grid:r,user:t,CellComponent:Rr,cellComponentProps:{onSubmitClue:a,disabled:n},gridType:s})]})}function Tr({players:r,state:s}){const{step:t,goToNextStep:o,setStep:i}=O(0),c=M(r,s),n=gr(i),a=e.jsx(U,{icon:e.jsx(Ge,{}),title:e.jsx(l,{pt:"Escreva!",en:"Write!"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(de,{playerCount:Object.keys(r).length})});return e.jsx(_,{phase:s?.phase,allowedPhase:b.CLUE_WRITING,children:e.jsxs(q,{step:t,players:r,waitingRoom:{content:e.jsx(Cr,{grid:s.grid,user:c})},children:[e.jsx(Be,{round:s?.round,onPressButton:o,buttonText:" ",time:5}),e.jsx(Er,{user:c,grid:s.grid,gridType:s.gameType,onSubmitClue:n,players:r,announcement:a})]})})}const se=r=>!!r?.clue,I=r=>`${r?.clue}${ae}${r?.playerId}`,me=r=>r.split(ae)??["",""];function re({isMatched:r,isSelected:s,clue:t,indexColor:o=0,color:i,player:c,strikeMatches:n=!1}){const a=ye(o);return e.jsxs("div",{className:P("x-clue-card",s&&"x-clue-card--selected",!i&&`color-border--${a}`),style:{borderColor:i},children:[e.jsx("span",{className:P("x-clue-card__icon",!i&&`color-background--${a}`),style:{backgroundColor:i},children:r?c?e.jsx(_e,{id:c?.avatarId}):e.jsx(Se,{}):e.jsx(ue,{style:s?{color:"gold"}:{color:"white"}})}),e.jsx("span",{className:P("x-clue-card__clue",r&&n&&"x-clue-card__clue--matched"),children:t})]})}function wr({onSelectCell:r,onClearCell:s,cell:t,active:o,guesses:i,clues:c,user:n}){const a=t.index===o,d=Object.entries(i).find(p=>p[1]===t.index),[u,g]=d??[],[f,E]=me(u??""),x=g===t.index;if(x){const p=c.findIndex(y=>y.clue===f&&y.playerId===E);return e.jsx(R,{onClick:n.id!==E&&u?()=>s(u):()=>{},type:"text",style:{height:"auto"},children:e.jsx(re,{isMatched:x,isSelected:a,clue:f,indexColor:p})})}return t.text?e.jsx(ee,{clue:t.text}):t.playerId===n.id?e.jsx(oe,{title:e.jsx(l,{pt:"Essa célula pertence a uma de duas outras dicas, então não pode ser essa",en:"This cell belongs to one of two other clues, so it can't be this one"}),children:e.jsx(R,{shape:"circle",ghost:!0,children:e.jsx(qe,{})})}):e.jsx(R,{onClick:()=>r(t.index),shape:"circle",children:e.jsx(ue,{style:a?{color:"gold"}:{}})})}function Pr({clues:r,onActivateClue:s,active:t,guesses:o}){return e.jsx("ul",{className:"x-clue-cards",children:r.map((i,c)=>{const n=typeof t!="number"&&i.coordinate===t?.coordinate,a=!!o[I(i)];return e.jsx("li",{className:"x-clue-card-li",children:e.jsx("button",{type:"button",className:"x-clue-card-button",onClick:()=>s(i),children:e.jsx(re,{isMatched:a,isSelected:n,clue:i.clue,indexColor:c,strikeMatches:!0})})},`${i.coordinate}-${i.clue}`)})})}function kr({grid:r,gridType:s,user:t,clues:o,onSubmitGuesses:i,announcement:c}){const[n,a]=m.useState(null),[d,u]=m.useState({}),[g,f]=m.useState(!1),E=m.useCallback(h=>{if(!n||se(n)){a(h);return}typeof n=="number"&&(u(C=>({...C,[I(h)]:n})),a(null))},[n]),x=m.useCallback(h=>{se(n)?u(C=>{const S=Object.entries(C).reduce((N,[w,j])=>(w&&j&&j!==h&&(N[w]=j),N),{});return n&&typeof n!="number"&&(S[I(n)]=h),a(null),S}):a(h)},[n]),p=h=>{u(C=>{const S={...C};return delete S[h],S})},y=m.useCallback(()=>{const h=Object.entries(d).reduce((C,[S,N])=>{const[,w]=me(S);return C[w]=N,C},{});i({guesses:h,choseRandomly:g})},[d,i,g]);be(()=>{const h=o.find(C=>C.playerId===t.id);u({[I(h)]:h?.coordinate??-1})});const T=()=>{const h=Object.values(d),C=Object.keys(d);f(!0);const S=Ie(r.filter(j=>j.available&&j.playerId!==t.id&&!h.includes(j.index))),w=o.filter(j=>!C.includes(I(j))).reduce((j,A,xe)=>(A.playerId===t.id?j[I(A)]=A.coordinate:j[I(A)]=S[xe].index,j),{});u({...w,...d})};return e.jsxs(L,{fullWidth:!0,announcement:c,children:[e.jsx($,{children:e.jsx(l,{pt:"Decifre as dicas!",en:"Guess the cells!"})}),e.jsx(Pr,{clues:o,onActivateClue:E,active:n,guesses:d}),e.jsx(F,{type:"action",children:e.jsx(l,{pt:"Clique em uma dica acima e em uma célula abaixo, ou vice-versa para posicionar as dicas nas células corretas.",en:"Click on a clue above then on a cell below, or vice-versa, to position the clues in their correct cells."})}),e.jsxs(k,{align:"center",children:[e.jsx(R,{size:"large",type:"dashed",onClick:T,icon:e.jsx(Fe,{}),children:e.jsx(l,{pt:"Desistir",en:"Give up"})}),e.jsx(D,{size:"large",onClick:y,disabled:Object.keys(d).length!==o.length,children:e.jsx(l,{pt:"Enviar respostas",en:"Send guesses"})})]}),e.jsx(X,{grid:r,gridType:s,user:t,CellComponent:wr,cellComponentProps:{onSelectCell:x,onClearCell:p,active:n,guesses:d,clues:o,user:t}})]})}function Nr({players:r,state:s}){const{step:t,setStep:o}=O(0),i=M(r,s),c=fr(o),n=e.jsx(U,{icon:e.jsx(Ue,{}),title:e.jsx(l,{pt:"Match!",en:"Combine!"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(Y,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Agora combine as dicas de cada jogador com as coordenadas corretas!",e.jsx("br",{}),"Basta clicar em uma das dicas no topo e então em uma das células da grade."]}),en:e.jsxs(e.Fragment,{children:["Now match the clues from each player with the correct coordinates",e.jsx("br",{}),"Just click on one of the clues on top then in one of the cells in the grid."]})})})});return e.jsx(_,{phase:s?.phase,allowedPhase:b.GUESSING,children:e.jsx(q,{step:t,players:r,children:e.jsx(kr,{user:i,grid:s.grid,gridType:s.gameType,clues:s.clues,onSubmitGuesses:c,announcement:n})})})}function te({badCluesPlayersList:r}){return e.jsx("span",{children:r.map((s,t)=>e.jsxs("span",{children:[e.jsx(Q,{player:s,size:"small"},`bad-clue-${s.id}`),r.length>0&&t<r.length-1?", ":""]},`bad-clue-${s.id}-${t}`))})}function Ar({players:r,grid:s,correctCoordinatesPerPlayer:t}){const{translate:o}=B(),i=[{title:o("Jogador","Player"),dataIndex:"player",key:"player",render:n=>e.jsx(Q,{player:n}),sorter:(n,a)=>n.playerName.localeCompare(a.playerName)},{title:o("Achou que","Thought that"),dataIndex:"guess",key:"guess",render:n=>n.toUpperCase(),sorter:(n,a)=>n.guess.localeCompare(a.guess)},{title:o("Era","Was"),dataIndex:"clue",key:"clue",render:n=>n.toUpperCase(),sorter:(n,a)=>n.clue.localeCompare(a.clue)},{title:o("Resultado","Result"),dataIndex:"result",key:"result",render:n=>n?e.jsx(ar,{style:{color:"green"}}):e.jsx(lr,{style:{color:"red"}}),sorter:n=>n.result===!0?1:-1}],c=m.useMemo(()=>{const n=Object.values(r).map(a=>Object.entries(a?.guesses??{}).reduce((d,[u,g])=>{if(u===a.id)return d;const f=s[g];return d.push({playerName:a.name,player:a,clue:`${f.yText} + ${f.xText}`,guess:r[u].clue,result:t?.[g]===u}),d},[]));return ie.orderBy(n.flat(),["playerName","guess"],["asc","asc"])},[r,s,t]);return e.jsx(He,{size:"small",columns:i,dataSource:c,pagination:!1})}function ne({cellPlayers:r,players:s}){return e.jsx("ul",{children:r.map(({playerId:t,isCorrect:o})=>o?e.jsx("li",{className:P(o&&"x-players-in-cell-player--correct"),children:e.jsx(Q,{player:s[t],size:"small"})},`players-in-cell-${t}`):void 0)})}function Wr({cell:r,clues:s,players:t,playerPerVotedCell:o,colorCodedCluesPerPlayer:i}){const c=s.find(a=>a.coordinate===r.index),n=(o[r.index]??[]).filter(a=>a.isCorrect);return c?.playerId?e.jsxs("div",{className:"center",children:[e.jsx(re,{isMatched:!0,clue:c.clue,color:i[c.playerId],player:t[c.playerId]}),n.length?e.jsx(ne,{cellPlayers:n,players:t}):e.jsx(mr,{})]}):r.text?e.jsx(ee,{clue:r.text}):e.jsx("span",{children:!!n.length&&e.jsx(ne,{cellPlayers:n,players:t})})}const Gr=Re;function Br({grid:r,gridType:s,user:t,players:o,clues:i,goToNextStep:c,whoGotNoPoints:n,announcement:a}){Pe();const{correctCoordinatesPerPlayer:d,colorCodedCluesPerPlayer:u,whoGotNoPointsNames:g,playerCount:f}=m.useMemo(()=>({correctCoordinatesPerPlayer:i.reduce((x,p)=>(p.playerId&&(x[p.coordinate]=p.playerId),x),{}),colorCodedCluesPerPlayer:i.reduce((x,p)=>(p.playerId&&(x[p.playerId]=Gr[o[p.playerId].avatarId].color),x),{}),whoGotNoPointsNames:n.map(x=>o[x]),playerCount:Object.keys(o).length}),[o,i,n]),E=m.useMemo(()=>Object.values(o).reduce((x,p)=>(Object.entries(p.guesses??{}).forEach(([y,T])=>{y!==p.id&&(x[T]===void 0&&(x[T]=[]),x[T].push({playerId:p.id,color:u[y],isCorrect:d[T]===y}))}),x),{}),[o,d,u]);return e.jsxs(L,{fullWidth:!0,announcement:a,children:[e.jsx($,{children:e.jsx(l,{pt:"Resultado",en:"Results"})}),e.jsx(K,{content:e.jsx(J,{playerCount:f})}),!!n.length&&e.jsx(F,{type:"alert",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Ninguém acertou a(s) dica(s) dadas por",e.jsx(te,{badCluesPlayersList:g}),", então ele(s) perde(m)"," ",e.jsxs(v,{type:"negative",children:["- ",f]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Nobody got the clues given by",e.jsx(te,{badCluesPlayersList:g}),", so they lose"," ",e.jsxs(v,{type:"negative",children:["- ",f]})," points."]})})}),e.jsx(X,{grid:r,gridType:s,user:t,CellComponent:Wr,cellComponentProps:{clues:i,players:o,playerPerVotedCell:E,colorCodedCluesPerPlayer:u}}),e.jsx(k,{align:"center",children:e.jsx(ze,{duration:Ee(f,6,40,15)+5,icon:e.jsx(Ye,{}),onExpire:c,onClick:c,children:e.jsx(l,{pt:"Ver Ranking",en:"See Ranking"})})}),e.jsx(De,{title:e.jsx(l,{pt:"Todas as respostas",en:"All Answers"}),children:e.jsx(Ar,{correctCoordinatesPerPlayer:d,players:o,grid:r})})]})}function Lr({players:r,playerCount:s,ranking:t,goToPreviousStep:o,round:i}){return e.jsxs(Ke,{players:r,ranking:t,gainedPointsDescriptions:[e.jsx(l,{pt:"Palpites corretos",en:"Correct guesses"},"1"),e.jsx(l,{pt:"Palpites que acertaram a célula de outra dica",en:"Guesses that were placed in a cell for a different clue"},"2"),e.jsx(l,{pt:"Palpites recebidos corretamente",en:"Received correct guesses"},"3"),e.jsx(l,{pt:"Penalidade se ninguém acertou a sua dica",en:"Penalty for nobody getting your clue correctly"},"4")],children:[e.jsx(K,{content:e.jsx(J,{playerCount:s})}),e.jsx(k,{align:"center",children:e.jsx(R,{onClick:o,children:e.jsx(l,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(ke,{round:i})]})}function $r({players:r,state:s}){const{step:t,goToNextStep:o,goToPreviousStep:i}=O(0),c=M(r,s),n=Object.keys(r).length,a=e.jsx(U,{icon:e.jsx(Ve,{}),title:e.jsx(l,{pt:"Resultado",en:"Results"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(J,{playerCount:n})});return e.jsx(_,{phase:s?.phase,allowedPhase:b.REVEAL,children:e.jsxs(q,{step:t,players:r,children:[e.jsx(Br,{user:c,grid:s.grid,gridType:s.gameType,clues:s.clues,goToNextStep:o,players:r,whoGotNoPoints:s.whoGotNoPoints??[],announcement:a}),e.jsx(Lr,{players:r,playerCount:n,round:s.round,ranking:s.ranking,goToPreviousStep:i})]})})}function Or({deck:r,onSubmitWords:s,user:t,announcement:o}){const{updateDict:i,length:c,keys:n,setDict:a}=Ze({});le();const d=()=>{a(ie.sampleSize(r,10).reduce((u,g)=>(u[g.id]=!0,u),{}))};return e.jsxs(L,{fullWidth:!0,announcement:o,children:[e.jsx($,{children:e.jsx(l,{pt:"Quais cartas deveriam estar no jogo?",en:"What cards should be in the game?"})}),e.jsx(F,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," pelo menos 10 cartas para estar no jogo.",e.jsx("br",{}),"Quanto mais melhor!"]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," at least 10 cards to be in the game.",e.jsx("br",{}),"The more the merrier!"]})})}),e.jsxs(k,{children:[e.jsx(R,{onClick:d,size:"large",children:e.jsx(l,{pt:"Selecione pra mim",en:"Select for me"})}),e.jsx(Xe,{count:c,children:e.jsx(D,{onClick:()=>s({words:n}),size:"large",disabled:c<10||t.ready,children:e.jsx(l,{pt:"Enviar cartas",en:"Submit cards"})})})]}),e.jsx(k,{className:"max-width",wrap:!0,children:r.map(u=>e.jsx(Te,{onClick:()=>i(u.id),active:n.includes(u.id),children:e.jsx(Je,{hideHeader:!0,children:u.text})},u.id))})]})}function Mr({players:r,state:s}){const{step:t,setStep:o}=O(0),i=M(r,s),c=jr(o),n=e.jsx(U,{icon:e.jsx(Qe,{}),title:e.jsx(l,{pt:"Preparação da Grade",en:"Grid Setup"}),currentRound:s?.round?.current,type:"overlay"});return e.jsx(_,{phase:s?.phase,allowedPhase:b.WORDS_SELECTION,children:e.jsx(q,{step:t,players:r,children:e.jsx(Or,{deck:s.deck,onSubmitWords:c,user:i,announcement:n})})})}function Ur({state:r,players:s}){return e.jsx(rr,{state:r,players:s,announcementIcon:e.jsx(er,{}),children:e.jsx(sr,{players:s,achievements:r.achievements,reference:tr})})}function _r(r){switch(r.phase){case b.WORDS_SELECTION:return Mr;case b.CLUE_WRITING:return Tr;case b.GUESSING:return Nr;case b.REVEAL:return $r;case We.DEFAULT.GAME_OVER:return Ur;default:return Ae}}function lt(){return e.jsx(Ne,{gameCollection:we.CRUZA_PALAVRAS,getActiveComponent:_r})}export{lt as default};
