import{r as l,aF as He,a7 as Ye,h as Xe,j as o,T as D,aP as ye,k as Qn,n as jt,aQ as vt,b2 as Zn,b3 as er,e as Z,x as tr,O as nr,F as vn,ch as St,P as rr,B as Oe,aM as or,$ as U,cq as De,aT as xn,cj as sr,cr as ir,cg as ar,q as bn,bo as cr,cs as lr,o as ur,b0 as dr}from"./index-BFQIz1tV.js";import{u as Rt,S as Ke,a as Je,b as Qe,P as Ze,c as et,d as tt,i as fr,j as hr,f as pr,g as gr,h as mr}from"./StepSwitcher-B7bHDydt.js";import{G as vr}from"./GridIcon-tU-D0pmg.js";import{R as xr}from"./RoundAnnouncement-OUJDIp06.js";import{P as z}from"./PointsHighlight-BLOkdw1J.js";import{I as Et}from"./useDevFeatures-BNViumXX.js";import{T as ft}from"./TextHighlight-BE8JSoDx.js";import{R as ke}from"./RuleInstruction-Cifqilma.js";import{P as Dt}from"./PopoverRule-MJK0_nBV.js";import{S as br,a as yr}from"./SpreadsheetGrid-CCrlT7Y0.js";import{b as wr}from"./DebugOnly-CcteVlKs.js";import{u as Cr}from"./useTDBaseUrl-BF9foKiS.js";import{I as jr}from"./ItemCard-8_g-XDDq.js";/* empty css                             */import{I as yn}from"./ImageBlurButtonContainer-CLHwAxgm.js";import{I as Sr}from"./ImageCard-DHgm25RO.js";import{u as wn}from"./useMock-DVsXhraN.js";import{G as Rr}from"./GuessIcon-qJfedLHK.js";import{A as Er}from"./Avatar-5uBJllm5.js";import{R as Cn}from"./PlusCircleFilled-DJwbWMq8.js";import{R as Dr}from"./iconUtil-rl9-VQgW.js";import{R as Ir}from"./ThunderboltOutlined-Cd1MYQQ4.js";import{R as Tr}from"./RankIcon-Dv8SVIuG.js";import{T as Ar}from"./speech-Bz-SNni4.js";import{T as jn}from"./TitledContainer-CRBUKO5H.js";import{A as It}from"./AvatarName-Dg7sOat8.js";import{F as Mr}from"./Table-9UjW0tBh.js";import{R as Nr}from"./TrophyOutlined-CkaFdDOM.js";import{S as Or}from"./StepRankingWrapper-BrcueYWv.js";import{V as kr}from"./VerifyListIcon-BgDhEDuM.js";import{u as Pr}from"./useBooleanDictionary-BWms1j0i.js";import{C as Lr}from"./Card-CLjsREjQ.js";import{B as Br}from"./index-86jId5P6.js";import{T as $r}from"./TrophyIcon-8ApDOBWf.js";import"./GameBanner-BGxQmMxD.js";import{G as Wr}from"./GameOverWrapper-czY95wOI.js";import{A as Fr}from"./Achievements-CkXB-jdU.js";import{a as zr}from"./achievements-B2fypp9m.js";import{D as Gr}from"./index-DCy2eMAZ.js";import"./RulesModal-BLkYdQJN.js";import"./WritingIcon-D7rxWG49.js";import"./index-DKIXLMyT.js";import"./PurePanel-D-KLEoVy.js";import"./Game-L_qjswhn.js";import"./useMutation-DwRMdaO1.js";import"./index-ClwxvC2Y.js";import"./index-HSmOHLYS.js";import"./Overflow-Bj1fIGTx.js";import"./index-B8zLa4ZH.js";import"./index-ax3SFS0M.js";import"./Loading-BHpT2CxH.js";import"./useBubbleLock-BoAG9VcV.js";import"./AnimatedLoaderIcon-BtnX9CZ_.js";import"./InfoCircleOutlined-Lf523b_6.js";import"./SignIn-D67KzAaJ.js";import"./GoogleIcon-CuZjLk1_.js";import"./WaitingRoomIcon-Cq-2PJWE.js";import"./AnimatedClockIcon-B1C-XKwG.js";import"./LikeFilled-D9i1WgKY.js";import"./StarIcon-CFwpD4ee.js";import"./MetricHighlight-By4evaie.js";import"./StarFilled-CLipgDBT.js";import"./Sprite-CTYzCju9.js";import"./WarningOutlined-wak_jOLZ.js";import"./ImageBlurButton-CnhL5WC2.js";import"./EllipsisOutlined-yAnigfSz.js";import"./index-CdhdAgEK.js";import"./scrollTo-BL3YM0_M.js";import"./FilterFilled-B5Adc5Mf.js";import"./CaretDownOutlined-CbNiu7FE.js";import"./CaretUpOutlined-Bt0ZI0po.js";import"./RankingBoard-DIE0hV0e.js";import"./TheEndIcon-lMEWEWMD.js";import"./ArrowRightOutlined-lQ-EhfqO.js";import"./progress-DAJghG2m.js";import"./Medal-C3Yj3ImG.js";var Ur={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"},Vr=function(t,n){return l.createElement(He,Ye({},t,{ref:n,icon:Ur}))},qr=l.forwardRef(Vr),_r={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},Hr=function(t,n){return l.createElement(He,Ye({},t,{ref:n,icon:_r}))},Yr=l.forwardRef(Hr),Xr={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zm-40 72H184v656h656V184zM640.01 338.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-square",theme:"outlined"},Kr=function(t,n){return l.createElement(He,Ye({},t,{ref:n,icon:Xr}))},Jr=l.forwardRef(Kr),Qr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},Zr=function(t,n){return l.createElement(He,Ye({},t,{ref:n,icon:Qr}))},eo=l.forwardRef(Zr);const ce={WORDS_SELECTION:"WORDS_SELECTION",CLUE_WRITING:"CLUE_WRITING",GUESSING:"GUESSING",REVEAL:"REVEAL"},Tt={SUBMIT_WORDS:"SUBMIT_WORDS",SUBMIT_CLUE:"SUBMIT_CLUE",SUBMIT_GUESSES:"SUBMIT_GUESSES"};function to(e){const{translate:t}=Xe(),n=Rt({actionName:"submit-words",onBeforeCall:()=>e(2),onError:()=>e(0),successMessage:t("Palavras enviadas com sucesso","Words submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application failed to send your words")});return r=>{n({action:Tt.SUBMIT_WORDS,...r})}}function no(e){const{translate:t}=Xe(),n=Rt({actionName:"submit-clue",onBeforeCall:()=>e(3),onError:()=>e(1),successMessage:t("Dica enviada com sucesso","Clue submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar sua dica","Oops, the application failed to send your clue")});return r=>{n({action:Tt.SUBMIT_CLUE,...r})}}function ro(e){const{translate:t}=Xe(),n=Rt({actionName:"submit-guesses",onBeforeCall:()=>e(2),onError:()=>e(1),successMessage:t("Respostas enviadas com sucesso","Guesses submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar suas respostas","Oops, the application failed to send your guesses")});return r=>{n({action:Tt.SUBMIT_GUESSES,...r})}}function Sn({playerCount:e}){return o.jsx(Et,{children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:["Você tem uma coordenada específica e única na grade de palavras.",o.jsx("br",{}),"Escreva uma dica (palavra única) que conecte as palavras da linha e da coluna assinalada a você.",o.jsx("br",{}),"Escreva algo bem simples e óbvio porque se ninguém entender você perderá"," ",o.jsxs(z,{type:"negative",children:["- ",e]})," pontos."]}),en:o.jsxs(o.Fragment,{children:["You will get an unique coordinate in the word grid.",o.jsx("br",{}),"You must write a single word clue that connects the word in the column and in the row of your coordinate.",o.jsx("br",{}),"Write something simple and obvious because if nobody gets your clue you will lose"," ",o.jsxs(z,{type:"negative",children:["- ",e]}),"points."]})})})}function At({playerCount:e}){return o.jsx(Et,{children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:["Você ganha ",o.jsx(z,{children:"+2"})," pontos para cada célula com uma resposta correta sua.",o.jsx("br",{}),o.jsx(z,{children:"+1"})," ponto para cada célula com uma dica mas uma resposta errada sua.",o.jsx("br",{}),o.jsx(z,{children:"+1"})," ponto para cada voto correto que sua dica recebeu.",o.jsx("br",{}),"Mas se ninguém acertar sua dica, você perde"," ",o.jsxs(z,{type:"negative",children:["- ",e]})," pontos."]}),en:o.jsxs(o.Fragment,{children:["You get ",o.jsx(z,{children:"+2"})," points for each cell with your correct answer.",o.jsx("br",{}),o.jsx(z,{children:"+1"})," point for each cell with a clue but with a wrong answer of yours.",o.jsx("br",{}),o.jsx(z,{children:"+1"})," point for each correct vote your clue received.",o.jsx("br",{}),"But if nobody gets your clue correctly, you lose"," ",o.jsxs(z,{type:"negative",children:["- ",e]})," points."]})})})}function oo({user:e,grid:t}){const n=t[e.currentClueCoordinate];return!e.clue||!n?null:o.jsxs(ye,{direction:"vertical",className:"mb-10",children:[o.jsx(Qn,{size:"xx-small",children:o.jsx(D,{pt:"Sua dica",en:"Your clue"})}),o.jsxs("span",{children:[o.jsx(ft,{children:n.xText})," + ",o.jsx(ft,{children:n.yText})," ="," ",o.jsx(ft,{children:e.clue})]})]})}function so(e){return e.gridType==="contenders"?o.jsx(io,{...e}):e.gridType==="images"?o.jsx(ao,{...e}):e.gridType==="items"?o.jsx(co,{...e}):o.jsx(o.Fragment,{children:e.cell.text})}function io({cell:e}){const{shouldBeBlurred:t}=wr(),n=Cr("images"),r=jt(8,{gap:16,minWidth:30,maxWidth:100}),s=e.id?.replace(/-/g,"/"),i=t(e.id);return o.jsxs("div",{className:"w-contender",style:{width:`${r}px`},children:[o.jsx(vt,{title:e.text,children:o.jsx("span",{className:"w-contender-name",children:e.text})}),o.jsx(Zn,{src:`${n}/${s}.jpg`,width:r,className:Z("w-contender-image",i&&"w-contender-image--blur"),fallback:`${er.IN_GAME}/w-no-image.jpg`,alt:e.text})]})}function ao({cell:e}){const t=jt(8,{gap:16,minWidth:30,maxWidth:100});return o.jsx("div",{className:"w-contender",style:{width:`${t}px`},children:o.jsx(yn,{cardId:e.id??"",children:o.jsx(Sr,{id:e.id??"",cardWidth:t})})})}function co({cell:e}){const t=jt(8,{gap:16,minWidth:30,maxWidth:100});return o.jsx("div",{className:"w-contender",style:{width:`${t}px`},children:o.jsx(yn,{cardId:e.id??"",children:o.jsx(jr,{id:e.id??"",text:{pt:e.text,en:e.text},width:t,className:"transparent-gradient"})})})}function nt({grid:e,user:t,CellComponent:n,gridType:r,cellComponentProps:s={}}){const i=Math.sqrt(e.length);return o.jsx(br,{columns:i,rows:i,children:e.map(a=>o.jsxs(yr,{header:a.kind==="header",children:[a.kind==="header"&&o.jsx(so,{cell:a,gridType:r}),a.kind==="cell"&&o.jsx(n,{...s,cell:a,user:t})]},`${a.index}-${a.kind}`))})}function Mt({clue:e}){return o.jsx("div",{className:"x-previous-clue",children:e})}function lo({x:e,y:t,onSubmit:n,disabled:r,index:s}){const[i,a]=l.useState(""),c=l.useRef(null),u=d=>{a(d.target.value)};return l.useEffect(()=>c?.current?.focus(),[]),wn(()=>{n({clue:`${e.substring(0,e.length/2)}${t.substring(t.length/2)}`,currentClueCoordinate:s})},[]),o.jsxs(tr,{direction:"vertical",children:[o.jsx(nr,{ref:c,placeholder:`${e} + ${t}`,onChange:u,onPressEnter:()=>n({clue:i,currentClueCoordinate:s})}),o.jsx(vn,{justify:"flex-end",children:o.jsx(St,{onClick:()=>n({clue:i,currentClueCoordinate:s}),disabled:r||!i.length,children:o.jsx(D,{pt:"Enviar",en:"Submit"})})})]})}function uo({onSubmitClue:e,cell:t,user:n,disabled:r}){return t.writable&&n.id===t.playerId?o.jsx(rr,{content:o.jsx(lo,{x:t.xText??"",y:t.yText??"",index:t.index,onSubmit:e}),title:o.jsx(D,{pt:"Escreva",en:"Write"}),trigger:"click",children:o.jsx(Oe,{shape:"circle",type:"primary",disabled:r,children:o.jsx(eo,{})})}):t.text?o.jsx(Mt,{clue:t.text}):null}function fo({grid:e,gridType:t,user:n,onSubmitClue:r,players:s,announcement:i}){const{isLoading:a}=or(),c=u=>{r({clue:u.clue.trim().toLowerCase(),currentClueCoordinate:u.currentClueCoordinate})};return o.jsxs(Ke,{fullWidth:!0,announcement:i,children:[o.jsx(Je,{children:o.jsx(D,{pt:"Escreva sua dica",en:"Write your clue"})}),o.jsx(Dt,{content:o.jsx(Sn,{playerCount:Object.keys(s).length})}),o.jsx(ke,{type:"action",children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:["Clique em um dos ícones na grade e escreva sua dica.",o.jsx("br",{}),"Você só precisa escrever a dica para uma das coordenadas.",o.jsx("br",{}),"Sua dica deve conter apenas ",o.jsx("strong",{children:"uma palavra única"}),".",o.jsx("br",{}),"Você ",o.jsx("strong",{children:"NÃO"})," pode usar nenhuma palavra que esteja na grade."]}),en:o.jsxs(o.Fragment,{children:["Click on the icon on either of the table cell and write your clue.",o.jsx("br",{}),"You only need to write the clue for one of the coordinates.",o.jsx("br",{}),"Your clue must be a ",o.jsx("strong",{children:"single-word"})," clue.",o.jsx("br",{}),"You can ",o.jsx("strong",{children:"NOT"})," use any words already in the table."]})})}),o.jsx(nt,{grid:e,user:n,CellComponent:uo,cellComponentProps:{onSubmitClue:c,disabled:a},gridType:t})]})}function ho({players:e,state:t,user:n}){const{step:r,goToNextStep:s,setStep:i}=Qe(0),a=no(i),c=o.jsx(Ze,{icon:o.jsx(vr,{}),title:o.jsx(D,{pt:"Escreva!",en:"Write!"}),currentRound:t?.round?.current,type:"overlay",children:o.jsx(Sn,{playerCount:Object.keys(e).length})});return o.jsx(et,{phase:t?.phase,allowedPhase:ce.CLUE_WRITING,children:o.jsxs(tt,{step:r,players:e,waitingRoom:{content:o.jsx(oo,{grid:t.grid,user:n})},children:[o.jsx(xr,{round:t?.round,onPressButton:s,buttonText:" ",time:5}),o.jsx(fo,{user:n,grid:t.grid,gridType:t.gameType,onSubmitClue:a,players:e,announcement:c})]})})}const rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function we(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Nt(e){return"nodeType"in e}function L(e){var t,n;return e?we(e)?e:Nt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ot(e){const{Document:t}=L(e);return e instanceof t}function Pe(e){return we(e)?!1:e instanceof L(e).HTMLElement}function Rn(e){return e instanceof L(e).SVGElement}function Ce(e){return e?we(e)?e.document:Nt(e)?Ot(e)?e:Pe(e)||Rn(e)?e.ownerDocument:document:document:document}const le=rt?l.useLayoutEffect:l.useEffect;function kt(e){const t=l.useRef(e);return le(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function po(){const e=l.useRef(null),t=l.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Me(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return le(()=>{n.current!==e&&(n.current=e)},t),n}function Le(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ue(e){const t=kt(e),n=l.useRef(null),r=l.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function xt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let ht={};function ot(e,t){return l.useMemo(()=>{if(t)return t;const n=ht[e]==null?0:ht[e]+1;return ht[e]=n,e+"-"+n},[e,t])}function En(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const c=Object.entries(a);for(const[u,d]of c){const h=i[u];h!=null&&(i[u]=h+e*d)}return i},{...t})}}const be=En(1),Ve=En(-1);function go(e){return"clientX"in e&&"clientY"in e}function Dn(e){if(!e)return!1;const{KeyboardEvent:t}=L(e.target);return t&&e instanceof t}function mo(e){if(!e)return!1;const{TouchEvent:t}=L(e.target);return t&&e instanceof t}function bt(e){if(mo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return go(e)?{x:e.clientX,y:e.clientY}:null}const rn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function vo(e){return e.matches(rn)?e:e.querySelector(rn)}const xo={display:"none"};function bo(e){let{id:t,value:n}=e;return U.createElement("div",{id:t,style:xo},n)}function yo(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return U.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function wo(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const In=l.createContext(null);function Co(e){const t=l.useContext(In);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function jo(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:s,event:i}=r;e.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,i)})},[e]),t]}const So={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ro={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Eo(e){let{announcements:t=Ro,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=So}=e;const{announce:i,announcement:a}=wo(),c=ot("DndLiveRegion"),[u,d]=l.useState(!1);if(l.useEffect(()=>{d(!0)},[]),Co(l.useMemo(()=>({onDragStart(f){let{active:x}=f;i(t.onDragStart({active:x}))},onDragMove(f){let{active:x,over:p}=f;t.onDragMove&&i(t.onDragMove({active:x,over:p}))},onDragOver(f){let{active:x,over:p}=f;i(t.onDragOver({active:x,over:p}))},onDragEnd(f){let{active:x,over:p}=f;i(t.onDragEnd({active:x,over:p}))},onDragCancel(f){let{active:x,over:p}=f;i(t.onDragCancel({active:x,over:p}))}}),[i,t])),!u)return null;const h=U.createElement(U.Fragment,null,U.createElement(bo,{id:r,value:s.draggable}),U.createElement(yo,{id:c,announcement:a}));return n?De.createPortal(h,n):h}var M;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(M||(M={}));function qe(){}function Do(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Io(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const _=Object.freeze({x:0,y:0});function To(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ao(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Mo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=s-r,c=i-n;if(r<s&&n<i){const u=t.width*t.height,d=e.width*e.height,h=a*c,f=h/(u+d-h);return Number(f.toFixed(4))}return 0}const No=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=Mo(c,t);u>0&&s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(To)};function Oo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Tn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_}function ko(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,c)=>({...a,top:a.top+e*c.y,bottom:a.bottom+e*c.y,left:a.left+e*c.x,right:a.right+e*c.x}),{...n})}}const Po=ko(1);function Lo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Bo(e,t,n){const r=Lo(t);if(!r)return e;const{scaleX:s,scaleY:i,x:a,y:c}=r,u=e.left-a-(1-s)*parseFloat(n),d=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,f=i?e.height/i:e.height;return{width:h,height:f,top:d,right:u+h,bottom:d+f,left:u}}const $o={ignoreTransform:!1};function Be(e,t){t===void 0&&(t=$o);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=L(e).getComputedStyle(e);d&&(n=Bo(n,d,h))}const{top:r,left:s,width:i,height:a,bottom:c,right:u}=n;return{top:r,left:s,width:i,height:a,bottom:c,right:u}}function on(e){return Be(e,{ignoreTransform:!0})}function Wo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Fo(e,t){return t===void 0&&(t=L(e).getComputedStyle(e)),t.position==="fixed"}function zo(e,t){t===void 0&&(t=L(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function Pt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Ot(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Pe(s)||Rn(s)||n.includes(s))return n;const i=L(e).getComputedStyle(s);return s!==e&&zo(s,i)&&n.push(s),Fo(s,i)?n:r(s.parentNode)}return e?r(e):n}function An(e){const[t]=Pt(e,1);return t??null}function pt(e){return!rt||!e?null:we(e)?e:Nt(e)?Ot(e)||e===Ce(e).scrollingElement?window:Pe(e)?e:null:null}function Mn(e){return we(e)?e.scrollX:e.scrollLeft}function Nn(e){return we(e)?e.scrollY:e.scrollTop}function yt(e){return{x:Mn(e),y:Nn(e)}}var O;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(O||(O={}));function On(e){return!rt||!e?!1:e===document.scrollingElement}function kn(e){const t={x:0,y:0},n=On(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:c,maxScroll:r,minScroll:t}}const Go={x:.2,y:.2};function Uo(e,t,n,r,s){let{top:i,left:a,right:c,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=Go);const{isTop:d,isBottom:h,isLeft:f,isRight:x}=kn(e),p={x:0,y:0},w={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!d&&i<=t.top+g.height?(p.y=O.Backward,w.y=r*Math.abs((t.top+g.height-i)/g.height)):!h&&u>=t.bottom-g.height&&(p.y=O.Forward,w.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!x&&c>=t.right-g.width?(p.x=O.Forward,w.x=r*Math.abs((t.right-g.width-c)/g.width)):!f&&a<=t.left+g.width&&(p.x=O.Backward,w.x=r*Math.abs((t.left+g.width-a)/g.width)),{direction:p,speed:w}}function Vo(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Pn(e){return e.reduce((t,n)=>be(t,yt(n)),_)}function qo(e){return e.reduce((t,n)=>t+Mn(n),0)}function _o(e){return e.reduce((t,n)=>t+Nn(n),0)}function Ho(e,t){if(t===void 0&&(t=Be),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);An(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Yo=[["x",["left","right"],qo],["y",["top","bottom"],_o]];class Lt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Pt(n),s=Pn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,c]of Yo)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=c(r),h=s[i]-d;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ie{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Xo(e){const{EventTarget:t}=L(e);return e instanceof t?e:Ce(e)}function gt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var G;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(G||(G={}));function sn(e){e.preventDefault()}function Ko(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const Ln={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},Jo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class Bn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ie(Ce(n)),this.windowListeners=new Ie(L(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(G.Resize,this.handleCancel),this.windowListeners.add(G.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(G.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Ho(r),n(_)}handleKeyDown(t){if(Dn(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Ln,coordinateGetter:a=Jo,scrollBehavior:c="smooth"}=s,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:_;this.referenceCoordinates||(this.referenceCoordinates=h);const f=a(t,{active:n,context:r.current,currentCoordinates:h});if(f){const x=Ve(f,h),p={x:0,y:0},{scrollableAncestors:w}=r.current;for(const g of w){const v=t.code,{isTop:j,isRight:b,isLeft:m,isBottom:C,maxScroll:S,minScroll:E}=kn(g),y=Vo(g),R={x:Math.min(v===I.Right?y.right-y.width/2:y.right,Math.max(v===I.Right?y.left:y.left+y.width/2,f.x)),y:Math.min(v===I.Down?y.bottom-y.height/2:y.bottom,Math.max(v===I.Down?y.top:y.top+y.height/2,f.y))},T=v===I.Right&&!b||v===I.Left&&!m,A=v===I.Down&&!C||v===I.Up&&!j;if(T&&R.x!==f.x){const N=g.scrollLeft+x.x,X=v===I.Right&&N<=S.x||v===I.Left&&N>=E.x;if(X&&!x.y){g.scrollTo({left:N,behavior:c});return}X?p.x=g.scrollLeft-N:p.x=v===I.Right?g.scrollLeft-S.x:g.scrollLeft-E.x,p.x&&g.scrollBy({left:-p.x,behavior:c});break}else if(A&&R.y!==f.y){const N=g.scrollTop+x.y,X=v===I.Down&&N<=S.y||v===I.Up&&N>=E.y;if(X&&!x.x){g.scrollTo({top:N,behavior:c});return}X?p.y=g.scrollTop-N:p.y=v===I.Down?g.scrollTop-S.y:g.scrollTop-E.y,p.y&&g.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(t,be(Ve(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Bn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ln,onActivation:s}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function an(e){return!!(e&&"distance"in e)}function cn(e){return!!(e&&"delay"in e)}class Bt{constructor(t,n,r){var s;r===void 0&&(r=Xo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Ce(a),this.documentListeners=new Ie(this.document),this.listeners=new Ie(r),this.windowListeners=new Ie(L(a)),this.initialCoordinates=(s=bt(i))!=null?s:_,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(G.Resize,this.handleCancel),this.windowListeners.add(G.DragStart,sn),this.windowListeners.add(G.VisibilityChange,this.handleCancel),this.windowListeners.add(G.ContextMenu,sn),this.documentListeners.add(G.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(cn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(an(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(G.Click,Ko,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(G.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:c}}=i;if(!s)return;const u=(n=bt(t))!=null?n:_,d=Ve(s,u);if(!r&&c){if(an(c)){if(c.tolerance!=null&&gt(d,c.tolerance))return this.handleCancel();if(gt(d,c.distance))return this.handleStart()}if(cn(c)&&gt(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Qo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class $t extends Bt{constructor(t){const{event:n}=t,r=Ce(n.target);super(t,Qo,r)}}$t.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Zo={move:{name:"mousemove"},end:{name:"mouseup"}};var wt;(function(e){e[e.RightClick=2]="RightClick"})(wt||(wt={}));class es extends Bt{constructor(t){super(t,Zo,Ce(t.event.target))}}es.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===wt.RightClick?!1:(r?.({event:n}),!0)}}];const mt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ts extends Bt{constructor(t){super(t,mt)}static setup(){return window.addEventListener(mt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(mt.move.name,t)};function t(){}}}ts.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var Te;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Te||(Te={}));var _e;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(_e||(_e={}));function ns(e){let{acceleration:t,activator:n=Te.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:c=_e.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:x}=e;const p=os({delta:f,disabled:!i}),[w,g]=po(),v=l.useRef({x:0,y:0}),j=l.useRef({x:0,y:0}),b=l.useMemo(()=>{switch(n){case Te.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Te.DraggableRect:return s}},[n,s,u]),m=l.useRef(null),C=l.useCallback(()=>{const E=m.current;if(!E)return;const y=v.current.x*j.current.x,R=v.current.y*j.current.y;E.scrollBy(y,R)},[]),S=l.useMemo(()=>c===_e.TreeOrder?[...d].reverse():d,[c,d]);l.useEffect(()=>{if(!i||!d.length||!b){g();return}for(const E of S){if(r?.(E)===!1)continue;const y=d.indexOf(E),R=h[y];if(!R)continue;const{direction:T,speed:A}=Uo(E,R,b,t,x);for(const N of["x","y"])p[N][T[N]]||(A[N]=0,T[N]=0);if(A.x>0||A.y>0){g(),m.current=E,w(C,a),v.current=A,j.current=T;return}}v.current={x:0,y:0},j.current={x:0,y:0},g()},[t,C,r,g,i,a,JSON.stringify(b),JSON.stringify(p),w,d,S,h,JSON.stringify(x)])}const rs={x:{[O.Backward]:!1,[O.Forward]:!1},y:{[O.Backward]:!1,[O.Forward]:!1}};function os(e){let{delta:t,disabled:n}=e;const r=xt(t);return Le(s=>{if(n||!r||!s)return rs;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[O.Backward]:s.x[O.Backward]||i.x===-1,[O.Forward]:s.x[O.Forward]||i.x===1},y:{[O.Backward]:s.y[O.Backward]||i.y===-1,[O.Forward]:s.y[O.Forward]||i.y===1}}},[n,t,r])}function ss(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Le(s=>{var i;return t==null?null:(i=r??s)!=null?i:null},[r,t])}function is(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...i]},[]),[e,t])}var Ne;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ne||(Ne={}));var Ct;(function(e){e.Optimized="optimized"})(Ct||(Ct={}));const ln=new Map;function as(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,a]=l.useState(null),{frequency:c,measure:u,strategy:d}=s,h=l.useRef(e),f=v(),x=Me(f),p=l.useCallback(function(j){j===void 0&&(j=[]),!x.current&&a(b=>b===null?j:b.concat(j.filter(m=>!b.includes(m))))},[x]),w=l.useRef(null),g=Le(j=>{if(f&&!n)return ln;if(!j||j===ln||h.current!==e||i!=null){const b=new Map;for(let m of e){if(!m)continue;if(i&&i.length>0&&!i.includes(m.id)&&m.rect.current){b.set(m.id,m.rect.current);continue}const C=m.node.current,S=C?new Lt(u(C),C):null;m.rect.current=S,S&&b.set(m.id,S)}return b}return j},[e,i,n,f,u]);return l.useEffect(()=>{h.current=e},[e]),l.useEffect(()=>{f||p()},[n,f]),l.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),l.useEffect(()=>{f||typeof c!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},c))},[c,f,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:i!=null};function v(){switch(d){case Ne.Always:return!1;case Ne.BeforeDragging:return n;default:return!n}}}function $n(e,t){return Le(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function cs(e,t){return $n(e,t)}function ls(e){let{callback:t,disabled:n}=e;const r=kt(t),s=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return l.useEffect(()=>()=>s?.disconnect(),[s]),s}function st(e){let{callback:t,disabled:n}=e;const r=kt(t),s=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return l.useEffect(()=>()=>s?.disconnect(),[s]),s}function us(e){return new Lt(Be(e),e)}function un(e,t,n){t===void 0&&(t=us);const[r,s]=l.useState(null);function i(){s(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const a=ls({callback(u){if(e)for(const d of u){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),c=st({callback:i});return le(()=>{i(),e?(c?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),a?.disconnect())},[e]),r}function ds(e){const t=$n(e);return Tn(e,t)}const dn=[];function fs(e){const t=l.useRef(e),n=Le(r=>e?r&&r!==dn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Pt(e):dn,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function hs(e){const[t,n]=l.useState(null),r=l.useRef(e),s=l.useCallback(i=>{const a=pt(i.target);a&&n(c=>c?(c.set(a,yt(a)),new Map(c)):null)},[]);return l.useEffect(()=>{const i=r.current;if(e!==i){a(i);const c=e.map(u=>{const d=pt(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,yt(d)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),r.current=e}return()=>{a(e),a(i)};function a(c){c.forEach(u=>{const d=pt(u);d?.removeEventListener("scroll",s)})}},[s,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>be(i,a),_):Pn(e):_,[e,t])}function fn(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==_;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ve(e,n.current):_}function ps(e){l.useEffect(()=>{if(!rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function gs(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,t)},n},{}),[e,t])}function Wn(e){return l.useMemo(()=>e?Wo(e):null,[e])}const hn=[];function ms(e,t){t===void 0&&(t=Be);const[n]=e,r=Wn(n?L(n):null),[s,i]=l.useState(hn);function a(){i(()=>e.length?e.map(u=>On(u)?r:new Lt(t(u),u)):hn)}const c=st({callback:a});return le(()=>{c?.disconnect(),a(),e.forEach(u=>c?.observe(u))},[e]),s}function vs(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pe(t)?t:e}function xs(e){let{measure:t}=e;const[n,r]=l.useState(null),s=l.useCallback(d=>{for(const{target:h}of d)if(Pe(h)){r(f=>{const x=t(h);return f?{...f,width:x.width,height:x.height}:x});break}},[t]),i=st({callback:s}),a=l.useCallback(d=>{const h=vs(d);i?.disconnect(),h&&i?.observe(h),r(h?t(h):null)},[t,i]),[c,u]=Ue(a);return l.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const bs=[{sensor:$t,options:{}},{sensor:Bn,options:{}}],ys={current:{}},Ge={draggable:{measure:on},droppable:{measure:on,strategy:Ne.WhileDragging,frequency:Ct.Optimized},dragOverlay:{measure:Be}};class Ae extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ws={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ae,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qe},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ge,measureDroppableContainers:qe,windowRect:null,measuringScheduled:!1},Cs={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qe,draggableNodes:new Map,over:null,measureDroppableContainers:qe},it=l.createContext(Cs),js=l.createContext(ws);function Ss(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ae}}}function Rs(e,t){switch(t.type){case M.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case M.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case M.DragEnd:case M.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case M.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ae(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case M.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Ae(e.droppable.containers);return a.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case M.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Ae(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Es(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=l.useContext(it),i=xt(r),a=xt(n?.id);return l.useEffect(()=>{if(!t&&!r&&i&&a!=null){if(!Dn(i)||document.activeElement===i.target)return;const c=s.get(a);if(!c)return;const{activatorNode:u,node:d}=c;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[u.current,d.current]){if(!h)continue;const f=vo(h);if(f){f.focus();break}}})}},[r,t,s,a,i]),null}function Ds(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function Is(e){return l.useMemo(()=>({draggable:{...Ge.draggable,...e?.draggable},droppable:{...Ge.droppable,...e?.droppable},dragOverlay:{...Ge.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Ts(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=l.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;le(()=>{if(!a&&!c||!t){i.current=!1;return}if(i.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=Tn(h,r);if(a||(f.x=0),c||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const x=An(d);x&&x.scrollBy({top:f.y,left:f.x})}},[t,a,c,r,n])}const Fn=l.createContext({..._,scaleX:1,scaleY:1});var ie;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ie||(ie={}));const As=l.memo(function(t){var n,r,s,i;let{id:a,accessibility:c,autoScroll:u=!0,children:d,sensors:h=bs,collisionDetection:f=No,measuring:x,modifiers:p,...w}=t;const g=l.useReducer(Rs,void 0,Ss),[v,j]=g,[b,m]=jo(),[C,S]=l.useState(ie.Uninitialized),E=C===ie.Initialized,{draggable:{active:y,nodes:R,translate:T},droppable:{containers:A}}=v,N=y!=null?R.get(y):null,X=l.useRef({initial:null,translated:null}),K=l.useMemo(()=>{var P;return y!=null?{id:y,data:(P=N?.data)!=null?P:ys,rect:X}:null},[y,N]),ee=l.useRef(null),[Ft,zt]=l.useState(null),[J,Gt]=l.useState(null),ue=Me(w,Object.values(w)),at=ot("DndDescribedBy",a),Ut=l.useMemo(()=>A.getEnabled(),[A]),de=Is(x),{droppableRects:pe,measureDroppableContainers:$e,measuringScheduled:Vt}=as(Ut,{dragging:E,dependencies:[T.x,T.y],config:de.droppable}),V=ss(R,y),qt=l.useMemo(()=>J?bt(J):null,[J]),_t=Jn(),Ht=cs(V,de.draggable.measure);Ts({activeNode:y!=null?R.get(y):null,config:_t.layoutShiftCompensation,initialRect:Ht,measure:de.draggable.measure});const q=un(V,de.draggable.measure,Ht),ct=un(V?V.parentElement:null),fe=l.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Yt=A.getNodeFor((n=fe.current.over)==null?void 0:n.id),he=xs({measure:de.dragOverlay.measure}),We=(r=he.nodeRef.current)!=null?r:V,ge=E?(s=he.rect)!=null?s:q:null,Xt=!!(he.nodeRef.current&&he.rect),Kt=ds(Xt?null:q),lt=Wn(We?L(We):null),te=fs(E?Yt??V:null),Fe=ms(te),ze=Ds(p,{transform:{x:T.x-Kt.x,y:T.y-Kt.y,scaleX:1,scaleY:1},activatorEvent:J,active:K,activeNodeRect:q,containerNodeRect:ct,draggingNodeRect:ge,over:fe.current.over,overlayNodeRect:he.rect,scrollableAncestors:te,scrollableAncestorRects:Fe,windowRect:lt}),Jt=qt?be(qt,T):null,Qt=hs(te),Vn=fn(Qt),qn=fn(Qt,[q]),me=be(ze,Vn),ve=ge?Po(ge,ze):null,je=K&&ve?f({active:K,collisionRect:ve,droppableRects:pe,droppableContainers:Ut,pointerCoordinates:Jt}):null,Zt=Ao(je,"id"),[ne,en]=l.useState(null),_n=Xt?ze:be(ze,qn),Hn=Oo(_n,(i=ne?.rect)!=null?i:null,q),ut=l.useRef(null),tn=l.useCallback((P,B)=>{let{sensor:$,options:re}=B;if(ee.current==null)return;const F=R.get(ee.current);if(!F)return;const W=P.nativeEvent,H=new $({active:ee.current,activeNode:F,event:W,options:re,context:fe,onAbort(k){if(!R.get(k))return;const{onDragAbort:Y}=ue.current,Q={id:k};Y?.(Q),b({type:"onDragAbort",event:Q})},onPending(k,oe,Y,Q){if(!R.get(k))return;const{onDragPending:Re}=ue.current,se={id:k,constraint:oe,initialCoordinates:Y,offset:Q};Re?.(se),b({type:"onDragPending",event:se})},onStart(k){const oe=ee.current;if(oe==null)return;const Y=R.get(oe);if(!Y)return;const{onDragStart:Q}=ue.current,Se={activatorEvent:W,active:{id:oe,data:Y.data,rect:X}};De.unstable_batchedUpdates(()=>{Q?.(Se),S(ie.Initializing),j({type:M.DragStart,initialCoordinates:k,active:oe}),b({type:"onDragStart",event:Se}),zt(ut.current),Gt(W)})},onMove(k){j({type:M.DragMove,coordinates:k})},onEnd:xe(M.DragEnd),onCancel:xe(M.DragCancel)});ut.current=H;function xe(k){return async function(){const{active:Y,collisions:Q,over:Se,scrollAdjustedTranslate:Re}=fe.current;let se=null;if(Y&&Re){const{cancelDrop:Ee}=ue.current;se={activatorEvent:W,active:Y,collisions:Q,delta:Re,over:Se},k===M.DragEnd&&typeof Ee=="function"&&await Promise.resolve(Ee(se))&&(k=M.DragCancel)}ee.current=null,De.unstable_batchedUpdates(()=>{j({type:k}),S(ie.Uninitialized),en(null),zt(null),Gt(null),ut.current=null;const Ee=k===M.DragEnd?"onDragEnd":"onDragCancel";if(se){const dt=ue.current[Ee];dt?.(se),b({type:Ee,event:se})}})}}},[R]),Yn=l.useCallback((P,B)=>($,re)=>{const F=$.nativeEvent,W=R.get(re);if(ee.current!==null||!W||F.dndKit||F.defaultPrevented)return;const H={active:W};P($,B.options,H)===!0&&(F.dndKit={capturedBy:B.sensor},ee.current=re,tn($,B))},[R,tn]),nn=is(h,Yn);ps(h),le(()=>{q&&C===ie.Initializing&&S(ie.Initialized)},[q,C]),l.useEffect(()=>{const{onDragMove:P}=ue.current,{active:B,activatorEvent:$,collisions:re,over:F}=fe.current;if(!B||!$)return;const W={active:B,activatorEvent:$,collisions:re,delta:{x:me.x,y:me.y},over:F};De.unstable_batchedUpdates(()=>{P?.(W),b({type:"onDragMove",event:W})})},[me.x,me.y]),l.useEffect(()=>{const{active:P,activatorEvent:B,collisions:$,droppableContainers:re,scrollAdjustedTranslate:F}=fe.current;if(!P||ee.current==null||!B||!F)return;const{onDragOver:W}=ue.current,H=re.get(Zt),xe=H&&H.rect.current?{id:H.id,rect:H.rect.current,data:H.data,disabled:H.disabled}:null,k={active:P,activatorEvent:B,collisions:$,delta:{x:F.x,y:F.y},over:xe};De.unstable_batchedUpdates(()=>{en(xe),W?.(k),b({type:"onDragOver",event:k})})},[Zt]),le(()=>{fe.current={activatorEvent:J,active:K,activeNode:V,collisionRect:ve,collisions:je,droppableRects:pe,draggableNodes:R,draggingNode:We,draggingNodeRect:ge,droppableContainers:A,over:ne,scrollableAncestors:te,scrollAdjustedTranslate:me},X.current={initial:ge,translated:ve}},[K,V,je,ve,R,We,ge,pe,A,ne,te,me]),ns({..._t,delta:T,draggingRect:ve,pointerCoordinates:Jt,scrollableAncestors:te,scrollableAncestorRects:Fe});const Xn=l.useMemo(()=>({active:K,activeNode:V,activeNodeRect:q,activatorEvent:J,collisions:je,containerNodeRect:ct,dragOverlay:he,draggableNodes:R,droppableContainers:A,droppableRects:pe,over:ne,measureDroppableContainers:$e,scrollableAncestors:te,scrollableAncestorRects:Fe,measuringConfiguration:de,measuringScheduled:Vt,windowRect:lt}),[K,V,q,J,je,ct,he,R,A,pe,ne,$e,te,Fe,de,Vt,lt]),Kn=l.useMemo(()=>({activatorEvent:J,activators:nn,active:K,activeNodeRect:q,ariaDescribedById:{draggable:at},dispatch:j,draggableNodes:R,over:ne,measureDroppableContainers:$e}),[J,nn,K,q,j,at,R,ne,$e]);return U.createElement(In.Provider,{value:m},U.createElement(it.Provider,{value:Kn},U.createElement(js.Provider,{value:Xn},U.createElement(Fn.Provider,{value:Hn},d)),U.createElement(Es,{disabled:c?.restoreFocus===!1})),U.createElement(Eo,{...c,hiddenTextDescribedById:at}));function Jn(){const P=Ft?.autoScrollEnabled===!1,B=typeof u=="object"?u.enabled===!1:u===!1,$=E&&!P&&!B;return typeof u=="object"?{...u,enabled:$}:{enabled:$}}}),Ms=l.createContext(null),pn="button",Ns="Draggable";function Os(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=ot(Ns),{activators:a,activatorEvent:c,active:u,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:x}=l.useContext(it),{role:p=pn,roleDescription:w="draggable",tabIndex:g=0}=s??{},v=u?.id===t,j=l.useContext(v?Fn:Ms),[b,m]=Ue(),[C,S]=Ue(),E=gs(a,t),y=Me(n);le(()=>(f.set(t,{id:t,key:i,node:b,activatorNode:C,data:y}),()=>{const T=f.get(t);T&&T.key===i&&f.delete(t)}),[f,t]);const R=l.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&p===pn?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,p,g,v,w,h.draggable]);return{active:u,activatorEvent:c,activeNodeRect:d,attributes:R,isDragging:v,listeners:r?void 0:E,node:b,over:x,setNodeRef:m,setActivatorNodeRef:S,transform:j}}const ks="Droppable",Ps={timeout:25};function Ls(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=ot(ks),{active:a,dispatch:c,over:u,measureDroppableContainers:d}=l.useContext(it),h=l.useRef({disabled:n}),f=l.useRef(!1),x=l.useRef(null),p=l.useRef(null),{disabled:w,updateMeasurementsFor:g,timeout:v}={...Ps,...s},j=Me(g??r),b=l.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),p.current=null},v)},[v]),m=st({callback:b,disabled:w||!a}),C=l.useCallback((R,T)=>{m&&(T&&(m.unobserve(T),f.current=!1),R&&m.observe(R))},[m]),[S,E]=Ue(C),y=Me(t);return l.useEffect(()=>{!m||!S.current||(m.disconnect(),f.current=!1,m.observe(S.current))},[S,m]),l.useEffect(()=>(c({type:M.RegisterDroppable,element:{id:r,key:i,disabled:n,node:S,rect:x,data:y}}),()=>c({type:M.UnregisterDroppable,key:i,id:r})),[r]),l.useEffect(()=>{n!==h.current.disabled&&(c({type:M.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,c]),{active:a,rect:x,isOver:u?.id===r,node:S,over:u,setNodeRef:E}}const Bs=e=>!!e?.clue,ae=e=>`${e?.clue}${xn}${e?.playerId}`,zn=e=>e.split(xn)??["",""];function Wt({isMatched:e,isSelected:t,clue:n,color:r,player:s,strikeMatches:i=!1}){return o.jsxs("div",{className:Z("x-clue-card",t&&"x-clue-card--selected",r&&`color-border--${r}`),children:[o.jsx("span",{className:Z("x-clue-card__icon",r&&`color-background--${r}`),children:e?s?o.jsx(Er,{id:s?.avatarId}):o.jsx(sr,{}):o.jsx(Cn,{style:t?{color:"gold"}:{color:"white"}})}),o.jsx("span",{className:Z("x-clue-card__clue",e&&i&&"x-clue-card__clue--matched"),children:n})]})}function $s({id:e,children:t,disabled:n=!1,className:r,style:s,overClassName:i,overStyle:a,onDragOver:c,onDragLeave:u,options:d={},dataAttributes:h}){const{withTransition:f=!0,hoverScale:x=1.05,highlightColor:p="gold",highlightThickness:w=3}=d,{isOver:g,setNodeRef:v}=Ls({id:e,disabled:n});g&&c?c():!g&&u&&u();const b={...{position:"relative",...f&&{transition:"all 0.2s ease"},...s},...g&&!n&&{boxShadow:`0 0 0 ${w}px ${p}`,transform:`scale(${x})`,...a}},m=Z("droppable-area",r,g&&!n&&"droppable-area--active",g&&!n&&i,n&&"droppable-area--disabled"),C={"data-droppable-id":String(e),"data-droppable-active":g?"true":"false","data-droppable-disabled":n?"true":"false",...h};return o.jsx("div",{ref:v,style:b,className:m,...C,children:t})}function Ws({id:e,children:t,disabled:n=!1,className:r,style:s,dragClassName:i,dragStyle:a,onClick:c,dragHandle:u,options:d={},wrapperClassName:h,wrapperStyle:f}){const{withTransition:x=!0,dragScale:p=1.05,dragOpacity:w=.8}=d,{attributes:g,listeners:v,setNodeRef:j,transform:b,isDragging:m}=Os({id:e,disabled:n}),C={...s,...m&&a};b&&(C.transform=`translate3d(${b.x}px, ${b.y}px, 0)`,m&&(C.zIndex=999,C.opacity=w,C.transform+=` scale(${p})`),x&&!m&&(C.transition="transform 0.2s ease"));const S=Z("draggable-item",r,m&&i,m&&"draggable-item--dragging"),E=()=>{!n&&c&&c()},y={position:"relative",...f};return u?o.jsx("div",{className:Z("draggable-item-wrapper",h),style:y,children:o.jsxs("button",{ref:j,type:"button",style:C,onClick:E,className:S,disabled:n,...g,children:[o.jsx("span",{className:"draggable-item-handle",...v,children:u}),o.jsx("span",{className:"draggable-item-content",children:t})]})}):o.jsx("div",{className:Z("draggable-item-wrapper",h),style:y,children:o.jsx("button",{ref:j,type:"button",style:C,onClick:E,className:S,disabled:n,...g,...v,children:t})})}function Gn({clue:e,isSelected:t,isMatched:n,onActivateClue:r,color:s,disabled:i=!1}){const a=ae(e);return o.jsx(Ws,{id:a,disabled:i,onClick:()=>r(e),className:"x-clue-card-draggable",options:{dragOpacity:.8,dragScale:1.03,withTransition:!0},children:o.jsx(Wt,{isMatched:n,isSelected:t,clue:e.clue,color:s,strikeMatches:!0})})}function Fs({onActivateClue:e,cell:t,active:n,guesses:r,clues:s,clueColors:i,user:a}){const c=t.index===n,u=Object.entries(r).find(v=>v[1]===t.index),[d,h]=u??[],[f,x]=zn(d??""),p=h===t.index,w=p&&x===a.id,g=!!t.text||t.playerId===a.id||p;if(p&&w)return o.jsx(vt,{title:o.jsx(D,{pt:"Essa é a sua própria dica!",en:"This is your own clue!"}),children:o.jsx(Wt,{isMatched:p,isSelected:c,clue:f||s.find(v=>v.playerId===a.id)?.clue,color:i[f]})});if(t.text)return o.jsx(Mt,{clue:t.text});if(t.playerId===a.id)return o.jsx(vt,{title:o.jsx(D,{pt:"Essa célula pertence a uma de duas outras dicas, então não pode ser essa",en:"This cell belongs to one of two other clues, so it can't be this one"}),children:o.jsx(Oe,{shape:"circle",ghost:!0,children:o.jsx(Dr,{})})});if(p){const v=s.find(j=>j.clue===f&&j.playerId===x);return v?o.jsx(Gn,{clue:v,isSelected:c,isMatched:!1,onActivateClue:e,color:i[f],disabled:x===a.id}):void 0}return o.jsx($s,{id:t.index,disabled:g,style:{width:"100%",height:"100%",minHeight:"4rem"},children:o.jsx(vn,{style:{outline:c?"2px solid gold":"none",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",minHeight:"inherit"},align:"center",justify:"center",vertical:!1,children:o.jsx(Cn,{style:{color:"white"}})})})}function zs({clues:e,clueColors:t,onActivateClue:n,active:r,guesses:s,user:i}){const a=e.filter(c=>c.playerId!==i.id);return o.jsx("ul",{className:"x-clue-cards",children:a.map(c=>{const u=typeof r!="number"&&c.coordinate===r?.coordinate,d=!!s[ae(c)];return d?null:o.jsx("li",{className:"x-clue-card-li",children:o.jsx(Gn,{clue:c,isSelected:u,isMatched:d,color:t[c.clue],onActivateClue:n})},`${c.coordinate}-${c.clue}`)})})}function Gs({grid:e,gridType:t,user:n,clues:r,onSubmitGuesses:s,announcement:i}){const[a,c]=l.useState(null),[u,d]=l.useState({}),[h,f]=l.useState(!1),x=l.useMemo(()=>r.sort().reduce((b,m,C)=>(b[m.clue]=ir(C),b),{}),[r]),p=l.useCallback(b=>{if(!a||Bs(a)){c(b);return}typeof a=="number"&&(d(m=>({...m,[ae(b)]:a})),c(null))},[a]),w=l.useCallback(()=>{const b=Object.entries(u).reduce((m,[C,S])=>{const[,E]=zn(C);return m[E]=S,m},{});s({guesses:b,choseRandomly:h})},[u,s,h]);l.useEffect(()=>{const b=r.find(m=>m.playerId===n.id);if(b){const m=e.filter(C=>C.available&&C.playerId===n.id);if(m.length>0){const C=m.length===1?m[0]:m.find(S=>S.index===b.coordinate);C&&d(S=>({...S,[ae(b)]:C.index}))}}},[r,e,n.id]);const g=()=>{const b=Object.values(u),m=Object.keys(u);f(!0);const C=ar(e.filter(y=>y.available&&y.playerId!==n.id&&!b.includes(y.index))),E=r.filter(y=>!m.includes(ae(y))).reduce((y,R,T)=>(R.playerId===n.id?y[ae(R)]=R.coordinate:y[ae(R)]=C[T].index,y),{});d({...E,...u})},v=Io(Do($t,{activationConstraint:{distance:8}})),j=l.useCallback(b=>{const{active:m,over:C}=b;if(C&&m.id!==C.id){const S=String(m.id),E=Number(C.id),y=r.find(A=>ae(A)===S);if(y?.playerId===n.id||Object.values(u).includes(E))return;const T=e.find(A=>A.index===E);if(T&&T.playerId===n.id)return;y&&typeof E=="number"&&d(A=>({...A,[S]:E}))}},[r,u,n.id,e]);return o.jsxs(Ke,{fullWidth:!0,announcement:i,children:[o.jsx(Je,{children:o.jsx(D,{pt:"Decifre as dicas!",en:"Guess the cells!"})}),o.jsxs(As,{sensors:v,onDragEnd:j,children:[o.jsx(zs,{clues:r,onActivateClue:p,active:a,guesses:u,user:n,clueColors:x}),o.jsx(ke,{type:"action",children:o.jsx(D,{pt:"Arraste as dicas acima para as células correspondentes abaixo.",en:"Drag the clues above to their corresponding cells below."})}),o.jsxs(ye,{align:"center",children:[o.jsx(Oe,{size:"large",type:"dashed",onClick:g,icon:o.jsx(Ir,{}),children:o.jsx(D,{pt:"Desistir",en:"Give up"})}),o.jsx(St,{size:"large",onClick:w,disabled:Object.keys(u).length!==r.length,children:o.jsx(D,{pt:"Enviar respostas",en:"Send guesses"})})]}),o.jsx(nt,{grid:e,gridType:t,user:n,CellComponent:Fs,cellComponentProps:{active:a,guesses:u,clues:r,clueColors:x,user:n}})]})]})}function Us({players:e,state:t,user:n}){const{step:r,setStep:s}=Qe(0),i=ro(s),a=o.jsx(Ze,{icon:o.jsx(Rr,{}),title:o.jsx(D,{pt:"Match!",en:"Combine!"}),currentRound:t?.round?.current,type:"overlay",children:o.jsx(Et,{children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:["Agora combine as dicas de cada jogador com as coordenadas corretas!",o.jsx("br",{}),"Basta clicar em uma das dicas no topo e então em uma das células da grade."]}),en:o.jsxs(o.Fragment,{children:["Now match the clues from each player with the correct coordinates",o.jsx("br",{}),"Just click on one of the clues on top then in one of the cells in the grid."]})})})});return o.jsx(et,{phase:t?.phase,allowedPhase:ce.GUESSING,children:o.jsx(tt,{step:r,players:e,children:o.jsx(Gs,{user:n,grid:t.grid,gridType:t.gameType,clues:t.clues,onSubmitGuesses:i,announcement:a})})})}function gn({badCluesPlayersList:e}){return o.jsx("span",{children:e.map((t,n)=>o.jsxs("span",{children:[o.jsx(It,{player:t,size:"small"},`bad-clue-${t.id}`),e.length>0&&n<e.length-1?", ":""]},`bad-clue-${t.id}-${n}`))})}function Vs({players:e,grid:t,correctCoordinatesPerPlayer:n}){const{translate:r}=Xe(),s=[{title:r("Jogador","Player"),dataIndex:"player",key:"player",render:a=>o.jsx(It,{player:a}),sorter:(a,c)=>a.playerName.localeCompare(c.playerName)},{title:r("Achou que","Thought that"),dataIndex:"guess",key:"guess",render:a=>a.toUpperCase(),sorter:(a,c)=>a.guess.localeCompare(c.guess)},{title:r("Era","Was"),dataIndex:"clue",key:"clue",render:a=>a.toUpperCase(),sorter:(a,c)=>a.clue.localeCompare(c.clue)},{title:r("Resultado","Result"),dataIndex:"result",key:"result",render:a=>a?o.jsx(qr,{style:{color:"green"}}):o.jsx(Yr,{style:{color:"red"}}),sorter:a=>a.result===!0?1:-1}],i=l.useMemo(()=>{const a=Object.values(e).map(c=>Object.entries(c?.guesses??{}).reduce((u,[d,h])=>{if(d===c.id)return u;const f=t[h];return u.push({playerName:c.name,player:c,clue:`${f.yText} + ${f.xText}`,guess:e[d].clue,result:n?.[h]===d}),u},[]));return bn.orderBy(a.flat(),["playerName","guess"],["asc","asc"])},[e,t,n]);return o.jsx(Mr,{size:"small",columns:s,dataSource:i,pagination:!1})}function mn({cellPlayers:e,players:t}){return o.jsx("ul",{children:e.map(({playerId:n,isCorrect:r})=>r?o.jsx("li",{className:Z(r&&"x-players-in-cell-player--correct"),children:o.jsx(It,{player:t[n],size:"small"})},`players-in-cell-${n}`):void 0)})}function Un({cell:e,clues:t,players:n,playerPerVotedCell:r,colorCodedCluesPerPlayer:s}){const i=t.find(c=>c.coordinate===e.index),a=(r[e.index]??[]).filter(c=>c.isCorrect);return i?.playerId?o.jsxs("div",{className:"center",children:[o.jsx(Wt,{isMatched:!0,clue:i.clue,color:s[i.playerId],player:n[i.playerId]}),a.length?o.jsx(mn,{cellPlayers:a,players:n}):o.jsx(Jr,{style:{color:"white"}})]}):e.text?o.jsx(Mt,{clue:e.text}):o.jsx("span",{children:!!a.length&&o.jsx(mn,{cellPlayers:a,players:n})})}const qs=cr;function _s({grid:e,gridType:t,user:n,players:r,clues:s,goToNextStep:i,whoGotNoPoints:a,announcement:c}){fr();const{correctCoordinatesPerPlayer:u,colorCodedCluesPerPlayer:d,whoGotNoPointsNames:h,playerCount:f}=l.useMemo(()=>({correctCoordinatesPerPlayer:s.reduce((p,w)=>(w.playerId&&(p[w.coordinate]=w.playerId),p),{}),colorCodedCluesPerPlayer:s.reduce((p,w)=>(w.playerId&&(p[w.playerId]=qs[r[w.playerId].avatarId].color),p),{}),whoGotNoPointsNames:a.map(p=>r[p]),playerCount:Object.keys(r).length}),[r,s,a]),x=l.useMemo(()=>Object.values(r).reduce((p,w)=>(Object.entries(w.guesses??{}).forEach(([g,v])=>{g!==w.id&&(p[v]===void 0&&(p[v]=[]),p[v].push({playerId:w.id,color:d[g],isCorrect:u[v]===g}))}),p),{}),[r,u,d]);return o.jsxs(Ke,{fullWidth:!0,announcement:c,children:[o.jsx(Je,{children:o.jsx(D,{pt:"Resultado",en:"Results"})}),o.jsx(Dt,{content:o.jsx(At,{playerCount:f})}),!!a.length&&o.jsx(ke,{type:"alert",children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:["Ninguém acertou a(s) dica(s) dadas por",o.jsx(gn,{badCluesPlayersList:h}),", então ele(s) perde(m)"," ",o.jsxs(z,{type:"negative",children:["- ",f]})," pontos."]}),en:o.jsxs(o.Fragment,{children:["Nobody got the clues given by",o.jsx(gn,{badCluesPlayersList:h}),", so they lose"," ",o.jsxs(z,{type:"negative",children:["- ",f]})," points."]})})}),o.jsx(nt,{grid:e,gridType:t,user:n,CellComponent:Un,cellComponentProps:{clues:s,players:r,playerPerVotedCell:x,colorCodedCluesPerPlayer:d}}),o.jsx(ye,{align:"center",children:o.jsx(Ar,{duration:lr(f,6,40,15)+5,icon:o.jsx(Nr,{}),onExpire:i,onClick:i,children:o.jsx(D,{pt:"Ver Ranking",en:"See Ranking"})})}),o.jsx(jn,{title:o.jsx(D,{pt:"Todas as respostas",en:"All Answers"}),children:o.jsx(Vs,{correctCoordinatesPerPlayer:u,players:r,grid:e})})]})}function Hs({players:e,playerCount:t,ranking:n,goToPreviousStep:r,round:s}){return o.jsxs(Or,{players:e,ranking:n,gainedPointsDescriptions:[o.jsx(D,{pt:"Palpites corretos",en:"Correct guesses"},"1"),o.jsx(D,{pt:"Palpites que acertaram a célula de outra dica",en:"Guesses that were placed in a cell for a different clue"},"2"),o.jsx(D,{pt:"Palpites recebidos corretamente",en:"Received correct guesses"},"3"),o.jsx(D,{pt:"Penalidade se ninguém acertou a sua dica",en:"Penalty for nobody getting your clue correctly"},"4")],children:[o.jsx(Dt,{content:o.jsx(At,{playerCount:t})}),o.jsx(ye,{align:"center",children:o.jsx(Oe,{onClick:r,children:o.jsx(D,{pt:"Ver resultado novamente",en:"See results again"})})}),o.jsx(hr,{round:s,withWaitingTimeBar:!0}),s.current===3&&o.jsx(ke,{type:"event",children:o.jsx(D,{pt:"Está pronto para uma reviravolta?",en:"Ready for a twist?"})})]})}function Ys({state:e,players:t,user:n}){const{step:r,goToNextStep:s,goToPreviousStep:i}=Qe(0),a=Object.keys(t).length,c=o.jsx(Ze,{icon:o.jsx(Tr,{}),title:o.jsx(D,{pt:"Resultado",en:"Results"}),currentRound:e?.round?.current,type:"overlay",children:o.jsx(At,{playerCount:a})});return o.jsx(et,{phase:e?.phase,allowedPhase:ce.REVEAL,children:o.jsxs(tt,{step:r,players:t,children:[o.jsx(_s,{user:n,grid:e.grid,gridType:e.gameType,clues:e.clues,goToNextStep:s,players:t,whoGotNoPoints:e.whoGotNoPoints??[],announcement:c}),o.jsx(Hs,{players:t,playerCount:a,round:e.round,ranking:e.ranking,goToPreviousStep:i})]})})}function Xs({deck:e,onSubmitWords:t,user:n,announcement:r}){const{updateDict:s,length:i,keys:a,setDict:c}=Pr({});wn();const u=()=>{c(bn.sampleSize(e,10).reduce((d,h)=>(d[h.id]=!0,d),{}))};return o.jsxs(Ke,{fullWidth:!0,announcement:r,children:[o.jsx(Je,{children:o.jsx(D,{pt:"Quais cartas deveriam estar no jogo?",en:"What cards should be in the game?"})}),o.jsx(ke,{type:"action",children:o.jsx(D,{pt:o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:"Selecione"})," pelo menos 10 cartas para estar no jogo.",o.jsx("br",{}),"Quanto mais melhor!"]}),en:o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:"Select"})," at least 10 cards to be in the game.",o.jsx("br",{}),"The more the merrier!"]})})}),o.jsxs(ye,{children:[o.jsx(Oe,{onClick:u,size:"large",children:o.jsx(D,{pt:"Selecione pra mim",en:"Select for me"})}),o.jsx(Br,{count:i,children:o.jsx(St,{onClick:()=>t({words:a}),size:"large",disabled:i<10||n.ready,children:o.jsx(D,{pt:"Enviar cartas",en:"Submit cards"})})})]}),o.jsx(ye,{className:"max-width",wrap:!0,children:e.map(d=>o.jsx(ur,{onClick:()=>s(d.id),active:a.includes(d.id),children:o.jsx(Lr,{hideHeader:!0,children:d.text})},d.id))})]})}function Ks({players:e,state:t,user:n}){const{step:r,setStep:s}=Qe(0),i=to(s),a=o.jsx(Ze,{icon:o.jsx(kr,{}),title:o.jsx(D,{pt:"Preparação da Grade",en:"Grid Setup"}),currentRound:t?.round?.current,type:"overlay"});return o.jsx(et,{phase:t?.phase,allowedPhase:ce.WORDS_SELECTION,children:o.jsx(tt,{step:r,players:e,children:o.jsx(Xs,{deck:t.deck,onSubmitWords:i,user:n,announcement:a})})})}function Js({state:e,players:t,user:n}){return o.jsxs(Wr,{state:e,players:t,announcementIcon:o.jsx($r,{}),children:[o.jsx(Fr,{players:t,achievements:e.achievements,reference:zr}),o.jsx(Gr,{}),o.jsx(jn,{title:o.jsx(D,{en:"The Final Grid",pt:"A Grade Final"}),children:o.jsx(nt,{grid:e.grid,gridType:e.gameType,user:n,CellComponent:Un,cellComponentProps:{clues:[],players:t,playerPerVotedCell:{},colorCodedCluesPerPlayer:{}}})})]})}function Qs(e){switch(e.phase){case ce.WORDS_SELECTION:return Ks;case ce.CLUE_WRITING:return ho;case ce.GUESSING:return Us;case ce.REVEAL:return Ys;case mr.DEFAULT.GAME_OVER:return Js;default:return gr}}function wa(){return o.jsx(pr,{gameCollection:dr.CRUZA_PALAVRAS,getActiveComponent:Qs})}export{wa as default};
