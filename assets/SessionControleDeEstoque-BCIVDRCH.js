import{h as K,j as e,e as u,b1 as R,T as p,aH as U,bs as k,D as E,r as Y,o as B,aZ as Z,aX as J,aY as $}from"./index-h8mzitR-.js";import{u as ee,S as L,b as O,c as b,d as Q,P as oe,e as X,f as m,g as q,a as re,i as se,j as ie,k as ne,l as ae}from"./StepSwitcher-BMDtlF2c.js";import{P}from"./PhasePlaceholder-CIjWC1R0.js";import{u as z}from"./useWhichPlayerIsThe-1W8aoj_C.js";import{B as v}from"./BossIdeaIcon-BoQVyAvg.js";import{A as _}from"./AvatarName-BrKNo6ZT.js";import{I as y}from"./Instruction-CHGPc6nu.js";import{R as te}from"./RoundAnnouncement-D--mFVjd.js";import{u as ce}from"./useMakeMeReady-C9oYELMu.js";import{M as H}from"./MysteryBoxIcon-D1LAf3vW.js";import{W as M}from"./WarehouseGoodCard-Dy0efwVW.js";import{R as N}from"./RuleInstruction-CDnhKt4B.js";import{S as F}from"./ShippingBoxIcon-Cgzn3bHk.js";import{M as C}from"./MetricHighlight-syKVi6bn.js";import{C as W}from"./ClockIcon-C79bECBa.js";import{D as g}from"./index-CKn1a2PP.js";import{T as de}from"./speech-D8z_4bjy.js";import"./useBlurCards-Cp4_fGgl.js";import"./RulesModal-D_V2YBiq.js";import"./WritingIcon-nSQWkc5S.js";import"./index-CHOlN-J6.js";import"./PurePanel-BgVK2jee.js";import"./useMutation-D1SPF4Q5.js";import"./Game-CG1T44wZ.js";import"./WaitingRoomIcon-CRORwyIy.js";import"./AnimatedClockIcon--eZeQzg4.js";import"./index-Ob0Xs44f.js";import"./useBubbleLock-BqbNyyZd.js";import"./index-BUDK_Jaj.js";import"./Overflow-Co_LHJIG.js";import"./useEvent-CS2Sw2tm.js";import"./index-BVMimMqk.js";import"./index-BAv1BVYV.js";import"./Avatar-DZbhPyHJ.js";import"./GameBanner-Dh0QSu8x.js";import"./useDevFeatures-DOf2ZLgW.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CKSvIhFe.js";import"./InfoCircleOutlined-t13E3JA_.js";import"./SignIn-BpFgBfoS.js";import"./GoogleIcon-Chv-2q5K.js";import"./Loading-ByYFTfKY.js";import"./AnimatedLoaderIcon-ChJdULz4.js";import"./LikeFilled-jov7edYi.js";import"./Sprite-B6V4nmr1.js";import"./WarningOutlined-DVOD_DN1.js";import"./StarFilled-BZwazXAt.js";const le=[{en:"Monday",pt:"Segunda-feira"},{en:"Tuesday",pt:"Terça-feira"},{en:"Wednesday",pt:"Quarta-feira"},{en:"Thursday",pt:"Quinta-feira"},{en:"Friday",pt:"Sexta-feira"},{en:"Saturday",pt:"Sábado"},{en:"Sunday",pt:"Domingo"}],l={TINTED_GLASS:"TINTED_GLASS",CONFIDENTIAL:"CONFIDENTIAL",EYE_EXAM:"EYE_EXAM"};function V(){const{translate:i}=K(),o=ee({actionName:"submit-place-good",successMessage:i("Ação submetida com sucesso","Action submitted successfully"),errorMessage:i("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return s=>{o({action:"PLACE_GOOD",...s})}}function ue(){return ce({})}function I({goodsDict:i,warehouse:o,width:s,onPlaceGood:r,goodClassName:c,conceal:d}){const a={width:s,height:s};return e.jsx("div",{className:"warehouse",children:o.map((n,t)=>{if(n.available)return e.jsx("div",{className:u("warehouse__empty-shelf warehouse__empty-available-shelf"),style:a,children:r?e.jsx("button",{type:"button",className:"warehouse__empty-shelf-button",onClick:()=>r==null?void 0:r(t),children:n.temporaryName??"?"}):n.temporaryName??"?"},t);if(n.amenityId)return e.jsx(e.Fragment,{});if(n.goodId){const h=i[n.goodId];return h.exposed?d?e.jsx(H,{width:s}):e.jsx("div",{className:u("warehouse__shelf","warehouse__shelf-active"),style:a,children:e.jsx(M,{id:h.id,width:s-12,className:u(R("bounce"),c)})},t):e.jsx("div",{className:u("warehouse__shelf",R("flipInY")),style:a,children:e.jsx(F,{width:s-12})},t)}return e.jsx("div",{className:u("warehouse__empty-shelf"),style:a,children:"."},t)})})}function D({stockingCount:i,stockingRoundCount:o,stocked:s}){return e.jsx(p,{en:e.jsxs(e.Fragment,{children:["Round goods:"," ",e.jsxs(C,{icon:e.jsx(W,{}),children:[i,"/",o]}),e.jsx("br",{}),"Stocked Goods: ",e.jsxs(C,{icon:e.jsx(F,{}),children:[s,"/35"]})]}),pt:e.jsxs(e.Fragment,{children:["Mercadorias da rodada:"," ",e.jsxs(C,{icon:e.jsx(W,{}),children:[i,"/",o]}),e.jsx("br",{}),"Mercadorias estocadas: ",e.jsxs(C,{icon:e.jsx(F,{}),children:[s,"/35"]})]})})}function he({players:i,user:o,announcement:s,bossIdea:r,roundGoods:c,roundsGoodIndex:d,goodsDict:a,warehouse:n,supervisor:t,isUserTheSupervisor:h,onPlaceGood:f,stocked:x}){const{isLoading:A}=U(),[j,S]=k(7,{minWidth:60,maxWidth:80,margin:16}),T=a[c[d]],w=G=>{f({goodId:T.id,newWarehouseSlot:G,previousWarehouseSlot:T.slot})};return h?e.jsxs(L,{fullWidth:!0,announcement:s,ref:S,children:[e.jsx(O,{icon:e.jsx(v,{}),children:e.jsx(E,{children:r.title})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(p,{pt:e.jsx(e.Fragment,{children:"Coloque a mercadoria do galpão!"}),en:e.jsx(e.Fragment,{children:"Place the good in the warehouse"})})}),e.jsx(g,{className:"my-1"}),e.jsx(E,{children:r.description}),e.jsx(g,{className:"my-1"}),e.jsx(D,{stockingCount:d,stockingRoundCount:c.length,stocked:x})]}),e.jsx(y,{contained:!0,children:e.jsx(M,{id:T.id,width:j,className:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})}),e.jsx(I,{goodsDict:a,warehouse:n,onPlaceGood:A?void 0:w,width:j,goodClassName:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(L,{fullWidth:!0,announcement:s,ref:S,children:[e.jsx(O,{icon:e.jsx(v,{}),children:e.jsx(E,{children:r.title})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:[e.jsx(_,{player:t,size:"small"})," é o(a) supervisor(a) do dia e colocará a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(_,{player:t})," is the supervisor of the day and will place the good in the warehouse."]})})}),e.jsx(g,{className:"my-1"}),e.jsx(E,{children:r.description}),e.jsx(g,{className:"my-1"}),e.jsx(D,{stockingCount:d,stockingRoundCount:c.length,stocked:x})]}),e.jsx(y,{contained:!0,children:r.id===l.CONFIDENTIAL?e.jsx(e.Fragment,{children:e.jsx(H,{width:j})}):e.jsx(M,{id:T.id,width:j,className:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS")})}),e.jsx(I,{goodsDict:a,warehouse:n,width:j,goodClassName:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:r.id===l.CONFIDENTIAL})]})}function me({players:i,state:o}){var x;const s=b(i,o),[r,c]=z("supervisorId",o,i),d=V(),{step:a,goToNextStep:n}=Q(o.roundGoodsIndex===0?0:1),t=o==null?void 0:o.bossIdea,h=e.jsx(oe,{icon:e.jsx(v,{}),title:e.jsx(E,{children:t.subtitle}),currentRound:(x=o==null?void 0:o.round)==null?void 0:x.current,type:"overlay",duration:o.roundGoodsIndex===0?15:5,children:e.jsxs(y,{children:['"',e.jsx(p,{en:"The floor supervisor for the day will be",pt:"O supervisor do dia será"})," ",e.jsx(_,{player:r,addressUser:!0}),'."']})}),f=Y.useMemo(()=>B.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(X,{phase:o==null?void 0:o.phase,allowedPhase:m.CONTROLE_DE_ESTOQUE.GOOD_PLACEMENT,children:e.jsxs(q,{step:a,players:i,children:[e.jsx(te,{round:o==null?void 0:o.round,onPressButton:n,time:o.roundGoodsIndex===0?10:4,children:e.jsx(y,{contained:!0,children:e.jsx(E,{children:le[o.round.current-1]})})}),e.jsx(he,{user:s,players:i,announcement:h,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:f,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,stocked:o.stocked})]})})}function pe({players:i,user:o,bossIdea:s,roundGoods:r,roundsGoodIndex:c,goodsDict:d,warehouse:a,supervisor:n,isUserTheSupervisor:t,onPlaceGood:h,onConfirmPlacement:f,stocked:x}){const{isLoading:A}=U(),[j,S]=k(7,{minWidth:60,maxWidth:80,margin:16}),T=d[r[c]],w=G=>{h({goodId:T.id,newWarehouseSlot:G,previousWarehouseSlot:T.slot})};return re(),t?e.jsxs(L,{fullWidth:!0,ref:S,children:[e.jsx(O,{size:"small",children:e.jsx(p,{pt:e.jsx(e.Fragment,{children:"Estão todos de acordo com esse local?"}),en:e.jsx(e.Fragment,{children:"Is everyone okay with this location?"})})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(p,{pt:"Você pode trocar a mercadoria de lugar se há outros lugares disponíveis e a equipe decidir.",en:"You may change the location of the good if there are available options and the team agrees."})}),e.jsx(g,{className:"my-1"}),e.jsx(E,{children:s.description}),e.jsx(g,{className:"my-1"}),e.jsx(D,{stockingCount:c+1,stockingRoundCount:r.length,stocked:x})]}),e.jsx(I,{goodsDict:d,warehouse:a,onPlaceGood:A||o.ready?void 0:w,width:j,goodClassName:u(s.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",s.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(L,{fullWidth:!0,ref:S,children:[e.jsx(O,{children:e.jsx(p,{pt:e.jsx(e.Fragment,{children:"Concorda com o local escolhido?"}),en:e.jsx(e.Fragment,{children:"Do you agree with the chosen location?"})})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(p,{pt:e.jsxs(e.Fragment,{children:[e.jsx(_,{player:n,size:"small"})," é o(a) supervisor(a) do dia e colocou a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(_,{player:n})," is the supervisor of the day and placed the good in the warehouse."]})})}),e.jsx(g,{className:"my-1"}),e.jsx(E,{children:s.description}),e.jsx(g,{className:"my-1"}),e.jsx(D,{stockingCount:c+1,stockingRoundCount:r.length,stocked:x})]}),e.jsx(N,{type:"action",children:e.jsx(p,{pt:"Se você concorda com o local, confirme sua escolha.",en:"If you agree with the location, confirm your choice."})}),e.jsx(y,{children:e.jsx(de,{size:"large",type:"primary",onClick:f,onExpire:f,loading:A,disabled:o.ready,duration:40,children:e.jsx(p,{pt:"Confirmar",en:"Confirm"})})}),e.jsx(I,{goodsDict:d,warehouse:a,width:j,goodClassName:u(s.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:s.id===l.CONFIDENTIAL})]})}function xe({players:i,state:o}){const s=b(i,o),[r,c]=z("supervisorId",o,i),d=V(),a=ue(),{step:n}=Q(),t=o==null?void 0:o.bossIdea,h=Y.useMemo(()=>B.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(X,{phase:o==null?void 0:o.phase,allowedPhase:m.CONTROLE_DE_ESTOQUE.PLACEMENT_CONFIRMATION,children:e.jsx(q,{step:n,players:i,children:e.jsx(pe,{user:s,players:i,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:h,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,onConfirmPlacement:a,stocked:o.stocked})})})}function je(i){if(i&&!i.phase)return J;switch(i.phase){case m.DEFAULT.LOBBY:return ae;case m.DEFAULT.RULES:return ne;case m.DEFAULT.SETUP:return ie;case m.CONTROLE_DE_ESTOQUE.GOOD_PLACEMENT:return me;case m.CONTROLE_DE_ESTOQUE.PLACEMENT_CONFIRMATION:return xe;case m.CONTROLE_DE_ESTOQUE.FULFILLMENT:return P;case m.CONTROLE_DE_ESTOQUE.RESULTS:return P;case m.DEFAULT.GAME_OVER:return P;default:return $}}function uo(){return e.jsx(se,{gameCollection:Z.CONTROLE_DE_ESTOQUE,getActiveComponent:je})}export{uo as default};
