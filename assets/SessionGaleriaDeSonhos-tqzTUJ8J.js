import{f as k,j as e,T as n,D as Q,i as $,aL as ne,l as Se,b2 as Pe,n as te,bF as _e,bj as N,aI as J,bk as v,bl as S,e as I,bG as Ie,aG as ie,b0 as R,r as b,bL as Re,bH as de,aM as Te,z as Ne,bC as ee,q as se,aK as Ee,a$ as we,aY as Ce,aW as Oe,aX as Ae}from"./index-KhnDWtqd.js";import{u as K,S as E,c as F,d as W,e as L,P as T,W as De,b as ce,k as le,a as Be,l as me,g as ke,h as q,i as Fe,j as We}from"./StepSwitcher-DQaOiUvi.js";import{u as A}from"./useWhichPlayerIsThe-D_dvoXdR.js";import{S as Le,D as Me,N as qe,L as Ue}from"./SleepIcon-CHfyTwzG.js";import{A as m}from"./AvatarName-DI3jGnum.js";import{I as p}from"./Instruction-D4JXjD7_.js";import{R as ze}from"./RoundAnnouncement-DO0euF4U.js";import{V as Ge}from"./ViewOr-DeRYBQKq.js";import{R as Ve}from"./WritingIcon-BzPwjf57.js";import{M as he}from"./MetricHighlight-J8Ystiqu.js";import{C as P}from"./CardHighlight-BbLsGTPT.js";import{P as He}from"./PlayerIcon-DOxzu59v.js";import{P as D}from"./PlayersHighlight-CMugWAip.js";import{P as j}from"./PointsHighlight-CMIbnY_R.js";import{R as _}from"./RuleInstruction-DODjplC_.js";import{C as ue}from"./Card-BezUtw_9.js";import{D as Ye}from"./DreamIcon-B2wfV0GT.js";/* empty css                             */import{I as $e}from"./ImageCardPreloadHand-B1GIl_K5.js";import{I as Je,a as V}from"./ImageCardHand-BePINR7j.js";import{u as Ke}from"./useBooleanDictionary-aPHYUBvr.js";import{u as Xe}from"./useMock-BYfmmAKs.js";import{F as xe,T as Ze}from"./speech-D47ffgBV.js";import{T as Qe}from"./TextHighlight-DUVS4F3_.js";import{P as je}from"./PopoverRule-CbSoMJOI.js";import{I as w}from"./ImageCard-CU-rEaOC.js";import{R as es}from"./CloseCircleOutlined-C43cYOw2.js";import{R as pe}from"./RobotOutlined-CDgvKxEO.js";import{P as U}from"./PhaseTimerReset-D3pkcpIC.js";import{T as ge}from"./TurnOrder-KZBZS5yL.js";import{m as ss}from"./messageContent-Bm9MgtWf.js";import{S as z}from"./StarIcon-CsKy0kHK.js";import{I as rs}from"./ImageCardBack-DiKko-sA.js";import{A as os}from"./Avatar-BS3hQk5-.js";import{S as re}from"./StarPoints-QUhsQS3f.js";import{D as fe}from"./index-Bpy7izmx.js";import{R as as}from"./RankIcon-Ck9ARUek.js";import{R as ns}from"./RoundsLeftInstruction-C3GGMHbp.js";import{S as ts}from"./StepRankingWrapper-olfZSrxB.js";import"./GameOver-D8gPqpLD.js";import{G as is}from"./GameOverWrapper-CzHM9-dp.js";import{A as ds}from"./Achievements-l6RGzkuI.js";import{a as cs}from"./achievements-D36shYC1.js";import{I as ls}from"./ImageBlurButton-Dtq-jBwT.js";import"./useBlurCards-DaCWG4D9.js";import"./RulesModal-DG0eZ_Bc.js";import"./DoubleRightOutlined-B9qpl8IC.js";import"./PurePanel-1fLmEmMx.js";import"./Game-DCS1H-5m.js";import"./WaitingRoomIcon-BpovjZh4.js";import"./AnimatedClockIcon-iuoHeLT8.js";import"./useMutation-kJwgSNc7.js";import"./index-DyKCfJY4.js";import"./useBubbleLock-pVXO7gwT.js";import"./index-soIMzOQO.js";import"./Overflow-DXjIKanZ.js";import"./useEvent-wEaUne0h.js";import"./index-DQzyEHGu.js";import"./index-IbYMwJQL.js";import"./GameBanner-BAnT_evQ.js";import"./useDevFeatures-BpY0uJRo.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CshNItYF.js";import"./InfoCircleOutlined-C8s4WoNP.js";import"./SignIn-Cb6XwnqL.js";import"./GoogleIcon-DsbP_NnU.js";import"./Loading-vwOlz5FP.js";import"./AnimatedLoaderIcon-DWr56qiF.js";import"./LikeFilled-BZXaGV6K.js";import"./PlayersIcon-D6P5sljf.js";import"./StarFilled-BYJz_kcC.js";import"./StarFilled-CNctUIhy.js";import"./ImageBlurButtonContainer-Cl8gcq_S.js";import"./UpCircleOutlined-DPmonRmu.js";import"./VideoGameControllerIcon-1fzdWvzq.js";import"./RankingBoard-BCqKzsrT.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./ArrowRightOutlined-CxZCEjbR.js";import"./useMergedState-poA94PJI.js";import"./progress-D1th4gVz.js";import"./TheEndIcon-DHC21ZBm.js";import"./Container-pH3ip1tW.js";import"./Medal-Cj3yCS65.js";import"./QuestionCircleOutlined-CebtNFdz.js";const f={WORD_SELECTION:"WORD_SELECTION",DREAMS_SELECTION:"DREAMS_SELECTION",CARD_PLAY:"CARD_PLAY",RESOLUTION:"RESOLUTION"},X={SUBMIT_WORD:"SUBMIT_WORD",SUBMIT_CARDS:"SUBMIT_CARDS",PLAY_CARD:"PLAY_CARD"},ms=1,oe=3,H=5,Y=6;function hs(r){const{translate:s}=k(),o=K({actionName:"submit-word",onBeforeCall:()=>r(3),onError:()=>r(2),successMessage:s("Palavra enviada com sucesso","Word submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua palavra","Oops, the application failed to send your word")});return a=>{o({action:X.SUBMIT_WORD,...a})}}function us(r){const{translate:s}=k(),o=K({actionName:"submit-cards",onBeforeCall:()=>r(2),onError:()=>r(1),successMessage:s("Cartas enviadas com sucesso","Cards submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas cartas","Oops, the application failed to send your cards")});return a=>{o({action:X.SUBMIT_CARDS,...a})}}function xs(r){const{translate:s}=k(),o=K({actionName:"play-card",onError:()=>r(2),successMessage:s("Carta enviada com sucesso","Card submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application failed to send your card")});return a=>{o({action:X.PLAY_CARD,...a})}}function ae({children:r,type:s,iconSize:o,className:a}){return e.jsx(he,{icon:e.jsx(Ve,{}),type:s,iconSize:o,className:a,children:r})}function B({children:r,type:s,iconSize:o,className:a}){return e.jsx(he,{icon:e.jsx(He,{}),type:s,iconSize:o,className:a,children:r})}function js({scout:r}){return e.jsx(p,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Cada rodada tem seu tema... uma palavra.",e.jsx("br",{}),"Para essa rodada, ",e.jsx(m,{player:r,addressUser:!0,size:"small"})," escolherá o tema."]}),en:e.jsxs(e.Fragment,{children:["Every round has a theme... a word.",e.jsx("br",{}),"For this round,",e.jsx(m,{player:r,addressUser:!0,size:"small"})," will choose the theme."]})})})}function ps(){return e.jsx(p,{contained:!0,children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Somos caçadores de sonhos!",e.jsx("br",{}),"Dentro do tema escolhido, podemos visitar os sonhos de até 10 das 15 pessoas (cartas-imagens) disponíveis.",e.jsx("br",{}),"O objetivo é encontrar uns aos outros em cada sonho, então escolha apenas sonhos que você acredita que outros jogadores também irão escolher.",e.jsx("br",{}),"Parece fácil, mas se você escolher um sonho que ninguém mais escolheu... vixi..."]}),en:e.jsxs(e.Fragment,{children:["We are dream scouts!",e.jsx("br",{}),"Given the chosen theme, we can visit dreams of 10 of the 15 people (image cards) available.",e.jsx("br",{}),"The goal of the game is to match the same visited dreams of other players, therefore choose dreams that you think other players will also choose.",e.jsx("br",{}),"It seems easy, but if you choose a dream that nobody else has chosen... well..."]})})})}function be({contained:r=!1,minimumSelection:s=1}){const o=e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Selecione sonhos (cartas) que você acha que se relacionam com a palavra-tema da rodada.",e.jsx("br",{}),"Você deve selecionar pelo menos ",e.jsx(P,{children:s})," e no máximo"," ",e.jsx(P,{children:"10"}),"."]}),en:e.jsxs(e.Fragment,{children:["Now select dreams (cards) that you think match the round's theme.",e.jsx("br",{}),"You must select at least ",e.jsx(P,{children:s})," card and a maximum of"," ",e.jsx(P,{children:"10"}),"."]})});return r?e.jsx(_,{type:"action",children:o}):e.jsx(p,{children:o})}function gs(){return e.jsx(p,{contained:!0,children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Na próxima fase, de um a um, cada jogador vai escolher um de seus sonhos visitados.",e.jsx("br",{}),"Se pelo menos um jogador visitou o mesmo sonho, eles ganham pontos. Se ninguém escolheu, o jogador está fora da rodada!",e.jsx("br",{}),"Dai passa-se a vez para o próximo jogador!",e.jsx("br",{}),"Sonhos só podem ser escolhidos uma vez por rodada..."]}),en:e.jsxs(e.Fragment,{children:["On the next phase, one by one, each player will select one of their visited dreams.",e.jsx("br",{}),"If at least one other player visited the same dream, they get points! If nobody visited the same dream, you are out of the round!",e.jsx("br",{}),"Each dream can be chosen once per round only..."]})})})}function ye(){return e.jsx(p,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["De um em um, cada jogador vai escolher um de seus sonhos visitados se você ainda tem algum disponível.",e.jsx("br",{}),"Selecione o sonho que você mais acha que tem chance de outro jogador ter também visitado.",e.jsx("br",{}),"Você ganha ",e.jsx(j,{type:"positive",children:"3"})," pontos se apenas mais"," ",e.jsx(B,{children:"1"})," jogador visitou o mesmo sonho.",e.jsx("br",{}),"Você ganha ",e.jsx(j,{type:"positive",children:"2"})," pontos se mais de"," ",e.jsx(D,{children:"1+"})," jogador visitou o mesmo sonho.",e.jsx("br",{}),"Você está eliminado da rodada se ninguém mais visitou o sonho escolhido."]}),en:e.jsxs(e.Fragment,{children:["One by one, each player chooses one of their visited dreams, if you have any still available.",e.jsx("br",{}),"Select the dream you think you have the most chances of matching another player.",e.jsx("br",{}),"You get ",e.jsx(j,{type:"positive",children:"3"})," points if only"," ",e.jsx(B,{children:"1"})," player visited the same dream.",e.jsx("br",{}),"You get ",e.jsx(j,{type:"positive",children:"2"})," points if many"," ",e.jsx(D,{children:"1+"})," players have visited the same dream.",e.jsx("br",{}),"You are eliminated for this round if nobody else has visited the chosen dream."]})})})}function ve(){return e.jsx(p,{contained:!0,children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Em um jogo com bots, ",e.jsx(ae,{children:"3"})," jogadores-robôs são adicionados ao jogo.",e.jsx("br",{}),"Antes da fase do Bingo dos Sonhos, os três bots entram em ação e selecionam cartas segundo se seguinte lógica:",e.jsx("br",{}),"O bot A seleciona todas as cartas que foram mais selecionadas pelos jogadores.",e.jsx("br",{}),"O bot B seleciona cartas que foram selecionadas por apenas um jogador, mas apenas uma por jogador, e somente se mais de um jogador tiver essa carta extra.",e.jsx("br",{}),"O bot C simplesmente seleciona 4 cartas aleatórias."]}),en:e.jsxs(e.Fragment,{children:["In a game with bots, the ",e.jsx(ae,{children:"3"})," bots are added to the game.",e.jsx("br",{}),"Before the Dream Bingo phase, the three bots select cards based on a pre-determined logic:",e.jsx("br",{}),"Bot A select all most visited cards.",e.jsx("br",{}),"Bot B select all cards that got a single player visiting them but only one per player and only if more than one player will have a match this way.",e.jsx("br",{}),"Bot C simply selects 4 random cards."]})})})}function fs({round:r}){const s={1:{pt:"3ª",en:"3rd"},2:{pt:"2ª",en:"2nd"},3:{pt:"1ª",en:"1st"}};return r.current>3?e.jsx(e.Fragment,{}):e.jsx(_,{type:"event",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Atenção!"})," A ",e.jsx(Q,{children:s[r.current]})," linha de cartas sera trocada para a próxima rodada."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Attention!"})," The ",e.jsx(Q,{children:s[r.current]})," row of cards will be swapped for the next round."]})})})}function bs({onSubmitWord:r,words:s}){return e.jsxs(E,{fullWidth:!0,children:[e.jsx($,{children:e.jsx(n,{pt:"Selecione o tema da rodada",en:"Select the theme for the round"})}),e.jsx(_,{type:"rule",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Clique"})," em uma das palavras abaixo para selecionar.",e.jsx("br",{}),"A carta que você não escolher ficará para a próxima rodada."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Click"})," on one of the words below to select.",e.jsx("br",{}),"The card you don't choose will stay in the pool for the next round."]})})}),e.jsx(ne,{children:s.map((o,a)=>e.jsx(Se,{onClick:()=>r({wordId:o.id}),children:e.jsx(ue,{header:Pe[a],color:"purple",children:o.text})},o.id))})]})}function ys({players:r,state:s}){var l;const{step:o,goToNextStep:a,setStep:i}=F(),[d,t]=A("scoutId",s,r),h=hs(i);return e.jsx(W,{phase:s==null?void 0:s.phase,allowedPhase:f.WORD_SELECTION,children:e.jsxs(L,{step:o,players:r,waitingRoom:{type:"SERVER"},children:[e.jsx(ze,{round:s==null?void 0:s.round,onPressButton:a,buttonText:" ",time:5,children:e.jsx(p,{contained:!0,children:e.jsx(n,{pt:"Somos caçadores de sonhos tentando encontrar uns aos outros...",en:"We're dream scouts trying to find each other..."})})}),e.jsx(T,{icon:e.jsx(Le,{}),title:e.jsx(n,{pt:"Tema dos Sonhos",en:"The Dream Theme"}),onClose:a,currentRound:(l=s==null?void 0:s.round)==null?void 0:l.current,type:"block",children:e.jsx(js,{scout:d})}),e.jsxs(Ge,{condition:t,children:[e.jsx(bs,{onSubmitWord:h,words:s.words}),e.jsx(De,{players:r,title:e.jsx(n,{pt:"Aguarde...",en:"Please wait..."}),instruction:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:d})," está escolhendo o tema."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:d})," is choosing the theme."]})}),children:e.jsx(ps,{})})]})]})})}function vs({user:r}){if(!r.cards)return e.jsx(e.Fragment,{});const s=Object.values(r.cards??{}).map(o=>o.cardId);return e.jsx(Je,{hand:s,sizeRatio:16})}const Ss=(r,s)=>{const o=te.sample([[2,11,6,8,9,3,13],[2,11,8,4,9,3,13],[2,6,1,5,9,3,13]]),i=_e(s===4?[4,4,4,4,5,6]:[2,3,3,3,3,4,4,5,6])[0];return o.slice(0,i).map(t=>r[t].id)};function Ps({table:r,onSelectCard:s,selectedCards:o}){const a=N(5,{gap:8,minWidth:140,maxWidth:150});return e.jsx("div",{className:"g-table-container",children:e.jsx(J.PreviewGroup,{children:e.jsx("ul",{className:"g-table",children:r.map((i,d)=>{const t=o[i.id];return e.jsx(v.li,{className:"g-table-item",style:{width:`${a+8}px`},...S("flipInY",{delay:d*.25}),children:e.jsx(V,{id:i.id,onClick:()=>s(i.id),over:!0,buttonPosition:"bottom",icon:t?e.jsx(es,{}):void 0,buttonText:t?e.jsx(n,{pt:"Desmarcar",en:"Deselect"}):e.jsx(n,{pt:"Selecionar",en:"Select"}),children:e.jsx(w,{id:i.id,cardWidth:a-Y,className:I("g-table-image",t&&"g-table-image--selected")})})},`g-table-${i.id}`)})})})})}const _s=r=>Object.keys(r).length<10;function Is({table:r,word:s,onSubmitCards:o,botEnabled:a,announcement:i,minimumSelection:d}){const{dict:t,updateDict:h,length:l}=Ke({},_s);return Xe(()=>{o({cardsIds:Ss(r,d)})},[]),e.jsxs(E,{fullWidth:!0,announcement:i,children:[e.jsxs($,{size:"medium",children:[e.jsx(n,{pt:"Visite sonhos relacionados a ",en:"Visit dreams related to "}),e.jsx(Qe,{children:s.text})]}),e.jsx(be,{contained:!0,minimumSelection:d}),e.jsx(je,{content:e.jsx(gs,{})}),a&&e.jsx(xe,{type:"popover",position:1,icon:e.jsx(pe,{}),content:e.jsx(ve,{}),label:e.jsx(n,{pt:" Bots",en:" Bots"})}),e.jsx(ne,{children:e.jsx(Ie,{size:"large",disabled:l<d||l>10,onClick:()=>o({cardsIds:Object.keys(t)}),children:e.jsx(n,{pt:`Visitar ${l} sonhos`,en:`Visit ${l} dreams`})})}),e.jsx(Ps,{table:r,onSelectCard:h,selectedCards:t})]})}function Rs({players:r,state:s,meta:o}){var l,u;const a=ce(r,s),{step:i,setStep:d}=F(),t=us(d),h=e.jsxs(T,{icon:e.jsx(Ye,{}),title:e.jsx(n,{pt:"Visite sonhos!",en:"Visit dreams!"}),currentRound:(l=s==null?void 0:s.round)==null?void 0:l.current,type:"overlay",children:[e.jsx(be,{minimumSelection:s.minimumSelection}),e.jsx($e,{hand:s.table.map(g=>g.id)})]});return e.jsx(W,{phase:s==null?void 0:s.phase,allowedPhase:f.DREAMS_SELECTION,children:e.jsx(L,{step:i,players:r,waitingRoom:{content:e.jsx(vs,{user:a})},children:e.jsx(Is,{table:s.table,word:s.word,onSubmitCards:t,botEnabled:!!((u=o.options)!=null&&u.withBots),minimumSelection:s.minimumSelection,announcement:h})})})}function Ts({table:r,onPlayCard:s,userCards:o,isPlayAvailable:a}){const{isLoading:i}=ie(),d=N(5,{gap:8,minWidth:140,maxWidth:150});return e.jsx(J.PreviewGroup,{children:e.jsx("div",{className:"g-table-container",children:e.jsx("ul",{className:"g-table",children:r.map((t,h)=>{const l=!!(o!=null&&o[t.id]),u=o[t.id]??{};return t.used?e.jsx(v.li,{className:"g-table-item",style:{width:`${d+8}px`},...S("fadeIn",{delay:h*.1}),children:e.jsxs(V,{id:t.id,onClick:()=>s(t.id),over:!0,buttonPosition:"bottom",hideButton:!0,children:[e.jsx(rs,{cardWidth:d-Y,className:I("g-table-image",l&&"g-table-image--selected",R("zoomIn")),previewImageId:t.id}),u.used&&e.jsxs("div",{className:"g-star-points",children:[e.jsx(v.div,{...S("zoomIn",{delay:r.length*.1,duration:.4}),children:u.score===3&&e.jsx(z,{className:"g-star g-star--super-spark"})}),e.jsx(v.div,{...S("zoomIn",{delay:r.length*.1,duration:.3}),children:u.score>1&&e.jsx(z,{className:"g-star g-star--spark"})}),e.jsx(v.div,{...S("zoomIn",{delay:r.length*.1,duration:.2}),children:u.score>0&&e.jsx(z,{className:"g-star g-star--spark"})})]})]})},`g-table-${t.id}`):e.jsx(v.li,{className:"g-table-item",style:{width:`${d+8}px`},...S("fadeIn",{delay:h*.1}),children:e.jsx(V,{id:t.id,onClick:()=>s(t.id),over:!0,buttonPosition:"bottom",hideButton:!a||!o[t.id],buttonText:e.jsx(n,{pt:"Selecionar",en:"Select"}),disabled:i,children:e.jsx(w,{id:t.id,cardWidth:d-Y,className:I("g-table-image",l&&"g-table-image--selected")})})},`g-table-${t.id}`)})})})})}function Ns({players:r,playerInNightmareId:s}){const o=b.useMemo(()=>Re(r),[r]);return e.jsxs("div",{className:"g-players-dreams-count",children:[e.jsx("header",{className:"g-players-dreams-count__title",children:e.jsx(n,{en:"Player Dream Count",pt:"Sonhos por Jogador"})}),e.jsx("ul",{className:"g-players-dreams-count__players",children:o.map(a=>{const d=Object.values(a.cards).filter(l=>!l.used),t=a.id===s,h=t&&!a.fallen&&d.length>0;return e.jsx("span",{className:I("g-players-dreams-count__player",t&&!a.fallen&&`g-players-dreams-count__player--nightmare ${R("pulse",{speed:"faster",repeat:3})}`),style:{backgroundColor:de(a.avatarId)},children:e.jsxs(Te,{title:h?e.jsxs("div",{className:R("tada",{speed:"fast",infinite:!0}),children:[a.name," ",e.jsx(n,{pt:"tá em pesadelo!",en:"is in a nightmare"})]}):void 0,color:"black",placement:"bottom",open:h,children:[e.jsx(os,{shape:"square",id:a.avatarId,alt:a.name}),e.jsx("div",{className:I("g-players-dreams-count__count",a.fallen&&"g-players-dreams-count__count--fallen"),children:d.length})]})},`player-dream-count-${a.id}`)})})]})}function Es({table:r,word:s,onPlayCard:o,user:a,activePlayer:i,isActivePlayer:d,isLoading:t,players:h,gameOrder:l,setLastTurnCount:u,playerInNightmareId:g,botEnabled:c=!1}){const{message:y}=Ne.useApp();le();const{translate:x}=k(),[C,M]=b.useState(!1);return b.useEffect(()=>{u(i.id)}),b.useEffect(()=>{d&&!t&&!C&&(y.info(ss(x("Você controla!","You control!"),x("Selecione a carta-sonho que você acha que vai dar match com pelo menos um jogador!","Select the dream card you think will match at least one player"),i.id,3)),M(!0))},[d,i.id,x,t,C,y]),e.jsxs(E,{fullWidth:!0,children:[e.jsx(Be,{size:"small",children:e.jsx(n,{pt:"Bingo dos Sonhos",en:"Dream Bingo"})}),e.jsx(ue,{header:x("Tema","Theme"),color:"purple",children:s.text}),e.jsx(Ns,{players:h,playerInNightmareId:g}),!!a.fallen&&!!a.inNightmare&&e.jsx(_,{type:"event",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Você estava em apuros e não conseguiu dar match em uma de suas cartas, então perdeu"," ",e.jsx(j,{type:"negative",children:"1 ponto"})," por carta que você deu match."]}),en:e.jsxs(e.Fragment,{children:["You were in danger and didn't get a match in one of your cards. You lost"," ",e.jsx(j,{type:"negative",children:"1 point"})," per scored card."]})})}),!!a.fallen&&!a.inNightmare&&e.jsx(_,{type:"event",children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Você não conseguiu dar match em uma de suas cartas, e está fora da rodada."}),en:e.jsx(e.Fragment,{children:"You didn't get a match in one of your cards, and you're out of the round."})})}),e.jsx(_,{type:d?"action":"wait",children:d?e.jsx(n,{pt:"Selecione a carta-sonho que você acha que vai dar match com pelo menos um jogador!",en:"Select the dream card you think will match at least one player"}):e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:i,className:R("flash")})," está selecionando um sonho."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:i,className:R("flash")})," is selecting a dream."]})})}),e.jsx(je,{content:e.jsx(ye,{})}),c&&e.jsx(xe,{type:"popover",position:1,icon:e.jsx(pe,{}),content:e.jsx(ve,{}),label:e.jsx(n,{pt:" Bots",en:" Bots"})}),e.jsx(Ts,{table:r,onPlayCard:O=>o({cardId:O}),userCards:a.cards??{},isPlayAvailable:d}),e.jsx(ge,{players:h,order:l,activePlayerId:i.id})]})}function G({listPlayers:r,className:s}){return e.jsx("ul",{className:s,children:r.map(o=>e.jsx("li",{children:e.jsx(m,{player:o,addressUser:!0})},`${s}-${o.id}`))})}function ws(){return e.jsxs("div",{className:"fireworks",children:[e.jsx("div",{className:"fireworks__before"}),e.jsx("div",{className:"fireworks__after"})]})}function Cs({matchCount:r,lastActivePlayer:s,playerInNightmare:o}){const a=r>0,i=r===1,d=(o==null?void 0:o.id)===s.id;return e.jsx("div",{className:"match-count-container",children:a?e.jsx(n,{pt:e.jsxs("p",{children:["E encontrou"," ",r>1?e.jsx(D,{children:r}):e.jsx(B,{children:r})," ",ee(r,"jogador")," lá!",e.jsx("br",{}),i&&"Brilho total!",e.jsx(re,{keyPrefix:"dream-result",quantity:i?3:2})]}),en:e.jsxs("p",{children:["And met"," ",r>1?e.jsx(D,{children:r}):e.jsx(B,{children:r})," ",ee(r,"player")," there!",e.jsx("br",{}),i&&"Super Spark!",i&&e.jsx(ws,{}),e.jsx(re,{keyPrefix:"dream-result",quantity:i?3:2})]})}):e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"g-announce-title",children:"Vixi..."}),e.jsxs("p",{children:["Não sei o que dizer... Ninguém visitou esse sonho e"," ",e.jsx(m,{player:s,size:"small",addressUser:!0})," está fora da rodada.",e.jsx("br",{}),e.jsx("small",{children:"(as cartas restantes ainda contarão pontos para outros jogadores)"})," ",d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Para piorar, ",e.jsx(m,{player:s,size:"small",addressUser:!0})," vai perder"," ",e.jsx(j,{type:"negative",children:"1"}),"ponto por sonho usado até então."]})]})]}),en:e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"g-announce-title",children:"Oops..."}),e.jsxs("p",{children:["I don't know what to say... no one has visited this dream and"," ",e.jsx(m,{player:s,size:"small",addressUser:!0})," is/are out of the round.",e.jsx("br",{}),e.jsx("small",{children:"(the remaining cards will still count towards scoring for other players)"}),d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"To make this worse, ",e.jsx(m,{player:s,size:"small",addressUser:!0})," will lose ",e.jsx(j,{type:"negative",children:"1"})," point for each scored dream."]})]})]})})})}function Os({latest:r,lastActivePlayer:s,activePlayer:o,setStep:a,players:i,playerInNightmare:d,gameOrder:t}){le();const h=N(5,{gap:8,minWidth:140,maxWidth:150}),{matchingPlayers:l,fallenMatchingPlayers:u}=b.useMemo(()=>((r==null?void 0:r.matchedPlayers)??[]).reduce((c,y)=>{const x=i[y];return x!=null&&x.fallen?s.id!==y&&c.fallenMatchingPlayers.push(x):c.matchingPlayers.push(x),c},{matchingPlayers:[],fallenMatchingPlayers:[]}),[r==null?void 0:r.matchedPlayers,i,s.id]),g=Object.values(i).filter(c=>(c==null?void 0:c.skip)||(c==null?void 0:c.fallen));return e.jsxs(E,{fullWidth:!0,children:[e.jsxs(v.div,{className:"g-dream-result",...S("fadeIn",{speed:"slow"}),children:[e.jsxs("header",{className:"g-dream-result__header",style:{backgroundColor:de(s.avatarId)},children:[e.jsx(m,{player:s,size:"large"}),e.jsx(n,{pt:"escolheu visitar o sonho",en:"chose to visit the dream"}),":"]}),e.jsx("div",{className:"g-dream-result__card",children:e.jsx(w,{id:r.cardId,cardWidth:h})}),e.jsx("div",{className:"g-dream-result__match-result",children:e.jsx(Cs,{matchCount:r.matchCount,lastActivePlayer:s,playerInNightmare:d})}),e.jsx("div",{className:"g-dream-result__matching-players",children:l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(n,{pt:"Ganharam pontos:",en:"Scored points:"})}),e.jsx(G,{listPlayers:l,className:"g-dream-result__matched-players-list"})]})}),e.jsx("div",{className:"g-dream-result__fallen-matching-players",children:u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"g-dream-result__label",children:e.jsx(n,{pt:"Ganhariam pontos, mas já estão eliminados:",en:"Matched but are out of the round:"})}),e.jsx(G,{listPlayers:u,className:"g-dream-result__matched-players-list fallen"})]})}),e.jsxs("footer",{className:"g-dream-result__footer",children:[r.isPhaseOver||r.cardsLeft===0?e.jsxs(se,{align:"center",className:"full-width padding",direction:"vertical",children:[e.jsx("p",{className:"center",children:e.jsx(n,{pt:"Todos jogadores já usaram seus sonhos ou não deram match com ninguém. Vamos para a próxima rodada?",en:"All players have used their dreams or didn't match anybody. Ready for the next round?"})}),t.length===1&&e.jsx(Ee,{className:"center",type:"error",message:(d==null?void 0:d.id)===t[0]?e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:d})," foi ganancioso(a) não conseguiu usar todos os sonhos."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:d})," was too greedy and wasn't able to use of all their dreams."]})}):e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Não há mais jogadores pra dar match com"," ",e.jsx(m,{player:i[t[0]]})]}),en:e.jsxs(e.Fragment,{children:["There are no players to match anymore with"," ",e.jsx(m,{player:i[t[0]]})]})})})]}):e.jsxs(se,{align:"center",className:"full-width padding",direction:"vertical",children:[e.jsxs("p",{className:"center",children:[e.jsx(n,{pt:"Próximo jogador:",en:"Next player:"}),e.jsx(m,{player:o,addressUser:!0})]}),e.jsx(Ze,{type:"primary",duration:12,disabled:!0,onExpire:()=>a(H),children:e.jsx(n,{pt:"Continuando em...",en:"Continuing in..."})})]}),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsxs("div",{className:"g-dream-result__completed-players",children:[e.jsxs("p",{className:"g-dream-result__label center",children:[e.jsx(n,{pt:"Jogadores fora do rodízio",en:"Players out of rotation"}),":"]}),e.jsx(G,{listPlayers:g,className:"g-dream-result__matched-players-list g-dream-result__matched-players-list--centered"})]})]})]})]}),t.length>1&&e.jsx(ge,{players:i,order:t,activePlayerId:o.id}),r.isPhaseOver&&e.jsx(me,{autoTriggerTime:15,children:"Ranking"})]})}function As({players:r,state:s,meta:o}){var O,Z;const{isLoading:a}=ie(),{step:i,goToNextStep:d,setStep:t}=F(),h=ce(r,s),[l,u]=A("activePlayerId",s,r),[g]=A("lastActivePlayerId",s,r),[c,y]=A("playerInNightmareId",s,r),[x,C]=b.useState(""),M=xs(t);return b.useEffect(()=>{x&&s.turnCount!==x&&t(oe)},[s.turnCount]),b.useEffect(()=>{s.activePlayerId||t(oe)},[s.activePlayerId,t]),e.jsx(W,{phase:s==null?void 0:s.phase,allowedPhase:f.CARD_PLAY,children:e.jsxs(L,{step:i,players:r,children:[e.jsx(T,{icon:e.jsx(Me,{}),title:e.jsx(n,{pt:"Hora do Bingo dos Sonhos!",en:"Time for the Dream Bingo!"}),onClose:()=>t(c.id?ms:H),duration:s.round.current<2?20:5,unskippable:!0,type:"block",children:e.jsx(ye,{})}),e.jsx(U,{goToNextStep:d}),e.jsx(T,{icon:e.jsx(qe,{}),animationType:"tada",title:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:c,size:"large",addressUser:!0})," entrou em um pesadelo!"]}),en:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:c,size:"large",addressUser:!0})," ",y?"are":"is"," in a nightmare!"]})}),onClose:()=>t(H),currentRound:(O=s==null?void 0:s.round)==null?void 0:O.current,duration:s.round.current<3?10:5,unskippable:!0,type:"block",children:e.jsx(p,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:c,addressUser:!0})," selecionou"," ",e.jsxs(P,{children:[Object.keys((c==null?void 0:c.cards)??{}).length," cartas"]}),", o maior número de cartas da rodada!",e.jsx("br",{}),"Se ele não conseguir achar outro jogador que marcou o mesmo sonho para cada uma das cartas selecionadas, ele perde ",e.jsx(j,{type:"negative",children:"1"})," ponto por carta que você ganhou ponto.",e.jsx("br",{})]}),en:e.jsxs(e.Fragment,{children:[e.jsx(m,{player:c,addressUser:!0})," selected"," ",e.jsxs(P,{children:[Object.keys((c==null?void 0:c.cards)??{}).length," cards"]}),", the largest number of cards for this round!",e.jsx("br",{}),"If they are not able to match every single dream, they will lose"," ",e.jsx(j,{type:"negative",children:"1"})," point per card you previously scored.",e.jsx("br",{})]})})})}),e.jsx(U,{goToNextStep:d}),e.jsx(Os,{latest:s.latest,lastActivePlayer:g,setStep:t,players:r,activePlayer:l,playerInNightmare:c,gameOrder:s.gameOrder}),e.jsx(U,{goToNextStep:d}),e.jsx(Es,{table:s.table,word:s.word,onPlayCard:M,user:h,activePlayer:l,isActivePlayer:u,players:r,gameOrder:s.gameOrder,isLoading:a,setLastTurnCount:C,playerInNightmareId:s.playerInNightmareId,botEnabled:!!((Z=o==null?void 0:o.options)!=null&&Z.withBots)})]})})}function Ds({players:r,state:s}){var i;const{step:o,goToNextStep:a}=F();return e.jsx(W,{phase:s==null?void 0:s.phase,allowedPhase:f.RESOLUTION,children:e.jsxs(L,{step:o,players:r,waitingRoom:{type:"SERVER"},children:[e.jsx(T,{icon:e.jsx(as,{}),title:e.jsx(n,{pt:"Ranking",en:"Ranking"}),onClose:a,currentRound:(i=s==null?void 0:s.round)==null?void 0:i.current,type:"block",duration:3,children:e.jsx(p,{children:e.jsx(n,{pt:"E quem deu mais matches foi...",en:"And who matched the most was..."})})}),e.jsxs(ts,{players:r,ranking:s.ranking,gainedPointsDescriptions:[e.jsx(n,{pt:"Pontos por encontrar só um jogador",en:"Points for matching only 1 player"},"1"),e.jsx(n,{pt:"Pontos por encontrar mais de um jogador",en:"Points for matching with more players"},"2"),e.jsx(n,{pt:"Pontos perdidos por não ter dado match e estar em um pesadelo",en:"Points lost for not matching any player while in a nightmare"},"3")],children:[e.jsx(fs,{round:s.round}),e.jsx(ns,{round:s.round}),e.jsx(me,{round:s.round})]})]})})}function Bs({bestMatches:r}){const s=N(8,{gap:8,minWidth:100,maxWidth:150});return e.jsxs(E,{children:[e.jsx(fe,{}),e.jsx($,{size:"x-small",level:3,children:e.jsx(n,{pt:"Sonhos mais visitados",en:"Most visited dreams"})}),e.jsx("ul",{className:"g-best-matches",children:te.orderBy(r,"matchedPlayers.length","desc").map((o,a)=>e.jsxs("div",{className:"g-best-matches__entry",children:[e.jsxs("div",{className:"g-best-matches__label",children:[e.jsx(we,{size:"small",children:o.matchedPlayers.length}),e.jsx("span",{children:o.text})]}),e.jsx(w,{id:o.id,cardWidth:s-6})]},`${o.id}-${a}`))})]})}function ks({table:r}){const s=N(12,{gap:8,minWidth:60,maxWidth:100});return e.jsx(J.PreviewGroup,{children:e.jsx("ul",{className:"g-table g-table--game-over",children:r.map(o=>e.jsxs("li",{className:"g-table-item",style:{width:`${s+8}px`},children:[e.jsx(ls,{cardId:o.id}),e.jsx(w,{id:o.id,cardWidth:s-6,className:I("g-table-image",R("zoomIn"))})]},`g-table-${o.id}`))})})}function Fs({state:r,players:s}){return e.jsxs(is,{state:r,players:s,announcementIcon:e.jsx(Ue,{}),children:[e.jsx(ds,{players:s,achievements:r.achievements,reference:cs}),e.jsx(Bs,{bestMatches:r.bestMatches}),e.jsx(ks,{table:r.table})]})}function Ws(r){if(r&&!r.phase)return Oe;switch(r.phase){case q.DEFAULT.LOBBY:return We;case q.DEFAULT.SETUP:return Fe;case f.WORD_SELECTION:return ys;case f.DREAMS_SELECTION:return Rs;case f.CARD_PLAY:return As;case f.RESOLUTION:return Ds;case q.DEFAULT.GAME_OVER:return Fs;default:return Ae}}function po(){return e.jsx(ke,{gameCollection:Ce.GALERIA_DE_SONHOS,getActiveComponent:Ws})}export{po as default};
