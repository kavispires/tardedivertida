import{r as x,h as b,j as e,P as W,B as P,T as a,ei as g,d6 as $,e as y,I as U,b6 as F,o as K,ci as J,J as X,aM as Z,aR as ee,a_ as se}from"./index-DvppfgRv.js";import{u as V,S as te,a as S,P as A,c as oe,d as re,e as ne}from"./Session-X-N4hf4T.js";import{P as ae}from"./PhasePlaceholder-D3TZI6jF.js";import{T}from"./TDIcon-E1MNZSCO.js";import{S as ie,a as E,P as N}from"./StepSwitcher-GRRK4efZ.js";import{I}from"./useDevFeatures-w3W2BPgK.js";import{m as ce}from"./messageContent-uf6C0qlt.js";import{T as le}from"./TimedTimerBar-Bgo0Ah3p.js";import{P as M}from"./PlayerAvatarName-DErJPECv.js";import{S as v}from"./index-Bk4RdLjp.js";import{R as ue}from"./RevolverIcon-Bdl2pZZd.js";import{c as me}from"./WritingIcon-DQQLo40-.js";import{P as O}from"./PlayerAvatarCard-UUHuhRHM.js";import{K as de}from"./KnifeIcon-DdG0OsA7.js";import{a as he}from"./RulesModal-BupD63Bo.js";import"./Game-Ch5JUYDX.js";import"./useMutation-CdsDiU7r.js";import"./speech-DB2TJQrk.js";import"./index-B6lvJW0z.js";import"./PurePanel-C9S70P0-.js";import"./index-JzbJh84j.js";import"./index-nROAR8Mh.js";import"./PlayerAvatar-4I-LnJ6Z.js";import"./DebugOnly-f-8UdT-g.js";import"./GameBanner-sa2yhoJA.js";import"./index-qRlSqIqu.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DF_wMmXU.js";import"./index-BsP26atl.js";import"./useBubbleLock-CKJopiFI.js";import"./InfoCircleOutlined-BXVUvu-2.js";import"./useToggle-DTgQq2Yy.js";import"./index-Dpp6_Nt0.js";import"./SignIn-DdSI9y1n.js";import"./GoogleIcon-3W4a7kM5.js";import"./AnimatedGearIcon-B24Zs_ID.js";import"./AnimatedClockIcon-D32Srta7.js";import"./TimedButton-CI7WX-Lk.js";import"./Loading-BIZ_exdO.js";import"./AnimatedLoaderIcon-D7DW2oqt.js";import"./WaitingRoomIcon-Cr_Gt9Nn.js";import"./LikeFilled-B_cr3hlL.js";import"./VideoGameControllerIcon-CAVrrdDm.js";import"./TimerBar-4C3D9QD6.js";import"./progress-DAcelAuX.js";import"./Overflow-CZZSli7j.js";var pe=function(s){return(s+1)%1e6};function je(){var s=x.useReducer(pe,0),t=s[1];return t}function j(s,t){return typeof s=="function"?s.length?s(t):s():s}function xe(s){var t=x.useRef(j(s)),o=je();return x.useMemo(function(){return[function(){return t.current},function(r){t.current=j(r,t.current),o()}]},[])}function fe(s,t,o){t===void 0&&(t=null),o===void 0&&(o=null);var r=j(s);typeof r!="number"&&console.error("initialValue has to be a number, got "+typeof s),typeof o=="number"?r=Math.max(r,o):o!==null&&console.error("min has to be a number, got "+typeof o),typeof t=="number"?r=Math.min(r,t):t!==null&&console.error("max has to be a number, got "+typeof t);var n=xe(r),m=n[0],p=n[1];return[m(),x.useMemo(function(){var d=function(c){var i=m(),l=j(c,i);i!==l&&(typeof o=="number"&&(l=Math.max(l,o)),typeof t=="number"&&(l=Math.min(l,t)),i!==l&&p(l))};return{get:m,set:d,inc:function(c){c===void 0&&(c=1);var i=j(c,m());typeof i!="number"&&console.error("delta has to be a number or function returning a number, got "+typeof i),d(function(l){return l+i})},dec:function(c){c===void 0&&(c=1);var i=j(c,m());typeof i!="number"&&console.error("delta has to be a number or function returning a number, got "+typeof i),d(function(l){return l-i})},reset:function(c){c===void 0&&(c=r);var i=j(c,m());typeof i!="number"&&console.error("value has to be a number or function returning a number, got "+typeof i),r=i,d(i)}}},[r,o,t])]}const h={TARGETING:"TARGETING",STANDOFF:"STANDOFF",DUEL:"DUEL",RESOLUTION:"RESOLUTION"},w={SUBMIT_TARGET:"SUBMIT_TARGET",SUBMIT_MESSAGE:"SUBMIT_MESSAGE"};function ge(){const{translate:s}=b(),t=V({actionName:"submit-target",successMessage:s("Alvo selecionado com sucesso","Target set successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu alvo","Oops, the application failed to send your target")});return o=>{t({action:w.SUBMIT_TARGET,...o})}}function ve(){const{translate:s}=b(),t=V({actionName:"submit-message",successMessage:s("Mensagem enviada com sucesso!","Message sent successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar a mensagem","Oops, the application failed to send the message")});return o=>{t({action:w.SUBMIT_MESSAGE,...o})}}function ye({messages:s,onSubmitMessage:t,disabled:o,players:r}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"q-message-board",children:[e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'}),e.jsx("div",{className:"",children:'Anonymous: "Votem na fulana!"'})]}),e.jsx("div",{className:"q-message-send",children:e.jsx(W,{placement:"top",title:e.jsx(a,{pt:"Enviar mensagem anônima",en:"Send anonymous message"}),content:e.jsx(be,{players:r,onSubmitMessage:t}),trigger:"click",children:e.jsx(P,{size:"small",disabled:o,children:"Enviar mensagem"})})})]})}function be({onSubmitMessage:s,players:t}){const{translate:o}=b(),[r]=g.useForm();return e.jsxs(g,{form:r,initialValues:{recipientId:"ALL"},className:"q-message-form",size:"small",onFinish:n=>console.log(n),children:[e.jsx(g.Item,{label:e.jsx(a,{pt:"Apontem para",en:"Aim on"}),name:"targetId",required:!0,children:e.jsx(v,{placeholder:e.jsx(a,{pt:"Selecione alguém",en:"Select someone"}),children:Object.values(t).map(n=>e.jsx(v.Option,{value:n.id,children:e.jsx(M,{player:n})},n.id))})}),e.jsx(g.Item,{label:e.jsx(a,{pt:"Enviar para",en:"Send to"}),name:"recipientId",required:!0,children:e.jsxs(v,{placeholder:e.jsx(a,{pt:"Selecione alguém",en:"Select someone"}),children:[e.jsx(v.Option,{value:"ALL",children:e.jsx(M,{player:{...$,id:"unknown",avatarId:"N",name:o("TODOS","EVERYBODY")}})}),Object.values(t).map(n=>e.jsx(v.Option,{value:n.id,children:e.jsx(M,{player:n})},n.id))]})}),e.jsx(g.Item,{label:"",children:e.jsx(P,{type:"primary",htmlType:"submit",children:e.jsx(a,{pt:"Enviar",en:"Send"})})})]})}function L({player:s,side:t}){return e.jsxs("div",{className:y("q-player-status",`q-player-status--${t}`),children:[e.jsx(O,{player:s,withName:!0,size:"small"}),e.jsx("div",{className:y("q-player-status__icon",`q-player-status__icon--${t}`),children:e.jsx(U,{icon:s.target?e.jsx(ue,{className:y(F("rotateInDownLeft"))}):e.jsx(me,{className:y(F("flash",{speed:"slower",infinite:!0}))})})})]})}function G({player:s,width:t,target:o,onClick:r,disabled:n=!1,isAmbush:m=!1}){return e.jsx(K,{className:"q-player-target-card-button",style:{backgroundColor:J(s.avatarId),width:`${t}%`},active:o===s.id,onClick:()=>r(s.id),disabled:n,children:m?e.jsxs("div",{className:"q-ambush-card",children:[e.jsx(O,{player:s,replacementAvatar:e.jsx(U,{icon:e.jsx(de,{})}),size:"small"}),e.jsx("div",{className:"a",children:e.jsx(a,{pt:"Emboscar!",en:"Ambush!"})})]}):e.jsx(O,{player:s,withName:!0,addressUser:!0,size:"small"})})}function Se(){return e.jsx(a,{pt:e.jsxs("ul",{children:[e.jsx("li",{children:"O grupo tem 90 segundos para decidir quem deve morrer."}),e.jsx("li",{children:"Cada um vota secretamente, escolha seu alvo clicando em um dos avatares abaixo."}),e.jsx("li",{children:"Você pode trocar seu alvo até 3 vezes durante o tempo."}),e.jsx("li",{children:"Você pode se comunicar verbalmente ou usando 1 dos meios de comunicação:"}),e.jsx("li",{children:"- Mandar uma mensagem anônima para todos"}),e.jsx("li",{children:"- Mandar uma mensagem secreta para alguém"}),e.jsx("li",{children:"O objetivo é sobreviver:"}),e.jsx("li",{children:"- Se você não votar no mais votado, você morre"}),e.jsx("li",{children:'- Se você acha que será o mais votado, você pode usar "Emboscada", mas...'}),e.jsx("li",{children:'- Se você usar "Emboscada" e não for o mais votado, você morre'}),e.jsx("li",{children:'- Se você for o mais votado e não votou usou "Emboscada", você morre'}),e.jsx("li",{children:'- Se você votou no mais votado, mas o mais votado usou "Emboscada", você morre'}),e.jsx("li",{children:"Boa sorte!"})]}),en:e.jsxs("ul",{children:[e.jsx("li",{children:"The group has 90 seconds to decide who dies."}),e.jsx("li",{children:"Each player votes secretly by selecting one of the targets in the bottom of the page."}),e.jsx("li",{children:"You can swap your vote up to 3 times within the timer."}),e.jsx("li",{children:"You may communicate openly or use one of the means of communication:"}),e.jsx("li",{children:"- Send a public anonymous message to all"}),e.jsx("li",{children:"- Send a private anonymous message to someone"}),e.jsx("li",{children:"Your objective is to survive:"}),e.jsx("li",{children:"- If you don't vote for the most voted player, you die"}),e.jsx("li",{children:'- If you think you are the most voted player, you may use "Ambush" , but...'}),e.jsx("li",{children:`- If you use "Ambush" and you're not the most voted, you die`}),e.jsx("li",{children:'- If you are the most voted and did not used "Ambush", you die'}),e.jsx("li",{children:'- If you voted for the most voted player but they played "Ambush", you die'}),e.jsx("li",{children:"Good luck!"})]})})}function Ae({players:s,user:t,onSubmitTarget:o,onSubmitMessage:r,messages:n}){const{message:m}=X.useApp(),{isLoading:p}=Z(),{translate:d}=b(),[c,i]=x.useState(!1),[l,B]=fe(3);x.useEffect(()=>{l<=0&&i(!0)},[l]);const z=()=>i(!0),f=Object.keys(s).sort(),{leftPlayersIds:Y,rightPlayersIds:H}=x.useMemo(()=>{const u=Math.ceil(f.length/2),D=[],_=[];return f.forEach((k,Q)=>{Q<u?D.push(k):_.push(k)}),{leftPlayersIds:D,rightPlayersIds:_}},[f]),R=Math.floor(100/f.length),C=()=>{m.info(ce(d("Você controla!","You control!"),e.jsx(Se,{}),"rules",20,"rules"))};ee(()=>C());const q=u=>{B.dec(),o({targetId:u})};return e.jsxs(ie,{fullWidth:!0,className:"q-target-grid",children:[e.jsxs("div",{className:"q-target-content",children:[e.jsx(te,{size:"small",children:e.jsx(a,{pt:"Escolha seu alvo!",en:"Choose your target!"})}),e.jsx(le,{duration:90,steps:18,onExpire:z}),e.jsx(P,{shape:"round",size:"small",onClick:C,icon:e.jsx(he,{}),children:e.jsx(a,{pt:" Regras",en:" Rules"})}),e.jsx(ye,{messages:n,onSubmitMessage:r,disabled:!!t.messaged||p,players:s,user:t})]}),e.jsx("div",{className:"q-target-players q-target-players--left",children:Y.map(u=>e.jsx(L,{player:s[u],side:"left"},u))}),e.jsx("div",{className:"q-target-players q-target-players--right",children:H.map(u=>e.jsx(L,{player:s[u],side:"right"},u))}),e.jsxs("div",{className:"q-target-section",children:[c?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Você não pode mais trocar seu alvo."}),en:e.jsx(e.Fragment,{children:"You can not change your target anymore."})})}),e.jsx("p",{children:e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Aguarde enquanto o resultado é calculado."}),en:e.jsx(e.Fragment,{children:"Wait to see the outcome..."})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx(a,{pt:"Clique em um jogador para aportar sua arma",en:"Click on a player to aim your gun"})}),e.jsx("p",{children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Você pode trocar seu alvo ",l,' vezes. Se você acha que será o alvo, use "Emboscada" para contra-atacar.']}),en:e.jsxs(e.Fragment,{children:["You may change your target ",l,' times. If you think you are the target, use "Ambush" to counterattack.']})})})]}),e.jsxs("div",{className:"q-target-cards",children:[e.jsx(G,{player:t,width:R,onClick:q,target:t.target,disabled:c||p,isAmbush:!0}),f.filter(u=>u!==t.id).map(u=>e.jsx(G,{player:s[u],width:R,target:t.target,onClick:q,disabled:c||p},u))]})]})]})}function Te({state:s,players:t,user:o}){const{step:r,goToNextStep:n}=S(0),m=ge(),p=ve(),d=t;return e.jsx(A,{phase:s?.phase,allowedPhase:h.TARGETING,children:e.jsxs(E,{step:r,players:t,children:[e.jsx(N,{icon:e.jsx(T,{}),title:e.jsx(a,{pt:"Apontem suas armas!",en:"Point your guns!"}),onClose:n,currentRound:s?.round?.current,type:"block",children:e.jsx(I,{children:e.jsx(a,{pt:"Tem alguém te olhando torto, heim...",en:"Is anyone looking at you funny?"})})}),e.jsx(Ae,{players:d,user:o,onSubmitTarget:m,onSubmitMessage:p,messages:s.messages??{}})]})})}function Ee({state:s,players:t,user:o}){const{step:r,goToNextStep:n}=S(0);return e.jsx(A,{phase:s?.phase,allowedPhase:h.STANDOFF,children:e.jsxs(E,{step:r,players:t,children:[e.jsx(N,{icon:e.jsx(T,{}),title:e.jsx(a,{pt:"O pega pra capar!",en:"Standoff Results"}),onClose:n,currentRound:s?.round?.current,type:"block",children:e.jsx(I,{children:"Add text here"})}),e.jsxs("div",{children:["Add Content Here ",o.name]})]})})}function Ne({state:s,players:t,user:o}){const{step:r,goToNextStep:n}=S(0);return e.jsx(A,{phase:s?.phase,allowedPhase:h.DUEL,children:e.jsxs(E,{step:r,players:t,children:[e.jsx(N,{icon:e.jsx(T,{}),title:e.jsx(a,{pt:"Duelo de Dois",en:"The Duel"}),onClose:n,currentRound:s?.round?.current,type:"block",children:e.jsx(I,{children:e.jsx(a,{pt:"Pega tudo? Divide irmãmente? Garante um?",en:"Take one? Share equally? Or garante one?"})})}),e.jsxs("div",{children:["Add Content Here ",o.name,"s"]})]})})}function Ie({state:s,players:t,user:o}){const{step:r,goToNextStep:n}=S(0);return e.jsx(A,{phase:s?.phase,allowedPhase:h.RESOLUTION,children:e.jsxs(E,{step:r,players:t,children:[e.jsx(N,{icon:e.jsx(T,{}),title:e.jsx(a,{pt:"Resultado",en:"Resultado"}),onClose:n,currentRound:s?.round?.current,type:"block",children:e.jsx(I,{children:"Add text here"})}),e.jsxs("div",{children:["Add Content Here ",o.name]})]})})}function Me(s){switch(s.phase){case h.TARGETING:return Te;case h.STANDOFF:return Ee;case h.DUEL:return Ne;case h.RESOLUTION:return Ie;case ne.DEFAULT.GAME_OVER:return ae;default:return re}}function bs(){return e.jsx(oe,{gameCollection:se.QUEM_NAO_MATA,getActiveComponent:Me})}export{bs as default};
