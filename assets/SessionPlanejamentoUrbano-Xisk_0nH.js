import{r as h,$ as f,f as le,j as e,T as c,v as de,aK as Ne,q as A,c as y,y as Te,av as H,B as N,cI as Re,cJ as Me,P as Ae,O as Ee,D as Le,o as he,F as C,n as Fe,bZ as me,bp as ze,I as V,au as $e,aF as He}from"./index-BbpYAcGk.js";import{u as ue,S as E,a as X,P as K,f as Ve,c as Be,d as De,e as We}from"./Session-DE9RyepJ.js";import{u as Q}from"./useWhichPlayerIsThe-BIrBEapO.js";import{B as pe,C as v,M as _e,b as ke,a as Ge}from"./MapCityZonesIcon-CxiA4cqI.js";import{P as b}from"./PlayerAvatarName-BJZyZosF.js";import{S as L,P as Y,a as ee,u as qe}from"./StepSwitcher-2YQ7p-YN.js";import{I as T}from"./useDevFeatures-yRcosrZD.js";import{R as Ue}from"./RoundAnnouncement-Ci089W9M.js";import{V as Ze}from"./ViewOr-Bx1kDirb.js";import{u as je}from"./useMock-DjjgQZHy.js";import{D as xe}from"./DevButton-DMYbVIZ2.js";import{T as ne}from"./TurnOrder-DCGPDQsD.js";import{c as Je,d as Xe,R as F}from"./RuleInstruction-Cic6oU8T.js";import{M as ge}from"./MetricHighlight-Du2_vlcF.js";import{u as Ke,a as Qe,P as Ye,D as en}from"./core.esm-D4OdCqOb.js";import{a as nn,D as tn}from"./DragAndDrop-KeeUeVsY.js";import{T as rn,a as sn,u as fe,R as on}from"./index.esm-DYiCcBuk.js";import{R as an}from"./QuestionCircleFilled-DX7_riuX.js";import{R as cn}from"./StarFilled-CdVH-SoO.js";import{T as re}from"./Popconfirm-D6RlIoAB.js";import{V as se}from"./ViewIf-qgMpzyEs.js";import{u as ln}from"./SlideShowControls-CUliK6jc.js";import{P as I}from"./PointsHighlight-bhL_v8lb.js";import{A as dn}from"./ArrowIcon-D0hKvWr6.js";import{C as hn}from"./CrownIcon-V5qmuLC3.js";import{X as mn}from"./XIcon-B0DM_mS5.js";import{S as oe}from"./StarPoints-D4nvbFfn.js";import{S as un}from"./SlideShow-BWbixGqQ.js";import{S as B,a as ae,b as ie,c as pn}from"./SlideShowComposableComponents-Cc2rqH6W.js";import{S as jn}from"./StepRankingWrapper-B4K-JgF_.js";import{F as xn}from"./FlagIcon-CQcx7O6F.js";import"./RulesModal-Be1RTD3-.js";import{G as gn}from"./GameOverWrapper-Cfx178bF.js";import{A as fn}from"./Achievements-Z11JgLEz.js";import{T as vn}from"./TitledContainer-CkjNRYAp.js";import{a as yn}from"./achievements-_n9E3c3J.js";import"./Game-DnDMN2n6.js";import"./useMutation-DtYrKEWf.js";import"./FixedMenuButton-D0PDxSRy.js";import"./index-CwDedUrh.js";import"./index-CJKaHsgr.js";import"./extends-CF3RwP-h.js";import"./PurePanel-D0KX6l8Q.js";import"./useToggle-2lG9qE-F.js";import"./useId-C_FprHKC.js";import"./PlayerAvatar-B8TbGFmX.js";import"./speech-C8q1Jhq5.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DnJAGVkR.js";import"./index-CN5KxxXc.js";import"./index-A-Fb6bac.js";import"./SignIn-BUl8v1UT.js";import"./GoogleIcon-CjIRGywm.js";import"./AnimatedGearIcon-D9lBQAAZ.js";import"./AnimatedClockIcon-wRO_-pp7.js";import"./TimedButton-5iQotXYi.js";import"./Loading-DdYbxF0M.js";import"./AnimatedLoaderIcon-Bx_iFYhL.js";import"./WaitingRoomIcon-C27wOMLo.js";import"./LikeFilled-inRoA_xx.js";import"./StepBackwardOutlined-CPQn2N7g.js";import"./TrophyOutlined-CuXQCB0l.js";import"./StarIcon-Q5OqBWd8.js";import"./GarbageIcon-CFaM3tzF.js";import"./RankingBoard-BuyAM4LW.js";import"./CaretUpOutlined-CVCqR719.js";import"./WritingIcon-B36OAcfA.js";import"./TheEndIcon-CJKaLBZX.js";import"./index-DlmfAuZx.js";import"./progress-C4mzhLxa.js";import"./Medal-B-pGzlJO.js";var bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM381 836H264V462h117v374zm189 0H453V462h117v374zm190 0H642V462h118v374z"}}]},name:"bank",theme:"filled"};function D(){return D=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},D.apply(this,arguments)}const wn=(n,t)=>h.createElement(f,D({},n,{ref:t,icon:bn})),In=h.forwardRef(wn);var Sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud",theme:"filled"};function W(){return W=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},W.apply(this,arguments)}const Pn=(n,t)=>h.createElement(f,W({},n,{ref:t,icon:Sn})),Cn=h.forwardRef(Pn);var On={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384z"}}]},name:"customer-service",theme:"filled"};function _(){return _=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},_.apply(this,arguments)}const Nn=(n,t)=>h.createElement(f,_({},n,{ref:t,icon:On})),Tn=h.forwardRef(Nn);var Rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M218.9 636.3l42.6 26.6c.1.1.3.2.4.3l12.7 8 .3.3a186.9 186.9 0 0094.1 25.1c44.9 0 87.2-15.7 121-43.8a256.27 256.27 0 01164.9-59.9c52.3 0 102.2 15.7 144.6 44.5l7.9 5-111.6-289V179.8h63.5c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8H264.7c-4.4 0-8 3.6-8 8v51.9c0 4.4 3.6 8 8 8h63.5v173.6L218.9 636.3zm333-203.1c22 0 39.9 17.9 39.9 39.9S573.9 513 551.9 513 512 495.1 512 473.1s17.9-39.9 39.9-39.9zM878 825.1l-29.9-77.4-85.7-53.5-.1.1c-.7-.5-1.5-1-2.2-1.5l-8.1-5-.3-.3c-29-17.5-62.3-26.8-97-26.8-44.9 0-87.2 15.7-121 43.8a256.27 256.27 0 01-164.9 59.9c-53 0-103.5-16.1-146.2-45.6l-28.9-18.1L146 825.1c-2.8 7.4-4.3 15.2-4.3 23 0 35.2 28.6 63.8 63.8 63.8h612.9c7.9 0 15.7-1.5 23-4.3a63.6 63.6 0 0036.6-82.5z"}}]},name:"experiment",theme:"filled"};function k(){return k=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},k.apply(this,arguments)}const Mn=(n,t)=>h.createElement(f,k({},n,{ref:t,icon:Rn})),An=h.forwardRef(Mn);var En={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M160 894c0 17.7 14.3 32 32 32h286V550H160v344zm386 32h286c17.7 0 32-14.3 32-32V550H546v376zm334-616H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v140h366V310h68v172h366V342c0-17.7-14.3-32-32-32zm-402-4h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70 70 31.4 70 70v70zm138 0h-70v-70c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70z"}}]},name:"gift",theme:"filled"};function G(){return G=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},G.apply(this,arguments)}const Ln=(n,t)=>h.createElement(f,G({},n,{ref:t,icon:En})),Fn=h.forwardRef(Ln);var zn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 00-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]},name:"home",theme:"filled"};function q(){return q=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},q.apply(this,arguments)}const $n=(n,t)=>h.createElement(f,q({},n,{ref:t,icon:zn})),Hn=h.forwardRef($n);var Vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.2 278.1a32 32 0 00-30.4-22.1H736V144c0-17.7-14.3-32-32-32H320c-17.7 0-32 14.3-32 32v112h-72.8a31.9 31.9 0 00-30.4 22.1L112 502v378c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V502l-72.8-223.9zM660 628c0 4.4-3.6 8-8 8H544v108c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V636H372c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h108V464c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v108h108c4.4 0 8 3.6 8 8v48zm4-372H360v-72h304v72z"}}]},name:"medicine-box",theme:"filled"};function U(){return U=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},U.apply(this,arguments)}const Bn=(n,t)=>h.createElement(f,U({},n,{ref:t,icon:Vn})),Dn=h.forwardRef(Bn);var Wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h274V736h128v176h274c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zm-72 568H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm0-568.1H214v-88h596v88z"}}]},name:"shop",theme:"filled"};function Z(){return Z=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Z.apply(this,arguments)}const _n=(n,t)=>h.createElement(f,Z({},n,{ref:t,icon:Wn})),kn=h.forwardRef(_n);var Gn={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 192a32 32 0 0132 32v160h174.81a32 32 0 0126.68 14.33l113.19 170.84a32 32 0 015.32 17.68V672a32 32 0 01-32 32h-96c0 70.7-57.3 128-128 128s-128-57.3-128-128H384c0 70.7-57.3 128-128 128s-128-57.3-128-128H96a32 32 0 01-32-32V224a32 32 0 0132-32zM256 640a64 64 0 000 128h1.06A64 64 0 00256 640m448 0a64 64 0 000 128h1.06A64 64 0 00704 640m93.63-192H640v145.12A127.43 127.43 0 01704 576c47.38 0 88.75 25.74 110.88 64H896v-43.52zM500 448H332a12 12 0 00-12 12v40a12 12 0 0012 12h168a12 12 0 0012-12v-40a12 12 0 00-12-12M308 320H204a12 12 0 00-12 12v40a12 12 0 0012 12h104a12 12 0 0012-12v-40a12 12 0 00-12-12"}}]},name:"truck",theme:"filled"};function J(){return J=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},J.apply(this,arguments)}const qn=(n,t)=>h.createElement(f,J({},n,{ref:t,icon:Gn})),Un=h.forwardRef(qn),S={PLANNING:"PLANNING",PLACING:"PLACING",RESOLUTION:"RESOLUTION"},ve={SUBMIT_PLANNING:"SUBMIT_PLANNING",SUBMIT_PLACEMENTS:"SUBMIT_PLACEMENTS"},Zn=8;function Jn(n){const{translate:t}=le(),r=ue({actionName:"submit-planning",onSuccess:()=>n(2),onError:()=>n(0),successMessage:t("Planejamento submetido com sucesso","Planning submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar seu planejamento","Oops, the application found an error while trying to submit your planning")});return s=>{r({action:ve.SUBMIT_PLANNING,...s})}}function Xn(n){const{translate:t}=le(),r=ue({actionName:"submit-placing",onSuccess:()=>n(2),onError:()=>n(0),successMessage:t("Construção submetida com sucesso","Construction submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar sua construção","Oops, the application found an error while trying to submit your construction")});return s=>{r({action:ve.SUBMIT_PLACEMENTS,...s})}}function Kn(){return e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Fazemos parte do comitê de planejamento urbano da cidade e somos responsáveis por decidir onde novos prédios e estabelecimentos serão construídos. Em cada rodada, um jogador assumirá o papel de engenheiro-chefe, encarregado de planejar as melhores localizações para as novas construções."}),en:e.jsx(e.Fragment,{children:"We are part of the city's urban planning committee and are responsible for deciding where new buildings and establishments will be built. In each round, a player will take on the role of lead engineer, responsible for planning the best locations for new constructions"})})}function ye(n,t){const r=de.shuffle(Array.from({length:n},(s,o)=>Ne[o]));return t.reduce((s,o,a)=>(s[o]=r[a],s),{})}const be=n=>A(n+2,{maxWidth:300,gap:16}),we=n=>{const[t,r]=h.useState({}),s=a=>{r(i=>{const l={...i},d=new Set(Object.values(l));for(const[j,u]of Object.entries(a))if(d.has(u)){const m=Object.keys(l).find(p=>l[p]===u);m&&delete l[m]}return{...l,...a}})},o=Object.keys(t).length===n.length&&new Set(Object.values(t)).size===n.length;return{playerSelections:t,updatePlayerSelections:s,setPlayerSelections:r,isComplete:o}};function R({children:n}){return e.jsx(ge,{icon:e.jsx(pe,{}),children:n})}function P({children:n}){return e.jsx(ge,{icon:e.jsx(v,{}),children:n})}const M=n=>({A:"green",B:"red",C:"yellow",D:"purple"})[n]??"gray";function Ie({maxWidth:n,maxHeight:t,grid:r,cellComponent:s,className:o,contentClassName:a,contentStyle:i={},cellProps:l,transformWrapperProps:d,hideControls:j=!1,additionalContent:u}){const m=s,{initialScale:p=1,minScale:g=.25,maxScale:x=4,wheel:w={step:.5},centerOnInit:$=!0,centerZoomedOut:Ce=!0,...Oe}=d??{};return e.jsx("div",{className:y("grid-map-container"),children:e.jsx(rn,{initialScale:p,minScale:g,maxScale:x,wheel:w,centerOnInit:$,centerZoomedOut:Ce,...Oe,children:e.jsxs(h.Fragment,{children:[!j&&e.jsx(ce,{position:"top"}),u,e.jsx(sn,{wrapperClass:y("grid-map-wrapper",o),wrapperStyle:{maxWidth:n,maxHeight:t},contentClass:y("grid-map",a),contentStyle:{display:"grid",gridTemplateColumns:`repeat(${r.width}, 1fr)`,gridTemplateRows:`repeat(${r.height}, 1fr)`,...i},children:r.cells.map(te=>e.jsx(m,{cell:te,grid:r,cellProps:l},te.id))}),!j&&e.jsx(ce,{position:"bottom"})]})})})}function ce({position:n}){const{zoomIn:t,zoomOut:r,resetTransform:s,centerView:o}=fe();return e.jsxs(Te.Compact,{size:"small",className:y("grid-map-controls",`grid-map-controls--${n}`),children:[e.jsx(H,{title:"Zoom In",placement:n,children:e.jsx(N,{onClick:()=>t(),children:e.jsx(Re,{})})}),e.jsx(H,{title:"Zoom Out",placement:n,children:e.jsx(N,{onClick:()=>r(),children:e.jsx(Me,{})})}),e.jsx(H,{title:"Reset",placement:n,children:e.jsx(N,{onClick:()=>{s(),setTimeout(()=>{o()},200)},children:e.jsx(on,{})})})]})}function O({locationId:n,cityLocationsDict:t,width:r,className:s,fontSize:o}){const a=t?.[n];return e.jsx("div",{className:y("city-site city-site--constructed",s),style:{width:r,height:r,backgroundImage:`url('${Ae.IN_GAME}city-image.jpg')`},children:e.jsxs("span",{children:[e.jsx("div",{className:"city-site-category",children:Qn(a.category)}),e.jsx(Ee.Text,{className:y("city-site-name",`city-site-name--${o}`),children:e.jsx(Le,{children:a.name})})]})})}const Qn=n=>{switch(n){case"Accommodation":return e.jsx(Fn,{});case"Government":return e.jsx(In,{});case"Commercial":return e.jsx(kn,{});case"Cultural":return e.jsx(Xe,{});case"Education":return e.jsx(Je,{});case"Entertainment":return e.jsx(Tn,{});case"Industrial":return e.jsx(An,{});case"Infrastructure":return e.jsx(Dn,{});case"Natural":return e.jsx(Cn,{});case"Residential":return e.jsx(Hn,{});case"Transportation":return e.jsx(Un,{});case"Special":return e.jsx(cn,{});default:return e.jsx(an,{})}};function Se({cell:n,cellProps:t}){const{cityLocationsDict:r={},mapEvaluations:s={},dragAndDropEnabled:o=!1}=t??{},a={width:t?.cellWidth,height:t?.cellWidth},i=h.useMemo(()=>de.invert(s),[s]);if(!n.data)return e.jsx("div",{style:a,className:"city-site city-site--unavailable",children:e.jsx("span",{style:{opacity:0},children:"."})});if(n.data?.locationId)return e.jsx("div",{style:a,id:`cell-${n.id}`,children:e.jsx(O,{locationId:n.data.locationId,cityLocationsDict:r,width:Number(a.width??75)})});if(n.data?.coneId){const l=n.data.coneId,d=M(l),j=i[l];return o?e.jsx(nn,{id:n.data.coneId,options:{withTransition:!0},className:"city-site--droppable-area",children:e.jsxs("div",{style:a,className:"city-site",id:`cell-${n.id}`,children:[j&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"city-site--temp-construction-cone",children:e.jsx(v,{color:d,width:32})}),e.jsx(O,{locationId:j,cityLocationsDict:r,width:Number(a.width??75),className:y("city-site--temp-construction",`city-site--temp-construction-${n.data?.coneId}`)})]}),e.jsxs("div",{className:"city-site-available",children:[e.jsx(v,{color:d,width:64}),e.jsx(re,{color:d,children:n.data.coneId??"U"})]})]})}):e.jsxs("div",{style:a,className:"city-site",id:`cell-${n.id}`,children:[j&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"city-site--temp-construction-cone",children:e.jsx(v,{color:d,width:32})}),e.jsx(O,{locationId:j,cityLocationsDict:r,width:Number(a.width??75),className:y("city-site--temp-construction",`city-site--temp-construction-${n.data?.coneId}`)})]}),e.jsxs("div",{className:"city-site-available",children:[e.jsx(v,{color:d,width:64}),e.jsx(re,{color:d,children:n.data.coneId??"U"})]})]})}return e.jsx("div",{style:a,id:`cell-${n.id}`,className:"city-site city-site--unavailable",children:e.jsx("span",{style:{opacity:0},children:"."})})}function z({city:n,cityLocationsDict:t,mapEvaluations:r,dragAndDropEnabled:s}){const o=he(),a=be(n.width),i=Math.min(o.width,o.height)*.85;return e.jsx(Ie,{maxWidth:i,maxHeight:i,grid:n,transformWrapperProps:{initialScale:.5},cellComponent:Se,cellProps:{cellWidth:a,cityLocationsDict:t,mapEvaluations:r,dragAndDropEnabled:s}})}function Pe({city:n,cityLocationsDict:t,availableProjectsIds:r,constructionWidth:s,playerSelections:o,updatePlayerSelections:a,title:i,children:l}){const d=Ke(Qe(Ye,{activationConstraint:{distance:8}})),j=h.useCallback(u=>{const{active:m,over:p}=u;if(p&&m.id!==p.id){const g=String(m.id),x=String(p.id);a({[g]:x})}},[a]);return e.jsx(en,{sensors:d,onDragEnd:j,children:e.jsxs("div",{className:"city-map-actions-container",children:[e.jsx(z,{city:n,cityLocationsDict:t,mapEvaluations:o,dragAndDropEnabled:!0}),e.jsxs(C,{className:"contained",vertical:!0,children:[e.jsx(Fe,{level:5,size:"xx-small",icon:e.jsx(pe,{}),children:i}),e.jsx(C,{justify:"center",vertical:!0,className:"my-2",gap:6,children:l}),e.jsx(C,{justify:"center",className:"mt-2",gap:6,vertical:!0,children:r.map(u=>{const m=o[u],p=M(m);return e.jsxs(C,{vertical:!0,align:"center",className:"u-location-card-draggable-container",children:[!!m&&e.jsx("span",{className:"u-location-card-selected-cone",children:e.jsx(v,{color:p,width:32})}),e.jsx(tn,{id:u,className:"u-location-card-draggable",options:{dragOpacity:.8,dragScale:.85,dragRotate:-6,withTransition:!0},children:e.jsx(O,{locationId:u,cityLocationsDict:t,width:s})})]},u)})})]})]})})}function Yn({players:n,announcement:t,gameOrder:r,architectId:s,availableProjectsIds:o,city:a,cityLocationsDict:i,placements:l,onSubmitPlanning:d}){const j=A(l+5,{maxWidth:128}),{playerSelections:u,setPlayerSelections:m,updatePlayerSelections:p,isComplete:g}=we(o);je();const x=()=>{m(ye(l,o))};return e.jsxs(L,{fullWidth:!0,announcement:t,children:[e.jsx(E,{size:"small",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Decida onde as ",o.length," novos projetos devem ser construídos"]}),en:e.jsxs(e.Fragment,{children:["Decide where the ",o.length," new projects should be built"]})})}),e.jsx(F,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["No mapa, existem ",e.jsxs(P,{children:[l," cones"]})," representando onde as terrenos onde os projetos podem ser feitos.",e.jsx("br",{}),"À direita, você tem os"," ",e.jsxs(R,{children:[o.length," projetos"]}),", em segredo, decida qual projeto vai para qual cone.",e.jsx("br",{}),"Arraste o projeto para o cone desejado. Para remove um projeto de um cone, baste clicar nele."]}),en:e.jsxs(e.Fragment,{children:["On the map, there are ",e.jsxs(P,{children:[l," cones"]})," representing the land where the projects can be built.",e.jsx("br",{}),"On the right of the screen, you have"," ",e.jsxs(R,{children:[o.length," projects"]}),", in secret, decide which project goes to which cone.",e.jsx("br",{})," Drag the project to the desired cone. To remove a project from a cone, just click on it."]})})}),e.jsxs(Pe,{city:a,cityLocationsDict:i,availableProjectsIds:o,constructionWidth:j,playerSelections:u,updatePlayerSelections:p,title:e.jsx(c,{pt:"Novos Projetos",en:"New Projects"}),children:[e.jsx(me,{type:"primary",size:"large",disabled:!g,onClick:()=>d({planning:u}),children:e.jsx(c,{pt:"Confirmar",en:"Confirm"})}),e.jsx(xe,{size:"small",onClick:x,children:"Mock"})]}),e.jsx(ne,{players:n,activePlayerId:s,order:r})]})}function et({announcement:n,players:t,gameOrder:r,architect:s,city:o,cityLocationsDict:a,placements:i}){return e.jsxs(L,{fullWidth:!0,announcement:n,children:[e.jsx(E,{size:"small",wait:!0,children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:[e.jsx(b,{player:s})," está planejando a cidade."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(b,{player:s})," is planning the city."]})})}),e.jsx(F,{type:"wait",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["No mapa, existem ",e.jsxs(P,{children:[i," cones"]})," representando onde as terrenos onde projetos podem ser construídos.",e.jsx("br",{}),"Aguarde enquanto o engenheiro chefe planeja a cidade."]}),en:e.jsxs(e.Fragment,{children:["On the map, there are ",e.jsxs(P,{children:[i," cones"]})," representing the land where projects can be built.",e.jsx("br",{}),"Wait while the lead engineer plans the city."]})})}),e.jsx(z,{city:o,cityLocationsDict:a}),e.jsx(ne,{players:t,activePlayerId:s.id,order:r})]})}function nt({state:n,players:t}){const{step:r,goToNextStep:s,setStep:o}=X(),[a,i]=Q("architectId",n,t),l=Jn(o),d=e.jsx(Y,{icon:e.jsx(_e,{}),title:e.jsx(c,{pt:"Planejamento",en:"Planning"}),currentRound:n?.round?.current,type:"overlay",children:e.jsxs(T,{children:[e.jsx(Kn,{}),e.jsx("br",{}),e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Para essa rodada,"," ",e.jsx(b,{player:a,addressUser:!0})," ","é o engenheiro chefe."]}),en:e.jsxs(e.Fragment,{children:["In this round,"," ",e.jsx(b,{player:a,addressUser:!0})," ","is the lead engineer."]})})]})});return e.jsx(K,{phase:n?.phase,allowedPhase:S.PLANNING,children:e.jsxs(ee,{step:r,players:t,children:[e.jsx(Ue,{round:n.round,onPressButton:s,time:3,children:e.jsx(T,{contained:!0,children:e.jsx(c,{pt:"Somos arquitetos e urbanistas, e estamos planejando a cidade!",en:"We are architects and urban planners, and we are planning a city!"})})}),e.jsxs(Ze,{condition:i,children:[e.jsx(Yn,{announcement:d,players:t,architectId:n.architectId,gameOrder:n.gameOrder,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:Object.keys(n.coneCellIds).length,availableProjectsIds:n.availableProjectsIds,onSubmitPlanning:l}),e.jsx(et,{announcement:d,players:t,gameOrder:n.gameOrder,architect:a,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:Object.keys(n.coneCellIds).length})]})]})})}function tt({players:n,announcement:t,gameOrder:r,availableProjectsIds:s,isTheArchitect:o,architect:a,city:i,cityLocationsDict:l,placements:d,planning:j,onSubmitConstruction:u}){const m=A(d+5,{maxWidth:128}),{playerSelections:p,setPlayerSelections:g,updatePlayerSelections:x,isComplete:w}=we(s),$=()=>{g(ye(d,s))};return je(),e.jsxs(L,{fullWidth:!0,announcement:t,children:[e.jsx(E,{size:"small",wait:o,children:o?e.jsx(c,{en:e.jsx(e.Fragment,{children:"Wait while the players try to match where each project should go with your planning."}),pt:e.jsx(e.Fragment,{children:"Aguarde enquanto os jogadores tentam fazer cada projeto deve ir de acordo com seu planejamento."})}):e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Decida onde cada projeto deve ir"}),en:e.jsx(e.Fragment,{children:"Decide where each project should go"})})}),e.jsx(F,{type:o?"wait":"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["No mapa, existem ",e.jsxs(P,{children:[d," cones"]})," representando onde as terrenos onde os projetos podem ser feitos. ",e.jsx("br",{}),"O objetivo é fazer as construções de acordo com o que",e.jsx(b,{player:a})," planejou."]}),en:e.jsxs(e.Fragment,{children:["On the map, there are ",e.jsxs(P,{children:[d," cones"]})," representing the land where the projects can be built. ",e.jsx("br",{}),"The goal is to make the constructions according to what",e.jsx(b,{player:a})," planned."]})})}),e.jsx(se,{condition:o,children:e.jsx(z,{city:i,cityLocationsDict:l,mapEvaluations:j})}),e.jsx(se,{condition:!o,children:e.jsxs(Pe,{city:i,cityLocationsDict:l,availableProjectsIds:s,constructionWidth:m,playerSelections:p,updatePlayerSelections:x,title:e.jsx(c,{pt:"Projetos",en:"Projects"}),children:[e.jsx(me,{type:"primary",size:"large",disabled:!w,onClick:()=>u({evaluations:p}),children:e.jsx(c,{pt:"Confirmar",en:"Confirm"})}),e.jsx(xe,{size:"small",onClick:$,children:"Mock"})]})}),e.jsx(ne,{players:n,activePlayerId:a.id,order:r})]})}function rt({state:n,players:t}){const{step:r,setStep:s}=X(),[o,a]=Q("architectId",n,t),i=Xn(s),l=e.jsx(Y,{icon:e.jsx(ke,{}),title:e.jsx(c,{pt:"Construção",en:"Construction"}),currentRound:n?.round?.current,type:"overlay",children:e.jsx(T,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Agora, é hora de colocar as construções de acordo com o planejamento do engenheiro chefe."}),en:e.jsx(e.Fragment,{children:"Now, it's time to place the buildings according to the lead engineer's planning."})})})});return e.jsx(K,{phase:n?.phase,allowedPhase:S.PLACING,children:e.jsx(ee,{step:r,players:t,children:e.jsx(tt,{announcement:l,players:t,architect:o,gameOrder:n.gameOrder,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:Object.keys(n.coneCellIds).length,availableProjectsIds:n.availableProjectsIds,onSubmitConstruction:i,planning:n.planning??{},isTheArchitect:a})})})}function st({city:n,cityLocationsDict:t,mapEvaluations:r,height:s,width:o,focusedCellId:a}){const i=he(),l=be(n.width);return e.jsx(Ie,{maxWidth:Math.min(s,i.width/2),maxHeight:Math.min(o,i.height/2),grid:n,cellComponent:Se,cellProps:{cellWidth:l,cityLocationsDict:t,mapEvaluations:r},additionalContent:e.jsx(ot,{focusedCellId:a})})}function ot({focusedCellId:n}){const{zoomToElement:t}=fe();return h.useEffect(()=>{n&&t(`cell-${n}`,1.1)},[n]),null}function at({architect:n,city:t,cityLocationsDict:r,placements:s,gallery:o,slideShowConfig:a,players:i}){qe();const[l,{width:d,height:j}]=ze(),u=A(s+5,{maxWidth:256}),m=o[a.slideIndex],p=M(m.coneId);return e.jsxs(L,{fullWidth:!0,children:[e.jsx(E,{size:"small",children:e.jsx(c,{pt:"Construções",en:"Constructions"})}),e.jsxs(un,{config:a,barColor:p,leftClassName:"pu-gallery__map",rightClassName:"pu-gallery__info",nextButtonProps:{children:e.jsx(c,{pt:"Ver Resultado",en:"See Results"})},children:[e.jsx("div",{style:{height:"100%"},ref:l,children:e.jsx(st,{city:t,cityLocationsDict:r,width:Math.max(d,200),height:Math.max(j,200),focusedCellId:m.correctCellId})}),e.jsxs("div",{children:[e.jsxs(B,{children:[e.jsx(c,{pt:"Projeto para o engenheiro chefe",en:"Project for the lead engineer"}),e.jsx(b,{player:n})]}),e.jsxs(C,{gap:12,align:"center",children:[e.jsx(O,{locationId:m.locationId,cityLocationsDict:r,width:u,fontSize:"small"}),e.jsx(V,{icon:e.jsx(dn,{}),size:48}),e.jsx(v,{color:p,width:u/2})]}),m.correctPlayersIds.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsx(V,{icon:e.jsx(hn,{}),size:"small"})," ",e.jsx(c,{pt:"Pedreiros Corretos",en:"Correct Builders"})]}),e.jsxs(ae,{winner:!0,extra:e.jsx(oe,{quantity:2,hideText:!0,keyPrefix:"correct"}),children:[e.jsx(c,{pt:"A gente sabe o que tá fazendo!",en:"We know what we're doing!"})," "]}),e.jsx(ie,{players:i,playersIds:m.correctPlayersIds})]}),Object.keys(m.playersSay).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{style:{marginTop:"1em"},children:[e.jsx(V,{icon:e.jsx(mn,{}),size:"small"})," ",e.jsx(c,{pt:"Decisão Erradas dos Pedreiros",en:"Builders' Wrong Decisions"})]}),Object.entries(m.playersSay).map(([g,x])=>{const w=M(g);return e.jsxs("div",{className:"mb-2",children:[e.jsxs(ae,{color:w,extra:x.length>1&&e.jsx(oe,{quantity:x.length-1,hideText:!0,keyPrefix:"bonus"}),children:[e.jsx(c,{pt:"Prefiro construir no local",en:"I prefer building in the site"}),":"," ",e.jsx(v,{color:w,width:16})]}),e.jsx(ie,{players:i,playersIds:x})]},g)})]}),m.architectPoints===0&&e.jsx(pn,{children:e.jsx(c,{pt:"O prefeito apelou e vai colocar essa construção num local aleatório.",en:"The mayor overruled and will place this construction in a random location."})})]})]})]})}function it({players:n,ranking:t,goToPreviousStep:r,round:s,gallery:o}){const a=h.useMemo(()=>o.filter(i=>i.correctPlayersIds.length===0).length,[o]);return e.jsxs(jn,{players:n,ranking:t,gainedPointsDescriptions:[e.jsx(c,{pt:"Acertou o planejamento do arquiteto",en:"Match the architect's plan"},"1"),e.jsx(c,{pt:"Pontos do Arquiteto para cada jogador que acertou o planejamento",en:"Architect points for each player who matched the plan"},"2"),e.jsx(c,{pt:"Pontos por dar match com outros jogadores no cone errado",en:"Points for matching with other players on the wrong cone"},"3")],children:[e.jsx($e,{children:e.jsx(N,{onClick:r,children:e.jsx(c,{pt:"Ver resultado novamente",en:"See results again"})})}),a>0&&e.jsx(F,{type:"event",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["O prefeito não gosta quando seus funcionários não sabem o que estão fazendo!"," ",e.jsxs(R,{children:[a," construções"]})," não tiveram um consenso com o engenheiro-chefe, então o prefeito vai colocá-las em lugares aleatórios da cidade para a próxima rodada."]}),en:e.jsxs(e.Fragment,{children:["The mayor doesn't like it when his employees don't know what they're doing!"," ",e.jsxs(R,{children:[a," constructions"]})," had no consensus with the lead engineer, so the mayor will place them in random locations in the city for the next round."]})})}),e.jsx(Ve,{round:s})]})}function ct({state:n,players:t}){const{step:r,goToNextStep:s,goToPreviousStep:o}=X(0),[a]=Q("architectId",n,t),i=ln({length:n.gallery.length,slideDuration:Zn,onExpire:s}),l=()=>{i.reset(),o()};return e.jsx(K,{phase:n?.phase,allowedPhase:S.RESOLUTION,children:e.jsxs(ee,{step:r,players:t,children:[e.jsx(Y,{icon:e.jsx(Ge,{}),title:e.jsx(c,{pt:"Resultado",en:"Results"}),currentRound:n?.round?.current,type:"block",unskippable:!0,duration:[10,5,3][n.round.current-1]??3,onClose:s,children:e.jsx(T,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Vamos ver se você, pedreiro, pensou como o engenheiro chefe.",e.jsx("br",{}),"Você ganha ",e.jsx(I,{children:"3 pontos"})," se acertar o planejamento!",e.jsx("br",{}),"O engenheiro chefe ganha ",e.jsx(I,{children:"1 ponto"})," para cada jogador que acertar!",e.jsx("br",{}),"Quem errar, ganha ",e.jsx(I,{children:"1 ponto"})," para cada jogador que pensou igual!"]}),en:e.jsxs(e.Fragment,{children:["Let's see if you, builder, thought like the lead engineer.",e.jsx("br",{})," You earn ",e.jsx(I,{children:"3 points"})," if you match the plan!",e.jsx("br",{}),"The lead engineer earns ",e.jsx(I,{children:"1 point"})," for each player who matches!",e.jsx("br",{}),"Those who miss earn ",e.jsx(I,{children:"1 point"})," for each player who thought the same!"]})})})}),e.jsx(at,{architect:a,city:n.city,cityLocationsDict:n.cityLocationsDict,gallery:n.gallery,slideShowConfig:i,placements:Object.keys(n.coneCellIds).length,players:t}),e.jsx(it,{players:t,round:n.round,ranking:n.ranking,goToPreviousStep:l,gallery:n.gallery})]})})}function lt({state:n,players:t}){return e.jsxs(gn,{state:n,players:t,announcementIcon:e.jsx(xn,{}),children:[e.jsx(fn,{achievements:n.achievements,players:t,reference:yn}),e.jsx(vn,{title:e.jsx(c,{pt:"Cidade Inaugurada",en:"Final City"}),children:n.city&&n.cityLocationsDict&&e.jsx(z,{city:n.city,cityLocationsDict:n.cityLocationsDict})})]})}function dt(n){switch(n.phase){case S.PLANNING:return nt;case S.PLACING:return rt;case S.RESOLUTION:return ct;case We.DEFAULT.GAME_OVER:return lt;default:return De}}function Nr(){return e.jsx(Be,{gameCollection:He.PLANEJAMENTO_URBANO,getActiveComponent:dt})}export{Nr as default};
