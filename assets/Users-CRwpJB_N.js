import{z as A,J as O,K as P,r as d,M as _,j as e,q as u,v as q,N as r,x as n,O as m,B as C,U as w,Q as I,V as M,W as R,X as B,Y as L,Z as Q}from"./index-eDOzuYHG.js";import{u as F}from"./useMutation-C8OIFrNd.js";/* empty css           */import{S as g}from"./index-Dn2fiPjw.js";import"./Overflow-COE_D2eD.js";import"./PurePanel-oDgyTdXI.js";const o={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function G(){A("Users - Tarde Divertida");const{message:j,notification:y}=O.useApp(),S=P(),[i,U]=d.useState(o),[t,f]=d.useState(o),p=_({queryKey:["users"],queryFn:async()=>{const s=await M(R(L(Q,"users"),B("isGuest","!=",!0))),a=[];return s.forEach(D=>{a.push(D.data())}),a}}),h=F({mutationKey:["users"],mutationFn:async s=>{w.run({action:I.UPDATE_USER_DB,...s})},onSuccess:()=>{j.success("User updated"),S.invalidateQueries({queryKey:["users"]})},onError:s=>{y.error({message:"Error",description:s.message})}}),c=p.data??[],v=s=>{U(c.find(a=>a.id===s)??o)},E=s=>{f(c.find(a=>a.id===s)??o)},x=c.map(s=>e.jsxs(g.Option,{value:s.id,children:[e.jsx("strong",{children:s?.names?.[0]}),": ",s.id]},s.id)),N=e.jsx(g,{onChange:v,style:{minWidth:300},children:x}),T=e.jsx(g,{onChange:E,style:{minWidth:300},children:x}),l=d.useMemo(()=>u.merge(u.cloneDeep(i??{}),u.cloneDeep(t??{})),[i,t]);return e.jsxs(q,{children:[e.jsx(r.Title,{children:"Users"}),p.isLoading&&e.jsx(r.Paragraph,{children:"Loading..."}),e.jsxs(n,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(n,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Origin"}),e.jsx(n,{className:"margin",children:N}),e.jsx(r.Paragraph,{children:i?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(i??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(n,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Destination"}),e.jsx(n,{className:"margin",children:T}),e.jsx(r.Paragraph,{children:t?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(n,{direction:"vertical",children:[e.jsx(r.Title,{level:2,children:"Merge"}),e.jsx(r.Paragraph,{children:l?.names?.join(", ")??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(l??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(C,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(l),disabled:!l?.id,children:['Merge Users "',i.id,'" into "',t.id,'"']})]})]})}export{G as default};
