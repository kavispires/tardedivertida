import{r as h,j as e,aI as f,dM as y,aL as I,v as F,T as a,dN as S,q as C,aK as m,B as c,I as b,dO as s,f as j,dP as v,J as g,z as E,dQ as P,i as q}from"./index-D33nHBsB.js";import{u as x}from"./useMutation-B9GmMYhP.js";import{G as V}from"./GoogleIcon-k0fi5Yg2.js";function W({onSuccess:i}){const[r,n]=h.useState("google");return e.jsxs("div",{className:"sign-in",children:[e.jsx("div",{className:"sign-in__logo",children:e.jsx(f,{src:y,preview:!1})}),e.jsx(I,{children:e.jsx(F,{checkedChildren:e.jsx(a,{pt:"E-mail e senha",en:"Email and Password"}),unCheckedChildren:"Google",onChange:t=>n(t?"email":"google")})}),r==="google"?e.jsx(N,{onSuccess:i}):e.jsx(_,{onSuccess:i})]})}function N({onSuccess:i,...r}){const{isPending:n,mutate:t,isError:o}=x({mutationFn:async()=>await S(),onSuccess:i}),l=()=>{t()};return e.jsx(C,{className:"div-container",direction:"vertical",align:"center",classNames:{item:"full-width"},children:e.jsxs(e.Fragment,{children:[o&&e.jsx(m,{description:e.jsx(a,{pt:"Algo deu errado, tente novamente",en:"Something went wrong. Please try again"}),type:"error",showIcon:!0,className:"sign-in__error-alert"}),e.jsx(c,{type:"primary",size:"large",onClick:l,loading:n,block:!0,icon:e.jsx(b,{icon:e.jsx(V,{}),size:"small"}),...r,children:e.jsx(a,{pt:"Entrar com Google",en:"Sign in with Google"})})]})})}function _({onSuccess:i}){const[r]=s.useForm(),{translate:n}=j(),[t,o]=h.useState(!1),{isPending:l,mutate:d,isError:u}=x({mutationFn:async()=>await v(r.getFieldValue("username"),r.getFieldValue("password")),onSuccess:i}),p=()=>{d()};return e.jsxs(e.Fragment,{children:[e.jsxs(s,{name:"login",form:r,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},onFinish:p,autoComplete:"off",children:[e.jsx(s.Item,{label:e.jsx(a,{pt:"E-mail",en:"E-mail"}),name:"username",rules:[{required:!0,message:n("e-mail é um campo obrigatório","e-mail is required")}],children:e.jsx(g,{})}),e.jsx(s.Item,{label:e.jsx(a,{pt:"Senha",en:"Password"}),name:"password",rules:[{required:!0,message:n("e-mail é um campo obrigatório","e-mail is required")}],help:n("Mínimo 6 caracteres","Minimum of 6 characters"),children:e.jsx(g.Password,{})}),u&&e.jsx(s.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(m,{description:e.jsx(a,{pt:"Algo deu errado, tente novamente",en:"Something went wrong. Please try again"}),type:"error",showIcon:!0,className:"sign-in__error-alert"})}),e.jsxs(s.Item,{wrapperCol:{offset:8,span:16},children:[e.jsx(c,{type:"primary",htmlType:"submit",loading:l,children:e.jsx(a,{pt:"Entrar",en:"Submit"})}),e.jsx(c,{type:"link",onClick:()=>o(w=>!w),children:e.jsx(a,{pt:"Esqueci minha senha",en:"Forgot my password"})})]})]}),t&&e.jsx(m,{type:"info",message:e.jsx(A,{email:r.getFieldValue("username"),onSuccess:()=>o(!1)})})]})}function A({email:i,onSuccess:r}){const{message:n}=E.useApp(),[t]=s.useForm(),{translate:o}=j(),{isPending:l,mutate:d,isError:u}=x({mutationFn:async()=>await P(t.getFieldValue("username")),onSuccess:()=>{r(),n.success(o("Verifique seu e-mail enviado para redefinir a sua senha","Verify your email to reset your password"))}}),p=()=>{d()};return e.jsxs(s,{name:"forgot-password",form:t,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{username:i,remember:!0},onFinish:p,autoComplete:"off",children:[e.jsx(s.Item,{children:e.jsx(q,{level:4,size:"xx-small",children:e.jsx(a,{pt:"Redefinir a senha",en:"Password Reset"})})}),e.jsx(s.Item,{label:e.jsx(a,{pt:"E-mail",en:"E-mail"}),name:"username",rules:[{required:!0,message:o("e-mail é um campo obrigatório","e-mail is required")}],children:e.jsx(g,{})}),u&&e.jsx(s.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(m,{description:e.jsx(a,{pt:"Algo deu errado, provavelmente este e-mail não existe no banco de dados da Tarde Divertida",en:"Something went wrong. Please try again"}),type:"error",showIcon:!0,className:"sign-in__error-alert"})}),e.jsx(s.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(c,{type:"primary",htmlType:"submit",loading:l,children:e.jsx(a,{pt:"Enviar",en:"Submit"})})})]})}export{W as S,N as a};
