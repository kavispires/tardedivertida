import{r as f,az as re,n as ie,f as Z,bK as ce,bF as We,bI as X,j as e,T as c,bj as Y,e as _,B as Q,l as ye,aL as T,bG as Ce,I as N,bH as ke,aM as U,D as Me,bL as dn,b0 as Ne,aY as ln,aW as mn,aX as un}from"./index-BYLqr1sy.js";import{u as Ee,S as q,a as D,m as xn,c as ae,b as ee,P as F,d as de,e as le,R as hn,k as pn,l as jn,g as vn,h as pe,i as In,j as fn}from"./StepSwitcher-BrCphB5Q.js";import{A as Ae}from"./AnonymousIcon-ChbWBFXf.js";import{C as gn}from"./CrimeSceneIcon-DFfoob-2.js";import{C as Sn,b as bn,B as Le,a as Fe}from"./CrimeTapeIcon-CxWH_3KB.js";import{E as yn}from"./EventIcon-CLfWmhOP.js";import{L as Pe}from"./LocationIcon-MP2NklGh.js";import{S as Cn}from"./SkullIcon-BNu6F_t_.js";import{D as Ve}from"./DevButton-Dwtx68k_.js";import{I as B}from"./Instruction-DLrqdJk-.js";import{R as qe}from"./RoundAnnouncement-BrQk2g6L.js";import{P as A}from"./PointsHighlight-hSPK-GXh.js";import{C as W,S as V,a as En}from"./SceneTile-DkFESVPM.js";import{R as $,a as Rn}from"./RuleInstruction-Btli7eqi.js";import{K as De}from"./KnifeIcon-CgM15zvX.js";import{M as me}from"./MetricHighlight-AxaK1rop.js";import{u as $e}from"./useMock-DJfXKqZH.js";import{L as wn}from"./LoupeIcon-Bugpys4H.js";import{T as H}from"./TextHighlight-BU2hZehU.js";import{B as On}from"./BoxBlankIcon-BmdLwn25.js";import{A as Ge}from"./Avatar-C21Ccx4-.js";import{B as He}from"./BoxCheckMarkIcon-QwEf97gl.js";import{B as ze}from"./BoxMinusIcon-a_AUWSJn.js";import{B as Ue}from"./BoxOneIcon-C6gqgycb.js";import{B as Ke}from"./BoxXIcon-7nDzPXTB.js";import{L as Ye}from"./LockIcon-3GTwv4uM.js";import{R as Tn}from"./QuestionCircleFilled-YYuInyU_.js";import{R as Nn}from"./LockFilled-0cBjPDS3.js";import{R as _n,a as Bn}from"./UserOutlined-DsPdh1P9.js";import{C as Qe}from"./Collapse-kMACDOCH.js";import{G as Wn}from"./GuessIcon-CVQcJyqj.js";import{I as kn}from"./InvestigationIcon-C2o5xtPA.js";import{D as Mn,T as An}from"./speech-0Y3SS4rg.js";import{F as Ln}from"./FloatingHand-Cg08vPsR.js";import{A as Fn}from"./AvatarCard-DBUK4OMg.js";import{R as Pn}from"./RankIcon-BvEbe9qm.js";import{P as Vn}from"./PopoverRule-BNAVhs8H.js";import{A as qn}from"./AvatarName-CAglhJ2m.js";import{F as Dn}from"./Table-DPHemkF8.js";import{R as _e}from"./TrophyOutlined-BuZqHxAy.js";import{S as $n}from"./StepRankingWrapper-XhpFRqyy.js";import{T as Gn}from"./TrophyIcon-Ddv00p5R.js";import"./GameOver-CbLJuZ8D.js";import{G as Hn}from"./GameOverWrapper-CkIrNXTg.js";import{A as zn}from"./Achievements-AkdeQN2T.js";import{a as Un}from"./achievements-CXubfGnp.js";import"./useBlurCards-Dxiqw3s9.js";import"./RulesModal-YZ1KghfU.js";import"./WritingIcon-CrJWUKfz.js";import"./DoubleRightOutlined-D2kncvj1.js";import"./PurePanel-XHG-Xfh0.js";import"./Game-DEwK5op1.js";import"./WaitingRoomIcon-DIK9PPLV.js";import"./AnimatedClockIcon-C8sKZwsP.js";import"./useMutation-BPQ5yi_x.js";import"./index-Dg7ZDC1l.js";import"./useBubbleLock-CV-NJEmN.js";import"./index-BIQtLhPB.js";import"./Overflow-DHzkguS2.js";import"./useEvent-kLbeD1Pc.js";import"./index-DX1f24Wb.js";import"./index-BR519Ack.js";import"./GameBanner-DDlUD5zm.js";import"./useDevFeatures-Zx43sa_V.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-2gGwPBWJ.js";import"./InfoCircleOutlined-Dmzo0rQ8.js";import"./index-BrJG7MT0.js";import"./SignIn-BaqBfmzq.js";import"./GoogleIcon-Zkvbb_FE.js";import"./Loading-BbQscGYc.js";import"./AnimatedLoaderIcon-Aww1iS3v.js";import"./LikeFilled-DEa959YM.js";import"./StarIcon-r42tPGnw.js";/* empty css                             */import"./ImageBlurButtonContainer-Dm7-8RSh.js";import"./ImageBlurButton-RgNj_6Iy.js";import"./ItemCard-Bvc0JjSi.js";import"./Sprite-CvvZtN0h.js";import"./WarningOutlined-CQl4Tq5T.js";import"./StarFilled-Bnub0xHC.js";import"./StarFilled-CNctUIhy.js";import"./HandOfCardsIcon-BXUhOX_e.js";import"./EllipsisOutlined-BvZWyns-.js";import"./index-DchyXN5H.js";import"./useId-Cevn1kPO.js";import"./scrollTo-BTHGSt4p.js";import"./FilterFilled-B9EqEaba.js";import"./iconUtil-tssKjSfb.js";import"./CaretDownOutlined-Dv3U9ShB.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./RankingBoard-DJOjTEtq.js";import"./ArrowRightOutlined-Ba99KRXO.js";import"./useMergedState-B0_f3esL.js";import"./progress-wXK9np9F.js";import"./TheEndIcon-BSAyuEh8.js";import"./Container-C4OuxlYZ.js";import"./Medal-BNKv9WGm.js";import"./QuestionCircleOutlined-CYNG_xoB.js";var Kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM640 812a32 32 0 1064 0 32 32 0 10-64 0zm12-64h40c4.4 0 8-3.6 8-8V628c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"exception",theme:"outlined"},Yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"},Qn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM704 536c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-square",theme:"filled"},Jn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};function ve(){return ve=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},ve.apply(this,arguments)}const Xn=(n,s)=>f.createElement(re,ve({},n,{ref:s,icon:Kn})),Zn=f.forwardRef(Xn);function Ie(){return Ie=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Ie.apply(this,arguments)}const es=(n,s)=>f.createElement(re,Ie({},n,{ref:s,icon:Yn})),ns=f.forwardRef(es);function fe(){return fe=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},fe.apply(this,arguments)}const ss=(n,s)=>f.createElement(re,fe({},n,{ref:s,icon:Qn})),je=f.forwardRef(ss);function ge(){return ge=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},ge.apply(this,arguments)}const os=(n,s)=>f.createElement(re,ge({},n,{ref:s,icon:Jn})),ts=f.forwardRef(os),z={CRIME_SELECTION:"CRIME_SELECTION",SCENE_MARKING:"SCENE_MARKING",GUESSING:"GUESSING",REVEAL:"REVEAL"},Re={SUBMIT_CRIME:"SUBMIT_CRIME",SUBMIT_MARK:"SUBMIT_MARK",SUBMIT_GUESSES:"SUBMIT_GUESSES"},C={LOCKED:"LOCKED",CORRECT:"CORRECT",ONE:"ONE",TWO:"TWO",THREE:"THREE",WRONG:"WRONG",WRONG_GROUP:"WRONG_GROUP"},Je={evidence:"ev",weapon:"wp",location:"lc",victim:"vt"},Xe=ie.invert(Je);function is(n){const{translate:s}=Z(),t=Ee({actionName:"submit-crime",onBeforeCall:()=>n(11),onError:()=>n(9),successMessage:s("Crime enviado com sucesso","Crime submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seu crime","Oops, the application failed to send your crime")});return o=>{t({action:Re.SUBMIT_CRIME,...o})}}function rs(n){const{translate:s}=Z(),t=Ee({actionName:"submit-mark",onBeforeCall:()=>n(3),onError:()=>n(2),successMessage:s("Nova informação enviadas com sucesso","New information submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar a nova informação","Oops, the application failed to send the new information")});return o=>{t({action:Re.SUBMIT_MARK,...o})}}function cs(n){const{translate:s}=Z(),t=Ee({actionName:"submit-guesses",onBeforeCall:()=>n(2),onError:()=>n(1),successMessage:s("Respostas enviadas com sucesso","Guesses submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas respostas","Oops, the application failed to send your guesses")});return o=>{t({action:Re.SUBMIT_GUESSES,...o})}}const Ze=(n,s)=>(n==null?void 0:n[s])??[],as=(n,s)=>{const t=ce(Ze(n,s));return!!["CORRECT","LOCKED"].includes(t==null?void 0:t.status)},ds=n=>!!["CORRECT","LOCKED"].includes(n==null?void 0:n.status),ls=n=>{const s={};return Object.entries(n??{}).forEach(([t,o])=>{const r=ce(o);["CORRECT","LOCKED"].includes(r.status)&&(s[t]={weaponId:r.weaponId,evidenceId:r.evidenceId,isComplete:!0})}),s},ms=n=>Xe[n.split("-")[1]],us=n=>{const s=We(n),t=s.find(d=>d==null?void 0:d.includes("wp")),o=s.find(d=>d==null?void 0:d.includes("ev")),r=s.find(d=>d==null?void 0:d.includes("lc")),a=s.find(d=>d==null?void 0:d.includes("vt")),i=[0,1,2,3,4,5];return{weaponId:t,evidenceId:o,victimId:a??"",locationId:r??"",causeOfDeathIndex:X(i),reasonForEvidenceIndex:X(i),locationIndex:X(i),victimIndex:X(i)}},xs=()=>X([0,1,2,3,4,5]),Be=(n,s,t,o,r)=>Object.values(s).reduce((a,i)=>{var d;if(i.id!==t.id){const l=((d=t.history)==null?void 0:d[i.id])??[],h=new Set,x=new Set,u=new Set,g=new Set;let p=null;for(const m of l)switch(h.add(m.groupIndex),m.status){case C.WRONG_GROUP:x.add(m.groupIndex);break;case C.WRONG:m.weaponId&&u.add(m.weaponId),m.evidenceId&&u.add(m.evidenceId),m.victimId&&u.add(m.victimId),m.locationId&&u.add(m.locationId),p=m.groupIndex;break;case C.ONE:case C.TWO:case C.THREE:p=m.groupIndex,m.weaponId&&g.add(m.weaponId),m.evidenceId&&g.add(m.evidenceId),m.victimId&&g.add(m.victimId),m.locationId&&g.add(m.locationId);break;case C.CORRECT:case C.LOCKED:return a[i.id]={weaponId:m.weaponId,evidenceId:m.evidenceId},o&&(a[i.id].victimId=m.victimId),r&&(a[i.id].locationId=m.locationId),a}let j=p;j===null&&(j=Object.keys(n).map(Number).find(m=>!x.has(m))??-1);const R=(n[j]||[]).filter(m=>!u.has(m)),I={weapon:[],evidence:[],victim:[],location:[]};for(const m of R){const O=ms(m);I[O].push(m)}for(const m of I.weapon)for(const O of I.evidence)if(o){for(const S of I.victim)for(const v of r?I.location:[""])if(!l.some(b=>b.weaponId===m&&b.evidenceId===O&&b.victimId===S&&(!r||b.locationId===v)))return a[i.id]={weaponId:m,evidenceId:O,victimId:S,locationId:r?v:void 0},a}else for(const S of r?I.location:[""])if(!l.some(y=>y.weaponId===m&&y.evidenceId===O&&(!r||y.locationId===S)))return a[i.id]={weaponId:m,evidenceId:O,locationId:r?S:void 0},a}return a},{});function ne(n){return f.useMemo(()=>{const s=Object.values(n).some(o=>o.type==="location"),t=Object.values(n).some(o=>o.type==="victim");return{isLocationGame:s,isVictimGame:t}},[n])}function hs(){return e.jsx(B,{contained:!0,children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Bem-vindo à Convenção Anual de Serial Killers!",e.jsx("br",{}),"Você e os outros serial killers decidiram fazer uma dinâmica de adivinhação.",e.jsx("br",{}),"O objetivo é todos darem dicas sobre as circunstâncias que seus últimos crimes aconteceram para ajudar os outros jogadores a descobrirem qual arma e qual objeto foram usados durante o crime.",e.jsx("br",{}),"Prontos para aterrorizar?"]}),en:e.jsxs(e.Fragment,{children:["Welcome to the Annual Serial Killers Con!",e.jsx("br",{}),"You and the other serial killers decided to break the ice and make a game out of it.",e.jsx("br",{}),"The goal is to give clues about the circunstancies your latest crime occurred so the other players can guess what weapon and evidence were used during the crime.",e.jsx("br",{}),"Ready to terrorize?"]})})})}function ps(){return e.jsx(B,{contained:!0,children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Baseado nas informações dadas pelos jogadores, tente adivinhar qual arma e objeto cada jogador usou em seu crime.",e.jsx("br",{}),"Você ganha pontos se adivinhar uma das cartas ou ambas as cartas, e você também ganha"," ",e.jsx(A,{children:"1 ponto"})," para cada uma de suas cartas que os outros adivinharem, mas essa pontuação é secreta."]}),en:e.jsxs(e.Fragment,{children:["Based on the information given by other players, try to guess the weapon and object used on their crimes.",e.jsx("br",{}),"You get points for getting one or both cards correctly, and you get"," ",e.jsx(A,{children:"1 point"})," when other players get each of your cards correctly, but these points are kept secret."]})})})}function en({round:n}){const s=n.total-n.current+1;return e.jsx(B,{contained:!0,children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(A,{children:"1 ponto"})," para cada arma ou objeto que você acertar.",e.jsx("br",{}),"Se você acertar o par de um jogador, você ganha ",e.jsxs(A,{children:[s," pontos"]}),".",e.jsx("br",{}),"Para todos os seus acertos, seus respectivos autores ganham"," ",e.jsx(A,{children:"1 ponto"}),".",e.jsx("br",{}),"Ganha o jogo o primeiro jogador que acertar tudo."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(A,{children:"1 point"})," for each weapon or evidence you get correctly.",e.jsx("br",{}),"If you get the pair for a player, you get ",e.jsxs(A,{children:[s," points"]})," ","instead.",e.jsx("br",{}),"All of your correct guesses grant ",e.jsx(A,{children:"1 extra point"})," to the authors.",e.jsx("br",{}),"Wins the game the player who get all correctly first."]})})})}function J({items:n,weaponId:s,evidenceId:t,victimId:o,locationId:r,highlight:a}){const i=Y(12,{gap:8,minWidth:50,maxWidth:200});return e.jsxs("ul",{className:"h-items-crime-selection",children:[e.jsx("li",{children:e.jsx(W,{item:n[s],cardWidth:i,className:_(a&&a!=="weapon"&&"h-items-crime-selection__faded")})}),e.jsx("li",{children:e.jsx(je,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(W,{item:n[t],cardWidth:i,className:_(a&&a!=="evidence"&&"h-items-crime-selection__faded")})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(je,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(W,{item:n[o],cardWidth:i,className:_(a&&a!=="victim"&&"h-items-crime-selection__faded")})})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(je,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(W,{item:n[r],cardWidth:i,className:_(a&&a!=="location"&&"h-items-crime-selection__faded")})})]})]})}function se({onClick:n,children:s,disabled:t=!1,...o}){return e.jsx(Q,{type:"primary",size:"large",disabled:t,onClick:n,...o,children:s??e.jsxs(e.Fragment,{children:["»» ",e.jsx(c,{pt:"Próximo",en:"Next"})," »»"]})})}function Se({children:n,type:s,iconSize:t,className:o}){return e.jsx(me,{icon:e.jsx(De,{}),type:s,iconSize:t,className:o,children:n})}function be({children:n,type:s,iconSize:t,className:o}){return e.jsx(me,{icon:e.jsx(Sn,{}),type:s,iconSize:t,className:o,children:n})}function js({children:n,type:s,iconSize:t,className:o}){return e.jsx(me,{icon:e.jsx(Pe,{}),type:s,iconSize:t,className:o,children:n})}function vs({children:n,type:s,iconSize:t,className:o}){return e.jsx(me,{icon:e.jsx(Ae,{}),type:s,iconSize:t,className:o,children:n})}function Is({announcement:n,user:s,items:t,groupedItems:o,selections:r,updateSelections:a,isLocationGame:i,isVictimGame:d,cardWidth:l}){const[h,x]=f.useState(r.weaponId??""),[u,g]=f.useState(r.evidenceId??""),[p,j]=f.useState(r.locationId??""),[E,R]=f.useState(r.victimId??""),I=o[s.itemGroupIndex],m=v=>{if(v.type==="weapon")return x(v.id);if(v.type==="evidence")return g(v.id);if(v.type==="location")return j(v.id);if(v.type==="victim")return R(v.id)},O=()=>{let v="",y="",b="",L="";We(I).forEach(M=>{t[M].type==="weapon"&&(v=M),t[M].type==="evidence"&&(y=M),t[M].type==="location"&&(b=M),t[M].type==="victim"&&(L=M)}),x(v),g(y),j(b),R(L)},S=()=>{const v=[e.jsx(Se,{children:e.jsx(c,{pt:"16 meios",en:"16 means of murder"})},"mean"),e.jsx(be,{children:e.jsx(c,{pt:"16 evidências",en:"16 pieces of evidence"})},"evidence")];return d&&v.push(e.jsx(vs,{children:e.jsx(c,{pt:"16 vítimas",en:"16 victims"})},"victim")),i&&v.push(e.jsx(js,{children:e.jsx(c,{pt:"16 locais",en:"16 locations"})},"location")),v};return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"Qual foi seu último crime?",en:"How was your last crime?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," uma carta azul que representa o meio que a morte aconteceu no seu último crime, normalmente uma arma.",e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta vermelha que representa uma evidência que estava na cena do crime.",d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta amarela que representa a vítima do crime."]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta verde que representa o local do crime."]}),e.jsx("br",{}),"O jogo contém ",S(),", mas para essa parte, você vê apenas 4 opções de cada."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," a blue card that represents the means by which the death occurred in your last crime, usually a weapon.",e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a red card that represents evidence that was at the crime scene.",d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a yellow card that represents the victim of the crime."]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a green card that represents the crime scene."]}),e.jsx("br",{}),"The game contains ",S(),", but for this part, you only see 4 options of each."]})})}),e.jsx("ul",{className:"h-items-selection",children:I.map(v=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(ye,{onClick:()=>m(t[v]),children:e.jsx(W,{item:t[v],cardWidth:l,isSelected:[h,u,E,p].includes(v)})})},v))}),e.jsxs(T,{children:[e.jsx(Q,{onClick:O,size:"large",children:e.jsx(c,{pt:"Selecionar aleatoriamente",en:"Random picks"})}),e.jsx(se,{disabled:!h||!u,onClick:()=>a({weaponId:h,evidenceId:u,locationId:p,victimId:E})})]})]})}function ue({goToStep:n}){return e.jsx(Q,{onClick:()=>n(1),size:"large",children:e.jsx(c,{pt:"Reiniciar",en:"Restart"})})}function fs({announcement:n,items:s,selections:t,updateSelections:o,causeOfDeathTile:r,goToStep:a}){const[i,d]=f.useState(),l=h=>{d(h.value)};return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"Como foi seu último crime?",en:"How was your last crime?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Baseado somente no ",e.jsx(Se,{children:"meio do crime (carta azul)"}),", selecione a causa da morte de sua vítima."]}),en:e.jsxs(e.Fragment,{children:["Based solely on the ",e.jsx(Se,{children:"mean of murder (blue card)"})," you've chosen, select your victim's cause of death."]})})}),e.jsxs(T,{children:[e.jsx(J,{items:s,weaponId:t.weaponId??"",evidenceId:t.evidenceId??"",victimId:t.victimId??"",locationId:t.locationId??"",highlight:"weapon"}),e.jsx(V,{tile:r,onSelectValue:l,index:i})]}),e.jsxs(T,{children:[e.jsx(ue,{goToStep:a}),e.jsx(se,{disabled:i===void 0,onClick:()=>o({causeOfDeathIndex:i})})]})]})}function gs({announcement:n,user:s,items:t,selections:o,updateSelections:r,locationTile:a,groupedItems:i,goToStep:d,isLocationGame:l}){const h=Y(12,{gap:8,minWidth:50,maxWidth:200}),[x,u]=f.useState(),g=i[s.itemGroupIndex],p=j=>{u(j.value)};return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"Onde foi o crime?",en:"Where was the crime?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:[l?"Baseado em sua carta do local (verde), selecione uma dica de onde o crime aconteceu.":"Baseado em qualquer uma das suas cartas (ou ambas), selecione o local onde o crime aconteceu.",e.jsx("br",{}),"Lembre-se que você está tentando ajudar os outros jogadores adivinhar o seu crime, seja inteligente!"]}),en:e.jsxs(e.Fragment,{children:[l?"Based on your location card (green), select a hint about where the crime happened.":"Based on any of your cards (or both), select the location where the crime happened.",e.jsx("br",{}),"Remember you are trying to help the players guess your crime, so be smart!"]})})}),e.jsxs(T,{children:[l?e.jsx(J,{items:t,weaponId:o.weaponId??"",evidenceId:o.evidenceId??"",victimId:o.victimId??"",locationId:o.locationId??"",highlight:"location"}):e.jsx("ul",{className:"h-items-selection",children:g.map(j=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(W,{item:t[j],cardWidth:h,isSelected:Object.values(o).includes(j)})},j))}),e.jsx(V,{tile:a,onSelectValue:p,index:x})]}),e.jsxs(T,{children:[e.jsx(ue,{goToStep:d}),e.jsx(se,{disabled:x===void 0,onClick:()=>r({locationIndex:x})})]})]})}function Ss({announcement:n,items:s,causeOfDeathTile:t,reasonForEvidenceTile:o,victimTile:r,locationTile:a,selections:i,onSubmitCrime:d,updateSelection:l,players:h}){const{translate:x}=Z();return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"Seu crime tá bom?",en:"Is your crime alright?"})}),e.jsx($,{type:"rule",children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Revise seu crime."}),en:e.jsx(e.Fragment,{children:"Recap your crime."})})}),e.jsx(J,{items:s,weaponId:i.weaponId??"",evidenceId:i.evidenceId??"",locationId:i.locationId??"",victimId:i.victimId??""}),e.jsxs("div",{className:"h-scene-tiles-list",children:[e.jsx(V,{tile:t,index:i.causeOfDeathIndex,onSelectValue:u=>l({causeOfDeathIndex:u.value})}),e.jsx(V,{tile:o,index:i.reasonForEvidenceIndex,onSelectValue:u=>l({reasonForEvidenceIndex:u.value})}),e.jsx(V,{tile:r,index:i.victimIndex,onSelectValue:u=>l({victimIndex:u.value})}),e.jsx(V,{tile:a,index:i.locationIndex,onSelectValue:u=>l({locationIndex:u.value})})]}),e.jsx(T,{align:"center",children:e.jsx(Ce,{onClick:d,size:"large",children:e.jsx(c,{pt:"Enviar",en:"Submit"})})}),e.jsx(xn,{players:h,readyText:x("Já cometi meu crime","I'm done committing my crime"),readyTextPlural:x("Já cometemos nossos crimes","We're done committing our crimes")})]})}function bs({announcement:n,items:s,selections:t,updateSelections:o,reasonForEvidenceTile:r,goToStep:a}){const[i,d]=f.useState(),l=h=>{d(h.value)};return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"O que tinha no seu último crime?",en:"What was in your last crime?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Baseado somente em seu ",e.jsx(be,{children:"objeto (carta vermelha)"}),", selecione o que o objeto significa para o crime."]}),en:e.jsxs(e.Fragment,{children:["Based solely on the ",e.jsx(be,{children:"object (red card)"})," you've chosen, select the meaning of it to the crime."]})})}),e.jsxs(T,{children:[e.jsx(J,{items:s,weaponId:t.weaponId??"",evidenceId:t.evidenceId??"",victimId:t.victimId??"",locationId:t.locationId??"",highlight:"evidence"}),e.jsx(V,{tile:r,onSelectValue:l,index:i})]}),e.jsxs(T,{children:[e.jsx(ue,{goToStep:a}),e.jsx(se,{disabled:i===void 0,onClick:()=>o({reasonForEvidenceIndex:i})})]})]})}function ys({announcement:n,user:s,items:t,selections:o,updateSelections:r,victimTile:a,groupedItems:i,goToStep:d,isVictimGame:l}){const h=Y(12,{gap:8,minWidth:50,maxWidth:200}),[x,u]=f.useState(),g=i[s.itemGroupIndex],p=j=>{u(j.value)};return e.jsxs(q,{announcement:n,children:[e.jsx(D,{children:e.jsx(c,{pt:"Quem foi a pobre alma que se foi?",en:"Who was the poor soul that taken?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:[l?"Baseado em sua carta da vítima (amarela), selecione  algo sobre quem morreu.":"Baseado em qualquer uma de suas cartas, selecione dicas sobre a vítima.",e.jsx("br",{}),"Lembre-se que você está tentando ajudar os outros jogadores adivinhar o seu crime, seja inteligente!"]}),en:e.jsxs(e.Fragment,{children:[l?"Based on your victim card (yellow), select something about who died.":"Based on any of your cards, select hints about the victim.",e.jsx("br",{}),"Remember you are trying to help the players guess your crime, so be smart!"]})})}),e.jsxs(T,{children:[l?e.jsx(J,{items:t,weaponId:o.weaponId??"",evidenceId:o.evidenceId??"",victimId:o.victimId??"",locationId:o.locationId??"",highlight:"victim"}):e.jsx("ul",{className:"h-items-selection",children:g.map(j=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(W,{item:t[j],cardWidth:h,isSelected:Object.values(o).includes(j)})},j))}),e.jsx(V,{tile:a,onSelectValue:p,index:x})]}),e.jsxs(T,{children:[e.jsx(ue,{goToStep:d}),e.jsx(se,{disabled:x===void 0,onClick:()=>r({victimIndex:x})})]})]})}function Cs({players:n,state:s}){var y;const{step:t,setStep:o,goToNextStep:r}=ae(0),a=ee(n,s),[i,d]=f.useState({}),l=is(o),h=()=>{l(i)},x=b=>{d(L=>({...L,...b})),r()},u=b=>{d(L=>({...L,...b}))},g=()=>{const b=us(s.groupedItems[a.itemGroupIndex]);d(b),l(b)},p=Y(12,{gap:8,minWidth:50,maxWidth:96}),{isLocationGame:j,isVictimGame:E}=ne(s.items),R=e.jsx(F,{icon:e.jsx(yn,{}),title:e.jsx(c,{pt:"A Convenção",en:"The Convention"}),currentRound:(y=s==null?void 0:s.round)==null?void 0:y.current,duration:30,type:"overlay",children:e.jsx(hs,{})}),I=e.jsx(F,{icon:e.jsx(Cn,{}),title:e.jsx(c,{pt:"Causa da Morte",en:"Cause of Death"}),duration:3,type:"overlay",children:e.jsx(B,{children:e.jsx(c,{pt:"Como a vítima morreu?",en:"How did the victim die?"})})}),m=e.jsx(F,{icon:e.jsx(gn,{}),title:e.jsx(c,{pt:"Evidências?",en:"Evidence?"}),duration:3,type:"overlay",children:e.jsx(B,{children:e.jsx(c,{pt:"Conte-nos sobre o objeto que você escolheu.",en:"Tell us about the object you selected."})})}),O=e.jsx(F,{icon:e.jsx(Ae,{}),title:e.jsx(c,{pt:"Sobre a Vítima",en:"About the Victim"}),duration:3,type:"overlay",children:e.jsx(B,{children:e.jsx(c,{pt:"Quem foi a vítima?",en:"Who was the victim?"})})}),S=e.jsx(F,{icon:e.jsx(Pe,{}),title:e.jsx(c,{pt:"Local do Crime",en:"Crime Location"}),duration:3,type:"overlay",children:e.jsx(B,{children:e.jsx(c,{pt:"Onde que foi?",en:"Where was it?"})})}),v=e.jsx(F,{icon:e.jsx(bn,{}),title:e.jsx(c,{pt:"Revisão",en:"Review"}),duration:3,type:"overlay"});return e.jsx(de,{phase:s==null?void 0:s.phase,allowedPhase:z.CRIME_SELECTION,children:e.jsxs(le,{step:t,players:n,waitingRoom:{content:e.jsx(J,{items:s.items,weaponId:i.weaponId??"",evidenceId:i.evidenceId??"",victimId:i.victimId??"",locationId:i.locationId??""})},children:[e.jsx(qe,{round:s==null?void 0:s.round,onPressButton:r,buttonText:" ",time:5}),e.jsxs(e.Fragment,{children:[e.jsx(Is,{user:a,groupedItems:s.groupedItems,items:s.items,selections:i,updateSelections:x,announcement:R,isLocationGame:j,isVictimGame:E,cardWidth:p}),e.jsx(Ve,{onClick:g,size:"large",children:"Random Crime"})]}),e.jsx(fs,{items:s.items,causeOfDeathTile:s.causeOfDeathTile,selections:i,updateSelections:x,goToStep:o,announcement:I}),e.jsx(bs,{items:s.items,reasonForEvidenceTile:s.reasonForEvidenceTile,selections:i,updateSelections:x,goToStep:o,announcement:m}),e.jsx(ys,{user:a,items:s.items,selections:i,updateSelections:x,victimTile:s.victimTile,groupedItems:s.groupedItems,goToStep:o,announcement:O,isVictimGame:E}),e.jsx(gs,{user:a,items:s.items,groupedItems:s.groupedItems,locationTile:s.locationTile,selections:i,updateSelections:x,goToStep:o,announcement:S,isLocationGame:j}),e.jsx(Ss,{items:s.items,causeOfDeathTile:s.causeOfDeathTile,reasonForEvidenceTile:s.reasonForEvidenceTile,victimTile:s.victimTile,locationTile:s.locationTile,selections:i,onSubmitCrime:h,updateSelection:u,players:n,announcement:v})]})})}function te({cardWidth:n,cardType:s}){const t=Je[s]??"";return e.jsx(W,{item:{id:`dmhk-${t}-000`,type:s,name:{pt:"?",en:"?"},itemId:"0"},cardWidth:n,isSelected:!1})}function P({status:n,withDescription:s=!1,className:t=""}){const o="crime-guess-status";switch(n){case C.LOCKED:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(Ye,{})}),e.jsx(H,{children:e.jsx(c,{pt:"TRAVADO",en:"LOCKED"})}),s&&e.jsx(c,{pt:"Você já tinha adivinhado esse corretamente",en:"You already guessed this one correctly"})]});case C.CORRECT:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(He,{})}),e.jsx(H,{children:e.jsx(c,{pt:"CORRETO",en:"CORRECT"})}),s&&e.jsx(c,{pt:"Você acertou arma e objeto",en:"You got the weapon and object correctly"})]});case C.ONE:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(Ue,{})}),e.jsx(H,{children:e.jsx(c,{pt:"SOMENTE UM",en:"ONE ONLY"})}),s&&e.jsx(c,{pt:"Um dos items está correto",en:"One of the items is correct"})]});case C.TWO:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(Fe,{})}),e.jsx(H,{children:e.jsx(c,{pt:"DOIS",en:"TWO"})}),s&&e.jsx(c,{pt:"Dois dos items estão corretos",en:"Two of the items are correct"})]});case C.THREE:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(Le,{})}),e.jsx(H,{children:e.jsx(c,{pt:"TRÊS",en:"THREE"})}),s&&e.jsx(c,{pt:"Três dos items estão corretos",en:"Three of the items are correct"})]});case C.WRONG:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(ze,{})}),e.jsx(H,{children:e.jsx(c,{pt:"ERRADO",en:"WRONG"})}),s&&e.jsx(c,{pt:"Você errou todas as coisas, mas está no quadrante certo",en:"You got all things wrong but you are in the right group"})]});case C.WRONG_GROUP:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(N,{icon:e.jsx(Ke,{})}),e.jsx(H,{children:e.jsx(c,{pt:"GRUPO ERRADO",en:"WRONG GROUP"})}),s&&e.jsx(c,{pt:"Você é tão burro que você escolheu items no grupo errado",en:"You're so dumb you chose items in the wrong group"})]});default:return e.jsxs("span",{className:_(o,`${o}--${n}`,t),children:[e.jsx(Tn,{}),e.jsx(c,{pt:"?",en:"?"}),");",s&&e.jsx(c,{pt:"Recebido status desconhecido",en:"Received unknown guess status"})]})}}const G=100;function xe({crime:n,player:s,scenesOrder:t,scenes:o,selectedWeaponId:r,selectedEvidenceId:a,selectedVictimId:i,selectedLocationId:d,history:l,items:h,isLocked:x,isVictimGame:u,isLocationGame:g}){const[p,j]=f.useState(-1),E=!!(r&&r)&&(u?i:!0)&&(g?d:!0),R=p>=0&&l?l[p].weaponId:r,I=p>=0&&l?l[p].evidenceId:a,m=p>=0&&l?l[p].victimId:i,O=p>=0&&l?l[p].locationId:d,S=ke(s.avatarId),v=l==null?void 0:l.length;return e.jsxs("div",{className:"h-crime",children:[e.jsxs("div",{className:"h-crime__player",style:{backgroundColor:S},children:[e.jsx("span",{className:"h-crime__player-avatar",children:e.jsx(Ge,{id:s.avatarId})}),e.jsx("span",{className:"h-crime__player-name",children:s.name})]}),e.jsx("div",{className:"h-crime__scenes",children:t.filter(y=>n.scenes[y]!==void 0).map(y=>{const b=o[y];return e.jsx(Es,{scene:b,playerIndex:n.scenes[y]},`crime-scene-${y}-by-${n.playerId}`)})}),e.jsx("div",{className:"h-crime__history",style:{borderColor:v?S:"transparent"},children:v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-crime__history-header",children:e.jsx(U,{title:e.jsx(c,{pt:"Histórico: passe o mouse nas rodadas",en:"History: hover the round numbers"}),children:e.jsx(Rn,{})})}),l==null?void 0:l.map((y,b)=>e.jsx(Q,{ghost:!0,shape:"circle",size:"small",onMouseOver:()=>j(b),onMouseLeave:()=>j(-1),children:b+1},`history-entry-${b}`))]})}),e.jsxs("div",{className:"h-crime-selections",children:[R?e.jsx(W,{item:h[R],cardWidth:G}):e.jsx(te,{cardWidth:G,cardType:"weapon"}),I?e.jsx(W,{item:h[I],cardWidth:G}):e.jsx(te,{cardWidth:G,cardType:"evidence"}),u&&(m?e.jsx(W,{item:h[m],cardWidth:G}):e.jsx(te,{cardWidth:G,cardType:"victim"})),g&&(O?e.jsx(W,{item:h[O],cardWidth:G}):e.jsx(te,{cardWidth:G,cardType:"location"})),e.jsxs("div",{className:"h-crime-selections__status",children:[p>=0&&l&&l[p]&&e.jsx(P,{status:l[p].status}),p===-1&&x&&e.jsx(P,{status:"LOCKED"}),p===-1&&e.jsx("span",{className:"crime-guess-status",children:e.jsx(N,{icon:e.jsx(On,{}),className:"invisible"})})]})]}),e.jsxs("div",{className:"h-crime__player",style:{backgroundColor:E?S:void 0},children:[x&&e.jsx(Nn,{}),!x&&E&&e.jsx(hn,{})]})]})}function Es({scene:n,playerIndex:s}){const{language:t}=Z();return e.jsxs("li",{className:_("h-crime-scene",`h-crime-scene--${n.type}`),children:[e.jsxs("div",{className:_("h-crime-scene__label",`h-crime-scene__label--${n.type}`),children:[e.jsx(Rs,{type:n.type})," ",n.title[t]]}),e.jsx("div",{className:"h-crime-scene__value",children:n.values[s][t]})]})}function Rs({type:n}){switch(n){case"cause":return e.jsx(ts,{});case"evidence":return e.jsx(ns,{});case"location":return e.jsx(Bn,{});case"victim":return e.jsx(_n,{});default:return e.jsx(Zn,{})}}function nn({items:n,weaponId:s,evidenceId:t,groupedItems:o}){const r=Y(12,{gap:8,minWidth:30,maxWidth:200});return e.jsx("ul",{className:"h-grouped-items-board",children:Object.keys(o).map(a=>e.jsx("li",{className:"reset-li",children:e.jsx("ul",{className:"h-grouped-items-board__group",children:o[a].map(i=>e.jsx("li",{className:"reset-li",children:e.jsx(W,{item:n[i],cardWidth:r,isSelected:[s,t].includes(i)})},i))})},`group-${a}`))})}function ws({user:n,items:s,groupedItems:t,onSubmitMark:o,sceneTile:r,crimes:a,scenes:i,scenesOrder:d,announcement:l,isVictimGame:h,isLocationGame:x}){const[u,g]=f.useState(),p=E=>{g(E.value)},j=a.find(E=>E.playerId===n.id);return e.jsxs(q,{announcement:l,children:[e.jsx(D,{children:e.jsx(Me,{children:r.description})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Baseado em suas cartas, selecione uma opção na nova carta de detalhes da Cena do Crime abaixo."}),en:e.jsx(e.Fragment,{children:"Based on your cards, select an option in the new Scene card below."})})}),e.jsx(B,{contained:!0,children:e.jsx(Qe,{items:[{key:"weapons-evidences",label:e.jsx(c,{pt:"Clique para ver todas as cartas",en:"Click to see all cards"}),children:e.jsx(nn,{groupedItems:t,items:s,weaponId:n.weaponId,evidenceId:n.evidenceId})}]})}),e.jsxs(T,{children:[j&&e.jsx(xe,{crime:j,scenes:i,scenesOrder:d,items:s,player:n,selectedWeaponId:n.weaponId,selectedEvidenceId:n.evidenceId,selectedVictimId:n.victimId,selectedLocationId:n.locationId,isLocationGame:x,isVictimGame:h},`crime-by-${j.playerId}`),e.jsx(V,{tile:r,onSelectValue:p,index:u})]}),e.jsx(T,{children:e.jsx(Ce,{size:"large",disabled:u===void 0,onClick:()=>{u!==void 0&&o({sceneIndex:u})},children:e.jsx(c,{pt:"Enviar",en:"Send"})})})]})}function Os({players:n,state:s}){var x;const t=ee(n,s),{step:o,setStep:r,goToNextStep:a}=ae(0),i=rs(r),{isLocationGame:d,isVictimGame:l}=ne(s.items);$e(()=>{i({sceneIndex:xs()})},[]);const h=e.jsx(F,{icon:e.jsx(wn,{}),title:e.jsx(c,{pt:"Nova pista",en:"New clue"}),currentRound:(x=s==null?void 0:s.round)==null?void 0:x.current,type:"overlay",children:e.jsxs(B,{children:[e.jsx(c,{pt:"Compartilhe mais uma pista sobre seu crime:",en:"Share one more piece of information about your crime:"}),e.jsx("br",{}),e.jsx(H,{children:e.jsx(Me,{children:s.currentScene.description})})]})});return e.jsx(de,{phase:s==null?void 0:s.phase,allowedPhase:z.SCENE_MARKING,children:e.jsxs(le,{step:o,players:n,children:[e.jsx(qe,{round:s==null?void 0:s.round,onPressButton:a,buttonText:" ",time:5}),e.jsx(ws,{user:t,groupedItems:s.groupedItems,items:s.items,onSubmitMark:i,sceneTile:s.currentScene,scenes:s.scenes,scenesOrder:s.scenesOrder,crimes:s.crimes,announcement:h,isVictimGame:l,isLocationGame:d})]})})}function sn({setActivePlayerId:n,players:s,guesses:t,user:o,history:r,children:a}){return e.jsxs("div",{className:"h-players-cards-container",children:[e.jsx("ul",{className:"h-players-cards",children:dn(s).map(i=>{var h,x;const d=o.id===i.id||!!((h=t[i.id])!=null&&h.weaponId&&((x=t[i.id])!=null&&x.evidenceId)),l=as(r,i.id);return e.jsx("li",{children:e.jsx(ye,{onClick:()=>n(i.id),hoverType:"tint",className:"h-players-cards__button",children:e.jsx(Fn,{size:"small",player:i,withName:!0,className:"h-players-cards__avatar",replacementAvatar:l&&e.jsx(N,{icon:e.jsx(Ye,{}),className:"h-players-cards__seal"})||d&&e.jsx(N,{icon:e.jsx(De,{}),className:"h-players-cards__seal"})})})},`player-card-${i.id}`)})}),a]})}const Ts=n=>{const s=Xe[n]??"";return{id:`dmhk-${n}-xxx`,type:s,name:{pt:"-",en:"-"},itemId:"0"}};function Ns({items:n,weaponId:s,evidenceId:t,victimId:o,locationId:r,groupedItems:a,onSelectItem:i,activeColor:d,isLocked:l,wrongGroups:h=[],wrongItems:x=[]}){const u=Y(12,{gap:8,minWidth:50,maxWidth:96});return e.jsx("ul",{className:"h-grouped-items-board",style:d?{backgroundColor:d}:{},children:Object.keys(a).map((g,p)=>{const j=a[g],E=h.includes(p);return e.jsx("li",{children:e.jsx("ul",{className:"h-grouped-items-board__group",style:d?{borderColor:d}:{},children:j.map(R=>e.jsx("li",{children:e.jsx(ye,{onClick:l||E?void 0:()=>i(R),hoverType:"tint",disabled:E,children:E||x.includes(R)?e.jsx(En,{id:"x",cardWidth:u}):e.jsx(W,{item:E?Ts(R.split("-")[1]):n[R],cardWidth:u,isSelected:[s,t,o,r].includes(R),activeColor:d})})},R))})},`group-${g}`)})})}function _s({user:n,groupedItems:s,items:t,players:o,scenes:r,scenesOrder:a,crimes:i,onSubmitGuesses:d,announcement:l,isVictimGame:h,isLocationGame:x}){var L,M,we;const[u,g]=f.useState({}),[p,j]=f.useState("");$e(()=>{d({guesses:Be(s,o,n,h,x)})},[]),f.useEffect(()=>{g(k=>({...k,...ls(n.history)}))},[n.history]);const E=k=>{if(p&&k){const w={...u[p]??{weaponId:void 0,evidenceId:void 0,victimId:void 0,locationId:void 0,isComplete:!1}};k.includes("wp")&&(w.weaponId=k),k.includes("ev")&&(w.evidenceId=k),h&&k.includes("vt")&&(w.victimId=k),x&&k.includes("lc")&&(w.locationId=k),g(he=>({...he,[p]:{...w,isComplete:!!(w!=null&&w.weaponId)&&!!(w!=null&&w.evidenceId)&&(h?!!(w!=null&&w.victimId):!0)&&(x?!!(w!=null&&w.locationId):!0)}}))}},{isAllComplete:R,activeCrime:I,isOwnCrime:m,isLocked:O,activeWeaponId:S,activeEvidenceId:v,activeVictimId:y,activeLocationId:b}=f.useMemo(()=>{const k=Object.keys(o).length,w=Object.values(u).length===k-1&&Object.values(u).every(K=>K.weaponId&&K.evidenceId&&(h?K.victimId:!0)&&(x?K.locationId:!0)),he=i.find(K=>K.playerId===p),Oe=p===n.id,on=(u==null?void 0:u[p])??{},oe=ce(Ze(n.history,p)),Te=[C.CORRECT,C.LOCKED].includes(oe==null?void 0:oe.status),{activeWeaponId:tn,activeEvidenceId:rn,activeVictimId:cn,activeLocationId:an}=Bs(Oe,Te,n,on,oe);return{isAllComplete:w,activeCrime:he,isOwnCrime:Oe,isLocked:Te,activeWeaponId:tn,activeEvidenceId:rn,activeVictimId:cn,activeLocationId:an}},[n,p,u,i,o,h,x]);return e.jsxs(q,{announcement:l,children:[e.jsx(D,{children:e.jsx(c,{pt:"Quais foram os crimes?",en:"What were the crimes?"})}),e.jsx($,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Selecione cada jogador abaixo, analise suas respostas sobre o crime, e selecione as cartas que compõem o crime.",e.jsx("br",{}),"As cartas sempre estarão no mesmo quadrante, mas elas não são exclusivas a um jogador e diferentes crimes podem usar as mesmas cartas.",e.jsx("br",{}),"Crimes que já tem todas as cartas selecionados são indicados por uma faca."]}),en:e.jsxs(e.Fragment,{children:["Select each player below, analyze their answers about the crime, and select the cards that make up the crime.",e.jsx("br",{}),"The cards will always be in the same quadrant, but they are not exclusive to one player and different crimes can use the same cards.",e.jsx("br",{}),"Crimes that already have all cards selected are indicated by a knife."]})})}),e.jsx(Mn,{dev:!0,children:e.jsx(T,{children:e.jsx(Ve,{onClick:()=>g(Be(s,o,n,h,x)),children:e.jsx(c,{pt:"Seleção Aleatória Semi-inteligente",en:"Semi-intelligent Random Selection"})})})}),R&&e.jsx(T,{align:"center",children:e.jsx(Ce,{size:"large",disabled:!R,onClick:()=>d({guesses:u}),children:e.jsx(c,{pt:"Enviar Respostas",en:"Send Guesses"})})}),e.jsx(sn,{user:n,setActivePlayerId:j,players:o,guesses:u,history:n.history,children:e.jsx(Ns,{items:t,weaponId:S,evidenceId:v,victimId:y,locationId:b,groupedItems:s,onSelectItem:E,activeColor:p?ke((L=o[p])==null?void 0:L.avatarId):void 0,isLocked:m||O,wrongGroups:((M=n==null?void 0:n.wrongGroups)==null?void 0:M[p])??[],wrongItems:((we=n==null?void 0:n.wrongItems)==null?void 0:we[p])??[]})}),I&&e.jsx(Ln,{title:"Crime",icon:e.jsx(kn,{}),children:e.jsx(xe,{crime:I,scenes:r,scenesOrder:a,items:t,history:(n==null?void 0:n.history[I.playerId])??[],player:o[I.playerId],isLocked:m||O,selectedWeaponId:S,selectedEvidenceId:v,selectedVictimId:y,selectedLocationId:b,isLocationGame:x,isVictimGame:h},`crime-by-${I.playerId}`)}),e.jsx("div",{className:"h-empty-space"})]})}const Bs=(n,s,t,o,r)=>n?{activeWeaponId:t.weaponId,activeEvidenceId:t.evidenceId,activeVictimId:t.victimId,activeLocationId:t.locationId}:s?{activeWeaponId:r.weaponId,activeEvidenceId:r.evidenceId,activeVictimId:r.victimId,activeLocationId:r.locationId}:{activeWeaponId:o.weaponId,activeEvidenceId:o.evidenceId,activeVictimId:o.victimId,activeLocationId:o.locationId};function Ws({players:n,state:s}){var h;const{step:t,setStep:o}=ae(0),r=ee(n,s),a=cs(o),{isLocationGame:i,isVictimGame:d}=ne(s.items),l=e.jsx(F,{icon:e.jsx(Wn,{}),title:e.jsx(c,{pt:"Tente Adivinhar",en:"Try to guess"}),currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,type:"overlay",children:e.jsx(ps,{})});return e.jsx(de,{phase:s==null?void 0:s.phase,allowedPhase:z.GUESSING,children:e.jsx(le,{step:t,players:n,children:e.jsx(_s,{user:r,groupedItems:s.groupedItems,items:s.items,players:n,scenes:s.scenes,scenesOrder:s.scenesOrder,crimes:s.crimes,onSubmitGuesses:a,announcement:l,isLocationGame:i,isVictimGame:d})})})}function ks({players:n,results:s}){const t=[{title:"",dataIndex:"playerId",render:r=>e.jsx(qn,{player:n[r],size:"small",addressUser:!0})},...ie.orderBy(Object.keys(s)).map(r=>({title:e.jsx(Ge,{id:n[r].avatarId,size:"small"}),dataIndex:r,render:a=>e.jsx(Ms,{status:a})}))],o=ie.orderBy(Object.entries(s)).filter(([r,a])=>n[r].type==="player").map(([r,a])=>({playerId:r,...a}));return e.jsx(Dn,{columns:t,dataSource:o,pagination:!1,size:"small",bordered:!0})}function Ms({status:n}){switch(n){case C.LOCKED:case C.CORRECT:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(He,{}),shape:"square",alt:n})});case C.ONE:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(Ue,{}),shape:"square",alt:n})});case C.TWO:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(Fe,{}),shape:"square",alt:n})});case C.THREE:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(Le,{}),shape:"square",alt:n})});case C.WRONG:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(ze,{}),shape:"square",alt:n})});case C.WRONG_GROUP:return e.jsx(U,{title:e.jsx(P,{status:n,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(Ke,{}),shape:"square",alt:n})});default:return e.jsx("span",{children:"•"})}}function As({user:n,groupedItems:s,items:t,players:o,scenes:r,scenesOrder:a,crimes:i,onSeeRanking:d,round:l,results:h,isFirstRunThrough:x,announcement:u,isVictimGame:g,isLocationGame:p}){var y;pn();const[j,E]=f.useState(""),R=Object.keys(o).length,I=i.find(b=>b.playerId===j),m=j===n.id,O=I?((y=n.history)==null?void 0:y[I==null?void 0:I.playerId])??[]:[],S=ce(O),v=ds(S);return e.jsxs(q,{announcement:u,children:[e.jsx(D,{children:e.jsx(c,{pt:"Resultado",en:"Results"})}),e.jsx(Vn,{content:e.jsx(en,{round:l})}),e.jsx($,{type:"rule",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Veja aqui como todos os jogadores foram. Passe o mouse nos ícones para saber mais detalhes.",e.jsx("br",{}),"As colunas são os crimes e as linhas são os chutes dessa rodada de cada jogador."]}),en:e.jsxs(e.Fragment,{children:["See how all players did. Hover the icons to see details.",e.jsx("br",{}),"The columns are the crimes and the rows are the guesses for each player."]})})}),e.jsxs(B,{contained:!0,children:[e.jsx(ks,{players:o,results:h}),e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Você acertou ",n.correctCrimes," pares e está com um total (secreto) de"," ",e.jsxs(A,{children:[n.score+n.secretScore," pontos"]}),"."]}),en:e.jsxs(e.Fragment,{children:["You guesses ",n.correctCrimes," crimes and have a (secret) total of"," ",e.jsxs(A,{children:[n.score+n.secretScore," points"]}),"."]})})]}),e.jsx(T,{children:e.jsx(B,{contained:!0,children:e.jsx(Qe,{items:[{key:"weapons-evidences",label:e.jsx(c,{pt:" Ver todas cartas",en:"See all cards"}),children:e.jsx(nn,{items:t,weaponId:n.weaponId,evidenceId:n.evidenceId,groupedItems:s})}]})})}),e.jsxs(sn,{user:n,setActivePlayerId:E,players:o,guesses:{},history:n.history,children:[!j&&e.jsx(B,{contained:!0,children:e.jsx(c,{pt:"Clique em um jogador para ver o resultado do seu crime",en:"Click a player to see their crime"})}),!!j&&e.jsx(B,{contained:!0,className:!v&&!m?Ne("tada"):"",children:S?e.jsx(P,{status:S.status,withDescription:!0}):m?e.jsx(c,{pt:"Este é o seu próprio crime",en:"This is your own crime"}):""},`instruction-status-${j}`),I&&e.jsx("div",{className:Ne("slideInUp",{speed:"fast"}),children:e.jsx(xe,{crime:I,scenes:r,scenesOrder:a,items:t,history:n.history[I.playerId],player:o[I.playerId],isLocked:v,selectedWeaponId:m?n.weaponId:S.weaponId,selectedEvidenceId:m?n.evidenceId:S.evidenceId,selectedVictimId:m?n.victimId:S.victimId,selectedLocationId:m?n.locationId:S.locationId,isLocationGame:p,isVictimGame:g})},`crime-by-${I.playerId}`)]}),e.jsx(T,{children:x?e.jsx(An,{onClick:d,onExpire:d,duration:Math.min(R*15,60),icon:e.jsx(_e,{}),children:e.jsx(c,{pt:"Ver Ranking",en:"See Ranking"})}):e.jsx(Q,{onClick:d,icon:e.jsx(_e,{}),children:e.jsx(c,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function Ls({ranking:n,players:s,goToPreviousStep:t,round:o}){const r=o.total-o.current+1;return e.jsxs($n,{players:s,ranking:n,gainedPointsDescriptions:[e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Pares corretos ganham ",r," pontos nessa rodada. 1 ponto a menos na próxima."]}),en:e.jsxs(e.Fragment,{children:["Correct pairs get ",r," points this round. 1 point less next round."]})},"1")],children:[e.jsx(T,{children:e.jsx(Q,{onClick:t,children:e.jsx(c,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(jn,{round:o})]})}function Fs({players:n,state:s}){var u;const{step:t,goToNextStep:o,goToPreviousStep:r}=ae(0),a=ee(n,s),[i,d]=f.useState(!0),{isLocationGame:l,isVictimGame:h}=ne(s.items);f.useEffect(()=>{i&&t>1&&d(!1)},[t,i]);const x=e.jsx(F,{icon:e.jsx(Pn,{}),title:e.jsx(c,{pt:"Resultado",en:"Results"}),currentRound:(u=s==null?void 0:s.round)==null?void 0:u.current,type:"overlay",children:e.jsx(B,{children:e.jsx(en,{round:s.round})})});return e.jsx(de,{phase:s==null?void 0:s.phase,allowedPhase:z.REVEAL,children:e.jsxs(le,{step:t,players:n,children:[e.jsx(As,{user:a,groupedItems:s.groupedItems,items:s.items,players:n,scenes:s.scenes,scenesOrder:s.scenesOrder,crimes:s.crimes,onSeeRanking:o,round:s.round,results:s.results,isFirstRunThrough:i,announcement:x,isLocationGame:l,isVictimGame:h}),e.jsx(Ls,{ranking:s.ranking,players:n,goToPreviousStep:r,round:s.round})]})})}function Ps({state:n,players:s}){const t=f.useMemo(()=>ie.orderBy(n.crimes??[],["playerId"]),[n.crimes]),o=ee(s,n),{isLocationGame:r,isVictimGame:a}=ne(n.items);return e.jsxs(Hn,{state:n,players:s,announcementIcon:e.jsx(Gn,{}),children:[e.jsx(zn,{players:s,achievements:n.achievements,reference:Un}),e.jsx("ul",{children:t.map(i=>{var d;return e.jsx(xe,{crime:i,items:n.items,player:s[i.playerId],scenes:n.scenes,scenesOrder:n.scenesOrder,selectedEvidenceId:i.evidenceId,selectedWeaponId:i.weaponId,selectedVictimId:i.victimId,selectedLocationId:i.locationId,history:(d=o.history)==null?void 0:d[i.playerId],isVictimGame:a,isLocationGame:r},`crime-by-${i.playerId}`)})})]})}function Vs(n){if(n&&!n.phase)return mn;switch(n.phase){case pe.DEFAULT.LOBBY:return fn;case pe.DEFAULT.SETUP:return In;case z.CRIME_SELECTION:return Cs;case z.SCENE_MARKING:return Os;case z.GUESSING:return Ws;case z.REVEAL:return Fs;case pe.DEFAULT.GAME_OVER:return Ps;default:return un}}function Wt(){return e.jsx(vn,{gameCollection:ln.CRIMES_HEDIONDOS,getActiveComponent:Vs})}export{Wt as default};
