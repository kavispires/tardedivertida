import{r as h,ay as G,cC as ce,j as e,f as x,T as r,aL as $,B as N,e as I,aK as B,aF as _,q as H,aG as le,bJ as ue,bp as de,cD as me,z as D,i as pe,cE as he,aX as xe,aV as je,aW as fe}from"./index-CQUMMVDG.js";import{m as w,S as y,b as C,n as ge,d as A,c as R,e as b,f as p,g as v,P as g,u as L,q as Se,o as Ne,H as Te,r as X,i as ye,j as Ae,k as be,l as ve}from"./StepSwitcher-Cltrlngp.js";import{G as Oe}from"./GameOver-Dfoeq1n2.js";import{u as T}from"./useWhichPlayerIsThe-BienN5uq.js";import{P as Ee}from"./PassportIcon-CyhXpxoS.js";import{S as Ie}from"./SecretIcon-cPMAlZLo.js";import{S as Pe,A as _e,M as we,H as Ce}from"./SpyNewspaperIcon-Cwcr4B1J.js";import{I as m}from"./Instruction-BcmUACq2.js";import{P as U}from"./PhaseTimerReset-umoaGpBy.js";import{R as Re}from"./RoundAnnouncement-CT9R_Rw9.js";import{C as Le}from"./Card-CVNI8OKP.js";import{R as Ve}from"./QuestionCircleFilled-DWN-BabN.js";import{u as Z}from"./useCache-Bkc1CKy2.js";import{R as qe}from"./EnvironmentOutlined-BcjMiOHs.js";import{R as ee}from"./ClearOutlined-IfACrNrn.js";import{L as Me}from"./LoupeIcon-Dv_FNqw3.js";import{O as se}from"./OpinionsIcon-5llY7eeR.js";import{d as ke}from"./WritingIcon-D_CabSBO.js";import{M as ne}from"./DoubleRightOutlined-_thKMvXL.js";import{S as P}from"./index-SVYsEjXI.js";import{P as oe}from"./index-igwYyNuM.js";import{R as Fe}from"./AimOutlined-DZxWjU-V.js";import{V as $e}from"./ViewSwitch-BbBpgean.js";import{N as Ue}from"./NuclearExplosionIcon-BrqzhFn0.js";import{T as We}from"./ThiefIcon-DxXrnB8Q.js";import{V as ze}from"./ViewOr-BkEx7VU8.js";import{P as Ye}from"./PeopleAssessmentIcon-muBituUT.js";import"./useBlurCards-BNBaHpYL.js";import"./speech-DcZj5YcT.js";import"./useDevFeatures-NUd8DDqp.js";import"./RulesModal-CyiumakY.js";import"./useMutation-CNFCaVbz.js";import"./Game-DMEYRr-s.js";import"./WaitingRoomIcon-DaW3uofA.js";import"./AnimatedClockIcon-Cr0gLJd3.js";import"./index-D9a1HKEb.js";import"./useBubbleLock-Dck5kWPv.js";import"./PurePanel-DkMXBX4K.js";import"./index-DjhFmCe7.js";import"./Avatar-CmeCW0wX.js";import"./GameBanner-DY8t2G9E.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DM0bH6ac.js";import"./InfoCircleOutlined-tNBm2eLt.js";import"./index-CnGqfOjc.js";import"./SignIn-Cqng2M16.js";import"./GoogleIcon-QYeWCHdD.js";import"./Loading-BcJgtUMy.js";import"./AnimatedLoaderIcon-T0eGRTHJ.js";import"./LikeFilled-Clhf1Kqr.js";import"./StarFilled-D0W2b4Hd.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-CQllJ8az.js";import"./useMergedState-D5RTwnQi.js";import"./useEvent-DBQOYUIG.js";import"./progress-2u_7ipfX.js";import"./Overflow-3IsHxuZJ.js";var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},W.apply(this,arguments)}const He=(s,n)=>h.createElement(G,W({},s,{ref:n,icon:Ge})),De=h.forwardRef(He);function z(){return z=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},z.apply(this,arguments)}const Qe=(s,n)=>h.createElement(G,z({},s,{ref:n,icon:ce})),ae=h.forwardRef(Qe);function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},Y.apply(this,arguments)}const Je=(s,n)=>h.createElement(G,Y({},s,{ref:n,icon:Be})),Ke=h.forwardRef(Je);function F({children:s}){return e.jsx(e.Fragment,{children:s})}const V=({location:s,role:n,header:o})=>{const{translate:a}=x(),c=a("Local Desconhecido","Unknown Location"),l=a("Você é o espião","You are the spy"),i=a(`Você é um(a) ${n}`,`You are a ${n}`);return e.jsx(Le,{color:s==="SPY"?"red":"lime",header:s==="SPY"?c:o,size:"large",footer:n==="SPY"?l:i,className:"e-card",footerClassName:"e-card__footer",children:s==="SPY"?e.jsx(Ve,{}):s})};function q({locations:s}){const{translate:n}=x(),{cache:o,setCache:a}=Z(),c=i=>{a(u=>{const t={...u};return t[i]?delete t[i]:t[i]=!0,t})},l=()=>{a(i=>{const u={...i};return Object.keys(u).forEach(t=>{t.startsWith("_")||delete u[t]}),u})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(qe,{})," ",e.jsx(r,{pt:"Possíveis Locais",en:"Possible Locations"}),e.jsx($,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(ee,{}),onClick:l,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:I("e-list__list","e-list__list--column"),children:s.map(i=>e.jsx("li",{className:I("e-list__item",o[i.id]&&"e-list__item--crossed"),role:"button",onClick:()=>c(i.id),children:i.name},i.id))})]})}function M(){const{translate:s}=x();return e.jsx("textarea",{name:"",id:"",cols:30,rows:10,className:"e-notes",placeholder:s("Escreva anotações aqui se quiser, mas cuidado com o teclado fazendo muito barulho","Write your notes here, but don't make too much noise with those key strokes")})}function Xe({user:s,isUserTheSpy:n,locations:o}){return w(),e.jsxs(y,{className:"e-phase-step",children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(r,{pt:"Você está no(a)...",en:"We are in/at/on..."})}),e.jsx(V,{location:s.location,role:s.role}),e.jsx(ge,{children:e.jsx(r,{pt:"Começar cronômetro",en:"Start Timer"})}),e.jsx(m,{className:"e-phase-instruction",children:n?e.jsx(r,{pt:"Você terá 10 minutos para descobrir onde os outros agentes estão! Pronto?",en:"You have 10 minutes to find out where the other agents are! Ready?"}):e.jsx(r,{pt:"Você terá 10 minutos para descobrir quem é o espião entre nós! Pronto?",en:"You have 10 minutes to find out who is the spy! Ready?"})}),e.jsx(m,{className:"e-lists",children:e.jsx(q,{locations:o})}),e.jsx(M,{})]})}function Ze({state:s,players:n}){var i,u,t;const{step:o,goToNextStep:a}=A(0),c=R(n,s),[,l]=T("currentSpyId",s,n);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.ASSIGNMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(Re,{round:s.round,onPressButton:a,time:5,className:"e-round-announcement",children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:"Há um espião entre nós!",en:"There's a spy among us!"})})}),e.jsx(g,{icon:e.jsx(Pe,{}),title:e.jsx(r,{pt:"Prólogo",en:"Prologue"}),onClose:a,currentRound:(i=s==null?void 0:s.round)==null?void 0:i.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:15,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Estamos todos em um local que somente agentes confiáveis sabem onde é, mas um espião conseguiu se infiltrar em nosso sistema.",e.jsx("br",{}),"Estamos nos comunicando pelo ponto em nossos ouvidos porque somos espiões hi-tech."]}),en:e.jsxs(e.Fragment,{children:["We're all in a secret location that only the most trustworthy agents are assigned to, but a spy has hacked our system.",e.jsx("br",{}),"We are communication through our in-ear spy tech."]})})})}),e.jsx(U,{goToNextStep:a}),e.jsx(g,{icon:e.jsx(Ie,{}),title:e.jsx(r,{pt:"Você tem uma missão",en:"You have one mission"}),onClose:a,currentRound:(u=s==null?void 0:s.round)==null?void 0:u.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:10,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Se você é um agente, sua missão é descobrir quem é o espião.",e.jsx("br",{}),"Se você é o espião, sua missão é descobrir qual local os outros estão."]}),en:e.jsxs(e.Fragment,{children:["If you are an agent, your mission is to figure out who the spy is.",e.jsx("br",{}),"If you are the spy, your mission is to find out where the agents are and nuke it!."]})})})}),e.jsx(U,{goToNextStep:a}),e.jsx(g,{icon:e.jsx(Ee,{}),title:e.jsx(r,{pt:"Mais detalhes",en:"More details"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:30,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Um jogador faz uma pergunta a outro, qualquer tipo de pergunta, e então esse o jogador responde, de qualquer forma.",e.jsx("br",{}),"Você quer ser específico o suficiente para que outros jogadores não te acusem, mas vago o suficiente para que espião não sabia onde estamos.",e.jsx("br",{}),"O jogador que responde se torna o novo 'perguntador'.",e.jsx("br",{}),"Mas fique esperto, você só pode acusar alguém (ou tentar descobrir a localização) uma única vez durante o jogo."]}),en:e.jsxs(e.Fragment,{children:["One player will ask a question to another player, any kind of question, then this player will respond, in any way.",e.jsx("br",{}),"You want to be specific enough so other players don't accuse you, but vague enough so the spy does not figure out where you are.",e.jsx("br",{}),"The asked player becomes the new questioner.",e.jsx("br",{}),"But watch out! You can only accuse someone (or guess the location) a single time during the game."]})})})}),e.jsx(Xe,{user:c,isUserTheSpy:l,locations:s.locations})]})})}const k={LAST_QUESTIONER:"LAST_QUESTIONER",MAKE_ACCUSATION:"MAKE_ACCUSATION",SUBMIT_VOTE:"SUBMIT_VOTE",GUESS_LOCATION:"GUESS_LOCATION"};function es(s){const{translate:n}=x(),o=L({actionName:"submit-guess",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Chute submetido com sucesso","Guess submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu chute","Oops, the application found an error while trying to submit your guess")});return a=>{o({action:k.GUESS_LOCATION,...a})}}function te(s){const{translate:n}=x(),o=L({actionName:"make-accusation",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Acusação submetida com sucesso","Accusation submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua acusação","Oops, the application found an error while trying to submit your acusação")});return a=>{o({action:k.MAKE_ACCUSATION,...a})}}function ss(s){const{translate:n}=x(),o=L({actionName:"submit-vote",onError:()=>s(1),successMessage:n("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return a=>{o({action:k.SUBMIT_VOTE,...a})}}function ns(s){const{translate:n}=x(),o=L({actionName:"submit-last-questioner",onError:()=>s(1),successMessage:n("Último perguntador submetido com sucesso","Last questioner submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar o último perguntador","Oops, the application found an error while trying to submit the last questioner")});return a=>{o({action:k.LAST_QUESTIONER,...a})}}function os(s){return n=>{console.log(n)}}function as({onSendLastQuestioner:s,players:n}){const o=Se();return e.jsxs(ne,{open:o,title:e.jsx(r,{pt:"O Tempo Acabou!",en:"Time's up"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(r,{pt:"Quem foi a última pessoa a responder uma pergunta?",en:"Who was the last person to answer a question?"}),e.jsx(B,{wrap:!0,children:Object.entries(n).map(([a,c])=>e.jsx(N,{type:"default",icon:e.jsx(Ke,{}),onClick:()=>s({lastPlayerId:a}),children:c.name},a))})]})}function ts({locations:s,onSend:n}){const{translate:o}=x(),{isLoading:a}=_(),[c,l]=h.useState(""),i=t=>l(t),u=h.useMemo(()=>{var t;return((t=s.find(d=>d.id===c))==null?void 0:t.name)??""},[c,s]);return e.jsxs(H,{className:"e-select-container e-select-container--locations",children:[e.jsx(P,{onChange:i,placeholder:o("Chute um local","Guess location"),children:s.map(t=>e.jsx(P.Option,{value:t.id,children:t.name},`select-${t.id}`))}),e.jsx(oe,{title:e.jsx(r,{pt:`Você só pode chutar uma vez durante o jogo! Tem certeza que quer chutar ${u}?`,en:`You may guess the location only once! Are you sure you want to guess ${u}?`}),onConfirm:()=>n({locationId:c}),okText:"Sim",cancelText:"Não",children:e.jsxs(N,{type:"primary",disabled:!c||a,icon:a?e.jsx(ae,{}):null,children:[e.jsx(r,{pt:"Chutar",en:"Guess"}),u?`: ${u}`:""]})})]})}function re({players:s,onSend:n,isFinalAssessment:o=!1}){var S,j;const{translate:a}=x(),{isLoading:c}=_(),[l]=le("userId"),[i,u]=h.useState(""),t=Object.values(s).filter(f=>f.id!==l),d=f=>u(f);return e.jsxs(H,{children:[e.jsx(P,{onChange:d,className:"e-select",placeholder:a("Acuse um jogador","Accuse a player"),children:t.map(f=>e.jsx(P.Option,{value:f.id,children:f.name},f.id))}),e.jsx(oe,{title:`${o?"":a("Você só pode acusar uma vez durante o jogo!","You may only make one accusation during the game!")} ${a("Tem certeza que quer acusar","Are you sure you want to accuse")} ${(S=s[i])==null?void 0:S.name}?`,onConfirm:()=>n({targetId:i}),okText:a("Sim","Yes"),cancelText:a("Não","No"),children:e.jsxs(N,{type:"primary",disabled:!i||c,icon:c?e.jsx(ae,{}):null,children:[e.jsx(r,{pt:"Acusar",en:"Accuse"}),i?`: ${(j=s[i])==null?void 0:j.name}`:""]})})]})}function Q({players:s}){const{translate:n}=x(),{cache:o,setCache:a}=Z(),c=ue(s),l=u=>{a(t=>{const d={...t};return d[u]?delete d[u]:d[u]=!0,d})},i=()=>{a(u=>{const t={...u};return Object.keys(t).forEach(d=>{d.startsWith("_")&&delete t[d]}),t})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Fe,{})," ",e.jsx(r,{pt:"Suspeitos",en:"Suspects"}),e.jsx($,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(ee,{}),onClick:i,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:"e-list__list",children:c.map(u=>e.jsxs("li",{className:I("e-list__item",o[u.id]&&"e-list__item--crossed"),role:"button",onClick:()=>l(u.id),children:[u.name," ",u.usedAccusation&&e.jsx($,{title:"Já usou acusação",children:e.jsx(De,{size:12})})]},u.id))})]})}function rs({timer:s,hideAccusationSelect:n,setStep:o}){const a=()=>{n(),o(2)},{minutes:c,seconds:l}=de.useTimer({expiryTimestamp:me(s.timeRemaining-2e3),autoStart:!0,onExpire:a});return e.jsxs("div",{className:"e-timer",children:[c,":",l<10?`0${l}`:l]})}function is({user:s,isUserTheSpy:n,locations:o,players:a,timer:c,onGuessLocation:l,onMakeAccusation:i,onSendLastQuestioner:u,outcome:t,setStep:d}){w();const{translate:S}=x(),[j,f]=h.useState(!0),{notification:O}=D.useApp();h.useEffect(()=>{(t==null?void 0:t.type)==="VOTE_FAIL"&&O.info({message:S("A votação não foi unânime","The voting was not unanimous"),description:t.votedYes?`Votaram sim: ${t.votedYes}`:"Ninguém votou sim",duration:10})},[t==null?void 0:t.type]);const E=()=>{f(!1)};return e.jsxs(y,{className:"e-phase-step",children:[e.jsxs("div",{className:"e-phase-step-header",children:[e.jsx("div",{className:"e-phase-step-header__timer-container",children:e.jsx(rs,{timer:c,hideAccusationSelect:E,setStep:d})}),e.jsxs("div",{className:"e-phase-step-header__center",children:[e.jsx(pe,{level:2,className:"e-phase-title",children:n?e.jsx(r,{pt:"Onde eles estão?",en:"Where are they?"}):e.jsx(r,{pt:"Quem é o espião?",en:"Who is the spy?"})}),e.jsx(V,{location:s.location,role:s.role})]})]}),j&&e.jsxs(B,{children:[n&&e.jsx(ts,{locations:o,onSend:l}),"|",s!=null&&s.usedAccusation?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:"Você já usou sua chance de acusar",en:"You already used your accusation"})}):e.jsx(re,{players:a,onSend:i})]}),e.jsxs(m,{className:"e-lists",children:[e.jsx(Q,{players:a}),e.jsx(q,{locations:o})]}),e.jsx(M,{})]})}function cs({state:s,players:n}){var O,E,J,K;const{translate:o}=x(),{step:a,goToNextStep:c,setStep:l}=A(0),i=R(n,s),{notification:u}=D.useApp(),[,t]=T("currentSpyId",s,n),[d]=T("startingPlayerId",s,n),S=es(l),j=te(l),f=ns(l);return h.useEffect(()=>{s.timeRemaining>59e4&&d.name&&u.info({message:o("10 minutos!","10 minutes!"),description:o(`${d.name} começa perguntando!`,`${d.name} starts questioning!`),duration:10})},[d.name]),e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.INVESTIGATION,className:"e-phase",children:e.jsxs(v,{step:a,players:n,children:[((O=s==null?void 0:s.outcome)==null?void 0:O.type)!=="VOTE_FAIL"?e.jsx(g,{icon:e.jsx(Me,{}),title:e.jsx(r,{pt:"Investigação",en:"Investigation"}),onClose:c,currentRound:(E=s==null?void 0:s.round)==null?void 0:E.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block"}):e.jsx(g,{icon:e.jsx(se,{}),title:e.jsx(r,{pt:"A investigação continua",en:"The investigation continues"}),onClose:c,currentRound:(J=s==null?void 0:s.round)==null?void 0:J.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(is,{user:i,isUserTheSpy:t,locations:s.locations,players:n,timer:s.timer,onGuessLocation:S,onMakeAccusation:j,onSendLastQuestioner:f,outcome:s.outcome,setStep:l}),e.jsxs(g,{icon:e.jsx(ke,{}),title:e.jsx(r,{pt:"O tempo acabou!!!",en:"Time's up!!!"}),unskippable:!0,duration:300,onClose:()=>{},currentRound:(K=s==null?void 0:s.round)==null?void 0:K.current,buttonText:"",className:"e-phase-announcement",type:"block",children:[e.jsx(m,{children:e.jsx(r,{pt:"Preparado para a avaliação final?",en:"Are you ready for the final assessment?"})}),e.jsx(as,{onSendLastQuestioner:f,players:n})]})]})})}function ls({user:s,locations:n,players:o,onSubmitVote:a,accuser:c,isUserTheAccuser:l,target:i,isUserTheTarget:u}){const{translate:t}=x(),{isLoading:d}=_();return e.jsxs(y,{className:"e-phase-step",children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(r,{pt:`${c.name} está acusando ${i.name} de ser o espião. Concorda?`,en:`${c.name} is accusing ${i.name} to be the spy. Do you agree?`})}),e.jsxs($e,{cases:[l,u,!0],children:[e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:"Você não participa dessa votação, afinal, você quem acusou!",en:"You do not join the voting, after all, you triggered it!"})})},"accuser"),e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:"Você não participa dessa votação, afinal, é você quem está no paredão!",en:"You do not joint the voting, after all, you are the target"})})},"target"),e.jsx(F,{children:s.ready?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:"Voto computado",en:"Vote accepted"})}):e.jsxs(H,{children:[e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!0}),children:e.jsx(r,{pt:"Também acho!",en:"Agree!"})}),e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!1}),children:e.jsx(r,{pt:"Não é ele(a)",en:"It's not them"})})]})},"others")]}),e.jsx(V,{location:s.location,role:s.role}),e.jsx(Ne,{players:o,readyText:t("Votei","I voted"),readyTextPlural:t("Votamos","We voted"),hideNames:!0}),e.jsxs(m,{className:"e-lists",children:[e.jsx(Q,{players:o}),e.jsx(q,{locations:n})]}),e.jsx(M,{})]})}function us({state:s,players:n}){var j;const{step:o,goToNextStep:a,setStep:c}=A(0),l=R(n,s),[i,u]=T("accuserId",s,n),[t,d]=T("targetId",s,n),S=ss(c);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(g,{icon:e.jsx(_e,{}),title:e.jsx(r,{pt:"Acusação!",en:"Accusation!"}),onClose:a,currentRound:(j=s==null?void 0:s.round)==null?void 0:j.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--alert",duration:5,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Alguém foi acusado! Bafo!",e.jsx("br",{}),"Apenas se a votação for unanime que o resultado é revelado."]}),en:e.jsxs(e.Fragment,{children:["Someone was accused! Drama!!!",e.jsx("br",{}),"The solution is revealed only if the voting is unanimous."]})})})}),e.jsx(ls,{user:l,locations:s.locations,players:n,onSubmitVote:S,accuser:i,isUserTheAccuser:u,target:t,isUserTheTarget:d})]})})}const ds=(s,n,o,a)=>{const c=a.find(l=>l.id===(s==null?void 0:s.guess))??{};return{isPlayerVictory:s.isSpyWin===n,isUserTheSpy:n,wasABadVoting:s.isSpyWin&&o>0,wasAnAccusationAttempt:s.type==="SPY_FOUND",didSpyGuess:s.type==="SPY_GUESS",didTheSpyWin:s.isSpyWin,phaseIcon:s.isSpyWin?"nuclear-explosion":"handcuffs",guess:c,currentLocation:s.currentLocation}};function ms({players:s,target:n,resolutionStatus:o,currentSpy:a,onProgressGame:c}){var i;w();const{isLoading:l}=_();return e.jsxs(y,{className:"e-phase-step",children:[e.jsx(C,{className:I("e-phase-title",!o.isPlayerVictory&&"e-phase-title--fail"),children:o.isPlayerVictory?e.jsx(r,{pt:"Missão Cumprida!",en:"Mission Accomplished!"}):e.jsx(r,{pt:"Missão Fracassada",en:"Mission Failed"})}),o.wasAnAccusationAttempt&&n&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Os agentes tentaram incriminar ",n.name,o.didTheSpyWin?" e erraram feio!":" e acertaram na mosca!",e.jsx("br",{}),o.didTheSpyWin?`O espião era ${a.name}! Todos os segredos da agência foram revelados e o mundo vai acabar.`:"Parabéns! O mundo está salvo graças a você.",e.jsx("br",{}),o.wasABadVoting&&"Da próxima vez, discutam mais antes de fazerem uma votação precipitada."]}),en:e.jsxs(e.Fragment,{children:["The agents tried to pin ",n.name,o.didTheSpyWin?" and got it all wrong!":" and hit the bull's eye!",e.jsx("br",{}),o.didTheSpyWin?`The spy was ${a.name}! All of the agency secrets were revealed and the world will end.`:"Congratulations! The world is safe and sound thanks to you.",e.jsx("br",{}),o.wasABadVoting&&"Next time, discuss more before making a rash decision."]})})}),o.didSpyGuess&&o.currentLocation&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["O espião disse que o local é ",o.guess.name,o.didTheSpyWin?" e acertou na mosca!":` e errou feio! Os Agentes estão num(a) ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"Todos os segredos da agência foram revelados e o mundo vai acabar.":"Foi por pouco, mas não foi dessa vez que o mal venceu."]}),en:e.jsxs(e.Fragment,{children:["The spy guessed the location: ",o.guess.name,o.didTheSpyWin?" and hit the bull's eye!":` and got it all wrong! The agents were at a ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"All of the agency secrets were revealed and the world will end...":"That was close... but evil won't win this time."]})})}),e.jsxs(m,{className:"e-phase-instruction",children:[e.jsx("h4",{children:(i=o.currentLocation)==null?void 0:i.name}),e.jsx(r,{pt:"Disfarces dos infiltrados:",en:"Agent's roles:"}),Object.values(s).map(({id:u,name:t,role:d})=>e.jsxs("li",{children:[t," ",e.jsx(r,{pt:"como",en:"as"})," ",d==="SPY"?e.jsx(r,{pt:"ESPIÃO",en:"SPY"}):d]},`role-list-${u}`))]}),e.jsxs(Te,{children:[e.jsx(X,{onClick:()=>c({continue:!0}),disabled:l,children:e.jsx(r,{pt:"Jogar mais uma rodada",en:"Play another round"})}),e.jsx(X,{onClick:()=>c({end:!0}),disabled:l,children:e.jsx(r,{pt:"Terminar Jogo",en:"End Game"})})]})]})}function ps({state:s,players:n}){var d,S,j;const{step:o,goToNextStep:a}=A(0),[c,l]=T("currentSpyId",s,n),[i]=T("targetId",s,n),u=os(),t=h.useMemo(()=>ds(s.resolution,l,s.timeRemaining,s.locations),[s.resolution,l,s.timeRemaining,s.locations]);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.RESOLUTION,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsxs(ze,{condition:t.didSpyGuess,children:[e.jsx(g,{icon:e.jsx(we,{}),title:e.jsx(r,{pt:"O espião tentou adivinhar o local",en:"The spy tried to guess the location"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(g,{icon:e.jsx(We,{}),title:e.jsx(r,{pt:"A votação foi unanime!",en:"The vote was unanimous!"}),onClose:a,currentRound:(S=s==null?void 0:s.round)==null?void 0:S.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"})]}),e.jsx(U,{goToNextStep:a}),e.jsx(g,{icon:t.phaseIcon==="nuclear-explosion"?e.jsx(Ue,{}):e.jsx(Ce,{}),title:e.jsx(r,{pt:"O fim chegou!",en:"The end is here!"}),onClose:a,currentRound:(j=s==null?void 0:s.round)==null?void 0:j.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(ms,{players:n,target:i,resolutionStatus:t,currentSpy:c,onProgressGame:u})]})})}function ie({finalAssessment:s,players:n}){const{playerOrder:o,playerOrderIndex:a}=s,c=n[o[a]],l=he(o,n).join(", ");return e.jsx(m,{className:"e-phase-instruction",children:e.jsx(r,{pt:e.jsxs(e.Fragment,{children:["Já que vocês falharam em encontrar o espião, há uma última possibilidade!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Cada jogador, começando por ",c.name,", faz uma acusação."]}):e.jsxs("li",{children:["Agora é a vez de ",c.name," faz uma acusação."]}),e.jsx("li",{children:"Se a votação for unânime em qualquer uma das votações, o jogo acaba e revelam-se os papéis."}),e.jsx("li",{children:"Sem discussão dessa vez, simplesmente acuse alguém! Não temos mais tempo!"}),e.jsxs("li",{children:["A ordem será essa: ",l]})]})]}),en:e.jsxs(e.Fragment,{children:["Since you've failed to find the spy, here's a last resort!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Each player will, starting with ",c.name,", will make an accusation."]}):e.jsxs("li",{children:["Now it's time for ",c.name," to make an accusation."]}),e.jsx("li",{children:"If the voting result is unanimous, the game is over and the roles are revealed."}),e.jsx("li",{children:"No discussion, just accuse somebody! There's no time anymore!"}),e.jsxs("li",{children:["The order is: ",l]})]})]})})})}function hs({isModalVisible:s,onMakeAccusation:n,players:o,finalAssessment:a}){return e.jsxs(ne,{open:s,title:e.jsx(r,{pt:"Quem você vai acusar?",en:"Who are you gonna accuse?"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(ie,{finalAssessment:a,players:o}),e.jsx(r,{pt:"Não há tempo pra pensar, escolha alguém!",en:"There's no time to think, just choose someone"}),e.jsx(B,{children:e.jsx(re,{players:o,onSend:n,isFinalAssessment:!0})})]})}function xs({finalAssessment:s,players:n,user:o,locations:a,isUserTheAccuser:c,onMakeAccusation:l,outcome:i}){w();const{notification:u}=D.useApp(),{translate:t}=x();return h.useEffect(()=>{(i==null?void 0:i.type)==="VOTE_FAIL"&&u.info({message:t("A votação não foi unânime","The voting was not unanimous"),description:i.votedYes?`Votaram sim: ${i.votedYes}`:"Ninguém votou sim",duration:10})},[i==null?void 0:i.type]),e.jsxs(y,{children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(r,{pt:"Última Chance!",en:"Last chance!"})}),e.jsx(hs,{isModalVisible:c,onMakeAccusation:l,players:n,finalAssessment:s}),e.jsx(ie,{finalAssessment:s,players:n}),e.jsx(V,{location:o.location,role:o.role}),e.jsxs(m,{className:"e-lists",children:[e.jsx(Q,{players:n}),e.jsx(q,{locations:a})]}),e.jsx(M,{})]})}function js({state:s,players:n}){var t,d;const{step:o,goToNextStep:a,setStep:c}=A(0),l=R(n,s),i=te(c),u=s.finalAssessment.playerOrder[s.finalAssessment.playerOrderIndex]===l.id;return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.FINAL_ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[s.finalAssessment.playerOrderIndex===0?e.jsx(g,{icon:e.jsx(Ye,{}),title:e.jsx(r,{pt:"O tempo acabou!",en:"Time's up!"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement",duration:2,type:"block"}):e.jsx(g,{icon:e.jsx(se,{}),title:e.jsx(r,{pt:"A avaliação final continua",en:"The final assessment continues"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(r,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(xs,{onMakeAccusation:i,players:n,finalAssessment:s.finalAssessment,outcome:s.outcome,user:l,locations:s.locations,isUserTheAccuser:u})]})})}function fs(s){if(s&&!s.phase)return je;switch(s.phase){case p.DEFAULT.LOBBY:return ve;case p.DEFAULT.RULES:return be;case p.DEFAULT.SETUP:return Ae;case p.ESPIAO_ENTRE_NOS.ASSIGNMENT:return Ze;case p.ESPIAO_ENTRE_NOS.INVESTIGATION:return cs;case p.ESPIAO_ENTRE_NOS.ASSESSMENT:return us;case p.ESPIAO_ENTRE_NOS.FINAL_ASSESSMENT:return js;case p.ESPIAO_ENTRE_NOS.RESOLUTION:return ps;case p.DEFAULT.GAME_OVER:return Oe;default:return fe}}function yn(){return e.jsx(ye,{gameCollection:xe.ESPIAO_ENTRE_NOS,getActiveComponent:fs})}export{yn as default};
