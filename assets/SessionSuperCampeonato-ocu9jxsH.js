import{f as w,n as ce,bj as k,j as e,B as O,T as o,aL as g,l as H,b2 as de,bG as Q,r as p,a$ as ue,e as h,I as W,b0 as P,bL as me,bH as he,i as Z,q as pe,aY as xe,aW as je,aX as fe}from"./index-BJbMcewC.js";import{u as F,a as M,S as E,b as T,d as v,c as y,P as B,e as I,f as _,o as ge,n as Ce,m as Se,h as we,i as R,j as ve,k as _e,l as Ne}from"./StepSwitcher-rx0wj8we.js";import{L as be}from"./ListIcon-CWWC7ZWY.js";import{I as C}from"./Instruction-C0w5eOUK.js";import{R as Ee}from"./RoundAnnouncement-DIgJoSz-.js";import{C as Y}from"./Card-CjbXdE4w.js";import{P as S}from"./PointsHighlight-YAwiUuNF.js";import{R as se}from"./RuleInstruction-CoIfWJsi.js";import{C as u}from"./CharacterCard-DBwttoJD.js";import{F as re}from"./FloatingHand-DgNinNTd.js";import{A as Te}from"./AnonymousIcon-Dbp437BG.js";import{G as ae,M as ye}from"./WritingIcon-BYhKh5xx.js";/* empty css                             */import{I as Be}from"./ImageBlurButtonContainer-CxZEW-sx.js";import{A as X}from"./Avatar-BoSa6615.js";import{T as Ie}from"./ThumbsUpIcon-Cbse6rWF.js";import{T as te}from"./TrophyIcon-DF_r8nSP.js";import{S as $}from"./index-CvKgvH-N.js";import{P as qe}from"./index-Bym3idcJ.js";import{B as Re}from"./BoxingGlovesIcon-CDiqnzFQ.js";import{u as Ae}from"./useBlurCards-h4CqcxLY.js";import{T as Le}from"./TournamentIcon-DdCpX_92.js";import{S as Pe}from"./StepRankingWrapper-jiP_TzH8.js";import{R as Oe}from"./RoundsLeftInstruction-CPfbuJKh.js";import{T as ke}from"./speech-BzF0Tbsg.js";import{R as Fe}from"./TrophyOutlined-BEsAiHcI.js";import"./GameOver-edqyBA3o.js";import{G as Me}from"./GameOverWrapper-sYrxIe9Q.js";import{A as ze}from"./Achievements-DOx6r87k.js";import{a as Ve}from"./achievements-BIDRAQUl.js";import{D as ee}from"./index-BQsQBMGT.js";import"./RulesModal-5YFYEaWp.js";import"./DoubleRightOutlined-Bh1gtdGl.js";import"./PurePanel-BhaI8rGP.js";import"./useMutation-Degx59lO.js";import"./Game-Du3sO8nj.js";import"./WaitingRoomIcon-B4cmtU0l.js";import"./AnimatedClockIcon-DCJB2xRd.js";import"./index-Dtng7KWC.js";import"./useBubbleLock-DydJhBtG.js";import"./index-DdgCAG4x.js";import"./GameBanner-CO2fVTis.js";import"./useDevFeatures-Cu-9UbBe.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CCy9qnwE.js";import"./InfoCircleOutlined-CzPaz6Qn.js";import"./SignIn-B0U51EtO.js";import"./GoogleIcon-B9ZULqYD.js";import"./Loading-Bx6gW_1G.js";import"./AnimatedLoaderIcon-BJTCPZJu.js";import"./LikeFilled-BXKKEWW3.js";import"./StarIcon-Dff18UZm.js";import"./MetricHighlight-BRvXcdP6.js";import"./StarFilled-C9qTiDP8.js";import"./StarFilled-CNctUIhy.js";import"./HandOfCardsIcon-HZbOz7Fo.js";import"./ImageBlurButton-CXc5bpN3.js";import"./Overflow-BrCXp-wl.js";import"./useEvent-C_peVPrM.js";import"./RankingBoard-CxNq7e77.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./ArrowRightOutlined-LTWIRFe9.js";import"./useMergedState-B44fkkTu.js";import"./progress-BlJc8CRk.js";import"./TheEndIcon-C5WkjHGK.js";import"./Container-CyIEhv9e.js";import"./Medal-BkIhhV7M.js";import"./QuestionCircleOutlined-F-nhknhb.js";const f={CHALLENGE_SELECTION:"CHALLENGE_SELECTION",CONTENDER_SELECTION:"CONTENDER_SELECTION",BETS:"BETS",BATTLE:"BATTLE",RESULTS:"RESULTS"},z={SUBMIT_CHALLENGE:"SUBMIT_CHALLENGE",SUBMIT_CONTENDERS:"SUBMIT_CONTENDERS",SUBMIT_BETS:"SUBMIT_BETS",SUBMIT_VOTES:"SUBMIT_VOTES"},Ue={0:8,1:8,2:9,3:9,4:10,5:10,6:11,7:11,8:12,9:12,10:13,11:13,12:14,13:14},We={quarter:4,semi:2,final:1,winner:0},ne={quarter:"",semi:"",final:""},A={0:"final",1:"semi",2:"quarter"};function $e(n){const{translate:s}=w(),r=F({actionName:"submit-challenge",onBeforeCall:()=>n(3),onError:()=>n(1),successMessage:s("Desafio enviado com sucesso!","Challenge send successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar o desafio","Oops, the application failed to submit the challenge")});return a=>{r({action:z.SUBMIT_CHALLENGE,...a})}}function De(n){const{translate:s}=w(),r=F({actionName:"submit-contender",onBeforeCall:()=>n(2),onError:()=>n(1),successMessage:s("Competidor enviado com sucesso!","Contender send successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar o competidor","Oops, the application failed to submit the contender")});return a=>{r({action:z.SUBMIT_CONTENDERS,...a})}}function Ge(n){const{translate:s}=w(),r=F({actionName:"submit-bets",onBeforeCall:()=>n(2),onError:()=>n(1),successMessage:s("Apostas enviadas com sucesso!","Bets send successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar apostas","Oops, the application failed to submit bets")});return a=>{r({action:z.SUBMIT_BETS,...a})}}function He(n){const{translate:s}=w(),r=F({actionName:"submit-votes",onBeforeCall:()=>n(2),onError:()=>n(1),successMessage:s("Votos enviados com sucesso!","Votes send successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar votos","Oops, the application failed to submit votes")});return a=>{r({action:z.SUBMIT_VOTES,...a})}}const ie=(n,s,r)=>({quarterCard:n.find(a=>a.id===(s==null?void 0:s.quarter)),semiCard:n.find(a=>a.id===(s==null?void 0:s.semi)),finalCard:n.find(a=>a.id===(s==null?void 0:s.final)),selectedCard:n.find(a=>a.id===r)}),Qe=n=>n.reduce((s,r)=>(s[r.tier]===void 0&&(s[r.tier]={}),s[r.tier][r.id]=!0,s),{}),Ye=(n,s,r,a)=>{const t=ce.orderBy(n.filter(l=>l.tier==="quarter"),`name.${a}`);if(s==="semi"&&r.final){const l=t.find(c=>c.id===r.final);return l?t.filter(c=>l.position>3?c.position<=3:c.position>3):t}if(s==="quarter"&&r.final&&r.semi){const l=t.find(x=>x.id===r.final);if(!l)return t;const c=t.find(x=>x.id===r.semi);if(!c)return t;const i=l.position%2===0?l.position+1:l.position-1,d=c.position%2===0?c.position+1:c.position-1,m=[l.position,i,c.position,d];return t.filter(x=>!m.includes(x.position))}return t};function oe({contenders:n,onSelect:s}){const r=k(Math.max(n.length??8,5),{minWidth:100});return e.jsx(re,{title:e.jsx(o,{pt:"Seus Competidores",en:"Your Contenders"}),children:e.jsx("ul",{className:"w-contenders-hand",children:n.map(a=>e.jsxs("li",{className:"w-contenders-hand__entry",children:[!!s&&e.jsx(O,{onClick:()=>s(a.id),shape:"round",ghost:!0,className:"w-contenders-hand__button",children:e.jsx(o,{pt:"Selecionar",en:"Select"})}),e.jsx(u,{character:a,overlayColor:"gray",size:r})]},a.id))})})}function Xe({onSubmitChallenge:n,challenges:s,userContenders:r,round:a,announcement:t}){return M(),e.jsxs(E,{fullWidth:!0,announcement:t,children:[e.jsx(T,{children:e.jsx(o,{pt:"Selecione o desafio da rodada",en:"Select the theme for the round"})}),e.jsxs(se,{type:"rule",children:[e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Cada rodada é feita ao redor de um desafio."}),en:e.jsx(e.Fragment,{children:"Each round has a challenge for the contenders to battle on!"})}),r.length>1&&e.jsx(o,{pt:e.jsx(e.Fragment,{children:" Você tem competidores em mãos (na barra abaixo) e um deles irá participar desta rodada."}),en:e.jsx(e.Fragment,{children:" You have a hand of contenders and one of them will participate in this round."})}),r.length===0&&e.jsx(o,{pt:e.jsx(e.Fragment,{children:" Selecione um dos desafios."}),en:e.jsx(e.Fragment,{children:" Select one of the challenges."})}),r.length>1&&a.current<5?e.jsx(o,{pt:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Selecione o desafio que você acha que um dos seus competidores tem mais change de vencer.",e.jsx("br",{}),"Você ganha ",e.jsx(S,{children:"2"})," pontos se ele(a) vencer."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Select a challenge you think one of your contenders have the best chance of winning.",e.jsx("br",{}),"You get ",e.jsx(S,{children:"2"})," points if they win."]})}):e.jsx(o,{pt:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Este é uma rodada de semifinalistas, então somente competidores que chegaram na semi-final participam.",e.jsx("br",{}),"Você não selecionará um competidor dessa vez."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"This is a semifinalist round, so only contenders that got to the semifinals will participate.",e.jsx("br",{}),"You won't select a contender this time."]})})]}),e.jsx(g,{children:s.map((l,c)=>e.jsx(H,{onClick:()=>n({challengeId:l.id}),children:e.jsx(Y,{header:de[c],randomColor:!0,children:l.text})},l.id))}),a.current<5&&r.length>1&&e.jsx(oe,{contenders:r})]})}function Je({state:n,players:s}){var d;const{step:r,goToNextStep:a,setStep:t}=v(0),l=y(s,n),c=$e(t),i=e.jsx(B,{icon:e.jsx(be,{}),title:e.jsx(o,{pt:"Desafio",en:"Challenge"}),currentRound:(d=n==null?void 0:n.round)==null?void 0:d.current,duration:5,type:"overlay",children:e.jsx(C,{children:e.jsx(o,{pt:"Qual o desafio da rodada?",en:"What's the round's challenge?"})})});return e.jsx(I,{phase:n==null?void 0:n.phase,allowedPhase:f.CHALLENGE_SELECTION,children:e.jsxs(_,{step:r,players:s,children:[e.jsx(Ee,{round:n.round,onPressButton:a,time:4,children:e.jsx(C,{contained:!0,children:n.round.current===n.round.total?e.jsx(o,{pt:"Rodada final: Somente os finalistas!",en:"Final Round: Only finalists"}):e.jsx(o,{pt:"Quem vai ganhar a medalha de ouro?",en:"Who's gonna get the gold medal?"})})}),e.jsx(Xe,{onSubmitChallenge:c,challenges:n.challenges,userContenders:l.contenders,round:n.round,announcement:i})]})})}function V({challenge:n}){const{translate:s}=w();return e.jsx(g,{children:e.jsx(Y,{header:s("Desafio","Challenge"),color:"purple",children:n.text})})}function Ke({onSubmitContender:n,challenge:s,userContenders:r,announcement:a}){const t=k(Math.max(r.length??8,5),{minWidth:100});return M(),e.jsxs(E,{fullWidth:!0,announcement:a,children:[e.jsx(T,{children:e.jsx(o,{pt:"Quem pode ganhar esse desafio?",en:"Who can win this challenge?"})}),e.jsx(V,{challenge:s}),e.jsx(se,{type:"action",children:e.jsx(o,{pt:"Selecione um de seus competidores para entrar no campeonato",en:"Select one of your contenders to join the championship"})}),e.jsx("ul",{className:"w-contenders-hand",children:r.map(l=>e.jsxs("li",{className:"w-contenders-hand__entry",children:[e.jsx(Q,{onClick:()=>n({contendersId:l.id}),shape:"round",type:"default",ghost:!0,className:"w-contenders-hand__button",children:e.jsx(o,{pt:"Selecionar",en:"Select"})}),e.jsx(u,{character:l,overlayColor:"gray",size:t})]},l.id))})]})}function Ze({state:n,players:s}){var i;const{step:r,setStep:a}=v(0),t=y(s,n),l=De(a),c=e.jsx(B,{icon:e.jsx(Te,{}),title:e.jsx(o,{pt:"Competidores",en:"Contenders"}),type:"overlay",currentRound:(i=n==null?void 0:n.round)==null?void 0:i.current,duration:5,children:e.jsx(C,{children:e.jsx(o,{pt:"Quem tem chance de ganhar?",en:"Who has what it takes?"})})});return e.jsx(I,{phase:n==null?void 0:n.phase,allowedPhase:f.CONTENDER_SELECTION,children:e.jsx(_,{step:r,players:s,waitingRoom:{content:e.jsx(oe,{contenders:t.contenders})},children:e.jsx(Ke,{onSubmitContender:l,challenge:n.challenge,userContenders:t.contenders,announcement:c})})})}function U({bets:n,brackets:s,selectedContenderId:r=""}){const a=k(5,{minWidth:100}),{quarterCard:t,semiCard:l,finalCard:c,selectedCard:i}=p.useMemo(()=>ie(s,n,r),[n==null?void 0:n.final,n==null?void 0:n.quarter,n==null?void 0:n.semi]);return!t||!l||!c?e.jsx(e.Fragment,{}):e.jsx(re,{title:e.jsx(o,{pt:"Suas Apostas",en:"Your Bets"}),icon:e.jsx(ae,{}),children:e.jsx("div",{className:"w-bets-floating-hand",children:e.jsxs("ul",{className:"w-floating-bets",children:[e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(o,{pt:"Quartas de finais",en:"Quarterfinals"})}),e.jsx(u,{character:t,overlayColor:"gray",size:a})]}),e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(o,{pt:"Semifinais",en:"Semifinals"})}),e.jsx(u,{character:l,overlayColor:"gray",size:a})]}),e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(o,{pt:"Final",en:"Final"})}),e.jsx(u,{character:c,overlayColor:"gray",size:a})]}),!!i&&e.jsxs("li",{className:"w-floating-bets__entry w-floating-bets__entry--your-contender",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(o,{pt:"Seu competidor",en:"Your contender"})}),e.jsx(Be,{cardId:i.id,children:e.jsx(u,{character:i,overlayColor:"gray",size:a})})]})]})})})}function L({bracket:n,players:s}){var r;return(n.votes??[]).length>0?e.jsx(ue.Group,{className:"w-contender-votes",max:{count:3},size:"small",children:(r=n.votes)==null?void 0:r.map(a=>e.jsx(X,{size:"small",id:s[a].avatarId,alt:s[a].name},`${n.id}-${n.votes}`))}):e.jsx(e.Fragment,{})}const en=(n,s)=>s==="semi"?n%2===0?"orange":"green":n%2===0?"red":"blue";function J({brackets:n,activeTier:s,players:r}){const{quarter:a,semi:t,final:l,winner:c}=n.reduce((i,d)=>(i[d.tier].push(d),i),{quarter:[],semi:[],final:[],winner:[]});return e.jsxs("div",{className:"w-brackets-container",children:[e.jsxs("div",{className:"tournament-headers",children:[e.jsx("h3",{children:e.jsx(o,{pt:"Quartas",en:"Quarter-finals"})}),e.jsx("h3",{children:e.jsx(o,{pt:"Semifinais",en:"Semifinals"})}),e.jsx("h3",{children:e.jsx(o,{pt:"Final",en:"Final"})}),e.jsx("h3",{children:e.jsx(o,{pt:"Campeão",en:"Winner"})})]}),e.jsxs("div",{className:"w-tournament-brackets",children:[e.jsx("ul",{className:"w-bracket w-bracket--1",children:a.map((i,d)=>e.jsxs("li",{className:h("w-team-item",i.win&&"w-team-item--win"),children:[e.jsx(u,{size:100,overlayColor:s===i.tier?en(d,s):"gray",character:{id:i.id,name:i.name,description:i.description},className:"w-bracket-contender"}),e.jsx(L,{bracket:i,players:r})]},`${i.id}-${i.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--2",children:t.map(i=>e.jsxs("li",{className:h("w-team-item",i.win&&"w-team-item--win"),children:[e.jsx(u,{size:100,overlayColor:"gray",character:{id:i.id,name:i.name},className:"w-bracket-contender"}),e.jsx(L,{bracket:i,players:r})]},`${i.id}-${i.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--3",children:l.map(i=>e.jsxs("li",{className:h("w-team-item",i.win&&"w-team-item--win"),children:[e.jsx(u,{size:100,overlayColor:"gray",character:{id:i.id,name:i.name},className:"w-bracket-contender"}),e.jsx(L,{bracket:i,players:r})]},`${i.id}-${i.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--4",children:c.map(i=>e.jsxs("li",{className:h("w-team-item",i.name.pt!=="TBD"&&"w-team-item--win"),children:[e.jsx(u,{size:100,overlayColor:i.name.pt!=="TBD"?"yellow":"gray",character:{id:i.id,name:i.name},className:"w-bracket-contender"}),e.jsx(L,{bracket:i,players:r})]},`${i.id}-${i.position}`))})]})]})}function D({contenders:n,updateBet:s,language:r,betTier:a}){return e.jsxs($,{className:"w-bet-form__select",defaultValue:"",onChange:t=>s({[a]:t}),children:[e.jsx($.Option,{value:"",children:e.jsx(o,{pt:"Selecione",en:"Select"})}),n.map(t=>e.jsx($.Option,{value:t.id,children:t.name[r]},`option-${a}-${t.id}`))]})}function G({onConfirm:n}){return e.jsx(qe,{title:e.jsx(o,{pt:"Tem certeza que quer reiniciar apostas?",en:"Are you sure you want to restart the bets?"}),onConfirm:n,okText:e.jsx(o,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(o,{pt:"Não",en:"No"}),children:e.jsx(O,{children:e.jsx(o,{pt:"Reiniciar",en:"Reset"})})})}function nn({brackets:n,onSubmitBets:s}){const{language:r}=w(),[a,t]=p.useState(0),[l,c]=p.useState([]),[i,d]=p.useState(ne),m=()=>{t(0),d(ne)},x=b=>{d(q=>({...q,...b}))};p.useEffect(()=>{c(Ye(n,A[a],i,r))},[n,a,i,r]);const N=l.filter(b=>!Object.values(i).includes(b.id));return e.jsxs("div",{className:"w-bet-form",children:[a===0&&e.jsxs(C,{contained:!0,className:h("w-bet-form__container","w-bet-form__container--final",P("zoomIn")),children:[e.jsx(W,{icon:e.jsx(te,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ",e.jsx("u",{children:"vai ganhar a final"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(S,{children:"5"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will ",e.jsx("u",{children:"win the final"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(S,{children:"5"})," points."]})})}),e.jsx(D,{contenders:N,updateBet:x,language:r,betTier:A[a]}),e.jsxs(g,{children:[e.jsx(G,{onConfirm:m}),e.jsx(O,{onClick:()=>t(a+1),disabled:!i.final,type:"primary",children:e.jsx(o,{pt:"Próximo",en:"Next"})})]})]}),a===1&&e.jsxs(C,{contained:!0,className:h("w-bet-form__container","w-bet-form__container--semi",P("zoomIn")),children:[e.jsx(W,{icon:e.jsx(ye,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ganha uma ",e.jsx("u",{children:"semifinal"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(S,{children:"3"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will win at least a ",e.jsx("u",{children:"semifinal"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(S,{children:"3"})," points."]})})}),e.jsx(D,{contenders:N,updateBet:x,language:r,betTier:A[a]}),e.jsxs(g,{children:[e.jsx(G,{onConfirm:m}),e.jsx(O,{onClick:()=>t(a+1),disabled:!i.semi,type:"primary",children:e.jsx(o,{pt:"Próximo",en:"Next"})})]})]}),a===2&&e.jsxs(C,{contained:!0,className:h("w-bet-form__container","w-bet-form__container--quarter",P("zoomIn")),children:[e.jsx(W,{icon:e.jsx(Ie,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ganha uma ",e.jsx("u",{children:"quarta de final"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(S,{children:"1"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will win at least a ",e.jsx("u",{children:"quarterfinal"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(S,{children:"1"})," points."]})})}),e.jsx(D,{contenders:N,updateBet:x,language:r,betTier:A[a]}),e.jsxs(g,{children:[e.jsx(G,{onConfirm:m}),e.jsx(Q,{onClick:()=>s(i),disabled:!i.quarter,children:e.jsx(o,{pt:"Enviar Apostas",en:"Submit Bets"})})]})]})]})}function sn({onSubmitBets:n,challenge:s,brackets:r,players:a,announcement:t}){return M(),e.jsxs(E,{fullWidth:!0,announcement:t,children:[e.jsx(T,{children:e.jsx(o,{pt:"Faça suas apostas!",en:"Make your bets!"})}),e.jsx(V,{challenge:s}),e.jsx(nn,{brackets:r,onSubmitBets:n}),e.jsx(J,{brackets:r,activeTier:"quarter",players:a})]})}function rn({state:n,players:s}){var i,d;const{step:r,setStep:a}=v(0),t=y(s,n),l=Ge(a),c=e.jsx(B,{icon:e.jsx(ae,{}),title:e.jsx(o,{pt:"Apostas",en:"Bets"}),type:"overlay",currentRound:(i=n==null?void 0:n.round)==null?void 0:i.current,duration:5,children:e.jsx(C,{children:e.jsx(o,{pt:"Selecione quem você acha que ganha as quartas de final, semi final e final",en:"Place bet on who you think will win the quarter-finals, semifinals, and finals"})})});return e.jsx(I,{phase:n==null?void 0:n.phase,allowedPhase:f.BETS,children:e.jsx(_,{step:r,players:s,waitingRoom:{content:!!((d=t.bets)!=null&&d.final)&&e.jsx(U,{bets:t.bets,brackets:n.brackets,selectedContenderId:t.selectedContenderId})},children:e.jsx(sn,{onSubmitBets:l,challenge:n.challenge,brackets:n.brackets,players:s,announcement:c})})})}function an({tier:n}){return n==="quarter"?e.jsx(o,{pt:"Quartas de finais",en:"Quarterfinals"}):n==="semi"?e.jsx(o,{pt:"Semifinais",en:"Semifinals"}):e.jsx(o,{pt:"Final",en:"Final"})}function tn(n){const[s,r]=p.useState({});function a(l){r(c=>({...c,[Ue[l.position]]:l.position}))}function t(l){return Object.values(s).includes(l)}return{votes:s,updateVote:a,isComplete:Object.keys(s).length===We[n],checkActiveVote:t}}function on({contenders:n}){const s=n.flat(),r=k(s.length+2,{gap:16,minWidth:30,maxWidth:100});return e.jsx("ul",{className:"w-tier-contenders",children:s.map(a=>e.jsx("li",{className:"w-tier-contender",children:e.jsx(u,{character:a,overlayColor:"gray",size:r})},`w-tier-contender-${a.id}`))})}function ln({brackets:n,tier:s,onSubmitVotes:r,players:a,bets:t}){const{step:l,goToNextStep:c}=v(0),{seconds:i}=Ae({duration:5,autoStart:!0,onExpire:c}),d=p.useMemo(()=>n.filter(j=>j.tier===s).map((j,K,le)=>K%2===0?[j,le[K+1]]:[]).filter(j=>j.length>0),[n,s]),{votes:m,updateVote:x,isComplete:N,checkActiveVote:b}=tn(s),q=dn(s);return M(),e.jsxs(_,{step:l,players:a,children:[e.jsxs(C,{contained:!0,children:[e.jsx("p",{children:s==="quarter"?e.jsx(o,{pt:"Competidores:",en:"Contenders:"}):e.jsx(o,{pt:"Foram para a próxima fase:",en:"Moved to the next bracket:"})}),e.jsx(on,{contenders:d}),e.jsx("p",{children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Votação começando em ",i]}),en:e.jsxs(e.Fragment,{children:["Voting starting in ",i]})})})]}),e.jsxs("div",{children:[e.jsx("ul",{className:"w-voting-group",children:d.map(j=>e.jsx(cn,{left:j[0],right:j[1],onClick:x,colorLeft:q.left,colorRight:q.right,checkActiveVote:b},`${j[0].id}-${j[1].id}`))}),e.jsx(g,{children:e.jsx(Q,{size:"large",onClick:()=>r({votes:m}),disabled:!N,children:e.jsx(o,{pt:"Enviar votos",en:"Submit votes"})})})]})]})}function cn({left:n,right:s,colorLeft:r,colorRight:a,onClick:t,checkActiveVote:l}){return e.jsxs("li",{className:h("w-voting-options",P("flipInX")),children:[e.jsx(H,{onClick:()=>t(n),active:l(n.position),className:"w-vote",activeClass:"w-vote--active",children:e.jsx(u,{size:200,character:n,overlayColor:r})}),e.jsx("span",{className:"w-voting-options__vs",children:"VS"}),e.jsx(H,{onClick:()=>t(s),active:l(s.position),className:"w-vote",activeClass:"w-vote--active",children:e.jsx(u,{size:200,character:s,overlayColor:a})})]})}const dn=n=>{switch(n){case"quarter":return{left:"red",right:"blue"};case"semi":return{left:"green",right:"orange"};default:return{left:"red",right:"blue"}}};function un({onSubmitVotes:n,challenge:s,brackets:r,tier:a,bets:t,selectedContenderId:l,players:c,announcement:i}){return e.jsxs(E,{fullWidth:!0,announcement:i,children:[e.jsx(T,{children:e.jsx(an,{tier:a})}),e.jsx(V,{challenge:s}),e.jsx(ln,{brackets:r,tier:a,onSubmitVotes:n,players:c,bets:t}),e.jsx(J,{brackets:r,activeTier:a,players:c}),e.jsx(ge,{players:c}),e.jsx(U,{bets:t,brackets:r,selectedContenderId:l})]})}function mn({state:n,players:s}){var m;const{step:r,setStep:a}=v(0),[t,l]=p.useState(""),c=y(s,n),i=He(a);p.useEffect(()=>{n.tier!==t&&(l(n.tier),a(0))},[n.tier,t,a]);const d=e.jsx(B,{icon:e.jsx(Re,{}),title:e.jsx(o,{pt:"Batalha!",en:"Battle!"}),type:"overlay",currentRound:(m=n==null?void 0:n.round)==null?void 0:m.current,duration:3,children:e.jsx(C,{children:e.jsx(o,{pt:"Vote em quem você acha que melhor se encaixa no desafio",en:"Vote on who you think best fit the challenge"})})});return e.jsx(I,{phase:n==null?void 0:n.phase,allowedPhase:f.BATTLE,children:e.jsx(_,{step:r,players:s,children:e.jsx(un,{onSubmitVotes:i,challenge:n.challenge,brackets:n.brackets,tier:n.tier,bets:c.bets,selectedContenderId:c.selectedContenderId,players:s,announcement:d})})})}function hn({players:n,brackets:s}){const r=me(n),a=Qe(s);return e.jsxs("ul",{className:"w-players-bets",style:{gridTemplateColumns:`repeat(${r.length+1}, auto)`},children:[e.jsxs("li",{className:"w-players-bets__player w-players-bets__player--header",children:[e.jsx("div",{className:"w-players-bets__square",children:e.jsx(X,{shape:"square",size:"large",className:"w-players-bets__avatar",id:"N"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(o,{pt:"Final",en:"Final"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(o,{pt:"Semi",en:"Semi"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(o,{pt:"Quartas",en:"Quarter"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(o,{pt:"Competidor",en:"Contender"})})]}),r.map(t=>e.jsx(pn,{brackets:s,player:t,contendersByTiers:a},`players-bets-${t.id}`))]})}function pn({player:n,brackets:s,contendersByTiers:r}){const{quarterCard:a,semiCard:t,finalCard:l,selectedCard:c}=p.useMemo(()=>ie(s,n.bets,n.selectedContenderId),[s,n.bets,n.selectedContenderId]);return!a||!t||!l?null:e.jsxs("li",{className:"w-players-bets__player",style:{backgroundColor:he(n.avatarId)},children:[e.jsx("div",{className:"w-players-bets__square",children:e.jsx(X,{shape:"square",size:"large",className:"w-players-bets__avatar",id:n.avatarId})}),e.jsx("div",{className:h("w-players-bets__square",r.winner[l.id]&&"w-players-bets__square--win"),children:e.jsx(u,{size:50,overlayColor:r.winner[l.id]?"yellow":"gray",character:l,hideName:!0})}),e.jsx("div",{className:h("w-players-bets__square",r.final[t.id]&&"w-players-bets__square--win"),children:e.jsx(u,{size:50,overlayColor:r.final[t.id]?"yellow":"gray",character:t,hideName:!0})}),e.jsx("div",{className:h("w-players-bets__square",r.semi[a.id]&&"w-players-bets__square--win"),children:e.jsx(u,{size:50,overlayColor:r.semi[a.id]?"yellow":"gray",character:a,hideName:!0})}),c?e.jsx("div",{className:h("w-players-bets__square",r.winner[c.id]&&"w-players-bets__square--win"),children:e.jsx(u,{size:50,overlayColor:r.winner[c.id]?"yellow":"gray",character:c,hideName:!0})}):e.jsx("div",{className:h("w-players-bets__square","w-players-bets__square--none"),children:"-"})]},`players-bets-${n.id}`)}function xn({players:n,ranking:s,isGameOver:r,round:a,brackets:t,bets:l,selectedContenderId:c}){return e.jsxs(Pe,{players:n,ranking:s,gainedPointsDescriptions:[e.jsx(o,{pt:"Apostou na final corretamente",en:"Correct final bet"},"1"),e.jsx(o,{pt:"Apostou nas semifinais corretamente",en:"Correct semifinal bet"},"2"),e.jsx(o,{pt:"Apostou nas quartas de finais corretamente",en:"Correct quarterfinal bet"},"3"),e.jsx(o,{pt:"Seu competidor ganhou",en:"Your competitor won"},"4")],children:[!r&&e.jsx(Oe,{round:a}),e.jsx(hn,{players:n,brackets:t}),e.jsx(Ce,{round:a}),e.jsx(J,{brackets:t,activeTier:"winner",players:n}),e.jsx(U,{bets:l,brackets:t,selectedContenderId:c})]})}function jn({challenge:n,brackets:s,bets:r,goToNextStep:a,selectedContenderId:t,announcement:l}){return Se(),e.jsxs(E,{fullWidth:!0,announcement:l,children:[e.jsx(T,{children:e.jsx(o,{pt:"Vencedor",en:"Winner"})}),e.jsx(V,{challenge:n}),e.jsx(g,{className:"margin",children:e.jsx(u,{size:200,overlayColor:"yellow",character:s[s.length-1]})}),e.jsx(g,{children:e.jsx(ke,{duration:7,icon:e.jsx(Fe,{}),onExpire:a,onClick:a,children:e.jsx(o,{pt:"Ver Ranking",en:"See Ranking"})})}),e.jsx(U,{bets:r,brackets:s,selectedContenderId:t})]})}function fn({state:n,players:s}){var m;const{step:r,goToNextStep:a,setStep:t}=v(0),[l,c]=p.useState(""),i=y(s,n);p.useEffect(()=>{n.tier!==l&&(c(n.tier),t(0))},[n.tier,l,t]);const d=e.jsx(B,{icon:e.jsx(Le,{}),title:e.jsx(o,{pt:"Resultado!",en:"Results!"}),type:"overlay",currentRound:(m=n==null?void 0:n.round)==null?void 0:m.current,duration:3,children:e.jsx(C,{children:e.jsx(o,{pt:"Só pode haver um...",en:"There's only one..."})})});return e.jsx(I,{phase:n==null?void 0:n.phase,allowedPhase:f.RESULTS,children:e.jsxs(_,{step:r,players:s,children:[e.jsx(jn,{brackets:n.brackets,challenge:n.challenge,bets:i.bets,goToNextStep:a,selectedContenderId:i.selectedContenderId,announcement:d}),e.jsx(xn,{players:s,ranking:n.ranking,isGameOver:!1,round:n.round,brackets:n.brackets,bets:i.bets,selectedContenderId:i.selectedContenderId})]})})}function gn({state:n,players:s}){const r=n.pastBattles,{translate:a}=w();return e.jsxs(Me,{state:n,players:s,announcementIcon:e.jsx(te,{}),children:[e.jsx(Z,{size:"xx-small",className:"padding",children:e.jsx(o,{pt:"Campeão Ultimate",en:"Ultimate Champion"})}),e.jsx(g,{className:"margin",children:e.jsx(u,{size:200,overlayColor:"yellow",character:n.finalWinner})}),e.jsx(ee,{}),e.jsx(ze,{players:s,achievements:n.achievements,reference:Ve}),e.jsx(ee,{}),e.jsx(Z,{size:"xx-small",className:"padding",children:e.jsx(o,{pt:"Resumo das Batalhas",en:"Battles Summary"})}),e.jsx(g,{className:"margin",children:r.map(t=>e.jsxs(pe,{direction:"vertical",align:"center",className:"final-gallery",children:[e.jsx(Y,{header:a("Desafio","Challenge"),color:"purple",className:"final-gallery__card",children:t.challenge.text}),t.contenders.map((l,c)=>e.jsx(u,{size:80,overlayColor:c===0?"yellow":"gray",character:l,className:"final-gallery__contender"},`${t.challenge.id}-${l.id}`))]},t.challenge.id))})]})}function Cn(n){if(n&&!n.phase)return je;switch(n.phase){case R.DEFAULT.LOBBY:return Ne;case R.DEFAULT.RULES:return _e;case R.DEFAULT.SETUP:return ve;case f.CHALLENGE_SELECTION:return Je;case f.CONTENDER_SELECTION:return Ze;case f.BETS:return rn;case f.BATTLE:return mn;case f.RESULTS:return fn;case R.DEFAULT.GAME_OVER:return gn;default:return fe}}function Ls(){return e.jsx(we,{gameCollection:xe.SUPER_CAMPEONATO,getActiveComponent:Cn})}export{Ls as default};
