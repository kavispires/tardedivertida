import{j as e,e as f,a$ as U,T as n,r as y,az as ee,f as S,bH as re,bI as P,aG as k,aL as C,J as ae,bG as se,bj as F,bJ as oe,q as te,B as ne,aI as ie,aY as ce,aW as de,aX as le}from"./index-CSgiS5-z.js";import{u as W,S as _,b as N,a as Y,d as T,c as H,P as w,e as R,f as A,m as me,n as ue,h as he,i as O,j as pe,k as xe,l as je}from"./StepSwitcher-59vdKKK-.js";import{u as V}from"./useWhichPlayerIsThe-Cz3w53Ee.js";import{F as ge}from"./FairyTaleIcon-ab_krWfp.js";import{A as j}from"./AvatarName-DyNp7TjJ.js";/* empty css                             */import{I as J}from"./ImageCardPreloadHand-SSgqzmpj.js";import{I as z}from"./Instruction-BhKtxEBL.js";import{r as ve,T as ye}from"./TurnOrder-BLXN6M1N.js";import{R as be}from"./RoundAnnouncement-CfdSHv8f.js";import{V as Q}from"./ViewOr-B_seEcHY.js";import{F as fe}from"./FloatingHand-4I4jxLYQ.js";import{I as M,a as Ie}from"./ImageCardHand-CDYuNQOD.js";import{T as Se,S as _e}from"./TableIcon-OrFRMx1D.js";import{R as B}from"./RuleInstruction-CE5oePlz.js";import{I}from"./ImageCard-BMxElfuA.js";import{B as X}from"./BookPages-COhlg5U9.js";import{I as Ne,V as Oe}from"./WritingIcon-DR_9camd.js";import{P as h}from"./PointsHighlight-MCJ1aDqV.js";import{C as K}from"./Card-iwrvLOTv.js";import{I as Pe}from"./ImageCardBack-BEKVovXs.js";import{A as b}from"./Avatar-DzdHn8Tj.js";import{P as q}from"./PopoverRule-Be4JyEIR.js";import{T as Ce}from"./TimedTimerBar-XXRPtYIT.js";import{T as Te}from"./speech-C960orx4.js";import{I as $}from"./ImageBlurButton-CJK06nrJ.js";import{S as we}from"./StepRankingWrapper-DSxjhBdR.js";import{T as Re}from"./TrophyIcon-pxdYiToa.js";import"./GameOver-Dbwr_4gQ.js";import{G as Ae}from"./GameOverWrapper-Bl2DAoDl.js";import{A as Ve}from"./Achievements-CSUepuHK.js";import{a as Be}from"./achievements-D3bN1bkf.js";import{I as Ee}from"./ImageBlurButtonContainer-DUmIYUqD.js";import{C as Le}from"./Container-CNVvrXLx.js";/* empty css                       */import"./useBlurCards-EiuZxAto.js";import"./RulesModal-Dd_NRrG7.js";import"./DoubleRightOutlined-B9IjKK52.js";import"./PurePanel-BijFlcE0.js";import"./useMutation-CyJ5AjJq.js";import"./Game-JSNPG8tM.js";import"./WaitingRoomIcon-C-etbZ6W.js";import"./AnimatedClockIcon-Dmwhf0hD.js";import"./index-Bcafee-5.js";import"./useBubbleLock-CmIdkOok.js";import"./index-prz0JiuA.js";import"./Overflow-zdB_x8D-.js";import"./useEvent-DrrrUF8p.js";import"./index-BZvTW1ET.js";import"./index-CsZVA3I7.js";import"./GameBanner-BSnwC2DJ.js";import"./useDevFeatures-B5yHgo7p.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-bTsgShmN.js";import"./InfoCircleOutlined-BWzemnN4.js";import"./index-CLdBgnQQ.js";import"./SignIn-CLmmdOJj.js";import"./GoogleIcon-D9IbkC6M.js";import"./Loading-4Chd3RcK.js";import"./AnimatedLoaderIcon-B_Lvi6Be.js";import"./LikeFilled-eqZdsvMt.js";import"./HandOfCardsIcon-DAAlCeG4.js";import"./UpCircleOutlined-HfC0BTMx.js";import"./StarFilled-DbPTqDk7.js";import"./StarFilled-CNctUIhy.js";import"./StarIcon-Cd2uRObQ.js";import"./MetricHighlight-DndJutgZ.js";import"./TimerBar-8IbAcC9j.js";import"./progress-DptaQlvm.js";import"./RankingBoard-Dhn_n5jc.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./ArrowRightOutlined-BbLQvkf5.js";import"./useMergedState-zgb0OmaB.js";import"./TheEndIcon-D_PBhSN8.js";import"./Medal-HVOSKATK.js";import"./QuestionCircleOutlined-wUG9t1ew.js";var ke={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M485.6 249.9L198.2 498c-8.3 7.1-8.3 20.8 0 27.9l287.4 248.2c10.7 9.2 26.4.9 26.4-14V263.8c0-14.8-15.7-23.2-26.4-13.9zm320 0L518.2 498a18.6 18.6 0 00-6.2 14c0 5.2 2.1 10.4 6.2 14l287.4 248.2c10.7 9.2 26.4.9 26.4-14V263.8c0-14.8-15.7-23.2-26.4-13.9z"}}]},name:"backward",theme:"filled"};const Fe=({size:r="small",className:a="",withDescription:s=!1,uppercase:o=!1})=>{const d="avatar-name";return e.jsxs("span",{className:f(d,o&&`${d}--uppercase`,a),children:[e.jsx(U,{src:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",children:[e.jsx("rect",{width:"100",height:"100",fill:"#7f8693",rx:"50"}),e.jsx("path",{fill:"#fff",d:"M81.86 38.84h-3.44V28A2.65 2.65 0 0076 25.49H52.46V10.42h-4.92v15.07H24A2.65 2.65 0 0021.58 28v10.84h-3.44a2.41 2.41 0 00-2.45 2.46v16.21A2.41 2.41 0 0018.14 60h3.44v15.12A2.65 2.65 0 0024 77.58h52a2.65 2.65 0 002.46-2.46V60h3.44a2.41 2.41 0 002.45-2.46V41.3a2.41 2.41 0 00-2.49-2.46zm-50.12 5.81a7.13 7.13 0 117.12 7.13 7.12 7.12 0 01-7.12-7.13zM60.81 66H39.19v-4.88h21.62zm7.45-21.38a7.13 7.13 0 01-7.12 7.13 7.21 7.21 0 117.12-7.29z"})]}),size:r}),e.jsx("span",{className:"avatar-name__name",children:e.jsx(n,{pt:"Computador",en:"NPC"})}),s&&e.jsx("span",{className:"avatar-name__name",children:", o robô"})]})};function E(){return E=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r},E.apply(this,arguments)}const We=(r,a)=>y.createElement(ee,E({},r,{ref:a,icon:ke})),Ye=y.forwardRef(We),g={STORY:"STORY",CARD_PLAY:"CARD_PLAY",VOTING:"VOTING",RESOLUTION:"RESOLUTION"},D={SUBMIT_STORY:"SUBMIT_STORY",PLAY_CARD:"PLAY_CARD",SUBMIT_VOTE:"SUBMIT_VOTE"};function He(r){const{translate:a}=S(),s=W({actionName:"submit-story",onBeforeCall:()=>r(2),onError:()=>r(0),successMessage:a("História submetida com sucesso","Story submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar sua história","Oops, the application found an error while trying to submit your story")});return o=>{s({action:D.SUBMIT_STORY,...o})}}function ze(r){const{translate:a}=S(),s=W({actionName:"play-card",onError:()=>r(1),successMessage:a("Carta submetida com sucesso","Card submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application found an error while trying to submit your card")});return o=>{s({action:D.PLAY_CARD,...o})}}function Me(r){const{translate:a}=S(),s=W({actionName:"submit-vote",onError:()=>r(1),successMessage:a("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return o=>{s({action:D.SUBMIT_VOTE,...o})}}function qe({players:r,order:a,activePlayerId:s,reorderByUser:o,title:d,className:t="",size:c}){const i=y.useMemo(()=>o?ve(a,o):a,[o,a]),p=i.length*2;return e.jsx("div",{className:f("table-order",c&&`table-order--${c}`,t),children:e.jsxs("ol",{className:"table-order__players",children:[i.map((m,u)=>{const l=r[m],x=s===m,v=re(l.avatarId);return e.jsxs(y.Fragment,{children:[e.jsx("li",{style:{"--t":p,"--i":u*2},className:f("table-order__player",x&&"table-order__player--active"),children:e.jsx("span",{className:"table-order__icon",style:x?{backgroundColor:v}:void 0,children:e.jsx(j,{player:l,upright:!0})})}),e.jsx("li",{style:{"--t":p,"--i":u*2+1},className:"table-order__chevron",children:e.jsx("span",{className:"table-order__icon",children:e.jsx(Ye,{})})})]},`table-order-${m}`)}),e.jsx("li",{className:"table-order__center",children:e.jsxs("div",{className:"table-order__center-container",children:[e.jsx(Se,{style:{width:"3rem",transform:"scaleX(-1)"}}),e.jsx("header",{className:"table-order__title",children:e.jsx(n,{en:"Player Order",pt:"Ordem dos Jogadores",custom:d})})]})})]})})}function De({storyteller:r,user:a,players:s,gameOrder:o,announcement:d}){var t;return e.jsxs(_,{fullWidth:!0,className:"c-story-waiting",announcement:d,children:[e.jsx(N,{wait:!0,children:e.jsx(n,{pt:"Aguarde...",en:"Please wait..."})}),e.jsxs(B,{type:"wait",children:[e.jsx(j,{player:r})," ",e.jsx(n,{pt:"está escrevendo uma história para essa rodada.",en:"is writing a story for this round."}),e.jsx("br",{}),e.jsx(n,{pt:"Enquanto isso, examine suas cartas! Você as usará durante esta rodada.",en:"In the meantime, examine your cards. You're gonna use them this round."})]}),e.jsx(qe,{players:s,activePlayerId:r.id,order:o,size:"small",reorderByUser:r.id}),e.jsx(fe,{children:e.jsx(M,{hand:a.hand,sizeRatio:(t=a.hand)==null?void 0:t.length})})]})}const Ge=["avocado","bell pepper","crustaceous","dinner"];function $e(r){return{story:P(Ge),cardId:P(r)}}function Ue(r){return{cardId:P(r)}}function Je(r,a){return{vote:P(r.map(s=>s.cardId).filter(s=>a!==s))}}function Qe({user:r,onSubmitStory:a,announcement:s}){var u;const{translate:o}=S(),{isLoading:d}=k(),[t,c]=y.useState(""),[i,p]=y.useState(""),m=()=>{i&&t&&a({story:t.trim(),cardId:i})};return Y(()=>{a($e(r.hand))},[]),e.jsxs(_,{fullWidth:!0,className:"c-story-writing",announcement:s,children:[e.jsx(N,{children:e.jsx(n,{pt:"Escreva uma história",en:"Tell us a story"})}),e.jsx("div",{className:"c-story-book",children:e.jsx(X,{leftPage:e.jsx("div",{className:"c-story-book__selected-card",children:i&&e.jsx(I,{id:i,cardWidth:175})}),rightPage:e.jsx("div",{className:"c-story-book__instructions",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(n,{pt:"Selecione uma carta abaixo e escreva algo sobre ela. ",en:"Select a card below and write something about it. "}),e.jsx(n,{pt:"Escreva o que você quiser: uma frase, uma palavra única, uma expressão, letra de música. Não há restrições.",en:"Write whatever you want: a sentence, a single word, an expression, a song lyric. There are no restrictions."})]}),e.jsx("li",{children:e.jsx(n,{pt:"Pense em algo que ajudará os outros jogadores a escolher a carta selecionada. Não seja óbvio, se todos escolherem a carta correta você não ganha pontos, e não seja muito vago porque se ninguém acerta, você também fica sem pontos.",en:"You want something that will help players to find the selected card. Don't be too obvious, because if all players guess correctly you get no points. And also don't be too vague, if nobody guesses the card you also get no points."})})]})})})}),e.jsxs(C,{className:"c-input-container",wrap:!0,children:[e.jsx(ae,{placeholder:o("Escreva aqui","Write your clue here"),onChange:l=>c(l.target.value),onPressEnter:m,size:"large"}),e.jsx(se,{disabled:t.length<1||!i,onClick:m,size:"large",children:e.jsx(n,{pt:"Enviar história e carta",en:"Send secret clue and card"})})]}),e.jsx(M,{hand:r.hand,onSelectCard:p,disabledSelectButton:d,sizeRatio:(u=r.hand)==null?void 0:u.length})]})}function Xe({state:r,players:a}){var u;const{step:s,goToNextStep:o,setStep:d}=T(0),t=H(a,r),[c,i]=V("storytellerId",r,a),p=He(d),m=e.jsx(w,{icon:e.jsx(ge,{}),title:e.jsx(n,{pt:"Conte-nos uma história",en:"Tell us a story..."}),currentRound:(u=r==null?void 0:r.round)==null?void 0:u.current,type:"overlay",children:e.jsxs(z,{children:[e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Para essa rodada, ",e.jsx(j,{player:c,addressUser:!0,size:"small"})," será o(a) Contador(a) de Histórias."]}),en:e.jsxs(e.Fragment,{children:["For this round, ",e.jsx(j,{player:c,addressUser:!0})," will be the Storyteller."]})}),e.jsx(ye,{players:a,order:r.gameOrder,activePlayerId:r.storytellerId}),e.jsx(J,{hand:t==null?void 0:t.hand})]})});return e.jsx(R,{phase:r==null?void 0:r.phase,allowedPhase:g.STORY,children:e.jsxs(A,{step:s,players:a,children:[e.jsx(be,{round:r.round,onPressButton:o,time:5}),e.jsxs(Q,{condition:i,children:[e.jsx(Qe,{user:t,onSubmitStory:p,announcement:m}),e.jsx(De,{user:t,storyteller:c,players:a,gameOrder:r.gameOrder,announcement:m})]})]})})}function Ke({players:r,user:a}){const s="c-table-face-down-card";return e.jsx("div",{className:"c-table-face-down",children:Object.values(r).map((o,d)=>{const t=!o.cardId,c=o.id===a.id?"hidden-user":"hidden";return e.jsx(Pe,{cardWidth:150,preview:!1,className:f(s,`${s}--${d}`,t&&`${s}--${c}`)},`card-back-${o.id}`)})})}function Ze({players:r,story:a,user:s,onPlayCard:o,storyteller:d,isUserTheStoryTeller:t,announcement:c}){var u;const{isLoading:i}=k(),p=!!s.cardId,m=l=>{o({cardId:l})};return Y(()=>{t||o(Ue(s.hand))},[s.hand]),e.jsxs(_,{fullWidth:!0,announcement:c,children:[e.jsx(N,{children:e.jsx(K,{header:d.name,className:"c-story-card",randomColor:!0,children:a})}),e.jsx(B,{type:t?"wait":"action",children:e.jsxs(Q,{condition:t,children:[e.jsx(n,{pt:"Agora, cada jogador escolherá uma carta em mão que mais combine com a história que você escreveu.",en:"Now every other player will play a card that best matches the story you wrote."}),e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agora, escolha uma carta que mais combine com a história da rodada.",e.jsx("br",{}),"Você está tentando convencer os outros jogadores a escolherem sua carta ao invés da carta correta."]}),en:e.jsxs(e.Fragment,{children:["Now you select a card that matches the story the best.",e.jsx("br",{}),"You are trying to convince other players that your card is the correct one."]})})]})}),e.jsx(Ke,{players:r,user:s}),e.jsx(M,{hand:s.hand,onSelectCard:p?void 0:m,disabledSelectButton:i||p,sizeRatio:(u=s.hand)==null?void 0:u.length})]})}function er({state:r,players:a}){var m;const{step:s,setStep:o}=T(0),d=H(a,r),[t,c]=V("storytellerId",r,a),i=ze(o),p=e.jsx(w,{icon:e.jsx(Ne,{}),title:e.jsx(n,{pt:"Selecione uma carta",en:"Play a card..."}),currentRound:(m=r==null?void 0:r.round)==null?void 0:m.current,type:"overlay",children:e.jsx(z,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agora, jogadores verão a história da rodada e selecionarão uma de suas cartas que mais se aproxime da história. Na próxima fase, se algum outro jogador selecionar sua carta, você ganha"," ",e.jsx(h,{children:"1"})," ponto!"]}),en:e.jsxs(e.Fragment,{children:["Now players will see the story for the round and select one of their cards that best match the story. If any other player vote for your card later, you will get"," ",e.jsx(h,{children:"1"})," point."]})})})});return e.jsx(R,{phase:r==null?void 0:r.phase,allowedPhase:g.CARD_PLAY,children:e.jsx(A,{step:s,players:a,children:e.jsx(Ze,{players:a,user:d,story:r.story,onPlayCard:i,storyteller:t,isUserTheStoryTeller:c,announcement:p})})})}function L({isUserTheStoryTeller:r}){return e.jsx(n,{pt:e.jsxs(e.Fragment,{children:[r?"Aguarde enquanto os outros jogadores selecionam as cartas":"Hora de selecionar a carta correta!",e.jsx("br",{}),"Se todos acertarem ou todos errarem, cada jogador ganha ",e.jsx(h,{children:"2"})," pontos, menos o contador de histórias.",e.jsx("br",{}),"Se somente alguns acertarem, cada acertador e contador de histórias recebe"," ",e.jsx(h,{children:"3"})," pontos.",e.jsx("br",{}),"Sua carta (se você não for o contador de histórias) ganha ",e.jsx(h,{children:"1"})," ponto se alguém selecionar."]}),en:e.jsxs(e.Fragment,{children:[r?"Wait while other players select their cards":"Time to select the correct card!",e.jsx("br",{}),"If every player gets it correct or wrong, each player but the storyteller gets"," ",e.jsx(h,{children:"2"})," points.",e.jsx("br",{}),"If only some get it correct, those players (and the storyteller) get"," ",e.jsx(h,{children:"3"}),"3 points.",e.jsx("br",{}),"You get ",e.jsx(h,{children:"1"})," point for every vote your card gets (if you are not the storyteller)."]})})}function G({storyteller:r}){return e.jsx(z,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Hora de revelar a resposta correta!",e.jsx("br",{}),"O Contador de Histórias ",e.jsx(b,{id:r.avatarId,size:"small"})," ganha"," ",e.jsx(h,{children:"3"})," pontos se pelo menos uma pessoa acertar (mas não todas).",e.jsx("br",{}),"Cada jogador que votou corretamente ganha ",e.jsx(h,{children:"3"})," pontos.",e.jsx("br",{}),"Para cada voto que sua carta recebeu (menos ",e.jsx(b,{id:r.avatarId,size:"small"}),"), você ganha ",e.jsx(h,{children:"1"})," ponto.",e.jsx("br",{}),"Mas se todos jogadores votarem corretamente ou incorretamente, todos ganham"," ",e.jsx(h,{children:"2"})," pontos e o Contador de Histórias não ganha nada."]}),en:e.jsxs(e.Fragment,{children:["Time to reveal the answer!",e.jsx("br",{}),"The Storyteller ",e.jsx(b,{id:r.avatarId,size:"small"})," gets"," ",e.jsx(h,{children:"3"})," points if at least one player got it correctly (but not all).",e.jsx("br",{}),"Each player who voted correctly gets ",e.jsx(h,{children:"3"})," points.",e.jsx("br",{}),"Each vote your card receives grants you ",e.jsx(h,{children:"1"})," points (except"," ",e.jsx(b,{id:r.avatarId,size:"small"}),").",e.jsx("br",{}),"But if all players vote correctly or incorrectly, they get ",e.jsx(h,{children:"2"})," ","points each and the Storyteller gets nothing."]})})})}function rr({players:r,story:a,user:s,onSubmitVote:o,storyteller:d,table:t,isUserTheStoryTeller:c,announcement:i}){const{isLoading:p}=k(),m=F(Math.max(Object.keys(r).length,8),{minWidth:150}),u=oe(r),l=x=>{o({vote:x})};return Y(()=>{c||o(Je(t,s.cardId))},[s==null?void 0:s.hand]),e.jsxs(_,{fullWidth:!0,announcement:i,children:[e.jsx(N,{children:e.jsx(n,{pt:"Qual carta é a ilustração correta?",en:"What card is the correct one?"})}),e.jsx(C,{children:e.jsx(K,{header:d.name,className:"c-story-card",color:"yellow",children:a})}),e.jsx(q,{content:e.jsx(L,{isUserTheStoryTeller:c})}),e.jsx(B,{type:c?"wait":"action",children:e.jsx(L,{isUserTheStoryTeller:c})}),u&&e.jsx(Ce,{duration:15,onExpire:()=>{}}),e.jsx(te,{className:"c-game-table",wrap:!0,children:t.map(x=>{const v=x.playerId===s.id,Z=x.cardId===s.vote;return e.jsx("div",{className:"c-game-table__card-container",children:e.jsx(Ie,{id:x.cardId,onClick:c?void 0:l,disabled:p||v,buttonText:v?e.jsx(n,{pt:"Sua",en:"Yours"}):e.jsx(n,{pt:"Votar",en:"Vote"}),children:e.jsx(I,{id:x.cardId,cardWidth:m,className:f(Z?"c-game-table--vote":"c-game-table--idle")})})},`hand-${x.cardId}`)})})]})}function ar({state:r,players:a}){var m;const{step:s,setStep:o}=T(0),d=H(a,r),[t,c]=V("storytellerId",r,a),i=Me(o),p=e.jsxs(w,{icon:e.jsx(Oe,{}),title:e.jsx(n,{pt:"Votação",en:"Voting"}),currentRound:(m=r==null?void 0:r.round)==null?void 0:m.current,type:"overlay",children:[e.jsx(L,{isUserTheStoryTeller:c}),e.jsx(J,{hand:r.table.map(u=>u.cardId)})]});return e.jsx(R,{phase:r==null?void 0:r.phase,allowedPhase:g.VOTING,className:"c-phase",children:e.jsx(A,{step:s,players:a,children:e.jsx(rr,{players:a,user:d,story:r.story,onSubmitVote:i,storyteller:t,table:r.table,isUserTheStoryTeller:c,announcement:p})})})}function sr({players:r,story:a,storyteller:s,table:o,goToNextStep:d,announcement:t}){var m,u;me();const c=F(10,{minWidth:75}),i=o.find(l=>l.playerId===s.id),p=o.filter(l=>l.playerId!==s.id);return e.jsxs(_,{fullWidth:!0,announcement:t,children:[e.jsx(N,{children:e.jsx(n,{pt:"Solução",en:"Solution"})}),e.jsx(q,{content:e.jsx(G,{storyteller:s})}),e.jsx("div",{className:"c-story-book",children:e.jsx(X,{leftPage:e.jsx("div",{className:"c-story-book__selected-card",children:i&&e.jsxs(e.Fragment,{children:[e.jsx(I,{id:i.cardId,cardWidth:160}),e.jsx($,{cardId:i.cardId})]})}),rightPage:e.jsxs("div",{className:"c-story-book__solution",children:[e.jsx("p",{children:e.jsx(n,{pt:"Era uma vez...",en:"Once upon a time..."})}),e.jsx("p",{className:"c-story-book__story",children:a}),e.jsxs("div",{children:[e.jsx(n,{pt:"Votaram corretamente:",en:"Voted correctly:"}),e.jsxs("ul",{className:"c-story-book__correct-players",children:[(m=i==null?void 0:i.votes)==null?void 0:m.filter(l=>l!==s.id).map(l=>e.jsx("li",{children:e.jsx(j,{player:r[l],size:"small"})},`correct-vote-player-${l}`)),(((u=i==null?void 0:i.votes)==null?void 0:u.length)??0)<2&&e.jsx("li",{className:"c-story-book__nobody",children:e.jsx(n,{pt:"Vixi, ninguém acertou...",en:"Well, nobody got it..."})})]})]})]})})}),e.jsx("ul",{className:"c-other-cards",children:p.map((l,x)=>e.jsxs("li",{className:"c-other-cards__entry",children:[e.jsx("div",{className:"c-other-cards__player",children:l.playerId==="NPC"?e.jsx(Fe,{size:"small"}):e.jsx(j,{player:r[l.playerId],size:"small"})}),e.jsx(I,{id:l.cardId,cardWidth:c,className:"c-other-cards__card"}),e.jsx($,{cardId:l.cardId}),e.jsx("div",{className:"c-other-cards__votes",children:e.jsx(U.Group,{size:"small",children:((l==null?void 0:l.votes)??[]).map(v=>e.jsx(b,{id:r[v].avatarId},`incorrect-vote-player-${v}`))})})]},`other-card-votes-${l.playerId}-${x}`))}),e.jsx(C,{children:e.jsx(Te,{onClick:d,onExpire:d,duration:20,children:e.jsx(n,{pt:"Continuar",en:"Continue"})})})]})}const or=(r,a)=>{switch(r){case"EVERYBODY_GOT":return a("Pontos porque o Contador de Histórias foi muito obscuro","Points because the Storyteller was too vague");case"NOBODY_GOT":return a("Pontos porque o Contador de Histórias foi óbvio","Points because the Storyteller was too obvious");default:return a("Pontos por acertar","Points for getting it right")}};function tr({players:r,ranking:a,outcome:s,storyteller:o,round:d,goToPreviousStep:t}){const{translate:c}=S();return e.jsxs(we,{players:r,ranking:a,gainedPointsDescriptions:[or(s,c),"Pontos por votos em sua carta"],subtitle:e.jsxs(B,{type:s==="NORMAL"?"event":"alert",children:[s==="EVERYBODY_GOT"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Todo mundo acertou! ",e.jsx(j,{player:o}),", da próxima vez, seja menos óbvio(a)."]}),en:e.jsxs(e.Fragment,{children:["Everybody guessed it right! ",e.jsx(j,{player:o}),", be less obvious next time."]})}),s==="NOBODY_GOT"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Ninguém acertou! ",e.jsx(j,{player:o}),", da próxima vez, seja menos obscuro."]}),en:e.jsxs(e.Fragment,{children:["Nobody guessed it right! ",e.jsx(j,{player:o}),", next time be less obscure."]})}),s==="NORMAL"&&e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Quem acertou ganha ",e.jsx(h,{type:"positive",children:"3"})," pontos! Bom trabalho, ",e.jsx(j,{player:o}),"."]}),en:e.jsxs(e.Fragment,{children:["Whoever guessed it right got ",e.jsx(h,{type:"positive",children:"3"})," points! Good job, ",e.jsx(j,{player:o})]})})]}),children:[e.jsx(q,{content:e.jsx(G,{storyteller:o})}),e.jsx(C,{children:e.jsx(ne,{onClick:t,children:c("Voltar para Solução","Back to Solution")})}),e.jsx(ue,{round:d})]})}function nr({state:r,players:a}){var i;const{step:s,goToNextStep:o,goToPreviousStep:d}=T(0),[t]=V("storytellerId",r,a),c=e.jsx(w,{icon:e.jsx(_e,{}),title:e.jsx(n,{pt:"Solução",en:"Solution"}),currentRound:(i=r==null?void 0:r.round)==null?void 0:i.current,type:"overlay",children:e.jsx(G,{storyteller:t})});return e.jsx(R,{phase:r==null?void 0:r.phase,allowedPhase:g.RESOLUTION,children:e.jsxs(A,{step:s,players:a,children:[e.jsx(sr,{players:a,story:r.story,storyteller:t,table:r.table,goToNextStep:o,announcement:c}),e.jsx(tr,{players:a,ranking:r.ranking,outcome:r.outcome,storyteller:t,round:r.round,goToPreviousStep:d})]})})}function ir({gallery:r}){const a=F(6,{gap:8,minWidth:60,maxWidth:200});return e.jsx(Le,{title:e.jsx(n,{pt:"Histórias",en:"Stories"}),children:e.jsx(ie.PreviewGroup,{children:e.jsx("ul",{className:"c-gallery",children:r.map((s,o)=>e.jsxs("div",{className:"c-gallery__entry",children:[e.jsx("div",{className:"c-gallery__label",children:e.jsx("span",{children:s.story})}),e.jsx(Ee,{cardId:s.cardId,children:e.jsx(I,{id:s.cardId,cardWidth:a-6})})]},`${s.cardId}-${o}`))})})})}function cr({state:r,players:a}){return e.jsxs(Ae,{state:r,players:a,announcementIcon:e.jsx(Re,{}),children:[e.jsx(Ve,{players:a,achievements:r.achievements,reference:Be}),e.jsx(ir,{gallery:r.gallery})]})}function dr(r){if(r&&!r.phase)return de;switch(r.phase){case O.DEFAULT.LOBBY:return je;case O.DEFAULT.RULES:return xe;case O.DEFAULT.SETUP:return pe;case g.STORY:return Xe;case g.CARD_PLAY:return er;case g.VOTING:return ar;case g.RESOLUTION:return nr;case O.DEFAULT.GAME_OVER:return cr;default:return le}}function Aa(){return e.jsx(he,{gameCollection:ce.CONTADORES_HISTORIAS,getActiveComponent:dr})}export{Aa as default};
