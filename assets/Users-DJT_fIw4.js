import{y as _,H as q,J as w,r as d,K as C,j as e,q as u,v as I,M as i,w as o,N as m,B as M,U as R,O as B,Q as L,V as Q,W as F,X as J,Y as K}from"./index-DzwuFtC0.js";import{u as W}from"./useMutation-10ZIZKWc.js";/* empty css           */import{S as p}from"./index-vDybWjN4.js";import"./Overflow-DKH-jfHS.js";import"./useEvent-BdYYKjRx.js";import"./PurePanel-ZZ-4qR-C.js";const l={id:"",names:[],avatars:{},preferredLanguage:"en",games:{},gender:"unknown",ratings:{},blurredImages:{},daily:{}};function Y(){var j,y,S;_("Users - Tarde Divertida");const{message:f,notification:v}=q.useApp(),E=w(),[n,N]=d.useState(l),[t,T]=d.useState(l),g=C({queryKey:["users"],queryFn:async()=>{const s=await L(Q(J(K,"users"),F("isGuest","!=",!0))),a=[];return s.forEach(P=>a.push(P.data())),a}}),h=W({mutationKey:["users"],mutationFn:async s=>{R.run({action:B.UPDATE_USER_DB,...s})},onSuccess:()=>{f.success("User updated"),E.invalidateQueries({queryKey:["users"]})},onError:s=>{v.error({message:"Error",description:s.message})}}),c=g.data??[],A=s=>{N(c.find(a=>a.id===s)??l)},D=s=>{T(c.find(a=>a.id===s)??l)},x=c.map(s=>{var a;return e.jsxs(p.Option,{value:s.id,children:[e.jsx("strong",{children:(a=s==null?void 0:s.names)==null?void 0:a[0]}),": ",s.id]},s.id)}),U=e.jsx(p,{onChange:A,style:{minWidth:300},children:x}),O=e.jsx(p,{onChange:D,style:{minWidth:300},children:x}),r=d.useMemo(()=>u.merge(u.cloneDeep(n??{}),u.cloneDeep(t??{})),[n,t]);return e.jsxs(I,{children:[e.jsx(i.Title,{children:"Users"}),g.isLoading&&e.jsx(i.Paragraph,{children:"Loading..."}),e.jsxs(o,{className:"margin",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Origin"}),e.jsx(o,{className:"margin",children:U}),e.jsx(i.Paragraph,{children:((j=n==null?void 0:n.names)==null?void 0:j.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(n??{},null,2),rows:20,cols:50,className:"margin"})]}),e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Destination"}),e.jsx(o,{className:"margin",children:O}),e.jsx(i.Paragraph,{children:((y=t==null?void 0:t.names)==null?void 0:y.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(t??{},null,2),rows:20,cols:50,className:"margin"})]})]}),e.jsxs(o,{direction:"vertical",children:[e.jsx(i.Title,{level:2,children:"Merge"}),e.jsx(i.Paragraph,{children:((S=r==null?void 0:r.names)==null?void 0:S.join(", "))??"No user selected"}),e.jsx(m.TextArea,{value:JSON.stringify(r??{},null,2),rows:20,cols:50,className:"margin"}),e.jsxs(M,{type:"primary",size:"large",loading:h.isPending,onClick:()=>h.mutate(r),disabled:!(r!=null&&r.id),children:['Merge Users "',n.id,'" into "',t.id,'"']})]})]})}export{Y as default};
