import{r as u,az as I,f as ie,j as e,T as a,e as R,q as ze,B as A,bj as H,aJ as Fe,H as F,D as ve,k as be,aG as ye,b2 as M,I as _,bc as g,n as _e,aL as we,bp as He,aY as $e,aW as Ve,aX as Be}from"./index-BYLqr1sy.js";import{u as ce,S as $,a as V,c as le,P as de,d as ue,e as he,k as We,l as Ue,g as Ge,h as Z,i as De,j as qe}from"./StepSwitcher-BrCphB5Q.js";import{u as D}from"./useWhichPlayerIsThe-DfQAfdu0.js";import{C as z,B as me,M as ke,b as Je,A as Ye,a as Ze}from"./MapCityZonesIcon-7AxOva9n.js";import{A as w}from"./AvatarName-CAglhJ2m.js";import{I as q}from"./Instruction-DLrqdJk-.js";import{R as Qe}from"./RoundAnnouncement-BrQk2g6L.js";import{V as Xe}from"./ViewOr-Dz6eUtqU.js";import{u as Ie}from"./useMock-DJfXKqZH.js";import{a as Ce}from"./FloatingHand-Cg08vPsR.js";import{T as J}from"./TurnOrder-2_M9TKHg.js";import{c as Ke,d as en,R as O}from"./RuleInstruction-Btli7eqi.js";import{T as nn,a as rn,u as Pe,R as sn,b as tn,c as on}from"./index.esm-Cyjisdfu.js";import{R as an}from"./QuestionCircleFilled-YYuInyU_.js";import{R as cn}from"./StarFilled-Bnub0xHC.js";import{T as ln}from"./DoubleRightOutlined-D2kncvj1.js";import{M as Ne}from"./MetricHighlight-AxaK1rop.js";import{S as U}from"./index-BIQtLhPB.js";import{u as dn}from"./SlideShowControls-CWTlSRaS.js";import{S as un}from"./SealOfApprovalIcon-UC4X6caZ.js";import{S as hn}from"./SlideShow-BeXC0J5L.js";import{D as G}from"./index-BrJG7MT0.js";import{R as mn}from"./DragOutlined-DBNWxtnF.js";import{C as Q}from"./Container-C4OuxlYZ.js";import{P as T}from"./PointsHighlight-hSPK-GXh.js";import{F as pn}from"./FlagIcon-8MxhwzMg.js";import"./GameOver-CbLJuZ8D.js";import{G as jn}from"./GameOverWrapper-CkIrNXTg.js";import"./useBlurCards-Dxiqw3s9.js";import"./speech-0Y3SS4rg.js";import"./useDevFeatures-Zx43sa_V.js";import"./RulesModal-YZ1KghfU.js";import"./WritingIcon-CrJWUKfz.js";import"./Game-DEwK5op1.js";import"./WaitingRoomIcon-DIK9PPLV.js";import"./AnimatedClockIcon-C8sKZwsP.js";import"./useMutation-BPQ5yi_x.js";import"./index-Dg7ZDC1l.js";import"./useBubbleLock-CV-NJEmN.js";import"./PurePanel-XHG-Xfh0.js";import"./index-DX1f24Wb.js";import"./index-BR519Ack.js";import"./Avatar-C21Ccx4-.js";import"./GameBanner-DDlUD5zm.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-2gGwPBWJ.js";import"./InfoCircleOutlined-Dmzo0rQ8.js";import"./SignIn-BaqBfmzq.js";import"./GoogleIcon-Zkvbb_FE.js";import"./Loading-BbQscGYc.js";import"./AnimatedLoaderIcon-Aww1iS3v.js";import"./LikeFilled-DEa959YM.js";import"./HandOfCardsIcon-BXUhOX_e.js";import"./StarFilled-CNctUIhy.js";import"./Overflow-DHzkguS2.js";import"./useEvent-kLbeD1Pc.js";import"./StepBackwardOutlined-qONxWXt2.js";import"./TrophyOutlined-BuZqHxAy.js";import"./StarIcon-r42tPGnw.js";import"./ArrowRightOutlined-Ba99KRXO.js";import"./useMergedState-B0_f3esL.js";import"./progress-wXK9np9F.js";import"./TheEndIcon-BSAyuEh8.js";var xn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM381 836H264V462h117v374zm189 0H453V462h117v374zm190 0H642V462h118v374z"}}]},name:"bank",theme:"filled"},gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud",theme:"filled"},fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384z"}}]},name:"customer-service",theme:"filled"},vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M218.9 636.3l42.6 26.6c.1.1.3.2.4.3l12.7 8 .3.3a186.9 186.9 0 0094.1 25.1c44.9 0 87.2-15.7 121-43.8a256.27 256.27 0 01164.9-59.9c52.3 0 102.2 15.7 144.6 44.5l7.9 5-111.6-289V179.8h63.5c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8H264.7c-4.4 0-8 3.6-8 8v51.9c0 4.4 3.6 8 8 8h63.5v173.6L218.9 636.3zm333-203.1c22 0 39.9 17.9 39.9 39.9S573.9 513 551.9 513 512 495.1 512 473.1s17.9-39.9 39.9-39.9zM878 825.1l-29.9-77.4-85.7-53.5-.1.1c-.7-.5-1.5-1-2.2-1.5l-8.1-5-.3-.3c-29-17.5-62.3-26.8-97-26.8-44.9 0-87.2 15.7-121 43.8a256.27 256.27 0 01-164.9 59.9c-53 0-103.5-16.1-146.2-45.6l-28.9-18.1L146 825.1c-2.8 7.4-4.3 15.2-4.3 23 0 35.2 28.6 63.8 63.8 63.8h612.9c7.9 0 15.7-1.5 23-4.3a63.6 63.6 0 0036.6-82.5z"}}]},name:"experiment",theme:"filled"},bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M160 894c0 17.7 14.3 32 32 32h286V550H160v344zm386 32h286c17.7 0 32-14.3 32-32V550H546v376zm334-616H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v140h366V310h68v172h366V342c0-17.7-14.3-32-32-32zm-402-4h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70 70 31.4 70 70v70zm138 0h-70v-70c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70z"}}]},name:"gift",theme:"filled"},yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 00-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]},name:"home",theme:"filled"},wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.2 278.1a32 32 0 00-30.4-22.1H736V144c0-17.7-14.3-32-32-32H320c-17.7 0-32 14.3-32 32v112h-72.8a31.9 31.9 0 00-30.4 22.1L112 502v378c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V502l-72.8-223.9zM660 628c0 4.4-3.6 8-8 8H544v108c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V636H372c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h108V464c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v108h108c4.4 0 8 3.6 8 8v48zm4-372H360v-72h304v72z"}}]},name:"medicine-box",theme:"filled"},In={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h274V736h128v176h274c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zm-72 568H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm0-568.1H214v-88h596v88z"}}]},name:"shop",theme:"filled"},Cn={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 192a32 32 0 0132 32v160h174.81a32 32 0 0126.68 14.33l113.19 170.84a32 32 0 015.32 17.68V672a32 32 0 01-32 32h-96c0 70.7-57.3 128-128 128s-128-57.3-128-128H384c0 70.7-57.3 128-128 128s-128-57.3-128-128H96a32 32 0 01-32-32V224a32 32 0 0132-32zM256 640a64 64 0 000 128h1.06A64 64 0 00256 640m448 0a64 64 0 000 128h1.06A64 64 0 00704 640m93.63-192H640v145.12A127.43 127.43 0 01704 576c47.38 0 88.75 25.74 110.88 64H896v-43.52zM500 448H332a12 12 0 00-12 12v40a12 12 0 0012 12h168a12 12 0 0012-12v-40a12 12 0 00-12-12M308 320H204a12 12 0 00-12 12v40a12 12 0 0012 12h104a12 12 0 0012-12v-40a12 12 0 00-12-12"}}]},name:"truck",theme:"filled"};function X(){return X=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},X.apply(this,arguments)}const Pn=(r,n)=>u.createElement(I,X({},r,{ref:n,icon:xn})),Nn=u.forwardRef(Pn);function K(){return K=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},K.apply(this,arguments)}const Sn=(r,n)=>u.createElement(I,K({},r,{ref:n,icon:gn})),On=u.forwardRef(Sn);function ee(){return ee=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},ee.apply(this,arguments)}const Rn=(r,n)=>u.createElement(I,ee({},r,{ref:n,icon:fn})),En=u.forwardRef(Rn);function ne(){return ne=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},ne.apply(this,arguments)}const Tn=(r,n)=>u.createElement(I,ne({},r,{ref:n,icon:vn})),An=u.forwardRef(Tn);function re(){return re=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},re.apply(this,arguments)}const Mn=(r,n)=>u.createElement(I,re({},r,{ref:n,icon:bn})),Ln=u.forwardRef(Mn);function se(){return se=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},se.apply(this,arguments)}const zn=(r,n)=>u.createElement(I,se({},r,{ref:n,icon:yn})),Fn=u.forwardRef(zn);function te(){return te=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},te.apply(this,arguments)}const _n=(r,n)=>u.createElement(I,te({},r,{ref:n,icon:wn})),Hn=u.forwardRef(_n);function oe(){return oe=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},oe.apply(this,arguments)}const $n=(r,n)=>u.createElement(I,oe({},r,{ref:n,icon:In})),Vn=u.forwardRef($n);function ae(){return ae=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}return r},ae.apply(this,arguments)}const Bn=(r,n)=>u.createElement(I,ae({},r,{ref:n,icon:Cn})),Wn=u.forwardRef(Bn),L={PLANNING:"PLANNING",PLACING:"PLACING",RESOLUTION:"RESOLUTION"},pe={SUBMIT_PLANNING:"SUBMIT_PLANNING",UPDATE_PLACEMENT:"UPDATE_PLACEMENT",SUBMIT_PLACEMENTS:"SUBMIT_PLACEMENTS"},Un=8;function Gn(r){const{translate:n}=ie(),s=ce({actionName:"submit-planning",onSuccess:()=>r(2),onError:()=>r(0),successMessage:n("Planejamento submetido com sucesso","Planning submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu planejamento","Oops, the application found an error while trying to submit your planning")});return t=>{s({action:pe.SUBMIT_PLANNING,...t})}}function Dn(r){const{translate:n}=ie(),s=ce({actionName:"submit-placing",onSuccess:()=>r(2),onError:()=>r(0),successMessage:n("Construção submetida com sucesso","Construction submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua construção","Oops, the application found an error while trying to submit your construction")});return t=>{s({action:pe.SUBMIT_PLACEMENTS,...t})}}function qn(){const{translate:r}=ie(),n=ce({actionName:"update-placing",successMessage:r("Construção atualizada com sucesso","Construction updated successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar sua construção","Oops, the application found an error while trying to submit your construction")});return s=>{n({action:pe.UPDATE_PLACEMENT,...s})}}function kn(){return e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Fazemos parte do comitê de planejamento urbano da cidade e somos responsáveis por decidir onde novos prédios e estabelecimentos serão construídos. Em cada rodada, um jogador assumirá o papel de engenheiro-chefe, encarregado de planejar as melhores localizações para as novas construções."}),en:e.jsx(e.Fragment,{children:"We are part of the city's urban planning committee and are responsible for deciding where new buildings and establishments will be built. In each round, a player will take on the role of chief engineer, responsible for planning the best locations for new constructions"})})}const B=r=>({A:"green",B:"red",C:"yellow",D:"purple"})[r]??"gray";function Se({maxWidth:r,maxHeight:n,grid:s,cellComponent:t,className:c,contentClassName:o,contentStyle:l={},cellProps:i,transformWrapperProps:m,hideControls:h=!1,additionalContent:d}){const p=t,{initialScale:f=1,minScale:C=.25,maxScale:j=4,wheel:E={step:.5},centerOnInit:v=!0,...x}=m??{};return e.jsx("div",{className:R("grid-map-container"),children:e.jsx(nn,{initialScale:f,minScale:C,maxScale:j,wheel:E,centerOnInit:v,...x,children:e.jsxs(u.Fragment,{children:[!h&&e.jsx(xe,{position:"top"}),d,e.jsx(rn,{wrapperClass:R("grid-map-wrapper",c),wrapperStyle:{maxWidth:r,maxHeight:n},contentClass:R("grid-map",o),contentStyle:{display:"grid",gridTemplateColumns:`repeat(${s.width}, 1fr)`,gridTemplateRows:`repeat(${s.height}, 1fr)`,...l},children:s.cells.map(y=>e.jsx(p,{cell:y,grid:s,cellProps:i},y.id))}),!h&&e.jsx(xe,{position:"bottom"})]})})})}function xe({position:r}){const{zoomIn:n,zoomOut:s,resetTransform:t}=Pe();return e.jsxs(ze.Compact,{size:"small",className:R("grid-map-controls",`grid-map-controls--${r}`),children:[e.jsx(A,{onClick:()=>n(),children:e.jsx(sn,{})}),e.jsx(A,{onClick:()=>s(),children:e.jsx(tn,{})}),e.jsx(A,{onClick:()=>t(),children:e.jsx(on,{})})]})}const Oe=r=>H(r+2,{maxWidth:300,gap:16});function N({locationId:r,cityLocationsDict:n,width:s,className:t,fontSize:c}){const o=n==null?void 0:n[r];return e.jsx("div",{className:R("city-site city-site--constructed",t),style:{width:s,height:s,backgroundImage:`url('${Fe.IN_GAME}city-image.jpg')`},children:e.jsxs("span",{children:[e.jsx("div",{className:"city-site-category",children:Jn(o.category)}),e.jsx(F.Text,{className:R("city-site-name",`city-site-name--${c}`),children:e.jsx(ve,{children:o.name})})]})})}const Jn=r=>{switch(r){case"Accommodation":return e.jsx(Ln,{});case"Government":return e.jsx(Nn,{});case"Commercial":return e.jsx(Vn,{});case"Cultural":return e.jsx(en,{});case"Education":return e.jsx(Ke,{});case"Entertainment":return e.jsx(En,{});case"Industrial":return e.jsx(An,{});case"Infrastructure":return e.jsx(Hn,{});case"Natural":return e.jsx(On,{});case"Residential":return e.jsx(Fn,{});case"Transportation":return e.jsx(Wn,{});case"Special":return e.jsx(cn,{});default:return e.jsx(an,{})}};function Re({cell:r,grid:n,cellProps:s}){var l,i,m;const{cityLocationsDict:t={},mapEvaluations:c={}}=s??{},o={width:s==null?void 0:s.cellWidth,height:s==null?void 0:s.cellWidth};if(!r.data)return e.jsx("div",{style:o,className:"city-site city-site--unavailable",children:"."});if((l=r.data)!=null&&l.locationId)return e.jsx("div",{style:o,id:`cell-${r.id}`,children:e.jsx(N,{locationId:r.data.locationId,cityLocationsDict:t,width:Number(o.width??75)})});if((i=r.data)!=null&&i.coneId){const h=B(r.data.coneId),d=c[r.data.coneId];return e.jsxs("div",{style:o,className:"city-site",id:`cell-${r.id}`,children:[d&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"city-site--temp-construction-cone",children:e.jsx(z,{color:h,width:32})}),e.jsx(N,{locationId:d,cityLocationsDict:t,width:Number(o.width??75),className:R("city-site--temp-construction",`city-site--temp-construction-${(m=r.data)==null?void 0:m.coneId}`)})]}),e.jsxs("div",{className:"city-site-available",children:[e.jsx(z,{color:h,width:64}),e.jsx(ln,{color:h,children:r.data.coneId??"U"})]})]})}return e.jsx("div",{style:o,id:`cell-${r.id}`,className:"city-site city-site--unavailable",children:"."})}function Y({city:r,cityLocationsDict:n,mapEvaluations:s}){const t=be(),c=Oe(r.width);return e.jsx(Se,{maxWidth:t.width,maxHeight:t.height,grid:r,cellComponent:Re,cellProps:{cellWidth:c,cityLocationsDict:n,mapEvaluations:s}})}function ge({children:r}){return e.jsx(Ne,{icon:e.jsx(me,{}),children:r})}function k({children:r}){return e.jsx(Ne,{icon:e.jsx(z,{}),children:r})}function Yn({players:r,announcement:n,gameOrder:s,activePlayerId:t,availableProjectsIds:c,city:o,cityLocationsDict:l,placements:i,onSubmitPlanning:m}){const{isLoading:h}=ye(),d=H(i+3,{maxWidth:256}),p=u.useMemo(()=>Array.from({length:i},(v,x)=>({value:M[x],label:e.jsxs("span",{children:[e.jsx(_,{size:"small",icon:e.jsx(z,{color:B(M[x]),width:24})}),M[x]]})})),[i]),[f,C]=u.useState({}),j=(v,x)=>{C(y=>({...y,[v]:x}))},E=Object.keys(f).length===i&&new Set(Object.values(f)).size===i;return Ie(),e.jsxs($,{fullWidth:!0,announcement:n,children:[e.jsx(V,{size:"small",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Decida onde as ",i," novos projetos devem ser construídos"]}),en:e.jsxs(e.Fragment,{children:["Decide where the ",i," new projects should be built"]})})}),e.jsx(O,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["No mapa, existem ",e.jsxs(k,{children:[i," cones"]})," representando onde as terrenos onde os projetos podem ser feitos.",e.jsx("br",{}),"Na barra no final da tela, você tem os"," ",e.jsxs(ge,{children:[i," projetos"]}),", em segredo, decida qual projeto vai para qual cone."]}),en:e.jsxs(e.Fragment,{children:["On the map, there are ",e.jsxs(k,{children:[i," cones"]})," representing the land where the projects can be built.",e.jsx("br",{}),"At the bottom of the screen, you have"," ",e.jsxs(ge,{children:[i," projects"]}),", in secret, decide which project goes to which cone."]})})}),e.jsx(Y,{city:o,cityLocationsDict:l}),e.jsx(J,{players:r,activePlayerId:t,order:s}),e.jsxs(Ce,{icon:e.jsx(me,{}),title:e.jsx(a,{pt:"Novos Projetos",en:"New Projects"}),children:[e.jsx(g,{justify:"center",children:e.jsx(A,{type:"primary",size:"large",disabled:h||!E,onClick:()=>m({planning:f}),children:e.jsx(a,{pt:"Confirmar",en:"Confirm"})})}),e.jsx(g,{justify:"center",className:"mt-2",gap:6,children:c.map(v=>e.jsxs(g,{vertical:!0,align:"center",children:[e.jsx(U,{options:p,className:"full-width",placeholder:e.jsx(a,{pt:"Selecione um cone",en:"Select a cone"}),value:f[v],onChange:x=>j(v,x)}),e.jsx(N,{locationId:v,cityLocationsDict:l,width:d})]},v))})]})]})}function Zn({announcement:r,players:n,gameOrder:s,activePlayer:t,city:c,cityLocationsDict:o}){return e.jsxs($,{fullWidth:!0,announcement:r,children:[e.jsx(V,{size:"small",wait:!0,children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:[e.jsx(w,{player:t})," está planejando a cidade."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(w,{player:t})," is planning the city."]})})}),e.jsx(O,{type:"wait",children:e.jsx(a,{pt:"Aguarde enquanto o engenheiro chefe planeja a cidade. Você pode observar o mapa e os cones representando as possíveis localizações para a construção",en:"Wait while the chief engineer plans the city. You can observe the map and the cones representing the possible locations for construction"})}),e.jsx(Y,{city:c,cityLocationsDict:o}),e.jsx(J,{players:n,activePlayerId:t.id,order:s})]})}function Qn({players:r,state:n}){var h;const{step:s,goToNextStep:t,setStep:c}=le(),[o,l]=D("activePlayerId",n,r),i=Gn(c),m=e.jsx(de,{icon:e.jsx(ke,{}),title:e.jsx(a,{pt:"Planejamento",en:"Planning"}),currentRound:(h=n==null?void 0:n.round)==null?void 0:h.current,type:"overlay",children:e.jsxs(q,{children:[e.jsx(kn,{}),e.jsx("br",{}),e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Para essa rodada, ",e.jsx(w,{player:o,addressUser:!0})," é o engenheiro chefe."]}),en:e.jsxs(e.Fragment,{children:["In this round, ",e.jsx(w,{player:o,addressUser:!0})," is the chief engineer."]})})]})});return e.jsx(ue,{phase:n==null?void 0:n.phase,allowedPhase:L.PLANNING,children:e.jsxs(he,{step:s,players:r,children:[e.jsx(Qe,{round:n.round,onPressButton:t,time:3,children:e.jsx(q,{contained:!0,children:e.jsx(a,{pt:"Somos arquitetos e urbanistas, e estamos planejando a cidade!",en:"We are architects and urban planners, and we are planning a city!"})})}),e.jsxs(Xe,{condition:l,children:[e.jsx(Yn,{announcement:m,players:r,activePlayerId:n.activePlayerId,gameOrder:n.gameOrder,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:n.placements,availableProjectsIds:n.availableProjectsIds,onSubmitPlanning:i}),e.jsx(Zn,{announcement:m,players:r,gameOrder:n.gameOrder,activePlayer:o,city:n.city,cityLocationsDict:n.cityLocationsDict})]})]})})}function Xn({players:r,announcement:n,gameOrder:s,availableProjectsIds:t,controller:c,isTheController:o,isTheActivePlayer:l,activePlayer:i,city:m,cityLocationsDict:h,placements:d,evaluations:p,planning:f,onSubmitConstruction:C,onUpdateConstruction:j}){const{isLoading:E}=ye(),v=H(d+3,{maxWidth:256}),x=u.useMemo(()=>Array.from({length:d},(b,P)=>({value:M[P],label:e.jsxs(g,{justify:"center",align:"center",children:[e.jsx(_,{size:"small",icon:e.jsx(z,{color:B(M[P]),width:24})}),M[P]]})})),[d]),[y,Ee]=u.useState(p),Te=u.useMemo(()=>_e.invert(p),[p]),Ae=(b,P)=>{const S={...y},je=Object.values(S).find(W=>W===P);if(je){const W=Object.keys(S).find(Le=>S[Le]===je);W&&delete S[W]}S[b]=P,j({evaluations:S}),Ee(S)},Me=Object.keys(y).length===d&&new Set(Object.values(y)).size===d;return Ie(),e.jsxs($,{fullWidth:!0,announcement:n,children:[e.jsx(V,{size:"small",wait:l,children:l?e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Aguarde enquanto os jogadores discutem e decidem onde cada projeto deve ir"}),en:e.jsx(e.Fragment,{children:"Wait while the players discuss and decide where each project should go"})}):e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Discutam e decidam onde cada projeto deve ir"}),en:e.jsx(e.Fragment,{children:"Discuss and decide where each project should go"})})}),e.jsx(O,{type:l?"wait":"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["No mapa, existem ",e.jsxs(k,{children:[d," cones"]})," representando onde as terrenos onde os projetos podem ser feitos. ",e.jsx("br",{}),"O objetivo é fazer as construções de acordo com o que",e.jsx(w,{player:i})," planejou.",e.jsx("br",{}),e.jsx(w,{player:c,addressUser:!0})," é o pedreiro e controlará as decisões do grupo."]}),en:e.jsxs(e.Fragment,{children:["On the map, there are ",e.jsxs(k,{children:[d," cones"]})," representing the land where the projects can be built. ",e.jsx("br",{}),e.jsx("br",{}),e.jsx(w,{player:c,addressUser:!0})," ",o?"are":"is"," the bricklayer and will control the group's decisions."]})})}),o&&e.jsx(we,{children:e.jsx(A,{type:"primary",size:"large",disabled:E||!Me,onClick:()=>C({evaluations:y}),children:e.jsx(a,{pt:"Confirmar Seleções",en:"Confirm Selections"})})}),!o&&e.jsx(g,{justify:"center",className:"mt-2",gap:6,children:t.map(b=>e.jsxs(g,{vertical:!0,align:"center",children:[e.jsx(U,{options:x,className:"full-width",value:p[b],disabled:!0,variant:"borderless"}),e.jsx(N,{locationId:b,cityLocationsDict:h,width:v/1.75,fontSize:"small"}),l&&e.jsx(U,{options:x,className:"full-width",value:f[b],variant:"filled",disabled:!0})]},b))}),e.jsx(Y,{city:m,cityLocationsDict:h,mapEvaluations:Te}),e.jsx(J,{players:r,activePlayerId:i.id,order:s}),o&&e.jsx(Ce,{icon:e.jsx(me,{}),title:e.jsx(a,{pt:"Construções",en:"Constructions"}),children:e.jsx(g,{justify:"center",children:t.map(b=>e.jsxs(g,{vertical:!0,align:"center",children:[e.jsx(U,{options:x,className:"full-width",placeholder:e.jsx(a,{pt:"Selecione um cone",en:"Select a cone"}),value:y[b],onChange:P=>Ae(b,P),disabled:E}),e.jsx(N,{locationId:b,cityLocationsDict:h,width:v})]},b))})})]})}function Kn({players:r,state:n}){var p;const{step:s,setStep:t}=le(),[c,o]=D("activePlayerId",n,r),[l,i]=D("controllerId",n,r),m=Dn(t),h=qn(),d=e.jsx(de,{icon:e.jsx(Je,{}),title:e.jsx(a,{pt:"Construção",en:"Construction"}),currentRound:(p=n==null?void 0:n.round)==null?void 0:p.current,type:"overlay",children:e.jsx(q,{children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Agora, é hora de colocar as construções de acordo com o planejamento do engenheiro chefe.",e.jsx("br",{}),e.jsx(w,{player:l,addressUser:!0})," é o responsável por essa etapa."]}),en:e.jsxs(e.Fragment,{children:["Now, it's time to place the buildings according to the chief engineer's planning.",e.jsx("br",{}),e.jsx(w,{player:l,addressUser:!0})," is responsible for this step."]})})})});return e.jsx(ue,{phase:n==null?void 0:n.phase,allowedPhase:L.PLACING,children:e.jsx(he,{step:s,players:r,children:e.jsx(Xn,{announcement:d,players:r,activePlayer:c,controller:l,gameOrder:n.gameOrder,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:n.placements,availableProjectsIds:n.availableProjectsIds,onSubmitConstruction:m,onUpdateConstruction:h,evaluations:n.evaluations??{},planning:n.planning??{},isTheController:i,isTheActivePlayer:o})})})}function er({city:r,cityLocationsDict:n,mapEvaluations:s,height:t,width:c,focusedCellId:o}){const l=be(),i=Oe(r.width);return e.jsx(Se,{maxWidth:Math.min(t,l.width/2),maxHeight:Math.min(c,l.height/2),grid:r,cellComponent:Re,cellProps:{cellWidth:i,cityLocationsDict:n,mapEvaluations:s},additionalContent:e.jsx(nr,{focusedCellId:o})})}function nr({focusedCellId:r}){const{zoomToElement:n}=Pe();return u.useEffect(()=>{r&&n(`cell-${r}`,1.1)},[r]),e.jsx(e.Fragment,{})}function rr({activePlayer:r,city:n,cityLocationsDict:s,placements:t,gallery:c,slideShowConfig:o}){We();const[l,{width:i,height:m}]=He(),h=H(t+5,{maxWidth:256}),d=c[o.slideIndex],p=B(d.cone);return e.jsxs($,{fullWidth:!0,children:[e.jsx(V,{size:"small",children:e.jsx(a,{pt:"Construções",en:"Constructions"})}),e.jsxs(hn,{config:o,barColor:p,leftClassName:"pu-gallery__map",rightClassName:"pu-gallery__info",nextButtonProps:{children:e.jsx(a,{pt:"Ver Resultado",en:"See Results"})},children:[e.jsx("div",{style:{height:"100%"},ref:l,children:e.jsx(er,{city:n,cityLocationsDict:s,width:Math.max(i,200),height:Math.max(m,200),focusedCellId:d.correctCellId})}),e.jsxs("div",{children:[e.jsx("div",{className:"pu-gallery__label",children:e.jsx(a,{pt:"Projeto",en:"Project"})}),e.jsx("div",{className:"pu-gallery__construction",children:e.jsx(N,{locationId:d.locationId,cityLocationsDict:s,width:h,fontSize:"small"})}),e.jsx(G,{className:"my-2"}),e.jsxs("div",{className:"pu-gallery__label",children:[e.jsx(a,{pt:"Plano do Engenheiro Chefe",en:"Chief Engineer's Plan"})," ",e.jsx(w,{player:r})]}),e.jsx(fe,{cone:d.cone,adjacentLocationsIds:d.coneAdjacentLocationsIds,cityLocationsDict:s}),e.jsx(G,{className:"my-2"}),e.jsx("div",{className:"pu-gallery__label",children:e.jsx(a,{pt:"Decisão dos Pedreiros",en:"Builders' Decision"})}),e.jsx(fe,{cone:d.guess,adjacentLocationsIds:d.guessAdjacentLocationsIds,cityLocationsDict:s}),e.jsx(G,{className:"my-2"}),e.jsx("div",{className:"pu-gallery__label",children:e.jsx(a,{pt:"Resultado",en:"Result"})}),e.jsx("div",{children:d.result==="CORRECT"?e.jsxs(g,{gap:8,align:"center",children:[e.jsx(_,{icon:e.jsx(un,{}),size:64}),e.jsx(F.Text,{italic:!0,children:e.jsx(a,{pt:"O público aprovou esse projeto e ele será construído!",en:"The public approved this project and it will be built!"})})]}):e.jsxs(g,{gap:8,align:"center",children:[e.jsx(_,{icon:e.jsx(Ye,{}),size:64}),e.jsx(F.Text,{italic:!0,children:e.jsx(a,{pt:"Prefeito: Como vocês podem ser tão burros? Isso é um desastre! Eu tive 2.41% de desaprovação! Vou colocar a construção onde ele quiser!",en:"Mayor: How can you be so dumb? This is a disaster! I had 2.41% disapproval! I'll put the construction wherever I want!"})})]})})]})]})]})}function fe({cone:r,adjacentLocationsIds:n,cityLocationsDict:s}){return e.jsxs(g,{gap:8,align:"center",children:[e.jsxs(g,{justify:"center",align:"center",children:[r,e.jsx(_,{size:48,icon:e.jsx(z,{color:B(r),width:48})})]}),e.jsx(G,{type:"vertical"}),e.jsx(g,{vertical:!0,children:n.map(t=>{var c;return e.jsxs(F.Text,{children:[e.jsx(mn,{})," ",e.jsx(ve,{children:(c=s==null?void 0:s[t])==null?void 0:c.name})]},t)})})]})}function sr({players:r,onGoBack:n,round:s,status:t,correct:c,placements:o,gallery:l,cityLocationsDict:i,gameOrder:m,controllerId:h,groupScore:d}){const p=u.useMemo(()=>l.filter(j=>j.result==="CORRECT"),[l]),f=u.useMemo(()=>l.filter(j=>j.result==="INCORRECT"),[l]),C=H(o+5,{maxWidth:256});return e.jsxs($,{fullWidth:!0,children:[e.jsx(V,{size:"small",children:e.jsx(a,{pt:"Resultado",en:"Summary"})}),e.jsx(O,{type:"scoring",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["O grupo ganha um ponto por cada projeto construído corretamente.",e.jsx("br",{}),"Nessa rodada, ganhamos ",e.jsx(T,{children:c}),". Total"," ",e.jsx(T,{children:d}),"."]}),en:e.jsxs(e.Fragment,{children:["The group earns one point for each project built correctly.",e.jsx("br",{}),"This round, we earned ",e.jsx(T,{children:c}),". Total"," ",e.jsx(T,{children:d}),"."]})})}),e.jsxs(Q,{title:e.jsx(a,{pt:"Projetos Corretos",en:"Correct Projects"}),children:[p.map(j=>e.jsx(N,{locationId:j.locationId,cityLocationsDict:i,width:C,fontSize:"small"},j.locationId)),p.length===0&&e.jsx(O,{type:"alert",children:e.jsx(F.Text,{children:e.jsx(a,{pt:"Nenhum projeto construído corretamente",en:"No project built correctly"})})})]}),f.length>0&&e.jsx(Q,{title:e.jsx(a,{pt:"Projetos Incorretos",en:"Incorrect Projects"}),children:f.map(j=>e.jsx(N,{locationId:j.locationId,cityLocationsDict:i,width:C,fontSize:"small"},j.locationId))}),f.length>0&&e.jsx(O,{type:"event",children:e.jsx(a,{pt:"Quando um projeto não é construído corretamente, o prefeito coloca o projeto em uma localização diagonal aleatória, fazendo o jogo ficar mais difícil.",en:"When a project is not built correctly, the mayor places the project in a random diagonal location, making the game more difficult."})}),t==="PERFECT"&&e.jsx(O,{type:"event",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Todos os projetos foram construídos corretamente! Parabéns!",e.jsx("br",{}),"A partir de agora, serão ",o," projetos por rodada.",e.jsx("br",{}),e.jsx(T,{children:"1 ponto"})," extra!"]}),en:e.jsxs(e.Fragment,{children:["All projects were built correctly! Congratulations!",e.jsx("br",{}),"From now on, there will be ",o," projects per round.",e.jsx("br",{}),e.jsx(T,{children:"1 bonus"})," point!"]})})}),e.jsx(J,{players:r,activePlayerId:h,order:m}),e.jsx(we,{children:e.jsx(A,{onClick:n,children:e.jsx(a,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(Ue,{round:s})]})}function tr({players:r,state:n}){var m;const{step:s,goToNextStep:t,goToPreviousStep:c}=le(0),o=dn({length:n.gallery.length,slideDuration:Un,onExpire:t}),l=()=>{o.reset(),c()},[i]=D("activePlayerId",n,r);return e.jsx(ue,{phase:n==null?void 0:n.phase,allowedPhase:L.RESOLUTION,children:e.jsxs(he,{step:s,players:r,children:[e.jsx(de,{icon:e.jsx(Ze,{}),title:e.jsx(a,{pt:"Resultado",en:"Results"}),currentRound:(m=n==null?void 0:n.round)==null?void 0:m.current,type:"block",unskippable:!0,duration:3,onClose:t,children:e.jsx(q,{children:e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Vamos ver se vocês, pedreiros, pensaram como o engenheiro chefe,"}),en:e.jsx(e.Fragment,{children:"Let's see if you, builders, thought like the chief engineer,"})})})}),e.jsx(rr,{activePlayer:i,city:n.city,cityLocationsDict:n.cityLocationsDict,placements:n.placements,gallery:n.gallery,slideShowConfig:o}),e.jsx(sr,{players:r,round:n.round,cityLocationsDict:n.cityLocationsDict,placements:n.placements,gallery:n.gallery,correct:n.correct,status:n.status,onGoBack:l,groupScore:n.groupScore,gameOrder:n.gameOrder,controllerId:n.controllerId})]})})}function or({state:r,players:n}){return e.jsx(jn,{state:r,players:n,announcementIcon:e.jsx(pn,{}),children:e.jsx(Q,{title:e.jsx(a,{pt:"Cidade Inaugurada",en:"Final City"}),children:r.city&&r.cityLocationsDict&&e.jsx(Y,{city:r.city,cityLocationsDict:r.cityLocationsDict})})})}function ar(r){if(r&&!r.phase)return Ve;switch(r.phase){case Z.DEFAULT.LOBBY:return qe;case Z.DEFAULT.SETUP:return De;case L.PLANNING:return Qn;case L.PLACING:return Kn;case L.RESOLUTION:return tr;case Z.DEFAULT.GAME_OVER:return or;default:return Be}}function xs(){return e.jsx(Ge,{gameCollection:$e.PLANEJAMENTO_URBANO,getActiveComponent:ar})}export{xs as default};
