import{f as J,j as e,e as u,b0 as W,T as m,aG as k,br as Y,D as j,r as B,n as b,aY as Z,aW as $,aX as ee}from"./index-BJbMcewC.js";import{u as oe,S as I,b as w,c as X,d as q,P as re,e as z,f as H,a as se,h as ne,i as L,j as ie,k as ae,l as te}from"./StepSwitcher-rx0wj8we.js";import{P}from"./PhasePlaceholder-BSJbRorn.js";import{u as Q}from"./useWhichPlayerIsThe-CclTUGnE.js";import{B as F}from"./BossIdeaIcon-B4XV27_i.js";import{A}from"./AvatarName-Cz5onaCF.js";import{I as y}from"./Instruction-C0w5eOUK.js";import{R as ce}from"./RoundAnnouncement-DIgJoSz-.js";import{u as de}from"./useMakeMeReady-jEe3CQFU.js";import{M as V}from"./MysteryBoxIcon-Btu9RRCp.js";import{W as v}from"./WarehouseGoodCard-CLGPxziZ.js";import{R as N}from"./RuleInstruction-CoIfWJsi.js";import{S as R}from"./ShippingBoxIcon-CRDvZqCP.js";import{M as C}from"./MetricHighlight-BRvXcdP6.js";import{C as U}from"./ClockIcon-D5ne64gV.js";import{D as E}from"./index-BQsQBMGT.js";import{T as le}from"./speech-BzF0Tbsg.js";import"./useBlurCards-h4CqcxLY.js";import"./RulesModal-5YFYEaWp.js";import"./WritingIcon-BYhKh5xx.js";import"./DoubleRightOutlined-Bh1gtdGl.js";import"./PurePanel-BhaI8rGP.js";import"./useMutation-Degx59lO.js";import"./Game-Du3sO8nj.js";import"./WaitingRoomIcon-B4cmtU0l.js";import"./AnimatedClockIcon-DCJB2xRd.js";import"./index-Dtng7KWC.js";import"./useBubbleLock-DydJhBtG.js";import"./index-CvKgvH-N.js";import"./Overflow-BrCXp-wl.js";import"./useEvent-C_peVPrM.js";import"./index-DdgCAG4x.js";import"./index-Bym3idcJ.js";import"./Avatar-BoSa6615.js";import"./GameBanner-CO2fVTis.js";import"./useDevFeatures-Cu-9UbBe.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CCy9qnwE.js";import"./InfoCircleOutlined-CzPaz6Qn.js";import"./SignIn-B0U51EtO.js";import"./GoogleIcon-B9ZULqYD.js";import"./Loading-Bx6gW_1G.js";import"./AnimatedLoaderIcon-BJTCPZJu.js";import"./LikeFilled-BXKKEWW3.js";import"./Sprite-9st0laaD.js";import"./WarningOutlined-Dl61a8DW.js";import"./StarFilled-C9qTiDP8.js";import"./StarFilled-CNctUIhy.js";const f={GOOD_PLACEMENT:"GOOD_PLACEMENT",PLACEMENT_CONFIRMATION:"PLACEMENT_CONFIRMATION",FULFILLMENT:"FULFILLMENT",RESULTS:"RESULTS"},ue=[{en:"Monday",pt:"Segunda-feira"},{en:"Tuesday",pt:"Terça-feira"},{en:"Wednesday",pt:"Quarta-feira"},{en:"Thursday",pt:"Quinta-feira"},{en:"Friday",pt:"Sexta-feira"},{en:"Saturday",pt:"Sábado"},{en:"Sunday",pt:"Domingo"}],l={TINTED_GLASS:"TINTED_GLASS",CONFIDENTIAL:"CONFIDENTIAL",EYE_EXAM:"EYE_EXAM"};function K(){const{translate:n}=J(),o=oe({actionName:"submit-place-good",successMessage:n("Ação submetida com sucesso","Action submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ação","Oops, the application found an error while trying to submit your action")});return s=>{o({action:"PLACE_GOOD",...s})}}function he(){return de({})}function D({goodsDict:n,warehouse:o,width:s,onPlaceGood:r,goodClassName:c,conceal:d}){const a={width:s,height:s};return e.jsx("div",{className:"warehouse",children:o.map((i,t)=>{if(i.available)return e.jsx("div",{className:u("warehouse__empty-shelf warehouse__empty-available-shelf"),style:a,children:r?e.jsx("button",{type:"button",className:"warehouse__empty-shelf-button",onClick:()=>r==null?void 0:r(t),children:i.temporaryName??"?"}):i.temporaryName??"?"},t);if(i.amenityId)return e.jsx(e.Fragment,{});if(i.goodId){const h=n[i.goodId];return h.exposed?d?e.jsx(V,{width:s}):e.jsx("div",{className:u("warehouse__shelf","warehouse__shelf-active"),style:a,children:e.jsx(v,{id:h.id,width:s-12,className:u(W("bounce"),c)})},t):e.jsx("div",{className:u("warehouse__shelf",W("flipInY")),style:a,children:e.jsx(R,{width:s-12})},t)}return e.jsx("div",{className:u("warehouse__empty-shelf"),style:a,children:"."},t)})})}function G({stockingCount:n,stockingRoundCount:o,stocked:s}){return e.jsx(m,{en:e.jsxs(e.Fragment,{children:["Round goods:"," ",e.jsxs(C,{icon:e.jsx(U,{}),children:[n,"/",o]}),e.jsx("br",{}),"Stocked Goods: ",e.jsxs(C,{icon:e.jsx(R,{}),children:[s,"/35"]})]}),pt:e.jsxs(e.Fragment,{children:["Mercadorias da rodada:"," ",e.jsxs(C,{icon:e.jsx(U,{}),children:[n,"/",o]}),e.jsx("br",{}),"Mercadorias estocadas: ",e.jsxs(C,{icon:e.jsx(R,{}),children:[s,"/35"]})]})})}function me({players:n,user:o,announcement:s,bossIdea:r,roundGoods:c,roundsGoodIndex:d,goodsDict:a,warehouse:i,supervisor:t,isUserTheSupervisor:h,onPlaceGood:T,stocked:p}){const{isLoading:_}=k(),[x,S]=Y(7,{minWidth:60,maxWidth:80,margin:16}),g=a[c[d]],O=M=>{T({goodId:g.id,newWarehouseSlot:M,previousWarehouseSlot:g.slot})};return h?e.jsxs(I,{fullWidth:!0,announcement:s,ref:S,children:[e.jsx(w,{icon:e.jsx(F,{}),children:e.jsx(j,{children:r.title})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Coloque a mercadoria do galpão!"}),en:e.jsx(e.Fragment,{children:"Place the good in the warehouse"})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:r.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:d,stockingRoundCount:c.length,stocked:p})]}),e.jsx(y,{contained:!0,children:e.jsx(v,{id:g.id,width:x,className:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})}),e.jsx(D,{goodsDict:a,warehouse:i,onPlaceGood:_?void 0:O,width:x,goodClassName:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",r.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(I,{fullWidth:!0,announcement:s,ref:S,children:[e.jsx(w,{icon:e.jsx(F,{}),children:e.jsx(j,{children:r.title})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:t,size:"small"})," é o(a) supervisor(a) do dia e colocará a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:t})," is the supervisor of the day and will place the good in the warehouse."]})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:r.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:d,stockingRoundCount:c.length,stocked:p})]}),e.jsx(y,{contained:!0,children:r.id===l.CONFIDENTIAL?e.jsx(e.Fragment,{children:e.jsx(V,{width:x})}):e.jsx(v,{id:g.id,width:x,className:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS")})}),e.jsx(D,{goodsDict:a,warehouse:i,width:x,goodClassName:u(r.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:r.id===l.CONFIDENTIAL})]})}function pe({players:n,state:o}){var p;const s=X(n,o),[r,c]=Q("supervisorId",o,n),d=K(),{step:a,goToNextStep:i}=q(o.roundGoodsIndex===0?0:1),t=o==null?void 0:o.bossIdea,h=e.jsx(re,{icon:e.jsx(F,{}),title:e.jsx(j,{children:t.subtitle}),currentRound:(p=o==null?void 0:o.round)==null?void 0:p.current,type:"overlay",duration:o.roundGoodsIndex===0?15:5,children:e.jsxs(y,{children:['"',e.jsx(m,{en:"The floor supervisor for the day will be",pt:"O supervisor do dia será"})," ",e.jsx(A,{player:r,addressUser:!0}),'."']})}),T=B.useMemo(()=>b.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(z,{phase:o==null?void 0:o.phase,allowedPhase:f.GOOD_PLACEMENT,children:e.jsxs(H,{step:a,players:n,children:[e.jsx(ce,{round:o==null?void 0:o.round,onPressButton:i,time:o.roundGoodsIndex===0?10:4,children:e.jsx(y,{contained:!0,children:e.jsx(j,{children:ue[o.round.current-1]})})}),e.jsx(me,{user:s,players:n,announcement:h,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:T,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,stocked:o.stocked})]})})}function xe({players:n,user:o,bossIdea:s,roundGoods:r,roundsGoodIndex:c,goodsDict:d,warehouse:a,supervisor:i,isUserTheSupervisor:t,onPlaceGood:h,onConfirmPlacement:T,stocked:p}){const{isLoading:_}=k(),[x,S]=Y(7,{minWidth:60,maxWidth:80,margin:16}),g=d[r[c]],O=M=>{h({goodId:g.id,newWarehouseSlot:M,previousWarehouseSlot:g.slot})};return se(),t?e.jsxs(I,{fullWidth:!0,ref:S,children:[e.jsx(w,{size:"small",children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Estão todos de acordo com esse local?"}),en:e.jsx(e.Fragment,{children:"Is everyone okay with this location?"})})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:"Você pode trocar a mercadoria de lugar se há outros lugares disponíveis e a equipe decidir.",en:"You may change the location of the good if there are available options and the team agrees."})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:s.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:c+1,stockingRoundCount:r.length,stocked:p})]}),e.jsx(D,{goodsDict:d,warehouse:a,onPlaceGood:_||o.ready?void 0:O,width:x,goodClassName:u(s.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS",s.id===l.EYE_EXAM&&"warehouse-good--EYE_EXAM")})]}):e.jsxs(I,{fullWidth:!0,ref:S,children:[e.jsx(w,{children:e.jsx(m,{pt:e.jsx(e.Fragment,{children:"Concorda com o local escolhido?"}),en:e.jsx(e.Fragment,{children:"Do you agree with the chosen location?"})})}),e.jsxs(N,{type:"lore",children:[e.jsx("strong",{children:e.jsx(m,{pt:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:i,size:"small"})," é o(a) supervisor(a) do dia e colocou a mercadoria no galpão."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(A,{player:i})," is the supervisor of the day and placed the good in the warehouse."]})})}),e.jsx(E,{className:"my-1"}),e.jsx(j,{children:s.description}),e.jsx(E,{className:"my-1"}),e.jsx(G,{stockingCount:c+1,stockingRoundCount:r.length,stocked:p})]}),e.jsx(N,{type:"action",children:e.jsx(m,{pt:"Se você concorda com o local, confirme sua escolha.",en:"If you agree with the location, confirm your choice."})}),e.jsx(y,{children:e.jsx(le,{size:"large",type:"primary",onClick:T,onExpire:T,loading:_,disabled:o.ready,duration:40,children:e.jsx(m,{pt:"Confirmar",en:"Confirm"})})}),e.jsx(D,{goodsDict:d,warehouse:a,width:x,goodClassName:u(s.id===l.TINTED_GLASS&&"warehouse-good--TINTED_GLASS"),conceal:s.id===l.CONFIDENTIAL})]})}function je({players:n,state:o}){const s=X(n,o),[r,c]=Q("supervisorId",o,n),d=K(),a=he(),{step:i}=q(),t=o==null?void 0:o.bossIdea,h=B.useMemo(()=>b.orderBy(o.warehouseGrid,["id"]),[o.warehouseGrid]);return e.jsx(z,{phase:o==null?void 0:o.phase,allowedPhase:f.PLACEMENT_CONFIRMATION,children:e.jsx(H,{step:i,players:n,children:e.jsx(xe,{user:s,players:n,bossIdea:t,roundGoods:o.roundGoods??[],roundsGoodIndex:o.roundsGoodIndex,goodsDict:o.goodsDict,warehouse:h,supervisor:r,isUserTheSupervisor:c,onPlaceGood:d,onConfirmPlacement:a,stocked:o.stocked})})})}function Ee(n){if(n&&!n.phase)return $;switch(n.phase){case L.DEFAULT.LOBBY:return te;case L.DEFAULT.RULES:return ae;case L.DEFAULT.SETUP:return ie;case f.GOOD_PLACEMENT:return pe;case f.PLACEMENT_CONFIRMATION:return je;case f.FULFILLMENT:return P;case f.RESULTS:return P;case L.DEFAULT.GAME_OVER:return P;default:return ee}}function mo(){return e.jsx(ne,{gameCollection:Z.CONTROLE_DE_ESTOQUE,getActiveComponent:Ee})}export{mo as default};
