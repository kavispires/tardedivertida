import{r as s,fJ as d}from"./index-Bb2lwD9c.js";import{u as U}from"./useSetState-C9GI4y_T.js";function D(l){for(var i=[],u=0;u<l.length;u++)i.push({start:l.start(u),end:l.end(u)});return i}function W(l){return function(i){var u,e;s.isValidElement(i)?(u=i,e=u.props):e=i;var m=U({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1,playing:!1}),v=m[0],o=m[1],a=s.useRef(null),r=function(n,t){return function(f){try{t&&t(f)}finally{n&&n(f)}}},g=function(){return o({paused:!1})},p=function(){return o({playing:!0})},y=function(){return o({playing:!1})},P=function(){return o({paused:!0,playing:!1})},h=function(){var n=a.current;n&&o({muted:n.muted,volume:n.volume})},C=function(){var n=a.current;if(n){var t=n.duration,f=n.buffered;o({duration:t,buffered:D(f)})}},T=function(){var n=a.current;n&&o({time:n.currentTime})},b=function(){var n=a.current;n&&o({buffered:D(n.buffered)})};u?u=s.cloneElement(u,d(d({controls:!1},e),{ref:a,onPlay:r(e.onPlay,g),onPlaying:r(e.onPlaying,p),onWaiting:r(e.onWaiting,y),onPause:r(e.onPause,P),onVolumeChange:r(e.onVolumeChange,h),onDurationChange:r(e.onDurationChange,C),onTimeUpdate:r(e.onTimeUpdate,T),onProgress:r(e.onProgress,b)})):u=s.createElement(l,d(d({controls:!1},e),{ref:a,onPlay:r(e.onPlay,g),onPlaying:r(e.onPlaying,p),onWaiting:r(e.onWaiting,y),onPause:r(e.onPause,P),onVolumeChange:r(e.onVolumeChange,h),onDurationChange:r(e.onDurationChange,C),onTimeUpdate:r(e.onTimeUpdate,T),onProgress:r(e.onProgress,b)}));var c=!1,M={play:function(){var n=a.current;if(n&&!c){var t=n.play(),f=typeof t=="object";if(f){c=!0;var V=function(){c=!1};t.then(V,V)}return t}},pause:function(){var n=a.current;if(n&&!c)return n.pause()},seek:function(n){var t=a.current;!t||v.duration===void 0||(n=Math.min(v.duration,Math.max(0,n)),t.currentTime=n)},volume:function(n){var t=a.current;t&&(n=Math.min(1,Math.max(0,n)),t.volume=n,o({volume:n}))},mute:function(){var n=a.current;n&&(n.muted=!0)},unmute:function(){var n=a.current;n&&(n.muted=!1)}};return s.useEffect(function(){var n=a.current;n&&(o({volume:n.volume,muted:n.muted,paused:n.paused}),e.autoPlay&&n.paused&&M.play())},[e.src]),[u,v,M,a]}}var S=W("audio");export{S as u};
