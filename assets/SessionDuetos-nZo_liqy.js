import{f as $,j as e,e as v,q as C,bF as D,aG as H,r as R,T as n,l as y,b0 as G,aL as x,bG as V,i as A,a$ as T,B as W,aY as Y}from"./index-BYXJm2xO.js";import{u as Q,S as q,a as B,b as J,c as O,P as U,d as L,e as z,k as K,g as X,h as Z,i as ee}from"./StepSwitcher-Cgsh0F4P.js";import{S as re}from"./SocksIcon-Brj-T0n0.js";import{I as E}from"./Instruction-D_mf3AkO.js";import{R as se}from"./RoundAnnouncement-BAhaO9Hw.js";import{C as te}from"./ClubberAvatar-BKx2g2aE.js";import{C as ie}from"./CostumeAvatar-BlItfEYz.js";import{S as ae}from"./SuperHeroAvatar-CHY1Qt_u.js";import{C as oe}from"./Card-DK19XdyY.js";import{C as ne}from"./CharacterCard-CVK_JVW-.js";import{E as ce}from"./EmojiCard-JgLdDYnr.js";import{G as me}from"./GlyphCard-mRHevadv.js";import{I as de}from"./ItemCard-BbKRvEFh.js";import{S as le}from"./SuspectCard-2s8nm6pC.js";/* empty css                             */import{I as pe}from"./ImageBlurButtonContainer-U1wW8Li7.js";import{I as ue}from"./ImageCard-BISEbFgn.js";import{u as he}from"./useMock-DgxzoDJB.js";import{D as xe}from"./DevButton-CbZRjIDi.js";import{P}from"./PointsHighlight-xngCqx8C.js";import{R as _}from"./RuleInstruction-uJfkg-pi.js";import{P as je}from"./WritingIcon-K2CK8Jqr.js";import{A as N}from"./Avatar-B3PRmKwH.js";import{T as ge}from"./speech-CGOgfe-6.js";import{R as fe}from"./TrophyOutlined-Dm-gH8ax.js";import{S as ve}from"./StepRankingWrapper-C6z9uIPW.js";import{T as Ie}from"./TrophyIcon-By1UpGDA.js";import{G as Se}from"./GameOverWrapper-CjrdxQhq.js";import{A as Pe}from"./Achievements-D-klBgJQ.js";import{C as Ce}from"./Container-Ck87LAvk.js";import{a as _e}from"./achievements-_vvMKcjs.js";import"./useBlurCards-D0JEXssB.js";import"./RulesModal-cAUwZmYF.js";import"./DoubleRightOutlined-C04Fzz6W.js";import"./PurePanel-CPWaqvZN.js";import"./Game-Car0Alfi.js";import"./useMutation-KpxSk07a.js";import"./index-C-VVuQWK.js";import"./useBubbleLock-DI8H9xrz.js";import"./index-MG7zlLsn.js";import"./Overflow-DtUpVo91.js";import"./useEvent-DuWscglO.js";import"./index-2arZnTlj.js";import"./index-BXK9BA-9.js";import"./GameBanner-D5JpgXwF.js";import"./useDevFeatures-wqrQGZ3_.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DpiguscA.js";import"./InfoCircleOutlined-B_m_3TMH.js";import"./index-C3IEhN0F.js";import"./SignIn-B3asXNWf.js";import"./GoogleIcon-KZCqWRn-.js";import"./WaitingRoomIcon-Dnuod1UR.js";import"./AnimatedClockIcon-BbeOf5Qf.js";import"./Loading-DODkC8xi.js";import"./AnimatedLoaderIcon-BlQEHYZp.js";import"./LikeFilled-BMhO2QyR.js";import"./CustomAvatarWrapper-CjSPXC3c.js";import"./Sprite-BpmpMv6C.js";import"./WarningOutlined-CURJxoYC.js";import"./ImageBlurButton-BA4cq3Ah.js";import"./StarIcon-evWXzwgh.js";import"./MetricHighlight-BP5Ix1Jl.js";import"./StarFilled-DVve9PVn.js";import"./StarFilled-CNctUIhy.js";import"./RankingBoard-Cw0XZkQk.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./TheEndIcon-sQmiea8-.js";import"./ArrowRightOutlined-rkTh-Qvv.js";import"./useMergedState-BLaPvhFC.js";import"./progress-BdFj-WuZ.js";import"./Medal-W8c5baS6.js";import"./QuestionCircleOutlined-BXEe4qnk.js";const w={PAIRING:"PAIRING",RESULTS:"RESULTS"},be={SUBMIT_PAIRS:"SUBMIT_PAIRS"};function Re(s){const{translate:r}=$(),t=Q({actionName:"submit-pairs",onSuccess:()=>s(2),onError:()=>s(0),successMessage:r("Pares submetidos com sucesso","Paris submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar seus pares","Oops, the application found an error while trying to submit your pairs")});return o=>{t({action:be.SUBMIT_PAIRS,...o})}}function g({itemEntry:s,className:r,size:t,looseItem:o}){const{dualTranslate:c}=$(),i=t==="small"?.75:1;return s.type==="alien-item"?e.jsx(de,{id:s.value.id,width:75*i,className:r,title:c(s.value.name)}):s.type==="images"?e.jsx(pe,{cardId:s.value,children:e.jsx(ue,{id:s.value,cardWidth:(o?1.5:1)*100*i,className:r,preview:!1})}):s.type==="words"?e.jsx(oe,{hideHeader:!0,className:r,size:t,children:s.value.text}):s.type==="suspects"?e.jsx("div",{className:r,children:e.jsx(le,{suspect:s.value,width:100*i,hideName:!0})}):s.type==="contenders"?e.jsx(ne,{character:s.value,size:120*i,className:r},s.value.id):s.type==="emojis"?e.jsx(ce,{id:String(s.value),width:75*i,className:r}):s.type==="glyphs"?e.jsx(me,{id:s.value,width:75*i,className:r}):s.type==="clubbers"?e.jsx(te,{id:s.value,width:75*i,className:v("avatar-entry-background",r)}):s.type==="costumes"?e.jsx(ie,{id:s.value,width:75*i,className:v("avatar-entry-background",r)}):s.type==="superHeroes"?e.jsx(ae,{id:s.value,width:75*i,className:v("avatar-entry-background",r)}):e.jsx("div",{className:r,children:s.type})}function b({index:s,firstItem:r,secondItem:t,placeholder:o,size:c}){return e.jsxs(C,{className:v("pairs-grid__pair",`pairs-grid__pair--${s}`),direction:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:r?e.jsx(g,{itemEntry:r,size:c}):e.jsx(g,{itemEntry:o,className:"pairs-grid__empty-slot",size:c})}),e.jsx("div",{className:"pairs-grid__slot",children:t?e.jsx(g,{itemEntry:t,size:c}):e.jsx(g,{itemEntry:o,className:"pairs-grid__empty-slot",size:c})})]},`pair-${s}`)}function we({pool:s,pairs:r,size:t}){const o=Math.floor(s.length/2);return e.jsx(C,{className:v("pairs-grid",`pairs-grid--made-${o}`),wrap:!0,children:Array.from({length:o}).map((c,i)=>{const d=i*2,l=r[d],a=r[d+1],h=s.find(I=>I.id===l),p=s.find(I=>I.id===a);return!h||!p?e.jsx(e.Fragment,{}):e.jsx(b,{index:i,firstItem:h,secondItem:p,placeholder:s[0],size:t},`${l}${a}`)})})}const ye=s=>{const r=D(s.map(t=>t.id));return s.length%2===0||r.pop(),r};function Ae({user:s,announcement:r,pool:t,onSubmitPairs:o}){const{isLoading:c}=H(),[i,d]=R.useState([]),l=Math.floor(t.length/2),a=R.useMemo(()=>i.map(m=>t.find(j=>j.id===m)),[i,t]),h=i.length===l*2&&i.every(Boolean);he();const p=m=>{h||d(j=>{const u=[...j],f=u.findIndex(S=>typeof S!="string");return f!==-1?u[f]=m:u.push(m),u})},I=m=>{d(j=>{const u=[...j],f=u.findIndex(S=>S===m);return f!==-1&&(u[f]=null),u})};return e.jsxs(q,{fullWidth:!0,announcement:r,children:[e.jsx(B,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agrupe os itens em ",l," pares"]}),en:e.jsxs(e.Fragment,{children:["Group the items into ",l," pairs"]})})}),c,e.jsx(_,{type:"rule",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!",e.jsx("br",{}),e.jsx("strong",{children:"Clique"})," em um item para adicioná-lo ao par.",e.jsx("br",{}),"Para remover, basta clicar no item novamente."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!",e.jsx("br",{}),e.jsx("strong",{children:"Click"})," on an item to add it to the pair.",e.jsx("br",{}),"To remove, just click on the item again."]})})}),t.length%2===1&&e.jsx(_,{type:"event",children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Um item ficará sobrando, você também ganha pontos por cada jogador que também deixou esse item sobrando!"}),en:e.jsx(e.Fragment,{children:"One item will be left out, you also get points for each player who also left this item out!"})})}),e.jsx(C,{className:v("pairs-grid",`pairs-grid--${l}`),wrap:!0,children:Array.from({length:l}).map((m,j)=>{const u=j*2,f=i[u],S=i[u+1],k=a[u],F=a[u+1],M=t[0].type==="alien-item"?{...t[0],value:{id:t[0].id,name:{pt:"?",en:"?"}}}:t[0];return e.jsxs(C,{className:v("pairs-grid__pair",`pairs-grid__pair--${j}`),direction:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:f&&k?e.jsx(y,{onClick:()=>I(f),className:G("bounceIn"),children:e.jsx(g,{itemEntry:k})}):e.jsx(g,{itemEntry:M,className:"pairs-grid__empty-slot"})}),e.jsx("div",{className:"pairs-grid__slot",children:S&&F?e.jsx(y,{onClick:()=>I(S),className:G("bounceIn"),children:e.jsx(g,{itemEntry:F})}):e.jsx(g,{itemEntry:M,className:"pairs-grid__empty-slot"})})]},`pair-${j}`)})}),e.jsxs(x,{children:[e.jsx(xe,{onClick:()=>d(ye(t)),children:"Mock Pairs"}),e.jsx(V,{size:"large",disabled:s.ready||!h,onClick:()=>o({pairs:i.map(m=>String(m))}),children:e.jsx(n,{pt:"Enviar Pares",en:"Submit Pairs"})})]}),e.jsx(C,{wrap:!0,className:v("options-grid",`options-grid--${t.length}`),children:t.map(m=>i.includes(m.id)?e.jsx(g,{itemEntry:m,className:"options-grid--selected"},m.id):e.jsx(y,{onClick:()=>p(m.id),children:e.jsx(g,{itemEntry:m,looseItem:!0})},m.id))})]})}function Te({players:s,state:r}){var a;const t=J(s,r),{step:o,setStep:c,goToNextStep:i}=O(),d=Re(c),l=e.jsx(U,{icon:e.jsx(re,{}),title:e.jsx(n,{pt:"Coloque os itens em pares",en:"Pair the items"}),currentRound:(a=r==null?void 0:r.round)==null?void 0:a.current,type:"overlay",children:e.jsx(E,{children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Faça pares com os itens e ganhe pontos por cada par igual a de outros jogadores."}),en:e.jsx(e.Fragment,{children:"Pair the items and get points for each pair you match with other players "})})})});return e.jsx(L,{phase:r==null?void 0:r.phase,allowedPhase:w.PAIRING,children:e.jsxs(z,{step:o,players:s,waitingRoom:{content:e.jsx(we,{pool:r.pool,pairs:(t==null?void 0:t.pairs)??[],size:"small"})},children:[e.jsx(se,{round:r.round,time:3,onPressButton:i}),e.jsx(Ae,{user:t,announcement:l,pool:r.pool,onSubmitPairs:d})]})})}function Ne({announcement:s,pool:r,goToNextStep:t,gallery:o,leftOut:c,players:i}){const d=R.useMemo(()=>o.filter(a=>a.players.length>1),[o]),l=R.useMemo(()=>o.filter(a=>a.players.length===1),[o]);return e.jsxs(q,{fullWidth:!0,announcement:s,children:[e.jsx(B,{children:e.jsx(n,{pt:"Resultado",en:"Results"})}),e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Pares Vencedores",en:"Winnings Pairs"})}),d.length>0&&e.jsx(_,{type:"scoring",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!"]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!"]})})}),e.jsxs(x,{wrap:!0,children:[d.length===0&&e.jsx(_,{type:"event",children:e.jsx(n,{pt:"Ninguém deu match!",en:"Nobody matched anything!"})}),d.map((a,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:a.players.map(p=>e.jsx(N,{id:i[p].avatarId,size:"small"},`${a.pairId}-${p}`))})}),e.jsx(b,{index:h%6,placeholder:r[0],firstItem:a.pair[0],secondItem:a.pair[1]})]},a.pairId))]}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Sobras Vencedoras",en:"Left Out Matches"})}),e.jsx(_,{type:"scoring",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Para o item que ficou sobrando, você também ganha ",e.jsx(P,{children:"pontos"})," ","por cada jogador que deixou de fora o mesmo item que você!"]}),en:e.jsxs(e.Fragment,{children:["For the item that was left over, you also get ",e.jsx(P,{children:"points"})," for each player who left out the same item as you!"]})})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:c.map((a,h)=>e.jsxs(C,{className:"results",direction:"vertical",children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:a.players.map(p=>e.jsx(N,{id:i[p].avatarId,size:"small"},`${a.id}-${p}`))})}),e.jsx(b,{index:h%6,placeholder:r[0],firstItem:a.item})]},a.id))})]}),e.jsx(x,{children:e.jsx(ge,{duration:45,onExpire:t,onClick:t,icon:e.jsx(fe,{}),children:e.jsx(n,{pt:"Ver Ranking",en:"See Ranking"})})}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Pares que não deram match",en:"Pairs that didn't match"})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:l.map((a,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:a.players.map(p=>e.jsx(N,{id:i[p].avatarId,size:"small"},`${a.pairId}-${p}`))})}),e.jsx(b,{index:h%6,placeholder:r[0],firstItem:a.pair[0],secondItem:a.pair[1]})]},a.pairId))})]})]})}function ke({players:s,ranking:r,goToPreviousStep:t,round:o}){return e.jsxs(ve,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(n,{pt:"Deu match com outros jogadores",en:"Match other player's paris"},"1"),e.jsx(n,{pt:"O item de fora foi o mesmo que outros jogadores",en:"The left out item was the same as other players"},"2")],children:[e.jsx(x,{children:e.jsx(W,{onClick:t,children:e.jsx(n,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(K,{round:o})]})}function Fe({players:s,state:r}){var d;const{step:t,goToNextStep:o,goToPreviousStep:c}=O(),i=e.jsx(U,{icon:e.jsx(je,{}),title:e.jsx(n,{pt:"Resultado",en:"Results"}),currentRound:(d=r==null?void 0:r.round)==null?void 0:d.current,type:"overlay",children:e.jsx(E,{children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Quantos pares você acertou?"}),en:e.jsx(e.Fragment,{children:"How many pairs did you get?"})})})});return e.jsx(L,{phase:r==null?void 0:r.phase,allowedPhase:w.RESULTS,children:e.jsxs(z,{step:t,players:s,children:[e.jsx(Ne,{players:s,announcement:i,goToNextStep:o,gallery:r.gallery,leftOut:r.leftOut,pool:r.pool}),e.jsx(ke,{players:s,round:r.round,ranking:r.ranking,goToPreviousStep:c})]})})}function Me({state:s,players:r}){const t=s.gallery??[];return e.jsxs(Se,{state:s,players:r,announcementIcon:e.jsx(Ie,{}),children:[e.jsx(Pe,{players:r,achievements:s.achievements,reference:_e}),e.jsx(Ce,{title:e.jsx(n,{pt:"Melhores Pares",en:"Best Pairs"}),className:"mt-4",children:t.map((o,c)=>e.jsx(b,{index:c%6,firstItem:o.pair[0],secondItem:o.pair[1],placeholder:o.pair[0]},o.pairId))})]})}function Ge(s){switch(s.phase){case w.PAIRING:return Te;case w.RESULTS:return Fe;case ee.DEFAULT.GAME_OVER:return Me;default:return Z}}function rs(){return e.jsx(X,{gameCollection:Y.DUETOS,getActiveComponent:Ge})}export{rs as default};
