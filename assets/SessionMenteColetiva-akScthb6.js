import{h as E,j as e,T as i,q as ue,ce as Y,e as v,l as me,r as f,b3 as V,x as z,k as O,O as G,ch as X,aM as P,o as de,aP as q,e9 as pe,B as K,b6 as J,a_ as he}from"./index-CU07ZNEq.js";import{u as I,S as M,a as k,P as W,H as xe,g as je,f as Z,c as ge,d as fe,e as ve}from"./Session-B5Vy5upK.js";import{u as we}from"./useWhichPlayerIsThe-BBUEQgoY.js";import{S as Se}from"./SheepIcon-DPnRrrKC.js";import{S,P as U,a as A,u as ee}from"./StepSwitcher-C5wsA09J.js";import{I as N,u as Ne}from"./useDevFeatures-BpaKSuW4.js";import{R as be}from"./RoundAnnouncement-BUgO3ab0.js";import{V as ye}from"./ViewOr-Bx1kDirb.js";import{P as $}from"./PlayerAvatarName-4Oy9Hv-_.js";import{P as y}from"./PointsHighlight-C_T98i8H.js";import{u as se}from"./useMock-DLRmsBYP.js";import{G as Q}from"./GroupQuestionCard-DytqCc8H.js";import{P as re}from"./PopoverRule-DFbIIQcQ.js";import{A as R,C as _e}from"./CustomerReviewIcon-BiePmZtg.js";import{S as F}from"./SheepAvatar-wIfsfYBx.js";import{D as C}from"./index-CEDsP322.js";import{S as B}from"./index-BNMGmdos.js";import{T as Ee}from"./index-e4tiijO4.js";import{R as D}from"./RuleInstruction-BhUi69DP.js";import{W as Ie}from"./WritingIcon-CDyTBr40.js";import{D as Ae}from"./DevButton-MRSeyXfQ.js";import{T as Te}from"./TimedTimerClock-8vWGx1TV.js";import{D as Re}from"./DiscussionIcon-C1gt3k1p.js";import{P as Ce}from"./PlayerAvatar-nAQHij4M.js";import{T as Oe}from"./TimedButton-S9qOcua0.js";import{R as ae}from"./PlusCircleFilled-UCPdkgkt.js";import{C as Pe}from"./Card-B7jTiUvI.js";import{R as ne}from"./LockFilled-DRX58-dp.js";import{R as qe}from"./QuestionCircleFilled-CluiV98m.js";import{C as Me}from"./index-DEX0WaLb.js";import{u as ke}from"./DebugOnly-SuSsJv04.js";import{R as We}from"./RankingBoard-b_Ik82HI.js";import{R as H}from"./HeartFilled-Dsg5dvU8.js";import{T as Ue}from"./TheEndIcon-DBcvVRCM.js";import"./GameBanner-B8yIMC4_.js";import{G as Le}from"./GameOverWrapper-C6FZfSxv.js";import{A as Be}from"./Achievements-350KnIPw.js";import{a as $e}from"./achievements-EYXsF_f8.js";/* empty css                            */import"./Game-CbNB-Jc4.js";import"./useMutation-XqLWMVrX.js";import"./speech-DUhduewS.js";import"./PurePanel-BOPV79f0.js";import"./index-C6SsEx1k.js";import"./index-rOhFU6aV.js";import"./RulesModal-CLBLYbAl.js";import"./index-BcyBJlpm.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DndCFufw.js";import"./InfoCircleOutlined-Mr7Adhmd.js";import"./SignIn-DP_wF987.js";import"./GoogleIcon-CNQYxGRc.js";import"./AnimatedGearIcon-CqrfCxSU.js";import"./AnimatedClockIcon-DSdP-PKf.js";import"./Loading-Bh2qjOHs.js";import"./AnimatedLoaderIcon-BE-31IEx.js";import"./WaitingRoomIcon-ByCEV0O6.js";import"./LikeFilled-Bz_cOSr0.js";import"./StarIcon-1JEuTif3.js";import"./MetricHighlight-WV3BCiHj.js";import"./Overflow-BIGUxS5H.js";import"./StarFilled-DdjT7Ft9.js";import"./useBubbleLock-Cv1VBVfO.js";import"./ArrowRightOutlined-BhX80b6B.js";import"./progress-CN0pBdmG.js";import"./TitledContainer-CmdnlGbL.js";import"./Medal-D6TBlq7s.js";const _={QUESTION_SELECTION:"QUESTION_SELECTION",EVERYBODY_WRITES:"EVERYBODY_WRITES",COMPARE:"COMPARE",RESOLUTION:"RESOLUTION"},T={SUBMIT_QUESTION:"SUBMIT_QUESTION",SUBMIT_CUSTOM_QUESTION:"SUBMIT_CUSTOM_QUESTION",SUBMIT_ANSWERS:"SUBMIT_ANSWERS",NEXT_ANSWERS:"NEXT_ANSWERS",ADD_ANSWER:"ADD_ANSWER"};function Qe(s){const{translate:a}=E(),r=I({actionName:"submit-question",onSuccess:()=>s(3),onError:()=>s(1),successMessage:a("Pergunta enviada com sucesso!","Question send successfully!"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar a pergunta","Oops, the application failed to submit the question")});return n=>{r({action:T.SUBMIT_QUESTION,...n})}}function Fe(s){const{translate:a}=E(),r=I({actionName:"submit-question",onSuccess:()=>s(3),onError:()=>s(1),successMessage:a("Pergunta enviada com sucesso!","Question send successfully!"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar a pergunta","Oops, the application failed to submit the question")});return n=>{r({action:T.SUBMIT_CUSTOM_QUESTION,...n})}}function De(s){const{translate:a}=E(),r=I({actionName:"submit-answers",onSuccess:()=>s(2),onError:()=>s(1),successMessage:a("Respostas enviadas com sucesso!","Answers send successfully!"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar enviar respostas","Oops, the application failed to submit answers")});return n=>{r({action:T.SUBMIT_ANSWERS,...n})}}function Ve(){const{translate:s}=E(),a=I({actionName:"add-answer",successMessage:s("Resposta adicionada com sucesso!","Answer added successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar adicionar respostar","Oops, the application failed to add answer")});return r=>{a({action:T.ADD_ANSWER,...r})}}function ze(s){const{translate:a}=E(),r=I({actionName:"next-answers",onSuccess:s,successMessage:a("Próximas respostas acionadas com sucesso!","Next answers triggered successfully!"),errorMessage:a("Vixi, o aplicativo encontrou um erro ao tentar avançar","Oops, the application failed to advance")});return n=>{r({action:T.NEXT_ANSWERS,...n})}}function oe({activePlayer:s}){return e.jsx(N,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Precisamos reduzir essa população! Vamos fazer uma pergunta em que todos tem que escrever uma certa quantidade de respostas. Você ganha um ponto para cada resposta igual a de outra ovelha. Quem receber o menor número de pontos move uma seção para a direita.",e.jsx("br",{}),"Se você já está no último pasto e tiver que mover pra direita, você cai no precipício e morre. O pasto fica menos lotado e todos mais felizes.",e.jsx("br",{}),e.jsxs(N,{contained:!0,children:[e.jsx($,{player:s,addressUser:!0})," escolherá uma pergunta para essa rodada."]})]}),en:e.jsxs(e.Fragment,{children:["We are sheep and our pasture is overcrowded! We need to decide who should leave.",e.jsx("br",{}),"Let's ask a question and everyone has to give a certain number of answers. You are trying to match answers with other sheep to get points. Whoever gets the fewest points moves one section to the right.",e.jsx("br",{}),"If you are already in the last pasture and have to move to the right, you fall off the cliff and die. The pasture is less crowded and everyone is happier.",e.jsx("br",{}),e.jsxs(N,{contained:!0,children:[e.jsx($,{player:s,addressUser:!0})," will choose a question for this round."]})]})})})}function te(){return e.jsx(N,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Agora é hora de responder!",e.jsx("br",{}),"Pense em respostas comuns que fará com que você responda igual a outros jogadores.",e.jsx("br",{}),"Você ganha ",e.jsx(y,{children:"1"})," ponto para cada uma de suas respostas +"," ",e.jsx(y,{children:"1"})," ponto para cada resposta igual a de outro jogador (1 ponto por jogador).",e.jsx("br",{}),"Por exemplo, se 3 jogadores escreveram 'bola', são ",e.jsx(y,{children:"+3"})," pontos para cada."]}),en:e.jsxs(e.Fragment,{children:["It's time to answer!",e.jsx("br",{}),"Think of common answers that will help you match the largest number of players.",e.jsx("br",{}),"You get ",e.jsx(y,{children:"1"})," point for each of your answers +"," ",e.jsx(y,{children:"1"})," point for each match with other players.",e.jsx("br",{}),"For example, if 3 players write 'chicken', each of those players get"," ",e.jsx(y,{children:"3"})," points."]})})})}function He(){return e.jsx(N,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Hora de comparar respostas!",e.jsx("br",{}),"O jogo agrupará todas as respostas iguais, mas agora vocês tem a chance de adicionar palavras que o jogo não agrupou por conta de erro gramatical, acento ou plural.",e.jsx("br",{}),"Lembre-se gêneros são considerados diferentes ",e.jsx("code",{children:"príncipe ≠ princesa"}),", assim como geral vs específico ",e.jsx("code",{children:"caminhão ≠ caminhão de mudança"}),"."]}),en:e.jsxs(e.Fragment,{children:["Time to compare answers!",e.jsx("br",{}),"The game will group all identical answers, but now the group has a chance to add answers that it missed because of typo, accents, or pluralization.",e.jsx("br",{}),"Remember that genders are considered different ",e.jsx("code",{children:"prince ≠ princess"}),", as well as general vs specific ",e.jsx("code",{children:"truck ≠ fire truck"}),"."]})})})}const Ye=(s,a)=>{const r=["agua","bola","coco","dedo","egua","flauta","gatilho","hélio","jaguar","pêssego"],n=["água","bola","cocô","dedo","égua","flauta","gatilho","helio","jipe"],t=ue.shuffle(Math.random()>.5?r:n);return Array(a).fill(0).map((c,l)=>({[Y(["answer",`${l}`,s])]:t[c+l].toUpperCase()})).reduce((c,l)=>Object.assign({},c,l),{})};function ie({roundType:s,className:a=""}){const r="m-round-type__arrow";return e.jsxs("div",{className:v("m-round-type",a),children:[e.jsxs("div",{className:"m-round-type__arrows",children:[s===0&&e.jsx(R,{className:v(r,`${r}--0`)}),e.jsx(R,{className:v(r,`${r}--1`)}),s>=2&&e.jsx(R,{className:v(r,`${r}--2`)}),s===3&&e.jsx(R,{className:v(r,`${r}--3`)})]}),e.jsx("div",{children:e.jsx(i,{pt:e.jsx(e.Fragment,{children:"Nesta rodada,"}),en:e.jsx(e.Fragment,{children:"This round"})})}),s===1&&e.jsx(i,{pt:e.jsx(e.Fragment,{children:"todos com a pontuação mais baixa movem uma cerquinha para direita."}),en:e.jsx(e.Fragment,{children:"all players with the lowest score move one fence to the right."})}),s===2&&e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["todos com as ",e.jsx("span",{className:"m-round-type__number",children:"2"})," pontuações mais baixas movem uma cerquinha para direita."]}),en:e.jsxs(e.Fragment,{children:["all players with the ",e.jsx("span",{className:"m-round-type__number",children:"2"})," lowest scores move one fence to the right."]})}),s===3&&e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["todos com as ",e.jsx("span",{className:"m-round-type__number",children:"3"})," pontuações mais baixas movem uma cerquinha para direita."]}),en:e.jsxs(e.Fragment,{children:["all players with the ",e.jsx("span",{className:"m-round-type__number",children:"3"})," lowest scores move one fence to the right."]})}),s===0&&e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["todos com a pontuação mais baixa movem uma cerquinha para direita e todos com a pontuação mais alta movem uma cerquinha ",e.jsx("span",{className:"m-round-type__highlight",children:"para a esquerda"}),"!"]}),en:e.jsxs(e.Fragment,{children:["all players with the lowest score move one fence to the right and all players with the highest score move one fence ",e.jsx("span",{className:"m-round-type__highlight",children:"to the left"}),"!"]})})]})}function L({players:s,pastureSize:a=5,roundType:r}){const{width:n}=me(),t=a===3,c=Math.min(n,1360)-36,l=Math.max(c*(t?.65:1),300),o=c/4,u=Math.min(n,1360)/22,m={gridTemplateColumns:t?"1fr 1fr 1fr 0.65fr":"1fr 1fr 1fr 1fr 1fr 0.65fr"},p=f.useMemo(()=>{const h=Array(a+1).fill(null);return Object.values(s).forEach(j=>{h[j.level]===null&&(h[j.level]=[]),h[j.level].push(j)}),h},[s,a]);return e.jsxs("div",{className:"m-pasture-container",style:{width:`${l}px`},children:[r!==void 0&&e.jsx(ie,{roundType:r,className:"m-pasture-round-type"}),e.jsxs("div",{className:"m-pasture",style:{height:`${o}px`},children:[e.jsx("img",{src:`${V.IN_GAME}m-pasture-${a}.png`,alt:"pasture background",className:"m-pasture__background"}),e.jsx("div",{className:"m-enclosures",style:m,children:p.map((h,j)=>{const g=`m-enclosure-${j}`;return e.jsx("div",{className:v("m-enclosure",g),children:h?.map((d,x)=>{const w=`${g}-${d.id}`,b=`m-sheep--pos-${x}`;return e.jsx(F,{id:d.avatarId,sheepId:d.sheepId,className:v("m-sheep",b,d.animateRight&&"m-sheep--animate-right",d.animateLeft&&"m-sheep--animate-left",d.animateRebound&&"m-sheep--animate-rebound",d.level===a&&"m-sheep--animate-die"),width:u,animate:!0},w)})},g)})}),e.jsx("img",{src:`${V.IN_GAME}m-fence-${a}.svg`,alt:"fence",className:"m-pasture__fence"}),e.jsx("div",{className:"m-pasture-names",children:e.jsx("div",{className:"m-enclosures m-enclosures--names",style:m,children:p.map((h,j)=>{const g=h?.map(d=>d.name)?.join(`,
`)??"";return e.jsx("span",{className:v("m-enclosure-names",g&&"m-enclosure-names--has-names"),children:g},`m-enclosure-${j}`)})})})]})]})}function Ge({onSubmit:s,userId:a}){const{translate:r}=E(),[n,t]=f.useState(r("Cite","What are")),[c,l]=f.useState(3),[o,u]=f.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsx(i,{pt:"OU",en:"OR"})}),e.jsxs(z,{className:"contained center",direction:"vertical",children:[e.jsxs(O,{size:"xx-small",children:[e.jsx(i,{pt:"Crie uma pergunta",en:"Write custom question"}),":"]}),e.jsxs(z,{className:"m-custom-question-form",children:[e.jsxs(B,{value:n,onChange:m=>t(m),children:[e.jsx(B.Option,{value:r("Cite","What are"),children:e.jsx(i,{pt:"Cite",en:"What are"})}),e.jsx(B.Option,{value:r("Complete a frase","Fill in the blank"),children:e.jsx(i,{pt:"Complete a frase",en:"Fill in the blank"})})]}),e.jsx(Ee,{defaultValue:3,min:2,max:4,onChange:m=>l(m??3),value:c,placeholder:r("...escreva aqui","...write here")}),e.jsx(G,{onChange:m=>u(m.target.value)})]}),e.jsxs("div",{className:"m-custom-question-sample",children:['"',n," ",c," ",o||"...",'"']}),e.jsx(X,{onClick:()=>s({customQuestion:{id:`${a}-${Date.now()}`,prefix:n,number:c,suffix:o}}),disabled:!o,children:e.jsx(i,{pt:"Enviar pergunta personalizada",en:"Submit custom question"})})]})]})}function Xe({announcement:s,currentQuestions:a,onSubmitQuestion:r,onSubmitCustomQuestion:n,players:t,roundType:c,activePlayer:l,pastureSize:o,user:u}){const{isLoading:m}=P();return se(),e.jsxs(S,{fullWidth:!0,className:"m-step",announcement:s,children:[e.jsx(M,{children:e.jsx(i,{pt:"Selecione uma das perguntas",en:"Select one of the questions"})}),e.jsx(re,{content:e.jsx(oe,{activePlayer:l})}),e.jsx("ul",{className:"contained",children:a.map(p=>e.jsx("li",{className:"m-question-selection-item",children:e.jsx(de,{onClick:()=>r({questionId:p.id}),disabled:m||u.ready,children:e.jsx(Q,{question:p})})},p.id))}),e.jsx(Ge,{onSubmit:n,userId:u.id}),e.jsx(L,{players:t,pastureSize:o,roundType:c})]})}function Ke({announcement:s,activePlayer:a,players:r,roundType:n,pastureSize:t}){return e.jsxs(S,{fullWidth:!0,className:"m-step",announcement:s,children:[e.jsx(M,{wait:!0,children:e.jsx(i,{pt:"Aguarde...",en:"Please wait..."})}),e.jsxs(D,{type:"wait",children:[e.jsx($,{player:a,addressUser:!0})," ",e.jsx(i,{pt:"está escolhendo a pergunta da rodada.",en:"is choosing the question for the round."}),e.jsx("br",{})]}),e.jsx(L,{players:r,pastureSize:t,roundType:n})]})}function Je({state:s,players:a,user:r}){const{step:n,goToNextStep:t,setStep:c}=k(0),[l,o]=we("activePlayerId",s,a),u=Qe(c),m=Fe(c),p=e.jsx(U,{icon:e.jsx(Se,{}),title:e.jsx(i,{pt:"O Pasto Superlotado",en:"A Overcrowded Pasture"}),currentRound:s?.round?.current,duration:s?.round?.current<3?40:10,type:"overlay",children:e.jsx(oe,{activePlayer:l})});return e.jsx(W,{phase:s?.phase,allowedPhase:_.QUESTION_SELECTION,children:e.jsxs(A,{step:n,players:a,children:[e.jsx(be,{round:s.round,onPressButton:t,time:3,children:e.jsx(N,{contained:!0,children:e.jsx(i,{pt:"Somos ovelhinhas e nosso pasto está superlotado!",en:"We are sheep and our pasture is overcrowded!"})})}),e.jsxs(ye,{condition:o,children:[e.jsx(Xe,{players:a,currentQuestions:s.currentQuestions,onSubmitQuestion:u,onSubmitCustomQuestion:m,roundType:s.roundType,activePlayer:l,pastureSize:s.pastureSize,user:r,announcement:p}),e.jsx(Ke,{activePlayer:l,players:a,roundType:s.roundType,pastureSize:s.pastureSize,announcement:p})]})]})})}function Ze({user:s,currentQuestion:a,players:r,roundType:n,onSubmitAnswers:t,pastureSize:c,announcement:l,timedAnswers:o=!1}){const{isLoading:u}=P(),{translate:m}=E(),[p,h]=f.useState({});se(()=>{},[]);const j=x=>{h(w=>({...w,[x.target.id]:x.target.value.toUpperCase().trim()}))},g=Object.keys(p).length<a.number||new Set(Object.values(p)).size!==a.number,d=()=>{g||t({answers:p})};return e.jsxs(S,{fullWidth:!0,announcement:l,children:[e.jsxs("div",{className:"m-step__contained-content",children:[e.jsxs(M,{size:"small",children:[e.jsx(i,{pt:"Responda a pergunta",en:"Answer the question"}),!!o&&e.jsx(Te,{duration:2*60,onExpire:()=>{!s.ready&&!u&&t({answers:p})},disabled:!o}),":"]}),e.jsx(Q,{question:a}),e.jsx(re,{content:e.jsx(te,{})}),e.jsx("ol",{className:"m-answers",children:Array(a.number).fill(1).map((x,w)=>{const b=x+w,ce=`answer-${w}`,le=Y(["answer",String(w),s.id]);return e.jsx("li",{className:"m-answers__item",children:e.jsx(G,{className:"m-answers__input",id:le,placeholder:m(`Escreva a resposta ${b} aqui`,`Write answer ${b} here`),autoComplete:"off",onChange:j,onPressEnter:d})},ce)})}),e.jsxs(q,{children:[e.jsx(Ae,{onClick:()=>t({answers:Ye(s.id,a.number)}),children:"Mock Answers"}),e.jsx(X,{type:"primary",disabled:g,onClick:()=>t({answers:p}),children:e.jsx(i,{pt:"Enviar respostas",en:"Submit answers"})})]})]}),e.jsx(L,{players:r,pastureSize:c,roundType:n})]})}function es({state:s,players:a,meta:r,user:n}){const{step:t,setStep:c}=k(0),l=De(c),o=e.jsx(U,{icon:e.jsx(Ie,{}),title:e.jsx(i,{pt:"Todos Respondem",en:"Everybody Writes"}),currentRound:s?.round?.current,duration:s?.round?.current<3?20:void 0,type:"overlay",children:e.jsx(te,{})});return e.jsx(W,{phase:s?.phase,allowedPhase:_.EVERYBODY_WRITES,children:e.jsx(A,{step:t,players:a,waitingRoom:{content:e.jsx(N,{contained:!0,children:Object.values(n?.answers??{}).join(", ")})},children:e.jsx(Ze,{announcement:o,currentQuestion:s.currentQuestion,players:a,roundType:s.roundType,onSubmitAnswers:l,user:n,pastureSize:s.pastureSize,timedAnswers:r?.options?.timed})})})}function ss({allAnswers:s,allowedList:a,answerGroup:r,onNextAnswer:n,onAddAnswer:t,players:c,remainingGroupsCount:l}){const{isLoading:o}=P(),{isDevEnv:u}=Ne(),[m,p]=f.useState(!0),h=Object.keys(c).length,j=f.useMemo(()=>s.filter(d=>{if(d.isLocked)return!1;const x=r.entries.map(b=>b.id),w=r.entries.map(b=>b.playerId);return!x.includes(d.id)&&!w.includes(d.playerId)}),[s,r]),g=f.useMemo(()=>{const d=r.entries.length;return h===d?1:d<3&&l<3?3:d===1?2:5},[r.entries.length,u,h,l]);return e.jsxs(xe,{className:"m-admin",direction:"vertical",align:"center",children:[e.jsx(Oe,{onClick:()=>n({allowedList:Object.keys(a)}),disabled:m||o,type:"primary",duration:g,icon:e.jsx(pe,{}),onExpire:()=>p(!1),children:e.jsx(i,{pt:"Confirmar e ir para próxima resposta",en:"Confirm and go to next answer"})}),j.length>0&&e.jsx("p",{children:e.jsx(i,{pt:"Essas são as respostas dos jogadores que não deram match com a atual resposta. Somente adicione elas se os jogadores estiverem comendo mosca",en:"These are the players who haven't matched the current answer. Only add them if a player failed to do so for themselves."})}),e.jsx(q,{wrap:!0,children:j.map(d=>e.jsxs(K,{size:"large",disabled:o,className:"m-admin__answer",icon:e.jsx(ae,{}),loading:o,onClick:()=>t({answer:{...d}}),children:[e.jsx(Ce,{avatarId:c[d.playerId].avatarId})," ",d.answer]},`admin-${d.id}`))})]})}function rs({answerGroup:s,currentQuestion:a,players:r,allowUserAnswer:n,remainingGroupsCount:t}){const{translate:c}=E(),l=je();return e.jsxs(S,{className:"m-step",children:[e.jsx(O,{level:3,size:"small",children:e.jsx(i,{pt:"Comparar Respostas",en:"Compare Answers"})}),e.jsx(Pe,{header:c("Pergunta","Question"),color:["yellow","orange","green","blue","purple"][t%5],className:"m-question-card",footer:Array(t).fill("•").join(""),children:e.jsx(Q,{question:a})}),e.jsx(D,{type:"rule",children:e.jsx(i,{pt:"Não existe resposta certa ou errada. Aqui, apenas agrupamos respostas iguais para ganhar pontos. O objetivo é pensar como o grupo!",en:"There's no wrong or right answer. Here, we just group equal answers for points. The goal is to think like the group"})}),e.jsxs("div",{className:"m-answer-group",children:[e.jsx("div",{className:"m-answer-group__answer-container",children:e.jsx("div",{className:"m-answer-group__answer",children:s.answer})}),e.jsx("ul",{className:"m-answer-group__players",children:s.entries.map(o=>{const u=`ag-${o.id}`,m=r[o.playerId],p=m.answers[o.id].parsedAnswer===s.parsedAnswer||m.answers[o.id].isLocked;return e.jsxs("li",{className:"m-answer-group__player",children:[e.jsx(F,{id:m.avatarId,sheepId:m.sheepId,className:"m-answer-group__sheep-avatar",width:40,animate:!0}),e.jsxs("span",{className:"m-answer-group__player-name",children:[m.name," ",p?e.jsx(ne,{}):e.jsx(qe,{})]}),!p&&e.jsx("span",{className:v("m-answer-group__speech-bubble-small",J("tada")),children:m.answers[o.id].answer}),!p&&l&&e.jsx("div",{className:"m-answer-group__allow-add",children:e.jsx(Me,{"data-allowanswer":o.id,onChange:h=>n(h.target.checked,o.id)})})]},u)})})]})]})}function as({answerGroup:s,user:a,onAddAnswer:r}){const{isLoading:n}=P(),t=a.answers??{},c=s.entries.some(o=>o.playerId===a.id),l=Object.values(t).reduce((o,u)=>o+Number(u?.score??0),0);return e.jsx("div",{className:"m-step",children:e.jsxs("div",{className:"m-step__contained-content",children:[e.jsxs(D,{type:"rule",children:[e.jsx(i,{pt:"Se você cometeu um erro ortográfico ou acha que sua resposta deveria estar no grupo acima, clique nela para adicioná-la. Você só pode ter uma resposta por pergunta!",en:"If you made a typo or for some reason think your answer should be in this group, click on it to add it. You can only have one answer per question."}),e.jsx("br",{}),e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Você tem: ",e.jsx(y,{children:l})," ponto(s)"]}),en:e.jsxs(e.Fragment,{children:["You have:",e.jsx(y,{children:l})," point(s)"]})})]}),e.jsx(q,{className:"m-user-answers",children:Object.entries(t).map(([o,u])=>e.jsxs(K,{disabled:u?.isLocked||c||n,className:"m-user-answer",icon:u.isLocked?e.jsx(ne,{}):e.jsx(ae,{}),onClick:()=>r({answer:{id:o,playerId:a.id,...u}}),children:[u.answer," ",!!u.score&&`(${u.score})`]},`a-b-${o}`))})]})})}function ns({announcement:s,currentQuestion:a,answerGroup:r,players:n,user:t,allAnswers:c,onAddAnswer:l,onNextAnswer:o,remainingGroupsCount:u,allowedList:m,setAllowedList:p,round:h}){ee();const j=(g,d)=>{const x={...m};g?p({...x,[d]:!0}):(delete x?.[d],p(x))};return r?e.jsxs(S,{fullWidth:!0,announcement:s,children:[e.jsx(rs,{currentQuestion:a,answerGroup:r,players:n,allowUserAnswer:j,remainingGroupsCount:u}),e.jsx(C,{}),e.jsx(as,{user:t,answerGroup:r,onAddAnswer:l}),e.jsx(C,{}),e.jsx(ss,{answerGroup:r,allAnswers:c,players:n,onAddAnswer:l,onNextAnswer:o,allowedList:m,remainingGroupsCount:u},r.answer)]}):e.jsxs(S,{fullWidth:!0,children:[e.jsx(i,{pt:"Pronto!",en:"All done!"}),e.jsx(C,{}),e.jsx(Z,{round:h})]})}function os({state:s,players:a,user:r}){const{step:n}=k(0),[t,c]=f.useState({}),l=Ve(),o=ze(()=>c({})),u=s.answersList[0],m=e.jsx(U,{icon:e.jsx(Re,{}),title:e.jsx(i,{pt:"Respostas",en:"Answers"}),currentRound:s?.round?.current,duration:s?.round?.current<3?20:void 0,type:"overlay",children:e.jsx(He,{})});return e.jsx(W,{phase:s?.phase,allowedPhase:_.COMPARE,children:e.jsx(A,{step:n,players:a,children:e.jsx(ns,{currentQuestion:s.currentQuestion,answerGroup:u,players:a,user:r,allAnswers:s.allAnswers,onAddAnswer:l,onNextAnswer:o,remainingGroupsCount:s.answersList?.length??0,allowedList:t,setAllowedList:c,round:s.round,announcement:m})})})}function ts({announcement:s,ranking:a,players:r,roundType:n,pastureChangeStr:t,round:c,pastureSize:l,announceSave:o=!1}){ee();const[u,m]=f.useState(0),[p,h]=f.useState(0),[j,g]=f.useState(!1),d=f.useMemo(()=>JSON.parse(t),[t]),{timeLeft:x}=ke({duration:17,autoStart:!0});return f.useEffect(()=>{x===7&&m(1),x===5&&h(1),x===4&&o&&g(!0),x===1&&h(2)},[x]),e.jsxs(S,{fullWidth:!0,announcement:s,children:[e.jsx(M,{children:e.jsx(i,{pt:"Resultado",en:"Results"})}),u===0&&e.jsx(ie,{roundType:n}),e.jsxs(A,{step:u,players:r,children:[e.jsx(S,{children:e.jsx(We,{ranking:a,players:r,hideGainedPoints:!0,delay:1})},0),e.jsxs(S,{children:[j&&e.jsxs(N,{contained:!0,className:v("m-save-card",J("zoomInDown")),children:[e.jsx(H,{style:{color:"red"}})," ",e.jsx(i,{pt:`Vamos dar uma última chance para a pobre ovelhinha que
              ia morrer agora`,en:"Let's give one more chance to the poor sheep about to die. The last one!"})," ",e.jsx(H,{style:{color:"red"}})]}),e.jsx(L,{players:d[p],pastureSize:l,roundType:u>0?n:void 0}),e.jsx(Z,{round:c})]},1)]})]})}function is({state:s,players:a}){const{step:r}=k(0),n=e.jsx(U,{icon:e.jsx(_e,{}),title:e.jsx(i,{pt:"Resultado",en:"And who moves is..."}),currentRound:s?.round?.current,duration:3,type:"overlay",children:e.jsx(N,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Agora podemos saber quem deve ser linchado porque não combina com o grupo!",e.jsx("br",{}),"Graças a Deus, mais espaço!"]}),en:e.jsxs(e.Fragment,{children:["Now we will know who can be moved because they don't match with the group!",e.jsx("br",{}),"Thank God, more room!"]})})})});return e.jsx(W,{phase:s?.phase,allowedPhase:_.RESOLUTION,children:e.jsx(A,{step:r,players:a,children:e.jsx(ts,{announcement:n,ranking:s.ranking,players:a,pastureChangeStr:s.pastureChangeStr,roundType:s.roundType,announceSave:s?.announceSave,round:s.round,pastureSize:s.pastureSize})})})}function cs({state:s,players:a}){return e.jsxs(Le,{state:s,players:a,announcementIcon:e.jsx(Ue,{}),rateWidgetCustomText:e.jsx(i,{pt:"Sugira uma pergunta:",en:"Suggest a question:"}),children:[e.jsxs("div",{className:"m-game-over-in-memoriam",children:[e.jsx(O,{children:"In memoriam"}),e.jsx("div",{className:"m-sheep-rip",children:s.losers.map(r=>e.jsxs("div",{className:"m-sheep-rip__entry",children:[e.jsx(F,{id:r.avatarId,width:80,sheepId:r.sheepId}),e.jsx("span",{className:"m-sheep-rip__name",children:r.name})]},"sheep-player-1"))})]}),e.jsx(Be,{players:a,achievements:s.achievements,reference:$e}),!!s.gallery&&e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"x-small",level:3,children:e.jsx(i,{pt:"Melhores Respostas",en:"Best Answers"})}),e.jsx(q,{className:"gallery",wrap:!0,children:s.gallery.map(({question:r,answers:n})=>e.jsxs("div",{className:"gallery-entry",children:[e.jsxs("h4",{className:"gallery-entry__question",children:[r.prefix," ",r.number," ",r.suffix]}),n.map(({answer:t,playerIds:c})=>e.jsxs("div",{className:"gallery-entry__answer",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[c.length," ",e.jsx(i,{pt:"jogadores",en:"players"})]})]},`${r.id}-${t}`))]},r.id))})]})]})}function ls(s){switch(s.phase){case _.QUESTION_SELECTION:return Je;case _.EVERYBODY_WRITES:return es;case _.COMPARE:return os;case _.RESOLUTION:return is;case ve.DEFAULT.GAME_OVER:return cs;default:return fe}}function br(){return e.jsx(ge,{gameCollection:he.MENTE_COLETIVA,getActiveComponent:ls})}export{br as default};
