import{h as S,q as oe,n as O,j as e,B as P,T as i,aP as f,o as D,b8 as le,ch as G,r as h,b5 as ce,e as u,I as V,b6 as A,cp as de,ci as me,k as J,x as ue,b0 as he}from"./index-B7FVv3jX.js";import{u as k,S as E,a as y,b as v,P as T,c as B,d as b,R as pe,j as xe,i as je,f as fe,g as ge,h as Ce}from"./StepSwitcher-Cjzlfjh5.js";import{L as we}from"./ListIcon-zjTHEcMQ.js";import{I as g}from"./useDevFeatures-D0Hwj-2g.js";import{R as Se}from"./RoundAnnouncement-DLrPANcF.js";import{u as L}from"./useMock-BlnD8wIm.js";import{C as H}from"./Card-Bvn8Jwmm.js";import{P as C}from"./PointsHighlight-C-12lPnQ.js";import{R as ee}from"./RuleInstruction-D3L5yls0.js";import{C as d}from"./CharacterCard-BfxQqWhU.js";import{F as se}from"./FloatingHand-nbovA_y2.js";import{A as ve}from"./AnonymousIcon-FjLE6UQD.js";import{G as ne,M as be}from"./WritingIcon-DfPFfAV8.js";/* empty css                             */import{I as _e}from"./ImageBlurButtonContainer-dihganXS.js";import{P as Q}from"./PlayerAvatar-BGUT8Cak.js";import{T as Ne}from"./ThumbsUpIcon-Oc5NoaZ-.js";import{T as te}from"./TrophyIcon-DFI5Ueq2.js";import{S as W}from"./index-DF-Pwyr9.js";import{P as Ee}from"./index-CLDDIIez.js";import{B as ye}from"./BoxingGlovesIcon-gzPINSYp.js";import{u as Te}from"./DebugOnly-D9y-BwkJ.js";import{T as Be}from"./TournamentIcon-C3vfPf81.js";import{S as Ie}from"./StepRankingWrapper-D6DDDnQc.js";import{R as qe}from"./RoundsLeftInstruction-BmhpDvL6.js";import{T as Re}from"./speech-BuvO9BqZ.js";import{R as Ae}from"./TrophyOutlined-CY_aLAQG.js";import"./GameBanner-D9_pxv_t.js";import{G as Pe}from"./GameOverWrapper-BCXtkRNm.js";import{A as Oe}from"./Achievements-B77bLgnB.js";import{a as ke}from"./achievements-BIDRAQUl.js";import{D as K}from"./index-DBnF44WP.js";import"./RulesModal-8Q6zwIFD.js";import"./index-DKRItngE.js";import"./PurePanel-B386D80u.js";import"./Game-DSpJno7T.js";import"./useMutation-CjtsXZ3j.js";import"./index-CmMHabpk.js";import"./index-B8iX5lxe.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-Cl-caKpr.js";import"./Loading-D8DTCUWd.js";import"./useBubbleLock-B5zd9kpx.js";import"./AnimatedLoaderIcon-B0Gxb3ma.js";import"./InfoCircleOutlined-DFq3paBE.js";import"./SignIn-Opysd4zt.js";import"./GoogleIcon-ChltZFxq.js";import"./WaitingRoomIcon-CUwP4iTB.js";import"./AnimatedClockIcon-GycZWL2V.js";import"./LikeFilled-Dgprn6aX.js";import"./StarIcon-BUwQsvds.js";import"./MetricHighlight-D9-WOJsF.js";import"./StarFilled-BP7P5gqM.js";import"./HandOfCardsIcon-D6CticlF.js";import"./DivButton-DY_Z8ZEs.js";import"./ImageBlurButton-uk0mDRZB.js";import"./Overflow-31jpmjeX.js";import"./RankingBoard-BQNFDS3T.js";import"./CaretUpOutlined-CjYIrPXG.js";import"./TheEndIcon-DJ1KGvIf.js";import"./ArrowRightOutlined-CqcflkC2.js";import"./progress-DOO7QNuo.js";import"./TitledContainer-CVVAMypJ.js";import"./Medal-DMpAps-K.js";const j={CHALLENGE_SELECTION:"CHALLENGE_SELECTION",CONTENDER_SELECTION:"CONTENDER_SELECTION",BETS:"BETS",BATTLE:"BATTLE",RESULTS:"RESULTS"},F={SUBMIT_CHALLENGE:"SUBMIT_CHALLENGE",SUBMIT_CONTENDERS:"SUBMIT_CONTENDERS",SUBMIT_BETS:"SUBMIT_BETS",SUBMIT_VOTES:"SUBMIT_VOTES"},Le={0:8,1:8,2:9,3:9,4:10,5:10,6:11,7:11,8:12,9:12,10:13,11:13,12:14,13:14},Fe={quarter:4,semi:2,final:1,winner:0},Z={quarter:"",semi:"",final:""},q={0:"final",1:"semi",2:"quarter"};function Me(s){const{translate:t}=S(),n=k({actionName:"submit-challenge",onBeforeCall:()=>s(3),onError:()=>s(1),successMessage:t("Desafio enviado com sucesso!","Challenge send successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar o desafio","Oops, the application failed to submit the challenge")});return r=>{n({action:F.SUBMIT_CHALLENGE,...r})}}function ze(s){const{translate:t}=S(),n=k({actionName:"submit-contender",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:t("Competidor enviado com sucesso!","Contender send successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar o competidor","Oops, the application failed to submit the contender")});return r=>{n({action:F.SUBMIT_CONTENDERS,...r})}}function Ve(s){const{translate:t}=S(),n=k({actionName:"submit-bets",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:t("Apostas enviadas com sucesso!","Bets send successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar apostas","Oops, the application failed to submit bets")});return r=>{n({action:F.SUBMIT_BETS,...r})}}function We(s){const{translate:t}=S(),n=k({actionName:"submit-votes",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:t("Votos enviados com sucesso!","Votes send successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar votos","Oops, the application failed to submit votes")});return r=>{n({action:F.SUBMIT_VOTES,...r})}}const re=(s,t,n)=>({quarterCard:s.find(r=>r.id===t?.quarter),semiCard:s.find(r=>r.id===t?.semi),finalCard:s.find(r=>r.id===t?.final),selectedCard:s.find(r=>r.id===n)}),Ue=s=>s.reduce((t,n)=>(t[n.tier]===void 0&&(t[n.tier]={}),t[n.tier][n.id]=!0,t),{}),$e=(s,t,n,r)=>{const a=oe.orderBy(s.filter(o=>o.tier==="quarter"),`name.${r}`);if(t==="semi"&&n.final){const o=a.find(c=>c.id===n.final);return o?a.filter(c=>o.position>3?c.position<=3:c.position>3):a}if(t==="quarter"&&n.final&&n.semi){const o=a.find(p=>p.id===n.final);if(!o)return a;const c=a.find(p=>p.id===n.semi);if(!c)return a;const l=o.position%2===0?o.position+1:o.position-1,m=c.position%2===0?c.position+1:c.position-1,w=[o.position,l,c.position,m];return a.filter(p=>!w.includes(p.position))}return a};function ae({contenders:s,onSelect:t}){const n=O(Math.max(s.length??8,5),{minWidth:100});return e.jsx(se,{title:e.jsx(i,{pt:"Seus Competidores",en:"Your Contenders"}),children:e.jsx("ul",{className:"w-contenders-hand",children:s.map(r=>e.jsxs("li",{className:"w-contenders-hand__entry",children:[!!t&&e.jsx(P,{onClick:()=>t(r.id),shape:"round",ghost:!0,className:"w-contenders-hand__button",children:e.jsx(i,{pt:"Selecionar",en:"Select"})}),e.jsx(d,{character:r,overlayColor:"gray",size:n})]},r.id))})})}function De({onSubmitChallenge:s,challenges:t,userContenders:n,round:r,announcement:a}){return L(),e.jsxs(E,{fullWidth:!0,announcement:a,children:[e.jsx(y,{children:e.jsx(i,{pt:"Selecione o desafio da rodada",en:"Select the theme for the round"})}),e.jsxs(ee,{type:"rule",children:[e.jsx(i,{pt:e.jsx(e.Fragment,{children:"Cada rodada é feita ao redor de um desafio."}),en:e.jsx(e.Fragment,{children:"Each round has a challenge for the contenders to battle on!"})}),n.length>1&&e.jsx(i,{pt:e.jsx(e.Fragment,{children:" Você tem competidores em mãos (na barra abaixo) e um deles irá participar desta rodada."}),en:e.jsx(e.Fragment,{children:" You have a hand of contenders and one of them will participate in this round."})}),n.length===0&&e.jsx(i,{pt:e.jsx(e.Fragment,{children:" Selecione um dos desafios."}),en:e.jsx(e.Fragment,{children:" Select one of the challenges."})}),n.length>1&&r.current<5?e.jsx(i,{pt:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Selecione o desafio que você acha que um dos seus competidores tem mais change de vencer.",e.jsx("br",{}),"Você ganha ",e.jsx(C,{children:"2"})," pontos se ele(a) vencer."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Select a challenge you think one of your contenders have the best chance of winning.",e.jsx("br",{}),"You get ",e.jsx(C,{children:"2"})," points if they win."]})}):e.jsx(i,{pt:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Este é uma rodada de semifinalistas, então somente competidores que chegaram na semi-final participam.",e.jsx("br",{}),"Você não selecionará um competidor dessa vez."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"This is a semifinalist round, so only contenders that got to the semifinals will participate.",e.jsx("br",{}),"You won't select a contender this time."]})})]}),e.jsx(f,{children:t.map((o,c)=>e.jsx(D,{onClick:()=>s({challengeId:o.id}),children:e.jsx(H,{header:le[c],randomColor:!0,children:o.text})},o.id))}),r.current<5&&n.length>1&&e.jsx(ae,{contenders:n})]})}function Ge({state:s,players:t,user:n}){const{step:r,goToNextStep:a,setStep:o}=v(0),c=Me(o),l=e.jsx(T,{icon:e.jsx(we,{}),title:e.jsx(i,{pt:"Desafio",en:"Challenge"}),currentRound:s?.round?.current,duration:5,type:"overlay",children:e.jsx(g,{children:e.jsx(i,{pt:"Qual o desafio da rodada?",en:"What's the round's challenge?"})})});return e.jsx(B,{phase:s?.phase,allowedPhase:j.CHALLENGE_SELECTION,children:e.jsxs(b,{step:r,players:t,children:[e.jsx(Se,{round:s.round,onPressButton:a,time:4,children:e.jsx(g,{contained:!0,children:s.round.current===s.round.total?e.jsx(i,{pt:"Rodada final: Somente os finalistas!",en:"Final Round: Only finalists"}):e.jsx(i,{pt:"Quem vai ganhar a medalha de ouro?",en:"Who's gonna get the gold medal?"})})}),e.jsx(De,{onSubmitChallenge:c,challenges:s.challenges,userContenders:n.contenders,round:s.round,announcement:l})]})})}function M({challenge:s}){const{translate:t}=S();return e.jsx(f,{children:e.jsx(H,{header:t("Desafio","Challenge"),color:"purple",children:s.text})})}function He({onSubmitContender:s,challenge:t,userContenders:n,announcement:r}){const a=O(Math.max(n.length??8,5),{minWidth:100});return L(),e.jsxs(E,{fullWidth:!0,announcement:r,children:[e.jsx(y,{children:e.jsx(i,{pt:"Quem pode ganhar esse desafio?",en:"Who can win this challenge?"})}),e.jsx(M,{challenge:t}),e.jsx(ee,{type:"action",children:e.jsx(i,{pt:"Selecione um de seus competidores para entrar no campeonato",en:"Select one of your contenders to join the championship"})}),e.jsx("ul",{className:"w-contenders-hand",children:n.map(o=>e.jsxs("li",{className:"w-contenders-hand__entry",children:[e.jsx(G,{onClick:()=>s({contendersId:o.id}),shape:"round",type:"default",ghost:!0,className:"w-contenders-hand__button",children:e.jsx(i,{pt:"Selecionar",en:"Select"})}),e.jsx(d,{character:o,overlayColor:"gray",size:a})]},o.id))})]})}function Qe({state:s,players:t,user:n}){const{step:r,setStep:a}=v(0),o=ze(a),c=e.jsx(T,{icon:e.jsx(ve,{}),title:e.jsx(i,{pt:"Competidores",en:"Contenders"}),type:"overlay",currentRound:s?.round?.current,duration:5,children:e.jsx(g,{children:e.jsx(i,{pt:"Quem tem chance de ganhar?",en:"Who has what it takes?"})})});return e.jsx(B,{phase:s?.phase,allowedPhase:j.CONTENDER_SELECTION,children:e.jsx(b,{step:r,players:t,waitingRoom:{content:e.jsx(ae,{contenders:n.contenders})},children:e.jsx(He,{onSubmitContender:o,challenge:s.challenge,userContenders:n.contenders,announcement:c})})})}function z({bets:s,brackets:t,selectedContenderId:n=""}){const r=O(5,{minWidth:100}),{quarterCard:a,semiCard:o,finalCard:c,selectedCard:l}=h.useMemo(()=>re(t,s,n),[s?.final,s?.quarter,s?.semi]);return!a||!o||!c?null:e.jsx(se,{title:e.jsx(i,{pt:"Suas Apostas",en:"Your Bets"}),icon:e.jsx(ne,{}),children:e.jsx("div",{className:"w-bets-floating-hand",children:e.jsxs("ul",{className:"w-floating-bets",children:[e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(i,{pt:"Quartas de finais",en:"Quarterfinals"})}),e.jsx(d,{character:a,overlayColor:"gray",size:r})]}),e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(i,{pt:"Semifinais",en:"Semifinals"})}),e.jsx(d,{character:o,overlayColor:"gray",size:r})]}),e.jsxs("li",{className:"w-floating-bets__entry",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(i,{pt:"Final",en:"Final"})}),e.jsx(d,{character:c,overlayColor:"gray",size:r})]}),!!l&&e.jsxs("li",{className:"w-floating-bets__entry w-floating-bets__entry--your-contender",children:[e.jsx("span",{className:"w-floating-bets__label",children:e.jsx(i,{pt:"Seu competidor",en:"Your contender"})}),e.jsx(_e,{cardId:l.id,children:e.jsx(d,{character:l,overlayColor:"gray",size:r})})]})]})})})}function R({bracket:s,players:t}){return(s.votes??[]).length>0?e.jsx(ce.Group,{className:"w-contender-votes",max:{count:3},size:"small",children:s.votes?.map(n=>e.jsx(Q,{size:"small",avatarId:t[n].avatarId,alt:t[n].name},`${s.id}-${s.votes}`))}):null}const Ye=(s,t)=>t==="semi"?s%2===0?"orange":"green":s%2===0?"red":"blue";function Y({brackets:s,activeTier:t,players:n}){const{quarter:r,semi:a,final:o,winner:c}=s.reduce((l,m)=>(l[m.tier].push(m),l),{quarter:[],semi:[],final:[],winner:[]});return e.jsxs("div",{className:"w-brackets-container",children:[e.jsxs("div",{className:"tournament-headers",children:[e.jsx("h3",{children:e.jsx(i,{pt:"Quartas",en:"Quarter-finals"})}),e.jsx("h3",{children:e.jsx(i,{pt:"Semifinais",en:"Semifinals"})}),e.jsx("h3",{children:e.jsx(i,{pt:"Final",en:"Final"})}),e.jsx("h3",{children:e.jsx(i,{pt:"Campeão",en:"Winner"})})]}),e.jsxs("div",{className:"w-tournament-brackets",children:[e.jsx("ul",{className:"w-bracket w-bracket--1",children:r.map((l,m)=>e.jsxs("li",{className:u("w-team-item",l.win&&"w-team-item--win"),children:[e.jsx(d,{size:100,overlayColor:t===l.tier?Ye(m,t):"gray",character:{id:l.id,name:l.name,description:l.description},className:"w-bracket-contender"}),e.jsx(R,{bracket:l,players:n})]},`${l.id}-${l.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--2",children:a.map(l=>e.jsxs("li",{className:u("w-team-item",l.win&&"w-team-item--win"),children:[e.jsx(d,{size:100,overlayColor:"gray",character:{id:l.id,name:l.name},className:"w-bracket-contender"}),e.jsx(R,{bracket:l,players:n})]},`${l.id}-${l.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--3",children:o.map(l=>e.jsxs("li",{className:u("w-team-item",l.win&&"w-team-item--win"),children:[e.jsx(d,{size:100,overlayColor:"gray",character:{id:l.id,name:l.name},className:"w-bracket-contender"}),e.jsx(R,{bracket:l,players:n})]},`${l.id}-${l.position}`))}),e.jsx("ul",{className:"w-bracket w-bracket--4",children:c.map(l=>e.jsxs("li",{className:u("w-team-item",l.name.pt!=="TBD"&&"w-team-item--win"),children:[e.jsx(d,{size:100,overlayColor:l.name.pt!=="TBD"?"yellow":"gray",character:{id:l.id,name:l.name},className:"w-bracket-contender"}),e.jsx(R,{bracket:l,players:n})]},`${l.id}-${l.position}`))})]})]})}function U({contenders:s,updateBet:t,language:n,betTier:r}){return e.jsxs(W,{className:"w-bet-form__select",defaultValue:"",onChange:a=>t({[r]:a}),children:[e.jsx(W.Option,{value:"",children:e.jsx(i,{pt:"Selecione",en:"Select"})}),s.map(a=>e.jsx(W.Option,{value:a.id,children:a.name[n]},`option-${r}-${a.id}`))]})}function $({onConfirm:s}){return e.jsx(Ee,{title:e.jsx(i,{pt:"Tem certeza que quer reiniciar apostas?",en:"Are you sure you want to restart the bets?"}),onConfirm:s,okText:e.jsx(i,{pt:"Sim",en:"Yes"}),cancelText:e.jsx(i,{pt:"Não",en:"No"}),children:e.jsx(P,{children:e.jsx(i,{pt:"Reiniciar",en:"Reset"})})})}function Xe({brackets:s,onSubmitBets:t}){const{language:n}=S(),[r,a]=h.useState(0),[o,c]=h.useState([]),[l,m]=h.useState(Z),w=()=>{a(0),m(Z)},p=N=>{m(I=>({...I,...N}))};h.useEffect(()=>{c($e(s,q[r],l,n))},[s,r,l,n]);const _=o.filter(N=>!Object.values(l).includes(N.id));return e.jsxs("div",{className:"w-bet-form",children:[r===0&&e.jsxs(g,{contained:!0,className:u("w-bet-form__container","w-bet-form__container--final",A("zoomIn")),children:[e.jsx(V,{icon:e.jsx(te,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ",e.jsx("u",{children:"vai ganhar a final"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(C,{children:"5"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will ",e.jsx("u",{children:"win the final"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(C,{children:"5"})," points."]})})}),e.jsx(U,{contenders:_,updateBet:p,language:n,betTier:q[r]}),e.jsxs(f,{children:[e.jsx($,{onConfirm:w}),e.jsx(P,{onClick:()=>a(r+1),disabled:!l.final,type:"primary",children:e.jsx(i,{pt:"Próximo",en:"Next"})})]})]}),r===1&&e.jsxs(g,{contained:!0,className:u("w-bet-form__container","w-bet-form__container--semi",A("zoomIn")),children:[e.jsx(V,{icon:e.jsx(be,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ganha uma ",e.jsx("u",{children:"semifinal"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(C,{children:"3"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will win at least a ",e.jsx("u",{children:"semifinal"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(C,{children:"3"})," points."]})})}),e.jsx(U,{contenders:_,updateBet:p,language:n,betTier:q[r]}),e.jsxs(f,{children:[e.jsx($,{onConfirm:w}),e.jsx(P,{onClick:()=>a(r+1),disabled:!l.semi,type:"primary",children:e.jsx(i,{pt:"Próximo",en:"Next"})})]})]}),r===2&&e.jsxs(g,{contained:!0,className:u("w-bet-form__container","w-bet-form__container--quarter",A("zoomIn")),children:[e.jsx(V,{icon:e.jsx(Ne,{}),size:"large"}),e.jsx("p",{className:"w-bet-form__instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Selecione o competidor que você acha que ganha uma ",e.jsx("u",{children:"quarta de final"}),".",e.jsx("br",{}),"Se ele ganhar, você recebe ",e.jsx(C,{children:"1"})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Select the contender you think will win at least a ",e.jsx("u",{children:"quarterfinal"}),".",e.jsx("br",{}),"If they win, you gain ",e.jsx(C,{children:"1"})," points."]})})}),e.jsx(U,{contenders:_,updateBet:p,language:n,betTier:q[r]}),e.jsxs(f,{children:[e.jsx($,{onConfirm:w}),e.jsx(G,{onClick:()=>t(l),disabled:!l.quarter,children:e.jsx(i,{pt:"Enviar Apostas",en:"Submit Bets"})})]})]})]})}function Je({onSubmitBets:s,challenge:t,brackets:n,players:r,announcement:a}){return L(),e.jsxs(E,{fullWidth:!0,announcement:a,children:[e.jsx(y,{children:e.jsx(i,{pt:"Faça suas apostas!",en:"Make your bets!"})}),e.jsx(M,{challenge:t}),e.jsx(Xe,{brackets:n,onSubmitBets:s}),e.jsx(Y,{brackets:n,activeTier:"quarter",players:r})]})}function Ke({state:s,players:t,user:n}){const{step:r,setStep:a}=v(0),o=Ve(a),c=e.jsx(T,{icon:e.jsx(ne,{}),title:e.jsx(i,{pt:"Apostas",en:"Bets"}),type:"overlay",currentRound:s?.round?.current,duration:5,children:e.jsx(g,{children:e.jsx(i,{pt:"Selecione quem você acha que ganha as quartas de final, semi final e final",en:"Place bet on who you think will win the quarter-finals, semifinals, and finals"})})});return e.jsx(B,{phase:s?.phase,allowedPhase:j.BETS,children:e.jsx(b,{step:r,players:t,waitingRoom:{content:!!n.bets?.final&&e.jsx(z,{bets:n.bets,brackets:s.brackets,selectedContenderId:n.selectedContenderId})},children:e.jsx(Je,{onSubmitBets:o,challenge:s.challenge,brackets:s.brackets,players:t,announcement:c})})})}function Ze({tier:s}){return s==="quarter"?e.jsx(i,{pt:"Quartas de finais",en:"Quarterfinals"}):s==="semi"?e.jsx(i,{pt:"Semifinais",en:"Semifinals"}):e.jsx(i,{pt:"Final",en:"Final"})}function es(s){const[t,n]=h.useState({});function r(o){n(c=>({...c,[Le[o.position]]:o.position}))}function a(o){return Object.values(t).includes(o)}return{votes:t,updateVote:r,isComplete:Object.keys(t).length===Fe[s],checkActiveVote:a}}function ss({contenders:s}){const t=s.flat(),n=O(t.length+2,{gap:16,minWidth:30,maxWidth:100});return e.jsx("ul",{className:"w-tier-contenders",children:t.map(r=>e.jsx("li",{className:"w-tier-contender",children:e.jsx(d,{character:r,overlayColor:"gray",size:n})},`w-tier-contender-${r.id}`))})}function ns({brackets:s,tier:t,onSubmitVotes:n,players:r,bets:a}){const{step:o,goToNextStep:c}=v(0),{seconds:l}=Te({duration:5,autoStart:!0,onExpire:c}),m=h.useMemo(()=>s.filter(x=>x.tier===t).map((x,X,ie)=>X%2===0?[x,ie[X+1]]:[]).filter(x=>x.length>0),[s,t]),{votes:w,updateVote:p,isComplete:_,checkActiveVote:N}=es(t),I=rs(t);return L(),e.jsxs(b,{step:o,players:r,children:[e.jsxs(g,{contained:!0,children:[e.jsx("p",{children:t==="quarter"?e.jsx(i,{pt:"Competidores:",en:"Contenders:"}):e.jsx(i,{pt:"Foram para a próxima fase:",en:"Moved to the next bracket:"})}),e.jsx(ss,{contenders:m}),e.jsx("p",{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Votação começando em ",l]}),en:e.jsxs(e.Fragment,{children:["Voting starting in ",l]})})})]}),e.jsxs("div",{children:[e.jsx("ul",{className:"w-voting-group",children:m.map(x=>e.jsx(ts,{left:x[0],right:x[1],onClick:p,colorLeft:I.left,colorRight:I.right,checkActiveVote:N},`${x[0].id}-${x[1].id}`))}),e.jsx(f,{children:e.jsx(G,{size:"large",onClick:()=>n({votes:w}),disabled:!_,children:e.jsx(i,{pt:"Enviar votos",en:"Submit votes"})})})]})]})}function ts({left:s,right:t,colorLeft:n,colorRight:r,onClick:a,checkActiveVote:o}){return e.jsxs("li",{className:u("w-voting-options",A("flipInX")),children:[e.jsx(D,{onClick:()=>a(s),active:o(s.position),className:"w-vote",activeClass:"w-vote--active",children:e.jsx(d,{size:200,character:s,overlayColor:n})}),e.jsx("span",{className:"w-voting-options__vs",children:"VS"}),e.jsx(D,{onClick:()=>a(t),active:o(t.position),className:"w-vote",activeClass:"w-vote--active",children:e.jsx(d,{size:200,character:t,overlayColor:r})})]})}const rs=s=>{switch(s){case"quarter":return{left:"red",right:"blue"};case"semi":return{left:"green",right:"orange"};default:return{left:"red",right:"blue"}}};function as({onSubmitVotes:s,challenge:t,brackets:n,tier:r,bets:a,selectedContenderId:o,players:c,announcement:l}){return e.jsxs(E,{fullWidth:!0,announcement:l,children:[e.jsx(y,{children:e.jsx(Ze,{tier:r})}),e.jsx(M,{challenge:t}),e.jsx(ns,{brackets:n,tier:r,onSubmitVotes:s,players:c,bets:a}),e.jsx(Y,{brackets:n,activeTier:r,players:c}),e.jsx(pe,{players:c}),e.jsx(z,{bets:a,brackets:n,selectedContenderId:o})]})}function is({state:s,players:t,user:n}){const{step:r,setStep:a}=v(0),[o,c]=h.useState(""),l=We(a);h.useEffect(()=>{s.tier!==o&&(c(s.tier),a(0))},[s.tier,o,a]);const m=e.jsx(T,{icon:e.jsx(ye,{}),title:e.jsx(i,{pt:"Batalha!",en:"Battle!"}),type:"overlay",currentRound:s?.round?.current,duration:3,children:e.jsx(g,{children:e.jsx(i,{pt:"Vote em quem você acha que melhor se encaixa no desafio",en:"Vote on who you think best fit the challenge"})})});return e.jsx(B,{phase:s?.phase,allowedPhase:j.BATTLE,children:e.jsx(b,{step:r,players:t,children:e.jsx(as,{onSubmitVotes:l,challenge:s.challenge,brackets:s.brackets,tier:s.tier,bets:n.bets,selectedContenderId:n.selectedContenderId,players:t,announcement:m})})})}function os({players:s,brackets:t}){const n=de(s),r=Ue(t);return e.jsxs("ul",{className:"w-players-bets",style:{gridTemplateColumns:`repeat(${n.length+1}, auto)`},children:[e.jsxs("li",{className:"w-players-bets__player w-players-bets__player--header",children:[e.jsx("div",{className:"w-players-bets__square",children:e.jsx(Q,{shape:"square",size:"large",className:"w-players-bets__avatar",avatarId:"N"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(i,{pt:"Final",en:"Final"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(i,{pt:"Semi",en:"Semi"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(i,{pt:"Quartas",en:"Quarter"})}),e.jsx("div",{className:"w-players-bets__square",children:e.jsx(i,{pt:"Competidor",en:"Contender"})})]}),n.map(a=>e.jsx(ls,{brackets:t,player:a,contendersByTiers:r},`players-bets-${a.id}`))]})}function ls({player:s,brackets:t,contendersByTiers:n}){const{quarterCard:r,semiCard:a,finalCard:o,selectedCard:c}=h.useMemo(()=>re(t,s.bets,s.selectedContenderId),[t,s.bets,s.selectedContenderId]);return!r||!a||!o?null:e.jsxs("li",{className:"w-players-bets__player",style:{backgroundColor:me(s.avatarId)},children:[e.jsx("div",{className:"w-players-bets__square",children:e.jsx(Q,{shape:"square",size:"large",className:"w-players-bets__avatar",avatarId:s.avatarId})}),e.jsx("div",{className:u("w-players-bets__square",n.winner[o.id]&&"w-players-bets__square--win"),children:e.jsx(d,{size:50,overlayColor:n.winner[o.id]?"yellow":"gray",character:o,hideName:!0})}),e.jsx("div",{className:u("w-players-bets__square",n.final[a.id]&&"w-players-bets__square--win"),children:e.jsx(d,{size:50,overlayColor:n.final[a.id]?"yellow":"gray",character:a,hideName:!0})}),e.jsx("div",{className:u("w-players-bets__square",n.semi[r.id]&&"w-players-bets__square--win"),children:e.jsx(d,{size:50,overlayColor:n.semi[r.id]?"yellow":"gray",character:r,hideName:!0})}),c?e.jsx("div",{className:u("w-players-bets__square",n.winner[c.id]&&"w-players-bets__square--win"),children:e.jsx(d,{size:50,overlayColor:n.winner[c.id]?"yellow":"gray",character:c,hideName:!0})}):e.jsx("div",{className:u("w-players-bets__square","w-players-bets__square--none"),children:"-"})]},`players-bets-${s.id}`)}function cs({players:s,ranking:t,isGameOver:n,round:r,brackets:a,bets:o,selectedContenderId:c}){return e.jsxs(Ie,{players:s,ranking:t,gainedPointsDescriptions:[e.jsx(i,{pt:"Apostou na final corretamente",en:"Correct final bet"},"1"),e.jsx(i,{pt:"Apostou nas semifinais corretamente",en:"Correct semifinal bet"},"2"),e.jsx(i,{pt:"Apostou nas quartas de finais corretamente",en:"Correct quarterfinal bet"},"3"),e.jsx(i,{pt:"Seu competidor ganhou",en:"Your competitor won"},"4")],children:[!n&&e.jsx(qe,{round:r}),e.jsx(os,{players:s,brackets:a}),e.jsx(xe,{round:r}),e.jsx(Y,{brackets:a,activeTier:"winner",players:s}),e.jsx(z,{bets:o,brackets:a,selectedContenderId:c})]})}function ds({challenge:s,brackets:t,bets:n,goToNextStep:r,selectedContenderId:a,announcement:o}){return je(),e.jsxs(E,{fullWidth:!0,announcement:o,children:[e.jsx(y,{children:e.jsx(i,{pt:"Vencedor",en:"Winner"})}),e.jsx(M,{challenge:s}),e.jsx(f,{className:"margin",children:e.jsx(d,{size:200,overlayColor:"yellow",character:t[t.length-1]})}),e.jsx(f,{children:e.jsx(Re,{duration:7,icon:e.jsx(Ae,{}),onExpire:r,onClick:r,children:e.jsx(i,{pt:"Ver Ranking",en:"See Ranking"})})}),e.jsx(z,{bets:n,brackets:t,selectedContenderId:a})]})}function ms({state:s,players:t,user:n}){const{step:r,goToNextStep:a,setStep:o}=v(0),[c,l]=h.useState("");h.useEffect(()=>{s.tier!==c&&(l(s.tier),o(0))},[s.tier,c,o]);const m=e.jsx(T,{icon:e.jsx(Be,{}),title:e.jsx(i,{pt:"Resultado!",en:"Results!"}),type:"overlay",currentRound:s?.round?.current,duration:3,children:e.jsx(g,{children:e.jsx(i,{pt:"Só pode haver um...",en:"There's only one..."})})});return e.jsx(B,{phase:s?.phase,allowedPhase:j.RESULTS,children:e.jsxs(b,{step:r,players:t,children:[e.jsx(ds,{brackets:s.brackets,challenge:s.challenge,bets:n.bets,goToNextStep:a,selectedContenderId:n.selectedContenderId,announcement:m}),e.jsx(cs,{players:t,ranking:s.ranking,isGameOver:!1,round:s.round,brackets:s.brackets,bets:n.bets,selectedContenderId:n.selectedContenderId})]})})}function us({state:s,players:t}){const n=s.pastBattles,{translate:r}=S();return e.jsxs(Pe,{state:s,players:t,announcementIcon:e.jsx(te,{}),children:[e.jsx(J,{size:"xx-small",className:"padding",children:e.jsx(i,{pt:"Campeão Ultimate",en:"Ultimate Champion"})}),e.jsx(f,{className:"margin",children:e.jsx(d,{size:200,overlayColor:"yellow",character:s.finalWinner})}),e.jsx(K,{}),e.jsx(Oe,{players:t,achievements:s.achievements,reference:ke}),e.jsx(K,{}),e.jsx(J,{size:"xx-small",className:"padding",children:e.jsx(i,{pt:"Resumo das Batalhas",en:"Battles Summary"})}),e.jsx(f,{className:"margin",children:n.map(a=>e.jsxs(ue,{direction:"vertical",align:"center",className:"final-gallery",children:[e.jsx(H,{header:r("Desafio","Challenge"),color:"purple",className:"final-gallery__card",children:a.challenge.text}),a.contenders.map((o,c)=>e.jsx(d,{size:80,overlayColor:c===0?"yellow":"gray",character:o,className:"final-gallery__contender"},`${a.challenge.id}-${o.id}`))]},a.challenge.id))})]})}function hs(s){switch(s.phase){case j.CHALLENGE_SELECTION:return Ge;case j.CONTENDER_SELECTION:return Qe;case j.BETS:return Ke;case j.BATTLE:return is;case j.RESULTS:return ms;case Ce.DEFAULT.GAME_OVER:return us;default:return ge}}function Nn(){return e.jsx(fe,{gameCollection:he.SUPER_CAMPEONATO,getActiveComponent:hs})}export{Nn as default};
