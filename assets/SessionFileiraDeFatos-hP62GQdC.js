import{f as Z,j as e,T as i,bY as D,q as E,y as N,c as L,bs as j,D as k,r as B,au as I,s as K,B as W,bZ as ee,v as se,c5 as re,b_ as oe,av as ne,I as S,aF as te}from"./index-CpdE2Bge.js";import{u as ie,S as A,a as G,P as q,f as ae,c as ce,d as de,e as le}from"./Session-CSf4wJDM.js";import{u as V}from"./useWhichPlayerIsThe-BRaB7F7h.js";import{B as me}from"./BarChartIcon-D463-KfF.js";import{P as h}from"./PlayerAvatarName-CI_2huVy.js";import{S as C,P as $,a as M}from"./StepSwitcher-C7iUVADE.js";import{I as H}from"./useDevFeatures-BppvV82v.js";import{T as he}from"./TurnOrder-Bx_8ha84.js";import{V as ue}from"./ViewOr-Bx1kDirb.js";import{T as w}from"./TextHighlight-DCMlBFgq.js";import{P as x}from"./PointsHighlight-B0oBgF9F.js";import{R as g}from"./RuleInstruction-cydW5jSe.js";import{D as xe}from"./DevButton-WN00asfb.js";import{P as O}from"./PlayerAvatarStrip-CKVaf-3h.js";import{E as Q}from"./EmojiCard-BamMETAi.js";import{R as pe}from"./UndoOutlined-Cw1CimzM.js";import{Q as je}from"./QueueIcon-BgpDsDo7.js";import{S as ge}from"./StepRankingWrapper-BUDsInIT.js";import{T as Se}from"./TimedButton-klbsqR_n.js";import{B as U}from"./BoxXIcon-DMdvSmQt.js";import{S as v}from"./StarIcon-C1tLAWHA.js";import{P as fe}from"./PlayerAvatar-VyArYioU.js";import{R as Ie}from"./TrophyOutlined-D5Uks1Tj.js";import{F as Oe}from"./FlagIcon-DJbp55Go.js";import"./RulesModal-BgA43RSL.js";import{G as Re}from"./GameOverWrapper-3MuSYeQt.js";import{A as ve}from"./Achievements-DlJmjbZ0.js";import{T as Te}from"./TitledContainer-CT9p-Zow.js";import{a as Ee}from"./achievements-Tfw1DHB7.js";import"./Game-C8p86qki.js";import"./useMutation-jjU7VC7z.js";import"./speech-BpavaZ8g.js";import"./Popconfirm-C7qOoAyv.js";import"./PurePanel-15k22O5e.js";import"./index-ykiw1x5d.js";import"./index-zYMlrq-q.js";import"./extends-CF3RwP-h.js";import"./useToggle-BtQFynEh.js";import"./useId-CBH1MFmS.js";import"./DebugOnly-DYk5KYll.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-BY3kdK84.js";import"./index-QmmT8Nmr.js";import"./index-DAtu5DwZ.js";import"./SignIn-Dfm5ShFA.js";import"./GoogleIcon-BsQYk65J.js";import"./AnimatedGearIcon-cA8jCHvQ.js";import"./AnimatedClockIcon-qK286wnX.js";import"./Loading-DO4b7K-P.js";import"./AnimatedLoaderIcon-BK6ci4Tr.js";import"./WaitingRoomIcon-BFWHDWEN.js";import"./LikeFilled-BFCar6a9.js";import"./MetricHighlight-Bz8PEjqM.js";import"./StarFilled-HySaIctT.js";import"./Sprite-D6ET0knn.js";import"./WarningOutlined-DweArmCF.js";import"./RankingBoard-BBsNdCqT.js";import"./CaretUpOutlined-DGPx3LKV.js";import"./WritingIcon-CLYF8-vW.js";import"./TheEndIcon-BftYOgAt.js";import"./index-CqnqPAte.js";import"./progress-CoMlUCcl.js";import"./Medal-BVp1_Q9p.js";const T={ORDERING:"ORDERING",RESULTS:"RESULTS"},Ne={SUBMIT_SCENARIO_ORDER:"SUBMIT_SCENARIO_ORDER"},_e=[{id:"1",text:{pt:"Discordo totalmente",en:"Strongly disagree"}},{id:"2",text:{pt:"Discordo",en:"Disagree"}},{id:"3",text:{pt:"Neutro",en:"Neutral"}},{id:"4",text:{pt:"Concordo",en:"Agree"}},{id:"5",text:{pt:"Concordo totalmente",en:"Strongly agree"}}],Pe=[{id:"10",text:{pt:"Vish",en:"Oh!"}},{id:"7",text:{pt:"Ah não",en:"Gosh"}},{id:"23",text:{pt:"Quê?",en:"No way"}},{id:"2",text:{pt:"PQP",en:"What the..."}},{id:"3",text:{pt:"Preferia ⭐ Morta",en:"Lord have mercy!"}}];function Fe(s){const{translate:r}=Z(),o=ie({actionName:"submit-order",onSuccess:()=>s(2),onError:()=>s(0),successMessage:r("Ordem submetida com sucesso","Order submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar sua ordem","Oops, the application found an error while trying to submit your order")});return n=>{o({action:Ne.SUBMIT_SCENARIO_ORDER,...n})}}function be(){return e.jsxs(e.Fragment,{children:[e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["A cada rodada um jogador é escolhido para ser o ",e.jsx(w,{children:"juiz"})," e colocar os cenários em ordem. Os outros jogadores devem tentar adivinhar qual a ordem o jogador principal colocou cada cenário."]}),en:e.jsxs(e.Fragment,{children:["Each round a player is chosen to be the ",e.jsx(w,{children:"judge"})," and put the scenarios in order. The other players must try to guess which order the main player placed each scenario."]})}),e.jsx("br",{})]})}const y=s=>s==="positive"?_e:Pe,Ae=s=>{const r=D([s[0],s[1],s[2]]),o=D([s[3],s[4]]);return[...r,...o]};function Y({scenarios:s,reference:r,player:o}){const n=E(8,{gap:16,minWidth:100,maxWidth:200,margin:32});return e.jsxs(N,{className:L(o?"scenarios-results":"scenarios"),children:[!!o&&e.jsx(O,{player:o}),s.map((a,t)=>e.jsxs("div",{className:"scenario",style:{width:`${n}px`},children:[e.jsx(j,{children:t+1}),e.jsx("div",{className:"scenario__tagline",children:e.jsx(k,{children:r[t].text})}),e.jsx(Q,{emojiId:r[t].id,className:"scenario__emoji"}),a&&e.jsx("div",{className:"scenario__card",children:a.text})]},`position-${t}`)),!!o&&e.jsx(O,{player:o})]})}function J({scenarios:s,kind:r,onSubmitOrder:o}){const n=E(8,{gap:16,minWidth:100,maxWidth:200,margin:32}),a=y(r),[t,c]=B.useState(Array(s.length).fill(null)),m=s.filter(l=>!t.includes(l)),d=l=>{c(p=>{const f=[...p],F=f.findIndex(X=>X===null);return f[F]=l,f})},u=()=>{c(l=>{const p=[...l],f=se.findLastIndex(p,F=>F!==null);return p[f]=null,p})},P=()=>{const l=t.map(p=>p?.id??"");o({order:l})};return e.jsxs(I,{vertical:!0,children:[e.jsx(Y,{scenarios:t,reference:a}),e.jsx(g,{type:"action",children:e.jsx(i,{pt:"Você deve escolher os cenários em ordem do menos pior para o pior. Você pode desfazer a seleção, se precisar. Quando estiver pronto(a), clique em 'Enviar'.",en:"You must choose the scenarios in order from the least bad to the worst. You may undo your selection if needed. When you're ready, click 'Submit'."})}),e.jsx("div",{className:"scenarios-buttons",children:m.map(l=>e.jsx(K,{className:"scenarios-buttons__button",onClick:()=>d(l),style:{width:`${n}px`},children:l.text},`scenario-${l.id}`))}),e.jsxs(I,{children:[e.jsx(W,{size:"large",onClick:u,icon:e.jsx(pe,{}),disabled:t[0]===null,children:e.jsx(i,{pt:"Desfazer",en:"Undo"})}),e.jsx(xe,{size:"large",type:"dashed",onClick:()=>c(Ae(s)),children:"Auto-select"}),e.jsx(ee,{size:"large",onClick:P,disabled:t.some(l=>l===null),children:e.jsx(i,{pt:"Enviar",en:"Submit"})})]})]})}function z({children:s,className:r}){return e.jsxs("span",{className:r,children:[e.jsx("span",{className:"special-rule-highlight",children:e.jsx(i,{pt:"Regra Especial",en:"Special Rule"})}),s]})}const R={CURSED_FIRST_POSITION:1,SECOND_POSITION:2,CENTER_POSITION:3,FOURTH_POSITION:4,CURSED_LAST_POSITION:5};function _({roundType:s}){return["SECOND_POSITION","CENTER_POSITION","FOURTH_POSITION"].includes(s)?e.jsx(g,{type:"event",children:e.jsx(z,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Nesta rodada, jogadores que ",e.jsx("strong",{children:"acertarem"})," o cenário da posição"," ",e.jsx(j,{children:R[s]})," ganham ",e.jsx(x,{children:"3 pontos"})," ao invés de 1."]}),en:e.jsxs(e.Fragment,{children:["This round, players who ",e.jsx("strong",{children:"match"})," the scenario in position"," ",e.jsx(j,{children:R[s]})," get ",e.jsx(x,{children:"3 points"})," ","instead of 1."]})})})}):["CURSED_FIRST_POSITION","CURSED_LAST_POSITION"].includes(s)?e.jsx(g,{type:"event",children:e.jsx(z,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Nesta rodada, jogadores que ",e.jsx("strong",{children:"errarem"})," o cenário da posição"," ",e.jsx(j,{children:R[s]})," perdem"," ",e.jsx(x,{type:"negative",children:"1 ponto"})," ao invés de 0."]}),en:e.jsxs(e.Fragment,{children:["This round, players who ",e.jsx("strong",{children:"miss"})," the scenario in position"," ",e.jsx(j,{children:R[s]})," lose"," ",e.jsx(x,{type:"negative",children:"1 point"})," instead of 0."]})})})}):null}function Ce({announcement:s,activePlayer:r,scenarios:o,onSubmitOrder:n,roundType:a}){return e.jsxs(C,{fullWidth:!0,announcement:s,children:[e.jsx(A,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Ordene os cenários de acordo com ",e.jsx(h,{player:r})]}),en:e.jsxs(e.Fragment,{children:["Order the scenarios according to ",e.jsx(h,{player:r})]})})}),e.jsx(g,{type:"rule",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Dados os cenários abaixo, tente adivinhar como o juiz ",e.jsx(h,{player:r})," ","da rodada vai ordená-los do melhor para o pior.",e.jsx("br",{}),"Você ganha ",e.jsx(x,{children:"1 ponto"})," para cada combinação!"]}),en:e.jsxs(e.Fragment,{children:["Given the scenarios below, try to guess how the judge ",e.jsx(h,{player:r})," ","will order them from best to worst.",e.jsx("br",{}),"You get ",e.jsx(x,{children:"1 point"})," for each match!"]})})}),e.jsx(_,{roundType:a}),e.jsx(J,{scenarios:o,kind:"negative",onSubmitOrder:n})]})}function ye({announcement:s,scenarios:r,roundType:o,onSubmitOrder:n}){return e.jsxs(C,{fullWidth:!0,announcement:s,children:[e.jsx(A,{children:e.jsx(i,{pt:e.jsx(e.Fragment,{children:"Você é o juiz da rodada!"}),en:e.jsx(e.Fragment,{children:"You are the round's judge!"})})}),e.jsxs(g,{type:"rule",children:[e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Dados os cenários abaixo, ordene-os do melhor para o pior.",e.jsx("br",{}),"Os outros jogadores tentaram adivinhar a ordem que você escolher e você ganha pontos se os outros jogadores acertarem suas escolhas, então seja sincero!"]}),en:e.jsxs(e.Fragment,{children:["Given the scenarios below, order them from best to worst.",e.jsx("br",{}),"The other players will try to guess the order you choose and you get points if the other players get your choices right, so be honest!"]})}),e.jsx("br",{})]}),e.jsx(_,{roundType:o}),e.jsx(J,{scenarios:r,kind:"negative",onSubmitOrder:n})]})}function De({state:s,players:r}){const{step:o,setStep:n}=G(),[a,t]=V("activePlayerId",s,r),c=Fe(n),m=s.round.current===1,d=e.jsxs($,{icon:e.jsx(me,{}),title:e.jsx(i,{pt:"Do melhor para o pior!",en:"From best to worst!"}),currentRound:s?.round?.current,type:"overlay",duration:m?12:void 0,children:[e.jsxs(H,{children:[e.jsx(be,{}),e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["O juiz da rodada é ",e.jsx(h,{player:a,addressUser:!0})]}),en:e.jsxs(e.Fragment,{children:["The judge for the round is ",e.jsx(h,{player:a,addressUser:!0})]})})]}),e.jsx(he,{players:r,order:s.turnOrder,activePlayerId:a.id})]});return e.jsx(q,{phase:s?.phase,allowedPhase:T.ORDERING,children:e.jsx(M,{step:o,players:r,children:e.jsxs(ue,{condition:t,children:[e.jsx(ye,{scenarios:s.scenarios,roundType:s.roundType,onSubmitOrder:c,announcement:d}),e.jsx(Ce,{activePlayer:a,scenarios:s.scenarios,roundType:s.roundType,onSubmitOrder:c,announcement:d})]})})})}function we({players:s,ranking:r,goToPreviousStep:o,round:n,roundType:a}){return e.jsxs(ge,{players:s,ranking:r,gainedPointsDescriptions:[e.jsx(i,{pt:"Posições corretas",en:"Correct positions"},"1"),e.jsx(i,{pt:"Penalidade em rodadas especiais",en:"Penalty in special rounds"},"2"),e.jsx(i,{pt:"Bonus por acertar todos",en:"Bonus points for getting all correct"},"3")],children:[e.jsxs(g,{type:"alert",children:[e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Acertar todos os cenários da rodada dá ",e.jsx(x,{children:"2 pontos bônus"}),"."]}),en:e.jsxs(e.Fragment,{children:["Matching all scenarios in the round gives ",e.jsx(x,{children:"2 bonus points"}),"."]})}),e.jsx("br",{})]}),e.jsx(_,{roundType:a}),e.jsx(I,{children:e.jsx(W,{onClick:o,children:e.jsx(i,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(ae,{round:n})]})}function Ue({players:s,activePlayerId:r,correctOrder:o,roundType:n}){const a=E(8,{gap:16,minWidth:100,maxWidth:200,margin:32}),t=re(s).filter(c=>c.id!==r);return e.jsx(I,{vertical:!0,children:t.map(c=>e.jsxs(N,{className:"scenarios-results",children:[e.jsx(O,{player:c}),c.currentOrder.map((m,d)=>{const u=o[d]===m,P=u?{backgroundColor:oe(c.avatarId)}:{};return e.jsx("div",{className:L("scenario",!u&&"scenario__incorrect-result"),style:{width:`${a}px`,...P},children:u?e.jsxs("span",{children:[e.jsx(fe,{avatarId:c.avatarId,alt:c.name,size:"small"})," ",e.jsx(ze,{roundType:n,position:d+1})]}):e.jsxs("span",{children:[e.jsx(ne,{title:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:c,addressUser:!0,size:"small"})," achou que esse cenário era na posição #",o.indexOf(m)+1]}),en:e.jsxs(e.Fragment,{children:[e.jsx(h,{player:c,addressUser:!0,size:"small"})," thought this scenario would go in position #",o.indexOf(m)+1]})}),children:e.jsx(j,{size:"small",children:o.indexOf(m)+1})}),e.jsx(Le,{roundType:n,position:d+1})]})},`position-${d}`)}),e.jsx(O,{player:c})]},c.id))})}function b(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{icon:e.jsx(v,{}),size:"small"}),e.jsx(S,{icon:e.jsx(v,{}),size:"small"}),e.jsx(S,{icon:e.jsx(v,{}),size:"small"})]})}function ze({roundType:s,position:r}){return s==="SECOND_POSITION"&&r===2?e.jsx(b,{}):s==="CENTER_POSITION"&&r===3?e.jsx(b,{}):s==="FOURTH_POSITION"&&r===4?e.jsx(b,{}):e.jsx(S,{icon:e.jsx(v,{}),size:"small"})}function Le({roundType:s,position:r}){return s==="CURSED_FIRST_POSITION"&&r===1?e.jsx(S,{icon:e.jsx(U,{}),size:"small"}):s==="CURSED_LAST_POSITION"&&r===5?e.jsx(S,{icon:e.jsx(U,{}),size:"small"}):null}function ke({announcement:s,activePlayer:r,players:o,goToNextStep:n,scenarios:a,roundType:t}){const c=B.useMemo(()=>a.reduce((d,u)=>(d[u.id]=u,d),{}),[a]),m=(r.currentOrder??[]).map(d=>c[d]);return e.jsxs(C,{fullWidth:!0,announcement:s,children:[e.jsx(A,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Resultado para ",e.jsx(h,{player:r})]}),en:e.jsxs(e.Fragment,{children:["Results for ",e.jsx(h,{player:r})]})})}),e.jsx(g,{type:"rule",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Essa é a ordem que o(a) juiz(a) ",r.name," escolheu os cenários, do ruim para o pior. Abaixo de cada cenário você pode ver a posição que cada jogador escolheu e se eles ganharam pontos."]}),en:e.jsxs(e.Fragment,{children:["This is the order that ",r.name," chose the scenarios, from bad to worst. Below each scenario you can see the position that each player chose and if they got any points."]})})}),t!=="NORMAL"&&e.jsx(_,{roundType:t}),e.jsx(Y,{scenarios:m,reference:y("negative"),player:r}),e.jsx(Ue,{players:o,activePlayerId:r.id,correctOrder:r.currentOrder??[],scenarioDictionary:c,roundType:t}),e.jsx(I,{children:e.jsx(Se,{duration:40,onExpire:n,onClick:n,icon:e.jsx(Ie,{}),children:e.jsx(i,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function Be({state:s,players:r}){const{step:o,goToPreviousStep:n,goToNextStep:a}=G(),[t]=V("activePlayerId",s,r),c=e.jsx($,{icon:e.jsx(je,{}),title:e.jsx(i,{pt:"Resultado",en:"Results"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(H,{children:e.jsx(i,{pt:"Quem será que acertou mais?",en:"Who got the most right?"})})});return e.jsx(q,{phase:s?.phase,allowedPhase:T.RESULTS,children:e.jsxs(M,{step:o,players:r,children:[e.jsx(ke,{scenarios:s.scenarios,players:r,activePlayer:t,announcement:c,goToNextStep:a,roundType:s.roundType}),e.jsx(we,{players:r,round:s.round,ranking:s.ranking,goToPreviousStep:n,roundType:s.roundType})]})})}function We({scenarios:s,reference:r,player:o}){const n=E(8,{gap:16,minWidth:100,maxWidth:200,margin:32});return e.jsxs(N,{className:"final-scenarios",children:[e.jsx(O,{player:o,withName:!0}),s.map((a,t)=>e.jsxs("div",{className:"scenario",style:{width:`${n}px`},children:[e.jsx(j,{children:t+1}),e.jsx("div",{className:"scenario__tagline",children:e.jsx(k,{children:r[t].text})}),e.jsx(Q,{emojiId:r[t].id,className:"scenario__emoji"}),a&&e.jsx("div",{className:"scenario__card",children:a.text})]},`${o.id}-position-${t}-${a?.id}`))]})}function Ge({state:s,players:r}){return e.jsxs(Re,{state:s,players:r,announcementIcon:e.jsx(Oe,{}),children:[e.jsx(ve,{achievements:s.achievements,players:r,reference:Ee}),e.jsx(Te,{title:e.jsx(i,{pt:"Cenários",en:"Scenarios"}),children:s.gallery?.map((o,n)=>e.jsx(N,{className:"space-contained",children:e.jsx(We,{scenarios:o.scenarios,reference:y("negative"),player:r[o.playerId]})},`gallery-entry-${o.playerId}-${n}`))})]})}function qe(s){switch(s.phase){case T.ORDERING:return De;case T.RESULTS:return Be;case le.DEFAULT.GAME_OVER:return Ge;default:return de}}function Ks(){return e.jsx(ce,{gameCollection:te.FILEIRA_DE_FATOS,getActiveComponent:qe})}export{Ks as default};
