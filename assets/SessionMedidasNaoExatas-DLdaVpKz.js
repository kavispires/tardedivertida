import{h as O,j as e,T as o,d0 as fe,F as _,bJ as T,bK as ne,r as M,o as C,aP as S,cp as W,b8 as ye,B as D,ch as Z,q as P,c0 as Se,aM as be,aQ as Ie,b5 as Me,I as ee,b0 as Te}from"./index-WMshXzDH.js";import{u as q,S as G,n as we,c as F,a as N,P as H,d as L,e as V,k as ie,b as _e,g as Ee,h as Ae,i as Ne}from"./StepSwitcher-D0d7yJs9.js";import{u as $}from"./useWhichPlayerIsThe-C6nc9PU8.js";import{B as Ce}from"./BarChartIcon-BXvSZRnN.js";import{A as E}from"./AvatarName-YIWl8Idp.js";import{I as Q}from"./useDevFeatures-Ga86Ui_a.js";import{R as Pe}from"./RoundAnnouncement-Bv_qq08M.js";import{V as Re}from"./ViewOr-Bx1kDirb.js";import{T as ke}from"./TurnOrder-DWO6qP3E.js";import{C as f}from"./Card-X1LsKO1M.js";import{R as I}from"./RuleInstruction-DVhhj4gY.js";import{R as Be}from"./UndoOutlined-DohBVd0s.js";import{u as Oe}from"./useMakeMeReady-Cc773OVF.js";import{G as oe}from"./GuessIcon-Cg1ulwsJ.js";import{P as j}from"./PointsHighlight-BeAs0kiK.js";import{T as se}from"./TimeHighlight-DcScOQwg.js";import{L as Ge}from"./ListIcon-dqpsjaBP.js";import{M as ce}from"./MetricHighlight-DNfqEKvj.js";import{u as le}from"./DebugOnly-BDrghVkg.js";import{u as Fe}from"./useMock-CSOr-zez.js";import{T as ze}from"./TextHighlight-C1kviUbm.js";import{T as Ue}from"./TimerBar-Czm_I0b7.js";import{A as de}from"./Avatar-DMMtzMIg.js";import{Q as We}from"./QualitySealIcon-Bon13xmN.js";import{T as De}from"./speech-Z9qZb3me.js";import{B as qe}from"./BoxXIcon-BUStaLkz.js";import{X as He}from"./XIcon-CIgSF2VV.js";import{D as Le}from"./index-DHW4cq95.js";import{R as Ve}from"./TrophyOutlined-Clg2fI8J.js";import{S as $e}from"./StepRankingWrapper-CMuMlZEw.js";import{T as Qe}from"./TrophyIcon-CtlHlSVE.js";import"./GameBanner-CkMUVzfw.js";import{G as Xe}from"./GameOverWrapper-CE3L5NXn.js";import{A as Ke}from"./Achievements-7WtsNGjk.js";import{T as Je}from"./TitledContainer-BCsbDPb0.js";import{a as Ye}from"./achievements-XpQD-ErL.js";import"./RulesModal-DlHL4Oxu.js";import"./WritingIcon-Mlpc_9l9.js";import"./index-WdwqLmy9.js";import"./PurePanel-8QTs7lf_.js";import"./Game-DcPz_XSE.js";import"./useMutation-C9wOznj-.js";import"./index-BiMbuCNF.js";import"./index-ByEvImLW.js";import"./Overflow-yjFSUKjd.js";import"./index-BCCHMhqf.js";import"./index-Cd-HKmJt.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CHMWxj2T.js";import"./Loading-DHZizrId.js";import"./useBubbleLock-D6EsmjuU.js";import"./AnimatedLoaderIcon-CSUXU_Cj.js";import"./InfoCircleOutlined-aA6dmopU.js";import"./SignIn-C3GttdW8.js";import"./GoogleIcon-Ce2wbKjX.js";import"./WaitingRoomIcon-CmndRxCp.js";import"./AnimatedClockIcon-C4m23DJL.js";import"./LikeFilled-CPDUtDQl.js";import"./StarFilled-JOFM_wNz.js";import"./StarIcon-B--cxBj0.js";import"./ClockIcon-Bub4plpa.js";import"./progress-Bl42zBfr.js";import"./RankingBoard-CF663ieC.js";import"./CaretUpOutlined-EB6FGP8h.js";import"./TheEndIcon-Dme5h9Ah.js";import"./ArrowRightOutlined-awV0UPcN.js";import"./Medal-BrYFaeY-.js";const w={METRICS_BUILDING:"METRICS_BUILDING",GUESSING:"GUESSING",RESULTS:"RESULTS"},X={SUBMIT_POOL:"SUBMIT_POOL",SUBMIT_METRICS:"SUBMIT_METRICS",SUBMIT_GUESS:"SUBMIT_GUESS"},k=120;function Ze(){const{translate:r}=O(),s=q({actionName:"submit-pool",successMessage:r("Palavras submetidas com sucesso","Words submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application found an error while trying to submit your words")});return a=>{s({action:X.SUBMIT_POOL,...a})}}function es(r){const{translate:s}=O(),a=q({actionName:"submit-metrics",onSuccess:()=>r(2),onError:()=>r(0),successMessage:s("Métricas submetidas com sucesso","Metrics submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar suas métricas","Oops, the application found an error while trying to submit your metrics")});return t=>{a({action:X.SUBMIT_METRICS,...t})}}function ss(){const{translate:r}=O(),s=q({actionName:"submit-guess",successMessage:r("Palpite adivinhada com sucesso","Guess submitted successfully"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao enviar seu palpite","Oops, the application found an error while trying to submit your guess")});return a=>{s({action:X.SUBMIT_GUESS,...a})}}function rs({players:r,presenter:s,turnOrder:a,poolIds:t,wordsDict:n,announcement:i}){return e.jsxs(G,{fullWidth:!0,announcement:i,children:[e.jsx(we,{players:r,title:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto ",e.jsx(E,{player:s})," cria as métricas."]}),en:e.jsxs(e.Fragment,{children:["Wait while ",e.jsx(E,{player:s})," creates the metrics."]})}),instruction:t?e.jsx(ts,{poolIds:t,wordsDict:n}):e.jsx("div",{children:"..."})}),e.jsx(ke,{players:r,order:a,activePlayerId:s.id})]})}function ts({poolIds:r,wordsDict:s}){return e.jsxs(fe,{children:[e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Palavras disponíveis para a rodada:"}),en:e.jsx(e.Fragment,{children:"Available words for the round:"})}),e.jsx(_,{wrap:!0,children:r?.map((a,t)=>{const n=s[a];return e.jsx(T.div,{className:"pool-card",...ne("fadeIn",{delay:t*.1}),children:n.text},a)})})]})}function g({position:r,value:s}){return e.jsx(T.div,{className:"metrics-board__evaluation-pip",layoutId:"item",transition:{ease:"easeInOut",duration:.3},animate:{left:s>r?`${r*1.5}rem`:"auto",right:s<=r?`${(6-r-1)*1.5}rem`:"auto"}})}function as({metricsDescriptors:r,evaluations:s,onChange:a,disabled:t}){return e.jsx("div",{className:"metrics-board",children:Object.keys(r).map(n=>{const i=r[n],c=s?.[n]??3;return e.jsx(ns,{descriptors:i,initialEvaluation:c,onChange:u=>a?.(n,u),disabled:t},n)})})}function ns({descriptors:r,initialEvaluation:s=3,onChange:a,disabled:t}){const[n,i]=M.useState(s),c=()=>{const p=Math.min(n+1,6);i(p),a?.(p)},u=()=>{const p=Math.max(n-1,0);i(p),a?.(p)};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(C,{onClick:c,className:"metrics-board__card metrics-board__card--left",disabled:t,children:r[0].text}),e.jsxs("div",{className:"metrics-board__evaluation",children:[e.jsx(g,{position:0,value:n}),e.jsx(g,{position:1,value:n}),e.jsx(g,{position:2,value:n}),e.jsx(g,{position:3,value:n}),e.jsx(g,{position:4,value:n}),e.jsx(g,{position:5,value:n})]}),e.jsx(C,{onClick:u,className:"metrics-board__card metrics-board__card--right",disabled:t,children:r[1].text})]})}const B=4;function is({wordsDict:r,secretCardsOptionsIds:s,availablePoolCardsIds:a,metricsDescriptors:t,secretWordId:n,poolIds:i=[],onSubmitMetrics:c,onSubmitPool:u,announcement:p}){const{dualTranslate:h}=O(),{step:b,goToNextStep:z,setStep:U}=F(n?3:1),[d,A]=M.useState(n||null),[y,v]=M.useState([]),[R,me]=M.useState({1:3,2:3,3:3,4:3,5:3}),pe=m=>{v(l=>{const x=[...l];return x.includes(m)?x.filter(ve=>ve!==m):l.length===B?l:[...x,m]})},he=()=>{const m=a.filter(l=>!y.includes(l));v(l=>[...l,...P.sampleSize(m,B-l.length).map(x=>x)])},xe=()=>{d&&u({poolIds:P.shuffle([...y,d]),secretWordId:d||""})},J=r[d||""],Y=s.findIndex(m=>m===n),je=()=>{c({metrics:R})};M.useEffect(()=>{b<3&&n&&U(3)},[n]);const ge=(m,l)=>{me(x=>({...x,[m]:l}))};return e.jsxs(G,{fullWidth:!0,announcement:p,children:[b===1&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Qual será a palavra secreta?",en:"Which will be the secret word?"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:"First, from these two words, select the one you want to create the metrics for.",pt:"Primeiro, dentre estas duas palavras, selecione a que você quer usar para suas métricas."})}),e.jsx(S,{children:s.map((m,l)=>{const x=r[m];return e.jsx(C,{onClick:()=>A(x.id),active:d===x.id,children:e.jsx(f,{header:ye[l],color:W(l+2),children:x.text})},x.id)})}),e.jsx(S,{children:e.jsx(D,{size:"large",type:"primary",onClick:z,disabled:!d,children:e.jsx(o,{pt:"Continuar",en:"Continue"})})})]}),b===2&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Quais outras palavras estão misturadas para os outros jogadores?",en:"Which other words will be mixed for the other players?"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Now that you have the keyword, from these other words select ",e.jsx("strong",{children:"4 words"})," to be part of the pool. Choose words that won't conflict with your keyword."]}),pt:e.jsxs(e.Fragment,{children:["Agora que você tem a palavra-chave, selecione ",e.jsx("strong",{children:"4 palavras"})," para fazer parte do pool. Escolha palavras que não entrem em conflito com sua palavra-chave."]})})}),e.jsx(f,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:W(Y+2),children:J.text}),e.jsx(S,{wrap:!0,children:a.map(m=>{const l=r[m];return e.jsx(C,{onClick:()=>pe(l.id),active:y.includes(l.id),children:e.jsx(f,{hideHeader:!0,children:l.text})},l.id)})}),e.jsxs(S,{children:[e.jsx(D,{size:"large",onClick:he,disabled:y.length>=B,icon:e.jsx(Be,{}),children:e.jsx(o,{pt:"Aleatório",en:"Random"})}),e.jsx(Z,{size:"large",onClick:xe,disabled:!d||y.length!==B,children:e.jsx(o,{pt:"Enviar",en:"Submit"})})]})]}),b===3&&e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(o,{pt:"Crie suas métricas",en:"Create the metrics"})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Finally, evaluate each of the 5 metrics by distributing the 6 pips between the 2 descriptors that best describes your keyword so the players can try to guess it.",e.jsx("br",{}),"Just click on the descriptor to move the pips."]}),pt:e.jsxs(e.Fragment,{children:["Por fim, avalie cada uma das 5 métricas distribuindo as 6 bolinhas entre os 2 descritores que melhor descrevem sua palavra-chave para que os jogadores possam tentar adivinhá-la.",e.jsx("br",{}),"Basta clicar no descritor para mover as bolinhas."]})})}),e.jsx(f,{header:h({en:"Keyword",pt:"Palavra-chave"}),color:W(Y+3),children:J.text}),e.jsx(as,{metricsDescriptors:t,evaluations:R,onChange:ge}),e.jsx(S,{className:"mt-6",children:e.jsx(Z,{size:"large",onClick:je,children:e.jsx(o,{pt:"Enviar Métricas",en:"Submit Metrics"})})}),e.jsxs(I,{type:"tip",children:[e.jsx(o,{en:e.jsx(e.Fragment,{children:"Here are the other words in case you need to verify any conflicts"}),pt:e.jsx(e.Fragment,{children:"Aqui estão as outras palavras caso você precise verificar algum conflito"})}),e.jsx(_,{justify:"center",children:i.map(m=>{const l=r[m];return e.jsx(f,{hideHeader:!0,size:"small",children:l.text},l.id)})})]})]})]})}function os({players:r,state:s}){const{step:a,setStep:t,goToNextStep:n}=F(),[i,c]=$("presenterId",s,r),u=es(t),p=Ze(),h=e.jsx(H,{icon:e.jsx(Ce,{}),title:e.jsx(o,{en:"Metrics Building",pt:"Construção de Métricas"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(Q,{children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["O apresentador ",e.jsx(E,{player:i})," vai construir as métricas para essa rodada."]}),en:e.jsxs(e.Fragment,{children:["The presenter ",e.jsx(E,{player:i})," will build the metrics for this round."]})})})});return e.jsx(L,{phase:s?.phase,allowedPhase:w.METRICS_BUILDING,children:e.jsxs(V,{step:a,players:r,children:[e.jsx(Pe,{round:s.round,time:3,onPressButton:n}),e.jsxs(Re,{condition:c,children:[e.jsx(is,{announcement:h,wordsDict:s.wordsDict,secretCardsOptionsIds:s.secretCardsOptionsIds,availablePoolCardsIds:s.availablePoolCardsIds,metricsDescriptors:s.metricsDescriptors,poolIds:s.poolIds,secretWordId:s.secretWordId,onSubmitMetrics:u,onSubmitPool:p}),e.jsx(rs,{announcement:h,players:r,presenter:i,turnOrder:s.turnOrder,wordsDict:s.wordsDict,poolIds:s.poolIds})]})]})})}function re({children:r}){return e.jsx(ce,{icon:e.jsx(Ge,{}),children:r})}function te({children:r}){return e.jsx(ce,{icon:e.jsx(oe,{}),children:r})}function cs(){return e.jsx(o,{en:e.jsxs(e.Fragment,{children:["Among the ",e.jsx(re,{children:"5 words"}),", you must guess the"," ",e.jsx(te,{children:"secret word"}),". Every"," ",e.jsx(se,{children:"10 seconds"})," one of the 5 metrics shows up to help you! You can make a guess at any moment. The earlier you make the guess,"," ",e.jsx(j,{type:"positive",children:"more points"})," you get. If you decide to change your guess, you can do it once, but that will be your new score and"," ",e.jsx(j,{type:"negative",children:"- 1 point"}),"."]}),pt:e.jsxs(e.Fragment,{children:["Entre as ",e.jsx(re,{children:"5 palavras"}),", você deve adivinhar a"," ",e.jsx(te,{children:"palavra secreta"}),". A cada"," ",e.jsx(se,{children:"10 segundos"})," uma das 5 métricas aparece para ajudar. Você pode fazer um palpite a qualquer momento. Quanto mais cedo você fizer o palpite,"," ",e.jsx(j,{type:"positive",children:"mais pontos"})," você ganha. Se decidir mudar seu palpite, você pode fazê-lo uma vez, mas isso resultará em uma nova pontuação e"," ",e.jsx(j,{type:"negative",children:"- 1 ponto"}),"."]})})}function K({metricsDescriptors:r,evaluations:s,level:a}){return e.jsx("div",{className:"metrics-board",children:Object.keys(r).map((t,n)=>{const i=r[t],c=s?.[t]??3;return e.jsx(ls,{descriptors:i,evaluation:c,visible:a>n},t)})})}function ls({descriptors:r,evaluation:s,visible:a}){const t={initial:{opacity:0},transition:{delay:1,duration:2},animate:{opacity:a?1:0}};return e.jsxs("div",{className:"metrics-board__metric",children:[e.jsx(T.div,{...t,className:"metrics-board__card metrics-board__card--left",children:r[0].text}),e.jsxs(T.div,{className:"metrics-board__evaluation",...t,children:[e.jsx(g,{position:0,value:s}),e.jsx(g,{position:1,value:s}),e.jsx(g,{position:2,value:s}),e.jsx(g,{position:3,value:s}),e.jsx(g,{position:4,value:s}),e.jsx(g,{position:5,value:s})]}),e.jsx(T.div,{...t,className:"metrics-board__card metrics-board__card--right",children:r[1].text})]})}function ue({children:r,...s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...s,children:[e.jsx("path",{fill:"#ffd06a",d:"M473.2 481.1H38.8a31.3 31.3 0 01-31.3-31.3V45.2A37.7 37.7 0 0145.2 7.5h421.6a37.7 37.7 0 0137.7 37.7v404.6a31.3 31.3 0 01-31.3 31.3z"}),e.jsx("path",{fill:"#ffd06a",d:"M504.5 45.2v404.6a31.3 31.3 0 01-31.3 31.3H452a31.3 31.3 0 0031.3-31.3V45.2a37.7 37.7 0 00-37.7-37.7h21.1a37.8 37.8 0 0137.8 37.7z"}),e.jsx("path",{fill:"#ffd06a",d:"M434.7 436.5H77.3a25.6 25.6 0 01-25.6-25.6V82.8A30.8 30.8 0 0182.5 52h347.1a30.8 30.8 0 0130.8 30.8v328.1a25.7 25.7 0 01-25.7 25.6z"}),e.jsx("path",{fill:"#ffd06a",d:"M429.5 52.1h-27.4a30.8 30.8 0 0130.8 30.8V411a25.6 25.6 0 01-25.6 25.6h27.4a25.6 25.6 0 0025.6-25.6V82.8a30.7 30.7 0 00-30.8-30.7z"}),e.jsx("path",{d:"M512 45.2A45.5 45.5 0 00466.8 0H45.2A45.4 45.4 0 000 45.2v404.6c0 20.5 17 38.8 38.8 38.8h357.4a7.5 7.5 0 000-15H38.8a24.4 24.4 0 01-11.4-2.9l33.1-31.3a33 33 0 0016.8 4.6h357.4a33 33 0 0016.8-4.6l33.1 31.3a23.2 23.2 0 01-11.4 2.9h-42a7.5 7.5 0 100 15h42a39 39 0 0038.8-38.8zM466.8 15a29.9 29.9 0 0116 4.6l-32.8 31a37.8 37.8 0 00-20.5-6h-347a37.6 37.6 0 00-20.5 6l-32.8-31a29.9 29.9 0 0116-4.6zM15 449.8V45.2a30.6 30.6 0 013.8-14.7L51.1 61a38.5 38.5 0 00-6.9 21.9V411a32.9 32.9 0 005.4 18.1l-32.4 30.7a24.5 24.5 0 01-2.2-10zM77.3 429a18.1 18.1 0 01-18.1-18.1V82.8a23.3 23.3 0 0123.3-23.3h347.1a23.3 23.3 0 0123.3 23.3v22.5a7.5 7.5 0 0015 0V82.8a38.5 38.5 0 00-6.9-21.9l32.3-30.5a30.6 30.6 0 013.8 14.7v404.6a23.5 23.5 0 01-2.2 9.9l-32.4-30.7a32.9 32.9 0 005.4-18.1V141.6a7.5 7.5 0 00-15 0V411a18.1 18.1 0 01-18.1 18.1z"}),e.jsx("foreignObject",{x:"72.192",y:"74.472",width:"367.904",height:"341.859",children:r})]})}function ds({players:r,pointsBrackets:s}){const a=us(r,s.length);return e.jsx("div",{className:"m-guessing-board__points-brackets",children:s.map((t,n)=>e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(ue,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:t})}),e.jsx("div",{className:"m-guessing-board__points-bracket-value",children:a?.[n]?.map(i=>e.jsx("span",{children:e.jsx(de,{id:r[i.playerId??""].avatarId},i.playerId)},i?.playerId))})]},`${t}-${n}`))})}const us=(r,s)=>{const a={};Object.values(r).forEach(i=>{const c=Se(i.guesses??[]);c.forEach((u,p)=>{const h=Math.floor(u.timestamp/3)*3;a[h]||(a[h]=[]),a[h].push({cardId:u.cardId,level:u.level,timestamp:h,playerId:i.id,used:p<c.length-1,retry:c.length>1})})});const t=P.orderBy(Object.keys(a),i=>Number(i)).map(i=>P.orderBy(a[Number(i)],["playerId"])),n=t.slice(0,s);return t.length>s&&n.push(...t.slice(s)),n};function ms({players:r,user:s,round:a,isThePresenter:t,wordsDict:n,poolIds:i,secretWordId:c,metricsDescriptors:u,metrics:p,pointsBrackets:h,onSubmitGuess:b,onMakeMeReady:z}){const{isLoading:U}=be(),d=s.guesses||[],{timeLeft:A}=le({duration:k,onExpire:()=>{if(!(s.ready||t||d.length>=2)){if(!d.length){const v=P.sample(i)||i[0];b({guesses:[...d,{cardId:v,level:5,timestamp:k}]})}z()}}}),y=ps(A);return Fe(),e.jsxs(G,{fullWidth:!0,children:[e.jsx(N,{size:"small",children:e.jsx(o,{pt:"Qual a palavra secreta?",en:"Which will be the secret word?"})}),t?e.jsxs(I,{type:"action",children:[e.jsx(o,{en:"Wait while the players guess the secret word:",pt:"Aguarde enquanto os jogadores adivinham a palavra secreta:"})," ",e.jsx(ze,{children:n[c]?.text||"..."})]}):e.jsxs(I,{type:"action",children:[d.length===0&&e.jsx(o,{en:"Select the secret word.",pt:"Selecione a palavra secreta."}),d.length===1&&e.jsx(o,{en:e.jsxs(e.Fragment,{children:["If you change your mind, you can choose a different word, but you will lower your points and receive a ",e.jsx(j,{type:"negative",children:"1 point"})," penalty."]}),pt:e.jsxs(e.Fragment,{children:["Se você mudar de ideia, pode escolher uma palavra diferente, mas perderá pontos e receberá uma penalidade de ",e.jsx(j,{type:"negative",children:"1 ponto"}),"."]})}),d.length===2&&e.jsx(o,{en:"Wait while the other players make their guesses.",pt:"Aguarde enquanto os jogadores fazem seus palpites."})]}),e.jsx(_,{wrap:"wrap",gap:8,className:"mb-4",justify:"center",children:i.map(v=>e.jsx(C,{onClick:()=>b({guesses:[...d,{cardId:v,level:y,timestamp:Math.max(k-A,0)}]}),disabled:U||s.ready||t||d.length===2,active:d.some(R=>R.cardId===v),children:e.jsx(f,{hideHeader:!0,children:n[v].text},v)},v))}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:u,evaluations:p,level:y}),e.jsx(ds,{players:r,pointsBrackets:h})]}),e.jsx(Ue,{value:A,total:k,status:"normal"}),e.jsx(hs,{players:r,round:a})]})}const ps=r=>({12:1,11:2,10:3,9:4,8:5})[Math.ceil(r/10)]||5;function hs({players:r,round:s}){return Object.values(r).every(t=>t.ready||t.guesses?.length>0)?e.jsx(ie,{round:s}):null}function xs({players:r,state:s}){const a=_e(r,s),{step:t,goToNextStep:n}=F(),[,i]=$("presenterId",s,r),c=ss(),u=Oe({});return e.jsx(L,{phase:s?.phase,allowedPhase:w.GUESSING,children:e.jsxs(V,{step:t,players:r,children:[e.jsx(H,{icon:e.jsx(oe,{}),title:e.jsx(o,{pt:"Adivinhação",en:"Guessing"}),onClose:n,currentRound:s?.round?.current,unskippable:!0,duration:[30,15,10][s.round.current-1]??10,type:"block",children:e.jsx(Q,{children:e.jsx(cs,{})})}),e.jsx(ms,{players:r,round:s.round,isThePresenter:i,turnOrder:s.turnOrder,user:a,wordsDict:s.wordsDict,poolIds:s.poolIds,secretWordId:s.secretWordId,metricsDescriptors:s.metricsDescriptors,metrics:s.metrics,pointsBrackets:s.pointsBrackets,onSubmitGuess:c,onMakeMeReady:u})]})})}function ae({player:r,tooltipProps:s,...a}){return e.jsx(Ie,{title:r.name,...s,children:e.jsx(de,{id:r.avatarId,...a})})}function js({brackets:r,players:s,cards:a}){return e.jsx("div",{className:"m-guessing-board__points-brackets",children:r.map((t,n)=>e.jsxs("div",{className:"m-guessing-board__points-bracket",children:[e.jsx(ue,{width:"48px",children:e.jsx("span",{className:"m-guessing-board__points-bracket-label",children:t.score})}),e.jsxs("div",{className:"m-guessing-board__points-bracket-value",children:[e.jsxs(Me.Group,{children:[t.playersIds.map((i,c)=>e.jsx(T.div,{...ne("tada",{repeat:10,delay:2+n*c*.25}),children:e.jsx(ae,{player:s[i]})},i)),t.playersIds.length===0&&e.jsx(ee,{icon:e.jsx(qe,{})})]}),e.jsx(Le,{type:"vertical"}),e.jsx(_,{vertical:!0,children:t.wrongGuesses.map(i=>e.jsxs(_,{align:"center",children:[e.jsx(ee,{icon:e.jsx(He,{}),size:16})," ",e.jsx(ae,{player:s[i.playerId]}),e.jsx(f,{hideHeader:!0,size:"small",children:a[i.cardId]?.text||"???"})]},i.playerId))})]})]},`${t.score}-${n}`))})}function gs({players:r,presenter:s,result:a,goToNextStep:t,announcement:n}){const[i,c]=M.useState(!1);return le({duration:4,onExpire:()=>c(!0)}),e.jsxs(G,{fullWidth:!0,announcement:n,children:[e.jsx(N,{size:"small",children:e.jsx(o,{pt:e.jsxs(e.Fragment,{children:["Resultados para apresentador(a) ",e.jsx(E,{player:s})]}),en:e.jsxs(e.Fragment,{children:["Results for presenter ",e.jsx(E,{player:s})]})})}),e.jsx(I,{type:"action",children:e.jsx(o,{en:e.jsxs(e.Fragment,{children:["The guessers get ",e.jsx(j,{children:"points"})," based on the bracket their last guess falls into, if correct.",e.jsx("br",{}),"They also lose ",e.jsx(j,{type:"negative",children:"1 point"})," if they made more than one guess.",e.jsx("br",{}),"The presenter gets ",e.jsx(j,{type:"positive",children:"2 points"})," for each who guessed correctly."]}),pt:e.jsxs(e.Fragment,{children:["Os adivinhadores ganham ",e.jsx(j,{children:"pontos"})," baseados no quadrado em que a última adivinhação está, se o palpite estiver correto.",e.jsx("br",{}),"Mas eles também perdem ",e.jsx(j,{type:"negative",children:"1 ponto"})," se fizeram mais de um palpite.",e.jsx("br",{}),"O apresentador ganha ",e.jsx(j,{type:"positive",children:"2 pontos"})," por cada adivinhador que acertou."]})})}),e.jsx(S,{children:e.jsx(f,{hideHeader:!0,size:"large",children:a.cards[a.secretWordId].text})}),e.jsxs("div",{className:"m-guessing-board",children:[e.jsx(K,{metricsDescriptors:a.metricsDescriptors,evaluations:a.metrics,level:i?5:0}),e.jsx(js,{brackets:a.brackets,players:r,cards:a.cards})]}),e.jsx(S,{className:"mt-8",children:e.jsx(De,{duration:45,onExpire:t,onClick:t,icon:e.jsx(Ve,{}),children:e.jsx(o,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function vs({players:r,ranking:s,goToPreviousStep:a,round:t}){return e.jsxs($e,{players:r,ranking:s,gainedPointsDescriptions:[e.jsx(o,{pt:"Acertou a palavra secreta",en:"Guessed the secret word"},"1"),e.jsx(o,{pt:"Adivinhou na segunda tentativa",en:"Guessed in the second try"},"2"),e.jsx(o,{pt:"Pontos para o apresentador(a)",en:"Points for the presenter"},"3")],children:[e.jsx(S,{children:e.jsx(D,{onClick:a,children:e.jsx(o,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(ie,{round:t})]})}function fs({players:r,state:s}){const{step:a,goToNextStep:t,goToPreviousStep:n}=F(),[i]=$("presenterId",s,r),c=e.jsx(H,{icon:e.jsx(We,{}),title:e.jsx(o,{pt:"Resultado",en:"Results"}),currentRound:s?.round?.current,type:"overlay",duration:4,children:e.jsx(Q,{children:e.jsx(o,{pt:e.jsx(e.Fragment,{children:"Quantos pontos você ganhou?"}),en:e.jsx(e.Fragment,{children:"How many points did you get?"})})})});return e.jsx(L,{phase:s?.phase,allowedPhase:w.RESULTS,children:e.jsxs(V,{step:a,players:r,children:[e.jsx(gs,{players:r,announcement:c,goToNextStep:t,presenter:i,result:s.result}),e.jsx(vs,{players:r,round:s.round,ranking:s.ranking,goToPreviousStep:n})]})})}function ys({state:r,players:s}){const a=r.gallery??[];return e.jsxs(Xe,{state:r,players:s,announcementIcon:e.jsx(Qe,{}),children:[e.jsx(Ke,{players:s,achievements:r.achievements,reference:Ye}),e.jsx(Je,{title:e.jsx(o,{pt:"Métricas",en:"Metrics"}),className:"mt-4",children:a.map(t=>e.jsxs(_,{vertical:!0,align:"center",justify:"center",children:[e.jsx(f,{hideHeader:!0,children:t.cards[t.secretWordId]?.text||"???"}),e.jsx(K,{metricsDescriptors:t.metricsDescriptors,evaluations:t.metrics,level:5})]},t.secretWordId))})]})}function Ss(r){switch(r.phase){case w.METRICS_BUILDING:return os;case w.GUESSING:return xs;case w.RESULTS:return fs;case Ne.DEFAULT.GAME_OVER:return ys;default:return Ae}}function Br(){return e.jsx(Ee,{gameCollection:Te.MEDIDAS_NAO_EXATAS,getActiveComponent:Ss})}export{Br as default};
