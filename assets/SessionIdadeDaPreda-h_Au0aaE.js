import{r as C,$ as ne,f as I,v as A,q as ve,br as ye,j as e,s as M,h as Ie,bn as be,c as B,F as h,D as H,av as de,Q as te,B as O,cO as Se,T as c,O as me,au as k,bZ as J,bW as Ne,cP as we,I as Pe,b_ as Te,aF as _e}from"./index-CbGoiZfB.js";import{u as ae,S as F,a as U,P as V,f as Ee,c as Ae,d as Oe,e as ke}from"./Session-CY3GVpsO.js";import{C as Re}from"./CreateIcon-C_Ba9Hsk.js";import{S as W,a as q,P as L,u as Me}from"./StepSwitcher-C8aMngMm.js";import{I as X}from"./useDevFeatures-CAMIDynj.js";import{T as G}from"./TextHighlight-D3_36PF6.js";import{R as Be}from"./RoundAnnouncement-ebwIOI_i.js";import{u as Ge}from"./useMakeMeReady-BjsHxIhA.js";import{u as K}from"./useMock-CB5bwRVX.js";import{I as b}from"./ItemCard-DlH2PrwK.js";import{R as D}from"./RuleInstruction-Cr2iOyfg.js";import{u as ue}from"./useCache-BHR04_3G.js";import{S as re}from"./SpeakButton-CG2kj8-q.js";import{P as pe}from"./PlayerAvatar-BcFNbu0L.js";import{D as he}from"./DivButton-B5nNKg5q.js";import{P as De}from"./Popconfirm-C5vdRYxz.js";import{C as oe}from"./index-CjYZIgll.js";import{R as ze}from"./DeleteOutlined-D3PkdKFq.js";import{C as Fe}from"./Collapse-8Xlss6n_.js";import{R as Ue}from"./index-ClAMfTcB.js";import{P as Ve,E as We}from"./WritingIcon-jK5NZ0Zb.js";import{P as qe}from"./PencilIcon-B0dwQHLk.js";import{D as z}from"./index-Df7pQ4AC.js";import{u as Le}from"./useVotingMatch-BOX07DCq.js";import{D as $e}from"./DevButton-WNjlwkHA.js";import{S as He}from"./SpeechBubble-AiRIdwwX.js";import{u as Ye}from"./SlideShowControls-DbuaCPDL.js";import{B as Je}from"./BooksIcon-CZWejqnw.js";import{P as $}from"./PointsHighlight-DrTLBaxY.js";import{P as Ke}from"./PopoverRule-CqBDTCul.js";import{S as Qe}from"./SlideShow-C6dW-4Ep.js";import{S as Y,a as Xe,b as Ze,c as es}from"./SlideShowComposableComponents-BgoWqMlQ.js";import{S as ss}from"./StarIcon-DP8bxPb0.js";import{P as ns}from"./PlayerAvatarEntry-C8XXgxc5.js";import{S as ts}from"./StepRankingWrapper-C9g6eWmm.js";import{T as as}from"./TrophyIcon-D6FZHhFO.js";import"./RulesModal-PIOda2Jl.js";import{G as rs}from"./GameOverWrapper-BxwdOZ0r.js";import{T as os}from"./TitledContainer-Bt-tk2Wj.js";import"./Game-CJDnJ7LE.js";import"./useMutation-BmaT6Xmg.js";import"./speech-CdGcI_h2.js";import"./index-CINeqvPa.js";import"./index-DPAfb4YI.js";import"./extends-CF3RwP-h.js";import"./PurePanel-xgRxR7Hy.js";import"./useToggle-BoUH-ENd.js";import"./useId-BlPyYs1U.js";import"./DebugOnly-s4HkahC7.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-ysfUdT6C.js";import"./index-DYJZAYgh.js";import"./SignIn-BbuUP9nY.js";import"./GoogleIcon-Ca9sR6L1.js";import"./AnimatedGearIcon-X0C7-3q3.js";import"./AnimatedClockIcon-sRGAo1iU.js";import"./TimedButton-B6Nxrwia.js";import"./Loading-DBkNqalq.js";import"./AnimatedLoaderIcon-BInZLDvr.js";import"./WaitingRoomIcon-Jz0HLUS-.js";import"./LikeFilled-C4vgWJ1f.js";import"./Sprite-Din4gc7X.js";import"./WarningOutlined-BMqH1ayC.js";import"./StarFilled-DadvwlMC.js";import"./AudioIcon-CcA2ioFk.js";import"./index-BKLQf-2B.js";import"./EllipsisOutlined-Da-1Chae.js";import"./StepBackwardOutlined-D8U7Wczl.js";import"./TrophyOutlined-IAGwEKUo.js";import"./MetricHighlight-fTegN81M.js";import"./GarbageIcon--B-hc6FF.js";import"./RankingBoard-vOOdWT41.js";import"./CaretUpOutlined-CgWGJZrJ.js";import"./TheEndIcon-DEw3omC0.js";import"./index-CynnDX5f.js";import"./progress-BSW0klYq.js";var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function Z(){return Z=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},Z.apply(this,arguments)}const cs=(s,n)=>C.createElement(ne,Z({},s,{ref:n,icon:is})),ls=C.forwardRef(cs);var ds={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function ee(){return ee=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},ee.apply(this,arguments)}const ms=(s,n)=>C.createElement(ne,ee({},s,{ref:n,icon:ds})),us=C.forwardRef(ms);var ps={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function se(){return se=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},se.apply(this,arguments)}const hs=(s,n)=>C.createElement(ne,se({},s,{ref:n,icon:ps})),xs=C.forwardRef(hs),S={CREATING_CONCEPTS:"CREATING_CONCEPTS",CONCEPTS_REVEAL:"CONCEPTS_REVEAL",COMMUNICATING_THINGS:"COMMUNICATING_THINGS",GUESSING:"GUESSING",RESULTS:"RESULTS"},ie={SUBMIT_CONCEPTS:"SUBMIT_CONCEPTS",SUBMIT_NAME:"SUBMIT_NAME",SUBMIT_GUESSES:"SUBMIT_GUESSES"},js=7,xe={yes:{en:"yes",pt:"sim"},no:{en:"no/not",pt:"não"},maybe:{en:"maybe/sort of",pt:"talvez/meio"},very:{en:"very",pt:"muito"},question:{en:"question",pt:"dúvida/pergunta"}};function gs(s){const{translate:n}=I(),t=ae({actionName:"submit-concept",onSuccess:()=>s(2),onError:()=>s(0),successMessage:n("Conceito submetido com sucesso","Concept submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu conceito","Oops, the application found an error while trying to submit your concept")});return a=>{t({action:ie.SUBMIT_CONCEPTS,...a})}}function fs(s){const{translate:n}=I();return Ge({onSuccess:()=>s(2),successMessage:n("Pronto! Aguarde os outros jogadores estarem prontos","Done! Now wait for the other players"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar confirmar sua porta","Oops, the application failed to confirm your door")})}function Cs(s){const{translate:n}=I(),t=ae({actionName:"submit-name",onSuccess:()=>s(2),onError:()=>s(0),successMessage:n("Nome submetido com sucesso","Name submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu nome","Oops, the application found an error while trying to submit your name")});return a=>{t({action:ie.SUBMIT_NAME,...a})}}function vs(s){const{translate:n}=I(),t=ae({actionName:"submit-guesses",onSuccess:()=>s(2),onError:()=>s(0),successMessage:n("Palpite submetido com sucesso","Guess submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu palpite","Oops, the application found an error while trying to submit your guess")});return a=>{t({action:ie.SUBMIT_GUESSES,...a})}}const ys=(s,n,t)=>{const a={};return t.forEach(o=>{if(o.playerId===s.id)return;const r=[o.itemId,o.itemId,...A.sampleSize(n,3).map(i=>i.id)];a[o.playerId]=A.sample(r)||o.itemId}),{guesses:a}};function _(){return ve(12,{minWidth:48,maxWidth:72,margin:12})}function Is({items:s,selectedItems:n=[],onSelectItem:t,currentAge:a}){const{dualTranslate:o,language:r}=I(),i=C.useMemo(()=>A.orderBy(Object.values(s),[d=>ye(d.name[r])],["asc"]),[s,r]),u=_(),j=Math.min(12,Math.floor(i.length/6));return e.jsx("div",{className:"idade-items-board",style:{gridTemplateColumns:`repeat(${j}, 1fr)`},children:i.map((d,l)=>{const p=d.decks?.includes(`age${a}`);return e.jsx(M,{onClick:()=>t(d.id),children:e.jsx(Ie.div,{...be(p?"bounceIn":"flipInX",{delay:(p?1:0)+.1*(Math.floor(l/j)+l%j)}),children:e.jsx(b,{itemId:d.id,title:o(d.name),width:u,className:B({"idade-items-board__item--selected":n.includes(d.id),"idade-items-board__item--current-age":a>1&&p})},d.id)})},d.id)})})}function ce({players:s,user:n,concept:t,onChange:a,showMeaning:o,isEditing:r,toggleEditing:i,onDelete:u,onSelect:j,className:d}){const l=_(),{dualTranslate:p}=I(),[v,N]=C.useState(t.meaning),y=()=>{a?.({...t,meaning:v}),i?.(null)},w=x=>{const g={...t,itemsIds:t.itemsIds.filter(P=>P!==x)};a?.(g)},f=Array.from({length:10-t.itemsIds.length},(x,g)=>({id:`placeholder-${g}`}));return e.jsxs(oe,{size:"small",className:B("concept-block",d,{"concept-block--editing":r}),style:{width:l*3.25},children:[e.jsxs(h,{className:"concept-block__header",justify:"space-between",align:"center",children:[e.jsxs("div",{className:"concept-block__sound",children:[e.jsx(re,{text:t.syllable}),e.jsx(he,{className:B("concept-block__syllable",{"concept-block__syllable--button":!!j}),onClick:()=>j?.(t.id),children:e.jsx(H,{children:t.syllable})})]}),e.jsx(de,{title:p({en:`Created by ${s[t.playerId].name}`,pt:`Criado por ${s[t.playerId].name}`}),children:e.jsx(pe,{avatarId:s[t.playerId].avatarId,size:"small"})})]}),o&&e.jsx(te,{defaultValue:t.meaning,readOnly:!r,placeholder:p({en:"Write the meaning here",pt:"Escreva o significado aqui"}),onChange:x=>N(x.target.value),variant:r?"outlined":"filled"}),e.jsxs(h,{wrap:"wrap",gap:6,className:"my-2",children:[t.itemsIds.map(x=>e.jsx(M,{onClick:r?()=>w(x):void 0,className:"idade-transparent-button",children:e.jsx(b,{width:l/2,itemId:x})},x)),!!i&&f.map(x=>e.jsx("div",{className:"concept-block__placeholder-item",children:e.jsx(b,{width:l/2,itemId:"0"})},x.id))]}),!!i&&e.jsx(h,{justify:"flex-end",gap:6,children:r?e.jsxs(e.Fragment,{children:[e.jsx(De,{title:p({en:"Are you sure you want to delete this concept?",pt:"Tem certeza de que deseja deletar este conceito?"}),onConfirm:()=>u?.(t.id),children:e.jsx(O,{type:"dashed",danger:!0,size:"small",disabled:!u,children:e.jsx(ze,{})})}),e.jsx(O,{type:"primary",size:"small",onClick:y,children:e.jsx(xs,{})})]}):e.jsx(de,{title:p({en:"Edit Concept",pt:"Editar Conceito"}),children:e.jsx(O,{type:"dashed",size:"small",onClick:()=>i?.(t.id),children:e.jsx(Se,{})})})}),!a&&e.jsx(bs,{concept:t,userId:n?.id})]})}function bs({concept:s,userId:n}){const{dualTranslate:t}=I(),{cache:a,setCache:o}=ue(),r=a[s.id]??"",i=n===s.playerId;return e.jsx(te,{placeholder:t({en:"Notes",pt:"Anotações"}),className:"concept-block__notes",size:"small",value:i?s.meaning:r,onChange:u=>o({...a,[s.id]:u.target.value}),disabled:i})}function Ss({concept:s,onSelect:n}){const t=_(),{dualTranslate:a}=I();return e.jsxs(oe,{size:"small",className:"concept-block",style:{width:t*3},children:[e.jsx(h,{className:"concept-block__header",justify:"space-between",align:"center",children:e.jsxs("div",{className:"concept-block__sound",children:[e.jsx(re,{text:s.syllable}),e.jsx(he,{className:B("concept-block__syllable",{"concept-block__syllable--button":!!n}),onClick:()=>n?.(s.id),children:e.jsx(H,{children:s.syllable})})]})}),e.jsx(te,{defaultValue:a(xe[s.meaning]),readOnly:!0,variant:"filled",className:"mt-2"})]})}function le({user:s,players:n,items:t,basicConcepts:a,concepts:o,onSelectConcept:r,pool:i,defaultActiveKey:u}){const j=_(),d=C.useMemo(()=>{const l=[];return a&&l.push({key:"basic-concepts",label:e.jsx(c,{pt:"Conceitos Básicos",en:"Basic Concepts"}),children:e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:a.map(p=>e.jsx(Ss,{concept:p,onSelect:r},p.id))})}),l.push({key:"concepts",label:e.jsx(c,{pt:"Conceitos Criados",en:"Created Concepts"}),children:e.jsx(Ns,{user:s,players:n,items:t,concepts:o,onSelectConcept:r})}),i&&i.length>0&&l.push({key:"pool",label:e.jsx(c,{pt:"Itens da Rodada",en:"Round's Items"}),children:e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:i?.map(p=>e.jsx(b,{itemId:p.id,width:j},p.id))})}),l},[a,o,t,j,r,n,i,s]);return e.jsx("div",{className:"full-width contained",children:e.jsx(Fe,{items:d,className:"full-width",size:"small",defaultActiveKey:u})})}function Ns({user:s,players:n,items:t,concepts:a,onSelectConcept:o}){const[r,i]=C.useState("default"),{cache:u}=ue(),j=C.useMemo(()=>r==="default"?a:r==="player"?A.orderBy(a,l=>l.playerId===s.id?0:n[l.playerId]?.name.toLowerCase(),["asc"]):r==="items"?A.orderBy(a,["itemsIds.length"],["desc"]):r==="notes"?A.orderBy(a,l=>l.meaning?.toLowerCase()||u[l.id].toLowerCase()||"",["asc"]):a,[a,n,s,o,r,u]),d=[{label:e.jsx(c,{pt:"Sílaba",en:"Syllable"}),value:"default"},{label:e.jsx(c,{pt:"Jogador",en:"Player"}),value:"player"},{label:e.jsx(c,{pt:"Itens",en:"Items"}),value:"items"},{label:e.jsx(c,{pt:"Anotações",en:"Notes"}),value:"notes"}];return e.jsxs(h,{vertical:!0,children:[e.jsxs(h,{children:[e.jsx(me.Text,{children:"Organizar por:"}),e.jsx(Ue.Group,{onChange:l=>i(l.target.value),value:r,options:d,className:"ml-2"})]}),e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:j.map(l=>e.jsx(ce,{players:n,items:t,concept:l,user:s,onSelect:o},l.id))})]})}function ws({players:s,user:n,items:t,maxProposals:a,round:o,concepts:r,onSubmitConcepts:i}){const{dualTranslate:u}=I();K();const j=n.proposedConcepts||[],[d,l]=C.useState(j),[p,v]=C.useState(null),N=d.length>0&&!d[d.length-1].meaning&&d[d.length-1].itemsIds.length>=2,y=d.find(m=>m.id===p),w=d.length-j.length,f=d.every(m=>m.meaning&&m.itemsIds.length>=2&&m.itemsIds.length<=10),x=()=>{const m=`c-${o.current}-${n.id}-${Date.now()}`;l(T=>[...T,{id:m,key:"",soundId:"",itemsIds:[],meaning:"",syllable:{pt:"?",en:"?"},playerId:n.id,age:o.current,type:"custom"}]),v(m)},g=m=>{v(p===m?null:m)},P=m=>{l(T=>T.map(E=>E.id===m.id?m:E))},fe=m=>{p!==null&&l(T=>{const E=[...T],R=E.find(Q=>Q.id===p);return R?(R.itemsIds.includes(m)?R.itemsIds=R.itemsIds.filter(Q=>Q!==m):R.itemsIds.push(m),E):T})},Ce=m=>{l(T=>T.filter(E=>E.id!==m)),p===m&&v(null)};return e.jsxs(W,{fullWidth:!0,children:[e.jsx(F,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Criação de Conceitos"}),en:e.jsx(e.Fragment,{children:"Concept Creation"})})}),e.jsx(D,{type:"action",children:e.jsx(c,{en:e.jsxs(e.Fragment,{children:["Select 2-10 items to create a concept, then propose a meaning for it. ",e.jsx("br",{}),"The meaning is secret to you and will be only revealed at the end of the game.",e.jsx("br",{}),"A syllable/sound will be assigned to the concept, which you can use to refer to it later.",e.jsx("br",{}),"You can create up to ",a," concepts this round."]}),pt:e.jsxs(e.Fragment,{children:["Selecione 3-10 itens para criar um conceito e proponha um significado para ele. ",e.jsx("br",{}),"O significado é secreto para você e só será revelado no final do jogo.",e.jsx("br",{}),"Uma sílaba/som será atribuída ao conceito que você usará para se referir a ele mais tarde.",e.jsx("br",{}),"Você pode criar até ",a," conceitos nesta rodada."]})})}),e.jsx(Is,{items:t,selectedItems:y?.itemsIds,onSelectItem:fe,currentAge:o.current}),e.jsx(k,{className:"new-concepts-container",children:e.jsxs(h,{wrap:"wrap",gap:12,align:"center",children:[d.map(m=>e.jsx(ce,{players:s,concept:m,onChange:P,items:t,showMeaning:!0,toggleEditing:g,isEditing:p===m.id,onDelete:j.includes(m.id)?void 0:Ce},m.id)),e.jsx(O,{disabled:w>=a||N,onClick:x,icon:e.jsx(ls,{}),children:e.jsx(c,{pt:"Criar Conceito",en:"Create Concept"})})]})}),d.length-(n.proposedConcepts?.length??0)>0&&e.jsx(k,{children:e.jsx(J,{size:"large",disabled:!!p||!f,onClick:()=>i({proposedConcepts:d}),children:e.jsx(c,{pt:"Enviar Conceitos",en:"Send Concepts"})})}),e.jsxs(D,{type:"tip",children:[e.jsx(c,{pt:"Na próxima fase do jogo, você terá que dar nome a uma dessa coisas abaixo, portanto, tente criar conceitos que te ajude nessa tarefa.",en:"In the next phase of the game, you will have to name one of the things below, so try to create concepts that help you with this task."}),e.jsx(h,{justify:"center",align:"center",className:"mt-2",gap:12,children:n.hand.map(m=>e.jsx(b,{itemId:m.id,title:u(m.name),width:48},m.id))}),e.jsx(c,{pt:"Sugestões de conceitos: animal, vôo, cor, pequeno, imaginário, natural, peludo, afiado, etc.",en:"Concept suggestions: animal, flight, color, small, imaginary, natural, furry, sharp, etc."})]}),r.length>0&&e.jsx(le,{user:n,players:s,items:t,concepts:r})]})}function Ps({state:s,players:n,user:t}){const{step:a,goToNextStep:o,setStep:r}=U(),i=gs(r);return e.jsx(V,{phase:s?.phase,allowedPhase:S.CREATING_CONCEPTS,children:e.jsxs(q,{step:a,players:n,children:[e.jsx(Be,{round:s?.round,onPressButton:o,buttonText:" ",time:5,children:e.jsx(X,{contained:!0,children:Ts(s?.round?.current)})}),e.jsx(L,{icon:e.jsx(Re,{}),title:e.jsx(c,{pt:"Criação de Conceitos",en:"Concept Creation"}),currentRound:s?.round?.current,type:"block",onClose:o,children:e.jsx(X,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Crie até ",e.jsx(G,{children:s.maxProposals})," novos conceitos"]}),en:e.jsxs(e.Fragment,{children:["Create up to ",e.jsx(G,{children:s.maxProposals})," new concepts"]})})})}),e.jsx(ws,{user:t,players:n,basicConcepts:s.basicConcepts,concepts:s.concepts,maxProposals:s.maxProposals,round:s.round,items:s.items,onSubmitConcepts:i})]})})}const Ts=s=>{switch(s){case 1:return e.jsx(c,{pt:"Idade da Pedra",en:"Stone Age"});case 2:return e.jsx(c,{pt:"Idade Medieval",en:"Medieval Age"});case 3:return e.jsx(c,{pt:"Idade Industrial",en:"Industrial Age"});case 4:return e.jsx(c,{pt:"Idade Moderna",en:"Modern Age"});case 5:return e.jsx(c,{pt:"O Futuro?",en:"Future?"});default:return e.jsx(c,{pt:"Uma nova era se aproxima",en:"A new era is coming"})}};function _s({user:s,players:n,announcement:t,items:a,round:o,concepts:r,onMakeMeReady:i}){return K(),e.jsxs(W,{fullWidth:!0,announcement:t,children:[e.jsx(F,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Novos Conceitos"}),en:e.jsx(e.Fragment,{children:"New Concepts"})})}),e.jsx(D,{type:"action",children:e.jsx(c,{pt:"Analise os novos conceitos! Você pode anotar o que você achar que é o significado de cada um. Aperte o botão quando estiver pronto.",en:"Review the new concepts! You can jot down what you think each one means. Press the button when you're ready."})}),e.jsx(k,{children:e.jsx(J,{type:"primary",size:"large",onClick:i,children:e.jsx(c,{pt:"Pronto",en:"Ready"})})}),e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:12,className:"my-2",children:r.map(u=>e.jsx(ce,{players:n,items:a,concept:u,user:s,className:u.age===o.current?"new-concept-block":""},u.id))})]})}function Es({state:s,players:n,user:t}){const{step:a,setStep:o}=U(),r=fs(o),i=e.jsx(L,{icon:e.jsx(Ve,{}),title:e.jsx(c,{pt:"Novos Conceitos",en:"New Concepts"}),currentRound:s?.round?.current,type:"overlay"});return e.jsx(V,{phase:s?.phase,allowedPhase:S.CONCEPTS_REVEAL,children:e.jsx(q,{step:a,players:n,children:e.jsx(_s,{user:t,players:n,announcement:i,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,onMakeMeReady:r})})})}function As({user:s,players:n,announcement:t,items:a,concepts:o,basicConcepts:r,pool:i,onSubmitName:u}){const{language:j,dualTranslate:d}=I(),l=s.hand??[],p=_(),[v,N]=C.useState(null),[y,w]=C.useState([]),f=g=>{w(P=>[...P,g])},x=()=>{!v||!y||u({itemId:v.id,name:je(o,r,y,j),conceptsIds:y})};return K(),e.jsxs(W,{fullWidth:!0,announcement:t,children:[e.jsx(F,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Nomeie um Item"}),en:e.jsx(e.Fragment,{children:"Name an Item"})})}),e.jsx(D,{type:"action",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Escolha um dos seus três itens e crie um nome para ele usando as sílabas disponíveis (clique na sílaba para adicionar).",e.jsx("br",{}),"Seu nome deve ter pelo menos duas sílabas."]}),en:e.jsxs(e.Fragment,{children:["Choose one of your three items and create a name for it using the available syllables (click on the syllable to add it).",e.jsx("br",{}),"Your name must have at least two syllables."]})})}),e.jsxs(k,{className:"mt-4 contained",children:[e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"mb-2",children:l.map(g=>e.jsx(M,{onClick:()=>N(g),activeClass:"idp-selected",active:v?.id===g.id,children:e.jsx(b,{itemId:g.id,width:p,title:d(g.name)},g.id)},g.id))}),e.jsx(z,{orientation:"vertical"}),y.length>0&&e.jsxs(h,{justify:"center",align:"center",wrap:"wrap",gap:6,children:[e.jsx(G,{className:"idp-item-name",children:e.jsx(Os,{concepts:o,basicConcepts:r,name:y})}),e.jsx(O,{icon:e.jsx(us,{}),onClick:()=>w(g=>g.slice(0,-1))})]}),e.jsx(z,{orientation:"vertical"}),e.jsx(J,{size:"large",disabled:!v||y.length<2,onClick:x,children:e.jsx(c,{pt:"Enviar Nome",en:"Send Name"})})]}),e.jsx(le,{user:s,players:n,items:a,basicConcepts:r,concepts:o,onSelectConcept:f,pool:i,defaultActiveKey:["basic-concepts","concepts","pool"]})]})}function Os({concepts:s,basicConcepts:n,name:t}){const{language:a}=I(),o=C.useMemo(()=>je(s,n,t,a),[t,s,n,a]);return e.jsx(e.Fragment,{children:o})}const je=(s,n,t,a)=>t.map(o=>s.find(r=>r.id===o)?.syllable[a]||n.find(r=>r.id===o)?.syllable[a]).join("");function ks({state:s,players:n,user:t}){const{step:a,setStep:o}=U(),r=Cs(o),i=e.jsx(L,{icon:e.jsx(qe,{}),title:e.jsx(c,{pt:"Crie um novo nome",en:"Create a new name"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(X,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Vamos expandir nosso dicionário."}),en:e.jsx(e.Fragment,{children:"Let's expand our dictionary."})})})});return e.jsx(V,{phase:s?.phase,allowedPhase:S.COMMUNICATING_THINGS,children:e.jsx(q,{step:a,players:n,children:e.jsx(As,{user:t,players:n,announcement:i,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,pool:s.pool,onSubmitName:r})})})}function Rs({user:s,players:n,announcement:t,items:a,concepts:o,basicConcepts:r,pool:i,newNames:u,onSubmitGuesses:j}){const{dualTranslate:d}=I(),l=_(),{votes:p,activateItem:v,isVotingComplete:N,isItemActive:y}=Le("player",!0,Object.keys(n).length,{});K();const w=()=>{if(!N)return;const f=Object.keys(p).reduce((x,g)=>{const P=we(g)[1];return s.id===P||(x[P]=p[g]),x},{});j({guesses:f})};return e.jsxs(W,{fullWidth:!0,announcement:t,children:[e.jsx(F,{children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"O que os jogadores estão falando?"}),en:e.jsx(e.Fragment,{children:"What are the players talking about?"})})}),e.jsx(D,{type:"action",children:e.jsx(c,{pt:e.jsx(e.Fragment,{children:"Faça pares de nomes e items. Escolha um nome e depois o item que ele representa ou vice-versa, e então aperte enviar!"}),en:e.jsx(e.Fragment,{children:"Make pairs of names and items. Choose a name and then the item it represents or vice versa, and then press send!"})})}),e.jsxs(k,{className:"mt-4 contained",orientation:"vertical",children:[e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"mb-2",children:u.map(f=>{const x=Ne(["player",f.playerId]);return e.jsx(M,{onClick:()=>v(x),activeClass:"idp-selected",active:y(x),children:e.jsxs(h,{vertical:!0,align:"center",gap:6,children:[e.jsxs(h,{align:"center",gap:6,children:[e.jsx(pe,{avatarId:n[f.playerId].avatarId}),e.jsx(He,{children:e.jsx(G,{className:"idp-item-name-speech",children:f.name})})]}),p[x]&&e.jsx(b,{itemId:p[x],width:l})]})},f.id)})}),e.jsx(z,{orientation:"vertical"}),e.jsx(h,{justify:"center",align:"center",wrap:"wrap",gap:6,className:"my-2",children:i.map(f=>e.jsx(M,{onClick:()=>v(f.id),activeClass:"idp-selected",active:y(f.id),className:"idp-pool-item",children:e.jsx(b,{itemId:f.id,width:l,title:d(f.name)})},f.id))}),e.jsx(z,{orientation:"vertical"}),e.jsxs(h,{justify:"center",align:"center",wrap:"wrap",gap:6,children:[e.jsx($e,{onClick:()=>j(ys(s,i,u)),children:"Mock Guesses"}),e.jsx(J,{size:"large",disabled:!N,onClick:w,children:e.jsx(c,{pt:"Enviar Palpites",en:"Send Guesses"})})]})]}),e.jsx(le,{user:s,players:n,items:a,basicConcepts:r,concepts:o})]})}function Ms({state:s,players:n,user:t}){const{step:a,setStep:o}=U(),r=vs(o),i=e.jsx(L,{icon:e.jsx(We,{}),title:e.jsx(c,{pt:"Adivinhação",en:"Guessing"}),currentRound:s?.round?.current,type:"overlay"});return e.jsx(V,{phase:s?.phase,allowedPhase:S.GUESSING,children:e.jsx(q,{step:a,players:n,children:e.jsx(Rs,{user:t,players:n,announcement:i,basicConcepts:s.basicConcepts,concepts:s.concepts,round:s.round,items:s.items,pool:s.pool,newNames:s.newNames,onSubmitGuesses:r})})})}function ge(){return e.jsx(c,{en:e.jsxs(e.Fragment,{children:["You gain ",e.jsx($,{type:"positive",children:"2"})," points for every name you paired correctly, and the creator gains ",e.jsx($,{type:"positive",children:"1"})," point."]}),pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx($,{type:"positive",children:"2"})," pontos por cada nome que você acertou, e o criador ganha ",e.jsx($,{type:"positive",children:"1"})," ponto."]})})}function Bs({entry:s,basicConcepts:n,concepts:t}){const a=C.useMemo(()=>s.conceptsIds.map(o=>n.find(r=>r.id===o)||t.find(r=>r.id===o)).filter(Boolean),[s.conceptsIds,n,t]);return e.jsxs("div",{className:"full-width",children:[e.jsxs(h,{align:"center",gap:12,children:[e.jsx("div",{children:e.jsx("span",{className:"idp-gallery__letter",children:s.name[0]})}),e.jsx(b,{itemId:s.itemId,width:64}),e.jsxs("div",{children:[e.jsx(Y,{children:e.jsx(c,{pt:"Nome",en:"Name"})}),e.jsxs(h,{align:"center",gap:6,children:[e.jsx(G,{className:"idp-item-name",children:s.name}),e.jsx(re,{text:{en:s.name,pt:s.name}})]})]})]}),e.jsx(z,{className:"my-4"}),e.jsx(Y,{children:e.jsx(c,{pt:"Definição",en:"Definition"})}),e.jsx(h,{wrap:"wrap",gap:6,className:"my-2",children:a.map(o=>e.jsx(Gs,{concept:o},o.id))})]})}function Gs({concept:s}){const n=_();return e.jsx(oe,{size:"small",children:e.jsxs("div",{className:B("concept-block__syllable"),children:[e.jsx(H,{children:s.syllable}),e.jsxs(h,{wrap:"wrap",gap:3,children:[s.type==="basic"&&e.jsx(me.Text,{italic:!0,children:e.jsx(H,{children:xe[s.key]})}),s.itemsIds.slice(-3).map(t=>e.jsx(b,{width:n/2,itemId:t},`${s.id}-${t}`))]})]})})}function Ds({creator:s,creatorColor:n,entry:t,players:a}){const o=_(),r=C.useMemo(()=>A.orderBy(Object.keys(t.guesses).reduce((i,u)=>{const j=t.guesses[u];return i.push({itemId:u,playersIds:j,correct:u===t.itemId}),i},[]),[i=>i.itemId===t.itemId,"playersIds.length"],["desc","desc"]),[t.guesses,t.itemId]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"idp-gallery__credits",children:[e.jsx(Y,{children:e.jsx(c,{pt:"Criador",en:"Creator"})}),e.jsx("span",{className:"uppercase",children:e.jsx(ns,{player:s})})]}),e.jsxs("div",{className:"idp-gallery__guesses",children:[e.jsx(Y,{children:e.jsx(c,{pt:"Participantes votaram",en:"Players voted"})}),e.jsx("div",{className:"idp-gallery__guess",children:r.map(i=>e.jsxs("div",{children:[e.jsx(Xe,{winner:i.correct,backgroundColor:n,extra:e.jsxs(h,{align:"center",gap:3,style:{height:"100%"},children:[e.jsx(Pe,{icon:e.jsx(ss,{}),size:"small"})," ","2"]}),children:e.jsx(b,{itemId:i.itemId,width:o/2})}),e.jsx(Ze,{playersIds:i.playersIds,players:a})]},i.itemId))})]}),e.jsx("div",{className:"sda-gallery__result",children:r.length===0&&e.jsx(es,{children:e.jsx(c,{pt:"Esse nome deve ter sido muito ruim.",en:"It must have been a very crappy name. Shame..."})})})]})}function zs({gallery:s,players:n,slideShowConfig:t,basicConcepts:a,concepts:o}){Me();const r=s[t.slideIndex],i=n[r.playerId],u=Te(i.avatarId);return e.jsxs(W,{fullWidth:!0,children:[e.jsx(F,{size:"small",children:e.jsx(c,{pt:"Novos termos no dicionário",en:"New Terms in the Dictionary"})}),e.jsx(Ke,{content:e.jsx(ge,{})}),e.jsxs(Qe,{config:t,barColor:u,leftClassName:"idp-gallery__left-page",rightClassName:"idp-gallery__right-page",children:[e.jsx(Bs,{entry:r,basicConcepts:a,concepts:o}),e.jsx(Ds,{creator:i,creatorColor:u,entry:r,players:n})]})]})}function Fs({players:s,ranking:n,onGoBack:t,round:a}){return e.jsxs(ts,{players:s,ranking:n,gainedPointsDescriptions:[e.jsx(c,{pt:"Pares corretos",en:"Correct matches"},"1"),e.jsx(c,{pt:"Pontos pelo nome da sua coisa",en:"Points for your thing's name"},"2")],children:[e.jsx(k,{children:e.jsx(O,{onClick:t,children:e.jsx(c,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(Ee,{round:a})]})}function Us({state:s,players:n}){const{step:t,goToNextStep:a,goToPreviousStep:o}=U(0),r=Ye({length:s.gallery.length,slideDuration:js,onExpire:a}),i=()=>{r.reset(),o()};return e.jsx(V,{phase:s?.phase,allowedPhase:S.RESULTS,children:e.jsxs(q,{step:t,players:n,children:[e.jsx(L,{icon:e.jsx(Je,{}),title:e.jsx(c,{pt:"Resultados",en:"Results"}),onClose:a,currentRound:s?.round?.current,unskippable:!0,type:"block",duration:s.round.current<3?12:void 0,children:e.jsx(ge,{})}),e.jsx(zs,{players:n,basicConcepts:s.basicConcepts,concepts:s.concepts,gallery:s.gallery,slideShowConfig:r}),e.jsx(Fs,{players:n,ranking:s.ranking,round:s.round,onGoBack:i})]})})}function Vs({state:s,players:n}){return e.jsx(rs,{state:s,players:n,announcementIcon:e.jsx(as,{}),children:e.jsx(os,{title:e.jsx(c,{pt:"Dicionário",en:"Dictionary"}),className:"mt-4",children:"TBD"})})}function Ws(s){switch(s.phase){case S.CREATING_CONCEPTS:return Ps;case S.CONCEPTS_REVEAL:return Es;case S.COMMUNICATING_THINGS:return ks;case S.GUESSING:return Ms;case S.RESULTS:return Us;case ke.DEFAULT.GAME_OVER:return Vs;default:return Oe}}function pt(){return e.jsx(Ae,{gameCollection:_e.IDADE_DA_PREDA,getActiveComponent:Ws})}export{pt as default};
