import{e8 as H1,fD as qc,cc as B1,r as oe,$ as jt,j as re,F as U1,e as L1,x as Y1,B as Rr,T as Nr}from"./index-BO8o3uJJ.js";import{R as ic}from"./UndoOutlined-_GNNFjJ9.js";import{R as X1}from"./DeleteOutlined-DO7b_iX-.js";const q1=Math.PI/180;function w1(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Qa=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},w={_global:Qa,version:"10.0.2",isBrowser:w1(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle(o){return w.angleDeg?o*q1:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return w.DD.isDragging},isTransforming(){var o,e;return(e=(o=w.Transformer)===null||o===void 0?void 0:o.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!w.DD.node},releaseCanvasOnDestroy:!0,document:Qa.document,_injectGlobal(o){typeof Qa.Konva<"u"&&console.error("Severa Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Qa.Konva=o}},Dt=o=>{w[o.prototype.getClassName()]=o};w._injectGlobal(w);const V1=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,lc=()=>{if(typeof document>"u")throw new Error(V1)};class ve{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ve(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){const n=Math.cos(e),l=Math.sin(e),s=this.m[0]*n+this.m[2]*l,u=this.m[1]*n+this.m[3]*l,c=this.m[0]*-l+this.m[2]*n,f=this.m[1]*-l+this.m[3]*n;return this.m[0]=s,this.m[1]=u,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){const l=this.m[0]+this.m[2]*n,s=this.m[1]+this.m[3]*n,u=this.m[2]+this.m[0]*e,c=this.m[3]+this.m[1]*e;return this.m[0]=l,this.m[1]=s,this.m[2]=u,this.m[3]=c,this}multiply(e){const n=this.m[0]*e.m[0]+this.m[2]*e.m[1],l=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],u=this.m[1]*e.m[2]+this.m[3]*e.m[3],c=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=l,this.m[2]=s,this.m[3]=u,this.m[4]=c,this.m[5]=f,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,l=-this.m[1]*e,s=-this.m[2]*e,u=this.m[0]*e,c=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=l,this.m[2]=s,this.m[3]=u,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const e=this.m[0],n=this.m[1],l=this.m[2],s=this.m[3],u=this.m[4],c=this.m[5],f=e*s-n*l,g={x:u,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){const p=Math.sqrt(e*e+n*n);g.rotation=n>0?Math.acos(e/p):-Math.acos(e/p),g.scaleX=p,g.scaleY=f/p,g.skewX=(e*l+n*s)/f,g.skewY=0}else if(l!=0||s!=0){const p=Math.sqrt(l*l+s*s);g.rotation=Math.PI/2-(s>0?Math.acos(-l/p):-Math.acos(l/p)),g.scaleX=f/p,g.scaleY=p,g.skewX=0,g.skewY=(e*l+n*s)/f}return g.rotation=x._getRotation(g.rotation),g}}const j1="[object Array]",K1="[object Number]",P1="[object String]",Q1="[object Boolean]",Z1=Math.PI/180,J1=180/Math.PI,Or="#",F1="",k1="0",W1="Konva warning: ",sc="Konva error: ",I1="rgb(",Dr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},$1=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let xl=[];const td=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(o){setTimeout(o,60)},x={_isElement(o){return!!(o&&o.nodeType==1)},_isFunction(o){return!!(o&&o.constructor&&o.call&&o.apply)},_isPlainObject(o){return!!o&&o.constructor===Object},_isArray(o){return Object.prototype.toString.call(o)===j1},_isNumber(o){return Object.prototype.toString.call(o)===K1&&!isNaN(o)&&isFinite(o)},_isString(o){return Object.prototype.toString.call(o)===P1},_isBoolean(o){return Object.prototype.toString.call(o)===Q1},isObject(o){return o instanceof Object},isValidSelector(o){if(typeof o!="string")return!1;const e=o[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(o){return o===0||o>0?1:-1},requestAnimFrame(o){xl.push(o),xl.length===1&&td(function(){const e=xl;xl=[],e.forEach(function(n){n()})})},createCanvasElement(){lc();const o=document.createElement("canvas");try{o.style=o.style||{}}catch{}return o},createImageElement(){return lc(),document.createElement("img")},_isInDocument(o){for(;o=o.parentNode;)if(o==document)return!0;return!1},_urlToImage(o,e){const n=x.createImageElement();n.onload=function(){e(n)},n.src=o},_rgbToHex(o,e,n){return((1<<24)+(o<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(o){o=o.replace(Or,F1);const e=parseInt(o,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let o=(Math.random()*16777215<<0).toString(16);for(;o.length<6;)o=k1+o;return Or+o},getRGB(o){let e;return o in Dr?(e=Dr[o],{r:e[0],g:e[1],b:e[2]}):o[0]===Or?this._hexToRgb(o.substring(1)):o.substr(0,4)===I1?(e=$1.exec(o.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(o){return o=o||"black",x._namedColorToRBA(o)||x._hex3ColorToRGBA(o)||x._hex4ColorToRGBA(o)||x._hex6ColorToRGBA(o)||x._hex8ColorToRGBA(o)||x._rgbColorToRGBA(o)||x._rgbaColorToRGBA(o)||x._hslColorToRGBA(o)},_namedColorToRBA(o){const e=Dr[o.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(o){if(o.indexOf("rgb(")===0){o=o.match(/rgb\(([^)]+)\)/)[1];const e=o.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(o){if(o.indexOf("rgba(")===0){o=o.match(/rgba\(([^)]+)\)/)[1];const e=o.split(/ *, */).map((n,l)=>n.slice(-1)==="%"?l===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(o){if(o[0]==="#"&&o.length===9)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:parseInt(o.slice(7,9),16)/255}},_hex6ColorToRGBA(o){if(o[0]==="#"&&o.length===7)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:1}},_hex4ColorToRGBA(o){if(o[0]==="#"&&o.length===5)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:parseInt(o[4]+o[4],16)/255}},_hex3ColorToRGBA(o){if(o[0]==="#"&&o.length===4)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:1}},_hslColorToRGBA(o){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(o)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o),l=Number(n[0])/360,s=Number(n[1])/100,u=Number(n[2])/100;let c,f,g;if(s===0)return g=u*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};u<.5?c=u*(1+s):c=u+s-u*s;const p=2*u-c,m=[0,0,0];for(let S=0;S<3;S++)f=l+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?g=p+(c-p)*6*f:2*f<1?g=c:3*f<2?g=p+(c-p)*(2/3-f)*6:g=p,m[S]=g*255;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection(o,e){return!(e.x>o.x+o.width||e.x+e.width<o.x||e.y>o.y+o.height||e.y+e.height<o.y)},cloneObject(o){const e={};for(const n in o)this._isPlainObject(o[n])?e[n]=this.cloneObject(o[n]):this._isArray(o[n])?e[n]=this.cloneArray(o[n]):e[n]=o[n];return e},cloneArray(o){return o.slice(0)},degToRad(o){return o*Z1},radToDeg(o){return o*J1},_degToRad(o){return x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(o)},_radToDeg(o){return x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(o)},_getRotation(o){return w.angleDeg?x.radToDeg(o):o},_capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)},throw(o){throw new Error(sc+o)},error(o){console.error(sc+o)},warn(o){w.showWarnings&&console.warn(W1+o)},each(o,e){for(const n in o)e(n,o[n])},_inRange(o,e,n){return e<=o&&o<n},_getProjectionToSegment(o,e,n,l,s,u){let c,f,g;const p=(o-n)*(o-n)+(e-l)*(e-l);if(p==0)c=o,f=e,g=(s-n)*(s-n)+(u-l)*(u-l);else{const m=((s-o)*(n-o)+(u-e)*(l-e))/p;m<0?(c=o,f=e,g=(o-s)*(o-s)+(e-u)*(e-u)):m>1?(c=n,f=l,g=(n-s)*(n-s)+(l-u)*(l-u)):(c=o+m*(n-o),f=e+m*(l-e),g=(c-s)*(c-s)+(f-u)*(f-u))}return[c,f,g]},_getProjectionToLine(o,e,n){const l=x.cloneObject(o);let s=Number.MAX_VALUE;return e.forEach(function(u,c){if(!n&&c===e.length-1)return;const f=e[(c+1)%e.length],g=x._getProjectionToSegment(u.x,u.y,f.x,f.y,o.x,o.y),p=g[0],m=g[1],S=g[2];S<s&&(l.x=p,l.y=m,s=S)}),l},_prepareArrayForTween(o,e,n){const l=[],s=[];if(o.length>e.length){const c=e;e=o,o=c}for(let c=0;c<o.length;c+=2)l.push({x:o[c],y:o[c+1]});for(let c=0;c<e.length;c+=2)s.push({x:e[c],y:e[c+1]});const u=[];return s.forEach(function(c){const f=x._getProjectionToLine(c,l,n);u.push(f.x),u.push(f.y)}),u},_prepareToStringify(o){let e;o.visitedByCircularReferenceRemoval=!0;for(const n in o)if(o.hasOwnProperty(n)&&o[n]&&typeof o[n]=="object"){if(e=Object.getOwnPropertyDescriptor(o,n),o[n].visitedByCircularReferenceRemoval||x._isElement(o[n]))if(e.configurable)delete o[n];else return null;else if(x._prepareToStringify(o[n])===null)if(e.configurable)delete o[n];else return null}return delete o.visitedByCircularReferenceRemoval,o},_assign(o,e){for(const n in e)o[n]=e[n];return o},_getFirstPointerId(o){return o.touches?o.changedTouches[0].identifier:o.pointerId||999},releaseCanvas(...o){w.releaseCanvasOnDestroy&&o.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(o,e,n,l){let s=e<0?e:0,u=n<0?n:0;e=Math.abs(e),n=Math.abs(n);let c=0,f=0,g=0,p=0;typeof l=="number"?c=f=g=p=Math.min(l,e/2,n/2):(c=Math.min(l[0]||0,e/2,n/2),f=Math.min(l[1]||0,e/2,n/2),p=Math.min(l[2]||0,e/2,n/2),g=Math.min(l[3]||0,e/2,n/2)),o.moveTo(s+c,u),o.lineTo(s+e-f,u),o.arc(s+e-f,u+f,f,Math.PI*3/2,0,!1),o.lineTo(s+e,u+n-p),o.arc(s+e-p,u+n-p,p,0,Math.PI/2,!1),o.lineTo(s+g,u+n),o.arc(s+g,u+n-g,g,Math.PI/2,Math.PI,!1),o.lineTo(s,u+c),o.arc(s+c,u+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(o,e,n,l,s){l=Math.abs(l);for(let u=0;u<n;u++){const c=e[(u-1+n)%n],f=e[u],g=e[(u+1)%n],p={x:f.x-c.x,y:f.y-c.y},m={x:g.x-f.x,y:g.y-f.y},S=Math.hypot(p.x,p.y),y=Math.hypot(m.x,m.y);let b;typeof s=="number"?b=s:b=u<s.length?s[u]:0,b=l*Math.cos(Math.PI/n)*Math.min(1,b/l*2);const G={x:p.x/S,y:p.y/S},N={x:m.x/y,y:m.y/y},D={x:f.x-G.x*b,y:f.y-G.y*b},R={x:f.x+N.x*b,y:f.y+N.y*b};u===0?o.moveTo(D.x,D.y):o.lineTo(D.x,D.y),o.arcTo(f.x,f.y,R.x,R.y,b)}}};function ed(o){const e=[],n=o.length,l=x;for(let s=0;s<n;s++){let u=o[s];l._isNumber(u)?u=Math.round(u*1e3)/1e3:l._isString(u)||(u=u+""),e.push(u)}return e}const rc=",",ad="(",nd=")",id="([",ld="])",sd=";",rd="()",od="=",oc=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],ud=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],hd=100;let Al=null;function uc(){if(Al!==null)return Al;try{const e=x.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(Al=!1,!1)}catch{return Al=!1,!1}}class ql{constructor(e){this.canvas=e,w.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let l=this.traceArr,s=l.length,u="",c,f,g,p;for(c=0;c<s;c++)f=l[c],g=f.method,g?(p=f.args,u+=g,e?u+=rd:x._isArray(p[0])?u+=id+p.join(rc)+ld:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),u+=ad+p.join(rc)+nd)):(u+=f.property,e||(u+=od+f.val)),u+=sd;return u}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,l;n.push(e),l=n.length,l>=hd&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(e){const n=e.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(e,n){this._context[e]=n}arc(e,n,l,s,u,c){this._context.arc(e,n,l,s,u,c)}arcTo(e,n,l,s,u){this._context.arcTo(e,n,l,s,u)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,l,s,u,c){this._context.bezierCurveTo(e,n,l,s,u,c)}clearRect(e,n,l,s){this._context.clearRect(e,n,l,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const l=arguments;if(l.length===2)return this._context.createImageData(e,n);if(l.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,l,s){return this._context.createLinearGradient(e,n,l,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,l,s,u,c){return this._context.createRadialGradient(e,n,l,s,u,c)}drawImage(e,n,l,s,u,c,f,g,p){const m=arguments,S=this._context;m.length===3?S.drawImage(e,n,l):m.length===5?S.drawImage(e,n,l,s,u):m.length===9&&S.drawImage(e,n,l,s,u,c,f,g,p)}ellipse(e,n,l,s,u,c,f,g){this._context.ellipse(e,n,l,s,u,c,f,g)}isPointInPath(e,n,l,s){return l?this._context.isPointInPath(l,e,n,s):this._context.isPointInPath(e,n,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,l,s){this._context.fillRect(e,n,l,s)}strokeRect(e,n,l,s){this._context.strokeRect(e,n,l,s)}fillText(e,n,l,s){s?this._context.fillText(e,n,l,s):this._context.fillText(e,n,l)}measureText(e){return this._context.measureText(e)}getImageData(e,n,l,s){return this._context.getImageData(e,n,l,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,l,s){this._context.rect(e,n,l,s)}roundRect(e,n,l,s,u){this._context.roundRect(e,n,l,s,u)}putImageData(e,n,l){this._context.putImageData(e,n,l)}quadraticCurveTo(e,n,l,s){this._context.quadraticCurveTo(e,n,l,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,l,s,u,c){this._context.setTransform(e,n,l,s,u,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,l,s){this._context.strokeText(e,n,l,s)}transform(e,n,l,s,u,c){this._context.transform(e,n,l,s,u,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=oc.length,l=this.setAttr,s,u;const c=function(f){let g=e[f],p;e[f]=function(){return u=ed(Array.prototype.slice.call(arguments,0)),p=g.apply(e,arguments),e._trace({method:f,args:u}),p}};for(s=0;s<n;s++)c(oc[s]);e.setAttr=function(){l.apply(e,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),e._trace({property:f,val:g})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}ud.forEach(function(o){Object.defineProperty(ql.prototype,o,{get(){return this._context[o]},set(e){this._context[o]=e}})});class cd extends ql{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),l=e.getFillPriority();if(n&&l==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&l==="pattern"){this._fillPattern(e);return}const u=e.getFillLinearGradientColorStops();if(u&&l==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&l==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):u?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),l=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),u=this.createLinearGradient(n.x,n.y,l.x,l.y);if(s){for(let c=0;c<s.length;c+=2)u.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",u)}}_stroke(e){const n=e.dash(),l=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!l){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),l||this.restore()}}_applyShadow(e){var n,l,s;const u=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(l=e.getShadowBlur())!==null&&l!==void 0?l:5,f=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},g=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=g.x*p,S=g.y*p;this.setAttr("shadowColor",u),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*m),this.setAttr("shadowOffsetY",f.y*S)}}class fd extends ql{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e);const l=e.hitStrokeWidth(),s=l==="auto"?e.strokeWidth():l;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}let Ml;function dd(){if(Ml)return Ml;const o=x.createCanvasElement(),e=o.getContext("2d");return Ml=function(){const n=w._global.devicePixelRatio||1,l=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/l}(),x.releaseCanvas(o),Ml}class to{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const l=(e||{}).pixelRatio||w.pixelRatio||dd();this.pixelRatio=l,this._canvas=x.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(s){return x.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class xa extends to{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new cd(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}function hc(){const o=x.createCanvasElement();o.width=1,o.height=1;const e=o.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,1,1),e.fillStyle="rgba(255,0,255,1)",e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1).data;return!(n[0]===255&&n[1]===0&&n[2]===255&&n[3]===255)}function cc(){var o,e;return typeof navigator>"u"?!1:(e=(o=navigator.brave)===null||o===void 0?void 0:o.isBrave())!==null&&e!==void 0?e:!1}let fc=!1;function gd(){return cc()&&hc()&&!fc&&(fc=!0,x.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),cc()&&hc()}class eo extends to{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new fd(this),this.setSize(e.width,e.height),gd()}}const yt={get isDragging(){let o=!1;return yt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(o=!0)}),o},justDragged:!1,get node(){let o;return yt._dragElements.forEach(e=>{o=e.node}),o},_dragElements:new Map,_drag(o){const e=[];yt._dragElements.forEach((n,l)=>{const{node:s}=n,u=s.getStage();u.setPointersPositions(o),n.pointerId===void 0&&(n.pointerId=x._getFirstPointerId(o));const c=u._changedPointerPositions.find(f=>f.id===n.pointerId);if(c){if(n.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-n.startPointerPos.x),Math.abs(c.y-n.startPointerPos.y))<f||(s.startDrag({evt:o}),!s.isDragging()))return}s._setDragPosition(o,n),e.push(s)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:o},!0)})},_endDragBefore(o){const e=[];yt._dragElements.forEach(n=>{const{node:l}=n,s=l.getStage();if(o&&s.setPointersPositions(o),!s._changedPointerPositions.find(f=>f.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(yt.justDragged=!0,w._mouseListenClick=!1,w._touchListenClick=!1,w._pointerListenClick=!1,n.dragStatus="stopped");const c=n.node.getLayer()||n.node instanceof w.Stage&&n.node;c&&e.indexOf(c)===-1&&e.push(c)}),e.forEach(n=>{n.draw()})},_endDragAfter(o){yt._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:o},!0),e.dragStatus!=="dragging"&&yt._dragElements.delete(n)})}};w.isBrowser&&(window.addEventListener("mouseup",yt._endDragBefore,!0),window.addEventListener("touchend",yt._endDragBefore,!0),window.addEventListener("touchcancel",yt._endDragBefore,!0),window.addEventListener("mousemove",yt._drag),window.addEventListener("touchmove",yt._drag),window.addEventListener("mouseup",yt._endDragAfter,!1),window.addEventListener("touchend",yt._endDragAfter,!1),window.addEventListener("touchcancel",yt._endDragAfter,!1));function Aa(o){return x._isString(o)?'"'+o+'"':Object.prototype.toString.call(o)==="[object Number]"||x._isBoolean(o)?o:Object.prototype.toString.call(o)}function wc(o){return o>255?255:o<0?0:Math.round(o)}function q(){if(w.isUnminified)return function(o,e){return x._isNumber(o)||x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),o}}function wl(o){if(w.isUnminified)return function(e,n){let l=x._isNumber(e),s=x._isArray(e)&&e.length==o;return!l&&!s&&x.warn(Aa(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+o+")"),e}}function ao(){if(w.isUnminified)return function(o,e){return x._isNumber(o)||o==="auto"||x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),o}}function Za(){if(w.isUnminified)return function(o,e){return x._isString(o)||x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),o}}function Vc(){if(w.isUnminified)return function(o,e){const n=x._isString(o),l=Object.prototype.toString.call(o)==="[object CanvasGradient]"||o&&o.addColorStop;return n||l||x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),o}}function pd(){if(w.isUnminified)return function(o,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&o instanceof n||(x._isArray(o)?o.forEach(function(l){x._isNumber(l)||x.warn('"'+e+'" attribute has non numeric element '+l+". Make sure that all elements are numbers.")}):x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),o}}function Ge(){if(w.isUnminified)return function(o,e){return o===!0||o===!1||x.warn(Aa(o)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),o}}function md(o){if(w.isUnminified)return function(e,n){return e==null||x.isObject(e)||x.warn(Aa(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+o),e}}const mi="get",vi="set",E={addGetterSetter(o,e,n,l,s){E.addGetter(o,e,n),E.addSetter(o,e,l,s),E.addOverloadedGetterSetter(o,e)},addGetter(o,e,n){const l=mi+x._capitalize(e);o.prototype[l]=o.prototype[l]||function(){const s=this.attrs[e];return s===void 0?n:s}},addSetter(o,e,n,l){const s=vi+x._capitalize(e);o.prototype[s]||E.overWriteSetter(o,e,n,l)},overWriteSetter(o,e,n,l){const s=vi+x._capitalize(e);o.prototype[s]=function(u){return n&&u!==void 0&&u!==null&&(u=n.call(this,u,e)),this._setAttr(e,u),l&&l.call(this),this}},addComponentsGetterSetter(o,e,n,l,s){const u=n.length,c=x._capitalize,f=mi+c(e),g=vi+c(e);o.prototype[f]=function(){const m={};for(let S=0;S<u;S++){const y=n[S];m[y]=this.getAttr(e+c(y))}return m};const p=md(n);o.prototype[g]=function(m){const S=this.attrs[e];l&&(m=l.call(this,m,e)),p&&p.call(this,m,e);for(const y in m)m.hasOwnProperty(y)&&this._setAttr(e+c(y),m[y]);return m||n.forEach(y=>{this._setAttr(e+c(y),void 0)}),this._fireChangeEvent(e,S,m),s&&s.call(this),this},E.addOverloadedGetterSetter(o,e)},addOverloadedGetterSetter(o,e){const n=x._capitalize(e),l=vi+n,s=mi+n;o.prototype[e]=function(){return arguments.length?(this[l](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(o,e,n,l){x.error("Adding deprecated "+e);const s=mi+x._capitalize(e),u=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[s]=function(){x.error(u);const c=this.attrs[e];return c===void 0?n:c},E.addSetter(o,e,l,function(){x.error(u)}),E.addOverloadedGetterSetter(o,e)},backCompat(o,e){x.each(e,function(n,l){const s=o.prototype[l],u=mi+x._capitalize(n),c=vi+x._capitalize(n);function f(){s.apply(this,arguments),x.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}o.prototype[n]=f,o.prototype[u]=f,o.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function vd(o){const e=/(\w+)\(([^)]+)\)/g;let n;for(;(n=e.exec(o))!==null;){const[,l,s]=n;switch(l){case"blur":{const u=parseFloat(s.replace("px",""));return function(c){this.blurRadius(u*.5);const f=w.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const u=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(u);const f=w.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const u=parseFloat(s);return function(c){const f=100*(Math.sqrt(u)-1);this.contrast(f);const g=w.Filters;g&&g.Contrast&&g.Contrast.call(this,c)}}case"grayscale":return function(u){const c=w.Filters;c&&c.Grayscale&&c.Grayscale.call(this,u)};case"sepia":return function(u){const c=w.Filters;c&&c.Sepia&&c.Sepia.call(this,u)};case"invert":return function(u){const c=w.Filters;c&&c.Invert&&c.Invert.call(this,u)};default:x.warn(`CSS filter "${l}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Ul="absoluteOpacity",Rl="allEventListeners",Ie="absoluteTransform",dc="absoluteScale",Pa="canvas",yd="Change",Sd="children",_d="konva",jr="listening",Ed="mouseenter",Cd="mouseleave",bd="pointerenter",Td="pointerleave",xd="touchenter",Ad="touchleave",gc="set",pc="Shape",Ll=" ",mc="stage",ba="transform",Md="Stage",Kr="visible",Rd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ll);let Nd=1;class X{constructor(e){this._id=Nd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ba||e===Ie)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let l=this._cache.get(e);return(l===void 0||(e===ba||e===Ie)&&l.dirty===!0)&&(l=n.call(this),this._cache.set(e,l)),l}_calculate(e,n,l){if(!this._attachedDepsListeners.get(e)){const s=n.map(u=>u+"Change.konva").join(Ll);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,l)}_getCanvasCache(){return this._cache.get(Pa)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ie&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Pa)){const{scene:e,filter:n,hit:l,buffer:s}=this._cache.get(Pa);x.releaseCanvas(e,n,l,s),this._cache.delete(Pa)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let l={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(l=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(n.width||l.width),u=Math.ceil(n.height||l.height),c=n.pixelRatio,f=n.x===void 0?Math.floor(l.x):n.x,g=n.y===void 0?Math.floor(l.y):n.y,p=n.offset||0,m=n.drawBorder||!1,S=n.hitCanvasPixelRatio||1;if(!s||!u){x.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(l.x)-f)>.5?1:0,b=Math.abs(Math.round(l.y)-g)>.5?1:0;s+=p*2+y,u+=p*2+b,f-=p,g-=p;const _=new xa({pixelRatio:c,width:s,height:u}),G=new xa({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),N=new eo({pixelRatio:S,width:s,height:u}),D=_.getContext(),R=N.getContext(),H=new xa({width:_.width/_.pixelRatio+Math.abs(f),height:_.height/_.pixelRatio+Math.abs(g),pixelRatio:_.pixelRatio}),z=H.getContext();return N.isCache=!0,_.isCache=!0,this._cache.delete(Pa),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,G.getContext()._context.imageSmoothingEnabled=!1),D.save(),R.save(),z.save(),D.translate(-f,-g),R.translate(-f,-g),z.translate(-f,-g),H.x=f,H.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Ul),this._clearSelfAndDescendantCache(dc),this.drawScene(_,this,H),this.drawHit(N,this),this._isUnderCache=!1,D.restore(),R.restore(),m&&(D.save(),D.beginPath(),D.rect(0,0,s,u),D.closePath(),D.setAttr("strokeStyle","red"),D.setAttr("lineWidth",5),D.stroke(),D.restore()),this._cache.set(Pa,{scene:_,filter:G,hit:N,buffer:H,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Pa)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const l=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,u=1/0,c=-1/0,f=-1/0;const g=this.getAbsoluteTransform(n);return l.forEach(function(p){const m=g.point(p);s===void 0&&(s=c=m.x,u=f=m.y),s=Math.min(s,m.x),u=Math.min(u,m.y),c=Math.max(c,m.x),f=Math.max(f,m.y)}),{x:s,y:u,width:c-s,height:f-u}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const l=this._getCachedSceneCanvas(),s=l.pixelRatio;e.drawImage(l._canvas,0,0,l.width/s,l.height/s),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),l=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(l._canvas,0,0,l.width/l.pixelRatio,l.height/l.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),l=n.scene,s=n.filter,u=s.getContext(),c,f,g,p;if(!e||e.length===0)return l;if(this._filterUpToDate)return s;let m=!0;for(let y=0;y<e.length;y++)if(typeof e[y]=="string"&&uc(),typeof e[y]!="string"||!uc()){m=!1;break}const S=l.pixelRatio;if(s.setSize(l.width/l.pixelRatio,l.height/l.pixelRatio),m){const y=e.join(" ");return u.save(),u.setAttr("filter",y),u.drawImage(l._canvas,0,0,l.getWidth()/S,l.getHeight()/S),u.restore(),this._filterUpToDate=!0,s}try{for(c=e.length,u.clear(),u.drawImage(l._canvas,0,0,l.getWidth()/S,l.getHeight()/S),f=u.getImageData(0,0,s.getWidth(),s.getHeight()),g=0;g<c;g++)p=e[g],typeof p=="string"&&(p=vd(p)),p.call(this,f),u.putImageData(f,0,0)}catch(y){x.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(e,n){if(this._cache&&this._cache.delete(Rl),arguments.length===3)return this._delegate.apply(this,arguments);const l=e.split(Ll);for(let s=0;s<l.length;s++){const c=l[s].split("."),f=c[0],g=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:n})}return this}off(e,n){let l=(e||"").split(Ll),s=l.length,u,c,f,g,p,m;if(this._cache&&this._cache.delete(Rl),!e)for(c in this.eventListeners)this._off(c);for(u=0;u<s;u++)if(f=l[u],g=f.split("."),p=g[0],m=g[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(l){n.call(this,l.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,l){const s=this;this.on(e,function(u){const c=u.target.findAncestors(n,!0,s);for(let f=0;f<c.length;f++)u=x.cloneObject(u),u.currentTarget=c[f],l.call(c[f],u)})}remove(){return this.isDragging()&&this.stopDrag(),yt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ie),this._clearSelfAndDescendantCache(Ul),this._clearSelfAndDescendantCache(dc),this._clearSelfAndDescendantCache(mc),this._clearSelfAndDescendantCache(Kr),this._clearSelfAndDescendantCache(jr)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+x._capitalize(e);return x._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,l;if(!e)return this;for(n in e)n!==Sd&&(l=gc+x._capitalize(n),x._isFunction(this[l])?this[l](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(jr,this._isListening)}_isListening(e){if(!this.listening())return!1;const l=this.getParent();return l&&l!==e&&this!==e?l._isListening(e):!0}isVisible(){return this._getCache(Kr,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const l=this.getParent();return l&&l!==e&&this!==e?l._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const l=this.getLayer();let s=!1;yt._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===l)&&(s=!0)});const u=!n&&!w.hitOnDragEnabled&&(s||w.isTransforming());return this.isListening()&&this.isVisible()&&!u}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,l=0,s,u,c,f;function g(m){for(s=[],u=m.length,c=0;c<u;c++)f=m[c],l++,f.nodeType!==pc&&(s=s.concat(f.getChildren().slice())),f._id===n._id&&(c=u);s.length>0&&s[0].getDepth()<=e&&g(s)}const p=this.getStage();return n.nodeType!==Md&&p&&g(p.getChildren()),l}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ba),this._clearSelfAndDescendantCache(Ie)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const l=this.getAbsoluteTransform().copy();return l.invert(),l.point(n)}getAbsolutePosition(e){let n=!1,l=this.parent;for(;l;){if(l.isCached()){n=!0;break}l=l.parent}n&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),u=new ve,c=this.offset();return u.m=s.slice(),u.translate(c.x,c.y),u.getTranslation()}setAbsolutePosition(e){const{x:n,y:l,...s}=this._clearTransform();this.attrs.x=n,this.attrs.y=l,this._clearCache(ba);const u=this._getAbsoluteTransform().copy();return u.invert(),u.translate(e.x,e.y),e={x:this.attrs.x+u.getTranslation().x,y:this.attrs.y+u.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(ba),this._clearSelfAndDescendantCache(Ie),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,l=e.y,s=this.x(),u=this.y();return n!==void 0&&(s+=n),l!==void 0&&(u+=l),this.setPosition({x:s,y:u}),this}_eachAncestorReverse(e,n){let l=[],s=this.getParent(),u,c;if(!(n&&n._id===this._id)){for(l.unshift(this);s&&(!n||s._id!==n._id);)l.unshift(s),s=s.parent;for(u=l.length,c=0;c<u;c++)e(l[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return x.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return x.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return x.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return x.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return x.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&x.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Ul,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,l,s,u,c;const f={attrs:{},className:this.getClassName()};for(n in e)l=e[n],c=x.isObject(l)&&!x._isPlainObject(l)&&!x._isArray(l),!c&&(s=typeof this[n]=="function"&&this[n],delete e[n],u=s?s.call(this):null,e[n]=l,u!==l&&(f.attrs[n]=l));return x._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,l){const s=[];n&&this._isMatch(e)&&s.push(this);let u=this.parent;for(;u;){if(u===l)return s;u._isMatch(e)&&s.push(u),u=u.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,l){return this.findAncestors(e,n,l)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),l=n.length,s,u;for(s=0;s<l;s++)if(u=n[s],x.isValidSelector(u)||(x.warn('Selector "'+u+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),x.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),x.warn("Konva is awesome, right?")),u.charAt(0)==="#"){if(this.id()===u.slice(1))return!0}else if(u.charAt(0)==="."){if(this.hasName(u.slice(1)))return!0}else if(this.className===u||this.nodeType===u)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(mc,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},l){return n.target=n.target||this,l?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ie,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new ve,this._eachAncestorReverse(function(l){const s=l.transformsEnabled();s==="all"?n.multiply(l.getTransform()):s==="position"&&n.translate(l.x()-l.offsetX(),l.y()-l.offsetY())},e),n;{n=this._cache.get(Ie)||new ve,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const l=this.transformsEnabled();if(l==="all")n.multiply(this.getTransform());else if(l==="position"){const s=this.attrs.x||0,u=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(s-c,u-f)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ba,this._getTransform)}_getTransform(){var e,n;const l=this._cache.get(ba)||new ve;l.reset();const s=this.x(),u=this.y(),c=w.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,g=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,S=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||u!==0)&&l.translate(s,u),c!==0&&l.rotate(c),(p!==0||m!==0)&&l.skew(p,m),(f!==1||g!==1)&&l.scale(f,g),(S!==0||y!==0)&&l.translate(-1*S,-1*y),l.dirty=!1,l}clone(e){let n=x.cloneObject(this.attrs),l,s,u,c,f;for(l in e)n[l]=e[l];const g=new this.constructor(n);for(l in this.eventListeners)for(s=this.eventListeners[l],u=s.length,c=0;c<u;c++)f=s[c],f.name.indexOf(_d)<0&&(g.eventListeners[l]||(g.eventListeners[l]=[]),g.eventListeners[l].push(f));return g}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),l=this.getStage(),s=e.x!==void 0?e.x:Math.floor(n.x),u=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,f=new xa({width:e.width||Math.ceil(n.width)||(l?l.width():0),height:e.height||Math.ceil(n.height)||(l?l.height():0),pixelRatio:c}),g=f.getContext(),p=new xa({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(u),pixelRatio:f.pixelRatio});return e.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(s||u)&&g.translate(-1*s,-1*u),this.drawScene(f,void 0,p),g.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,l=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,l);return e.callback&&e.callback(s),s}toImage(e){return new Promise((n,l)=>{try{const s=e?.callback;s&&delete e.callback,x._urlToImage(this.toDataURL(e),function(u){n(u),s?.(u)})}catch(s){l(s)}})}toBlob(e){return new Promise((n,l)=>{try{const s=e?.callback;s&&delete e.callback,this.toCanvas(e).toBlob(u=>{n(u),s?.(u)},e?.mimeType,e?.quality)}catch(s){l(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():w.dragDistance}_off(e,n,l){let s=this.eventListeners[e],u,c,f;for(u=0;u<s.length;u++)if(c=s[u].name,f=s[u].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!l||l===f)){if(s.splice(u,1),s.length===0){delete this.eventListeners[e];break}u--}}_fireChangeEvent(e,n,l){this._fire(e+yd,{oldVal:n,newVal:l})}addName(e){if(!this.hasName(e)){const n=this.name(),l=n?n+" "+e:e;this.name(l)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),l=n.indexOf(e);return l!==-1&&(n.splice(l,1),this.name(n.join(" "))),this}setAttr(e,n){const l=this[gc+x._capitalize(e)];return x._isFunction(l)?l.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(w.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){const l=this.attrs[e];l===n&&!x.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,l,n),this._requestDraw())}_setComponentAttr(e,n,l){let s;l!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=l,this._fireChangeEvent(e,s,l))}_fireAndBubble(e,n,l){n&&this.nodeType===pc&&(n.target=this);const s=[Ed,Cd,bd,Td,xd,Ad];if(!(s.indexOf(e)!==-1&&(l&&(this===l||this.isAncestorOf&&this.isAncestorOf(l))||this.nodeType==="Stage"&&!l))){this._fire(e,n);const c=s.indexOf(e)!==-1&&l&&l.isAncestorOf&&l.isAncestorOf(this)&&!l.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!c&&(l&&l.parent?this._fireAndBubble.call(this.parent,e,n,l):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,l,s;const u=(n=this._cache.get(Rl))!==null&&n!==void 0?n:{};let c=u?.[e];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(s=(l=f.eventListeners)===null||l===void 0?void 0:l[e])!==null&&s!==void 0?s:[];c.push(...g),f=Object.getPrototypeOf(f)}u[e]=c,this._cache.set(Rl,u)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const l=this._getProtoListeners(e);if(l)for(let u=0;u<l.length;u++)l[u].handler.call(this,n);const s=this.eventListeners[e];if(s)for(let u=0;u<s.length;u++)s[u].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,l=this.getStage(),s=this.getAbsolutePosition();if(!l)return;const u=l._getPointerById(n)||l._changedPointerPositions[0]||s;yt._dragElements.set(this._id,{node:this,startPointerPos:u,offset:{x:u.x-s.x,y:u.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){yt._dragElements.has(this._id)||this._createDragElement(e);const l=yt._dragElements.get(this._id);l.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const l=this.getStage()._getPointerById(n.pointerId);if(!l)return;let s={x:l.x-n.offset.x,y:l.y-n.offset.y};const u=this.dragBoundFunc();if(u!==void 0){const c=u.call(this,s,e);c?s=c:x.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const n=yt._dragElements.get(this._id);n&&(n.dragStatus="stopped"),yt._endDragBefore(e),yt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=yt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||w.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let s=!1;yt._dragElements.forEach(u=>{this.isAncestorOf(u.node)&&(s=!0)}),s||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=yt._dragElements.get(this._id),l=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";l?this.stopDrag():s&&yt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const l={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return x.haveIntersection(l,this.getClientRect())}static create(e,n){return x._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let l=X.prototype.getClassName.call(e),s=e.children,u,c,f;n&&(e.attrs.container=n),w[l]||(x.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape");const g=w[l];if(u=new g(e.attrs),s)for(c=s.length,f=0;f<c;f++)u.add(X._createNode(s[f]));return u}}X.prototype.nodeType="Node";X.prototype._attrsAffectingSize=[];X.prototype.eventListeners={};X.prototype.on.call(X.prototype,Rd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ba),this._clearSelfAndDescendantCache(Ie)});X.prototype.on.call(X.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Kr)});X.prototype.on.call(X.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(jr)});X.prototype.on.call(X.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Ul)});const Ct=E.addGetterSetter;Ct(X,"zIndex");Ct(X,"absolutePosition");Ct(X,"position");Ct(X,"x",0,q());Ct(X,"y",0,q());Ct(X,"globalCompositeOperation","source-over",Za());Ct(X,"opacity",1,q());Ct(X,"name","",Za());Ct(X,"id","",Za());Ct(X,"rotation",0,q());E.addComponentsGetterSetter(X,"scale",["x","y"]);Ct(X,"scaleX",1,q());Ct(X,"scaleY",1,q());E.addComponentsGetterSetter(X,"skew",["x","y"]);Ct(X,"skewX",0,q());Ct(X,"skewY",0,q());E.addComponentsGetterSetter(X,"offset",["x","y"]);Ct(X,"offsetX",0,q());Ct(X,"offsetY",0,q());Ct(X,"dragDistance",void 0,q());Ct(X,"width",0,q());Ct(X,"height",0,q());Ct(X,"listening",!0,Ge());Ct(X,"preventDefault",!0,Ge());Ct(X,"filters",void 0,function(o){return this._filterUpToDate=!1,o});Ct(X,"visible",!0,Ge());Ct(X,"transformsEnabled","all",Za());Ct(X,"size");Ct(X,"dragBoundFunc");Ct(X,"draggable",!1,Ge());E.backCompat(X,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ye extends X{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let l=0;l<e.length;l++)this.add(e[l]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const l=[];return this._descendants(s=>{const u=s._isMatch(e);return u&&l.push(s),!!(u&&n)}),l}_descendants(e){let n=!1;const l=this.getChildren();for(const s of l){if(n=e(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){const e=X.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=X.prototype.clone.call(this,e);return this.getChildren().forEach(function(l){n.add(l.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(e)&&n.push(l)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(l){l._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,l){n.index=l}),this._requestDraw()}drawScene(e,n,l){const s=this.getLayer(),u=e||s&&s.getCanvas(),c=u&&u.getContext(),f=this._getCanvasCache(),g=f&&f.scene,p=u&&u.isCache;if(!this.isVisible()&&!p)return this;if(g){c.save();const m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",u,n,l);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const l=this.getLayer(),s=e||l&&l.hitCanvas,u=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){u.save();const g=this.getAbsoluteTransform(n).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,l,s){var u;const c=n&&n.getContext(),f=this.clipWidth(),g=this.clipHeight(),p=this.clipFunc(),m=typeof f=="number"&&typeof g=="number"||p,S=l===this;if(m){c.save();const b=this.getAbsoluteTransform(l);let _=b.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let G;if(p)G=p.call(this,c,this);else{const N=this.clipX(),D=this.clipY();c.rect(N||0,D||0,f,g)}c.clip.apply(c,G),_=b.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!S&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(c.save(),c._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(b){b[e](n,l,s)}),y&&c.restore(),m&&c.restore()}getClientRect(e={}){var n;const l=e.skipTransform,s=e.relativeTo;let u,c,f,g,p={x:1/0,y:1/0,width:0,height:0};const m=this;(n=this.children)===null||n===void 0||n.forEach(function(b){if(!b.visible())return;const _=b.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(u===void 0?(u=_.x,c=_.y,f=_.x+_.width,g=_.y+_.height):(u=Math.min(u,_.x),c=Math.min(c,_.y),f=Math.max(f,_.x+_.width),g=Math.max(g,_.y+_.height)))});const S=this.find("Shape");let y=!1;for(let b=0;b<S.length;b++)if(S[b]._isVisible(this)){y=!0;break}return y&&u!==void 0?p={x:u,y:c,width:f-u,height:g-c}:p={x:0,y:0,width:0,height:0},l?p:this._transformedRect(p,s)}}E.addComponentsGetterSetter(ye,"clip",["x","y","width","height"]);E.addGetterSetter(ye,"clipX",void 0,q());E.addGetterSetter(ye,"clipY",void 0,q());E.addGetterSetter(ye,"clipWidth",void 0,q());E.addGetterSetter(ye,"clipHeight",void 0,q());E.addGetterSetter(ye,"clipFunc");const Ri=new Map,jc=w._global.PointerEvent!==void 0;function Gr(o){return Ri.get(o)}function no(o){return{evt:o,pointerId:o.pointerId}}function Kc(o,e){return Ri.get(o)===e}function Pc(o,e){Ti(o),e.getStage()&&(Ri.set(o,e),jc&&e._fire("gotpointercapture",no(new PointerEvent("gotpointercapture"))))}function Ti(o,e){const n=Ri.get(o);if(!n)return;const l=n.getStage();l&&l.content,Ri.delete(o),jc&&n._fire("lostpointercapture",no(new PointerEvent("lostpointercapture")))}const Od="Stage",Dd="string",vc="px",Gd="mouseout",Qc="mouseleave",Zc="mouseover",Jc="mouseenter",Fc="mousemove",kc="mousedown",Wc="mouseup",Si="pointermove",_i="pointerdown",Hn="pointerup",Ei="pointercancel",zd="lostpointercapture",Nl="pointerout",Ci="pointerleave",Ol="pointerover",Dl="pointerenter",Pr="contextmenu",Ic="touchstart",$c="touchend",t0="touchmove",e0="touchcancel",Qr="wheel",Hd=5,Bd=[[Jc,"_pointerenter"],[kc,"_pointerdown"],[Fc,"_pointermove"],[Wc,"_pointerup"],[Qc,"_pointerleave"],[Ic,"_pointerdown"],[t0,"_pointermove"],[$c,"_pointerup"],[e0,"_pointercancel"],[Zc,"_pointerover"],[Qr,"_wheel"],[Pr,"_contextmenu"],[_i,"_pointerdown"],[Si,"_pointermove"],[Hn,"_pointerup"],[Ei,"_pointercancel"],[Ci,"_pointerleave"],[zd,"_lostpointercapture"]],zr={mouse:{[Nl]:Gd,[Ci]:Qc,[Ol]:Zc,[Dl]:Jc,[Si]:Fc,[_i]:kc,[Hn]:Wc,[Ei]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Nl]:"touchout",[Ci]:"touchleave",[Ol]:"touchover",[Dl]:"touchenter",[Si]:t0,[_i]:Ic,[Hn]:$c,[Ei]:e0,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Nl]:Nl,[Ci]:Ci,[Ol]:Ol,[Dl]:Dl,[Si]:Si,[_i]:_i,[Hn]:Hn,[Ei]:Ei,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},bi=o=>o.indexOf("pointer")>=0?"pointer":o.indexOf("touch")>=0?"touch":"mouse",On=o=>{const e=bi(o);if(e==="pointer")return w.pointerEventsEnabled&&zr.pointer;if(e==="touch")return zr.touch;if(e==="mouse")return zr.mouse};function yc(o={}){return(o.clipFunc||o.clipWidth||o.clipHeight)&&x.warn("Stage does not support clipping. Please use clip for Layers or Groups."),o}const Ud="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",xi=[];let Vl=class extends ye{constructor(e){super(yc(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),xi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{yc(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",l=e.getType()==="FastLayer";n||l||x.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Dd){let n;if(e.charAt(0)==="."){const l=e.slice(1);e=document.getElementsByClassName(l)[0]}else e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n);if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,n=e.length;for(let l=0;l<n;l++)e[l].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),ye.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&x._isInDocument(e)&&this.container().removeChild(e);const n=xi.indexOf(this);return n>-1&&xi.splice(n,1),x.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(x.warn(Ud),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const n=new xa({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),l=n.getContext()._context,s=this.children;return(e.x||e.y)&&l.translate(-1*e.x,-1*e.y),s.forEach(function(u){if(!u.isVisible())return;const c=u._toKonvaCanvas(e);l.drawImage(c._canvas,e.x,e.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),n}getIntersection(e){if(!e)return null;const n=this.children,l=n.length,s=l-1;for(let u=s;u>=0;u--){const c=n[u].getIntersection(e);if(c)return c}return null}_resizeDOM(){const e=this.width(),n=this.height();this.content&&(this.content.style.width=e+vc,this.content.style.height=n+vc),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(l=>{l.setSize({width:e,height:n}),l.draw()})}add(e,...n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(e);const l=this.children.length;return l>Hd&&x.warn("The stage has "+l+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),w.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Kc(e,this)}setPointerCapture(e){Pc(e,this)}releaseCapture(e){Ti(e)}getLayers(){return this.children}_bindContentEvents(){w.isBrowser&&Bd.forEach(([e,n])=>{this.content.addEventListener(e,l=>{this[n](l)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=On(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=On(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=On(e.type),l=bi(e.type);if(!n)return;this.setPointersPositions(e);const s=this._getTargetShape(l),u=!(w.isDragging()||w.isTransforming())||w.hitOnDragEnabled;s&&u?(s._fireAndBubble(n.pointerout,{evt:e}),s._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[l+"targetShape"]=null):u&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const n=On(e.type),l=bi(e.type);if(!n)return;this.setPointersPositions(e);let s=!1;this._changedPointerPositions.forEach(u=>{const c=this.getIntersection(u);if(yt.justDragged=!1,w["_"+l+"ListenClick"]=!0,!c||!c.isListening()){this[l+"ClickStartShape"]=void 0;return}w.capturePointerEventsEnabled&&c.setPointerCapture(u.id),this[l+"ClickStartShape"]=c,c._fireAndBubble(n.pointerdown,{evt:e,pointerId:u.id}),s=!0;const f=e.type.indexOf("touch")>=0;c.preventDefault()&&e.cancelable&&f&&e.preventDefault()}),s||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const n=On(e.type),l=bi(e.type);if(!n)return;const s=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(w.isDragging()&&yt.node.preventDefault()&&e.cancelable&&s&&e.preventDefault(),this.setPointersPositions(e),!(!(w.isDragging()||w.isTransforming())||w.hitOnDragEnabled))return;const c={};let f=!1;const g=this._getTargetShape(l);this._changedPointerPositions.forEach(p=>{const m=Gr(p.id)||this.getIntersection(p),S=p.id,y={evt:e,pointerId:S},b=g!==m;if(b&&g&&(g._fireAndBubble(n.pointerout,{...y},m),g._fireAndBubble(n.pointerleave,{...y},m)),m){if(c[m._id])return;c[m._id]=!0}m&&m.isListening()?(f=!0,b&&(m._fireAndBubble(n.pointerover,{...y},g),m._fireAndBubble(n.pointerenter,{...y},g),this[l+"targetShape"]=m),m._fireAndBubble(n.pointermove,{...y})):g&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:S}),this[l+"targetShape"]=null)}),f||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=On(e.type),l=bi(e.type);if(!n)return;this.setPointersPositions(e);const s=this[l+"ClickStartShape"],u=this[l+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(g=>{const p=Gr(g.id)||this.getIntersection(g);if(p){if(p.releaseCapture(g.id),c[p._id])return;c[p._id]=!0}const m=g.id,S={evt:e,pointerId:m};let y=!1;w["_"+l+"InDblClickWindow"]?(y=!0,clearTimeout(this[l+"DblTimeout"])):yt.justDragged||(w["_"+l+"InDblClickWindow"]=!0,clearTimeout(this[l+"DblTimeout"])),this[l+"DblTimeout"]=setTimeout(function(){w["_"+l+"InDblClickWindow"]=!1},w.dblClickWindow),p&&p.isListening()?(f=!0,this[l+"ClickEndShape"]=p,p._fireAndBubble(n.pointerup,{...S}),w["_"+l+"ListenClick"]&&s&&s===p&&(p._fireAndBubble(n.pointerclick,{...S}),y&&u&&u===p&&p._fireAndBubble(n.pointerdblclick,{...S}))):(this[l+"ClickEndShape"]=null,f||(this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),w["_"+l+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:m}),y&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:m}))}),f||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),w["_"+l+"ListenClick"]=!1,e.cancelable&&l!=="touch"&&l!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Pr,{evt:e}):this._fire(Pr,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Qr,{evt:e}):this._fire(Qr,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=Gr(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Hn,no(e)),Ti(e.pointerId)}_lostpointercapture(e){Ti(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let l=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,u=>{this._pointerPositions.push({id:u.identifier,x:(u.clientX-n.left)/n.scaleX,y:(u.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,u=>{this._changedPointerPositions.push({id:u.identifier,x:(u.clientX-n.left)/n.scaleX,y:(u.clientY-n.top)/n.scaleY})})):(l=(e.clientX-n.left)/n.scaleX,s=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:l,y:s},this._pointerPositions=[{x:l,y:s,id:x._getFirstPointerId(e)}],this._changedPointerPositions=[{x:l,y:s,id:x._getFirstPointerId(e)}])}_setPointerPosition(e){x.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new xa({width:this.width(),height:this.height()}),this.bufferHitCanvas=new eo({pixelRatio:1,width:this.width(),height:this.height()}),!w.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return x.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Vl.prototype.nodeType=Od;Dt(Vl);E.addGetterSetter(Vl,"container");w.isBrowser&&document.addEventListener("visibilitychange",()=>{xi.forEach(o=>{o.batchDraw()})});const a0="hasShadow",n0="shadowRGBA",i0="patternImage",l0="linearGradient",s0="radialGradient";let Gl;function Hr(){return Gl||(Gl=x.createCanvasElement().getContext("2d"),Gl)}const Ai={};function Ld(o){const e=this.attrs.fillRule;e?o.fill(e):o.fill()}function Yd(o){o.stroke()}function Xd(o){const e=this.attrs.fillRule;e?o.fill(e):o.fill()}function qd(o){o.stroke()}function wd(){this._clearCache(a0)}function Vd(){this._clearCache(n0)}function jd(){this._clearCache(i0)}function Kd(){this._clearCache(l0)}function Pd(){this._clearCache(s0)}class U extends X{constructor(e){super(e);let n;for(;n=x.getRandomColor(),!(n&&!(n in Ai)););this.colorKey=n,Ai[n]=this}getContext(){return x.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return x.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(a0,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(i0,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=Hr().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const l=new ve;l.translate(this.fillPatternX(),this.fillPatternY()),l.rotate(w.getAngle(this.fillPatternRotation())),l.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),l.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=l.getMatrix(),u=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);n.setTransform(u)}return n}}_getLinearGradient(){return this._getCache(l0,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const n=Hr(),l=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),u=n.createLinearGradient(l.x,l.y,s.x,s.y);for(let c=0;c<e.length;c+=2)u.addColorStop(e[c],e[c+1]);return u}}_getRadialGradient(){return this._getCache(s0,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const n=Hr(),l=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),u=n.createRadialGradient(l.x,l.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<e.length;c+=2)u.addColorStop(e[c],e[c+1]);return u}}getShadowRGBA(){return this._getCache(n0,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=x.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const n=this.getStage();if(!n)return!1;const l=n.bufferHitCanvas;return l.getContext().clear(),this.drawHit(l,void 0,!0),l.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return X.prototype.destroy.call(this),delete Ai[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const s=e||this.hasFill(),u=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&u&&c)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(s&&u&&f&&g)}setStrokeHitEnabled(e){x.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=!1,l=this.getParent();for(;l;){if(l.isCached()){n=!0;break}l=l.getParent()}const s=e.skipTransform,u=e.relativeTo||n&&this.getStage()||void 0,c=this.getSelfRect(),g=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,p=c.width+g,m=c.height+g,S=!e.skipShadow&&this.hasShadow(),y=S?this.shadowOffsetX():0,b=S?this.shadowOffsetY():0,_=p+Math.abs(y),G=m+Math.abs(b),N=S&&this.shadowBlur()||0,D=_+N*2,R=G+N*2,H={width:D,height:R,x:-(g/2+N)+Math.min(y,0)+c.x,y:-(g/2+N)+Math.min(b,0)+c.y};return s?H:this._transformedRect(H,u)}drawScene(e,n,l){const s=this.getLayer(),u=e||s.getCanvas(),c=u.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),p=this.hasShadow();let m;const S=n===this;if(!this.isVisible()&&!S)return this;if(f){c.save();const y=this.getAbsoluteTransform(n).getMatrix();return c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!g)return this;if(c.save(),this._useBufferCanvas()){m=this.getStage();const y=l||m.bufferCanvas,b=y.getContext();b.clear(),b.save(),b._applyLineJoin(this),b._applyMiterLimit(this);const _=this.getAbsoluteTransform(n).getMatrix();b.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.call(this,b,this),b.restore();const G=y.pixelRatio;p&&c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(y._canvas,y.x||0,y.y||0,y.width/G,y.height/G)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!S){const y=this.getAbsoluteTransform(n).getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}p&&c._applyShadow(this),g.call(this,c,this)}return c.restore(),this}drawHit(e,n,l=!1){if(!this.shouldDrawHit(n,l))return this;const s=this.getLayer(),u=e||s.hitCanvas,c=u&&u.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),p=g&&g.hit;if(this.colorKey||x.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){c.save();const S=this.getAbsoluteTransform(n).getMatrix();return c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===n)){const S=this.getAbsoluteTransform(n).getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(e=0){const n=this._getCanvasCache(),l=this._getCachedSceneCanvas(),s=n.hit,u=s.getContext(),c=s.getWidth(),f=s.getHeight();u.clear(),u.drawImage(l._canvas,0,0,c,f);try{const g=u.getImageData(0,0,c,f),p=g.data,m=p.length,S=x._hexToRgb(this.colorKey);for(let y=0;y<m;y+=4)p[y+3]>e?(p[y]=S.r,p[y+1]=S.g,p[y+2]=S.b,p[y+3]=255):p[y+3]=0;u.putImageData(g,0,0)}catch(g){x.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return Kc(e,this)}setPointerCapture(e){Pc(e,this)}releaseCapture(e){Ti(e)}}U.prototype._fillFunc=Ld;U.prototype._strokeFunc=Yd;U.prototype._fillFuncHit=Xd;U.prototype._strokeFuncHit=qd;U.prototype._centroid=!1;U.prototype.nodeType="Shape";Dt(U);U.prototype.eventListeners={};U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",wd);U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Vd);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",jd);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Kd);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Pd);E.addGetterSetter(U,"stroke",void 0,Vc());E.addGetterSetter(U,"strokeWidth",2,q());E.addGetterSetter(U,"fillAfterStrokeEnabled",!1);E.addGetterSetter(U,"hitStrokeWidth","auto",ao());E.addGetterSetter(U,"strokeHitEnabled",!0,Ge());E.addGetterSetter(U,"perfectDrawEnabled",!0,Ge());E.addGetterSetter(U,"shadowForStrokeEnabled",!0,Ge());E.addGetterSetter(U,"lineJoin");E.addGetterSetter(U,"lineCap");E.addGetterSetter(U,"miterLimit");E.addGetterSetter(U,"sceneFunc");E.addGetterSetter(U,"hitFunc");E.addGetterSetter(U,"dash");E.addGetterSetter(U,"dashOffset",0,q());E.addGetterSetter(U,"shadowColor",void 0,Za());E.addGetterSetter(U,"shadowBlur",0,q());E.addGetterSetter(U,"shadowOpacity",1,q());E.addComponentsGetterSetter(U,"shadowOffset",["x","y"]);E.addGetterSetter(U,"shadowOffsetX",0,q());E.addGetterSetter(U,"shadowOffsetY",0,q());E.addGetterSetter(U,"fillPatternImage");E.addGetterSetter(U,"fill",void 0,Vc());E.addGetterSetter(U,"fillPatternX",0,q());E.addGetterSetter(U,"fillPatternY",0,q());E.addGetterSetter(U,"fillLinearGradientColorStops");E.addGetterSetter(U,"strokeLinearGradientColorStops");E.addGetterSetter(U,"fillRadialGradientStartRadius",0);E.addGetterSetter(U,"fillRadialGradientEndRadius",0);E.addGetterSetter(U,"fillRadialGradientColorStops");E.addGetterSetter(U,"fillPatternRepeat","repeat");E.addGetterSetter(U,"fillEnabled",!0);E.addGetterSetter(U,"strokeEnabled",!0);E.addGetterSetter(U,"shadowEnabled",!0);E.addGetterSetter(U,"dashEnabled",!0);E.addGetterSetter(U,"strokeScaleEnabled",!0);E.addGetterSetter(U,"fillPriority","color");E.addComponentsGetterSetter(U,"fillPatternOffset",["x","y"]);E.addGetterSetter(U,"fillPatternOffsetX",0,q());E.addGetterSetter(U,"fillPatternOffsetY",0,q());E.addComponentsGetterSetter(U,"fillPatternScale",["x","y"]);E.addGetterSetter(U,"fillPatternScaleX",1,q());E.addGetterSetter(U,"fillPatternScaleY",1,q());E.addComponentsGetterSetter(U,"fillLinearGradientStartPoint",["x","y"]);E.addComponentsGetterSetter(U,"strokeLinearGradientStartPoint",["x","y"]);E.addGetterSetter(U,"fillLinearGradientStartPointX",0);E.addGetterSetter(U,"strokeLinearGradientStartPointX",0);E.addGetterSetter(U,"fillLinearGradientStartPointY",0);E.addGetterSetter(U,"strokeLinearGradientStartPointY",0);E.addComponentsGetterSetter(U,"fillLinearGradientEndPoint",["x","y"]);E.addComponentsGetterSetter(U,"strokeLinearGradientEndPoint",["x","y"]);E.addGetterSetter(U,"fillLinearGradientEndPointX",0);E.addGetterSetter(U,"strokeLinearGradientEndPointX",0);E.addGetterSetter(U,"fillLinearGradientEndPointY",0);E.addGetterSetter(U,"strokeLinearGradientEndPointY",0);E.addComponentsGetterSetter(U,"fillRadialGradientStartPoint",["x","y"]);E.addGetterSetter(U,"fillRadialGradientStartPointX",0);E.addGetterSetter(U,"fillRadialGradientStartPointY",0);E.addComponentsGetterSetter(U,"fillRadialGradientEndPoint",["x","y"]);E.addGetterSetter(U,"fillRadialGradientEndPointX",0);E.addGetterSetter(U,"fillRadialGradientEndPointY",0);E.addGetterSetter(U,"fillPatternRotation",0);E.addGetterSetter(U,"fillRule",void 0,Za());E.backCompat(U,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Qd="#",Zd="beforeDraw",Jd="draw",r0=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Fd=r0.length;let Ja=class extends ye{constructor(e){super(e),this.canvas=new xa,this.hitCanvas=new eo({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){X.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!X.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(X.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(X.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return X.prototype.remove.call(this),e&&e.parentNode&&x._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&x.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),X.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){x.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){x.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,x.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,l=!1;for(;;){for(let s=0;s<Fd;s++){const u=r0[s],c=this._getIntersection({x:e.x+u.x*n,y:e.y+u.y*n}),f=c.shape;if(f)return f;if(l=!!c.antialiased,!c.antialiased)break}if(l)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,l=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=l[3];if(s===255){const u=x._rgbToHex(l[0],l[1],l[2]),c=Ai[Qd+u];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n,l){const s=this.getLayer(),u=e||s&&s.getCanvas();return this._fire(Zd,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),ye.prototype.drawScene.call(this,u,n,l),this._fire(Jd,{node:this}),this}drawHit(e,n){const l=this.getLayer(),s=e||l&&l.hitCanvas;return l&&l.clearBeforeDraw()&&l.getHitCanvas().getContext().clear(),ye.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return x.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ja.prototype.nodeType="Layer";Dt(Ja);E.addGetterSetter(Ja,"imageSmoothingEnabled",!0);E.addGetterSetter(Ja,"clearBeforeDraw",!0);E.addGetterSetter(Ja,"hitGraphEnabled",!0,Ge());class io extends Ja{constructor(e){super(e),this.listening(!1),x.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}io.prototype.nodeType="FastLayer";Dt(io);class Bn extends ye{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&x.throw("You may only add groups and shapes to groups.")}}Bn.prototype.nodeType="Group";Dt(Bn);const Br=function(){return Qa.performance&&Qa.performance.now?function(){return Qa.performance.now()}:function(){return new Date().getTime()}}();class Ae{constructor(e,n){this.id=Ae.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Br(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,l=n.length;for(let s=0;s<l;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Ae.animations,l=n.length;for(let s=0;s<l;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Br(),Ae._addAnimation(this),this}stop(){return Ae._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,l=this.animations,s=l.length;for(let u=0;u<s;u++)if(l[u].id===n){this.animations.splice(u,1);break}}static _runFrames(){const e={},n=this.animations;for(let l=0;l<n.length;l++){const s=n[l],u=s.layers,c=s.func;s._updateFrameObject(Br());const f=u.length;let g;if(c?g=c.call(s,s.frame)!==!1:g=!0,!!g)for(let p=0;p<f;p++){const m=u[p];m._id!==void 0&&(e[m._id]=m)}}for(const l in e)e.hasOwnProperty(l)&&e[l].batchDraw()}static _animationLoop(){const e=Ae;e.animations.length?(e._runFrames(),x.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,x.requestAnimFrame(this._animationLoop))}}Ae.animations=[];Ae.animIdCounter=0;Ae.animRunning=!1;const kd={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Wd=1,Sc=2,_c=3,Ec=["fill","stroke","shadowColor"];let Id=0;class $d{constructor(e,n,l,s,u,c,f){this.prop=e,this.propFunc=n,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=l,this._change=u-this.begin,this.pause()}fire(e){const n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Sc,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=_c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===Sc?this.setTime(e):this.state===_c&&this.setTime(this.duration-e)}pause(){this.state=Wd,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tt{constructor(e){const n=this,l=e.node,s=l._id,u=e.easing||Mi.Linear,c=!!e.yoyo;let f,g;typeof e.duration>"u"?f=.3:e.duration===0?f=.001:f=e.duration,this.node=l,this._id=Id++;const p=l.getLayer()||(l instanceof w.Stage?l.getLayers():null);p||x.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ae(function(){n.tween.onEnterFrame()},p),this.tween=new $d(g,function(m){n._tweenFunc(m)},u,0,1,f*1e3,c),this._addListeners(),Tt.attrs[s]||(Tt.attrs[s]={}),Tt.attrs[s][this._id]||(Tt.attrs[s][this._id]={}),Tt.tweens[s]||(Tt.tweens[s]={});for(g in e)kd[g]===void 0&&this._addAttr(g,e[g]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){const l=this.node,s=l._id;let u,c,f,g,p;const m=Tt.tweens[s][e];m&&delete Tt.attrs[s][m][e];let S=l.getAttr(e);if(x._isArray(n))if(u=[],c=Math.max(n.length,S.length),e==="points"&&n.length!==S.length&&(n.length>S.length?(g=S,S=x._prepareArrayForTween(S,n,l.closed())):(f=n,n=x._prepareArrayForTween(n,S,l.closed()))),e.indexOf("fill")===0)for(let y=0;y<c;y++)if(y%2===0)u.push(n[y]-S[y]);else{const b=x.colorToRGBA(S[y]);p=x.colorToRGBA(n[y]),S[y]=b,u.push({r:p.r-b.r,g:p.g-b.g,b:p.b-b.b,a:p.a-b.a})}else for(let y=0;y<c;y++)u.push(n[y]-S[y]);else Ec.indexOf(e)!==-1?(S=x.colorToRGBA(S),p=x.colorToRGBA(n),u={r:p.r-S.r,g:p.g-S.g,b:p.b-S.b,a:p.a-S.a}):u=n-S;Tt.attrs[s][this._id][e]={start:S,diff:u,end:n,trueEnd:f,trueStart:g},Tt.tweens[s][e]=this._id}_tweenFunc(e){const n=this.node,l=Tt.attrs[n._id][this._id];let s,u,c,f,g,p,m,S;for(s in l){if(u=l[s],c=u.start,f=u.diff,S=u.end,x._isArray(c))if(g=[],m=Math.max(c.length,S.length),s.indexOf("fill")===0)for(p=0;p<m;p++)p%2===0?g.push((c[p]||0)+f[p]*e):g.push("rgba("+Math.round(c[p].r+f[p].r*e)+","+Math.round(c[p].g+f[p].g*e)+","+Math.round(c[p].b+f[p].b*e)+","+(c[p].a+f[p].a*e)+")");else for(p=0;p<m;p++)g.push((c[p]||0)+f[p]*e);else Ec.indexOf(s)!==-1?g="rgba("+Math.round(c.r+f.r*e)+","+Math.round(c.g+f.g*e)+","+Math.round(c.b+f.b*e)+","+(c.a+f.a*e)+")":g=c+f*e;n.setAttr(s,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,n=Tt.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,n=Tt.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,n=this._id,l=Tt.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const s in l)delete Tt.tweens[e][s];delete Tt.attrs[e][n],Tt.tweens[e]&&(Object.keys(Tt.tweens[e]).length===0&&delete Tt.tweens[e],Object.keys(Tt.attrs[e]).length===0&&delete Tt.attrs[e])}}Tt.attrs={};Tt.tweens={};X.prototype.to=function(o){const e=o.onFinish;o.node=this,o.onFinish=function(){this.destroy(),e&&e()},new Tt(o).play()};const Mi={BackEaseIn(o,e,n,l){return n*(o/=l)*o*((1.70158+1)*o-1.70158)+e},BackEaseOut(o,e,n,l){return n*((o=o/l-1)*o*((1.70158+1)*o+1.70158)+1)+e},BackEaseInOut(o,e,n,l){let s=1.70158;return(o/=l/2)<1?n/2*(o*o*(((s*=1.525)+1)*o-s))+e:n/2*((o-=2)*o*(((s*=1.525)+1)*o+s)+2)+e},ElasticEaseIn(o,e,n,l,s,u){let c=0;return o===0?e:(o/=l)===1?e+n:(u||(u=l*.3),!s||s<Math.abs(n)?(s=n,c=u/4):c=u/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(o-=1))*Math.sin((o*l-c)*(2*Math.PI)/u))+e)},ElasticEaseOut(o,e,n,l,s,u){let c=0;return o===0?e:(o/=l)===1?e+n:(u||(u=l*.3),!s||s<Math.abs(n)?(s=n,c=u/4):c=u/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*o)*Math.sin((o*l-c)*(2*Math.PI)/u)+n+e)},ElasticEaseInOut(o,e,n,l,s,u){let c=0;return o===0?e:(o/=l/2)===2?e+n:(u||(u=l*(.3*1.5)),!s||s<Math.abs(n)?(s=n,c=u/4):c=u/(2*Math.PI)*Math.asin(n/s),o<1?-.5*(s*Math.pow(2,10*(o-=1))*Math.sin((o*l-c)*(2*Math.PI)/u))+e:s*Math.pow(2,-10*(o-=1))*Math.sin((o*l-c)*(2*Math.PI)/u)*.5+n+e)},BounceEaseOut(o,e,n,l){return(o/=l)<1/2.75?n*(7.5625*o*o)+e:o<2/2.75?n*(7.5625*(o-=1.5/2.75)*o+.75)+e:o<2.5/2.75?n*(7.5625*(o-=2.25/2.75)*o+.9375)+e:n*(7.5625*(o-=2.625/2.75)*o+.984375)+e},BounceEaseIn(o,e,n,l){return n-Mi.BounceEaseOut(l-o,0,n,l)+e},BounceEaseInOut(o,e,n,l){return o<l/2?Mi.BounceEaseIn(o*2,0,n,l)*.5+e:Mi.BounceEaseOut(o*2-l,0,n,l)*.5+n*.5+e},EaseIn(o,e,n,l){return n*(o/=l)*o+e},EaseOut(o,e,n,l){return-n*(o/=l)*(o-2)+e},EaseInOut(o,e,n,l){return(o/=l/2)<1?n/2*o*o+e:-n/2*(--o*(o-2)-1)+e},StrongEaseIn(o,e,n,l){return n*(o/=l)*o*o*o*o+e},StrongEaseOut(o,e,n,l){return n*((o=o/l-1)*o*o*o*o+1)+e},StrongEaseInOut(o,e,n,l){return(o/=l/2)<1?n/2*o*o*o*o*o+e:n/2*((o-=2)*o*o*o*o+2)+e},Linear(o,e,n,l){return n*o/l+e}},Un=x._assign(w,{Util:x,Transform:ve,Node:X,Container:ye,Stage:Vl,stages:xi,Layer:Ja,FastLayer:io,Group:Bn,DD:yt,Shape:U,shapes:Ai,Animation:Ae,Tween:Tt,Easings:Mi,Context:ql,Canvas:to});class $e extends U{_sceneFunc(e){const n=w.getAngle(this.angle()),l=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,l),e.arc(0,0,this.innerRadius(),n,0,!l),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),l=this.clockwise(),s=w.getAngle(l?360-this.angle():this.angle()),u=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),g=Math.sin(Math.min(s,Math.PI/2)),p=u*(u>0?e:n),m=c*n,S=f*(f>0?e:n),y=g*(g>0?n:e);return{x:p,y:l?-1*y:S,width:m-p,height:y-S}}}$e.prototype._centroid=!0;$e.prototype.className="Arc";$e.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Dt($e);E.addGetterSetter($e,"innerRadius",0,q());E.addGetterSetter($e,"outerRadius",0,q());E.addGetterSetter($e,"angle",0,q());E.addGetterSetter($e,"clockwise",!1,Ge());function Zr(o,e,n,l,s,u,c){const f=Math.sqrt(Math.pow(n-o,2)+Math.pow(l-e,2)),g=Math.sqrt(Math.pow(s-n,2)+Math.pow(u-l,2)),p=c*f/(f+g),m=c*g/(f+g),S=n-p*(s-o),y=l-p*(u-e),b=n+m*(s-o),_=l+m*(u-e);return[S,y,b,_]}function Cc(o,e){const n=o.length,l=[];for(let s=2;s<n-2;s+=2){const u=Zr(o[s-2],o[s-1],o[s],o[s+1],o[s+2],o[s+3],e);isNaN(u[0])||(l.push(u[0]),l.push(u[1]),l.push(o[s]),l.push(o[s+1]),l.push(u[2]),l.push(u[3]))}return l}let ta=class extends U{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),l=n.length,s=this.tension(),u=this.closed(),c=this.bezier();if(!l)return;let f=0;if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&l>4){const g=this.getTensionPoints(),p=g.length;for(f=u?0:4,u||e.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<p-2;)e.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);u||e.quadraticCurveTo(g[p-2],g[p-1],n[l-2],n[l-1])}else if(c)for(f=2;f<l;)e.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<l;f+=2)e.lineTo(n[f],n[f+1]);u?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Cc(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,l=this.tension(),s=Zr(e[n-2],e[n-1],e[0],e[1],e[2],e[3],l),u=Zr(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],l),c=Cc(e,l);return[s[2],s[3]].concat(c).concat([u[0],u[1],e[n-2],e[n-1],u[2],u[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],l=e[0],s=e[1],u=e[1],c,f;for(let g=0;g<e.length/2;g++)c=e[g*2],f=e[g*2+1],n=Math.min(n,c),l=Math.max(l,c),s=Math.min(s,f),u=Math.max(u,f);return{x:n,y:s,width:l-n,height:u-s}}};ta.prototype.className="Line";ta.prototype._attrsAffectingSize=["points","bezier","tension"];Dt(ta);E.addGetterSetter(ta,"closed",!1);E.addGetterSetter(ta,"bezier",!1);E.addGetterSetter(ta,"tension",0,q());E.addGetterSetter(ta,"points",[],pd());const t2=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e2=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a2=[[1],[1,1],[1,2,1],[1,3,3,1]],bc=(o,e,n)=>{let l,s;const c=n/2;l=0;for(let f=0;f<20;f++)s=c*t2[20][f]+c,l+=e2[20][f]*n2(o,e,s);return c*l},Tc=(o,e,n)=>{n===void 0&&(n=1);const l=o[0]-2*o[1]+o[2],s=e[0]-2*e[1]+e[2],u=2*o[1]-2*o[0],c=2*e[1]-2*e[0],f=4*(l*l+s*s),g=4*(l*u+s*c),p=u*u+c*c;if(f===0)return n*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(e[2]-e[0],2));const m=g/(2*f),S=p/f,y=n+m,b=S-m*m,_=y*y+b>0?Math.sqrt(y*y+b):0,G=m*m+b>0?Math.sqrt(m*m+b):0,N=m+Math.sqrt(m*m+b)!==0?b*Math.log(Math.abs((y+_)/(m+G))):0;return Math.sqrt(f)/2*(y*_-m*G+N)};function n2(o,e,n){const l=Jr(1,n,o),s=Jr(1,n,e),u=l*l+s*s;return Math.sqrt(u)}const Jr=(o,e,n)=>{const l=n.length-1;let s,u;if(l===0)return 0;if(o===0){u=0;for(let c=0;c<=l;c++)u+=a2[l][c]*Math.pow(1-e,l-c)*Math.pow(e,c)*n[c];return u}else{s=new Array(l);for(let c=0;c<l;c++)s[c]=l*(n[c+1]-n[c]);return Jr(o-1,e,s)}},xc=(o,e,n)=>{let l=1,s=o/e,u=(o-n(s))/e,c=0;for(;l>.001;){const f=n(s+u),g=Math.abs(o-f)/e;if(g<l)l=g,s+=u;else{const p=n(s-u),m=Math.abs(o-p)/e;m<l?(l=m,s-=u):u/=2}if(c++,c>500)break}return s};class xt extends U{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=xt.parsePathData(this.data()),this.pathLength=xt.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let l=!1;for(let s=0;s<n.length;s++){const u=n[s].command,c=n[s].points;switch(u){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],g=c[1],p=c[2],m=c[3],S=c[4],y=c[5],b=c[6],_=c[7],G=p>m?p:m,N=p>m?1:p/m,D=p>m?m/p:1;e.translate(f,g),e.rotate(b),e.scale(N,D),e.arc(0,0,G,S,S+y,1-_),e.scale(1/N,1/D),e.rotate(-b),e.translate(-f,-g);break;case"z":l=!0,e.closePath();break}}!l&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(g){if(g.command==="A"){const p=g.points[4],m=g.points[5],S=g.points[4]+m;let y=Math.PI/180;if(Math.abs(p-S)<y&&(y=Math.abs(p-S)),m<0)for(let b=p-y;b>S;b-=y){const _=xt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);e.push(_.x,_.y)}else for(let b=p+y;b<S;b+=y){const _=xt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);e.push(_.x,_.y)}}else if(g.command==="C")for(let p=0;p<=1;p+=.01){const m=xt.getPointOnCubicBezier(p,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);e.push(m.x,m.y)}else e=e.concat(g.points)});let n=e[0],l=e[0],s=e[1],u=e[1],c,f;for(let g=0;g<e.length/2;g++)c=e[g*2],f=e[g*2+1],isNaN(c)||(n=Math.min(n,c),l=Math.max(l,c)),isNaN(f)||(s=Math.min(s,f),u=Math.max(u,f));return{x:n,y:s,width:l-n,height:u-s}}getLength(){return this.pathLength}getPointAtLength(e){return xt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,l,s){return Math.sqrt((l-e)*(l-e)+(s-n)*(s-n))}static getPathLength(e){let n=0;for(let l=0;l<e.length;++l)n+=e[l].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let l,s=0,u=n.length;if(!u)return null;for(;s<u&&e>n[s].pathLength;)e-=n[s].pathLength,++s;if(s===u)return l=n[s-1].points.slice(-2),{x:l[0],y:l[1]};if(e<.01)return n[s].command==="M"?(l=n[s].points.slice(0,2),{x:l[0],y:l[1]}):{x:n[s].start.x,y:n[s].start.y};const c=n[s],f=c.points;switch(c.command){case"L":return xt.getPointOnLine(e,c.start.x,c.start.y,f[0],f[1]);case"C":return xt.getPointOnCubicBezier(xc(e,xt.getPathLength(n),G=>bc([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],G)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return xt.getPointOnQuadraticBezier(xc(e,xt.getPathLength(n),G=>Tc([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],G)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],p=f[1],m=f[2],S=f[3],y=f[5],b=f[6];let _=f[4];return _+=y*e/c.pathLength,xt.getPointOnEllipticalArc(g,p,m,S,_,b)}return null}static getPointOnLine(e,n,l,s,u,c,f){c=c??n,f=f??l;const g=this.getLineLength(n,l,s,u);if(g<1e-10)return{x:n,y:l};if(s===n)return{x:c,y:f+(u>l?e:-e)};const p=(u-l)/(s-n),m=Math.sqrt(e*e/(1+p*p))*(s<n?-1:1),S=p*m;if(Math.abs(f-l-p*(c-n))<1e-10)return{x:c+m,y:f+S};const y=((c-n)*(s-n)+(f-l)*(u-l))/(g*g),b=n+y*(s-n),_=l+y*(u-l),G=this.getLineLength(c,f,b,_),N=Math.sqrt(e*e-G*G),D=Math.sqrt(N*N/(1+p*p))*(s<n?-1:1),R=p*D;return{x:b+D,y:_+R}}static getPointOnCubicBezier(e,n,l,s,u,c,f,g,p){function m(N){return N*N*N}function S(N){return 3*N*N*(1-N)}function y(N){return 3*N*(1-N)*(1-N)}function b(N){return(1-N)*(1-N)*(1-N)}const _=g*m(e)+c*S(e)+s*y(e)+n*b(e),G=p*m(e)+f*S(e)+u*y(e)+l*b(e);return{x:_,y:G}}static getPointOnQuadraticBezier(e,n,l,s,u,c,f){function g(b){return b*b}function p(b){return 2*b*(1-b)}function m(b){return(1-b)*(1-b)}const S=c*g(e)+s*p(e)+n*m(e),y=f*g(e)+u*p(e)+l*m(e);return{x:S,y}}static getPointOnEllipticalArc(e,n,l,s,u,c){const f=Math.cos(c),g=Math.sin(c),p={x:l*Math.cos(u),y:s*Math.sin(u)};return{x:e+(p.x*f-p.y*g),y:n+(p.x*g+p.y*f)}}static parsePathData(e){if(!e)return[];let n=e;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)n=n.replace(new RegExp(l[S],"g"),"|"+l[S]);const s=n.split("|"),u=[],c=[];let f=0,g=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(let S=1;S<s.length;S++){let y=s[S],b=y.charAt(0);for(y=y.slice(1),c.length=0;m=p.exec(y);)c.push(m[0]);let _=[],G=b==="A"||b==="a"?0:-1;for(let N=0,D=c.length;N<D;N++){const R=c[N];if(R==="00"){_.push(0,0),G>=0&&(G+=2,G>=7&&(G-=7));continue}if(G>=0){if(G===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(R)){_.push(parseInt(R[0],10)),_.push(parseInt(R[1],10)),_.push(parseFloat(R.slice(2))),G+=3,G>=7&&(G-=7);continue}if(R==="11"||R==="10"||R==="01"){_.push(parseInt(R[0],10)),_.push(parseInt(R[1],10)),G+=2,G>=7&&(G-=7);continue}if(R==="0"||R==="1"){_.push(parseInt(R,10)),G+=1,G>=7&&(G-=7);continue}}else if(G===4){if(/^[01]\d+(?:\.\d+)?$/.test(R)){_.push(parseInt(R[0],10)),_.push(parseFloat(R.slice(1))),G+=2,G>=7&&(G-=7);continue}if(R==="0"||R==="1"){_.push(parseInt(R,10)),G+=1,G>=7&&(G-=7);continue}}const H=parseFloat(R);isNaN(H)?_.push(0):_.push(H),G+=1,G>=7&&(G-=7)}else{const H=parseFloat(R);isNaN(H)?_.push(0):_.push(H)}}for(;_.length>0&&!isNaN(_[0]);){let N="",D=[];const R=f,H=g;let z,K,V,Q,Z,tt,it,st,j,et;switch(b){case"l":f+=_.shift(),g+=_.shift(),N="L",D.push(f,g);break;case"L":f=_.shift(),g=_.shift(),D.push(f,g);break;case"m":const W=_.shift(),k=_.shift();if(f+=W,g+=k,N="M",u.length>2&&u[u.length-1].command==="z"){for(let J=u.length-2;J>=0;J--)if(u[J].command==="M"){f=u[J].points[0]+W,g=u[J].points[1]+k;break}}D.push(f,g),b="l";break;case"M":f=_.shift(),g=_.shift(),N="M",D.push(f,g),b="L";break;case"h":f+=_.shift(),N="L",D.push(f,g);break;case"H":f=_.shift(),N="L",D.push(f,g);break;case"v":g+=_.shift(),N="L",D.push(f,g);break;case"V":g=_.shift(),N="L",D.push(f,g);break;case"C":D.push(_.shift(),_.shift(),_.shift(),_.shift()),f=_.shift(),g=_.shift(),D.push(f,g);break;case"c":D.push(f+_.shift(),g+_.shift(),f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="C",D.push(f,g);break;case"S":K=f,V=g,z=u[u.length-1],z.command==="C"&&(K=f+(f-z.points[2]),V=g+(g-z.points[3])),D.push(K,V,_.shift(),_.shift()),f=_.shift(),g=_.shift(),N="C",D.push(f,g);break;case"s":K=f,V=g,z=u[u.length-1],z.command==="C"&&(K=f+(f-z.points[2]),V=g+(g-z.points[3])),D.push(K,V,f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="C",D.push(f,g);break;case"Q":D.push(_.shift(),_.shift()),f=_.shift(),g=_.shift(),D.push(f,g);break;case"q":D.push(f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="Q",D.push(f,g);break;case"T":K=f,V=g,z=u[u.length-1],z.command==="Q"&&(K=f+(f-z.points[0]),V=g+(g-z.points[1])),f=_.shift(),g=_.shift(),N="Q",D.push(K,V,f,g);break;case"t":K=f,V=g,z=u[u.length-1],z.command==="Q"&&(K=f+(f-z.points[0]),V=g+(g-z.points[1])),f+=_.shift(),g+=_.shift(),N="Q",D.push(K,V,f,g);break;case"A":Q=_.shift(),Z=_.shift(),tt=_.shift(),it=_.shift(),st=_.shift(),j=f,et=g,f=_.shift(),g=_.shift(),N="A",D=this.convertEndpointToCenterParameterization(j,et,f,g,it,st,Q,Z,tt);break;case"a":Q=_.shift(),Z=_.shift(),tt=_.shift(),it=_.shift(),st=_.shift(),j=f,et=g,f+=_.shift(),g+=_.shift(),N="A",D=this.convertEndpointToCenterParameterization(j,et,f,g,it,st,Q,Z,tt);break}u.push({command:N||b,points:D,start:{x:R,y:H},pathLength:this.calcLength(R,H,N||b,D)})}(b==="z"||b==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(e,n,l,s){let u,c,f,g;const p=xt;switch(l){case"L":return p.getLineLength(e,n,s[0],s[1]);case"C":return bc([e,s[0],s[2],s[4]],[n,s[1],s[3],s[5]],1);case"Q":return Tc([e,s[0],s[2]],[n,s[1],s[3]],1);case"A":u=0;const m=s[4],S=s[5],y=s[4]+S;let b=Math.PI/180;if(Math.abs(m-y)<b&&(b=Math.abs(m-y)),c=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),S<0)for(g=m-b;g>y;g-=b)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],g,0),u+=p.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(g=m+b;g<y;g+=b)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],g,0),u+=p.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],y,0),u+=p.getLineLength(c.x,c.y,f.x,f.y),u}return 0}static convertEndpointToCenterParameterization(e,n,l,s,u,c,f,g,p){const m=p*(Math.PI/180),S=Math.cos(m)*(e-l)/2+Math.sin(m)*(n-s)/2,y=-1*Math.sin(m)*(e-l)/2+Math.cos(m)*(n-s)/2,b=S*S/(f*f)+y*y/(g*g);b>1&&(f*=Math.sqrt(b),g*=Math.sqrt(b));let _=Math.sqrt((f*f*(g*g)-f*f*(y*y)-g*g*(S*S))/(f*f*(y*y)+g*g*(S*S)));u===c&&(_*=-1),isNaN(_)&&(_=0);const G=_*f*y/g,N=_*-g*S/f,D=(e+l)/2+Math.cos(m)*G-Math.sin(m)*N,R=(n+s)/2+Math.sin(m)*G+Math.cos(m)*N,H=function(it){return Math.sqrt(it[0]*it[0]+it[1]*it[1])},z=function(it,st){return(it[0]*st[0]+it[1]*st[1])/(H(it)*H(st))},K=function(it,st){return(it[0]*st[1]<it[1]*st[0]?-1:1)*Math.acos(z(it,st))},V=K([1,0],[(S-G)/f,(y-N)/g]),Q=[(S-G)/f,(y-N)/g],Z=[(-1*S-G)/f,(-1*y-N)/g];let tt=K(Q,Z);return z(Q,Z)<=-1&&(tt=Math.PI),z(Q,Z)>=1&&(tt=0),c===0&&tt>0&&(tt=tt-2*Math.PI),c===1&&tt<0&&(tt=tt+2*Math.PI),[D,R,f,g,V,tt,m,c]}}xt.prototype.className="Path";xt.prototype._attrsAffectingSize=["data"];Dt(xt);E.addGetterSetter(xt,"data");class Fa extends ta{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,l=this.points();let s=l;const u=this.tension()!==0&&l.length>4;u&&(s=this.getTensionPoints());const c=this.pointerLength(),f=l.length;let g,p;if(u){const y=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],l[f-2],l[f-1]],b=xt.calcLength(s[s.length-4],s[s.length-3],"C",y),_=xt.getPointOnQuadraticBezier(Math.min(1,1-c/b),y[0],y[1],y[2],y[3],y[4],y[5]);g=l[f-2]-_.x,p=l[f-1]-_.y}else g=l[f-2]-l[f-4],p=l[f-1]-l[f-3];const m=(Math.atan2(p,g)+n)%n,S=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(l[f-2],l[f-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,S/2),e.lineTo(-c,-S/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(l[0],l[1]),u?(g=(s[0]+s[2])/2-l[0],p=(s[1]+s[3])/2-l[1]):(g=l[2]-l[0],p=l[3]-l[1]),e.rotate((Math.atan2(-p,-g)+n)%n),e.moveTo(0,0),e.lineTo(-c,S/2),e.lineTo(-c,-S/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}Fa.prototype.className="Arrow";Dt(Fa);E.addGetterSetter(Fa,"pointerLength",10,q());E.addGetterSetter(Fa,"pointerWidth",10,q());E.addGetterSetter(Fa,"pointerAtBeginning",!1);E.addGetterSetter(Fa,"pointerAtEnding",!0);class Ln extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ln.prototype._centroid=!0;Ln.prototype.className="Circle";Ln.prototype._attrsAffectingSize=["radius"];Dt(Ln);E.addGetterSetter(Ln,"radius",0,q());class Ma extends U{_sceneFunc(e){const n=this.radiusX(),l=this.radiusY();e.beginPath(),e.save(),n!==l&&e.scale(1,l/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ma.prototype.className="Ellipse";Ma.prototype._centroid=!0;Ma.prototype._attrsAffectingSize=["radiusX","radiusY"];Dt(Ma);E.addComponentsGetterSetter(Ma,"radius",["x","y"]);E.addGetterSetter(Ma,"radiusX",0,q());E.addGetterSetter(Ma,"radiusY",0,q());class Me extends U{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),l=this.getHeight(),s=this.cornerRadius(),u=this.attrs.image;let c;if(u){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?c=[u,this.cropX(),this.cropY(),f,g,0,0,n,l]:c=[u,0,0,n,l]}(this.hasFill()||this.hasStroke()||s)&&(e.beginPath(),s?x.drawRoundedRectPath(e,n,l,s):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)),u&&(s&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){const n=this.width(),l=this.height(),s=this.cornerRadius();e.beginPath(),s?x.drawRoundedRectPath(e,n,l,s):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,l=null){const s=x.createImageElement();s.onload=function(){const u=new Me({image:s});n(u)},s.onerror=l,s.crossOrigin="Anonymous",s.src=e}}Me.prototype.className="Image";Dt(Me);E.addGetterSetter(Me,"cornerRadius",0,wl(4));E.addGetterSetter(Me,"image");E.addComponentsGetterSetter(Me,"crop",["x","y","width","height"]);E.addGetterSetter(Me,"cropX",0,q());E.addGetterSetter(Me,"cropY",0,q());E.addGetterSetter(Me,"cropWidth",0,q());E.addGetterSetter(Me,"cropHeight",0,q());const o0=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i2="Change.konva",l2="none",Fr="up",kr="right",Wr="down",Ir="left",s2=o0.length;class lo extends Bn{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,l;const s=function(){n._sync()};for(l=0;l<s2;l++)e.on(o0[l]+i2,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),l,s,u,c,f,g,p;if(e&&n){switch(l=e.width(),s=e.height(),u=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),f=0,g=0,u){case Fr:f=l/2,g=-1*p;break;case kr:f=l+c,g=s/2;break;case Wr:f=l/2,g=s+p;break;case Ir:f=-1*c,g=s/2;break}n.setAttrs({x:-1*f,y:-1*g,width:l,height:s}),e.setAttrs({x:-1*f,y:-1*g})}}}lo.prototype.className="Label";Dt(lo);class ka extends U{_sceneFunc(e){const n=this.width(),l=this.height(),s=this.pointerDirection(),u=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let g=0,p=0,m=0,S=0;typeof f=="number"?g=p=m=S=Math.min(f,n/2,l/2):(g=Math.min(f[0]||0,n/2,l/2),p=Math.min(f[1]||0,n/2,l/2),S=Math.min(f[2]||0,n/2,l/2),m=Math.min(f[3]||0,n/2,l/2)),e.beginPath(),e.moveTo(g,0),s===Fr&&(e.lineTo((n-u)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+u)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),s===kr&&(e.lineTo(n,(l-c)/2),e.lineTo(n+u,l/2),e.lineTo(n,(l+c)/2)),e.lineTo(n,l-S),e.arc(n-S,l-S,S,0,Math.PI/2,!1),s===Wr&&(e.lineTo((n+u)/2,l),e.lineTo(n/2,l+c),e.lineTo((n-u)/2,l)),e.lineTo(m,l),e.arc(m,l-m,m,Math.PI/2,Math.PI,!1),s===Ir&&(e.lineTo(0,(l+c)/2),e.lineTo(-1*u,l/2),e.lineTo(0,(l-c)/2)),e.lineTo(0,g),e.arc(g,g,g,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,l=this.pointerWidth(),s=this.pointerHeight(),u=this.pointerDirection(),c=this.width(),f=this.height();return u===Fr?(n-=s,f+=s):u===Wr?f+=s:u===Ir?(e-=l*1.5,c+=l):u===kr&&(c+=l*1.5),{x:e,y:n,width:c,height:f}}}ka.prototype.className="Tag";Dt(ka);E.addGetterSetter(ka,"pointerDirection",l2);E.addGetterSetter(ka,"pointerWidth",0,q());E.addGetterSetter(ka,"pointerHeight",0,q());E.addGetterSetter(ka,"cornerRadius",0,wl(4));class Ni extends U{_sceneFunc(e){const n=this.cornerRadius(),l=this.width(),s=this.height();e.beginPath(),n?x.drawRoundedRectPath(e,l,s,n):e.rect(0,0,l,s),e.closePath(),e.fillStrokeShape(this)}}Ni.prototype.className="Rect";Dt(Ni);E.addGetterSetter(Ni,"cornerRadius",0,wl(4));class Ra extends U{_sceneFunc(e){const n=this._getPoints(),l=this.radius(),s=this.sides(),u=this.cornerRadius();if(e.beginPath(),u)x.drawRoundedPolygonPath(e,n,s,l,u);else{e.moveTo(n[0].x,n[0].y);for(let c=1;c<n.length;c++)e.lineTo(n[c].x,n[c].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,l=[];for(let s=0;s<e;s++)l.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return l}getSelfRect(){const e=this._getPoints();let n=e[0].x,l=e[0].y,s=e[0].x,u=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),l=Math.max(l,c.x),s=Math.min(s,c.y),u=Math.max(u,c.y)}),{x:n,y:s,width:l-n,height:u-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Ra.prototype.className="RegularPolygon";Ra.prototype._centroid=!0;Ra.prototype._attrsAffectingSize=["radius"];Dt(Ra);E.addGetterSetter(Ra,"radius",0,q());E.addGetterSetter(Ra,"sides",0,q());E.addGetterSetter(Ra,"cornerRadius",0,wl(4));const Ac=Math.PI*2;class Wa extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Ac,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Ac,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Wa.prototype.className="Ring";Wa.prototype._centroid=!0;Wa.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Dt(Wa);E.addGetterSetter(Wa,"innerRadius",0,q());E.addGetterSetter(Wa,"outerRadius",0,q());class Ye extends U{constructor(e){super(e),this._updated=!0,this.anim=new Ae(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),l=this.frameIndex(),s=l*4,u=this.animations()[n],c=this.frameOffsets(),f=u[s+0],g=u[s+1],p=u[s+2],m=u[s+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),S)if(c){const y=c[n],b=l*2;e.drawImage(S,f,g,p,m,y[b+0],y[b+1],p,m)}else e.drawImage(S,f,g,p,m,0,0,p,m)}_hitFunc(e){const n=this.animation(),l=this.frameIndex(),s=l*4,u=this.animations()[n],c=this.frameOffsets(),f=u[s+2],g=u[s+3];if(e.beginPath(),c){const p=c[n],m=l*2;e.rect(p[m+0],p[m+1],f,g)}else e.rect(0,0,f,g);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),l=this.animations(),s=l[n],u=s.length/4;e<u-1?this.frameIndex(e+1):this.frameIndex(0)}}Ye.prototype.className="Sprite";Dt(Ye);E.addGetterSetter(Ye,"animation");E.addGetterSetter(Ye,"animations");E.addGetterSetter(Ye,"frameOffsets");E.addGetterSetter(Ye,"image");E.addGetterSetter(Ye,"frameIndex",0,q());E.addGetterSetter(Ye,"frameRate",17,q());E.backCompat(Ye,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Na extends U{_sceneFunc(e){const n=this.innerRadius(),l=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-l);for(let u=1;u<s*2;u++){const c=u%2===0?l:n,f=c*Math.sin(u*Math.PI/s),g=-1*c*Math.cos(u*Math.PI/s);e.lineTo(f,g)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Na.prototype.className="Star";Na.prototype._centroid=!0;Na.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Dt(Na);E.addGetterSetter(Na,"numPoints",5,q());E.addGetterSetter(Na,"innerRadius",0,q());E.addGetterSetter(Na,"outerRadius",0,q());function Ta(o){return[...o].reduce((e,n,l,s)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const u=s[l+1];u&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(u)?(e.push(n+u),s[l+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(s[l+1]||""))?e.push(n+s[l+1]):l>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Dn="auto",r2="center",u0="inherit",Gn="justify",o2="Change.konva",u2="2d",Mc="-",h0="left",h2="text",c2="Text",f2="top",d2="bottom",Rc="middle",c0="normal",g2="px ",zl=" ",p2="right",Nc="rtl",m2="word",v2="char",Oc="none",Ur="",f0=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y2=f0.length;function S2(o){return o.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,l=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!l&&(e=`"${e}"`),e}).join(", ")}let Hl;function Lr(){return Hl||(Hl=x.createCanvasElement().getContext(u2),Hl)}function _2(o){o.fillText(this._partialText,this._partialTextX,this._partialTextY)}function E2(o){o.setAttr("miterLimit",2),o.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function C2(o){return o=o||{},!o.fillLinearGradientColorStops&&!o.fillRadialGradientColorStops&&!o.fillPatternImage&&(o.fill=o.fill||"black"),o}class Rt extends U{constructor(e){super(C2(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<y2;n++)this.on(f0[n]+o2,this._setTextData);this._setTextData()}_sceneFunc(e){var n,l;const s=this.textArr,u=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,p=this.verticalAlign(),m=this.direction(),S=0,y=this.align(),b=this.getWidth(),_=this.letterSpacing(),G=this.charRenderFunc(),N=this.fill(),D=this.textDecoration(),R=D.indexOf("underline")!==-1,H=D.indexOf("line-through")!==-1,z;m=m===u0?e.direction:m;let K=g/2,V=Rc;if(!w.legacyTextRendering){const Q=this.measureSize("M");V="alphabetic";const Z=(n=Q.fontBoundingBoxAscent)!==null&&n!==void 0?n:Q.actualBoundingBoxAscent,tt=(l=Q.fontBoundingBoxDescent)!==null&&l!==void 0?l:Q.actualBoundingBoxDescent;K=(Z-tt)/2+g/2}for(m===Nc&&e.setAttr("direction",m),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",V),e.setAttr("textAlign",h0),p===Rc?S=(this.getHeight()-u*g-c*2)/2:p===d2&&(S=this.getHeight()-u*g-c*2),e.translate(c,S+c),z=0;z<u;z++){let Q=0,Z=0;const tt=s[z],it=tt.text,st=tt.width,j=tt.lastInParagraph;if(e.save(),y===p2?Q+=b-st-c*2:y===r2&&(Q+=(b-st-c*2)/2),R){e.save(),e.beginPath();const et=w.legacyTextRendering?Math.round(f/2):Math.round(f/4),W=Q,k=K+Z+et;e.moveTo(W,k);const J=y===Gn&&!j?b-c*2:st;e.lineTo(W+Math.round(J),k),e.lineWidth=f/15;const At=this._getLinearGradient();e.strokeStyle=At||N,e.stroke(),e.restore()}if(m!==Nc&&(_!==0||y===Gn||G)){const et=it.split(" ").length-1,W=Ta(it);for(let k=0;k<W.length;k++){const J=W[k];if(J===" "&&!j&&y===Gn&&(Q+=(b-c*2-st)/et),this._partialTextX=Q,this._partialTextY=K+Z,this._partialText=J,G){e.save();const I=s.slice(0,z).reduce((Gt,gt)=>Gt+Ta(gt.text).length,0),ft=k+I;G({char:J,index:ft,x:Q,y:K+Z,lineIndex:z,column:k,isLastInLine:j,width:this.measureSize(J).width,context:e})}e.fillStrokeShape(this),G&&e.restore(),Q+=this.measureSize(J).width+_}}else _!==0&&e.setAttr("letterSpacing",`${_}px`),this._partialTextX=Q,this._partialTextY=K+Z,this._partialText=it,e.fillStrokeShape(this);if(H){e.save(),e.beginPath();const et=w.legacyTextRendering?0:-Math.round(f/4),W=y===Gn?0:Q;e.moveTo(W,K+Z+et);const k=y===Gn&&!j?b-c*2:st;e.lineTo(W+Math.round(k),K+Z+et),e.lineWidth=f/15;const J=this._getLinearGradient();e.strokeStyle=J||N,e.stroke(),e.restore()}e.restore(),u>1&&(K+=g)}}_hitFunc(e){const n=this.getWidth(),l=this.getHeight();e.beginPath(),e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=x._isString(e)?e:e==null?"":e+"";return this._setAttr(h2,n),this}getWidth(){return this.attrs.width===Dn||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Dn||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,l,s,u,c,f,g,p,m,S,y;let b=Lr(),_=this.fontSize(),G;b.save(),b.font=this._getContextFont(),G=b.measureText(e),b.restore();const N=_/100;return{actualBoundingBoxAscent:(n=G.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*N,actualBoundingBoxDescent:(l=G.actualBoundingBoxDescent)!==null&&l!==void 0?l:0,actualBoundingBoxLeft:(s=G.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*N,actualBoundingBoxRight:(u=G.actualBoundingBoxRight)!==null&&u!==void 0?u:75.732421875*N,alphabeticBaseline:(c=G.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=G.emHeightAscent)!==null&&f!==void 0?f:100*N,emHeightDescent:(g=G.emHeightDescent)!==null&&g!==void 0?g:-20*N,fontBoundingBoxAscent:(p=G.fontBoundingBoxAscent)!==null&&p!==void 0?p:91*N,fontBoundingBoxDescent:(m=G.fontBoundingBoxDescent)!==null&&m!==void 0?m:21*N,hangingBaseline:(S=G.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*N,ideographicBaseline:(y=G.ideographicBaseline)!==null&&y!==void 0?y:-21*N,width:G.width,height:_}}_getContextFont(){return this.fontStyle()+zl+this.fontVariant()+zl+(this.fontSize()+g2)+S2(this.fontFamily())}_addTextLine(e){this.align()===Gn&&(e=e.trim());const l=this._getTextWidth(e);return this.textArr.push({text:e,width:l,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),l=e.length;return Lr().measureText(e).width+n*l}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),l=0,s=this.lineHeight()*n,u=this.attrs.width,c=this.attrs.height,f=u!==Dn&&u!==void 0,g=c!==Dn&&c!==void 0,p=this.padding(),m=u-p*2,S=c-p*2,y=0,b=this.wrap(),_=b!==Oc,G=b!==v2&&_,N=this.ellipsis();this.textArr=[],Lr().font=this._getContextFont();const D=N?this._getTextWidth(Ur):0;for(let R=0,H=e.length;R<H;++R){let z=e[R],K=this._getTextWidth(z);if(f&&K>m)for(;z.length>0;){let V=0,Q=Ta(z).length,Z="",tt=0;for(;V<Q;){const it=V+Q>>>1,st=Ta(z),j=st.slice(0,it+1).join(""),et=this._getTextWidth(j);(N&&g&&y+s>S?et+D:et)<=m?(V=it+1,Z=j,tt=et):Q=it}if(Z){if(G){const j=Ta(z),et=Ta(Z),W=j[et.length],k=W===zl||W===Mc;let J;if(k&&tt<=m)J=et.length;else{const At=et.lastIndexOf(zl),I=et.lastIndexOf(Mc);J=Math.max(At,I)+1}J>0&&(V=J,Z=j.slice(0,V).join(""),tt=this._getTextWidth(Z))}if(Z=Z.trimRight(),this._addTextLine(Z),l=Math.max(l,tt),y+=s,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(z=Ta(z).slice(V).join("").trimLeft(),z.length>0&&(K=this._getTextWidth(z),K<=m)){this._addTextLine(z),y+=s,l=Math.max(l,K);break}}else break}else this._addTextLine(z),y+=s,l=Math.max(l,K),this._shouldHandleEllipsis(y)&&R<H-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&y+s>S)break}this.textHeight=n,this.textWidth=l}_shouldHandleEllipsis(e){const n=+this.fontSize(),l=this.lineHeight()*n,s=this.attrs.height,u=s!==Dn&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==Oc)||u&&e+l>f}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Dn&&e!==void 0,l=this.padding(),s=e-l*2,u=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!u||(n&&(this._getTextWidth(c.text+Ur)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+Ur))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Rt.prototype._fillFunc=_2;Rt.prototype._strokeFunc=E2;Rt.prototype.className=c2;Rt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Dt(Rt);E.overWriteSetter(Rt,"width",ao());E.overWriteSetter(Rt,"height",ao());E.addGetterSetter(Rt,"direction",u0);E.addGetterSetter(Rt,"fontFamily","Arial");E.addGetterSetter(Rt,"fontSize",12,q());E.addGetterSetter(Rt,"fontStyle",c0);E.addGetterSetter(Rt,"fontVariant",c0);E.addGetterSetter(Rt,"padding",0,q());E.addGetterSetter(Rt,"align",h0);E.addGetterSetter(Rt,"verticalAlign",f2);E.addGetterSetter(Rt,"lineHeight",1,q());E.addGetterSetter(Rt,"wrap",m2);E.addGetterSetter(Rt,"ellipsis",!1,Ge());E.addGetterSetter(Rt,"letterSpacing",0,q());E.addGetterSetter(Rt,"text","",Za());E.addGetterSetter(Rt,"textDecoration","");E.addGetterSetter(Rt,"charRenderFunc",void 0);const b2="",d0="normal";function g0(o){o.fillText(this.partialText,0,0)}function p0(o){o.strokeText(this.partialText,0,0)}class Kt extends U{constructor(e){super(e),this.dummyCanvas=x.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return xt.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e>n?null:xt.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=xt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),l=this.fill(),s=this.fontSize(),u=this.glyphInfo;n==="underline"&&e.beginPath();for(let c=0;c<u.length;c++){e.save();const f=u[c].p0;e.translate(f.x,f.y),e.rotate(u[c].rotation),this.partialText=u[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=l,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const l=n[0].p0;e.moveTo(l.x,l.y)}for(let l=0;l<n.length;l++){const s=n[l].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Rt.prototype.setText.call(this,e)}_getContextFont(){return Rt.prototype._getContextFont.call(this)}_getTextSize(e){const l=this.dummyCanvas.getContext("2d");l.save(),l.font=this._getContextFont();const s=l.measureText(e);return l.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=Ta(this.text()),n=[];let l=0;for(let S=0;S<e.length;S++)n.push({char:e[S],width:this._getTextSize(e[S]).width}),l+=n[S].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=l,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const u=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*u,0);let p=0;c==="center"&&(p=Math.max(0,this.pathLength/2-g/2)),c==="right"&&(p=Math.max(0,this.pathLength-g));let m=p;for(let S=0;S<n.length;S++){const y=this._getPointAtLength(m);if(!y)return;const b=n[S].char;let _=n[S].width+u;if(b===" "&&c==="justify"){const z=this.text().split(" ").length-1;_+=(this.pathLength-g)/z}const G=this._getPointAtLength(m+_);if(!G)return;const N=xt.getLineLength(y.x,y.y,G.x,G.y);let D=0;if(f)try{D=f(n[S-1].char,b)*this.fontSize()}catch{D=0}y.x+=D,G.x+=D,this.textWidth+=D;const R=xt.getPointOnLine(D+N/2,y.x,y.y,G.x,G.y),H=Math.atan2(G.y-y.y,G.x-y.x);this.glyphInfo.push({transposeX:R.x,transposeY:R.y,text:e[S],rotation:H,p0:y,p1:G}),m+=_}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(p){e.push(p.p0.x),e.push(p.p0.y),e.push(p.p1.x),e.push(p.p1.y)});let n=e[0]||0,l=e[0]||0,s=e[1]||0,u=e[1]||0,c,f;for(let p=0;p<e.length/2;p++)c=e[p*2],f=e[p*2+1],n=Math.min(n,c),l=Math.max(l,c),s=Math.min(s,f),u=Math.max(u,f);const g=this.fontSize();return{x:n-g/2,y:s-g/2,width:l-n+g,height:u-s+g}}destroy(){return x.releaseCanvas(this.dummyCanvas),super.destroy()}}Kt.prototype._fillFunc=g0;Kt.prototype._strokeFunc=p0;Kt.prototype._fillFuncHit=g0;Kt.prototype._strokeFuncHit=p0;Kt.prototype.className="TextPath";Kt.prototype._attrsAffectingSize=["text","fontSize","data"];Dt(Kt);E.addGetterSetter(Kt,"data");E.addGetterSetter(Kt,"fontFamily","Arial");E.addGetterSetter(Kt,"fontSize",12,q());E.addGetterSetter(Kt,"fontStyle",d0);E.addGetterSetter(Kt,"align","left");E.addGetterSetter(Kt,"letterSpacing",0,q());E.addGetterSetter(Kt,"textBaseline","middle");E.addGetterSetter(Kt,"fontVariant",d0);E.addGetterSetter(Kt,"text",b2);E.addGetterSetter(Kt,"textDecoration","");E.addGetterSetter(Kt,"kerningFunc",void 0);const m0="tr-konva",T2=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(o=>o+`.${m0}`).join(" "),Dc="nodesRect",x2=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],A2={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},M2="ontouchstart"in w._global;function R2(o,e,n){if(o==="rotater")return n;e+=x.degToRad(A2[o]||0);const l=(x.radToDeg(e)%360+360)%360;return x._inRange(l,315+22.5,360)||x._inRange(l,0,22.5)?"ns-resize":x._inRange(l,45-22.5,45+22.5)?"nesw-resize":x._inRange(l,90-22.5,90+22.5)?"ew-resize":x._inRange(l,135-22.5,135+22.5)?"nwse-resize":x._inRange(l,180-22.5,180+22.5)?"ns-resize":x._inRange(l,225-22.5,225+22.5)?"nesw-resize":x._inRange(l,270-22.5,270+22.5)?"ew-resize":x._inRange(l,315-22.5,315+22.5)?"nwse-resize":(x.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}const Yl=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function N2(o){return{x:o.x+o.width/2*Math.cos(o.rotation)+o.height/2*Math.sin(-o.rotation),y:o.y+o.height/2*Math.cos(o.rotation)+o.width/2*Math.sin(o.rotation)}}function v0(o,e,n){const l=n.x+(o.x-n.x)*Math.cos(e)-(o.y-n.y)*Math.sin(e),s=n.y+(o.x-n.x)*Math.sin(e)+(o.y-n.y)*Math.cos(e);return{...o,rotation:o.rotation+e,x:l,y:s}}function O2(o,e){const n=N2(o);return v0(o,e,n)}function D2(o,e,n){let l=e;for(let s=0;s<o.length;s++){const u=w.getAngle(o[s]),c=Math.abs(u-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(l=u)}return l}let $r=0;class ct extends Bn{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(T2,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return x.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return m0+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(s=>s.isAncestorOf(this)?(x.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const u=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,u)}s.on(x2.map(c=>c+`.${this._getEventNamespace()}`).join(" "),u),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,u),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,l=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(l,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,l=>{if(!n)return;const s=e.getAbsolutePosition(),u=s.x-n.x,c=s.y-n.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+u,y:g.y+c}),f.startDrag(l)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Dc),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Dc,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),l){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=e.getAbsoluteScale(l),c=e.getAbsolutePosition(l),f=s.x*u.x-e.offsetX()*u.x,g=s.y*u.y-e.offsetY()*u.y,p=(w.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+f*Math.cos(p)+g*Math.sin(-p),y:c.y+g*Math.cos(p)+f*Math.sin(p),width:s.width*u.x,height:s.height*u.y,rotation:p};return v0(m,-w.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],y=p.getAbsoluteTransform();S.forEach(function(b){const _=y.point(b);n.push(_)})});const l=new ve;l.rotate(-w.getAngle(this.rotation()));let s=1/0,u=1/0,c=-1/0,f=-1/0;n.forEach(function(p){const m=l.point(p);s===void 0&&(s=c=m.x,u=f=m.y),s=Math.min(s,m.x),u=Math.min(u,m.y),c=Math.max(c,m.x),f=Math.max(f,m.y)}),l.invert();const g=l.point({x:s,y:u});return{x:g.x,y:g.y,width:c-s,height:f-u,rotation:w.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Yl.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new Ni({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:M2?10:"auto"}),l=this;n.on("mousedown touchstart",function(s){l._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{const s=w.getAngle(this.rotation()),u=this.rotateAnchorCursor(),c=R2(e,s,u);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new U({name:"back",width:0,height:0,sceneFunc(n,l){const s=l.getParent(),u=s.padding();n.beginPath(),n.rect(-u,-u,l.width()+u*2,l.height()+u*2),n.moveTo(l.width()/2,-u),s.rotateEnabled()&&s.rotateLineVisible()&&n.lineTo(l.width()/2,-s.rotateAnchorOffset()*x._sign(l.height())-u),n.fillStrokeShape(l)},hitFunc:(n,l)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();n.beginPath(),n.rect(-s,-s,l.width()+s*2,l.height()+s*2),n.fillStrokeShape(l)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),l=n.width,s=n.height,u=Math.sqrt(Math.pow(l,2)+Math.pow(s,2));this.sin=Math.abs(s/u),this.cos=Math.abs(l/u),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},$r++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:e.evt,target:g})})}_handleMouseMove(e){let n,l,s;const u=this.findOne("."+this._movingAnchorName),c=u.getStage();c.setPointersPositions(e);const f=c.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const p=u.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(p,g,e)),u.setAbsolutePosition(g);const m=u.getAbsolutePosition();if(p.x===m.x&&p.y===m.y)return;if(this._movingAnchorName==="rotater"){const R=this._getNodeRect();n=u.x()-R.width/2,l=-u.y()+R.height/2;let H=Math.atan2(-l,n)+Math.PI/2;R.height<0&&(H-=Math.PI);const K=w.getAngle(this.rotation())+H,V=w.getAngle(this.rotationSnapTolerance()),Z=D2(this.rotationSnaps(),K,V)-R.rotation,tt=O2(R,Z);this._fitNodesInto(tt,e);return}const S=this.shiftBehavior();let y;S==="inverted"?y=this.keepRatio()&&!e.shiftKey:S==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;let b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){const R=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(R.x-u.x(),2)+Math.pow(R.y-u.y(),2));const H=this.findOne(".top-left").x()>R.x?-1:1,z=this.findOne(".top-left").y()>R.y?-1:1;n=s*this.cos*H,l=s*this.sin*z,this.findOne(".top-left").x(R.x-n),this.findOne(".top-left").y(R.y-l)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(u.y());else if(this._movingAnchorName==="top-right"){if(y){const R=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(u.x()-R.x,2)+Math.pow(R.y-u.y(),2));const H=this.findOne(".top-right").x()<R.x?-1:1,z=this.findOne(".top-right").y()>R.y?-1:1;n=s*this.cos*H,l=s*this.sin*z,this.findOne(".top-right").x(R.x+n),this.findOne(".top-right").y(R.y-l)}var _=u.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(u.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(u.x());else if(this._movingAnchorName==="bottom-left"){if(y){const R=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(R.x-u.x(),2)+Math.pow(u.y()-R.y,2));const H=R.x<u.x()?-1:1,z=u.y()<R.y?-1:1;n=s*this.cos*H,l=s*this.sin*z,u.x(R.x-n),u.y(R.y+l)}_=u.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(u.y());else if(this._movingAnchorName==="bottom-right"){if(y){const R=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(u.x()-R.x,2)+Math.pow(u.y()-R.y,2));const H=this.findOne(".bottom-right").x()<R.x?-1:1,z=this.findOne(".bottom-right").y()<R.y?-1:1;n=s*this.cos*H,l=s*this.sin*z,this.findOne(".bottom-right").x(R.x+n),this.findOne(".bottom-right").y(R.y+l)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(b=this.centeredScaling()||e.altKey,b){const R=this.findOne(".top-left"),H=this.findOne(".bottom-right"),z=R.x(),K=R.y(),V=this.getWidth()-H.x(),Q=this.getHeight()-H.y();H.move({x:-z,y:-K}),R.move({x:V,y:Q})}const G=this.findOne(".top-left").getAbsolutePosition();n=G.x,l=G.y;const N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:l,width:N,height:D,rotation:w.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const l=this.getNode();$r--,this._fire("transformend",{evt:e,target:l}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),l&&this._nodes.forEach(s=>{var u;s._fire("transformend",{evt:e,target:s}),(u=s.getLayer())===null||u===void 0||u.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const l=this._getNodeRect(),s=1;if(x._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(x._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const u=new ve;if(u.rotate(w.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=u.point({x:-this.padding()*2,y:0});e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=u.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=u.point({x:0,y:-this.padding()*2});e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=u.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(l,e);y?e=y:x.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new ve;f.translate(l.x,l.y),f.rotate(l.rotation),f.scale(l.width/c,l.height/c);const g=new ve,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(g.translate(e.x,e.y),g.rotate(e.rotation),g.translate(e.width<0?e.width:0,e.height<0?e.height:0),g.scale(Math.abs(p),Math.abs(m))):(g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(p,m));const S=g.multiply(f.invert());this._nodes.forEach(y=>{var b;if(!y.getStage())return;const _=y.getParent().getAbsoluteTransform(),G=y.getTransform().copy();G.translate(y.offsetX(),y.offsetY());const N=new ve;N.multiply(_.copy().invert()).multiply(S).multiply(_).multiply(G);const D=N.decompose();y.setAttrs(D),(b=y.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(x._getRotation(e.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(x._getRotation(n.rotation));const l=n.width,s=n.height,u=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),p=this.find("._anchor");p.forEach(S=>{S.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:c&&u.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:l/2,y:0,offsetY:g/2+f,visible:c&&u.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:l,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:c&&u.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:g/2+f,visible:c&&u.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:l,y:s/2,offsetX:g/2-f,visible:c&&u.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:g/2+f,offsetY:g/2-f,visible:c&&u.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:l/2,y:s,offsetY:g/2-f,visible:c&&u.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:l,y:s,offsetX:g/2-f,offsetY:g/2-f,visible:c&&u.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:l/2,y:-this.rotateAnchorOffset()*x._sign(s)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:l,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(S=>S.draggable()),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(S=>{m(S)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Bn.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return X.prototype.toObject.call(this)}clone(e){return X.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ct.isTransforming=()=>$r>0;function G2(o){return o instanceof Array||x.warn("enabledAnchors value should be an array"),o instanceof Array&&o.forEach(function(e){Yl.indexOf(e)===-1&&x.warn("Unknown anchor name: "+e+". Available names are: "+Yl.join(", "))}),o||[]}ct.prototype.className="Transformer";Dt(ct);E.addGetterSetter(ct,"enabledAnchors",Yl,G2);E.addGetterSetter(ct,"flipEnabled",!0,Ge());E.addGetterSetter(ct,"resizeEnabled",!0);E.addGetterSetter(ct,"anchorSize",10,q());E.addGetterSetter(ct,"rotateEnabled",!0);E.addGetterSetter(ct,"rotateLineVisible",!0);E.addGetterSetter(ct,"rotationSnaps",[]);E.addGetterSetter(ct,"rotateAnchorOffset",50,q());E.addGetterSetter(ct,"rotateAnchorCursor","crosshair");E.addGetterSetter(ct,"rotationSnapTolerance",5,q());E.addGetterSetter(ct,"borderEnabled",!0);E.addGetterSetter(ct,"anchorStroke","rgb(0, 161, 255)");E.addGetterSetter(ct,"anchorStrokeWidth",1,q());E.addGetterSetter(ct,"anchorFill","white");E.addGetterSetter(ct,"anchorCornerRadius",0,q());E.addGetterSetter(ct,"borderStroke","rgb(0, 161, 255)");E.addGetterSetter(ct,"borderStrokeWidth",1,q());E.addGetterSetter(ct,"borderDash");E.addGetterSetter(ct,"keepRatio",!0);E.addGetterSetter(ct,"shiftBehavior","default");E.addGetterSetter(ct,"centeredScaling",!1);E.addGetterSetter(ct,"ignoreStroke",!1);E.addGetterSetter(ct,"padding",0,q());E.addGetterSetter(ct,"nodes");E.addGetterSetter(ct,"node");E.addGetterSetter(ct,"boundBoxFunc");E.addGetterSetter(ct,"anchorDragBoundFunc");E.addGetterSetter(ct,"anchorStyleFunc");E.addGetterSetter(ct,"shouldOverdrawWholeArea",!1);E.addGetterSetter(ct,"useSingleNodeRotation",!0);E.backCompat(ct,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class ea extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,w.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}ea.prototype.className="Wedge";ea.prototype._centroid=!0;ea.prototype._attrsAffectingSize=["radius"];Dt(ea);E.addGetterSetter(ea,"radius",0,q());E.addGetterSetter(ea,"angle",0,q());E.addGetterSetter(ea,"clockwise",!1);E.backCompat(ea,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Gc(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const z2=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],H2=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function B2(o,e){const n=o.data,l=o.width,s=o.height;let u,c,f,g,p,m,S,y,b,_,G,N,D,R,H,z,K,V,Q,Z;const tt=e+e+1,it=l-1,st=s-1,j=e+1,et=j*(j+1)/2,W=new Gc,k=z2[e],J=H2[e];let At=null,I=W,ft=null,Gt=null;for(let gt=1;gt<tt;gt++)I=I.next=new Gc,gt===j&&(At=I);I.next=W,f=c=0;for(let gt=0;gt<s;gt++){N=D=R=H=g=p=m=S=0,y=j*(z=n[c]),b=j*(K=n[c+1]),_=j*(V=n[c+2]),G=j*(Q=n[c+3]),g+=et*z,p+=et*K,m+=et*V,S+=et*Q,I=W;for(let Nt=0;Nt<j;Nt++)I.r=z,I.g=K,I.b=V,I.a=Q,I=I.next;for(let Nt=1;Nt<j;Nt++)u=c+((it<Nt?it:Nt)<<2),g+=(I.r=z=n[u])*(Z=j-Nt),p+=(I.g=K=n[u+1])*Z,m+=(I.b=V=n[u+2])*Z,S+=(I.a=Q=n[u+3])*Z,N+=z,D+=K,R+=V,H+=Q,I=I.next;ft=W,Gt=At;for(let Nt=0;Nt<l;Nt++)n[c+3]=Q=S*k>>J,Q!==0?(Q=255/Q,n[c]=(g*k>>J)*Q,n[c+1]=(p*k>>J)*Q,n[c+2]=(m*k>>J)*Q):n[c]=n[c+1]=n[c+2]=0,g-=y,p-=b,m-=_,S-=G,y-=ft.r,b-=ft.g,_-=ft.b,G-=ft.a,u=f+((u=Nt+e+1)<it?u:it)<<2,N+=ft.r=n[u],D+=ft.g=n[u+1],R+=ft.b=n[u+2],H+=ft.a=n[u+3],g+=N,p+=D,m+=R,S+=H,ft=ft.next,y+=z=Gt.r,b+=K=Gt.g,_+=V=Gt.b,G+=Q=Gt.a,N-=z,D-=K,R-=V,H-=Q,Gt=Gt.next,c+=4;f+=l}for(let gt=0;gt<l;gt++){D=R=H=N=p=m=S=g=0,c=gt<<2,y=j*(z=n[c]),b=j*(K=n[c+1]),_=j*(V=n[c+2]),G=j*(Q=n[c+3]),g+=et*z,p+=et*K,m+=et*V,S+=et*Q,I=W;for(let It=0;It<j;It++)I.r=z,I.g=K,I.b=V,I.a=Q,I=I.next;let Nt=l;for(let It=1;It<=e;It++)c=Nt+gt<<2,g+=(I.r=z=n[c])*(Z=j-It),p+=(I.g=K=n[c+1])*Z,m+=(I.b=V=n[c+2])*Z,S+=(I.a=Q=n[c+3])*Z,N+=z,D+=K,R+=V,H+=Q,I=I.next,It<st&&(Nt+=l);c=gt,ft=W,Gt=At;for(let It=0;It<s;It++)u=c<<2,n[u+3]=Q=S*k>>J,Q>0?(Q=255/Q,n[u]=(g*k>>J)*Q,n[u+1]=(p*k>>J)*Q,n[u+2]=(m*k>>J)*Q):n[u]=n[u+1]=n[u+2]=0,g-=y,p-=b,m-=_,S-=G,y-=ft.r,b-=ft.g,_-=ft.b,G-=ft.a,u=gt+((u=It+j)<st?u:st)*l<<2,g+=N+=ft.r=n[u],p+=D+=ft.g=n[u+1],m+=R+=ft.b=n[u+2],S+=H+=ft.a=n[u+3],ft=ft.next,y+=z=Gt.r,b+=K=Gt.g,_+=V=Gt.b,G+=Q=Gt.a,N-=z,D-=K,R-=V,H-=Q,Gt=Gt.next,c+=l}}const U2=function(e){const n=Math.round(this.blurRadius());n>0&&B2(e,n)};E.addGetterSetter(X,"blurRadius",0,q(),E.afterSetFilter);const L2=function(o){const e=this.brightness()*255,n=o.data,l=n.length;for(let s=0;s<l;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};E.addGetterSetter(X,"brightness",0,q(),E.afterSetFilter);const Y2=function(o){const e=this.brightness(),n=o.data,l=n.length;for(let s=0;s<l;s+=4)n[s]=Math.min(255,n[s]*e),n[s+1]=Math.min(255,n[s+1]*e),n[s+2]=Math.min(255,n[s+2]*e)},X2=function(o){const e=Math.pow((this.contrast()+100)/100,2),n=o.data,l=n.length;let s=150,u=150,c=150;for(let f=0;f<l;f+=4)s=n[f],u=n[f+1],c=n[f+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,u/=255,u-=.5,u*=e,u+=.5,u*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,s=s<0?0:s>255?255:s,u=u<0?0:u>255?255:u,c=c<0?0:c>255?255:c,n[f]=s,n[f+1]=u,n[f+2]=c};E.addGetterSetter(X,"contrast",0,q(),E.afterSetFilter);const q2=function(o){var e,n,l,s,u,c,f,g,p;const m=o.data,S=o.width,y=o.height,b=Math.min(1,Math.max(0,(n=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:.5)),_=Math.min(1,Math.max(0,(s=(l=this.embossWhiteLevel)===null||l===void 0?void 0:l.call(this))!==null&&s!==void 0?s:.5)),N=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(u=this.embossDirection)===null||u===void 0?void 0:u.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,D=!!((p=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&p!==void 0&&p),R=b*10,H=_*255,z=N*Math.PI/180,K=Math.cos(z),V=Math.sin(z),Q=128/1020*R,Z=new Uint8ClampedArray(m),tt=new Float32Array(S*y);for(let W=0,k=0;k<m.length;k+=4,W++)tt[W]=.2126*Z[k]+.7152*Z[k+1]+.0722*Z[k+2];const it=[-1,0,1,-2,0,2,-1,0,1],st=[-1,-2,-1,0,0,0,1,2,1],j=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],et=W=>W<0?0:W>255?255:W;for(let W=1;W<y-1;W++)for(let k=1;k<S-1;k++){const J=W*S+k;let At=0,I=0;At+=tt[J+j[0]]*it[0],I+=tt[J+j[0]]*st[0],At+=tt[J+j[1]]*it[1],I+=tt[J+j[1]]*st[1],At+=tt[J+j[2]]*it[2],I+=tt[J+j[2]]*st[2],At+=tt[J+j[3]]*it[3],I+=tt[J+j[3]]*st[3],At+=tt[J+j[5]]*it[5],I+=tt[J+j[5]]*st[5],At+=tt[J+j[6]]*it[6],I+=tt[J+j[6]]*st[6],At+=tt[J+j[7]]*it[7],I+=tt[J+j[7]]*st[7],At+=tt[J+j[8]]*it[8],I+=tt[J+j[8]]*st[8];const ft=K*At+V*I,Gt=et(H+ft*Q),gt=J*4;if(D){const Nt=Gt-H;m[gt]=et(Z[gt]+Nt),m[gt+1]=et(Z[gt+1]+Nt),m[gt+2]=et(Z[gt+2]+Nt),m[gt+3]=Z[gt+3]}else m[gt]=m[gt+1]=m[gt+2]=Gt,m[gt+3]=Z[gt+3]}for(let W=0;W<S;W++){let k=W*4,J=((y-1)*S+W)*4;m[k]=Z[k],m[k+1]=Z[k+1],m[k+2]=Z[k+2],m[k+3]=Z[k+3],m[J]=Z[J],m[J+1]=Z[J+1],m[J+2]=Z[J+2],m[J+3]=Z[J+3]}for(let W=1;W<y-1;W++){let k=W*S*4,J=(W*S+(S-1))*4;m[k]=Z[k],m[k+1]=Z[k+1],m[k+2]=Z[k+2],m[k+3]=Z[k+3],m[J]=Z[J],m[J+1]=Z[J+1],m[J+2]=Z[J+2],m[J+3]=Z[J+3]}return o};E.addGetterSetter(X,"embossStrength",.5,q(),E.afterSetFilter);E.addGetterSetter(X,"embossWhiteLevel",.5,q(),E.afterSetFilter);E.addGetterSetter(X,"embossDirection","top-left",void 0,E.afterSetFilter);E.addGetterSetter(X,"embossBlend",!1,void 0,E.afterSetFilter);function Yr(o,e,n,l,s){const u=n-e,c=s-l;if(u===0)return l+c/2;if(c===0)return l;let f=(o-e)/u;return f=c*f+l,f}const w2=function(o){const e=o.data,n=e.length;let l=e[0],s=l,u,c=e[1],f=c,g,p=e[2],m=p,S;const y=this.enhance();if(y===0)return;for(let H=0;H<n;H+=4)u=e[H+0],u<l?l=u:u>s&&(s=u),g=e[H+1],g<c?c=g:g>f&&(f=g),S=e[H+2],S<p?p=S:S>m&&(m=S);s===l&&(s=255,l=0),f===c&&(f=255,c=0),m===p&&(m=255,p=0);let b,_,G,N,D,R;if(y>0)b=s+y*(255-s),_=l-y*(l-0),G=f+y*(255-f),N=c-y*(c-0),D=m+y*(255-m),R=p-y*(p-0);else{const H=(s+l)*.5;b=s+y*(s-H),_=l+y*(l-H);const z=(f+c)*.5;G=f+y*(f-z),N=c+y*(c-z);const K=(m+p)*.5;D=m+y*(m-K),R=p+y*(p-K)}for(let H=0;H<n;H+=4)e[H+0]=Yr(e[H+0],l,s,_,b),e[H+1]=Yr(e[H+1],c,f,N,G),e[H+2]=Yr(e[H+2],p,m,R,D)};E.addGetterSetter(X,"enhance",0,q(),E.afterSetFilter);const V2=function(o){const e=o.data,n=e.length;for(let l=0;l<n;l+=4){const s=.34*e[l]+.5*e[l+1]+.16*e[l+2];e[l]=s,e[l+1]=s,e[l+2]=s}};E.addGetterSetter(X,"hue",0,q(),E.afterSetFilter);E.addGetterSetter(X,"saturation",0,q(),E.afterSetFilter);E.addGetterSetter(X,"luminance",0,q(),E.afterSetFilter);const j2=function(o){const e=o.data,n=e.length,l=1,s=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=l*s*Math.cos(u*Math.PI/180),g=l*s*Math.sin(u*Math.PI/180),p=.299*l+.701*f+.167*g,m=.587*l-.587*f+.33*g,S=.114*l-.114*f-.497*g,y=.299*l-.299*f-.328*g,b=.587*l+.413*f+.035*g,_=.114*l-.114*f+.293*g,G=.299*l-.3*f+1.25*g,N=.587*l-.586*f-1.05*g,D=.114*l+.886*f-.2*g;let R,H,z,K;for(let V=0;V<n;V+=4)R=e[V+0],H=e[V+1],z=e[V+2],K=e[V+3],e[V+0]=p*R+m*H+S*z+c,e[V+1]=y*R+b*H+_*z+c,e[V+2]=G*R+N*H+D*z+c,e[V+3]=K},K2=function(o){const e=o.data,n=e.length,l=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=l*s*Math.cos(u*Math.PI/180),f=l*s*Math.sin(u*Math.PI/180),g=.299*l+.701*c+.167*f,p=.587*l-.587*c+.33*f,m=.114*l-.114*c-.497*f,S=.299*l-.299*c-.328*f,y=.587*l+.413*c+.035*f,b=.114*l-.114*c+.293*f,_=.299*l-.3*c+1.25*f,G=.587*l-.586*c-1.05*f,N=.114*l+.886*c-.2*f;for(let D=0;D<n;D+=4){const R=e[D+0],H=e[D+1],z=e[D+2],K=e[D+3];e[D+0]=g*R+p*H+m*z,e[D+1]=S*R+y*H+b*z,e[D+2]=_*R+G*H+N*z,e[D+3]=K}};E.addGetterSetter(X,"hue",0,q(),E.afterSetFilter);E.addGetterSetter(X,"saturation",0,q(),E.afterSetFilter);E.addGetterSetter(X,"value",0,q(),E.afterSetFilter);const P2=function(o){const e=o.data,n=e.length;for(let l=0;l<n;l+=4)e[l]=255-e[l],e[l+1]=255-e[l+1],e[l+2]=255-e[l+2]},Q2=function(o,e,n){const l=o.data,s=e.data,u=o.width,c=o.height,f=n.polarCenterX||u/2,g=n.polarCenterY||c/2;let p=Math.sqrt(f*f+g*g),m=u-f,S=c-g;const y=Math.sqrt(m*m+S*S);p=y>p?y:p;const b=c,_=u,G=360/_*Math.PI/180;for(let N=0;N<_;N+=1){const D=Math.sin(N*G),R=Math.cos(N*G);for(let H=0;H<b;H+=1){m=Math.floor(f+p*H/b*R),S=Math.floor(g+p*H/b*D);let z=(S*u+m)*4;const K=l[z+0],V=l[z+1],Q=l[z+2],Z=l[z+3];z=(N+H*u)*4,s[z+0]=K,s[z+1]=V,s[z+2]=Q,s[z+3]=Z}}},Z2=function(o,e,n){const l=o.data,s=e.data,u=o.width,c=o.height,f=n.polarCenterX||u/2,g=n.polarCenterY||c/2;let p=Math.sqrt(f*f+g*g),m=u-f,S=c-g;const y=Math.sqrt(m*m+S*S);p=y>p?y:p;const b=c,_=u,G=0;let N,D;for(m=0;m<u;m+=1)for(S=0;S<c;S+=1){const R=m-f,H=S-g,z=Math.sqrt(R*R+H*H)*b/p;let K=(Math.atan2(H,R)*180/Math.PI+360+G)%360;K=K*_/360,N=Math.floor(K),D=Math.floor(z);let V=(D*u+N)*4;const Q=l[V+0],Z=l[V+1],tt=l[V+2],it=l[V+3];V=(S*u+m)*4,s[V+0]=Q,s[V+1]=Z,s[V+2]=tt,s[V+3]=it}},J2=function(o){const e=o.width,n=o.height;let l,s,u,c,f,g,p,m,S,y,b=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),G=Math.floor(e*(_%360)/360);if(b<1)return;const N=x.createCanvasElement();N.width=e,N.height=n;const D=N.getContext("2d").getImageData(0,0,e,n);x.releaseCanvas(N),Q2(o,D,{polarCenterX:e/2,polarCenterY:n/2});let R=e/Math.pow(2,b);for(;R<=8;)R=R*2,b-=1;R=Math.ceil(R);let H=R,z=0,K=H,V=1;for(G+R>e&&(z=H,K=0,V=-1),s=0;s<n;s+=1)for(l=z;l!==K;l+=V)u=Math.round(l+G)%e,S=(e*s+u)*4,f=D.data[S+0],g=D.data[S+1],p=D.data[S+2],m=D.data[S+3],y=(e*s+l)*4,D.data[y+0]=f,D.data[y+1]=g,D.data[y+2]=p,D.data[y+3]=m;for(s=0;s<n;s+=1)for(H=Math.floor(R),c=0;c<b;c+=1){for(l=0;l<H+1;l+=1)S=(e*s+l)*4,f=D.data[S+0],g=D.data[S+1],p=D.data[S+2],m=D.data[S+3],y=(e*s+H*2-l-1)*4,D.data[y+0]=f,D.data[y+1]=g,D.data[y+2]=p,D.data[y+3]=m;H*=2}Z2(D,o,{})};E.addGetterSetter(X,"kaleidoscopePower",2,q(),E.afterSetFilter);E.addGetterSetter(X,"kaleidoscopeAngle",0,q(),E.afterSetFilter);function Bl(o,e,n){let l=(n*o.width+e)*4;const s=[];return s.push(o.data[l++],o.data[l++],o.data[l++],o.data[l++]),s}function yi(o,e){return Math.sqrt(Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2)+Math.pow(o[2]-e[2],2))}function F2(o){const e=[0,0,0];for(let n=0;n<o.length;n++)e[0]+=o[n][0],e[1]+=o[n][1],e[2]+=o[n][2];return e[0]/=o.length,e[1]/=o.length,e[2]/=o.length,e}function k2(o,e){const n=Bl(o,0,0),l=Bl(o,o.width-1,0),s=Bl(o,0,o.height-1),u=Bl(o,o.width-1,o.height-1),c=e||10;if(yi(n,l)<c&&yi(l,u)<c&&yi(u,s)<c&&yi(s,n)<c){const f=F2([l,n,u,s]),g=[];for(let p=0;p<o.width*o.height;p++){const m=yi(f,[o.data[p*4],o.data[p*4+1],o.data[p*4+2]]);g[p]=m<c?0:255}return g}}function W2(o,e){for(let n=0;n<o.width*o.height;n++)o.data[4*n+3]=e[n]}function I2(o,e,n){const l=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),c=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const p=f*e+g;let m=0;for(let S=0;S<s;S++)for(let y=0;y<s;y++){const b=f+S-u,_=g+y-u;if(b>=0&&b<n&&_>=0&&_<e){const G=b*e+_,N=l[S*s+y];m+=o[G]*N}}c[p]=m===255*8?255:0}return c}function $2(o,e,n){const l=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),c=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const p=f*e+g;let m=0;for(let S=0;S<s;S++)for(let y=0;y<s;y++){const b=f+S-u,_=g+y-u;if(b>=0&&b<n&&_>=0&&_<e){const G=b*e+_,N=l[S*s+y];m+=o[G]*N}}c[p]=m>=255*4?255:0}return c}function t5(o,e,n){const l=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),c=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const p=f*e+g;let m=0;for(let S=0;S<s;S++)for(let y=0;y<s;y++){const b=f+S-u,_=g+y-u;if(b>=0&&b<n&&_>=0&&_<e){const G=b*e+_,N=l[S*s+y];m+=o[G]*N}}c[p]=m}return c}const e5=function(o){const e=this.threshold();let n=k2(o,e);return n&&(n=I2(n,o.width,o.height),n=$2(n,o.width,o.height),n=t5(n,o.width,o.height),W2(o,n)),o};E.addGetterSetter(X,"threshold",0,q(),E.afterSetFilter);const a5=function(o){const e=this.noise()*255,n=o.data,l=n.length,s=e/2;for(let u=0;u<l;u+=4)n[u+0]+=s-2*s*Math.random(),n[u+1]+=s-2*s*Math.random(),n[u+2]+=s-2*s*Math.random()};E.addGetterSetter(X,"noise",.2,q(),E.afterSetFilter);const n5=function(o){let e=Math.ceil(this.pixelSize()),n=o.width,l=o.height,s=Math.ceil(n/e),u=Math.ceil(l/e),c=o.data;if(e<=0){x.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let g=0;g<u;g+=1){let p=0,m=0,S=0,y=0;const b=f*e,_=b+e,G=g*e,N=G+e;let D=0;for(let R=b;R<_;R+=1)if(!(R>=n))for(let H=G;H<N;H+=1){if(H>=l)continue;const z=(n*H+R)*4;p+=c[z+0],m+=c[z+1],S+=c[z+2],y+=c[z+3],D+=1}p=p/D,m=m/D,S=S/D,y=y/D;for(let R=b;R<_;R+=1)if(!(R>=n))for(let H=G;H<N;H+=1){if(H>=l)continue;const z=(n*H+R)*4;c[z+0]=p,c[z+1]=m,c[z+2]=S,c[z+3]=y}}};E.addGetterSetter(X,"pixelSize",8,q(),E.afterSetFilter);const i5=function(o){const e=Math.round(this.levels()*254)+1,n=o.data,l=n.length,s=255/e;for(let u=0;u<l;u+=1)n[u]=Math.floor(n[u]/s)*s};E.addGetterSetter(X,"levels",.5,q(),E.afterSetFilter);const l5=function(o){const e=o.data,n=e.length,l=this.red(),s=this.green(),u=this.blue();for(let c=0;c<n;c+=4){const f=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255;e[c]=f*l,e[c+1]=f*s,e[c+2]=f*u,e[c+3]=e[c+3]}};E.addGetterSetter(X,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});E.addGetterSetter(X,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});E.addGetterSetter(X,"blue",0,wc,E.afterSetFilter);const s5=function(o){const e=o.data,n=e.length,l=this.red(),s=this.green(),u=this.blue(),c=this.alpha();for(let f=0;f<n;f+=4){const g=1-c;e[f]=l*c+e[f]*g,e[f+1]=s*c+e[f+1]*g,e[f+2]=u*c+e[f+2]*g}};E.addGetterSetter(X,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});E.addGetterSetter(X,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});E.addGetterSetter(X,"blue",0,wc,E.afterSetFilter);E.addGetterSetter(X,"alpha",1,function(o){return this._filterUpToDate=!1,o>1?1:o<0?0:o});const r5=function(o){const e=o.data,n=e.length;for(let l=0;l<n;l+=4){const s=e[l+0],u=e[l+1],c=e[l+2];e[l+0]=Math.min(255,s*.393+u*.769+c*.189),e[l+1]=Math.min(255,s*.349+u*.686+c*.168),e[l+2]=Math.min(255,s*.272+u*.534+c*.131)}},o5=function(o){const n=o.data;for(let l=0;l<n.length;l+=4){const s=n[l],u=n[l+1],c=n[l+2];.2126*s+.7152*u+.0722*c>=128&&(n[l]=255-s,n[l+1]=255-u,n[l+2]=255-c)}return o},u5=function(o){const e=this.threshold()*255,n=o.data,l=n.length;for(let s=0;s<l;s+=1)n[s]=n[s]<e?0:255};E.addGetterSetter(X,"threshold",.5,q(),E.afterSetFilter);Un.Util._assign(Un,{Arc:$e,Arrow:Fa,Circle:Ln,Ellipse:Ma,Image:Me,Label:lo,Tag:ka,Line:ta,Path:xt,Rect:Ni,RegularPolygon:Ra,Ring:Wa,Sprite:Ye,Star:Na,Text:Rt,TextPath:Kt,Transformer:ct,Wedge:ea,Filters:{Blur:U2,Brightness:Y2,Brighten:L2,Contrast:X2,Emboss:q2,Enhance:w2,Grayscale:V2,HSL:j2,HSV:K2,Invert:P2,Kaleidoscope:J2,Mask:e5,Noise:a5,Pixelate:n5,Posterize:i5,RGB:l5,RGBA:s5,Sepia:r5,Solarize:o5,Threshold:u5}});var Xr={exports:{}},qr={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc;function h5(){return zc||(zc=1,function(o){o.exports=function(e){function n(t,a,i,r){return new Z0(t,a,i,r)}function l(){}function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function c(t){if(u(t)!==t)throw Error(s(188))}function f(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(s(188));return a!==t?null:t}for(var i=t,r=a;;){var h=i.return;if(h===null)break;var d=h.alternate;if(d===null){if(r=h.return,r!==null){i=r;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===i)return c(h),t;if(d===r)return c(h),a;d=d.sibling}throw Error(s(188))}if(i.return!==r.return)i=h,r=d;else{for(var v=!1,C=h.child;C;){if(C===i){v=!0,i=h,r=d;break}if(C===r){v=!0,r=h,i=d;break}C=C.sibling}if(!v){for(C=d.child;C;){if(C===i){v=!0,i=d,r=h;break}if(C===r){v=!0,r=d,i=h;break}C=C.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?t:a}function g(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=g(t),a!==null)return a;t=t.sibling}return null}function p(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(t.tag!==4&&(a=p(t),a!==null))return a;t=t.sibling}return null}function m(t){return t===null||typeof t!="object"?null:(t=bh&&t[bh]||t["@@iterator"],typeof t=="function"?t:null)}function S(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===$0?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rn:return"Fragment";case ks:return"Profiler";case Eh:return"StrictMode";case Is:return"Suspense";case $s:return"SuspenseList";case er:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case sn:return"Portal";case fa:return(t.displayName||"Context")+".Provider";case Ch:return(t._context.displayName||"Context")+".Consumer";case Ws:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tr:return a=t.displayName||null,a!==null?a:S(t.type)||"Memo";case da:a=t._payload,t=t._init;try{return S(t(a))}catch{}}return null}function y(t){return{current:t}}function b(t){0>hn||(t.current=sr[hn],sr[hn]=null,hn--)}function _(t,a){hn++,sr[hn]=t.current,t.current=a}function G(t){return t>>>=0,t===0?32:31-(v1(t)/y1|0)|0}function N(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function D(t,a,i){var r=t.pendingLanes;if(r===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var C=r&134217727;return C!==0?(r=C&~d,r!==0?h=N(r):(v&=C,v!==0?h=N(v):i||(i=C&~t,i!==0&&(h=N(i))))):(C=r&~d,C!==0?h=N(C):v!==0?h=N(v):i||(i=r&~t,i!==0&&(h=N(i)))),h===0?0:a!==0&&a!==h&&(a&d)===0&&(d=h&-h,i=a&-a,d>=i||d===32&&(i&4194048)!==0)?a:h}function R(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function H(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var t=il;return il<<=1,(il&4194048)===0&&(il=256),t}function K(){var t=ll;return ll<<=1,(ll&62914560)===0&&(ll=4194304),t}function V(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function Q(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Z(t,a,i,r,h,d){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var C=t.entanglements,M=t.expirationTimes,B=t.hiddenUpdates;for(i=v&~i;0<i;){var Y=31-de(i),P=1<<Y;C[Y]=0,M[Y]=-1;var F=B[Y];if(F!==null)for(B[Y]=null,Y=0;Y<F.length;Y++){var lt=F[Y];lt!==null&&(lt.lane&=-536870913)}i&=~P}r!==0&&tt(t,r,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~a))}function tt(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var r=31-de(a);t.entangledLanes|=a,t.entanglements[r]=t.entanglements[r]|1073741824|i&4194090}function it(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var r=31-de(i),h=1<<r;h&a|t[r]&a&&(t[r]|=a),i&=~h}}function st(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function j(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function et(t){if(typeof b1=="function"&&T1(t),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(li,t)}catch{}}function W(t){if(ur===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);ur=a&&a[1]||"",Jh=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ur+t+Jh}function k(t,a){if(!t||hr)return"";hr=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(lt){var F=lt}Reflect.construct(t,[],P)}else{try{P.call()}catch(lt){F=lt}t.call(P.prototype)}}else{try{throw Error()}catch(lt){F=lt}(P=t())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(lt){if(lt&&F&&typeof lt.stack=="string")return[lt.stack,F.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),v=d[0],C=d[1];if(v&&C){var M=v.split(`
`),B=C.split(`
`);for(h=r=0;r<M.length&&!M[r].includes("DetermineComponentFrameRoot");)r++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(r===M.length||h===B.length)for(r=M.length-1,h=B.length-1;1<=r&&0<=h&&M[r]!==B[h];)h--;for(;1<=r&&0<=h;r--,h--)if(M[r]!==B[h]){if(r!==1||h!==1)do if(r--,h--,0>h||M[r]!==B[h]){var Y=`
`+M[r].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=r&&0<=h);break}}}finally{hr=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?W(i):""}function J(t){switch(t.tag){case 26:case 27:case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return k(t.type,!1);case 11:return k(t.type.render,!1);case 1:return k(t.type,!0);case 31:return W("Activity");default:return""}}function At(t){try{var a="";do a+=J(t),t=t.return;while(t);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function I(t,a){if(typeof t=="object"&&t!==null){var i=Fh.get(t);return i!==void 0?i:(a={value:t,source:a,stack:At(a)},Fh.set(t,a),a)}return{value:t,source:a,stack:At(a)}}function ft(t,a){fn[dn++]=ol,fn[dn++]=rl,rl=t,ol=a}function Gt(t,a,i){_e[Ee++]=Qe,_e[Ee++]=Ze,_e[Ee++]=Ya,Ya=t;var r=Qe;t=Ze;var h=32-de(r)-1;r&=~(1<<h),i+=1;var d=32-de(a)+h;if(30<d){var v=h-h%5;d=(r&(1<<v)-1).toString(32),r>>=v,h-=v,Qe=1<<32-de(a)+h|i<<h|r,Ze=d+t}else Qe=1<<d|i<<h|r,Ze=t}function gt(t){t.return!==null&&(ft(t,1),Gt(t,1,0))}function Nt(t){for(;t===rl;)rl=fn[--dn],fn[dn]=null,ol=fn[--dn],fn[dn]=null;for(;t===Ya;)Ya=_e[--Ee],_e[Ee]=null,Ze=_e[--Ee],_e[Ee]=null,Qe=_e[--Ee],_e[Ee]=null}function It(t,a){_(pa,a),_(si,t),_(kt,null),t=af(a),b(kt),_(kt,t)}function Ia(){b(kt),b(si),b(pa)}function Pl(t){t.memoizedState!==null&&_(ul,t);var a=kt.current,i=nf(a,t.type);a!==i&&(_(si,t),_(kt,i))}function Oi(t){si.current===t&&(b(kt),b(si)),ul.current===t&&(b(ul),Ke?La._currentValue=on:La._currentValue2=on)}function aa(t){var a=Error(s(418,""));throw qn(I(a,t)),cr}function ro(t,a){if(!Se)throw Error(s(175));e1(t.stateNode,t.type,t.memoizedProps,a,t)||aa(t)}function oo(t){for(ae=t.return;ae;)switch(ae.tag){case 5:case 13:Ue=!1;return;case 27:case 3:Ue=!0;return;default:ae=ae.return}}function Yn(t){if(!Se||t!==ae)return!1;if(!vt)return oo(t),vt=!0,!1;var a=t.tag;if(qt?a!==3&&a!==27&&(a!==5||Uh(t.type)&&!nl(t.type,t.memoizedProps))&&wt&&aa(t):a!==3&&(a!==5||Uh(t.type)&&!nl(t.type,t.memoizedProps))&&wt&&aa(t),oo(t),a===13){if(!Se)throw Error(s(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));wt=i1(t)}else wt=qt&&a===27?Zf(t.type,wt):ae?Bh(t.stateNode):null;return!0}function Xn(){Se&&(wt=ae=null,vt=!1)}function uo(){var t=Xa;return t!==null&&(se===null?se=t:se.push.apply(se,t),Xa=null),t}function qn(t){Xa===null?Xa=[t]:Xa.push(t)}function T0(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}function na(t,a,i){Ke?(_(hl,a._currentValue),a._currentValue=i):(_(hl,a._currentValue2),a._currentValue2=i)}function Xe(t){var a=hl.current;Ke?t._currentValue=a:t._currentValue2=a,b(hl)}function Ql(t,a,i){for(;t!==null;){var r=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),t===i)break;t=t.return}}function Zl(t,a,i,r){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var C=d;d=h;for(var M=0;M<a.length;M++)if(C.context===a[M]){d.lanes|=i,C=d.alternate,C!==null&&(C.lanes|=i),Ql(d.return,i,t),r||(v=null);break t}d=C.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),Ql(v,i,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function wn(t,a,i,r){t=null;for(var h=a,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var C=h.type;pe(h.pendingProps.value,v.value)||(t!==null?t.push(C):t=[C])}}else if(h===ul.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(La):t=[La])}h=h.return}t!==null&&Zl(a,t,i,r),a.flags|=262144}function Di(t){for(t=t.firstContext;t!==null;){var a=t.context;if(!pe(Ke?a._currentValue:a._currentValue2,t.memoizedValue))return!0;t=t.next}return!1}function Da(t){qa=t,Je=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return ho(qa,t)}function Gi(t,a){return qa===null&&Da(t),ho(t,a)}function ho(t,a){var i=Ke?a._currentValue:a._currentValue2;if(a={context:a,memoizedValue:i,next:null},Je===null){if(t===null)throw Error(s(308));Je=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Je=Je.next=a;return i}function Jl(){return{controller:new x1,data:new Map,refCount:0}}function Vn(t){t.refCount--,t.refCount===0&&A1(M1,function(){t.controller.abort()})}function ze(t){t!==gn&&t.next===null&&(gn===null?cl=gn=t:gn=gn.next=t),fl=!0,fr||(fr=!0,x0())}function $a(t,a){if(!dr&&fl){dr=!0;do for(var i=!1,r=cl;r!==null;){if(t!==0){var h=r.pendingLanes;if(h===0)var d=0;else{var v=r.suspendedLanes,C=r.pingedLanes;d=(1<<31-de(42|t)+1)-1,d&=h&~(v&~C),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,mo(r,d))}else d=dt,d=D(r,r===bt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==Ua),(d&3)===0||R(r,d)||(i=!0,mo(r,d));r=r.next}while(i);dr=!1}}function co(){fo()}function fo(){fl=fr=!1;var t=0;pn!==0&&(df()&&(t=pn),pn=0);for(var a=Oe(),i=null,r=cl;r!==null;){var h=r.next,d=go(r,a);d===0?(r.next=null,i===null?cl=h:i.next=h,h===null&&(gn=i)):(i=r,(t!==0||(d&3)!==0)&&(fl=!0)),r=h}$a(t)}function go(t,a){for(var i=t.suspendedLanes,r=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-de(d),C=1<<v,M=h[v];M===-1?((C&i)===0||(C&r)!==0)&&(h[v]=H(C,a)):M<=a&&(t.expiredLanes|=C),d&=~C}if(a=bt,i=dt,i=D(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==Ua),r=t.callbackNode,i===0||t===a&&(_t===2||_t===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&rr(r),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||R(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(r!==null&&rr(r),j(i)){case 2:case 8:i=E1;break;case 32:i=or;break;case 268435456:i=C1;break;default:i=or}return r=po.bind(null,t),i=sl(i,r),t.callbackPriority=a,t.callbackNode=i,a}return r!==null&&r!==null&&rr(r),t.callbackPriority=2,t.callbackNode=null,2}function po(t,a){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(ei()&&t.callbackNode!==i)return null;var r=dt;return r=D(t,t===bt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==Ua),r===0?null:(Wu(t,r,a),go(t,Oe()),t.callbackNode!=null&&t.callbackNode===i?po.bind(null,t):null)}function mo(t,a){if(ei())return null;Wu(t,a,!0)}function x0(){Sf?_f(function(){(ht&6)!==0?sl(Zh,co):fo()}):sl(Zh,co)}function Fl(){return pn===0&&(pn=z()),pn}function A0(t,a){if(ri===null){var i=ri=[];gr=0,mn=Fl(),vn={status:"pending",value:void 0,then:function(r){i.push(r)}}}return gr++,a.then(vo,vo),a}function vo(){if(--gr===0&&ri!==null){vn!==null&&(vn.status="fulfilled");var t=ri;ri=null,mn=0,vn=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function M0(t,a){var i=[],r={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return t.then(function(){r.status="fulfilled",r.value=a;for(var h=0;h<i.length;h++)(0,i[h])(a)},function(h){for(r.status="rejected",r.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),r}function kl(){var t=wa.current;return t!==null?t:bt.pooledCache}function zi(t,a){a===null?_(wa,wa.current):_(wa,a.pool)}function yo(){var t=kl();return t===null?null:{parent:Ke?zt._currentValue:zt._currentValue2,pool:t}}function Hi(t,a){if(pe(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),r=Object.keys(a);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var h=i[r];if(!R1.call(a,h)||!pe(t[h],a[h]))return!1}return!0}function So(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Bi(){}function _o(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(Bi,Bi),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Co(t),t;default:if(typeof a.status=="string")a.then(Bi,Bi);else{if(t=bt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(r){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=r}},function(r){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Co(t),t}throw yn=a,oi}}function Eo(){if(yn===null)throw Error(s(459));var t=yn;return yn=null,t}function Co(t){if(t===oi||t===dl)throw Error(s(483))}function Ui(){for(var t=Sn,a=mr=Sn=0;a<t;){var i=Ce[a];Ce[a++]=null;var r=Ce[a];Ce[a++]=null;var h=Ce[a];Ce[a++]=null;var d=Ce[a];if(Ce[a++]=null,r!==null&&h!==null){var v=r.pending;v===null?h.next=h:(h.next=v.next,v.next=h),r.pending=h}d!==0&&bo(i,h,d)}}function Li(t,a,i,r){Ce[Sn++]=t,Ce[Sn++]=a,Ce[Sn++]=i,Ce[Sn++]=r,mr|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Wl(t,a,i,r){return Li(t,a,i,r),Yi(t)}function tn(t,a){return Li(t,null,null,a),Yi(t)}function bo(t,a,i){t.lanes|=i;var r=t.alternate;r!==null&&(r.lanes|=i);for(var h=!1,d=t.return;d!==null;)d.childLanes|=i,r=d.alternate,r!==null&&(r.childLanes|=i),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&a!==null&&(h=31-de(i),t=d.hiddenUpdates,r=t[h],r===null?t[h]=[a]:r.push(a),a.lane=i|536870912),d):null}function Yi(t){if(50<gi)throw gi=0,Mr=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}function Il(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $l(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ia(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function la(t,a,i){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(ht&2)!==0){var h=r.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),r.pending=a,a=Yi(t),bo(t,null,i),a}return Li(t,r,a,i),Yi(t)}function jn(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var r=a.lanes;r&=t.pendingLanes,i|=r,a.lanes=i,it(t,i)}}function ts(t,a){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var h=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?h=d=a:d=d.next=a}else h=d=a;i={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}function Kn(){if(vr){var t=vn;if(t!==null)throw t}}function Pn(t,a,i,r){vr=!1;var h=t.updateQueue;ma=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var M=C,B=M.next;M.next=null,v===null?d=B:v.next=B,v=M;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==v&&(C===null?Y.firstBaseUpdate=B:C.next=B,Y.lastBaseUpdate=M))}if(d!==null){var P=h.baseState;v=0,Y=B=M=null,C=d;do{var F=C.lane&-536870913,lt=F!==C.lane;if(lt?(dt&F)===F:(r&F)===F){F!==0&&F===mn&&(vr=!0),Y!==null&&(Y=Y.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var xe=t,pi=C;F=a;var Ka=i;switch(pi.tag){case 1:if(xe=pi.payload,typeof xe=="function"){P=xe.call(Ka,P,F);break t}P=xe;break t;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=pi.payload,F=typeof xe=="function"?xe.call(Ka,P,F):xe,F==null)break t;P=Fs({},P,F);break t;case 2:ma=!0}}F=C.callback,F!==null&&(t.flags|=64,lt&&(t.flags|=8192),lt=h.callbacks,lt===null?h.callbacks=[F]:lt.push(F))}else lt={lane:F,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(B=Y=lt,M=P):Y=Y.next=lt,v|=F;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;lt=C,C=lt.next,lt.next=null,h.lastBaseUpdate=lt,h.shared.pending=null}}while(!0);Y===null&&(M=P),h.baseState=M,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),Sa|=v,t.lanes=v,t.memoizedState=P}}function To(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function xo(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)To(i[t],a)}function Ao(t,a){t=ke,_(pl,t),_(_n,a),ke=t|a.baseLanes}function es(){_(pl,ke),_(_n,_n.current)}function as(){ke=pl.current,b(_n),b(pl)}function Bt(){throw Error(s(321))}function ns(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!pe(t[i],a[i]))return!1;return!0}function is(t,a,i,r,h,d){return va=d,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,at.H=t===null||t.memoizedState===null?Wh:Ih,Va=!1,d=i(r,h),Va=!1,En&&(d=Ro(a,i,r,h)),Mo(t),d}function Mo(t){at.H=yl;var a=Et!==null&&Et.next!==null;if(va=0,Yt=Et=rt=null,ml=!1,ui=0,Cn=null,a)throw Error(s(300));t===null||Qt||(t=t.dependencies,t!==null&&Di(t)&&(Qt=!0))}function Ro(t,a,i,r){rt=t;var h=0;do{if(En&&(Cn=null),ui=0,En=!1,25<=h)throw Error(s(301));if(h+=1,Yt=Et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}at.H=O1,d=a(i,r)}while(En);return d}function R0(){var t=at.H,a=t.useState()[0];return a=typeof a.then=="function"?Qn(a):a,t=t.useState()[0],(Et!==null?Et.memoizedState:null)!==t&&(rt.flags|=1024),a}function ls(){var t=vl!==0;return vl=0,t}function ss(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function rs(t){if(ml){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}ml=!1}va=0,Yt=Et=rt=null,En=!1,ui=vl=0,Cn=null}function ne(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?rt.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Lt(){if(Et===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var a=Yt===null?rt.memoizedState:Yt.next;if(a!==null)Yt=a,Et=t;else{if(t===null)throw rt.alternate===null?Error(s(467)):Error(s(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Yt===null?rt.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function os(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qn(t){var a=ui;return ui+=1,Cn===null&&(Cn=[]),t=_o(Cn,t,a),a=rt,(Yt===null?a.memoizedState:Yt.next)===null&&(a=a.alternate,at.H=a===null||a.memoizedState===null?Wh:Ih),t}function Xi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Qn(t);if(t.$$typeof===fa)return $t(t)}throw Error(s(438,String(t)))}function us(t){var a=null,i=rt.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var r=rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=os(),rt.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),r=0;r<t;r++)i[r]=I0;return a.index++,i}function qe(t,a){return typeof a=="function"?a(t):a}function qi(t){var a=Lt();return hs(a,Et,t)}function hs(t,a,i){var r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var h=t.baseQueue,d=r.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}a.baseQueue=h=d,r.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{a=h.next;var C=v=null,M=null,B=a,Y=!1;do{var P=B.lane&-536870913;if(P!==B.lane?(dt&P)===P:(va&P)===P){var F=B.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),P===mn&&(Y=!0);else if((va&F)===F){B=B.next,F===mn&&(Y=!0);continue}else P={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(C=M=P,v=d):M=M.next=P,rt.lanes|=F,Sa|=F;P=B.action,Va&&i(d,P),d=B.hasEagerState?B.eagerState:i(d,P)}else F={lane:P,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(C=M=F,v=d):M=M.next=F,rt.lanes|=P,Sa|=P;B=B.next}while(B!==null&&B!==a);if(M===null?v=d:M.next=C,!pe(d,t.memoizedState)&&(Qt=!0,Y&&(i=vn,i!==null)))throw i;t.memoizedState=d,t.baseState=v,t.baseQueue=M,r.lastRenderedState=d}return h===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function cs(t){var a=Lt(),i=a.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=t;var r=i.dispatch,h=i.pending,d=a.memoizedState;if(h!==null){i.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);pe(d,a.memoizedState)||(Qt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),i.lastRenderedState=d}return[d,r]}function No(t,a,i){var r=rt,h=Lt(),d=vt;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=a();var v=!pe((Et||h).memoizedState,i);v&&(h.memoizedState=i,Qt=!0),h=h.queue;var C=Go.bind(null,r,h,t);if(Zn(2048,8,C,[t]),h.getSnapshot!==a||v||Yt!==null&&Yt.memoizedState.tag&1){if(r.flags|=2048,en(9,wi(),Do.bind(null,r,h,i,a),null),bt===null)throw Error(s(349));d||(va&124)!==0||Oo(r,a,i)}return i}function Oo(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=rt.updateQueue,a===null?(a=os(),rt.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Do(t,a,i,r){a.value=i,a.getSnapshot=r,zo(a)&&Ho(t)}function Go(t,a,i){return i(function(){zo(a)&&Ho(t)})}function zo(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!pe(t,i)}catch{return!0}}function Ho(t){var a=tn(t,2);a!==null&&ce(a,t,2)}function fs(t){var a=ne();if(typeof t=="function"){var i=t;if(t=i(),Va){et(!0);try{i()}finally{et(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:t},a}function Bo(t,a,i,r){return t.baseState=i,hs(t,Et,typeof r=="function"?r:qe)}function N0(t,a,i,r,h){if(ji(t))throw Error(s(485));if(t=a.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};at.T!==null?i(!0):d.isTransition=!1,r(d),i=a.pending,i===null?(d.next=a.pending=d,Uo(a,d)):(d.next=i.next,a.pending=i.next=d)}}function Uo(t,a){var i=a.action,r=a.payload,h=t.state;if(a.isTransition){var d=at.T,v={};at.T=v;try{var C=i(h,r),M=at.S;M!==null&&M(v,C),Lo(t,a,C)}catch(B){ds(t,a,B)}finally{at.T=d}}else try{d=i(h,r),Lo(t,a,d)}catch(B){ds(t,a,B)}}function Lo(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Yo(t,a,r)},function(r){return ds(t,a,r)}):Yo(t,a,i)}function Yo(t,a,i){a.status="fulfilled",a.value=i,Xo(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,Uo(t,i)))}function ds(t,a,i){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=i,Xo(a),a=a.next;while(a!==r)}t.action=null}function Xo(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function qo(t,a){return a}function wo(t,a){if(vt){var i=bt.formState;if(i!==null){t:{var r=rt;if(vt){if(wt){var h=Pf(wt,Ue);if(h){wt=Bh(h),r=Qf(h);break t}}aa(r)}r=!1}r&&(a=i[0])}}i=ne(),i.memoizedState=i.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:a},i.queue=r,i=lu.bind(null,rt,r),r.dispatch=i,r=fs(!1);var d=vs.bind(null,rt,!1,r.queue);return r=ne(),h={state:a,dispatch:null,action:t,pending:null},r.queue=h,i=N0.bind(null,rt,h,d,i),h.dispatch=i,r.memoizedState=t,[a,i,!1]}function Vo(t){var a=Lt();return jo(a,Et,t)}function jo(t,a,i){if(a=hs(t,a,qo)[0],t=qi(qe)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=Qn(a)}catch(v){throw v===oi?dl:v}else r=a;a=Lt();var h=a.queue,d=h.dispatch;return i!==a.memoizedState&&(rt.flags|=2048,en(9,wi(),O0.bind(null,h,i),null)),[r,d,t]}function O0(t,a){t.action=a}function Ko(t){var a=Lt(),i=Et;if(i!==null)return jo(a,i,t);Lt(),a=a.memoizedState,i=Lt();var r=i.queue.dispatch;return i.memoizedState=t,[a,r,!1]}function en(t,a,i,r){return t={tag:t,create:i,deps:r,inst:a,next:null},a=rt.updateQueue,a===null&&(a=os(),rt.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,a.lastEffect=t),t}function wi(){return{destroy:void 0,resource:void 0}}function Po(){return Lt().memoizedState}function Vi(t,a,i,r){var h=ne();r=r===void 0?null:r,rt.flags|=t,h.memoizedState=en(1|a,wi(),i,r)}function Zn(t,a,i,r){var h=Lt();r=r===void 0?null:r;var d=h.memoizedState.inst;Et!==null&&r!==null&&ns(r,Et.memoizedState.deps)?h.memoizedState=en(a,d,i,r):(rt.flags|=t,h.memoizedState=en(1|a,d,i,r))}function Qo(t,a){Vi(8390656,8,t,a)}function Zo(t,a){Zn(2048,8,t,a)}function Jo(t,a){return Zn(4,2,t,a)}function Fo(t,a){return Zn(4,4,t,a)}function ko(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Wo(t,a,i){i=i!=null?i.concat([t]):null,Zn(4,4,ko.bind(null,a,t),i)}function gs(){}function Io(t,a){var i=Lt();a=a===void 0?null:a;var r=i.memoizedState;return a!==null&&ns(a,r[1])?r[0]:(i.memoizedState=[t,a],t)}function $o(t,a){var i=Lt();a=a===void 0?null:a;var r=i.memoizedState;if(a!==null&&ns(a,r[1]))return r[0];if(r=t(),Va){et(!0);try{t()}finally{et(!1)}}return i.memoizedState=[r,a],r}function ps(t,a,i){return i===void 0||(va&1073741824)!==0?t.memoizedState=a:(t.memoizedState=i,t=ku(),rt.lanes|=t,Sa|=t,i)}function tu(t,a,i,r){return pe(i,a)?i:_n.current!==null?(t=ps(t,i,r),pe(t,a)||(Qt=!0),t):(va&42)===0?(Qt=!0,t.memoizedState=i):(t=ku(),rt.lanes|=t,Sa|=t,a)}function eu(t,a,i,r,h){var d=Pe();Pt(d!==0&&8>d?d:8);var v=at.T,C={};at.T=C,vs(t,!1,a,i);try{var M=h(),B=at.S;if(B!==null&&B(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=M0(M,r);Jn(t,a,Y,he(t))}else Jn(t,a,r,he(t))}catch(P){Jn(t,a,{then:function(){},status:"rejected",reason:P},he())}finally{Pt(d),at.T=v}}function au(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:on,baseState:on,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:on},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function ms(){return $t(La)}function nu(){return Lt().memoizedState}function iu(){return Lt().memoizedState}function D0(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=he();t=ia(i);var r=la(a,t,i);r!==null&&(ce(r,a,i),jn(r,a,i)),a={cache:Jl()},t.payload=a;return}a=a.return}}function G0(t,a,i){var r=he();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},ji(t)?su(a,i):(i=Wl(t,a,i,r),i!==null&&(ce(i,t,r),ru(i,a,r)))}function lu(t,a,i){var r=he();Jn(t,a,i,r)}function Jn(t,a,i,r){var h={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(ji(t))su(a,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var v=a.lastRenderedState,C=d(v,i);if(h.hasEagerState=!0,h.eagerState=C,pe(C,v))return Li(t,a,h,0),bt===null&&Ui(),!1}catch{}finally{}if(i=Wl(t,a,h,r),i!==null)return ce(i,t,r),ru(i,a,r),!0}return!1}function vs(t,a,i,r){if(r={lane:2,revertLane:Fl(),action:r,hasEagerState:!1,eagerState:null,next:null},ji(t)){if(a)throw Error(s(479))}else a=Wl(t,i,r,2),a!==null&&ce(a,t,2)}function ji(t){var a=t.alternate;return t===rt||a!==null&&a===rt}function su(t,a){En=ml=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function ru(t,a,i){if((i&4194048)!==0){var r=a.lanes;r&=t.pendingLanes,i|=r,a.lanes=i,it(t,i)}}function Ki(t){var a=hi;return hi+=1,bn===null&&(bn=[]),_o(bn,t,a)}function Fn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Pi(t,a){throw a.$$typeof===k0?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ou(t){var a=t._init;return a(t._payload)}function uu(t){function a(A,T){if(t){var O=A.deletions;O===null?(A.deletions=[T],A.flags|=16):O.push(T)}}function i(A,T){if(!t)return null;for(;T!==null;)a(A,T),T=T.sibling;return null}function r(A){for(var T=new Map;A!==null;)A.key!==null?T.set(A.key,A):T.set(A.index,A),A=A.sibling;return T}function h(A,T){return A=je(A,T),A.index=0,A.sibling=null,A}function d(A,T,O){return A.index=O,t?(O=A.alternate,O!==null?(O=O.index,O<T?(A.flags|=67108866,T):O):(A.flags|=67108866,T)):(A.flags|=1048576,T)}function v(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function C(A,T,O,L){return T===null||T.tag!==6?(T=Qs(O,A.mode,L),T.return=A,T):(T=h(T,O),T.return=A,T)}function M(A,T,O,L){var $=O.type;return $===rn?Y(A,T,O.props.children,L,O.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===da&&ou($)===T.type)?(T=h(T,O.props),Fn(T,O),T.return=A,T):(T=tl(O.type,O.key,O.props,null,A.mode,L),Fn(T,O),T.return=A,T)}function B(A,T,O,L){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=Zs(O,A.mode,L),T.return=A,T):(T=h(T,O.children||[]),T.return=A,T)}function Y(A,T,O,L,$){return T===null||T.tag!==7?(T=Ba(O,A.mode,L,$),T.return=A,T):(T=h(T,O),T.return=A,T)}function P(A,T,O){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Qs(""+T,A.mode,O),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case el:return O=tl(T.type,T.key,T.props,null,A.mode,O),Fn(O,T),O.return=A,O;case sn:return T=Zs(T,A.mode,O),T.return=A,T;case da:var L=T._init;return T=L(T._payload),P(A,T,O)}if(al(T)||m(T))return T=Ba(T,A.mode,O,null),T.return=A,T;if(typeof T.then=="function")return P(A,Ki(T),O);if(T.$$typeof===fa)return P(A,Gi(A,T),O);Pi(A,T)}return null}function F(A,T,O,L){var $=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return $!==null?null:C(A,T,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case el:return O.key===$?M(A,T,O,L):null;case sn:return O.key===$?B(A,T,O,L):null;case da:return $=O._init,O=$(O._payload),F(A,T,O,L)}if(al(O)||m(O))return $!==null?null:Y(A,T,O,L,null);if(typeof O.then=="function")return F(A,T,Ki(O),L);if(O.$$typeof===fa)return F(A,T,Gi(A,O),L);Pi(A,O)}return null}function lt(A,T,O,L,$){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return A=A.get(O)||null,C(T,A,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case el:return A=A.get(L.key===null?O:L.key)||null,M(T,A,L,$);case sn:return A=A.get(L.key===null?O:L.key)||null,B(T,A,L,$);case da:var Mt=L._init;return L=Mt(L._payload),lt(A,T,O,L,$)}if(al(L)||m(L))return A=A.get(O)||null,Y(T,A,L,$,null);if(typeof L.then=="function")return lt(A,T,O,Ki(L),$);if(L.$$typeof===fa)return lt(A,T,O,Gi(T,L),$);Pi(T,L)}return null}function xe(A,T,O,L){for(var $=null,Mt=null,nt=T,pt=T=0,Jt=null;nt!==null&&pt<O.length;pt++){nt.index>pt?(Jt=nt,nt=null):Jt=nt.sibling;var mt=F(A,nt,O[pt],L);if(mt===null){nt===null&&(nt=Jt);break}t&&nt&&mt.alternate===null&&a(A,nt),T=d(mt,T,pt),Mt===null?$=mt:Mt.sibling=mt,Mt=mt,nt=Jt}if(pt===O.length)return i(A,nt),vt&&ft(A,pt),$;if(nt===null){for(;pt<O.length;pt++)nt=P(A,O[pt],L),nt!==null&&(T=d(nt,T,pt),Mt===null?$=nt:Mt.sibling=nt,Mt=nt);return vt&&ft(A,pt),$}for(nt=r(nt);pt<O.length;pt++)Jt=lt(nt,A,pt,O[pt],L),Jt!==null&&(t&&Jt.alternate!==null&&nt.delete(Jt.key===null?pt:Jt.key),T=d(Jt,T,pt),Mt===null?$=Jt:Mt.sibling=Jt,Mt=Jt);return t&&nt.forEach(function(Ca){return a(A,Ca)}),vt&&ft(A,pt),$}function pi(A,T,O,L){if(O==null)throw Error(s(151));for(var $=null,Mt=null,nt=T,pt=T=0,Jt=null,mt=O.next();nt!==null&&!mt.done;pt++,mt=O.next()){nt.index>pt?(Jt=nt,nt=null):Jt=nt.sibling;var Ca=F(A,nt,mt.value,L);if(Ca===null){nt===null&&(nt=Jt);break}t&&nt&&Ca.alternate===null&&a(A,nt),T=d(Ca,T,pt),Mt===null?$=Ca:Mt.sibling=Ca,Mt=Ca,nt=Jt}if(mt.done)return i(A,nt),vt&&ft(A,pt),$;if(nt===null){for(;!mt.done;pt++,mt=O.next())mt=P(A,mt.value,L),mt!==null&&(T=d(mt,T,pt),Mt===null?$=mt:Mt.sibling=mt,Mt=mt);return vt&&ft(A,pt),$}for(nt=r(nt);!mt.done;pt++,mt=O.next())mt=lt(nt,A,pt,mt.value,L),mt!==null&&(t&&mt.alternate!==null&&nt.delete(mt.key===null?pt:mt.key),T=d(mt,T,pt),Mt===null?$=mt:Mt.sibling=mt,Mt=mt);return t&&nt.forEach(function(z1){return a(A,z1)}),vt&&ft(A,pt),$}function Ka(A,T,O,L){if(typeof O=="object"&&O!==null&&O.type===rn&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case el:t:{for(var $=O.key;T!==null;){if(T.key===$){if($=O.type,$===rn){if(T.tag===7){i(A,T.sibling),L=h(T,O.props.children),L.return=A,A=L;break t}}else if(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===da&&ou($)===T.type){i(A,T.sibling),L=h(T,O.props),Fn(L,O),L.return=A,A=L;break t}i(A,T);break}else a(A,T);T=T.sibling}O.type===rn?(L=Ba(O.props.children,A.mode,L,O.key),L.return=A,A=L):(L=tl(O.type,O.key,O.props,null,A.mode,L),Fn(L,O),L.return=A,A=L)}return v(A);case sn:t:{for($=O.key;T!==null;){if(T.key===$)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){i(A,T.sibling),L=h(T,O.children||[]),L.return=A,A=L;break t}else{i(A,T);break}else a(A,T);T=T.sibling}L=Zs(O,A.mode,L),L.return=A,A=L}return v(A);case da:return $=O._init,O=$(O._payload),Ka(A,T,O,L)}if(al(O))return xe(A,T,O,L);if(m(O)){if($=m(O),typeof $!="function")throw Error(s(150));return O=$.call(O),pi(A,T,O,L)}if(typeof O.then=="function")return Ka(A,T,Ki(O),L);if(O.$$typeof===fa)return Ka(A,T,Gi(A,O),L);Pi(A,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,T!==null&&T.tag===6?(i(A,T.sibling),L=h(T,O),L.return=A,A=L):(i(A,T),L=Qs(O,A.mode,L),L.return=A,A=L),v(A)):i(A,T)}return function(A,T,O,L){try{hi=0;var $=Ka(A,T,O,L);return bn=null,$}catch(nt){if(nt===oi||nt===dl)throw nt;var Mt=n(29,nt,null,A.mode);return Mt.lanes=L,Mt.return=A,Mt}finally{}}}function sa(t){var a=t.alternate;_(Vt,Vt.current&1),_(be,t),Le===null&&(a===null||_n.current!==null||a.memoizedState!==null)&&(Le=t)}function hu(t){if(t.tag===22){if(_(Vt,Vt.current),_(be,t),Le===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Le=t)}}else ra()}function ra(){_(Vt,Vt.current),_(be,be.current)}function we(t){b(be),Le===t&&(Le=null),b(Vt)}function Qi(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||nr(i)||ir(i)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function ys(t,a,i,r){a=t.memoizedState,i=i(r,a),i=i==null?a:Fs({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}function cu(t,a,i,r,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,d,v):a.prototype&&a.prototype.isPureReactComponent?!Hi(i,r)||!Hi(h,d):!0}function fu(t,a,i,r){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,r),a.state!==t&&yr.enqueueReplaceState(a,a.state,null)}function Ga(t,a){var i=a;if("ref"in a){i={};for(var r in a)r!=="ref"&&(i[r]=a[r])}if(t=t.defaultProps){i===a&&(i=Fs({},i));for(var h in t)i[h]===void 0&&(i[h]=t[h])}return i}function Zi(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function du(t,a,i){try{var r=t.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ss(t,a,i){return i=ia(i),i.tag=3,i.payload={element:null},i.callback=function(){Zi(t,a)},i}function gu(t){return t=ia(t),t.tag=3,t}function pu(t,a,i,r){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var d=r.value;t.payload=function(){return h(d)},t.callback=function(){du(a,i,r)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){du(a,i,r),typeof h!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})})}function z0(t,a,i,r,h){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=i.alternate,a!==null&&wn(a,i,h,!0),i=be.current,i!==null){switch(i.tag){case 13:return Le===null?Vs():i.alternate===null&&Ht===0&&(Ht=3),i.flags&=-257,i.flags|=65536,i.lanes=h,r===gl?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([r]):a.add(r),Ks(t,r,h)),!1;case 22:return i.flags|=65536,r===gl?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([r]):i.add(r)),Ks(t,r,h)),!1}throw Error(s(435,i.tag))}return Ks(t,r,h),Vs(),!1}if(vt)return a=be.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,r!==cr&&(t=Error(s(422),{cause:r}),qn(I(t,i)))):(r!==cr&&(a=Error(s(423),{cause:r}),qn(I(a,i))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,r=I(r,i),h=Ss(t.stateNode,r,h),ts(t,h),Ht!==4&&(Ht=2)),!1;var d=Error(s(520),{cause:r});if(d=I(d,i),fi===null?fi=[d]:fi.push(d),Ht!==4&&(Ht=2),a===null)return!0;r=I(r,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=h&-h,i.lanes|=t,t=Ss(i.stateNode,r,t),ts(i,t),!1;case 1:if(a=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(_a===null||!_a.has(d))))return i.flags|=65536,h&=-h,i.lanes|=h,h=gu(h),pu(h,t,i,r),ts(i,h),!1}i=i.return}while(i!==null);return!1}function Ft(t,a,i,r){a.child=t===null?$h(a,null,i,r):Tn(a,t.child,i,r)}function mu(t,a,i,r,h){i=i.render;var d=a.ref;if("ref"in r){var v={};for(var C in r)C!=="ref"&&(v[C]=r[C])}else v=r;return Da(a),r=is(t,a,i,v,d,h),C=ls(),t!==null&&!Qt?(ss(t,a,h),Ve(t,a,h)):(vt&&C&&gt(a),a.flags|=1,Ft(t,a,r,h),a.child)}function vu(t,a,i,r,h){if(t===null){var d=i.type;return typeof d=="function"&&!Ps(d)&&d.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=d,yu(t,a,d,r,h)):(t=tl(i.type,null,r,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!As(t,h)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:Hi,i(v,r)&&t.ref===a.ref)return Ve(t,a,h)}return a.flags|=1,t=je(d,r),t.ref=a.ref,t.return=a,a.child=t}function yu(t,a,i,r,h){if(t!==null){var d=t.memoizedProps;if(Hi(d,r)&&t.ref===a.ref)if(Qt=!1,a.pendingProps=r=d,As(t,h))(t.flags&131072)!==0&&(Qt=!0);else return a.lanes=t.lanes,Ve(t,a,h)}return _s(t,a,i,r,h)}function Su(t,a,i){var r=a.pendingProps,h=r.children,d=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if((a.flags&128)!==0){if(r=d!==null?d.baseLanes|i:i,t!==null){for(h=a.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;a.childLanes=d&~r}else a.childLanes=0,a.child=null;return _u(t,a,r,i)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&zi(a,d!==null?d.cachePool:null),d!==null?Ao(a,d):es(),hu(a);else return a.lanes=a.childLanes=536870912,_u(t,a,d!==null?d.baseLanes|i:i,i)}else d!==null?(zi(a,d.cachePool),Ao(a,d),ra(),a.memoizedState=null):(t!==null&&zi(a,null),es(),ra());return Ft(t,a,h,i),a.child}function _u(t,a,i,r){var h=kl();return h=h===null?null:{parent:Ke?zt._currentValue:zt._currentValue2,pool:h},a.memoizedState={baseLanes:i,cachePool:h},t!==null&&zi(a,null),es(),hu(a),t!==null&&wn(t,a,r,!0),null}function Ji(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function _s(t,a,i,r,h){return Da(a),i=is(t,a,i,r,void 0,h),r=ls(),t!==null&&!Qt?(ss(t,a,h),Ve(t,a,h)):(vt&&r&&gt(a),a.flags|=1,Ft(t,a,i,h),a.child)}function Eu(t,a,i,r,h,d){return Da(a),a.updateQueue=null,i=Ro(a,r,i,h),Mo(t),r=ls(),t!==null&&!Qt?(ss(t,a,d),Ve(t,a,d)):(vt&&r&&gt(a),a.flags|=1,Ft(t,a,i,d),a.child)}function Cu(t,a,i,r,h){if(Da(a),a.stateNode===null){var d=cn,v=i.contextType;typeof v=="object"&&v!==null&&(d=$t(v)),d=new i(r,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=yr,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=r,d.state=a.memoizedState,d.refs={},Il(a),v=i.contextType,d.context=typeof v=="object"&&v!==null?$t(v):cn,d.state=a.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(ys(a,i,v,r),d.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&yr.enqueueReplaceState(d,d.state,null),Pn(a,r,d,h),Kn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(t===null){d=a.stateNode;var C=a.memoizedProps,M=Ga(i,C);d.props=M;var B=d.context,Y=i.contextType;v=cn,typeof Y=="object"&&Y!==null&&(v=$t(Y));var P=i.getDerivedStateFromProps;Y=typeof P=="function"||typeof d.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C||B!==v)&&fu(a,d,r,v),ma=!1;var F=a.memoizedState;d.state=F,Pn(a,r,d,h),Kn(),B=a.memoizedState,C||F!==B||ma?(typeof P=="function"&&(ys(a,i,P,r),B=a.memoizedState),(M=ma||cu(a,i,M,r,F,B,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=B),d.props=r,d.state=B,d.context=v,r=M):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{d=a.stateNode,$l(t,a),v=a.memoizedProps,Y=Ga(i,v),d.props=Y,P=a.pendingProps,F=d.context,B=i.contextType,M=cn,typeof B=="object"&&B!==null&&(M=$t(B)),C=i.getDerivedStateFromProps,(B=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==P||F!==M)&&fu(a,d,r,M),ma=!1,F=a.memoizedState,d.state=F,Pn(a,r,d,h),Kn();var lt=a.memoizedState;v!==P||F!==lt||ma||t!==null&&t.dependencies!==null&&Di(t.dependencies)?(typeof C=="function"&&(ys(a,i,C,r),lt=a.memoizedState),(Y=ma||cu(a,i,Y,r,F,lt,M)||t!==null&&t.dependencies!==null&&Di(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,lt,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,lt,M)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=lt),d.props=r,d.state=lt,d.context=M,r=Y):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),r=!1)}return d=r,Ji(t,a),r=(a.flags&128)!==0,d||r?(d=a.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&r?(a.child=Tn(a,t.child,null,h),a.child=Tn(a,null,i,h)):Ft(t,a,i,h),a.memoizedState=d.state,t=a.child):t=Ve(t,a,h),t}function bu(t,a,i,r){return Xn(),a.flags|=256,Ft(t,a,i,r),a.child}function Es(t){return{baseLanes:t,cachePool:yo()}}function Cs(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=Te),t}function Tu(t,a,i){var r=a.pendingProps,h=!1,d=(a.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),v&&(h=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(vt){if(h?sa(a):ra(),vt){var C=wt,M;(M=C)&&(C=t1(C,Ue),C!==null?(a.memoizedState={dehydrated:C,treeContext:Ya!==null?{id:Qe,overflow:Ze}:null,retryLane:536870912,hydrationErrors:null},M=n(18,null,null,0),M.stateNode=C,M.return=a,a.child=M,ae=a,wt=null,M=!0):M=!1),M||aa(a)}if(C=a.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return ir(C)?a.lanes=32:a.lanes=536870912,null;we(a)}return C=r.children,r=r.fallback,h?(ra(),h=a.mode,C=Fi({mode:"hidden",children:C},h),r=Ba(r,h,i,null),C.return=a,r.return=a,C.sibling=r,a.child=C,h=a.child,h.memoizedState=Es(i),h.childLanes=Cs(t,v,i),a.memoizedState=Sr,r):(sa(a),bs(a,C))}if(M=t.memoizedState,M!==null&&(C=M.dehydrated,C!==null)){if(d)a.flags&256?(sa(a),a.flags&=-257,a=Ts(t,a,i)):a.memoizedState!==null?(ra(),a.child=t.child,a.flags|=128,a=null):(ra(),h=r.fallback,C=a.mode,r=Fi({mode:"visible",children:r.children},C),h=Ba(h,C,i,null),h.flags|=2,r.return=a,h.return=a,r.sibling=h,a.child=r,Tn(a,t.child,null,i),r=a.child,r.memoizedState=Es(i),r.childLanes=Cs(t,v,i),a.memoizedState=Sr,a=h);else if(sa(a),ir(C))v=jf(C).digest,r=Error(s(419)),r.stack="",r.digest=v,qn({value:r,source:null,stack:null}),a=Ts(t,a,i);else if(Qt||wn(t,a,i,!1),v=(i&t.childLanes)!==0,Qt||v){if(v=bt,v!==null&&(r=i&-i,r=(r&42)!==0?1:st(r),r=(r&(v.suspendedLanes|i))!==0?0:r,r!==0&&r!==M.retryLane))throw M.retryLane=r,tn(t,r),ce(v,t,r),ec;nr(C)||Vs(),a=Ts(t,a,i)}else nr(C)?(a.flags|=192,a.child=t.child,a=null):(t=M.treeContext,Se&&(wt=kf(C),ae=a,vt=!0,Xa=null,Ue=!1,t!==null&&(_e[Ee++]=Qe,_e[Ee++]=Ze,_e[Ee++]=Ya,Qe=t.id,Ze=t.overflow,Ya=a)),a=bs(a,r.children),a.flags|=4096);return a}return h?(ra(),h=r.fallback,C=a.mode,M=t.child,d=M.sibling,r=je(M,{mode:"hidden",children:r.children}),r.subtreeFlags=M.subtreeFlags&65011712,d!==null?h=je(d,h):(h=Ba(h,C,i,null),h.flags|=2),h.return=a,r.return=a,r.sibling=h,a.child=r,r=h,h=a.child,C=t.child.memoizedState,C===null?C=Es(i):(M=C.cachePool,M!==null?(d=Ke?zt._currentValue:zt._currentValue2,M=M.parent!==d?{parent:d,pool:d}:M):M=yo(),C={baseLanes:C.baseLanes|i,cachePool:M}),h.memoizedState=C,h.childLanes=Cs(t,v,i),a.memoizedState=Sr,r):(sa(a),i=t.child,t=i.sibling,i=je(i,{mode:"visible",children:r.children}),i.return=a,i.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=i,a.memoizedState=null,i)}function bs(t,a){return a=Fi({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Fi(t,a){return t=n(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ts(t,a,i){return Tn(a,t.child,null,i),t=bs(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function xu(t,a,i){t.lanes|=a;var r=t.alternate;r!==null&&(r.lanes|=a),Ql(t.return,a,i)}function xs(t,a,i,r,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:h}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=i,d.tailMode=h)}function Au(t,a,i){var r=a.pendingProps,h=r.revealOrder,d=r.tail;if(Ft(t,a,r.children,i),r=Vt.current,(r&2)!==0)r=r&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xu(t,i,a);else if(t.tag===19)xu(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break t;for(;t.sibling===null;){if(t.return===null||t.return===a)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(_(Vt,r),h){case"forwards":for(i=a.child,h=null;i!==null;)t=i.alternate,t!==null&&Qi(t)===null&&(h=i),i=i.sibling;i=h,i===null?(h=a.child,a.child=null):(h=i.sibling,i.sibling=null),xs(a,!1,h,i,d);break;case"backwards":for(i=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&Qi(t)===null){a.child=h;break}t=h.sibling,h.sibling=i,i=h,h=t}xs(a,!0,i,null,d);break;case"together":xs(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ve(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Sa|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(wn(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,i=je(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=je(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function As(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Di(t)))}function H0(t,a,i){switch(a.tag){case 3:It(a,a.stateNode.containerInfo),na(a,zt,t.memoizedState.cache),Xn();break;case 27:case 5:Pl(a);break;case 4:It(a,a.stateNode.containerInfo);break;case 10:na(a,a.type,a.memoizedProps.value);break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(sa(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Tu(t,a,i):(sa(a),t=Ve(t,a,i),t!==null?t.sibling:null);sa(a);break;case 19:var h=(t.flags&128)!==0;if(r=(i&a.childLanes)!==0,r||(wn(t,a,i,!1),r=(i&a.childLanes)!==0),h){if(r)return Au(t,a,i);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),_(Vt,Vt.current),r)break;return null;case 22:case 23:return a.lanes=0,Su(t,a,i);case 24:na(a,zt,t.memoizedState.cache)}return Ve(t,a,i)}function Mu(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)Qt=!0;else{if(!As(t,i)&&(a.flags&128)===0)return Qt=!1,H0(t,a,i);Qt=(t.flags&131072)!==0}else Qt=!1,vt&&(a.flags&1048576)!==0&&Gt(a,ol,a.index);switch(a.lanes=0,a.tag){case 16:t:{t=a.pendingProps;var r=a.elementType,h=r._init;if(r=h(r._payload),a.type=r,typeof r=="function")Ps(r)?(t=Ga(r,t),a.tag=1,a=Cu(null,a,r,t,i)):(a.tag=0,a=_s(null,a,r,t,i));else{if(r!=null){if(h=r.$$typeof,h===Ws){a.tag=11,a=mu(null,a,r,t,i);break t}else if(h===tr){a.tag=14,a=vu(null,a,r,t,i);break t}}throw a=S(r)||r,Error(s(306,a,""))}}return a;case 0:return _s(t,a,a.type,a.pendingProps,i);case 1:return r=a.type,h=Ga(r,a.pendingProps),Cu(t,a,r,h,i);case 3:t:{if(It(a,a.stateNode.containerInfo),t===null)throw Error(s(387));var d=a.pendingProps;h=a.memoizedState,r=h.element,$l(t,a),Pn(a,d,null,i);var v=a.memoizedState;if(d=v.cache,na(a,zt,d),d!==h.cache&&Zl(a,[zt],i,!0),Kn(),d=v.element,Se&&h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=bu(t,a,d,i);break t}else if(d!==r){r=I(Error(s(424)),a),qn(r),a=bu(t,a,d,i);break t}else for(Se&&(wt=Ff(a.stateNode.containerInfo),ae=a,vt=!0,Xa=null,Ue=!0),i=$h(a,null,d,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Xn(),d===r){a=Ve(t,a,i);break t}Ft(t,a,d,i)}a=a.child}return a;case 26:if(Ne)return Ji(t,a),t===null?(i=Yh(a.type,null,a.pendingProps,null))?a.memoizedState=i:vt||(a.stateNode=f1(a.type,a.pendingProps,pa.current,a)):a.memoizedState=Yh(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:if(qt)return Pl(a),t===null&&qt&&vt&&(r=a.stateNode=Kh(a.type,a.pendingProps,pa.current,kt.current,!1),ae=a,Ue=!0,wt=Wf(a.type,r,wt)),Ft(t,a,a.pendingProps.children,i),Ji(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&vt&&(u1(a.type,a.pendingProps,kt.current),(h=r=wt)&&(r=If(r,a.type,a.pendingProps,Ue),r!==null?(a.stateNode=r,ae=a,wt=Jf(r),Ue=!1,h=!0):h=!1),h||aa(a)),Pl(a),h=a.type,d=a.pendingProps,v=t!==null?t.memoizedProps:null,r=d.children,nl(h,d)?r=null:v!==null&&nl(h,v)&&(a.flags|=32),a.memoizedState!==null&&(h=is(t,a,R0,null,null,i),Ke?La._currentValue=h:La._currentValue2=h),Ji(t,a),Ft(t,a,r,i),a.child;case 6:return t===null&&vt&&(h1(a.pendingProps,kt.current),(t=i=wt)&&(i=$f(i,a.pendingProps,Ue),i!==null?(a.stateNode=i,ae=a,wt=null,t=!0):t=!1),t||aa(a)),null;case 13:return Tu(t,a,i);case 4:return It(a,a.stateNode.containerInfo),r=a.pendingProps,t===null?a.child=Tn(a,null,r,i):Ft(t,a,r,i),a.child;case 11:return mu(t,a,a.type,a.pendingProps,i);case 7:return Ft(t,a,a.pendingProps,i),a.child;case 8:return Ft(t,a,a.pendingProps.children,i),a.child;case 12:return Ft(t,a,a.pendingProps.children,i),a.child;case 10:return r=a.pendingProps,na(a,a.type,r.value),Ft(t,a,r.children,i),a.child;case 9:return h=a.type._context,r=a.pendingProps.children,Da(a),h=$t(h),r=r(h),a.flags|=1,Ft(t,a,r,i),a.child;case 14:return vu(t,a,a.type,a.pendingProps,i);case 15:return yu(t,a,a.type,a.pendingProps,i);case 19:return Au(t,a,i);case 31:return r=a.pendingProps,i=a.mode,r={mode:r.mode,children:r.children},t===null?(i=Fi(r,i),i.ref=a.ref,a.child=i,i.return=a,a=i):(i=je(t.child,r),i.ref=a.ref,a.child=i,i.return=a,a=i),a;case 22:return Su(t,a,i);case 24:return Da(a),r=$t(zt),t===null?(h=kl(),h===null&&(h=bt,d=Jl(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=i),h=d),a.memoizedState={parent:r,cache:h},Il(a),na(a,zt,h)):((t.lanes&i)!==0&&($l(t,a),Pn(a,null,null,i),Kn()),h=t.memoizedState,d=a.memoizedState,h.parent!==r?(h={parent:r,cache:r},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),na(a,zt,r)):(r=d.cache,na(a,zt,r),r!==h.cache&&Zl(a,[zt],i,!0))),Ft(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function ue(t){t.flags|=4}function Ru(t,a){if(t!==null&&t.child===a.child)return!1;if((a.flags&16)!==0)return!0;for(t=a.child;t!==null;){if((t.flags&13878)!==0||(t.subtreeFlags&13878)!==0)return!0;t=t.sibling}return!1}function Ms(t,a,i,r){if(te)for(i=a.child;i!==null;){if(i.tag===5||i.tag===6)ar(t,i.stateNode);else if(!(i.tag===4||qt&&i.tag===27)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else if(ga)for(var h=a.child;h!==null;){if(h.tag===5){var d=h.stateNode;i&&r&&(d=zh(d,h.type,h.memoizedProps)),ar(t,d)}else if(h.tag===6)d=h.stateNode,i&&r&&(d=Hh(d,h.memoizedProps)),ar(t,d);else if(h.tag!==4){if(h.tag===22&&h.memoizedState!==null)d=h.child,d!==null&&(d.return=h),Ms(t,h,!0,!0);else if(h.child!==null){h.child.return=h,h=h.child;continue}}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}}function Nu(t,a,i,r){var h=!1;if(ga)for(var d=a.child;d!==null;){if(d.tag===5){var v=d.stateNode;i&&r&&(v=zh(v,d.type,d.memoizedProps)),Dh(t,v)}else if(d.tag===6)v=d.stateNode,i&&r&&(v=Hh(v,d.memoizedProps)),Dh(t,v);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)h=d.child,h!==null&&(h.return=d),Nu(t,d,!0,!0),h=!0;else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return h;d=d.return}d.sibling.return=d.return,d=d.sibling}return h}function Ou(t,a){if(ga&&Ru(t,a)){t=a.stateNode;var i=t.containerInfo,r=Oh();Nu(r,a,!1,!1),t.pendingChildren=r,ue(a),Vf(i,r)}}function Rs(t,a,i,r){if(te)t.memoizedProps!==r&&ue(a);else if(ga){var h=t.stateNode,d=t.memoizedProps;if((t=Ru(t,a))||d!==r){var v=kt.current;d=wf(h,i,d,r,!t,null),d===h?a.stateNode=h:(xh(d,i,r,v)&&ue(a),a.stateNode=d,t?Ms(d,a,!1,!1):ue(a))}else a.stateNode=h}}function Ns(t,a,i){if(pf(a,i)){if(t.flags|=16777216,!Mh(a,i))if(eh())t.flags|=8192;else throw yn=gl,pr}else t.flags&=-16777217}function Du(t,a){if(g1(a)){if(t.flags|=16777216,!jh(a))if(eh())t.flags|=8192;else throw yn=gl,pr}else t.flags&=-16777217}function ki(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?K():536870912,t.lanes|=a,Mn|=a)}function kn(t,a){if(!vt)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,r=0;if(a)for(var h=t.child;h!==null;)i|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)i|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=r,t.childLanes=i,a}function B0(t,a,i){var r=a.pendingProps;switch(Nt(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return i=a.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Xe(zt),Ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yn(a)?ue(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,uo())),Ou(t,a),Ot(a),null;case 26:if(Ne){i=a.type;var h=a.memoizedState;return t===null?(ue(a),h!==null?(Ot(a),Du(a,h)):(Ot(a),Ns(a,i,r))):h?h!==t.memoizedState?(ue(a),Ot(a),Du(a,h)):(Ot(a),a.flags&=-16777217):(te?t.memoizedProps!==r&&ue(a):Rs(t,a,i,r),Ot(a),Ns(a,i,r)),null}case 27:if(qt){if(Oi(a),i=pa.current,h=a.type,t!==null&&a.stateNode!=null)te?t.memoizedProps!==r&&ue(a):Rs(t,a,h,r);else{if(!r){if(a.stateNode===null)throw Error(s(166));return Ot(a),null}t=kt.current,Yn(a)?ro(a,t):(t=Kh(h,r,i,t,!0),a.stateNode=t,ue(a))}return Ot(a),null}case 5:if(Oi(a),i=a.type,t!==null&&a.stateNode!=null)Rs(t,a,i,r);else{if(!r){if(a.stateNode===null)throw Error(s(166));return Ot(a),null}t=kt.current,Yn(a)?ro(a,t):(h=rf(i,r,pa.current,t,a),Ms(h,a,!1,!1),a.stateNode=h,xh(h,i,r,t)&&ue(a))}return Ot(a),Ns(a,a.type,a.pendingProps),null;case 6:if(t&&a.stateNode!=null)i=t.memoizedProps,te?i!==r&&ue(a):ga&&(i!==r?(a.stateNode=Ah(r,pa.current,kt.current,a),ue(a)):a.stateNode=t.stateNode);else{if(typeof r!="string"&&a.stateNode===null)throw Error(s(166));if(t=pa.current,i=kt.current,Yn(a)){if(!Se)throw Error(s(176));if(t=a.stateNode,i=a.memoizedProps,r=null,h=ae,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}a1(t,i,a,r)||aa(a)}else a.stateNode=Ah(r,t,i,a)}return Ot(a),null;case 13:if(r=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Yn(a),r!==null&&r.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(!Se)throw Error(s(344));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));n1(h,a)}else Xn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),h=!1}else h=uo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(we(a),a):(we(a),null)}if(we(a),(a.flags&128)!==0)return a.lanes=i,a;if(i=r!==null,t=t!==null&&t.memoizedState!==null,i){r=a.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool);var d=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048)}return i!==t&&i&&(a.child.flags|=8192),ki(a,a.updateQueue),Ot(a),null;case 4:return Ia(),Ou(t,a),t===null&&cf(a.stateNode.containerInfo),Ot(a),null;case 10:return Xe(a.type),Ot(a),null;case 19:if(b(Vt),h=a.memoizedState,h===null)return Ot(a),null;if(r=(a.flags&128)!==0,d=h.rendering,d===null)if(r)kn(h,!1);else{if(Ht!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Qi(t),d!==null){for(a.flags|=128,kn(h,!1),t=d.updateQueue,a.updateQueue=t,ki(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)ph(i,t),i=i.sibling;return _(Vt,Vt.current&1|2),a.child}t=t.sibling}h.tail!==null&&Oe()>di&&(a.flags|=128,r=!0,kn(h,!1),a.lanes=4194304)}else{if(!r)if(t=Qi(d),t!==null){if(a.flags|=128,r=!0,t=t.updateQueue,a.updateQueue=t,ki(a,t),kn(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!vt)return Ot(a),null}else 2*Oe()-h.renderingStartTime>di&&i!==536870912&&(a.flags|=128,r=!0,kn(h,!1),a.lanes=4194304);h.isBackwards?(d.sibling=a.child,a.child=d):(t=h.last,t!==null?t.sibling=d:a.child=d,h.last=d)}return h.tail!==null?(a=h.tail,h.rendering=a,h.tail=a.sibling,h.renderingStartTime=Oe(),a.sibling=null,t=Vt.current,_(Vt,r?t&1|2:t&1),a):(Ot(a),null);case 22:case 23:return we(a),as(),r=a.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(i&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),i=a.updateQueue,i!==null&&ki(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048),t!==null&&b(wa),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Xe(zt),Ot(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function U0(t,a){switch(Nt(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Xe(zt),Ia(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Oi(a),null;case 13:if(we(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Xn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return b(Vt),null;case 4:return Ia(),null;case 10:return Xe(a.type),null;case 22:case 23:return we(a),as(),t!==null&&b(wa),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Xe(zt),null;case 25:return null;default:return null}}function Gu(t,a){switch(Nt(a),a.tag){case 3:Xe(zt),Ia();break;case 26:case 27:case 5:Oi(a);break;case 4:Ia();break;case 13:we(a);break;case 19:b(Vt);break;case 10:Xe(a.type);break;case 22:case 23:we(a),as(),t!==null&&b(wa);break;case 24:Xe(zt)}}function Wn(t,a){try{var i=a.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var h=r.next;i=h;do{if((i.tag&t)===t){r=void 0;var d=i.create,v=i.inst;r=d(),v.destroy=r}i=i.next}while(i!==h)}}catch(C){St(a,a.return,C)}}function oa(t,a,i){try{var r=a.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var d=h.next;r=d;do{if((r.tag&t)===t){var v=r.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,h=a;var M=i,B=C;try{B()}catch(Y){St(h,M,Y)}}}r=r.next}while(r!==d)}}catch(Y){St(a,a.return,Y)}}function zu(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{xo(a,i)}catch(r){St(t,t.return,r)}}}function Hu(t,a,i){i.props=Ga(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(r){St(t,a,r)}}function In(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var r=ai(t.stateNode);break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof i=="function"?t.refCleanup=i(r):i.current=r}}catch(h){St(t,a,h)}}function He(t,a){var i=t.ref,r=t.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(h){St(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){St(t,a,h)}else i.current=null}function Bu(t){var a=t.type,i=t.memoizedProps,r=t.stateNode;try{Of(r,a,i,t)}catch(h){St(t,t.return,h)}}function Os(t,a,i){try{Df(t.stateNode,t.type,i,a,t)}catch(r){St(t,t.return,r)}}function Uu(t){return t.tag===5||t.tag===3||(Ne?t.tag===26:!1)||(qt?t.tag===27&&un(t.type):!1)||t.tag===4}function Ds(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Uu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(qt&&t.tag===27&&un(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gs(t,a,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?zf(i,t,a):Rf(i,t);else if(r!==4&&(qt&&r===27&&un(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Gs(t,a,i),t=t.sibling;t!==null;)Gs(t,a,i),t=t.sibling}function Wi(t,a,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?Gf(i,t,a):Mf(i,t);else if(r!==4&&(qt&&r===27&&un(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Wi(t,a,i),t=t.sibling;t!==null;)Wi(t,a,i),t=t.sibling}function Lu(t,a,i){t=t.containerInfo;try{Gh(t,i)}catch(r){St(a,a.return,r)}}function Yu(t){var a=t.stateNode,i=t.memoizedProps;try{m1(t.type,i,a,t)}catch(r){St(t,t.return,r)}}function L0(t,a){for(lf(t.containerInfo),Zt=a;Zt!==null;)if(t=Zt,a=t.child,(t.subtreeFlags&1024)!==0&&a!==null)a.return=t,Zt=a;else for(;Zt!==null;){t=Zt;var i=t.alternate;switch(a=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&i!==null){a=void 0;var r=t,h=i.memoizedProps;i=i.memoizedState;var d=r.stateNode;try{var v=Ga(r.type,h,r.elementType===r.type);a=d.getSnapshotBeforeUpdate(v,i),d.__reactInternalSnapshotBeforeUpdate=a}catch(C){St(r,r.return,C)}}break;case 3:(a&1024)!==0&&te&&qf(t.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=t.sibling,a!==null){a.return=t.return,Zt=a;break}Zt=t.return}}function Xu(t,a,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:ua(t,i),r&4&&Wn(5,i);break;case 1:if(ua(t,i),r&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(v){St(i,i.return,v)}else{var h=Ga(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){St(i,i.return,v)}}r&64&&zu(i),r&512&&In(i,i.return);break;case 3:if(ua(t,i),r&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=ai(i.child.stateNode);break;case 1:a=i.child.stateNode}try{xo(t,a)}catch(v){St(i,i.return,v)}}break;case 27:qt&&a===null&&r&4&&Yu(i);case 26:case 5:ua(t,i),a===null&&r&4&&Bu(i),r&512&&In(i,i.return);break;case 12:ua(t,i);break;case 13:ua(t,i),r&4&&wu(t,i),r&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=K0.bind(null,i),Kf(t,i))));break;case 22:if(r=i.memoizedState!==null||Fe,!r){a=a!==null&&a.memoizedState!==null||Ut,h=Fe;var d=Ut;Fe=r,(Ut=a)&&!d?ha(t,i,(i.subtreeFlags&8772)!==0):ua(t,i),Fe=h,Ut=d}break;case 30:break;default:ua(t,i)}}function qu(t){var a=t.alternate;a!==null&&(t.alternate=null,qu(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&gf(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Re(t,a,i){for(i=i.child;i!==null;)zs(t,a,i),i=i.sibling}function zs(t,a,i){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(li,i)}catch{}switch(i.tag){case 26:if(Ne){Ut||He(i,a),Re(t,a,i),i.memoizedState?qh(i.memoizedState):i.stateNode&&Vh(i.stateNode);break}case 27:if(qt){Ut||He(i,a);var r=Xt,h=le;un(i.type)&&(Xt=i.stateNode,le=!1),Re(t,a,i),Ph(i.stateNode),Xt=r,le=h;break}case 5:Ut||He(i,a);case 6:if(te){if(r=Xt,h=le,Xt=null,Re(t,a,i),Xt=r,le=h,Xt!==null)if(le)try{Bf(Xt,i.stateNode)}catch(d){St(i,a,d)}else try{Hf(Xt,i.stateNode)}catch(d){St(i,a,d)}}else Re(t,a,i);break;case 18:te&&Xt!==null&&(le?o1(Xt,i.stateNode):r1(Xt,i.stateNode));break;case 4:te?(r=Xt,h=le,Xt=i.stateNode.containerInfo,le=!0,Re(t,a,i),Xt=r,le=h):(ga&&Lu(i.stateNode,i,Oh()),Re(t,a,i));break;case 0:case 11:case 14:case 15:Ut||oa(2,i,a),Ut||oa(4,i,a),Re(t,a,i);break;case 1:Ut||(He(i,a),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Hu(i,a,r)),Re(t,a,i);break;case 21:Re(t,a,i);break;case 22:Ut=(r=Ut)||i.memoizedState!==null,Re(t,a,i),Ut=r;break;default:Re(t,a,i)}}function wu(t,a){if(Se&&a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{s1(t)}catch(i){St(a,a.return,i)}}function Y0(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new ac),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new ac),a;default:throw Error(s(435,t.tag))}}function Hs(t,a){var i=Y0(t);a.forEach(function(r){var h=P0.bind(null,t,r);i.has(r)||(i.add(r),r.then(h,h))})}function ee(t,a){var i=a.deletions;if(i!==null)for(var r=0;r<i.length;r++){var h=i[r],d=t,v=a;if(te){var C=v;t:for(;C!==null;){switch(C.tag){case 27:if(qt){if(un(C.type)){Xt=C.stateNode,le=!1;break t}break}case 5:Xt=C.stateNode,le=!1;break t;case 3:case 4:Xt=C.stateNode.containerInfo,le=!0;break t}C=C.return}if(Xt===null)throw Error(s(160));zs(d,v,h),Xt=null,le=!1}else zs(d,v,h);d=h.alternate,d!==null&&(d.return=null),h.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Vu(a,t),a=a.sibling}function Vu(t,a){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ee(a,t),ie(t),r&4&&(oa(3,t,t.return),Wn(3,t),oa(5,t,t.return));break;case 1:ee(a,t),ie(t),r&512&&(Ut||i===null||He(i,i.return)),r&64&&Fe&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:if(Ne){var h=De;if(ee(a,t),ie(t),r&512&&(Ut||i===null||He(i,i.return)),r&4){r=i!==null?i.memoizedState:null;var d=t.memoizedState;i===null?d===null?t.stateNode===null?t.stateNode=c1(h,t.type,t.memoizedProps,t):wh(h,t.type,t.stateNode):t.stateNode=Xh(h,d,t.memoizedProps):r!==d?(r===null?i.stateNode!==null&&Vh(i.stateNode):qh(r),d===null?wh(h,t.type,t.stateNode):Xh(h,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Os(t,t.memoizedProps,i.memoizedProps)}break}case 27:if(qt){ee(a,t),ie(t),r&512&&(Ut||i===null||He(i,i.return)),i!==null&&r&4&&Os(t,t.memoizedProps,i.memoizedProps);break}case 5:if(ee(a,t),ie(t),r&512&&(Ut||i===null||He(i,i.return)),te){if(t.flags&32){h=t.stateNode;try{Nh(h)}catch(Y){St(t,t.return,Y)}}r&4&&t.stateNode!=null&&(h=t.memoizedProps,Os(t,h,i!==null?i.memoizedProps:h)),r&1024&&(_r=!0)}break;case 6:if(ee(a,t),ie(t),r&4&&te){if(t.stateNode===null)throw Error(s(162));r=t.memoizedProps,i=i!==null?i.memoizedProps:r,h=t.stateNode;try{Nf(h,i,r)}catch(Y){St(t,t.return,Y)}}break;case 3:if(Ne?(d1(),h=De,De=lr(a.containerInfo),ee(a,t),De=h):ee(a,t),ie(t),r&4){if(te&&Se&&i!==null&&i.memoizedState.isDehydrated)try{l1(a.containerInfo)}catch(Y){St(t,t.return,Y)}if(ga){r=a.containerInfo,i=a.pendingChildren;try{Gh(r,i)}catch(Y){St(t,t.return,Y)}}}_r&&(_r=!1,ju(t));break;case 4:Ne?(i=De,De=lr(t.stateNode.containerInfo),ee(a,t),ie(t),De=i):(ee(a,t),ie(t)),r&4&&ga&&Lu(t.stateNode,t,t.stateNode.pendingChildren);break;case 12:ee(a,t),ie(t);break;case 13:ee(a,t),ie(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Tr=Oe()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Hs(t,r)));break;case 22:h=t.memoizedState!==null;var v=i!==null&&i.memoizedState!==null,C=Fe,M=Ut;if(Fe=C||h,Ut=M||v,ee(a,t),Ut=M,Fe=C,ie(t),r&8192&&(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(i===null||v||Fe||Ut||za(t)),te)){t:if(i=null,te)for(a=t;;){if(a.tag===5||Ne&&a.tag===26){if(i===null){v=i=a;try{d=v.stateNode,h?Uf(d):Yf(v.stateNode,v.memoizedProps)}catch(Y){St(v,v.return,Y)}}}else if(a.tag===6){if(i===null){v=a;try{var B=v.stateNode;h?Lf(B):Xf(B,v.memoizedProps)}catch(Y){St(v,v.return,Y)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break t;for(;a.sibling===null;){if(a.return===null||a.return===t)break t;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}}r&4&&(r=t.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,Hs(t,i))));break;case 19:ee(a,t),ie(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Hs(t,r)));break;case 30:break;case 21:break;default:ee(a,t),ie(t)}}function ie(t){var a=t.flags;if(a&2){try{if(te){for(var i,r=t.return;r!==null;){if(Uu(r)){i=r;break}r=r.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:if(qt){var h=i.stateNode,d=Ds(t);Wi(t,d,h);break}case 5:var v=i.stateNode;i.flags&32&&(Nh(v),i.flags&=-33);var C=Ds(t);Wi(t,C,v);break;case 3:case 4:var M=i.stateNode.containerInfo,B=Ds(t);Gs(t,B,M);break;default:throw Error(s(161))}}}catch(Y){St(t,t.return,Y)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function ju(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;ju(a),a.tag===5&&a.flags&1024&&yf(a.stateNode),t=t.sibling}}function ua(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xu(t,a.alternate,a),a=a.sibling}function za(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:oa(4,a,a.return),za(a);break;case 1:He(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Hu(a,a.return,i),za(a);break;case 27:qt&&Ph(a.stateNode);case 26:case 5:He(a,a.return),za(a);break;case 22:a.memoizedState===null&&za(a);break;case 30:za(a);break;default:za(a)}t=t.sibling}}function ha(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,h=t,d=a,v=d.flags;switch(d.tag){case 0:case 11:case 15:ha(h,d,i),Wn(4,d);break;case 1:if(ha(h,d,i),r=d,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){St(r,r.return,B)}if(r=d,h=r.updateQueue,h!==null){var C=r.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)To(M[h],C)}catch(B){St(r,r.return,B)}}i&&v&64&&zu(d),In(d,d.return);break;case 27:qt&&Yu(d);case 26:case 5:ha(h,d,i),i&&r===null&&v&4&&Bu(d),In(d,d.return);break;case 12:ha(h,d,i);break;case 13:ha(h,d,i),i&&v&4&&wu(h,d);break;case 22:d.memoizedState===null&&ha(h,d,i),In(d,d.return);break;case 30:break;default:ha(h,d,i)}a=a.sibling}}function Bs(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Vn(i))}function Us(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Vn(t))}function Be(t,a,i,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ku(t,a,i,r),a=a.sibling}function Ku(t,a,i,r){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Be(t,a,i,r),h&2048&&Wn(9,a);break;case 1:Be(t,a,i,r);break;case 3:Be(t,a,i,r),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Vn(t)));break;case 12:if(h&2048){Be(t,a,i,r),t=a.stateNode;try{var d=a.memoizedProps,v=d.id,C=d.onPostCommit;typeof C=="function"&&C(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){St(a,a.return,M)}}else Be(t,a,i,r);break;case 13:Be(t,a,i,r);break;case 23:break;case 22:d=a.stateNode,v=a.alternate,a.memoizedState!==null?d._visibility&2?Be(t,a,i,r):$n(t,a):d._visibility&2?Be(t,a,i,r):(d._visibility|=2,an(t,a,i,r,(a.subtreeFlags&10256)!==0)),h&2048&&Bs(v,a);break;case 24:Be(t,a,i,r),h&2048&&Us(a.alternate,a);break;default:Be(t,a,i,r)}}function an(t,a,i,r,h){for(h=h&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var d=t,v=a,C=i,M=r,B=v.flags;switch(v.tag){case 0:case 11:case 15:an(d,v,C,M,h),Wn(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?an(d,v,C,M,h):$n(d,v):(Y._visibility|=2,an(d,v,C,M,h)),h&&B&2048&&Bs(v.alternate,v);break;case 24:an(d,v,C,M,h),h&&B&2048&&Us(v.alternate,v);break;default:an(d,v,C,M,h)}a=a.sibling}}function $n(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,r=a,h=r.flags;switch(r.tag){case 22:$n(i,r),h&2048&&Bs(r.alternate,r);break;case 24:$n(i,r),h&2048&&Us(r.alternate,r);break;default:$n(i,r)}a=a.sibling}}function Ha(t){if(t.subtreeFlags&xn)for(t=t.child;t!==null;)Pu(t),t=t.sibling}function Pu(t){switch(t.tag){case 26:Ha(t),t.flags&xn&&(t.memoizedState!==null?p1(De,t.memoizedState,t.memoizedProps):Rh(t.type,t.memoizedProps));break;case 5:Ha(t),t.flags&xn&&Rh(t.type,t.memoizedProps);break;case 3:case 4:if(Ne){var a=De;De=lr(t.stateNode.containerInfo),Ha(t),De=a}else Ha(t);break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=xn,xn=16777216,Ha(t),xn=a):Ha(t));break;default:Ha(t)}}function Qu(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function ti(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Zt=r,Ju(r,t)}Qu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zu(t),t=t.sibling}function Zu(t){switch(t.tag){case 0:case 11:case 15:ti(t),t.flags&2048&&oa(9,t,t.return);break;case 3:ti(t);break;case 12:ti(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Ii(t)):ti(t);break;default:ti(t)}}function Ii(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Zt=r,Ju(r,t)}Qu(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:oa(8,a,a.return),Ii(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Ii(a));break;default:Ii(a)}t=t.sibling}}function Ju(t,a){for(;Zt!==null;){var i=Zt;switch(i.tag){case 0:case 11:case 15:oa(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Vn(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Zt=r;else t:for(i=t;Zt!==null;){r=Zt;var h=r.sibling,d=r.return;if(qu(r),r===i){Zt=null;break t}if(h!==null){h.return=d,Zt=h;break t}Zt=d}}}function Ls(t){var a=hf(t);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(s(364));return a}if(t=Ef(t),t===null)throw Error(s(362));return t.stateNode.current}function Ys(t,a){var i=t.tag;switch(a.$$typeof){case Sl:if(t.type===a.value)return!0;break;case _l:t:{for(a=a.value,t=[t,0],i=0;i<t.length;){var r=t[i++],h=r.tag,d=t[i++],v=a[d];if(h!==5&&h!==26&&h!==27||!ii(r)){for(;v!=null&&Ys(r,v);)d++,v=a[d];if(d===a.length){a=!0;break t}else for(r=r.child;r!==null;)t.push(r,d),r=r.sibling}}a=!1}return a;case El:if((i===5||i===26||i===27)&&Tf(t.stateNode,a.value))return!0;break;case bl:if((i===5||i===6||i===26||i===27)&&(t=bf(t),t!==null&&0<=t.indexOf(a.value)))return!0;break;case Cl:if((i===5||i===26||i===27)&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Xs(t){switch(t.$$typeof){case Sl:return"<"+(S(t.value)||"Unknown")+">";case _l:return":has("+(Xs(t)||"")+")";case El:return'[role="'+t.value+'"]';case bl:return'"'+t.value+'"';case Cl:return'[data-testname="'+t.value+'"]';default:throw Error(s(365))}}function Fu(t,a){var i=[];t=[t,0];for(var r=0;r<t.length;){var h=t[r++],d=h.tag,v=t[r++],C=a[v];if(d!==5&&d!==26&&d!==27||!ii(h)){for(;C!=null&&Ys(h,C);)v++,C=a[v];if(v===a.length)i.push(h);else for(h=h.child;h!==null;)t.push(h,v),h=h.sibling}}return i}function qs(t,a){if(!ni)throw Error(s(363));t=Ls(t),t=Fu(t,a),a=[],t=Array.from(t);for(var i=0;i<t.length;){var r=t[i++],h=r.tag;if(h===5||h===26||h===27)ii(r)||a.push(r.stateNode);else for(r=r.child;r!==null;)t.push(r),r=r.sibling}return a}function he(){if((ht&2)!==0&&dt!==0)return dt&-dt;if(at.T!==null){var t=mn;return t!==0?t:Fl()}return ff()}function ku(){Te===0&&(Te=(dt&536870912)===0||vt?z():536870912);var t=be.current;return t!==null&&(t.flags|=32),Te}function ce(t,a,i){(t===bt&&(_t===2||_t===9)||t.cancelPendingCommit!==null)&&(nn(t,0),ca(t,dt,Te,!1)),Q(t,i),((ht&2)===0||t!==bt)&&(t===bt&&((ht&2)===0&&(ja|=i),Ht===4&&ca(t,dt,Te,!1)),ze(t))}function Wu(t,a,i){if((ht&6)!==0)throw Error(s(327));var r=!i&&(a&124)===0&&(a&t.expiredLanes)===0||R(t,a),h=r?w0(t,a):js(t,a,!0),d=r;do{if(h===0){An&&!r&&ca(t,a,0,!1);break}else{if(i=t.current.alternate,d&&!X0(i)){h=js(t,a,!1),d=!1;continue}if(h===2){if(d=a,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var C=t;h=fi;var M=Se&&C.current.memoizedState.isDehydrated;if(M&&(nn(C,v).flags|=256),v=js(C,v,!1),v!==2){if(Er&&!M){C.errorRecoveryDisabledLanes|=d,ja|=d,h=4;break t}d=se,se=h,d!==null&&(se===null?se=d:se.push.apply(se,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){nn(t,0),ca(t,a,0,!0);break}t:{switch(r=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ca(r,a,Te,!ya);break t;case 2:se=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(h=Tr+300-Oe(),10<h)){if(ca(r,a,Te,!ya),D(r,0,!0)!==0)break t;r.timeoutHandle=of(Iu.bind(null,r,i,se,Tl,br,a,Te,ja,Mn,ya,d,2,-0,0),h);break t}Iu(r,i,se,Tl,br,a,Te,ja,Mn,ya,d,0,-0,0)}}break}while(!0);ze(t)}function Iu(t,a,i,r,h,d,v,C,M,B,Y,P,F,lt){if(t.timeoutHandle=Ua,P=a.subtreeFlags,(P&8192||(P&16785408)===16785408)&&(mf(),Pu(a),P=vf(),P!==null)){t.cancelPendingCommit=P(rh.bind(null,t,a,d,i,r,h,v,C,M,Y,1,F,lt)),ca(t,d,v,!B);return}rh(t,a,d,i,r,h,v,C,M)}function X0(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var h=i[r],d=h.getSnapshot;h=h.value;try{if(!pe(d(),h))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ca(t,a,i,r){a&=~Cr,a&=~ja,t.suspendedLanes|=a,t.pingedLanes&=~a,r&&(t.warmLanes|=a),r=t.expirationTimes;for(var h=a;0<h;){var d=31-de(h),v=1<<d;r[d]=-1,h&=~v}i!==0&&tt(t,i,a)}function $u(){return(ht&6)===0?($a(0),!1):!0}function ws(){if(ut!==null){if(_t===0)var t=ut.return;else t=ut,Je=qa=null,rs(t),bn=null,hi=0,t=ut;for(;t!==null;)Gu(t.alternate,t),t=t.return;ut=null}}function nn(t,a){var i=t.timeoutHandle;i!==Ua&&(t.timeoutHandle=Ua,uf(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),ws(),bt=t,ut=i=je(t.current,null),dt=a,_t=0,me=null,ya=!1,An=R(t,a),Er=!1,Mn=Te=Cr=ja=Sa=Ht=0,se=fi=null,br=!1,(a&8)!==0&&(a|=a&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=a;0<r;){var h=31-de(r),d=1<<h;a|=t[h],r&=~d}return ke=a,Ui(),i}function th(t,a){rt=null,at.H=yl,a===oi||a===dl?(a=Eo(),_t=3):a===pr?(a=Eo(),_t=4):_t=a===ec?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,me=a,ut===null&&(Ht=1,Zi(t,I(a,t.current)))}function eh(){var t=be.current;return t===null?!0:(dt&4194048)===dt?Le===null:(dt&62914560)===dt||(dt&536870912)!==0?t===Le:!1}function ah(){var t=at.H;return at.H=yl,t===null?yl:t}function nh(){var t=at.A;return at.A=D1,t}function Vs(){Ht=4,ya||(dt&4194048)!==dt&&be.current!==null||(An=!0),(Sa&134217727)===0&&(ja&134217727)===0||bt===null||ca(bt,dt,Te,!1)}function js(t,a,i){var r=ht;ht|=2;var h=ah(),d=nh();(bt!==t||dt!==a)&&(Tl=null,nn(t,a)),a=!1;var v=Ht;t:do try{if(_t!==0&&ut!==null){var C=ut,M=me;switch(_t){case 8:ws(),v=6;break t;case 3:case 2:case 9:case 6:be.current===null&&(a=!0);var B=_t;if(_t=0,me=null,ln(t,C,M,B),i&&An){v=0;break t}break;default:B=_t,_t=0,me=null,ln(t,C,M,B)}}q0(),v=Ht;break}catch(Y){th(t,Y)}while(!0);return a&&t.shellSuspendCounter++,Je=qa=null,ht=r,at.H=h,at.A=d,ut===null&&(bt=null,dt=0,Ui()),v}function q0(){for(;ut!==null;)ih(ut)}function w0(t,a){var i=ht;ht|=2;var r=ah(),h=nh();bt!==t||dt!==a?(Tl=null,di=Oe()+500,nn(t,a)):An=R(t,a);t:do try{if(_t!==0&&ut!==null){a=ut;var d=me;e:switch(_t){case 1:_t=0,me=null,ln(t,a,d,1);break;case 2:case 9:if(So(d)){_t=0,me=null,lh(a);break}a=function(){_t!==2&&_t!==9||bt!==t||(_t=7),ze(t)},d.then(a,a);break t;case 3:_t=7;break t;case 4:_t=5;break t;case 7:So(d)?(_t=0,me=null,lh(a)):(_t=0,me=null,ln(t,a,d,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var C=ut,M=C.type,B=C.pendingProps;if(v?jh(v):Mh(M,B)){_t=0,me=null;var Y=C.sibling;if(Y!==null)ut=Y;else{var P=C.return;P!==null?(ut=P,$i(P)):ut=null}break e}}_t=0,me=null,ln(t,a,d,5);break;case 6:_t=0,me=null,ln(t,a,d,6);break;case 8:ws(),Ht=6;break t;default:throw Error(s(462))}}V0();break}catch(F){th(t,F)}while(!0);return Je=qa=null,at.H=r,at.A=h,ht=i,ut!==null?0:(bt=null,dt=0,Ui(),Ht)}function V0(){for(;ut!==null&&!S1();)ih(ut)}function ih(t){var a=Mu(t.alternate,t,ke);t.memoizedProps=t.pendingProps,a===null?$i(t):ut=a}function lh(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=Eu(i,a,a.pendingProps,a.type,void 0,dt);break;case 11:a=Eu(i,a,a.pendingProps,a.type.render,a.ref,dt);break;case 5:rs(a);default:Gu(i,a),a=ut=ph(a,ke),a=Mu(i,a,ke)}t.memoizedProps=t.pendingProps,a===null?$i(t):ut=a}function ln(t,a,i,r){Je=qa=null,rs(a),bn=null,hi=0;var h=a.return;try{if(z0(t,h,a,i,dt)){Ht=1,Zi(t,I(i,t.current)),ut=null;return}}catch(d){if(h!==null)throw ut=h,d;Ht=1,Zi(t,I(i,t.current)),ut=null;return}a.flags&32768?(vt||r===1?t=!0:An||(dt&536870912)!==0?t=!1:(ya=t=!0,(r===2||r===9||r===3||r===6)&&(r=be.current,r!==null&&r.tag===13&&(r.flags|=16384))),sh(a,t)):$i(a)}function $i(t){var a=t;do{if((a.flags&32768)!==0){sh(a,ya);return}t=a.return;var i=B0(a.alternate,a,ke);if(i!==null){ut=i;return}if(a=a.sibling,a!==null){ut=a;return}ut=a=t}while(a!==null);Ht===0&&(Ht=5)}function sh(t,a){do{var i=U0(t.alternate,t);if(i!==null){i.flags&=32767,ut=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){ut=t;return}ut=t=i}while(t!==null);Ht=6,ut=null}function rh(t,a,i,r,h,d,v,C,M){t.cancelPendingCommit=null;do ei();while(Wt!==0);if((ht&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(d=a.lanes|a.childLanes,d|=mr,Z(t,i,d,v,C,M),t===bt&&(ut=bt=null,dt=0),Rn=a,Ea=t,Nn=i,xr=d,Ar=h,nc=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Q0(or,function(){return fh(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=at.T,at.T=null,h=Pe(),Pt(2),v=ht,ht|=4;try{L0(t,a,i)}finally{ht=v,Pt(h),at.T=r}}Wt=1,oh(),uh(),hh()}}function oh(){if(Wt===1){Wt=0;var t=Ea,a=Rn,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=at.T,at.T=null;var r=Pe();Pt(2);var h=ht;ht|=4;try{Vu(a,t),sf(t.containerInfo)}finally{ht=h,Pt(r),at.T=i}}t.current=a,Wt=2}}function uh(){if(Wt===2){Wt=0;var t=Ea,a=Rn,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=at.T,at.T=null;var r=Pe();Pt(2);var h=ht;ht|=4;try{Xu(t,a.alternate,a)}finally{ht=h,Pt(r),at.T=i}}Wt=3}}function hh(){if(Wt===4||Wt===3){Wt=0,_1();var t=Ea,a=Rn,i=Nn,r=nc;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Wt=5:(Wt=0,Rn=Ea=null,ch(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(_a=null),j(i),a=a.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(li,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=at.T,h=Pe(),Pt(2),at.T=null;try{for(var d=t.onRecoverableError,v=0;v<r.length;v++){var C=r[v];d(C.value,{componentStack:C.stack})}}finally{at.T=a,Pt(h)}}(Nn&3)!==0&&ei(),ze(t),h=t.pendingLanes,(i&4194090)!==0&&(h&42)!==0?t===Mr?gi++:(gi=0,Mr=t):gi=0,$a(0)}}function ch(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Vn(a)))}function ei(t){return oh(),uh(),hh(),fh()}function fh(){if(Wt!==5)return!1;var t=Ea,a=xr;xr=0;var i=j(Nn),r=32>i?32:i;i=at.T;var h=Pe();try{Pt(r),at.T=null,r=Ar,Ar=null;var d=Ea,v=Nn;if(Wt=0,Rn=Ea=null,Nn=0,(ht&6)!==0)throw Error(s(331));var C=ht;if(ht|=4,Zu(d.current),Ku(d,d.current,v,r),ht=C,$a(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(li,d)}catch{}return!0}finally{Pt(h),at.T=i,ch(t,a)}}function dh(t,a,i){a=I(i,a),a=Ss(t.stateNode,a,2),t=la(t,a,2),t!==null&&(Q(t,2),ze(t))}function St(t,a,i){if(t.tag===3)dh(t,t,i);else for(;a!==null;){if(a.tag===3){dh(a,t,i);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_a===null||!_a.has(r))){t=I(i,t),i=gu(2),r=la(a,i,2),r!==null&&(pu(i,r,a,t),Q(r,2),ze(r));break}}a=a.return}}function Ks(t,a,i){var r=t.pingCache;if(r===null){r=t.pingCache=new G1;var h=new Set;r.set(a,h)}else h=r.get(a),h===void 0&&(h=new Set,r.set(a,h));h.has(i)||(Er=!0,h.add(i),t=j0.bind(null,t,a,i),a.then(t,t))}function j0(t,a,i){var r=t.pingCache;r!==null&&r.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,bt===t&&(dt&i)===i&&(Ht===4||Ht===3&&(dt&62914560)===dt&&300>Oe()-Tr?(ht&2)===0&&nn(t,0):Cr|=i,Mn===dt&&(Mn=0)),ze(t)}function gh(t,a){a===0&&(a=K()),t=tn(t,a),t!==null&&(Q(t,a),ze(t))}function K0(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),gh(t,i)}function P0(t,a){var i=0;switch(t.tag){case 13:var r=t.stateNode,h=t.memoizedState;h!==null&&(i=h.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(a),gh(t,i)}function Q0(t,a){return sl(t,a)}function Z0(t,a,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t){return t=t.prototype,!(!t||!t.isReactComponent)}function je(t,a){var i=t.alternate;return i===null?(i=n(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function ph(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function tl(t,a,i,r,h,d){var v=0;if(r=t,typeof t=="function")Ps(t)&&(v=1);else if(typeof t=="string")v=Ne&&qt?Lh(t,i,kt.current)?26:Qh(t)?27:5:Ne?Lh(t,i,kt.current)?26:5:qt&&Qh(t)?27:5;else t:switch(t){case er:return t=n(31,i,a,h),t.elementType=er,t.lanes=d,t;case rn:return Ba(i.children,h,d,a);case Eh:v=8,h|=24;break;case ks:return t=n(12,i,a,h|2),t.elementType=ks,t.lanes=d,t;case Is:return t=n(13,i,a,h),t.elementType=Is,t.lanes=d,t;case $s:return t=n(19,i,a,h),t.elementType=$s,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W0:case fa:v=10;break t;case Ch:v=9;break t;case Ws:v=11;break t;case tr:v=14;break t;case da:v=16,r=null;break t}v=29,i=Error(s(130,t===null?"null":typeof t,"")),r=null}return a=n(v,i,a,h),a.elementType=t,a.type=r,a.lanes=d,a}function Ba(t,a,i,r){return t=n(7,t,r,a),t.lanes=i,t}function Qs(t,a,i){return t=n(6,t,null,a),t.lanes=i,t}function Zs(t,a,i){return a=n(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function J0(t,a,i,r,h,d,v,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ua,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=V(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V(0),this.hiddenUpdates=V(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function mh(t,a,i,r,h,d,v,C,M,B,Y,P){return t=new J0(t,a,i,v,C,M,B,P),a=1,d===!0&&(a|=24),d=n(3,null,null,a),t.current=d,d.stateNode=t,a=Jl(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:r,isDehydrated:i,cache:a},Il(d),t}function vh(t){return t?(t=cn,t):cn}function yh(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=f(a),t=t!==null?g(t):null,t===null?null:ai(t.stateNode)}function Sh(t,a,i,r,h,d){h=vh(h),r.context===null?r.context=h:r.pendingContext=h,r=ia(a),r.payload={element:i},d=d===void 0?null:d,d!==null&&(r.callback=d),i=la(t,r,a),i!==null&&(ce(i,t,a),jn(i,t,a))}function _h(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function Js(t,a){_h(t,a),(t=t.alternate)&&_h(t,a)}var ot={},F0=H1(),fe=qc(),Fs=Object.assign,k0=Symbol.for("react.element"),el=Symbol.for("react.transitional.element"),sn=Symbol.for("react.portal"),rn=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),ks=Symbol.for("react.profiler"),W0=Symbol.for("react.provider"),Ch=Symbol.for("react.consumer"),fa=Symbol.for("react.context"),Ws=Symbol.for("react.forward_ref"),Is=Symbol.for("react.suspense"),$s=Symbol.for("react.suspense_list"),tr=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),er=Symbol.for("react.activity"),I0=Symbol.for("react.memo_cache_sentinel"),bh=Symbol.iterator,$0=Symbol.for("react.client.reference"),al=Array.isArray,at=F0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tf=e.rendererVersion,ef=e.rendererPackageName,Th=e.extraDevToolsConfig,ai=e.getPublicInstance,af=e.getRootHostContext,nf=e.getChildHostContext,lf=e.prepareForCommit,sf=e.resetAfterCommit,rf=e.createInstance;e.cloneMutableInstance;var ar=e.appendInitialChild,xh=e.finalizeInitialChildren,nl=e.shouldSetTextContent,Ah=e.createTextInstance;e.cloneMutableTextInstance;var of=e.scheduleTimeout,uf=e.cancelTimeout,Ua=e.noTimeout,Ke=e.isPrimaryRenderer;e.warnsIfNotActing;var te=e.supportsMutation,ga=e.supportsPersistence,Se=e.supportsHydration,hf=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var cf=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Pt=e.setCurrentUpdatePriority,Pe=e.getCurrentUpdatePriority,ff=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var df=e.shouldAttemptEagerTransition,gf=e.detachDeletedInstance;e.requestPostPaintCallback;var pf=e.maySuspendCommit,Mh=e.preloadInstance,mf=e.startSuspendingCommit,Rh=e.suspendInstance;e.suspendOnActiveViewTransition;var vf=e.waitForCommitToBeReady,on=e.NotPendingTransition,La=e.HostTransitionContext,yf=e.resetFormInstance;e.bindToConsole;var Sf=e.supportsMicrotasks,_f=e.scheduleMicrotask,ni=e.supportsTestSelectors,Ef=e.findFiberRoot,Cf=e.getBoundingRect,bf=e.getTextContent,ii=e.isHiddenSubtree,Tf=e.matchAccessibilityRole,xf=e.setFocusIfFocusable,Af=e.setupIntersectionObserver,Mf=e.appendChild,Rf=e.appendChildToContainer,Nf=e.commitTextUpdate,Of=e.commitMount,Df=e.commitUpdate,Gf=e.insertBefore,zf=e.insertInContainerBefore,Hf=e.removeChild,Bf=e.removeChildFromContainer,Nh=e.resetTextContent,Uf=e.hideInstance,Lf=e.hideTextInstance,Yf=e.unhideInstance,Xf=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopGestureTransition,e.getCurrentGestureOffset,e.subscribeToGestureDirection,e.createViewTransitionInstance;var qf=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var wf=e.cloneInstance,Oh=e.createContainerChildSet,Dh=e.appendChildToContainerChildSet,Vf=e.finalizeContainerChildren,Gh=e.replaceContainerChildren,zh=e.cloneHiddenInstance,Hh=e.cloneHiddenTextInstance,nr=e.isSuspenseInstancePending,ir=e.isSuspenseInstanceFallback,jf=e.getSuspenseInstanceFallbackErrorDetails,Kf=e.registerSuspenseInstanceRetry,Pf=e.canHydrateFormStateMarker,Qf=e.isFormStateMarkerMatching,Bh=e.getNextHydratableSibling,Zf=e.getNextHydratableSiblingAfterSingleton,Jf=e.getFirstHydratableChild,Ff=e.getFirstHydratableChildWithinContainer,kf=e.getFirstHydratableChildWithinSuspenseInstance,Wf=e.getFirstHydratableChildWithinSingleton,If=e.canHydrateInstance,$f=e.canHydrateTextInstance,t1=e.canHydrateSuspenseInstance,e1=e.hydrateInstance,a1=e.hydrateTextInstance,n1=e.hydrateSuspenseInstance,i1=e.getNextHydratableInstanceAfterSuspenseInstance,l1=e.commitHydratedContainer,s1=e.commitHydratedSuspenseInstance,r1=e.clearSuspenseBoundary,o1=e.clearSuspenseBoundaryFromContainer,Uh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var u1=e.validateHydratableInstance,h1=e.validateHydratableTextInstance,Ne=e.supportsResources,Lh=e.isHostHoistableType,lr=e.getHoistableRoot,Yh=e.getResource,Xh=e.acquireResource,qh=e.releaseResource,c1=e.hydrateHoistable,wh=e.mountHoistable,Vh=e.unmountHoistable,f1=e.createHoistableInstance,d1=e.prepareToCommitHoistables,g1=e.mayResourceSuspendCommit,jh=e.preloadResource,p1=e.suspendResource,qt=e.supportsSingletons,Kh=e.resolveSingletonInstance,m1=e.acquireSingletonInstance,Ph=e.releaseSingletonInstance,Qh=e.isHostSingletonType,un=e.isSingletonScope,sr=[],hn=-1,cn={},de=Math.clz32?Math.clz32:G,v1=Math.log,y1=Math.LN2,il=256,ll=4194304,sl=fe.unstable_scheduleCallback,rr=fe.unstable_cancelCallback,S1=fe.unstable_shouldYield,_1=fe.unstable_requestPaint,Oe=fe.unstable_now,Zh=fe.unstable_ImmediatePriority,E1=fe.unstable_UserBlockingPriority,or=fe.unstable_NormalPriority,C1=fe.unstable_IdlePriority,b1=fe.log,T1=fe.unstable_setDisableYieldValue,li=null,ge=null,ur,Jh,hr=!1,Fh=new WeakMap,fn=[],dn=0,rl=null,ol=0,_e=[],Ee=0,Ya=null,Qe=1,Ze="",kt=y(null),si=y(null),pa=y(null),ul=y(null),ae=null,wt=null,vt=!1,Xa=null,Ue=!1,cr=Error(s(519)),pe=typeof Object.is=="function"?Object.is:T0,hl=y(null),qa=null,Je=null,x1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,r){t.push(r)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},A1=fe.unstable_scheduleCallback,M1=fe.unstable_NormalPriority,zt={$$typeof:fa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},cl=null,gn=null,fr=!1,fl=!1,dr=!1,pn=0,ri=null,gr=0,mn=0,vn=null,kh=at.S;at.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&A0(t,a),kh!==null&&kh(t,a)};var wa=y(null),R1=Object.prototype.hasOwnProperty,oi=Error(s(460)),pr=Error(s(474)),dl=Error(s(542)),gl={then:function(){}},yn=null,Ce=[],Sn=0,mr=0,ma=!1,vr=!1,_n=y(null),pl=y(0),va=0,rt=null,Et=null,Yt=null,ml=!1,En=!1,Va=!1,vl=0,ui=0,Cn=null,N1=0,yl={readContext:$t,use:Xi,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},Wh={readContext:$t,use:Xi,useCallback:function(t,a){return ne().memoizedState=[t,a===void 0?null:a],t},useContext:$t,useEffect:Qo,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,Vi(4194308,4,ko.bind(null,a,t),i)},useLayoutEffect:function(t,a){return Vi(4194308,4,t,a)},useInsertionEffect:function(t,a){Vi(4,2,t,a)},useMemo:function(t,a){var i=ne();a=a===void 0?null:a;var r=t();if(Va){et(!0);try{t()}finally{et(!1)}}return i.memoizedState=[r,a],r},useReducer:function(t,a,i){var r=ne();if(i!==void 0){var h=i(a);if(Va){et(!0);try{i(a)}finally{et(!1)}}}else h=a;return r.memoizedState=r.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},r.queue=t,t=t.dispatch=G0.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var a=ne();return t={current:t},a.memoizedState=t},useState:function(t){t=fs(t);var a=t.queue,i=lu.bind(null,rt,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:gs,useDeferredValue:function(t,a){var i=ne();return ps(i,t,a)},useTransition:function(){var t=fs(!1);return t=eu.bind(null,rt,t.queue,!0,!1),ne().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var r=rt,h=ne();if(vt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=a(),bt===null)throw Error(s(349));(dt&124)!==0||Oo(r,a,i)}h.memoizedState=i;var d={value:i,getSnapshot:a};return h.queue=d,Qo(Go.bind(null,r,d,t),[t]),r.flags|=2048,en(9,wi(),Do.bind(null,r,d,i,a),null),i},useId:function(){var t=ne(),a=bt.identifierPrefix;if(vt){var i=Ze,r=Qe;i=(r&~(1<<32-de(r)-1)).toString(32)+i,a=""+a+"R"+i,i=vl++,0<i&&(a+="H"+i.toString(32)),a+=""}else i=N1++,a=""+a+"r"+i.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:ms,useFormState:wo,useActionState:wo,useOptimistic:function(t){var a=ne();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=vs.bind(null,rt,!0,i),i.dispatch=a,[t,a]},useMemoCache:us,useCacheRefresh:function(){return ne().memoizedState=D0.bind(null,rt)}},Ih={readContext:$t,use:Xi,useCallback:Io,useContext:$t,useEffect:Zo,useImperativeHandle:Wo,useInsertionEffect:Jo,useLayoutEffect:Fo,useMemo:$o,useReducer:qi,useRef:Po,useState:function(){return qi(qe)},useDebugValue:gs,useDeferredValue:function(t,a){var i=Lt();return tu(i,Et.memoizedState,t,a)},useTransition:function(){var t=qi(qe)[0],a=Lt().memoizedState;return[typeof t=="boolean"?t:Qn(t),a]},useSyncExternalStore:No,useId:nu,useHostTransitionStatus:ms,useFormState:Vo,useActionState:Vo,useOptimistic:function(t,a){var i=Lt();return Bo(i,Et,t,a)},useMemoCache:us,useCacheRefresh:iu},O1={readContext:$t,use:Xi,useCallback:Io,useContext:$t,useEffect:Zo,useImperativeHandle:Wo,useInsertionEffect:Jo,useLayoutEffect:Fo,useMemo:$o,useReducer:cs,useRef:Po,useState:function(){return cs(qe)},useDebugValue:gs,useDeferredValue:function(t,a){var i=Lt();return Et===null?ps(i,t,a):tu(i,Et.memoizedState,t,a)},useTransition:function(){var t=cs(qe)[0],a=Lt().memoizedState;return[typeof t=="boolean"?t:Qn(t),a]},useSyncExternalStore:No,useId:nu,useHostTransitionStatus:ms,useFormState:Ko,useActionState:Ko,useOptimistic:function(t,a){var i=Lt();return Et!==null?Bo(i,Et,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:us,useCacheRefresh:iu},bn=null,hi=0,Tn=uu(!0),$h=uu(!1),be=y(null),Le=null,Vt=y(0),yr={enqueueSetState:function(t,a,i){t=t._reactInternals;var r=he(),h=ia(r);h.payload=a,i!=null&&(h.callback=i),a=la(t,h,r),a!==null&&(ce(a,t,r),jn(a,t,r))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var r=he(),h=ia(r);h.tag=1,h.payload=a,i!=null&&(h.callback=i),a=la(t,h,r),a!==null&&(ce(a,t,r),jn(a,t,r))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=he(),r=ia(i);r.tag=2,a!=null&&(r.callback=a),a=la(t,r,i),a!==null&&(ce(a,t,i),jn(a,t,i))}},tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ec=Error(s(461)),Qt=!1,Sr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Fe=!1,Ut=!1,_r=!1,ac=typeof WeakSet=="function"?WeakSet:Set,Zt=null,Xt=null,le=!1,De=null,xn=8192,D1={getCacheForType:function(t){var a=$t(zt),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i}},Sl=0,_l=1,El=2,Cl=3,bl=4;if(typeof Symbol=="function"&&Symbol.for){var ci=Symbol.for;Sl=ci("selector.component"),_l=ci("selector.has_pseudo_class"),El=ci("selector.role"),Cl=ci("selector.test_id"),bl=ci("selector.text")}var G1=typeof WeakMap=="function"?WeakMap:Map,ht=0,bt=null,ut=null,dt=0,_t=0,me=null,ya=!1,An=!1,Er=!1,ke=0,Ht=0,Sa=0,ja=0,Cr=0,Te=0,Mn=0,fi=null,se=null,br=!1,Tr=0,di=1/0,Tl=null,_a=null,Wt=0,Ea=null,Rn=null,Nn=0,xr=0,Ar=null,nc=null,gi=0,Mr=null;return ot.attemptContinuousHydration=function(t){if(t.tag===13){var a=tn(t,67108864);a!==null&&ce(a,t,67108864),Js(t,67108864)}},ot.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var a=he();a=st(a);var i=tn(t,a);i!==null&&ce(i,t,a),Js(t,a)}},ot.attemptSynchronousHydration=function(t){switch(t.tag){case 3:if(t=t.stateNode,t.current.memoizedState.isDehydrated){var a=N(t.pendingLanes);if(a!==0){for(t.pendingLanes|=2,t.entangledLanes|=2;a;){var i=1<<31-de(a);t.entanglements[1]|=i,a&=~i}ze(t),(ht&6)===0&&(di=Oe()+500,$a(0))}}break;case 13:a=tn(t,2),a!==null&&ce(a,t,2),$u(),Js(t,2)}},ot.batchedUpdates=function(t,a){return t(a)},ot.createComponentSelector=function(t){return{$$typeof:Sl,value:t}},ot.createContainer=function(t,a,i,r,h,d,v,C,M,B){return mh(t,a,!1,null,i,r,d,v,C,M,B,null)},ot.createHasPseudoClassSelector=function(t){return{$$typeof:_l,value:t}},ot.createHydrationContainer=function(t,a,i,r,h,d,v,C,M,B,Y,P,F){return t=mh(i,r,!0,t,h,d,C,M,B,Y,P,F),t.context=vh(null),i=t.current,r=he(),r=st(r),h=ia(r),h.callback=a??null,la(i,h,r),a=r,t.current.lanes=a,Q(t,a),ze(t),t},ot.createPortal=function(t,a,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sn,key:r==null?null:""+r,children:t,containerInfo:a,implementation:i}},ot.createRoleSelector=function(t){return{$$typeof:El,value:t}},ot.createTestNameSelector=function(t){return{$$typeof:Cl,value:t}},ot.createTextSelector=function(t){return{$$typeof:bl,value:t}},ot.defaultOnCaughtError=function(t){console.error(t)},ot.defaultOnRecoverableError=function(t){tc(t)},ot.defaultOnUncaughtError=function(t){tc(t)},ot.deferredUpdates=function(t){var a=at.T,i=Pe();try{return Pt(32),at.T=null,t()}finally{Pt(i),at.T=a}},ot.discreteUpdates=function(t,a,i,r,h){var d=at.T,v=Pe();try{return Pt(2),at.T=null,t(a,i,r,h)}finally{Pt(v),at.T=d,ht===0&&(di=Oe()+500)}},ot.findAllNodes=qs,ot.findBoundingRects=function(t,a){if(!ni)throw Error(s(363));a=qs(t,a),t=[];for(var i=0;i<a.length;i++)t.push(Cf(a[i]));for(a=t.length-1;0<a;a--){i=t[a];for(var r=i.x,h=r+i.width,d=i.y,v=d+i.height,C=a-1;0<=C;C--)if(a!==C){var M=t[C],B=M.x,Y=B+M.width,P=M.y,F=P+M.height;if(r>=B&&d>=P&&h<=Y&&v<=F){t.splice(a,1);break}else if(r!==B||i.width!==M.width||F<d||P>v){if(!(d!==P||i.height!==M.height||Y<r||B>h)){B>r&&(M.width+=B-r,M.x=r),Y<h&&(M.width=h-B),t.splice(a,1);break}}else{P>d&&(M.height+=P-d,M.y=d),F<v&&(M.height=v-P),t.splice(a,1);break}}}return t},ot.findHostInstance=yh,ot.findHostInstanceWithNoPortals=function(t){return t=f(t),t=t!==null?p(t):null,t===null?null:ai(t.stateNode)},ot.findHostInstanceWithWarning=function(t){return yh(t)},ot.flushPassiveEffects=ei,ot.flushSyncFromReconciler=function(t){var a=ht;ht|=1;var i=at.T,r=Pe();try{if(Pt(2),at.T=null,t)return t()}finally{Pt(r),at.T=i,ht=a,(ht&6)===0&&$a(0)}},ot.flushSyncWork=$u,ot.focusWithin=function(t,a){if(!ni)throw Error(s(363));for(t=Ls(t),a=Fu(t,a),a=Array.from(a),t=0;t<a.length;){var i=a[t++],r=i.tag;if(!ii(i)){if((r===5||r===26||r===27)&&xf(i.stateNode))return!0;for(i=i.child;i!==null;)a.push(i),i=i.sibling}}return!1},ot.getFindAllNodesFailureDescription=function(t,a){if(!ni)throw Error(s(363));var i=0,r=[];t=[Ls(t),0];for(var h=0;h<t.length;){var d=t[h++],v=d.tag,C=t[h++],M=a[C];if((v!==5&&v!==26&&v!==27||!ii(d))&&(Ys(d,M)&&(r.push(Xs(M)),C++,C>i&&(i=C)),C<a.length))for(d=d.child;d!==null;)t.push(d,C),d=d.sibling}if(i<a.length){for(t=[];i<a.length;i++)t.push(Xs(a[i]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},ot.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 27:case 5:return ai(t.child.stateNode);default:return t.child.stateNode}},ot.injectIntoDevTools=function(){var t={bundleType:0,version:tf,rendererPackageName:ef,currentDispatcherRef:at,reconcilerVersion:"19.1.0"};if(Th!==null&&(t.rendererConfig=Th),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)t=!0;else{try{li=a.inject(t),ge=a}catch{}t=!!a.checkDCE}}return t},ot.isAlreadyRendering=function(){return(ht&6)!==0},ot.observeVisibleRects=function(t,a,i,r){if(!ni)throw Error(s(363));t=qs(t,a);var h=Af(t,i,r).disconnect;return{disconnect:function(){h()}}},ot.shouldError=function(){return null},ot.shouldSuspend=function(){return!1},ot.startHostTransition=function(t,a,i,r){if(t.tag!==5)throw Error(s(476));var h=au(t).queue;eu(t,h,a,on,i===null?l:function(){var d=au(t).next.queue;return Jn(t,d,{},he()),i(r)})},ot.updateContainer=function(t,a,i,r){var h=a.current,d=he();return Sh(h,d,t,a,i,r),d},ot.updateContainerSync=function(t,a,i,r){return Sh(a.current,2,t,a,i,r),2},ot},o.exports.default=o.exports,Object.defineProperty(o.exports,"__esModule",{value:!0})}(qr)),qr.exports}var Hc;function c5(){return Hc||(Hc=1,Xr.exports=h5()),Xr.exports}var f5=c5();const d5=B1(f5);var wr={exports:{}},We={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc;function g5(){return Bc||(Bc=1,We.ConcurrentRoot=1,We.ContinuousEventPriority=8,We.DefaultEventPriority=32,We.DiscreteEventPriority=2,We.IdleEventPriority=268435456,We.LegacyRoot=0,We.NoEventPriority=0),We}var Uc;function p5(){return Uc||(Uc=1,wr.exports=g5()),wr.exports}var jl=p5();const Lc={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Yc=!1,Xc=!1;const Xl=".react-konva-event",m5=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,v5=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,y5={};function Kl(o,e,n=y5){if(!Yc&&"zIndex"in e&&(console.warn(v5),Yc=!0),!Xc&&e.draggable){var l=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;l&&!s&&(console.warn(m5),Xc=!0)}for(var u in n)if(!Lc[u]){var c=u.slice(0,2)==="on",f=n[u]!==e[u];if(c&&f){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),o.off(g,n[u])}var p=!e.hasOwnProperty(u);p&&o.setAttr(u,void 0)}var m=e._useStrictMode,S={},y=!1;const b={};for(var u in e)if(!Lc[u]){var c=u.slice(0,2)==="on",_=n[u]!==e[u];if(c&&_){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),e[u]&&(b[g]=e[u])}!c&&(e[u]!==n[u]||m&&e[u]!==o.getAttr(u))&&(y=!0,S[u]=e[u])}y&&(o.setAttrs(S),Oa(o));for(var g in b)o.off(g+Xl),o.on(g+Xl,b[g])}function Oa(o){if(!w.autoDrawEnabled){var e=o.getLayer()||o.getStage();e&&e.batchDraw()}}var Vr=qc();const y0={},S5={};Un.Node.prototype._applyProps=Kl;let S0=jl.DefaultEventPriority;function _5(o,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}o.add(e),Oa(o)}function E5(o,e,n){let l=Un[o];l||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),l=Un.Group);const s={},u={};for(var c in e)if(c!=="ref"){var f=c.slice(0,2)==="on";f?u[c]=e[c]:s[c]=e[c]}const g=new l(s);return Kl(g,u),g}function C5(o,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function b5(o,e,n){return!1}function T5(o){return o}function x5(){return null}function A5(){return null}function M5(o,e,n,l){return S5}function R5(){}function N5(o){}function O5(o,e){return!1}function D5(){return y0}function G5(){return y0}const z5=setTimeout,H5=clearTimeout,B5=!0,U5=o=>{o()},L5=-1;function Y5(o,e){return!1}const X5=!1,q5=!1,w5=!0,V5=!1,j5=!1;function K5(o,e){e.parent===o?e.moveToTop():o.add(e),Oa(o)}function P5(o,e){e.parent===o?e.moveToTop():o.add(e),Oa(o)}function _0(o,e,n){e._remove(),o.add(e),e.setZIndex(n.getZIndex()),Oa(o)}function Q5(o,e,n){_0(o,e,n)}function Z5(o,e){e.destroy(),e.off(Xl),Oa(o)}function J5(o,e){e.destroy(),e.off(Xl),Oa(o)}function F5(o,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function k5(o,e,n){}function W5(o,e,n,l){Kl(o,l,n)}function I5(o){o.hide(),Oa(o)}function $5(o){}function t4(o,e){(e.visible==null||e.visible)&&o.show()}function e4(o,e){}function a4(o){}function n4(){}function i4(){return jl.DefaultEventPriority}function l4(){}function s4(){return null}function r4(o){S0=o}function o4(){return S0}function u4(){return jl.DiscreteEventPriority}function h4(){return!1}function c4(){}function f4(){return!1}function d4(){return!0}function g4(){}function p4(){}function m4(){return null}const v4=null;function y4(){}const S4=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:v4,appendChild:K5,appendChildToContainer:P5,appendInitialChild:_5,cancelTimeout:H5,clearContainer:a4,commitMount:k5,commitTextUpdate:F5,commitUpdate:W5,createInstance:E5,createTextInstance:C5,detachDeletedInstance:n4,finalizeInitialChildren:b5,getChildHostContext:G5,getCurrentEventPriority:i4,getCurrentUpdatePriority:o4,getInstanceFromScope:s4,getPublicInstance:T5,getRootHostContext:D5,hideInstance:I5,hideTextInstance:$5,idlePriority:Vr.unstable_IdlePriority,insertBefore:_0,insertInContainerBefore:Q5,isPrimaryRenderer:X5,maySuspendCommit:f4,noTimeout:L5,now:Vr.unstable_now,preloadInstance:d4,prepareForCommit:x5,preparePortalMount:A5,prepareScopeUpdate:l4,prepareUpdate:M5,removeChild:Z5,removeChildFromContainer:J5,requestPostPaintCallback:c4,resetAfterCommit:R5,resetFormInstance:y4,resetTextContent:N5,resolveUpdatePriority:u4,run:Vr.unstable_runWithPriority,scheduleMicrotask:U5,scheduleTimeout:z5,setCurrentUpdatePriority:r4,shouldAttemptEagerTransition:h4,shouldDeprioritizeSubtree:O5,shouldSetTextContent:Y5,startSuspendingCommit:g4,supportsHydration:j5,supportsMicrotasks:B5,supportsMutation:w5,supportsPersistence:V5,suspendInstance:p4,unhideInstance:t4,unhideTextInstance:e4,waitForCommitToBeReady:m4,warnsIfNotActing:q5},Symbol.toStringTag,{value:"Module"}));function E0(o,e,n){if(!o)return;if(n(o)===!0)return o;let l=o.child;for(;l;){const s=E0(l,e,n);if(s)return s;l=l.sibling}}function C0(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const so=C0(oe.createContext(null));class b0 extends oe.Component{render(){return oe.createElement(so.Provider,{value:this._reactInternals},this.props.children)}}function _4(){const o=oe.useContext(so);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=oe.useId();return oe.useMemo(()=>{for(const n of[o,o?.alternate]){if(!n)continue;const l=E0(n,!1,s=>{let u=s.memoizedState;for(;u;){if(u.memoizedState===e)return!0;u=u.next}});if(l)return l}},[o,e])}const E4=Symbol.for("react.context"),C4=o=>o!==null&&typeof o=="object"&&"$$typeof"in o&&o.$$typeof===E4;function b4(){const o=_4(),[e]=oe.useState(()=>new Map);e.clear();let n=o;for(;n;){const l=n.type;C4(l)&&l!==so&&!e.has(l)&&e.set(l,oe.use(C0(l))),n=n.return}return e}function T4(){const o=b4();return oe.useMemo(()=>Array.from(o.keys()).reduce((e,n)=>l=>oe.createElement(e,null,oe.createElement(n.Provider,{...l,value:o.get(n)})),e=>oe.createElement(b0,{...e})),[o])}if(jt.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function x4(o){const e=jt.useRef({});return jt.useLayoutEffect(()=>{e.current=o}),jt.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const A4=()=>{const o=jt.useRef(0);return jt.useMemo(()=>{o.current++},[]),o.current>1},M4=o=>{const e=jt.useRef(null),n=jt.useRef(null),l=jt.useRef(null),s=x4(o),u=T4(),c=jt.useRef(!1),f=p=>{const{forwardedRef:m}=o;m&&(typeof m=="function"?m(p):m.current=p)},g=A4();return jt.useLayoutEffect(()=>c.current&&g?()=>{c.current=!1,f(null),zn.updateContainer(null,l.current,null),n.current.destroy()}:(c.current=!0,n.current=new Un.Stage({width:o.width,height:o.height,container:e.current}),f(n.current),l.current=zn.createContainer(n.current,jl.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),zn.updateContainer(jt.createElement(u,{},o.children),l.current,null,()=>{}),()=>{g||(f(null),zn.updateContainer(null,l.current,null),n.current.destroy())}),[]),jt.useLayoutEffect(()=>{f(n.current),Kl(n.current,o,s),zn.updateContainer(jt.createElement(u,{},o.children),l.current,null)}),jt.createElement("div",{ref:e,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},R4="Layer",N4="Line",zn=d5(S4);zn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:jt.version,rendererPackageName:"react-konva"});const O4=jt.forwardRef((o,e)=>jt.createElement(b0,{},jt.createElement(M4,{...o,forwardedRef:e}))),L4=({lines:o,setLines:e,className:n="",showControls:l=!1,strokeWidth:s="medium",width:u=500,height:c,willReadFrequently:f=!1,style:g={},mask:p})=>{const[m,S]=oe.useState([]),y=oe.useRef(!1),b=()=>{y.current=!0},_=()=>{y.current=!1,S([])},G=j=>{b();const et=j.target.getStage().getPointerPosition();e([...o,[Math.round(et.x),Math.round(et.y)]])},N=j=>{const W=j.target.getStage().getPointerPosition(),k=Math.round(W.x),J=Math.round(W.y);let At=o[o.length-1];At=At.concat([k+.1,J+.1]),o.splice(o.length-1,1,At),e(o.concat())},D=j=>{G(j)},R=j=>{if(!y.current)return;const W=j.target.getStage().getPointerPosition();let k=o[o.length-1];k=k.concat([Math.round(W.x),Math.round(W.y)]),o.splice(o.length-1,1,k),e(o.concat())},H=j=>{y.current&&(_(),N(j))},z=()=>{_()},K=()=>{b()},V=j=>{y.current&&(N(j),window.document.addEventListener("mouseup",z),window.document.addEventListener("touchEnd",z),window.document.addEventListener("mousedown",K),window.document.addEventListener("touchStart",K))},Q=j=>{y.current&&G(j),window.document.removeEventListener("mouseup",z),window.document.removeEventListener("touchEnd",z),window.document.removeEventListener("mousedown",K),window.document.removeEventListener("touchStart",K)},Z=()=>e([]),tt=()=>{const j=[...o],et=[...m],W=j.pop();W&&(et.push(W),e(j),S(et))},it=()=>{const j=[...o],et=[...m],W=et.pop();W&&(j.push(W),e(j),S(et))},st={small:3,medium:5,large:7}[s]??5;return re.jsxs(U1,{vertical:!0,align:"center",className:"relative",children:[p,re.jsx(O4,{width:u,height:c||u,onMouseDown:D,onMousemove:R,onMouseup:H,onTouchStart:D,onTouchMove:R,onTouchEnd:H,onMouseLeave:V,onMouseEnter:Q,className:L1("drawing-canvas",n),style:{width:`${u}px`,height:`${c||u}px`,...g},willReadFrequently:f,id:"drawing-canvas",children:re.jsx(R4,{children:o.map(j=>re.jsx(N4,{points:j,stroke:"#222222",strokeWidth:st,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},String(j)))})}),l&&re.jsxs(Y1,{className:"mt-2",children:[re.jsxs(Rr,{onClick:tt,disabled:o.length===0,children:[re.jsx(ic,{}),re.jsx(Nr,{pt:"Desfazer",en:"Undo"})]}),re.jsxs(Rr,{onClick:it,disabled:m.length===0,children:[re.jsx(ic,{}),re.jsx(Nr,{pt:"Refazer",en:"Redo"})]}),re.jsxs(Rr,{onClick:Z,disabled:o.length===0,children:[re.jsx(X1,{}),re.jsx(Nr,{pt:"Apagar",en:"Clear"})]})]})]})};export{L4 as D};
