import{f as q,bF as Pe,n as ae,bI as P,aG as ie,r as C,j as e,T as h,e as R,l as Be,aL as M,B as k,z as De,I as Y,b0 as We,J as Ge,aM as oe,bL as Le,aY as $e,aW as Me,aX as Ue}from"./index-BJbMcewC.js";import{u as ce,a as je,S as Q,b as J,c as fe,d as Z,e as ee,f as te,P as se,n as qe,h as Ve,i as F,j as Fe,k as ze,l as He}from"./StepSwitcher-rx0wj8we.js";import{V as Ye}from"./VerifyListIcon-CCQFN0Kg.js";import{I as N}from"./Instruction-C0w5eOUK.js";import{R as Xe}from"./RoundAnnouncement-DIgJoSz-.js";import{u as Ke}from"./useBooleanDictionary-BZqvEURb.js";import{C as ve,W as Qe}from"./WritingIcon-BYhKh5xx.js";import{D as Je}from"./speech-BzF0Tbsg.js";import{P as ye}from"./PopoverRule-Cwu9sBWO.js";import{B as Ze}from"./BoxCheckMarkIcon-CqZ18teu.js";import{B as et}from"./BoxOneIcon-Dr50JMus.js";import{B as tt}from"./BoxXIcon-CCmg2fWJ.js";import{G as Se}from"./GuessIcon-D_doAAzO.js";import{L as st}from"./LockIcon-CWUoayhk.js";import{R as rt}from"./RedoOutlined-CugFMWjb.js";import{R as ot}from"./DeleteOutlined-C82VwkXB.js";import{u as nt}from"./RulesModal-5YFYEaWp.js";import{R as at,a as it}from"./RotateRightOutlined-BMmYMQ2l.js";import{T as ne}from"./TextHighlight-CrdgUbI2.js";import{P as ct}from"./index-Bym3idcJ.js";import{u as lt}from"./useWhichPlayerIsThe-CclTUGnE.js";import{T as dt}from"./TurnOrder-DZ3OKHeF.js";import{V as ut}from"./ViewOr-DP0oDsQf.js";import{A as U}from"./AvatarName-Cz5onaCF.js";import{D as mt}from"./DevButton-BIsYuIlb.js";import{R as pt}from"./RankIcon-CW9MFb9M.js";import{S as ht}from"./StepRankingWrapper-jiP_TzH8.js";import{T as xt}from"./index-DPOO9BOk.js";import{T as jt}from"./TrophyIcon-DF_r8nSP.js";import"./GameOver-edqyBA3o.js";import{G as ft}from"./GameOverWrapper-sYrxIe9Q.js";/* empty css                            */import"./useBlurCards-h4CqcxLY.js";import"./useMutation-Degx59lO.js";import"./Game-Du3sO8nj.js";import"./WaitingRoomIcon-B4cmtU0l.js";import"./AnimatedClockIcon-DCJB2xRd.js";import"./index-Dtng7KWC.js";import"./useBubbleLock-DydJhBtG.js";import"./index-CvKgvH-N.js";import"./Overflow-BrCXp-wl.js";import"./useEvent-C_peVPrM.js";import"./PurePanel-BhaI8rGP.js";import"./index-DdgCAG4x.js";import"./Avatar-BoSa6615.js";import"./GameBanner-CO2fVTis.js";import"./DoubleRightOutlined-Bh1gtdGl.js";import"./useDevFeatures-Cu-9UbBe.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CCy9qnwE.js";import"./InfoCircleOutlined-CzPaz6Qn.js";import"./index-BQsQBMGT.js";import"./SignIn-B0U51EtO.js";import"./GoogleIcon-B9ZULqYD.js";import"./Loading-Bx6gW_1G.js";import"./AnimatedLoaderIcon-BJTCPZJu.js";import"./LikeFilled-BXKKEWW3.js";import"./RankingBoard-CxNq7e77.js";import"./CaretUpOutlined-CTN4lzvm.js";import"./EllipsisOutlined-yOwXmCF3.js";import"./PlusOutlined-ByZyTB3m.js";import"./StarFilled-C9qTiDP8.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-LTWIRFe9.js";import"./useMergedState-B44fkkTu.js";import"./progress-BlJc8CRk.js";import"./TheEndIcon-C5WkjHGK.js";const D={WORD_SELECTION:"WORD_SELECTION",CLOVER_WRITING:"CLOVER_WRITING",CLOVER_GUESSING:"CLOVER_GUESSING",RESULTS:"RESULTS"},le={SUBMIT_BAD_WORDS:"SUBMIT_BAD_WORDS",SUBMIT_CLUES:"SUBMIT_CLUES",SUBMIT_GUESS:"SUBMIT_GUESS"},G=[0,90,180,270],$=6,X=3,K=1,vt=["A","B","C","D"],yt={top:0,right:1,bottom:2,left:3};function St(s){const{translate:t}=q(),r=ce({actionName:"submit-bad-words",onBeforeCall:()=>s(3),onError:()=>s(1),successMessage:t("Palavras ruins enviadas com sucesso!","Bad words submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar palavras","Oops, the application failed to submit words")});return o=>{r({action:le.SUBMIT_BAD_WORDS,...o})}}function gt(s){const{translate:t}=q(),r=ce({actionName:"submit-clues",onBeforeCall:()=>s(3),onError:()=>s(1),successMessage:t("Dicas enviadas com sucesso!","Clues submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar dicas","Oops, the application failed to submit clues")});return o=>{r({action:le.SUBMIT_CLUES,...o})}}function Ct(s){const{translate:t}=q(),r=ce({actionName:"submit-guess",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:t("Palpites enviadas com sucesso!","Guesses submitted successfully!"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar palpites","Oops, the application failed to submit guesses")});return o=>{r({action:le.SUBMIT_GUESS,...o})}}const ue=(s,t=1)=>s+90*t,L=s=>s%360,me=(s,t,r)=>vt.map((o,a)=>{const i=t.leaves[o].leafId;return{leafId:i,clue:s[a],rotation:r[i]}}),B=(s,t,r,o,a)=>{const i=t[s.leaves[o].leafId],n=L(r[i.id]),c=[...i.cards,...i.cards],d=[0,270,180,90].indexOf(n);return c[d+yt[a]].text},bt=s=>Pe(s).slice(0,$).map(t=>t.id),z=(s,t)=>`${s.substring(0,Math.round(s.length/2))}${t.substring(Math.round(t.length/2))}`,It=(s,t,r)=>[z(B(s,t,r,"A","top"),B(s,t,r,"B","top")),z(B(s,t,r,"B","right"),B(s,t,r,"C","right")),z(B(s,t,r,"C","bottom"),B(s,t,r,"D","bottom")),z(B(s,t,r,"D","left"),B(s,t,r,"A","left"))],H=[3,1,1,1,0,0],Rt=s=>{const t=ae.sampleSize(Object.keys(s),4);return{A:{leafId:t[0],rotation:P(G),score:P(H),tries:2},B:{leafId:t[1],rotation:P(G),score:P(H),tries:2},C:{leafId:t[2],rotation:P(G),score:P(H),tries:2},D:{leafId:t[3],rotation:P(G),score:P(H),tries:2}}};function _t({hand:s,onSubmitBadWords:t}){const{isLoading:r}=ie(),o=C.useMemo(()=>ae.orderBy(s,"text"),[s]),{dict:a,updateDict:i,length:n}=Ke({}),c=()=>{t({cardsIds:Object.keys(a)})},d=()=>{t({cardsIds:bt(s)})};je();const u=n===$;return e.jsxs(Q,{fullWidth:!0,children:[e.jsx(J,{children:e.jsx(h,{pt:"As Palavras do Trevo",en:"The Clover Words"})}),e.jsx(N,{contained:!0,children:e.jsx(h,{pt:`Elimine ${$} palavras que você NÃO quer no jogo`,en:`Eliminate ${$} words you DO NOT want in the game`})}),e.jsx("ul",{className:"y-words-list",children:o.map(m=>e.jsx("li",{className:R("y-words-list__word"),children:e.jsx(Be,{onClick:()=>i(m.id),active:a[m.id],activeClass:"y-words-list__word-selected",children:m.text})},m.id))}),e.jsxs(M,{align:"center",children:[e.jsx(k,{type:"primary",size:"large",onClick:c,disabled:!u||r,children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Enviar Palavras (",n," de 6)"]}),en:e.jsxs(e.Fragment,{children:["Submit Words (",n," of 6)"]})})}),e.jsx(k,{size:"large",onClick:d,children:e.jsx(h,{pt:"Selecione pra mim",en:"Select for me"})})]})]})}function Et({players:s,state:t}){var c;const r=fe(s,t),{step:o,goToNextStep:a,setStep:i}=Z(0),n=St(i);return e.jsx(ee,{phase:t==null?void 0:t.phase,allowedPhase:D.WORD_SELECTION,children:e.jsxs(te,{step:o,players:s,children:[e.jsx(Xe,{round:t.round,onPressButton:a,time:4}),e.jsx(se,{icon:e.jsx(Ye,{}),title:e.jsx(h,{pt:"Seleção das Palavras",en:"Words Selection"}),onClose:a,currentRound:(c=t==null?void 0:t.round)==null?void 0:c.current,type:"block",children:e.jsx(N,{children:e.jsx(h,{pt:`Selecione ${$} palavras que você NÃO quer no jogo`,en:`Select ${$} words you DO NOT want in the game`})})}),e.jsx(_t,{hand:r.hand,onSubmitBadWords:n})]})})}function re(s,t,r,o){const{notification:a}=De.useApp(),{translate:i}=q(),[n,c]=C.useState(0),[d,u]=C.useState(["","","",""]),[m,S]=C.useState(0),[x,j]=C.useState(null),[f,w]=C.useState(null),[O,b]=C.useState({A:null,B:null,C:null,D:null}),[A,_]=C.useState({A:!1,B:!1,C:!1,D:!1}),[I,W]=C.useState(Object.keys(r).reduce((l,p)=>(l[p]=0,l),{})),[be,Ie]=C.useState([]);C.useEffect(()=>{Ie(Object.values(O).map(l=>(l==null?void 0:l.leafId)??""))},[O]),C.useEffect(()=>{b(l=>{const p={...l};return Object.keys(p).forEach(v=>{const y=p[v];y&&(y.rotation=I[y.leafId])}),p})},[I]);const Re=l=>{S(ue(m,l))},_e=(l,p)=>{u(v=>{const g=[...v];return g[l]=p,g})},de=(l,p,v=1)=>{l.stopPropagation();const g=ue(I[p],v);W(y=>({...y,[p]:g})),j(null),w(null)},Ee=l=>{Object.values(t.leaves).forEach(p=>{de(l,p.leafId,P([1,2,3,4,5]))})},Oe=l=>{b(p=>({...p,[l]:null}))},Te=l=>{if(x===l)return j(null);f?(b(p=>{const v=Object.keys(p).filter(y=>{const T=p[y];return(T==null?void 0:T.leafId)===l}),g={...p,[f]:{leafId:l,rotation:I[l]}};if(v.length>0){const y=v[0];g[y]=null}return g}),w(null)):j(l)},ke=l=>{if(f===l)return w(null);if(f&&f!==l){b(p=>{const v=p[f],g=p[l];return{...p,[f]:g,[l]:v}}),w(null);return}x?(b(p=>{const v=Object.keys(p).filter(y=>{const T=p[y];return(T==null?void 0:T.leafId)===x}),g={...p,[l]:{leafId:x,rotation:I[x]}};if(v.length>0){const y=v[0];g[y]=null}return g}),j(null)):w(l)},Ne=()=>{let l=0;const p={...A},v={...O};if(Object.keys(v).forEach(g=>{const y=g,E=v[y];if(E&&(E.score===void 0||E.score===0)){const T=t.leaves[y];E.leafId===T.leafId&&L(E.rotation)===T.rotation?(E.score=n===0?X:K,l+=1,p[y]=!0):n===0&&(v[y]=null),E.tries=n+1,E.score=E.score??0}}),(l===4||n===1)&&o){o({activeCloverId:t.cloverId,guesses:v});return}a.warning({message:i(`${4-l} folhas estão erradas`,`${4-l} leaves are wrong`),description:i("Tente novamente. Pode ter sido folha errada ou rotação errada","Try again. It may have been wrong leaf or just wrong rotation")}),b(v),_(p),c(1)},we=d.every(l=>l.trim()),Ae=Object.values(O).every(l=>!!l);return{mode:s,rotation:m,onRotateClover:Re,clues:d,onClueChange:_e,rotations:I,onLeafRotate:de,onRandomizeLeafRotations:Ee,guesses:O,onActivateLeaf:Te,activeLeafId:x,onActivateSlot:ke,activeSlotId:f,usedLeavesIds:be,onLeafRemove:Oe,areCluesComplete:we,isCloverComplete:Ae,submitClover:Ne,locks:A}}function ge({leaf:s,rotation:t,onLeafRotate:r,onLeafRemove:o,onLeafGrab:a,className:i,position:n,isLocked:c,icon:d}){const u=!!a,m=!!o,S=!!r,x=!m&&!S;return e.jsxs("div",{className:R("y-leaf",u&&"y-leaf--grabbable",We("fadeIn"),i),style:{transform:`rotate(${t}deg)`},children:[s.cards.map((j,f)=>!c&&u?e.jsx("div",{role:"button",className:R("y-leaf__card","y-leaf__card-button",`y-leaf__card--${f}`),onClick:()=>a==null?void 0:a(s.id),children:e.jsx("div",{className:"y-leaf__card-text",children:j.text})},j.id):e.jsx("div",{className:R("y-leaf__card",`y-leaf__card--${f}`),children:e.jsx("div",{className:"y-leaf__card-text",children:j.text})},j.id)),e.jsxs("div",{className:"y-leaf__controls",style:{transform:`rotate(-${t}deg)`},children:[!c&&S&&e.jsx(k,{onClick:j=>r==null?void 0:r(j,s.id),className:"y-leaf__center y-leaf__center--rotatable",shape:"circle",children:e.jsx(rt,{})}),!c&&m&&e.jsx(k,{onClick:()=>o==null?void 0:o(n),className:"y-leaf__center y-leaf__center--rotatable",shape:"circle",children:e.jsx(ot,{})}),c&&e.jsx("div",{className:"y-leaf__center",children:e.jsx(Y,{icon:e.jsx(st,{})})}),x&&e.jsx("div",{className:"y-leaf__center",children:e.jsx(Y,{icon:d??e.jsx(ve,{})})})]})]},`leaf-key-${s.id}`)}function Ot({leaf:s,rotation:t,position:r,onLeafGrab:o,onLeafRotate:a,onLeafRemove:i,activeSlotId:n,onActivateSlot:c,isLocked:d,icon:u}){return!s&&c?e.jsx("div",{className:R(`y-clover__leaf-${r}`,n===r&&"active-class"),children:e.jsx("button",{type:"button",className:R("y-leaf","y-leaf--empty","y-leaf--empty-clickable",n===r&&"y-leaf--empty-active"),onClick:m=>c(r),children:e.jsx(Y,{icon:e.jsx(Se,{}),size:"large"})},`clue-key-${r}`)}):o?e.jsx("div",{className:R(`y-clover__leaf-${r}`,n===r&&"active-class"),children:e.jsx(pe,{leaf:s,position:r,rotation:t,onLeafGrab:()=>o(r),onLeafRotate:a,onLeafRemove:i,isLocked:d,icon:u})}):e.jsx("div",{className:R(`y-clover__leaf-${r}`),children:e.jsx(pe,{leaf:s,position:r,rotation:t,onLeafRotate:a,onLeafRemove:i,isLocked:d,icon:u})})}function pe({leaf:s,rotation:t,position:r,onLeafGrab:o,onLeafRotate:a,onLeafRemove:i,isLocked:n,className:c="",icon:d}){return s?e.jsx(ge,{leaf:s,onLeafGrab:o,onLeafRotate:a,onLeafRemove:i,rotation:t,className:c,position:r,isLocked:n,icon:d},s.id):e.jsx("div",{className:R("y-leaf","y-leaf--empty"),children:e.jsx(Y,{icon:e.jsx(Se,{}),size:"large"})},`clue-key-${r}`)}function V({mode:s,clover:t,leaves:r,guesses:o,rotation:a,onRotate:i,onClueChange:n,rotations:c={},onLeafRotate:d,onLeafRemove:u,activeSlotId:m,onLeafGrab:S,onActivateSlot:x,locks:j}){const f=C.useRef([]),{translate:w}=q(),O=Object.entries(t.leaves);return nt("Tab",()=>{i(-1)}),e.jsxs("div",{className:"container center",children:[e.jsxs("div",{className:"y-clover",style:{transform:`rotate(${a}deg)`},children:[O.map(([b,A],_)=>{const I=Number(_);return s==="write"&&n?e.jsx("div",{className:R(`y-clover__clue-${I}`,"y-clover-clue"),children:e.jsx(Ge,{ref:W=>{f.current[_]=W},onChange:n?W=>n(I,W.target.value):void 0,className:`y-clover-rotation--${G[_]} y-clover-input`,placeholder:w("Escreva aqui","Write here"),disabled:!n,value:s==="write"?void 0:A.clue,autoFocus:_===0})},`clue-key-${I}`):e.jsx("div",{className:R(`y-clover__clue-${I}`,"y-clover-clue"),children:e.jsx("span",{className:R(`y-clover-rotation--${G[_]}`,"y-clover-clue-readonly"),children:A.clue})},`clue-key-${I}`)}),O.map(([b,A])=>{const{leaf:_,rotation:I,icon:W}=Tt(s,r,b,A,o,c);return e.jsx(Ot,{leaf:_,rotation:I,position:b,onLeafGrab:S,onLeafRotate:d,onLeafRemove:u,activeSlotId:m,onActivateSlot:x,isLocked:(j==null?void 0:j[b])??!1,icon:W},`slot-${b}`)})]}),e.jsxs("div",{className:"controls div-container center",children:[e.jsx(k,{icon:e.jsx(at,{}),onClick:()=>i(-1)}),e.jsx(k,{icon:e.jsx(it,{}),onClick:()=>i(1)})]})]})}const Tt=(s,t,r,o,a,i)=>{var c,d;let n="";switch(s){case"guess":return n=((c=a==null?void 0:a[r])==null?void 0:c.leafId)??"",{leaf:t==null?void 0:t[n],rotation:i[n]??0,icon:void 0};case"result":{n=((d=a==null?void 0:a[r])==null?void 0:d.leafId)??"";const u=a==null?void 0:a[r];return{leaf:t==null?void 0:t[n],rotation:(u==null?void 0:u.rotation)??0,icon:kt((u==null?void 0:u.score)??0)}}case"write":return n=o.leafId,{leaf:t==null?void 0:t[n],rotation:i[n]??0,icon:void 0};default:return n=o.leafId,{leaf:t==null?void 0:t[n],rotation:o.rotation,icon:void 0}}},kt=s=>{switch(s){case K:return e.jsx(oe,{title:e.jsx(h,{pt:"Acertou na segunda tentativa",en:"Got it in their second attempt"}),children:e.jsx(et,{})});case X:return e.jsx(oe,{title:e.jsx(h,{pt:"Acertou na primeira tentativa",en:"Got it in their first attempt"}),children:e.jsx(Ze,{})});default:return e.jsx(oe,{title:e.jsx(h,{pt:"Burro pra carai e não acertou",en:"Did not get it right"}),children:e.jsx(tt,{})})}};function he(){return e.jsx(N,{contained:!0,children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Escreva uma dica (palavra única) que conecte cada um dos pares de palavras na parte de fora do trevo.",e.jsx("br",{}),"Você pode girar o trevo para ficar mais fácil de escrever usando os controles na parte inferior.",e.jsx("br",{}),"Se o par de palavras estiver muito difícil, você pode girar as cartas brancas, mas cuidado para não avacalhar dicas que você já escreveu."]}),en:e.jsxs(e.Fragment,{children:["Write a single-word clue that connects each pair of words in the outer side of the clover.",e.jsx("br",{}),"You may rotate the clover when writing using the buttons in the bottom part of the clover container.",e.jsx("br",{}),"If the pair of words is too difficult, you may rotate the cards but pay attention on how it will change the other pairs when doing so."]})})})}function xe(){return e.jsx(N,{contained:!0,children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Posicione as cartas no trevo de acordo com as dicas.",e.jsx("br",{}),"Somente 4 das cartas serão usadas e elas podem estar em qualquer orientação.",e.jsx("br",{}),"Clique nas palavras de uma das cartas para pegá-la e então no quadrante do trevo para posicioná-la.",e.jsx("br",{}),"Você tem duas chances para adivinhar. Quando apertar Enviar pela primeira vez, o jogo manterá todas as cartas corretas (te dando ",X," pontos) e então você tera uma segunda chance de acertar (ganhando ",K," ponto por cada)"]}),en:e.jsxs(e.Fragment,{children:["Place the cards below inside the clover according to giving clues.",e.jsx("br",{}),"Only 4 of the cards will be used and they can be in any orientation.",e.jsx("br",{}),"Click on the card words to grab it then on the clover quadrant you want to place it.",e.jsx("br",{}),"You have two chances to guess. When you press the first time the game will validate and keep your correct answers (granting you ",X," points) and then you have a second chance to guess the remainder for ",K," point each."]})})})}function Nt({clover:s,leaves:t,clues:r,rotations:o}){const a=wt(s,t,o);return e.jsxs(e.Fragment,{children:[e.jsx(h,{pt:"Tem certeza que quer enviar as seguintes dicas?",en:"Are you sure you want to submit the following clues?"}),e.jsx("ul",{children:a.map((i,n)=>e.jsxs("li",{children:[e.jsx(ne,{children:i[0]}),"+ ",e.jsx(ne,{children:i[1]})," ="," ",e.jsx(ne,{children:r[n]})]},`${i[0]}-${i[1]}`))})]})}const wt=(s,t,r)=>{const o=t[s.leaves.A.leafId],a=L(r[o.id]),i=t[s.leaves.B.leafId],n=L(r[i.id]),c=t[s.leaves.C.leafId],d=L(r[c.id]),u=t[s.leaves.D.leafId],m=L(r[u.id]),S={0:0,90:3,180:2,270:1},x=(j,f=0)=>(S[j%360]+f)%4;return[[o.cards[x(a)].text,i.cards[x(n)].text],[i.cards[x(n,1)].text,c.cards[x(d,1)].text],[c.cards[x(d,2)].text,u.cards[x(m,2)].text],[u.cards[x(m,3)].text,o.cards[x(a,3)].text]]};function At({clover:s,leaves:t,onSubmitClues:r}){const{isLoading:o}=ie(),{mode:a,rotation:i,onRotateClover:n,clues:c,onClueChange:d,rotations:u,onLeafRotate:m,onRandomizeLeafRotations:S,areCluesComplete:x}=re("write",s,t),j=()=>{r({clues:me(c,s,u)})},f=()=>{r({clues:me(It(s,t,u),s,u)})};return je(),e.jsxs(Q,{fullWidth:!0,children:[e.jsx(J,{children:e.jsx(h,{pt:"Escreva as dicas",en:"Write clues"})}),e.jsx(he,{}),e.jsx(ye,{content:e.jsx(he,{})}),e.jsx(M,{align:"center",children:e.jsx(k,{type:"default",size:"large",onClick:S,disabled:o,children:e.jsx(h,{pt:"Chacoalhar cartas",en:"Randomize rotations"})})}),e.jsx(V,{mode:a,clover:s,leaves:t,rotation:i,onRotate:n,onClueChange:d,rotations:u,onLeafRotate:m}),e.jsxs(M,{align:"center",children:[e.jsx(ct,{title:e.jsx(Nt,{clover:s,leaves:t,clues:c,rotations:u}),disabled:!x||o,onConfirm:j,children:e.jsx(k,{type:"primary",size:"large",disabled:!x||o,onClick:()=>n(i/90*-1),children:e.jsx(h,{pt:"Enviar dicas",en:"Submit clues"})})}),e.jsx(Je,{devOnly:!0,children:e.jsx(k,{size:"large",onClick:f,children:"Mock clues"})})]})]})}function Pt({players:s,state:t}){var c;const r=fe(s,t),{step:o,goToNextStep:a,setStep:i}=Z(0),n=gt(i);return e.jsx(ee,{phase:t==null?void 0:t.phase,allowedPhase:D.CLOVER_WRITING,children:e.jsxs(te,{step:o,players:s,children:[e.jsx(se,{icon:e.jsx(Qe,{}),title:e.jsx(h,{pt:"Escreva as dicas",en:"Write the clues"}),onClose:a,currentRound:(c=t==null?void 0:t.round)==null?void 0:c.current,type:"block",children:e.jsx(N,{children:e.jsx(h,{pt:"Para cada par, escreva uma dica",en:"For each pair, write a clue"})})}),e.jsx(At,{clover:r.clover,leaves:r.leaves,onSubmitClues:n})]})})}function Ce({leaves:s,onLeafRotate:t,rotations:r,activeLeafId:o,onLeafGrab:a,usedLeavesIds:i}){const n=C.useMemo(()=>ae.orderBy(Object.values(s),"id").filter(c=>!i.includes(c.id)),[s,i]);return e.jsx(N,{contained:!0,children:e.jsx(M,{align:"center",wrap:!0,children:n.map(c=>e.jsx("div",{className:"y-leaf-loose",children:e.jsx(ge,{leaf:c,onLeafGrab:a,onLeafRotate:t,rotation:r==null?void 0:r[c.id],className:R(o===c.id&&"y-leaf--active")},c.id)},c.id))})})}function Bt({clover:s,leaves:t,onSubmitGuess:r,activeCloverPlayer:o}){const{isLoading:a}=ie(),{rotation:i,rotations:n,onLeafRotate:c,onRotateClover:d,guesses:u,onActivateLeaf:m,activeLeafId:S,onActivateSlot:x,activeSlotId:j,usedLeavesIds:f,onLeafRemove:w,isCloverComplete:O,submitClover:b,locks:A}=re("guess",s,t,r),_=()=>{r({guesses:Rt(t),activeCloverId:s.cloverId})};return e.jsxs(Q,{fullWidth:!0,children:[e.jsx(J,{children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Adivinhação do trevo do(a) ",e.jsx(U,{player:o})]}),en:e.jsxs(e.Fragment,{children:["Guessing ",e.jsx(U,{player:o}),"'s clover"]})})}),e.jsx(xe,{}),e.jsx(ye,{content:e.jsx(xe,{})}),e.jsx(V,{mode:"guess",clover:s,leaves:t,onRotate:d,rotation:i,onLeafRotate:c,rotations:n,guesses:u,onLeafGrab:m,activeLeafId:S,onActivateSlot:x,activeSlotId:j,onLeafRemove:w,locks:A}),e.jsx(Ce,{leaves:t,rotations:n,onLeafRotate:c,onLeafGrab:m,activeLeafId:S,usedLeavesIds:f}),e.jsxs(M,{align:"center",children:[e.jsx(k,{type:"primary",size:"large",onClick:b,disabled:!O||a,children:e.jsx(h,{pt:"Enviar adivinhação",en:"Submit guess"})}),e.jsx(mt,{size:"large",onClick:_,children:"Mock guesses"})]})]})}function Dt({activeCloverPlayer:s,clover:t,leaves:r}){const{mode:o,rotation:a,rotations:i,onLeafRotate:n,onRotateClover:c,usedLeavesIds:d}=re("view",t,r);return e.jsxs(Q,{fullWidth:!0,children:[e.jsx(J,{children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Adivinhação do trevo do(a) ",e.jsx(U,{player:s})]}),en:e.jsxs(e.Fragment,{children:["Guessing ",e.jsx(U,{player:s}),"'s clover"]})})}),e.jsx(N,{contained:!0,children:e.jsx(h,{pt:e.jsxs(e.Fragment,{children:["Aguarde enquanto os outros jogadores tentam adivinhar.",e.jsx("br",{}),"Enquanto isso, veja as cartas que eles tem disponíveis."]}),en:e.jsxs(e.Fragment,{children:["Wait while other players are trying to guess your clover.",e.jsx("br",{})," In the meantime, check it out the cards they have available."]})})}),e.jsx(V,{mode:o,clover:t,leaves:r,onRotate:c,rotation:a}),e.jsx(Ce,{leaves:r,rotations:i,onLeafRotate:n,usedLeavesIds:d})]})}function Wt({players:s,state:t}){var d;const{step:r,goToNextStep:o,setStep:a}=Z(0),[i,n]=lt("activeCloverId",t,s),c=Ct(a);return e.jsx(ee,{phase:t==null?void 0:t.phase,allowedPhase:D.CLOVER_GUESSING,children:e.jsxs(te,{step:r,players:s,children:[e.jsxs(se,{icon:e.jsx(ve,{}),title:e.jsx(h,{pt:"Hora de Adivinhar",en:"Time to guess"}),onClose:o,currentRound:(d=t==null?void 0:t.round)==null?void 0:d.current,type:"block",children:[e.jsx(N,{children:e.jsx(h,{pt:"De um em um, vamos tentar adivinhar a posição das folhas em cada trevo",en:"One at a time, let's try to guess the position of each leaf on each clover"})}),e.jsx(dt,{players:s,activePlayerId:t.activeCloverId,order:t.gameOrder})]}),e.jsxs(ut,{condition:n,children:[e.jsx(Dt,{activeCloverPlayer:i,clover:t.clover,leaves:t.leaves}),e.jsx(Bt,{clover:t.clover,leaves:t.leaves,onSubmitGuess:c,activeCloverPlayer:i,isUserTheCloverPlayer:n})]})]})})}function Gt({players:s,clover:t,leaves:r,rotation:o,onRotate:a,activeCloverId:i}){const n=Le(s).filter(m=>m.id!==i),[c,d]=C.useState(`${n[0].id}::tab`),u=n.map(m=>{var S;return{key:`${m.id}::tab`,label:e.jsx(U,{player:m}),children:e.jsx(V,{mode:"result",clover:t,leaves:r,rotation:o,onRotate:a,guesses:((S=m.guesses[i])==null?void 0:S.leaves)??{}})}});return e.jsx(N,{contained:!0,children:e.jsx(xt,{activeKey:c,onChange:m=>d(m),items:u})})}function Lt({players:s,ranking:t,round:r,clover:o,leaves:a,activeCloverId:i}){const{mode:n,rotation:c,onRotateClover:d}=re("view",o,a);return e.jsxs(ht,{players:s,ranking:t,gainedPointsDescriptions:[e.jsx(h,{pt:"Pontos por encontrar só um jogador",en:"Points for matching only 1 player"},"1"),e.jsx(h,{pt:"Pontos por encontrar mais de um jogador",en:"Points for matching with more players"},"2"),e.jsx(h,{pt:"Pontos perdidos por não ter dado match e estar em um pesadelo",en:"Points lost for not matching any player while in a nightmare"},"3")],children:[e.jsx(V,{mode:n,clover:o,leaves:a,onRotate:d,rotation:c}),e.jsx(Gt,{players:s,clover:o,leaves:a,onRotate:d,rotation:c,activeCloverId:i}),e.jsx(qe,{round:r,children:e.jsx(h,{pt:"Próximo Trevo ou Game Over",en:"Next Clover or Game Over"})})]})}function $t({players:s,state:t}){var a;const{step:r,goToNextStep:o}=Z(0);return e.jsx(ee,{phase:t==null?void 0:t.phase,allowedPhase:D.RESULTS,children:e.jsxs(te,{step:r,players:s,children:[e.jsx(se,{icon:e.jsx(pt,{}),title:e.jsx(h,{pt:"Resultado",en:"Results"}),onClose:o,currentRound:(a=t==null?void 0:t.round)==null?void 0:a.current,type:"block",children:e.jsx(N,{children:e.jsx(h,{pt:"Quantos pontos você ganhou?",en:"How many points did you get?"})})}),e.jsx(Lt,{players:s,round:t.round,clover:t.clover,leaves:t.leaves,ranking:t.ranking,activeCloverId:t.activeCloverId})]})})}function Mt({state:s,players:t}){return e.jsx(ft,{state:s,players:t,announcementIcon:e.jsx(jt,{})})}function Ut(s){if(s&&!s.phase)return Me;switch(s.phase){case F.DEFAULT.LOBBY:return He;case F.DEFAULT.RULES:return ze;case F.DEFAULT.SETUP:return Fe;case D.WORD_SELECTION:return Et;case D.CLOVER_WRITING:return Pt;case D.CLOVER_GUESSING:return Wt;case D.RESULTS:return $t;case F.DEFAULT.GAME_OVER:return Mt;default:return Ue}}function rr(){return e.jsx(Ve,{gameCollection:$e.TREVO_DA_SORTE,getActiveComponent:Ut})}export{rr as default};
