import{r as f,aA as Q,a4 as J,cC as ie,j as e,f as p,T as i,aL as $,B as N,e as O,aK as U,aH as P,s as W,aI as re,bL as ce,bs as le,cD as ue,E as Y,i as de,cE as me,aX as pe}from"./index-DOKmeJHh.js";import{j as C,S as A,a as _,k as he,c as y,b as L,d as b,e as v,P as j,u as R,m as xe,l as je,H as fe,n as D,g as ge,h as Se,i as Ne}from"./StepSwitcher-BqDTsWid.js";import{u as T}from"./useWhichPlayerIsThe-DrX_FjIw.js";import{P as Te}from"./PassportIcon-pdUOX4FN.js";import{S as Ae}from"./SecretIcon-Dc_R-4Uv.js";import{S as ye,A as be,M as ve,H as Ie}from"./SpyNewspaperIcon-D8fzHvFq.js";import{I as m}from"./Instruction-PMYpGZNW.js";import{P as G}from"./PhaseTimerReset-BYNghRac.js";import{R as Ee}from"./RoundAnnouncement-rUZzKuIF.js";import{C as Oe}from"./Card-DZMlEILH.js";import{R as we}from"./QuestionCircleFilled-DDd4IIMi.js";import{u as K}from"./useCache-B5fhQtS1.js";import{a as Pe,R as Ce}from"./UserOutlined-GRCEyX4X.js";import{R as X}from"./ClearOutlined-C2r0eU-9.js";import{L as _e}from"./LoupeIcon-OR_y5aaO.js";import{O as Z}from"./OpinionsIcon-CYZYT3RP.js";import{d as Le}from"./WritingIcon-Cvvw1En6.js";import{M as ee}from"./DoubleRightOutlined-B7LA3wA7.js";import{S as w}from"./index-O1RVJmS5.js";import{P as se}from"./index-Bvpl6Id4.js";import{R as Re}from"./AimOutlined-PWml2xON.js";import{V as Ve}from"./ViewSwitch-BbBpgean.js";import{N as Me}from"./NuclearExplosionIcon-BXLUHW82.js";import{T as qe}from"./ThiefIcon-C683O-xk.js";import{V as ke}from"./ViewOr-COZH0QZU.js";import{P as Fe}from"./PeopleAssessmentIcon-C0E7zDHr.js";import{T as $e}from"./TrophyIcon-CWHCSNGD.js";import{G as Ge}from"./GameOverWrapper-CQu9fTxH.js";import"./useBlurCards-C3JXcW8R.js";import"./speech-DpXlpekd.js";import"./useDevFeatures-e1NaylJb.js";import"./RulesModal-I9GFZdcv.js";import"./Game-Cxrq78eb.js";import"./useMutation-CvXWq95-.js";import"./index-DPWqmgWq.js";import"./useBubbleLock-COImsEUg.js";import"./PurePanel-Cd9asqhu.js";import"./index-Bi8F9TlR.js";import"./Avatar-BrgXFtHw.js";import"./GameBanner-ChzF42mI.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-8VvGbXiS.js";import"./InfoCircleOutlined-BwhYamI9.js";import"./index-CeONulE9.js";import"./SignIn-DQImYfxv.js";import"./GoogleIcon-Ddkg4UBH.js";import"./WaitingRoomIcon-Bj8HXfPg.js";import"./AnimatedClockIcon-BMzY3Z2_.js";import"./Loading-BjUckQWF.js";import"./AnimatedLoaderIcon-BdGIS7yY.js";import"./LikeFilled-DE03W07s.js";import"./Overflow-9jjeKLpx.js";import"./useEvent-CoFaBXPl.js";import"./TheEndIcon-CIvtzlwg.js";import"./StarFilled-WOqSLkhS.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-D6p_N5EL.js";import"./useMergedState-DimyNY2-.js";import"./progress-DHMVD1T6.js";var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},We=function(n,o){return f.createElement(Q,J({},n,{ref:o,icon:Ue}))},Ye=f.forwardRef(We),ze=function(n,o){return f.createElement(Q,J({},n,{ref:o,icon:ie}))},ne=f.forwardRef(ze);function F({children:s}){return e.jsx(e.Fragment,{children:s})}const S={ASSIGNMENT:"ASSIGNMENT",INVESTIGATION:"INVESTIGATION",ASSESSMENT:"ASSESSMENT",FINAL_ASSESSMENT:"FINAL_ASSESSMENT",RESOLUTION:"RESOLUTION"},V={LAST_QUESTIONER:"LAST_QUESTIONER",MAKE_ACCUSATION:"MAKE_ACCUSATION",SUBMIT_VOTE:"SUBMIT_VOTE",GUESS_LOCATION:"GUESS_LOCATION"},M=({location:s,role:n,header:o})=>{const{translate:a}=p(),c=a("Local Desconhecido","Unknown Location"),l=a("Você é o espião","You are the spy"),r=a(`Você é um(a) ${n}`,`You are a ${n}`);return e.jsx(Oe,{color:s==="SPY"?"red":"lime",header:s==="SPY"?c:o,size:"large",footer:n==="SPY"?l:r,className:"e-card",footerClassName:"e-card__footer",children:s==="SPY"?e.jsx(we,{}):s})};function q({locations:s}){const{translate:n}=p(),{cache:o,setCache:a}=K(),c=r=>{a(u=>{const t={...u};return t[r]?delete t[r]:t[r]=!0,t})},l=()=>{a(r=>{const u={...r};return Object.keys(u).forEach(t=>{t.startsWith("_")||delete u[t]}),u})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Pe,{})," ",e.jsx(i,{pt:"Possíveis Locais",en:"Possible Locations"}),e.jsx($,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(X,{}),onClick:l,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:O("e-list__list","e-list__list--column"),children:s.map(r=>e.jsx("li",{className:O("e-list__item",o[r.id]&&"e-list__item--crossed"),role:"button",onClick:()=>c(r.id),children:r.name},r.id))})]})}function k(){const{translate:s}=p();return e.jsx("textarea",{name:"",id:"",cols:30,rows:10,className:"e-notes",placeholder:s("Escreva anotações aqui se quiser, mas cuidado com o teclado fazendo muito barulho","Write your notes here, but don't make too much noise with those key strokes")})}function Be({user:s,isUserTheSpy:n,locations:o}){return C(),e.jsxs(A,{className:"e-phase-step",children:[e.jsx(_,{className:"e-phase-title",children:e.jsx(i,{pt:"Você está no(a)...",en:"We are in/at/on..."})}),e.jsx(M,{location:s.location,role:s.role}),e.jsx(he,{children:e.jsx(i,{pt:"Começar cronômetro",en:"Start Timer"})}),e.jsx(m,{className:"e-phase-instruction",children:n?e.jsx(i,{pt:"Você terá 10 minutos para descobrir onde os outros agentes estão! Pronto?",en:"You have 10 minutes to find out where the other agents are! Ready?"}):e.jsx(i,{pt:"Você terá 10 minutos para descobrir quem é o espião entre nós! Pronto?",en:"You have 10 minutes to find out who is the spy! Ready?"})}),e.jsx(m,{className:"e-lists",children:e.jsx(q,{locations:o})}),e.jsx(k,{})]})}function He({state:s,players:n}){var r,u,t;const{step:o,goToNextStep:a}=y(0),c=L(n,s),[,l]=T("currentSpyId",s,n);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.ASSIGNMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(Ee,{round:s.round,onPressButton:a,time:5,className:"e-round-announcement",children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Há um espião entre nós!",en:"There's a spy among us!"})})}),e.jsx(j,{icon:e.jsx(ye,{}),title:e.jsx(i,{pt:"Prólogo",en:"Prologue"}),onClose:a,currentRound:(r=s==null?void 0:s.round)==null?void 0:r.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:15,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Estamos todos em um local que somente agentes confiáveis sabem onde é, mas um espião conseguiu se infiltrar em nosso sistema.",e.jsx("br",{}),"Estamos nos comunicando pelo ponto em nossos ouvidos porque somos espiões hi-tech."]}),en:e.jsxs(e.Fragment,{children:["We're all in a secret location that only the most trustworthy agents are assigned to, but a spy has hacked our system.",e.jsx("br",{}),"We are communication through our in-ear spy tech."]})})})}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:e.jsx(Ae,{}),title:e.jsx(i,{pt:"Você tem uma missão",en:"You have one mission"}),onClose:a,currentRound:(u=s==null?void 0:s.round)==null?void 0:u.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:10,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Se você é um agente, sua missão é descobrir quem é o espião.",e.jsx("br",{}),"Se você é o espião, sua missão é descobrir qual local os outros estão."]}),en:e.jsxs(e.Fragment,{children:["If you are an agent, your mission is to figure out who the spy is.",e.jsx("br",{}),"If you are the spy, your mission is to find out where the agents are and nuke it!."]})})})}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:e.jsx(Te,{}),title:e.jsx(i,{pt:"Mais detalhes",en:"More details"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:30,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Um jogador faz uma pergunta a outro, qualquer tipo de pergunta, e então esse o jogador responde, de qualquer forma.",e.jsx("br",{}),"Você quer ser específico o suficiente para que outros jogadores não te acusem, mas vago o suficiente para que espião não sabia onde estamos.",e.jsx("br",{}),"O jogador que responde se torna o novo 'perguntador'.",e.jsx("br",{}),"Mas fique esperto, você só pode acusar alguém (ou tentar descobrir a localização) uma única vez durante o jogo."]}),en:e.jsxs(e.Fragment,{children:["One player will ask a question to another player, any kind of question, then this player will respond, in any way.",e.jsx("br",{}),"You want to be specific enough so other players don't accuse you, but vague enough so the spy does not figure out where you are.",e.jsx("br",{}),"The asked player becomes the new questioner.",e.jsx("br",{}),"But watch out! You can only accuse someone (or guess the location) a single time during the game."]})})})}),e.jsx(Be,{user:c,isUserTheSpy:l,locations:s.locations})]})})}function De(s){const{translate:n}=p(),o=R({actionName:"submit-guess",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Chute submetido com sucesso","Guess submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu chute","Oops, the application found an error while trying to submit your guess")});return a=>{o({action:V.GUESS_LOCATION,...a})}}function oe(s){const{translate:n}=p(),o=R({actionName:"make-accusation",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Acusação submetida com sucesso","Accusation submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua acusação","Oops, the application found an error while trying to submit your acusação")});return a=>{o({action:V.MAKE_ACCUSATION,...a})}}function Qe(s){const{translate:n}=p(),o=R({actionName:"submit-vote",onError:()=>s(1),successMessage:n("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return a=>{o({action:V.SUBMIT_VOTE,...a})}}function Je(s){const{translate:n}=p(),o=R({actionName:"submit-last-questioner",onError:()=>s(1),successMessage:n("Último perguntador submetido com sucesso","Last questioner submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar o último perguntador","Oops, the application found an error while trying to submit the last questioner")});return a=>{o({action:V.LAST_QUESTIONER,...a})}}function Ke(s){return n=>{console.log(n)}}function Xe({onSendLastQuestioner:s,players:n}){const o=xe();return e.jsxs(ee,{open:o,title:e.jsx(i,{pt:"O Tempo Acabou!",en:"Time's up"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(i,{pt:"Quem foi a última pessoa a responder uma pergunta?",en:"Who was the last person to answer a question?"}),e.jsx(U,{wrap:!0,children:Object.entries(n).map(([a,c])=>e.jsx(N,{type:"default",icon:e.jsx(Ce,{}),onClick:()=>s({lastPlayerId:a}),children:c.name},a))})]})}function Ze({locations:s,onSend:n}){const{translate:o}=p(),{isLoading:a}=P(),[c,l]=f.useState(""),r=t=>l(t),u=f.useMemo(()=>{var t;return((t=s.find(d=>d.id===c))==null?void 0:t.name)??""},[c,s]);return e.jsxs(W,{className:"e-select-container e-select-container--locations",children:[e.jsx(w,{onChange:r,placeholder:o("Chute um local","Guess location"),children:s.map(t=>e.jsx(w.Option,{value:t.id,children:t.name},`select-${t.id}`))}),e.jsx(se,{title:e.jsx(i,{pt:`Você só pode chutar uma vez durante o jogo! Tem certeza que quer chutar ${u}?`,en:`You may guess the location only once! Are you sure you want to guess ${u}?`}),onConfirm:()=>n({locationId:c}),okText:"Sim",cancelText:"Não",children:e.jsxs(N,{type:"primary",disabled:!c||a,icon:a?e.jsx(ne,{}):null,children:[e.jsx(i,{pt:"Chutar",en:"Guess"}),u?`: ${u}`:""]})})]})}function ae({players:s,onSend:n,isFinalAssessment:o=!1}){var g,h;const{translate:a}=p(),{isLoading:c}=P(),[l]=re("userId"),[r,u]=f.useState(""),t=Object.values(s).filter(x=>x.id!==l),d=x=>u(x);return e.jsxs(W,{children:[e.jsx(w,{onChange:d,className:"e-select",placeholder:a("Acuse um jogador","Accuse a player"),children:t.map(x=>e.jsx(w.Option,{value:x.id,children:x.name},x.id))}),e.jsx(se,{title:`${o?"":a("Você só pode acusar uma vez durante o jogo!","You may only make one accusation during the game!")} ${a("Tem certeza que quer acusar","Are you sure you want to accuse")} ${(g=s[r])==null?void 0:g.name}?`,onConfirm:()=>n({targetId:r}),okText:a("Sim","Yes"),cancelText:a("Não","No"),children:e.jsxs(N,{type:"primary",disabled:!r||c,icon:c?e.jsx(ne,{}):null,children:[e.jsx(i,{pt:"Acusar",en:"Accuse"}),r?`: ${(h=s[r])==null?void 0:h.name}`:""]})})]})}function z({players:s}){const{translate:n}=p(),{cache:o,setCache:a}=K(),c=ce(s),l=u=>{a(t=>{const d={...t};return d[u]?delete d[u]:d[u]=!0,d})},r=()=>{a(u=>{const t={...u};return Object.keys(t).forEach(d=>{d.startsWith("_")&&delete t[d]}),t})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Re,{})," ",e.jsx(i,{pt:"Suspeitos",en:"Suspects"}),e.jsx($,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(X,{}),onClick:r,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:"e-list__list",children:c.map(u=>e.jsxs("li",{className:O("e-list__item",o[u.id]&&"e-list__item--crossed"),role:"button",onClick:()=>l(u.id),children:[u.name," ",u.usedAccusation&&e.jsx($,{title:"Já usou acusação",children:e.jsx(Ye,{size:12})})]},u.id))})]})}function es({timer:s,hideAccusationSelect:n,setStep:o}){const a=()=>{n(),o(2)},{minutes:c,seconds:l}=le.useTimer({expiryTimestamp:ue(s.timeRemaining-2e3),autoStart:!0,onExpire:a});return e.jsxs("div",{className:"e-timer",children:[c,":",l<10?`0${l}`:l]})}function ss({user:s,isUserTheSpy:n,locations:o,players:a,timer:c,onGuessLocation:l,onMakeAccusation:r,onSendLastQuestioner:u,outcome:t,setStep:d}){C();const{translate:g}=p(),[h,x]=f.useState(!0),{notification:I}=Y.useApp();f.useEffect(()=>{(t==null?void 0:t.type)==="VOTE_FAIL"&&I.info({message:g("A votação não foi unânime","The voting was not unanimous"),description:t.votedYes?`Votaram sim: ${t.votedYes}`:"Ninguém votou sim",duration:10})},[t==null?void 0:t.type]);const E=()=>{x(!1)};return e.jsxs(A,{className:"e-phase-step",children:[e.jsxs("div",{className:"e-phase-step-header",children:[e.jsx("div",{className:"e-phase-step-header__timer-container",children:e.jsx(es,{timer:c,hideAccusationSelect:E,setStep:d})}),e.jsxs("div",{className:"e-phase-step-header__center",children:[e.jsx(de,{level:2,className:"e-phase-title",children:n?e.jsx(i,{pt:"Onde eles estão?",en:"Where are they?"}):e.jsx(i,{pt:"Quem é o espião?",en:"Who is the spy?"})}),e.jsx(M,{location:s.location,role:s.role})]})]}),h&&e.jsxs(U,{children:[n&&e.jsx(Ze,{locations:o,onSend:l}),"|",s!=null&&s.usedAccusation?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você já usou sua chance de acusar",en:"You already used your accusation"})}):e.jsx(ae,{players:a,onSend:r})]}),e.jsxs(m,{className:"e-lists",children:[e.jsx(z,{players:a}),e.jsx(q,{locations:o})]}),e.jsx(k,{})]})}function ns({state:s,players:n}){var I,E,B,H;const{translate:o}=p(),{step:a,goToNextStep:c,setStep:l}=y(0),r=L(n,s),{notification:u}=Y.useApp(),[,t]=T("currentSpyId",s,n),[d]=T("startingPlayerId",s,n),g=De(l),h=oe(l),x=Je(l);return f.useEffect(()=>{s.timeRemaining>59e4&&d.name&&u.info({message:o("10 minutos!","10 minutes!"),description:o(`${d.name} começa perguntando!`,`${d.name} starts questioning!`),duration:10})},[d.name]),e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.INVESTIGATION,className:"e-phase",children:e.jsxs(v,{step:a,players:n,children:[((I=s==null?void 0:s.outcome)==null?void 0:I.type)!=="VOTE_FAIL"?e.jsx(j,{icon:e.jsx(_e,{}),title:e.jsx(i,{pt:"Investigação",en:"Investigation"}),onClose:c,currentRound:(E=s==null?void 0:s.round)==null?void 0:E.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block"}):e.jsx(j,{icon:e.jsx(Z,{}),title:e.jsx(i,{pt:"A investigação continua",en:"The investigation continues"}),onClose:c,currentRound:(B=s==null?void 0:s.round)==null?void 0:B.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(ss,{user:r,isUserTheSpy:t,locations:s.locations,players:n,timer:s.timer,onGuessLocation:g,onMakeAccusation:h,onSendLastQuestioner:x,outcome:s.outcome,setStep:l}),e.jsxs(j,{icon:e.jsx(Le,{}),title:e.jsx(i,{pt:"O tempo acabou!!!",en:"Time's up!!!"}),unskippable:!0,duration:300,onClose:()=>{},currentRound:(H=s==null?void 0:s.round)==null?void 0:H.current,buttonText:"",className:"e-phase-announcement",type:"block",children:[e.jsx(m,{children:e.jsx(i,{pt:"Preparado para a avaliação final?",en:"Are you ready for the final assessment?"})}),e.jsx(Xe,{onSendLastQuestioner:x,players:n})]})]})})}function os({user:s,locations:n,players:o,onSubmitVote:a,accuser:c,isUserTheAccuser:l,target:r,isUserTheTarget:u}){const{translate:t}=p(),{isLoading:d}=P();return e.jsxs(A,{className:"e-phase-step",children:[e.jsx(_,{className:"e-phase-title",children:e.jsx(i,{pt:`${c.name} está acusando ${r.name} de ser o espião. Concorda?`,en:`${c.name} is accusing ${r.name} to be the spy. Do you agree?`})}),e.jsxs(Ve,{cases:[l,u,!0],children:[e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, você quem acusou!",en:"You do not join the voting, after all, you triggered it!"})})},"accuser"),e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, é você quem está no paredão!",en:"You do not joint the voting, after all, you are the target"})})},"target"),e.jsx(F,{children:s.ready?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Voto computado",en:"Vote accepted"})}):e.jsxs(W,{children:[e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!0}),children:e.jsx(i,{pt:"Também acho!",en:"Agree!"})}),e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!1}),children:e.jsx(i,{pt:"Não é ele(a)",en:"It's not them"})})]})},"others")]}),e.jsx(M,{location:s.location,role:s.role}),e.jsx(je,{players:o,readyText:t("Votei","I voted"),readyTextPlural:t("Votamos","We voted"),hideNames:!0}),e.jsxs(m,{className:"e-lists",children:[e.jsx(z,{players:o}),e.jsx(q,{locations:n})]}),e.jsx(k,{})]})}function as({state:s,players:n}){var h;const{step:o,goToNextStep:a,setStep:c}=y(0),l=L(n,s),[r,u]=T("accuserId",s,n),[t,d]=T("targetId",s,n),g=Qe(c);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(j,{icon:e.jsx(be,{}),title:e.jsx(i,{pt:"Acusação!",en:"Accusation!"}),onClose:a,currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--alert",duration:5,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Alguém foi acusado! Bafo!",e.jsx("br",{}),"Apenas se a votação for unanime que o resultado é revelado."]}),en:e.jsxs(e.Fragment,{children:["Someone was accused! Drama!!!",e.jsx("br",{}),"The solution is revealed only if the voting is unanimous."]})})})}),e.jsx(os,{user:l,locations:s.locations,players:n,onSubmitVote:g,accuser:r,isUserTheAccuser:u,target:t,isUserTheTarget:d})]})})}const ts=(s,n,o,a)=>{const c=a.find(l=>l.id===(s==null?void 0:s.guess))??{};return{isPlayerVictory:s.isSpyWin===n,isUserTheSpy:n,wasABadVoting:s.isSpyWin&&o>0,wasAnAccusationAttempt:s.type==="SPY_FOUND",didSpyGuess:s.type==="SPY_GUESS",didTheSpyWin:s.isSpyWin,phaseIcon:s.isSpyWin?"nuclear-explosion":"handcuffs",guess:c,currentLocation:s.currentLocation}};function is({players:s,target:n,resolutionStatus:o,currentSpy:a,onProgressGame:c}){var r;C();const{isLoading:l}=P();return e.jsxs(A,{className:"e-phase-step",children:[e.jsx(_,{className:O("e-phase-title",!o.isPlayerVictory&&"e-phase-title--fail"),children:o.isPlayerVictory?e.jsx(i,{pt:"Missão Cumprida!",en:"Mission Accomplished!"}):e.jsx(i,{pt:"Missão Fracassada",en:"Mission Failed"})}),o.wasAnAccusationAttempt&&n&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Os agentes tentaram incriminar ",n.name,o.didTheSpyWin?" e erraram feio!":" e acertaram na mosca!",e.jsx("br",{}),o.didTheSpyWin?`O espião era ${a.name}! Todos os segredos da agência foram revelados e o mundo vai acabar.`:"Parabéns! O mundo está salvo graças a você.",e.jsx("br",{}),o.wasABadVoting&&"Da próxima vez, discutam mais antes de fazerem uma votação precipitada."]}),en:e.jsxs(e.Fragment,{children:["The agents tried to pin ",n.name,o.didTheSpyWin?" and got it all wrong!":" and hit the bull's eye!",e.jsx("br",{}),o.didTheSpyWin?`The spy was ${a.name}! All of the agency secrets were revealed and the world will end.`:"Congratulations! The world is safe and sound thanks to you.",e.jsx("br",{}),o.wasABadVoting&&"Next time, discuss more before making a rash decision."]})})}),o.didSpyGuess&&o.currentLocation&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["O espião disse que o local é ",o.guess.name,o.didTheSpyWin?" e acertou na mosca!":` e errou feio! Os Agentes estão num(a) ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"Todos os segredos da agência foram revelados e o mundo vai acabar.":"Foi por pouco, mas não foi dessa vez que o mal venceu."]}),en:e.jsxs(e.Fragment,{children:["The spy guessed the location: ",o.guess.name,o.didTheSpyWin?" and hit the bull's eye!":` and got it all wrong! The agents were at a ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"All of the agency secrets were revealed and the world will end...":"That was close... but evil won't win this time."]})})}),e.jsxs(m,{className:"e-phase-instruction",children:[e.jsx("h4",{children:(r=o.currentLocation)==null?void 0:r.name}),e.jsx(i,{pt:"Disfarces dos infiltrados:",en:"Agent's roles:"}),Object.values(s).map(({id:u,name:t,role:d})=>e.jsxs("li",{children:[t," ",e.jsx(i,{pt:"como",en:"as"})," ",d==="SPY"?e.jsx(i,{pt:"ESPIÃO",en:"SPY"}):d]},`role-list-${u}`))]}),e.jsxs(fe,{children:[e.jsx(D,{onClick:()=>c({continue:!0}),disabled:l,children:e.jsx(i,{pt:"Jogar mais uma rodada",en:"Play another round"})}),e.jsx(D,{onClick:()=>c({end:!0}),disabled:l,children:e.jsx(i,{pt:"Terminar Jogo",en:"End Game"})})]})]})}function rs({state:s,players:n}){var d,g,h;const{step:o,goToNextStep:a}=y(0),[c,l]=T("currentSpyId",s,n),[r]=T("targetId",s,n),u=Ke(),t=f.useMemo(()=>ts(s.resolution,l,s.timeRemaining,s.locations),[s.resolution,l,s.timeRemaining,s.locations]);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.RESOLUTION,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsxs(ke,{condition:t.didSpyGuess,children:[e.jsx(j,{icon:e.jsx(ve,{}),title:e.jsx(i,{pt:"O espião tentou adivinhar o local",en:"The spy tried to guess the location"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(j,{icon:e.jsx(qe,{}),title:e.jsx(i,{pt:"A votação foi unanime!",en:"The vote was unanimous!"}),onClose:a,currentRound:(g=s==null?void 0:s.round)==null?void 0:g.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"})]}),e.jsx(G,{goToNextStep:a}),e.jsx(j,{icon:t.phaseIcon==="nuclear-explosion"?e.jsx(Me,{}):e.jsx(Ie,{}),title:e.jsx(i,{pt:"O fim chegou!",en:"The end is here!"}),onClose:a,currentRound:(h=s==null?void 0:s.round)==null?void 0:h.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(is,{players:n,target:r,resolutionStatus:t,currentSpy:c,onProgressGame:u})]})})}function te({finalAssessment:s,players:n}){const{playerOrder:o,playerOrderIndex:a}=s,c=n[o[a]],l=me(o,n).join(", ");return e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Já que vocês falharam em encontrar o espião, há uma última possibilidade!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Cada jogador, começando por ",c.name,", faz uma acusação."]}):e.jsxs("li",{children:["Agora é a vez de ",c.name," faz uma acusação."]}),e.jsx("li",{children:"Se a votação for unânime em qualquer uma das votações, o jogo acaba e revelam-se os papéis."}),e.jsx("li",{children:"Sem discussão dessa vez, simplesmente acuse alguém! Não temos mais tempo!"}),e.jsxs("li",{children:["A ordem será essa: ",l]})]})]}),en:e.jsxs(e.Fragment,{children:["Since you've failed to find the spy, here's a last resort!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Each player will, starting with ",c.name,", will make an accusation."]}):e.jsxs("li",{children:["Now it's time for ",c.name," to make an accusation."]}),e.jsx("li",{children:"If the voting result is unanimous, the game is over and the roles are revealed."}),e.jsx("li",{children:"No discussion, just accuse somebody! There's no time anymore!"}),e.jsxs("li",{children:["The order is: ",l]})]})]})})})}function cs({isModalVisible:s,onMakeAccusation:n,players:o,finalAssessment:a}){return e.jsxs(ee,{open:s,title:e.jsx(i,{pt:"Quem você vai acusar?",en:"Who are you gonna accuse?"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(te,{finalAssessment:a,players:o}),e.jsx(i,{pt:"Não há tempo pra pensar, escolha alguém!",en:"There's no time to think, just choose someone"}),e.jsx(U,{children:e.jsx(ae,{players:o,onSend:n,isFinalAssessment:!0})})]})}function ls({finalAssessment:s,players:n,user:o,locations:a,isUserTheAccuser:c,onMakeAccusation:l,outcome:r}){C();const{notification:u}=Y.useApp(),{translate:t}=p();return f.useEffect(()=>{(r==null?void 0:r.type)==="VOTE_FAIL"&&u.info({message:t("A votação não foi unânime","The voting was not unanimous"),description:r.votedYes?`Votaram sim: ${r.votedYes}`:"Ninguém votou sim",duration:10})},[r==null?void 0:r.type]),e.jsxs(A,{children:[e.jsx(_,{className:"e-phase-title",children:e.jsx(i,{pt:"Última Chance!",en:"Last chance!"})}),e.jsx(cs,{isModalVisible:c,onMakeAccusation:l,players:n,finalAssessment:s}),e.jsx(te,{finalAssessment:s,players:n}),e.jsx(M,{location:o.location,role:o.role}),e.jsxs(m,{className:"e-lists",children:[e.jsx(z,{players:n}),e.jsx(q,{locations:a})]}),e.jsx(k,{})]})}function us({state:s,players:n}){var t,d;const{step:o,goToNextStep:a,setStep:c}=y(0),l=L(n,s),r=oe(c),u=s.finalAssessment.playerOrder[s.finalAssessment.playerOrderIndex]===l.id;return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:S.FINAL_ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[s.finalAssessment.playerOrderIndex===0?e.jsx(j,{icon:e.jsx(Fe,{}),title:e.jsx(i,{pt:"O tempo acabou!",en:"Time's up!"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement",duration:2,type:"block"}):e.jsx(j,{icon:e.jsx(Z,{}),title:e.jsx(i,{pt:"A avaliação final continua",en:"The final assessment continues"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(ls,{onMakeAccusation:r,players:n,finalAssessment:s.finalAssessment,outcome:s.outcome,user:l,locations:s.locations,isUserTheAccuser:u})]})})}function ds({state:s,players:n}){return e.jsx(Ge,{state:s,players:n,announcementIcon:e.jsx($e,{})})}function ms(s){switch(s.phase){case S.ASSIGNMENT:return He;case S.INVESTIGATION:return ns;case S.ASSESSMENT:return as;case S.FINAL_ASSESSMENT:return us;case S.RESOLUTION:return rs;case Ne.DEFAULT.GAME_OVER:return ds;default:return Se}}function Sn(){return e.jsx(ge,{gameCollection:pe.ESPIAO_ENTRE_NOS,getActiveComponent:ms})}export{Sn as default};
