import{r as g,ae as Q,af as J,j as e,h,T as i,aN as U,B as N,e as O,aM as Y,aH as _,s as W,cC as K,aI as ie,bQ as re,bt as ce,cG as le,E as z,k as ue,cH as de,aZ as me,aX as pe,aY as he}from"./index-D3vq3Txu.js";import{m as w,S as A,b as C,n as xe,d as y,c as R,e as b,f as p,g as v,P as f,u as L,p as je,R as fe,H as ge,q as D,i as Se,j as Ne,k as Te,l as Ae}from"./StepSwitcher-B3YCO2mR.js";import{G as ye}from"./GameOver-3Q4r9GKU.js";import{u as T}from"./useWhichPlayerIsThe-C446tp5F.js";import{P as be}from"./PassportIcon-DdggHxc0.js";import{S as ve}from"./SecretIcon-G20UtujZ.js";import{S as Ee,A as Ie,M as Oe,H as Pe}from"./SpyNewspaperIcon-BvTpQ9t-.js";import{I as m}from"./Instruction-PkO6-gTb.js";import{P as $}from"./PhaseTimerReset-C_uLkoDi.js";import{R as _e}from"./RoundAnnouncement-xVBXI3kL.js";import{C as we}from"./Card-B4XZEJqq.js";import{R as Ce}from"./QuestionCircleFilled-DDSNTAZ9.js";import{u as X}from"./useCache-BlPEXc8i.js";import{R as Re}from"./EnvironmentOutlined-Pmto-Qmn.js";import{R as Z}from"./ClearOutlined-jq2vIEOw.js";import{L as Le}from"./LoupeIcon-BLwFeBJk.js";import{O as ee}from"./OpinionsIcon-Dqr_ASUw.js";import{d as Ve}from"./WritingIcon-CAYKSeJ_.js";import{M as se}from"./index-D29qyGDj.js";import{S as P}from"./index-DVDD9aDl.js";import{P as ne}from"./index-DADoNPWT.js";import{R as qe}from"./AimOutlined-BY8JYIHK.js";import{V as Me}from"./ViewSwitch-BbBpgean.js";import{N as ke}from"./NuclearExplosionIcon-VWqn2V_i.js";import{T as Fe}from"./ThiefIcon-BKY1hoUT.js";import{V as Ue}from"./ViewOr-Ca6fKC_D.js";import{P as $e}from"./PeopleAssessmentIcon-C-9ALpMx.js";import"./useBlurCards-Bt7M8kGu.js";import"./speech-Bw06OD1w.js";import"./useDevFeatures-ClukBrZs.js";import"./RulesModal-C-bKjao-.js";import"./useMutation-CN7eIMJF.js";import"./Game-5GeYtc6X.js";import"./WaitingRoomIcon-SJEQlq95.js";import"./AnimatedClockIcon-DodSI62R.js";import"./index-CyGnwAc4.js";import"./useBubbleLock-Bx5FWPea.js";import"./PurePanel-BF2GlNzn.js";import"./index-BX1C5KFw.js";import"./Avatar-BXCkfchd.js";import"./GameBanner-DHwdrElN.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-DDoM49tt.js";import"./InfoCircleOutlined-CvmTlaNc.js";import"./index-Dep7DJJi.js";import"./SignIn-1Kx361EE.js";import"./GoogleIcon-D745wQCy.js";import"./Loading-BvJBwNk4.js";import"./AnimatedLoaderIcon-BZHQBQtU.js";import"./LikeFilled-Cs-43aU6.js";import"./StarFilled-DeBh0goY.js";import"./index-BdsjejNj.js";import"./useMergedState-BZK0D7nP.js";import"./useEvent-Dj7pk07h.js";import"./progress-CyL_5XR1.js";import"./Overflow-CqDKdLP7.js";var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},We=function(n,o){return g.createElement(Q,J({},n,{ref:o,icon:Ye}))},ze=g.forwardRef(We),Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},Be=function(n,o){return g.createElement(Q,J({},n,{ref:o,icon:Ge}))},He=g.forwardRef(Be);function F({children:s}){return e.jsx(e.Fragment,{children:s})}const V=({location:s,role:n,header:o})=>{const{translate:a}=h(),c=a("Local Desconhecido","Unknown Location"),l=a("Você é o espião","You are the spy"),r=a(`Você é um(a) ${n}`,`You are a ${n}`);return e.jsx(we,{color:s==="SPY"?"red":"lime",header:s==="SPY"?c:o,size:"large",footer:n==="SPY"?l:r,className:"e-card",footerClassName:"e-card__footer",children:s==="SPY"?e.jsx(Ce,{}):s})};function q({locations:s}){const{translate:n}=h(),{cache:o,setCache:a}=X(),c=r=>{a(u=>{const t={...u};return t[r]?delete t[r]:t[r]=!0,t})},l=()=>{a(r=>{const u={...r};return Object.keys(u).forEach(t=>{t.startsWith("_")||delete u[t]}),u})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(Re,{})," ",e.jsx(i,{pt:"Possíveis Locais",en:"Possible Locations"}),e.jsx(U,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(Z,{}),onClick:l,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:O("e-list__list","e-list__list--column"),children:s.map(r=>e.jsx("li",{className:O("e-list__item",o[r.id]&&"e-list__item--crossed"),role:"button",onClick:()=>c(r.id),children:r.name},r.id))})]})}function M(){const{translate:s}=h();return e.jsx("textarea",{name:"",id:"",cols:30,rows:10,className:"e-notes",placeholder:s("Escreva anotações aqui se quiser, mas cuidado com o teclado fazendo muito barulho","Write your notes here, but don't make too much noise with those key strokes")})}function De({user:s,isUserTheSpy:n,locations:o}){return w(),e.jsxs(A,{className:"e-phase-step",children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(i,{pt:"Você está no(a)...",en:"We are in/at/on..."})}),e.jsx(V,{location:s.location,role:s.role}),e.jsx(xe,{children:e.jsx(i,{pt:"Começar cronômetro",en:"Start Timer"})}),e.jsx(m,{className:"e-phase-instruction",children:n?e.jsx(i,{pt:"Você terá 10 minutos para descobrir onde os outros agentes estão! Pronto?",en:"You have 10 minutes to find out where the other agents are! Ready?"}):e.jsx(i,{pt:"Você terá 10 minutos para descobrir quem é o espião entre nós! Pronto?",en:"You have 10 minutes to find out who is the spy! Ready?"})}),e.jsx(m,{className:"e-lists",children:e.jsx(q,{locations:o})}),e.jsx(M,{})]})}function Qe({state:s,players:n}){var r,u,t;const{step:o,goToNextStep:a}=y(0),c=R(n,s),[,l]=T("currentSpyId",s,n);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.ASSIGNMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(_e,{round:s.round,onPressButton:a,time:5,className:"e-round-announcement",children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Há um espião entre nós!",en:"There's a spy among us!"})})}),e.jsx(f,{icon:e.jsx(Ee,{}),title:e.jsx(i,{pt:"Prólogo",en:"Prologue"}),onClose:a,currentRound:(r=s==null?void 0:s.round)==null?void 0:r.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:15,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Estamos todos em um local que somente agentes confiáveis sabem onde é, mas um espião conseguiu se infiltrar em nosso sistema.",e.jsx("br",{}),"Estamos nos comunicando pelo ponto em nossos ouvidos porque somos espiões hi-tech."]}),en:e.jsxs(e.Fragment,{children:["We're all in a secret location that only the most trustworthy agents are assigned to, but a spy has hacked our system.",e.jsx("br",{}),"We are communication through our in-ear spy tech."]})})})}),e.jsx($,{goToNextStep:a}),e.jsx(f,{icon:e.jsx(ve,{}),title:e.jsx(i,{pt:"Você tem uma missão",en:"You have one mission"}),onClose:a,currentRound:(u=s==null?void 0:s.round)==null?void 0:u.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:10,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Se você é um agente, sua missão é descobrir quem é o espião.",e.jsx("br",{}),"Se você é o espião, sua missão é descobrir qual local os outros estão."]}),en:e.jsxs(e.Fragment,{children:["If you are an agent, your mission is to figure out who the spy is.",e.jsx("br",{}),"If you are the spy, your mission is to find out where the agents are and nuke it!."]})})})}),e.jsx($,{goToNextStep:a}),e.jsx(f,{icon:e.jsx(be,{}),title:e.jsx(i,{pt:"Mais detalhes",en:"More details"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--animated",duration:30,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Um jogador faz uma pergunta a outro, qualquer tipo de pergunta, e então esse o jogador responde, de qualquer forma.",e.jsx("br",{}),"Você quer ser específico o suficiente para que outros jogadores não te acusem, mas vago o suficiente para que espião não sabia onde estamos.",e.jsx("br",{}),"O jogador que responde se torna o novo 'perguntador'.",e.jsx("br",{}),"Mas fique esperto, você só pode acusar alguém (ou tentar descobrir a localização) uma única vez durante o jogo."]}),en:e.jsxs(e.Fragment,{children:["One player will ask a question to another player, any kind of question, then this player will respond, in any way.",e.jsx("br",{}),"You want to be specific enough so other players don't accuse you, but vague enough so the spy does not figure out where you are.",e.jsx("br",{}),"The asked player becomes the new questioner.",e.jsx("br",{}),"But watch out! You can only accuse someone (or guess the location) a single time during the game."]})})})}),e.jsx(De,{user:c,isUserTheSpy:l,locations:s.locations})]})})}const k={LAST_QUESTIONER:"LAST_QUESTIONER",MAKE_ACCUSATION:"MAKE_ACCUSATION",SUBMIT_VOTE:"SUBMIT_VOTE",GUESS_LOCATION:"GUESS_LOCATION"};function Je(s){const{translate:n}=h(),o=L({actionName:"submit-guess",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Chute submetido com sucesso","Guess submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu chute","Oops, the application found an error while trying to submit your guess")});return a=>{o({action:k.GUESS_LOCATION,...a})}}function oe(s){const{translate:n}=h(),o=L({actionName:"make-accusation",onBeforeCall:()=>s(3),onError:()=>s(0),successMessage:n("Acusação submetida com sucesso","Accusation submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar sua acusação","Oops, the application found an error while trying to submit your acusação")});return a=>{o({action:k.MAKE_ACCUSATION,...a})}}function Ke(s){const{translate:n}=h(),o=L({actionName:"submit-vote",onError:()=>s(1),successMessage:n("Voto submetido com sucesso","Vote submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu voto","Oops, the application found an error while trying to submit your vote")});return a=>{o({action:k.SUBMIT_VOTE,...a})}}function Xe(s){const{translate:n}=h(),o=L({actionName:"submit-last-questioner",onError:()=>s(1),successMessage:n("Último perguntador submetido com sucesso","Last questioner submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar o último perguntador","Oops, the application found an error while trying to submit the last questioner")});return a=>{o({action:k.LAST_QUESTIONER,...a})}}function Ze(s){return n=>{console.log(n)}}function es({onSendLastQuestioner:s,players:n}){const o=je();return e.jsxs(se,{open:o,title:e.jsx(i,{pt:"O Tempo Acabou!",en:"Time's up"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(i,{pt:"Quem foi a última pessoa a responder uma pergunta?",en:"Who was the last person to answer a question?"}),e.jsx(Y,{wrap:!0,children:Object.entries(n).map(([a,c])=>e.jsx(N,{type:"default",icon:e.jsx(He,{}),onClick:()=>s({lastPlayerId:a}),children:c.name},a))})]})}function ss({locations:s,onSend:n}){const{translate:o}=h(),{isLoading:a}=_(),[c,l]=g.useState(""),r=t=>l(t),u=g.useMemo(()=>{var t;return((t=s.find(d=>d.id===c))==null?void 0:t.name)??""},[c,s]);return e.jsxs(W,{className:"e-select-container e-select-container--locations",children:[e.jsx(P,{onChange:r,placeholder:o("Chute um local","Guess location"),children:s.map(t=>e.jsx(P.Option,{value:t.id,children:t.name},`select-${t.id}`))}),e.jsx(ne,{title:e.jsx(i,{pt:`Você só pode chutar uma vez durante o jogo! Tem certeza que quer chutar ${u}?`,en:`You may guess the location only once! Are you sure you want to guess ${u}?`}),onConfirm:()=>n({locationId:c}),okText:"Sim",cancelText:"Não",children:e.jsxs(N,{type:"primary",disabled:!c||a,icon:a?e.jsx(K,{}):null,children:[e.jsx(i,{pt:"Chutar",en:"Guess"}),u?`: ${u}`:""]})})]})}function ae({players:s,onSend:n,isFinalAssessment:o=!1}){var S,x;const{translate:a}=h(),{isLoading:c}=_(),[l]=ie("userId"),[r,u]=g.useState(""),t=Object.values(s).filter(j=>j.id!==l),d=j=>u(j);return e.jsxs(W,{children:[e.jsx(P,{onChange:d,className:"e-select",placeholder:a("Acuse um jogador","Accuse a player"),children:t.map(j=>e.jsx(P.Option,{value:j.id,children:j.name},j.id))}),e.jsx(ne,{title:`${o?"":a("Você só pode acusar uma vez durante o jogo!","You may only make one accusation during the game!")} ${a("Tem certeza que quer acusar","Are you sure you want to accuse")} ${(S=s[r])==null?void 0:S.name}?`,onConfirm:()=>n({targetId:r}),okText:a("Sim","Yes"),cancelText:a("Não","No"),children:e.jsxs(N,{type:"primary",disabled:!r||c,icon:c?e.jsx(K,{}):null,children:[e.jsx(i,{pt:"Acusar",en:"Accuse"}),r?`: ${(x=s[r])==null?void 0:x.name}`:""]})})]})}function G({players:s}){const{translate:n}=h(),{cache:o,setCache:a}=X(),c=re(s),l=u=>{a(t=>{const d={...t};return d[u]?delete d[u]:d[u]=!0,d})},r=()=>{a(u=>{const t={...u};return Object.keys(t).forEach(d=>{d.startsWith("_")&&delete t[d]}),t})};return e.jsxs("div",{className:"e-list",children:[e.jsxs("h3",{className:"e-list__title",children:[e.jsx(qe,{})," ",e.jsx(i,{pt:"Suspeitos",en:"Suspects"}),e.jsx(U,{title:n("Desmarcar todos","Unselect all"),children:e.jsx(N,{shape:"circle",ghost:!0,type:"default",size:"small",icon:e.jsx(Z,{}),onClick:r,className:"e-list__clear-button"})})]}),e.jsx("ul",{className:"e-list__list",children:c.map(u=>e.jsxs("li",{className:O("e-list__item",o[u.id]&&"e-list__item--crossed"),role:"button",onClick:()=>l(u.id),children:[u.name," ",u.usedAccusation&&e.jsx(U,{title:"Já usou acusação",children:e.jsx(ze,{size:12})})]},u.id))})]})}function ns({timer:s,hideAccusationSelect:n,setStep:o}){const a=()=>{n(),o(2)},{minutes:c,seconds:l}=ce.useTimer({expiryTimestamp:le(s.timeRemaining-2e3),autoStart:!0,onExpire:a});return e.jsxs("div",{className:"e-timer",children:[c,":",l<10?`0${l}`:l]})}function os({user:s,isUserTheSpy:n,locations:o,players:a,timer:c,onGuessLocation:l,onMakeAccusation:r,onSendLastQuestioner:u,outcome:t,setStep:d}){w();const{translate:S}=h(),[x,j]=g.useState(!0),{notification:E}=z.useApp();g.useEffect(()=>{(t==null?void 0:t.type)==="VOTE_FAIL"&&E.info({message:S("A votação não foi unânime","The voting was not unanimous"),description:t.votedYes?`Votaram sim: ${t.votedYes}`:"Ninguém votou sim",duration:10})},[t==null?void 0:t.type]);const I=()=>{j(!1)};return e.jsxs(A,{className:"e-phase-step",children:[e.jsxs("div",{className:"e-phase-step-header",children:[e.jsx("div",{className:"e-phase-step-header__timer-container",children:e.jsx(ns,{timer:c,hideAccusationSelect:I,setStep:d})}),e.jsxs("div",{className:"e-phase-step-header__center",children:[e.jsx(ue,{level:2,className:"e-phase-title",children:n?e.jsx(i,{pt:"Onde eles estão?",en:"Where are they?"}):e.jsx(i,{pt:"Quem é o espião?",en:"Who is the spy?"})}),e.jsx(V,{location:s.location,role:s.role})]})]}),x&&e.jsxs(Y,{children:[n&&e.jsx(ss,{locations:o,onSend:l}),"|",s!=null&&s.usedAccusation?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você já usou sua chance de acusar",en:"You already used your accusation"})}):e.jsx(ae,{players:a,onSend:r})]}),e.jsxs(m,{className:"e-lists",children:[e.jsx(G,{players:a}),e.jsx(q,{locations:o})]}),e.jsx(M,{})]})}function as({state:s,players:n}){var E,I,B,H;const{translate:o}=h(),{step:a,goToNextStep:c,setStep:l}=y(0),r=R(n,s),{notification:u}=z.useApp(),[,t]=T("currentSpyId",s,n),[d]=T("startingPlayerId",s,n),S=Je(l),x=oe(l),j=Xe(l);return g.useEffect(()=>{s.timeRemaining>59e4&&d.name&&u.info({message:o("10 minutos!","10 minutes!"),description:o(`${d.name} começa perguntando!`,`${d.name} starts questioning!`),duration:10})},[d.name]),e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.INVESTIGATION,className:"e-phase",children:e.jsxs(v,{step:a,players:n,children:[((E=s==null?void 0:s.outcome)==null?void 0:E.type)!=="VOTE_FAIL"?e.jsx(f,{icon:e.jsx(Le,{}),title:e.jsx(i,{pt:"Investigação",en:"Investigation"}),onClose:c,currentRound:(I=s==null?void 0:s.round)==null?void 0:I.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block"}):e.jsx(f,{icon:e.jsx(ee,{}),title:e.jsx(i,{pt:"A investigação continua",en:"The investigation continues"}),onClose:c,currentRound:(B=s==null?void 0:s.round)==null?void 0:B.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(os,{user:r,isUserTheSpy:t,locations:s.locations,players:n,timer:s.timer,onGuessLocation:S,onMakeAccusation:x,onSendLastQuestioner:j,outcome:s.outcome,setStep:l}),e.jsxs(f,{icon:e.jsx(Ve,{}),title:e.jsx(i,{pt:"O tempo acabou!!!",en:"Time's up!!!"}),unskippable:!0,duration:300,onClose:()=>{},currentRound:(H=s==null?void 0:s.round)==null?void 0:H.current,buttonText:"",className:"e-phase-announcement",type:"block",children:[e.jsx(m,{children:e.jsx(i,{pt:"Preparado para a avaliação final?",en:"Are you ready for the final assessment?"})}),e.jsx(es,{onSendLastQuestioner:j,players:n})]})]})})}function ts({user:s,locations:n,players:o,onSubmitVote:a,accuser:c,isUserTheAccuser:l,target:r,isUserTheTarget:u}){const{translate:t}=h(),{isLoading:d}=_();return e.jsxs(A,{className:"e-phase-step",children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(i,{pt:`${c.name} está acusando ${r.name} de ser o espião. Concorda?`,en:`${c.name} is accusing ${r.name} to be the spy. Do you agree?`})}),e.jsxs(Me,{cases:[l,u,!0],children:[e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, você quem acusou!",en:"You do not join the voting, after all, you triggered it!"})})},"accuser"),e.jsx(F,{children:e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Você não participa dessa votação, afinal, é você quem está no paredão!",en:"You do not joint the voting, after all, you are the target"})})},"target"),e.jsx(F,{children:s.ready?e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:"Voto computado",en:"Vote accepted"})}):e.jsxs(W,{children:[e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!0}),children:e.jsx(i,{pt:"Também acho!",en:"Agree!"})}),e.jsx(N,{ghost:!0,disabled:d,onClick:()=>a({vote:!1}),children:e.jsx(i,{pt:"Não é ele(a)",en:"It's not them"})})]})},"others")]}),e.jsx(V,{location:s.location,role:s.role}),e.jsx(fe,{players:o,readyText:t("Votei","I voted"),readyTextPlural:t("Votamos","We voted"),hideNames:!0}),e.jsxs(m,{className:"e-lists",children:[e.jsx(G,{players:o}),e.jsx(q,{locations:n})]}),e.jsx(M,{})]})}function is({state:s,players:n}){var x;const{step:o,goToNextStep:a,setStep:c}=y(0),l=R(n,s),[r,u]=T("accuserId",s,n),[t,d]=T("targetId",s,n),S=Ke(c);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsx(f,{icon:e.jsx(Ie,{}),title:e.jsx(i,{pt:"Acusação!",en:"Accusation!"}),onClose:a,currentRound:(x=s==null?void 0:s.round)==null?void 0:x.current,buttonText:"",className:"e-phase-announcement e-phase-announcement--alert",duration:5,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Alguém foi acusado! Bafo!",e.jsx("br",{}),"Apenas se a votação for unanime que o resultado é revelado."]}),en:e.jsxs(e.Fragment,{children:["Someone was accused! Drama!!!",e.jsx("br",{}),"The solution is revealed only if the voting is unanimous."]})})})}),e.jsx(ts,{user:l,locations:s.locations,players:n,onSubmitVote:S,accuser:r,isUserTheAccuser:u,target:t,isUserTheTarget:d})]})})}const rs=(s,n,o,a)=>{const c=a.find(l=>l.id===(s==null?void 0:s.guess))??{};return{isPlayerVictory:s.isSpyWin===n,isUserTheSpy:n,wasABadVoting:s.isSpyWin&&o>0,wasAnAccusationAttempt:s.type==="SPY_FOUND",didSpyGuess:s.type==="SPY_GUESS",didTheSpyWin:s.isSpyWin,phaseIcon:s.isSpyWin?"nuclear-explosion":"handcuffs",guess:c,currentLocation:s.currentLocation}};function cs({players:s,target:n,resolutionStatus:o,currentSpy:a,onProgressGame:c}){var r;w();const{isLoading:l}=_();return e.jsxs(A,{className:"e-phase-step",children:[e.jsx(C,{className:O("e-phase-title",!o.isPlayerVictory&&"e-phase-title--fail"),children:o.isPlayerVictory?e.jsx(i,{pt:"Missão Cumprida!",en:"Mission Accomplished!"}):e.jsx(i,{pt:"Missão Fracassada",en:"Mission Failed"})}),o.wasAnAccusationAttempt&&n&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Os agentes tentaram incriminar ",n.name,o.didTheSpyWin?" e erraram feio!":" e acertaram na mosca!",e.jsx("br",{}),o.didTheSpyWin?`O espião era ${a.name}! Todos os segredos da agência foram revelados e o mundo vai acabar.`:"Parabéns! O mundo está salvo graças a você.",e.jsx("br",{}),o.wasABadVoting&&"Da próxima vez, discutam mais antes de fazerem uma votação precipitada."]}),en:e.jsxs(e.Fragment,{children:["The agents tried to pin ",n.name,o.didTheSpyWin?" and got it all wrong!":" and hit the bull's eye!",e.jsx("br",{}),o.didTheSpyWin?`The spy was ${a.name}! All of the agency secrets were revealed and the world will end.`:"Congratulations! The world is safe and sound thanks to you.",e.jsx("br",{}),o.wasABadVoting&&"Next time, discuss more before making a rash decision."]})})}),o.didSpyGuess&&o.currentLocation&&e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["O espião disse que o local é ",o.guess.name,o.didTheSpyWin?" e acertou na mosca!":` e errou feio! Os Agentes estão num(a) ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"Todos os segredos da agência foram revelados e o mundo vai acabar.":"Foi por pouco, mas não foi dessa vez que o mal venceu."]}),en:e.jsxs(e.Fragment,{children:["The spy guessed the location: ",o.guess.name,o.didTheSpyWin?" and hit the bull's eye!":` and got it all wrong! The agents were at a ${o.currentLocation.name}.`,e.jsx("br",{}),o.didTheSpyWin?"All of the agency secrets were revealed and the world will end...":"That was close... but evil won't win this time."]})})}),e.jsxs(m,{className:"e-phase-instruction",children:[e.jsx("h4",{children:(r=o.currentLocation)==null?void 0:r.name}),e.jsx(i,{pt:"Disfarces dos infiltrados:",en:"Agent's roles:"}),Object.values(s).map(({id:u,name:t,role:d})=>e.jsxs("li",{children:[t," ",e.jsx(i,{pt:"como",en:"as"})," ",d==="SPY"?e.jsx(i,{pt:"ESPIÃO",en:"SPY"}):d]},`role-list-${u}`))]}),e.jsxs(ge,{children:[e.jsx(D,{onClick:()=>c({continue:!0}),disabled:l,children:e.jsx(i,{pt:"Jogar mais uma rodada",en:"Play another round"})}),e.jsx(D,{onClick:()=>c({end:!0}),disabled:l,children:e.jsx(i,{pt:"Terminar Jogo",en:"End Game"})})]})]})}function ls({state:s,players:n}){var d,S,x;const{step:o,goToNextStep:a}=y(0),[c,l]=T("currentSpyId",s,n),[r]=T("targetId",s,n),u=Ze(),t=g.useMemo(()=>rs(s.resolution,l,s.timeRemaining,s.locations),[s.resolution,l,s.timeRemaining,s.locations]);return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.RESOLUTION,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[e.jsxs(Ue,{condition:t.didSpyGuess,children:[e.jsx(f,{icon:e.jsx(Oe,{}),title:e.jsx(i,{pt:"O espião tentou adivinhar o local",en:"The spy tried to guess the location"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(f,{icon:e.jsx(Fe,{}),title:e.jsx(i,{pt:"A votação foi unanime!",en:"The vote was unanimous!"}),onClose:a,currentRound:(S=s==null?void 0:s.round)==null?void 0:S.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"})]}),e.jsx($,{goToNextStep:a}),e.jsx(f,{icon:t.phaseIcon==="nuclear-explosion"?e.jsx(ke,{}):e.jsx(Pe,{}),title:e.jsx(i,{pt:"O fim chegou!",en:"The end is here!"}),onClose:a,currentRound:(x=s==null?void 0:s.round)==null?void 0:x.current,buttonText:"",className:"e-phase-announcement",duration:5,type:"block"}),e.jsx(cs,{players:n,target:r,resolutionStatus:t,currentSpy:c,onProgressGame:u})]})})}function te({finalAssessment:s,players:n}){const{playerOrder:o,playerOrderIndex:a}=s,c=n[o[a]],l=de(o,n).join(", ");return e.jsx(m,{className:"e-phase-instruction",children:e.jsx(i,{pt:e.jsxs(e.Fragment,{children:["Já que vocês falharam em encontrar o espião, há uma última possibilidade!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Cada jogador, começando por ",c.name,", faz uma acusação."]}):e.jsxs("li",{children:["Agora é a vez de ",c.name," faz uma acusação."]}),e.jsx("li",{children:"Se a votação for unânime em qualquer uma das votações, o jogo acaba e revelam-se os papéis."}),e.jsx("li",{children:"Sem discussão dessa vez, simplesmente acuse alguém! Não temos mais tempo!"}),e.jsxs("li",{children:["A ordem será essa: ",l]})]})]}),en:e.jsxs(e.Fragment,{children:["Since you've failed to find the spy, here's a last resort!",e.jsxs("ul",{children:[a===0?e.jsxs("li",{children:["Each player will, starting with ",c.name,", will make an accusation."]}):e.jsxs("li",{children:["Now it's time for ",c.name," to make an accusation."]}),e.jsx("li",{children:"If the voting result is unanimous, the game is over and the roles are revealed."}),e.jsx("li",{children:"No discussion, just accuse somebody! There's no time anymore!"}),e.jsxs("li",{children:["The order is: ",l]})]})]})})})}function us({isModalVisible:s,onMakeAccusation:n,players:o,finalAssessment:a}){return e.jsxs(se,{open:s,title:e.jsx(i,{pt:"Quem você vai acusar?",en:"Who are you gonna accuse?"}),footer:null,closable:!1,className:"e-modal",children:[e.jsx(te,{finalAssessment:a,players:o}),e.jsx(i,{pt:"Não há tempo pra pensar, escolha alguém!",en:"There's no time to think, just choose someone"}),e.jsx(Y,{children:e.jsx(ae,{players:o,onSend:n,isFinalAssessment:!0})})]})}function ds({finalAssessment:s,players:n,user:o,locations:a,isUserTheAccuser:c,onMakeAccusation:l,outcome:r}){w();const{notification:u}=z.useApp(),{translate:t}=h();return g.useEffect(()=>{(r==null?void 0:r.type)==="VOTE_FAIL"&&u.info({message:t("A votação não foi unânime","The voting was not unanimous"),description:r.votedYes?`Votaram sim: ${r.votedYes}`:"Ninguém votou sim",duration:10})},[r==null?void 0:r.type]),e.jsxs(A,{children:[e.jsx(C,{className:"e-phase-title",children:e.jsx(i,{pt:"Última Chance!",en:"Last chance!"})}),e.jsx(us,{isModalVisible:c,onMakeAccusation:l,players:n,finalAssessment:s}),e.jsx(te,{finalAssessment:s,players:n}),e.jsx(V,{location:o.location,role:o.role}),e.jsxs(m,{className:"e-lists",children:[e.jsx(G,{players:n}),e.jsx(q,{locations:a})]}),e.jsx(M,{})]})}function ms({state:s,players:n}){var t,d;const{step:o,goToNextStep:a,setStep:c}=y(0),l=R(n,s),r=oe(c),u=s.finalAssessment.playerOrder[s.finalAssessment.playerOrderIndex]===l.id;return e.jsx(b,{phase:s==null?void 0:s.phase,allowedPhase:p.ESPIAO_ENTRE_NOS.FINAL_ASSESSMENT,className:"e-phase",children:e.jsxs(v,{step:o,players:n,children:[s.finalAssessment.playerOrderIndex===0?e.jsx(f,{icon:e.jsx($e,{}),title:e.jsx(i,{pt:"O tempo acabou!",en:"Time's up!"}),onClose:a,currentRound:(t=s==null?void 0:s.round)==null?void 0:t.current,buttonText:"",className:"e-phase-announcement",duration:2,type:"block"}):e.jsx(f,{icon:e.jsx(ee,{}),title:e.jsx(i,{pt:"A avaliação final continua",en:"The final assessment continues"}),onClose:a,currentRound:(d=s==null?void 0:s.round)==null?void 0:d.current,buttonText:"",className:"e-phase-announcement",duration:3,type:"block",children:e.jsx(m,{children:e.jsx(i,{pt:"A votação não foi unanime",en:"The vote wasn't unanimous"})})}),e.jsx(ds,{onMakeAccusation:r,players:n,finalAssessment:s.finalAssessment,outcome:s.outcome,user:l,locations:s.locations,isUserTheAccuser:u})]})})}function ps(s){if(s&&!s.phase)return pe;switch(s.phase){case p.DEFAULT.LOBBY:return Ae;case p.DEFAULT.RULES:return Te;case p.DEFAULT.SETUP:return Ne;case p.ESPIAO_ENTRE_NOS.ASSIGNMENT:return Qe;case p.ESPIAO_ENTRE_NOS.INVESTIGATION:return as;case p.ESPIAO_ENTRE_NOS.ASSESSMENT:return is;case p.ESPIAO_ENTRE_NOS.FINAL_ASSESSMENT:return ms;case p.ESPIAO_ENTRE_NOS.RESOLUTION:return ls;case p.DEFAULT.GAME_OVER:return ye;default:return he}}function fn(){return e.jsx(Se,{gameCollection:me.ESPIAO_ENTRE_NOS,getActiveComponent:ps})}export{fn as default};
