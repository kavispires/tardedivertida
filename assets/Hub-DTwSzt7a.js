import{r as s,_ as nt,$ as Ke,a0 as Ot,a1 as de,a2 as G,a3 as Ba,a4 as Y,a5 as za,p as Bt,a6 as E,a7 as Ze,a8 as Ct,a9 as Ua,aa as Ya,ab as _e,ac as ht,ad as qa,ae as Xa,af as Yt,ag as qt,ah as mn,ai as on,aj as Ja,ak as kn,al as Qa,am as Za,an as er,ao as tr,ap as nr,aq as ve,ar,b as rr,g as or,m as sa,as as _n,at as ir,u as lr,au as sr,av as cr,aw as Ln,ax as ur,c as An,ay as dr,az as fr,aA as vr,aB as gr,aC as hr,aD as jn,aE as mr,aF as ca,J as ua,E as pr,aG as yr,aH as Cr,aI as da,aJ as fa,j as C,N as Ft,T as rt,e as pn,s as br,B as yn,aK as Sr,aL as xr,h as ln,aM as wr,aN as zt,H as Er,y as va,aO as tn,k as Nr,aP as kr,q as Xt,i as ga,x as Cn,t as $n,aQ as Dr,aR as Kr,aS as Vn,aT as ha,z as Ir,G as ma,aU as Or,v as Tr,L as Mr,aV as Rr,f as Pr,C as _r}from"./index-Bk8HsoU4.js";import{D as Lr}from"./DevHeader-Cg8oKt7V.js";import{R as Ar,L as jr}from"./LogoutButton-BS6wX9U6.js";import{G as pa}from"./GameBanner-8rdnlFbJ.js";import{R as $r,G as Vr}from"./RulesModal-NpUOE3Sw.js";import{u as Fr}from"./useMutation-BLI6PVpQ.js";import{L as Hr}from"./Loading-V75FIqg1.js";import{I as dn,u as Wr}from"./useDevFeatures-D2nVtmrR.js";import{R as Fn}from"./index-CvUyIRr0.js";import{g as Gr,C as Br}from"./index-0UoBUNz6.js";import{u as zr}from"./useCopyToClipboard-D_s6cUHf.js";import{M as Ur,T as Yr}from"./index-BsDZPlMw.js";import{D as nn}from"./index-C_HFLGvP.js";import{C as Vt}from"./index-DM-3al7l.js";import{B as qr}from"./index-DGq9jE-x.js";import{L as ya,u as Xr,a as Jr,b as Qr,c as Zr,D as eo,m as to,S as no}from"./index-BuTqXIjw.js";import{T as Hn}from"./index-ByZyQc5a.js";import{F as ao}from"./Overflow-DEEEmE2i.js";import{_ as Ca,i as ro,g as oo,S as io}from"./iconUtil-D43naads.js";import{g as lo}from"./PurePanel-CXCP1V9H.js";import"./index-0UuH5aQ4.js";import"./WritingIcon-B0bSe3tD.js";import"./AnimatedLoaderIcon-J7ttsOAx.js";import"./useBubbleLock-CXXH-ngn.js";import"./useSetState-wxFoUx3g.js";import"./index-DbS4c1MK.js";import"./EllipsisOutlined-BPzEZYRe.js";import"./PlusOutlined-uL7Jn5Yk.js";var sn=function(n){var o=n.className,t=n.customizeIcon,a=n.customizeIconProps,c=n.children,u=n.onMouseDown,r=n.onClick,l=typeof t=="function"?t(a):t;return s.createElement("span",{className:o,onMouseDown:function(d){d.preventDefault(),u?.(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:r,"aria-hidden":!0},l!==void 0?l:s.createElement("span",{className:nt(o.split(/\s+/).map(function(i){return"".concat(i,"-icon")}))},c))},so=function(n,o,t,a,c){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,i=Ke.useMemo(function(){if(Ot(a)==="object")return a.clearIcon;if(c)return c},[a,c]),d=Ke.useMemo(function(){return!!(!u&&a&&(t.length||r)&&!(l==="combobox"&&r===""))},[a,u,t.length,r,l]);return{allowClear:d,clearIcon:Ke.createElement(sn,{className:"".concat(n,"-clear"),onMouseDown:o,customizeIcon:i},"×")}},ba=s.createContext(null);function Sa(){return s.useContext(ba)}function co(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=s.useState(!1),o=de(n,2),t=o[0],a=o[1],c=s.useRef(null),u=function(){window.clearTimeout(c.current)};s.useEffect(function(){return u},[]);var r=function(i,d){u(),c.current=window.setTimeout(function(){a(i),d&&d()},e)};return[t,r,u]}function xa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,n=s.useRef(null),o=s.useRef(null);s.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function t(a){(a||n.current===null)&&(n.current=a),window.clearTimeout(o.current),o.current=window.setTimeout(function(){n.current=null},e)}return[function(){return n.current},t]}function uo(e,n,o,t){var a=s.useRef(null);a.current={open:n,triggerOpen:o,customizedTrigger:t},s.useEffect(function(){function c(u){var r;if(!((r=a.current)!==null&&r!==void 0&&r.customizedTrigger)){var l=u.target;l.shadowRoot&&u.composed&&(l=u.composedPath()[0]||l),a.current.open&&e().filter(function(i){return i}).every(function(i){return!i.contains(l)&&i!==l})&&a.current.triggerOpen(!1)}}return window.addEventListener("mousedown",c),function(){return window.removeEventListener("mousedown",c)}},[])}function fo(e){return![G.ESC,G.SHIFT,G.BACKSPACE,G.TAB,G.WIN_KEY,G.ALT,G.META,G.WIN_KEY_RIGHT,G.CTRL,G.SEMICOLON,G.EQUALS,G.CAPS_LOCK,G.CONTEXT_MENU,G.F1,G.F2,G.F3,G.F4,G.F5,G.F6,G.F7,G.F8,G.F9,G.F10,G.F11,G.F12].includes(e)}var vo=function(n,o){var t,a=n.prefixCls,c=n.id,u=n.inputElement,r=n.disabled,l=n.tabIndex,i=n.autoFocus,d=n.autoComplete,v=n.editable,m=n.activeDescendantId,f=n.value,p=n.maxLength,y=n.onKeyDown,g=n.onMouseDown,b=n.onChange,N=n.onPaste,S=n.onCompositionStart,x=n.onCompositionEnd,w=n.open,k=n.attrs,K=u||s.createElement("input",null),h=K,D=h.ref,R=h.props,M=R.onKeyDown,L=R.onChange,V=R.onMouseDown,O=R.onCompositionStart,P=R.onCompositionEnd,B=R.style;return Ba(!("maxLength"in K.props)),K=s.cloneElement(K,Y(Y(Y({type:"search"},R),{},{id:c,ref:za(o,D),disabled:r,tabIndex:l,autoComplete:d||"off",autoFocus:i,className:nt("".concat(a,"-selection-search-input"),(t=K)===null||t===void 0||(t=t.props)===null||t===void 0?void 0:t.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(c,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(c,"_list"),"aria-activedescendant":w?m:void 0},k),{},{value:v?f:"",maxLength:p,readOnly:!v,unselectable:v?null:"on",style:Y(Y({},B),{},{opacity:v?null:0}),onKeyDown:function(z){y(z),M&&M(z)},onMouseDown:function(z){g(z),V&&V(z)},onChange:function(z){b(z),L&&L(z)},onCompositionStart:function(z){S(z),O&&O(z)},onCompositionEnd:function(z){x(z),P&&P(z)},onPaste:N})),K},wa=s.forwardRef(vo);function Ea(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var go=typeof window<"u"&&window.document&&window.document.documentElement,ho=go;function mo(e){return e!=null}function po(e){return!e&&e!==0}function Wn(e){return["string","number"].includes(Ot(e))}function Na(e){var n=void 0;return e&&(Wn(e.title)?n=e.title.toString():Wn(e.label)&&(n=e.label.toString())),n}function yo(e,n){ho?s.useLayoutEffect(e,n):s.useEffect(e,n)}function Co(e){var n;return(n=e.key)!==null&&n!==void 0?n:e.value}var Gn=function(n){n.preventDefault(),n.stopPropagation()},bo=function(n){var o=n.id,t=n.prefixCls,a=n.values,c=n.open,u=n.searchValue,r=n.autoClearSearchValue,l=n.inputRef,i=n.placeholder,d=n.disabled,v=n.mode,m=n.showSearch,f=n.autoFocus,p=n.autoComplete,y=n.activeDescendantId,g=n.tabIndex,b=n.removeIcon,N=n.maxTagCount,S=n.maxTagTextLength,x=n.maxTagPlaceholder,w=x===void 0?function($){return"+ ".concat($.length," ...")}:x,k=n.tagRender,K=n.onToggleOpen,h=n.onRemove,D=n.onInputChange,R=n.onInputPaste,M=n.onInputKeyDown,L=n.onInputMouseDown,V=n.onInputCompositionStart,O=n.onInputCompositionEnd,P=s.useRef(null),B=s.useState(0),Z=de(B,2),z=Z[0],ae=Z[1],X=s.useState(!1),be=de(X,2),Le=be[0],Me=be[1],he="".concat(t,"-selection"),fe=c||v==="multiple"&&r===!1||v==="tags"?u:"",Ge=v==="tags"||v==="multiple"&&r===!1||m&&(c||Le);yo(function(){ae(P.current.scrollWidth)},[fe]);var se=function(F,A,J,ce,ue){return s.createElement("span",{title:Na(F),className:nt("".concat(he,"-item"),E({},"".concat(he,"-item-disabled"),J))},s.createElement("span",{className:"".concat(he,"-item-content")},A),ce&&s.createElement(sn,{className:"".concat(he,"-item-remove"),onMouseDown:Gn,onClick:ue,customizeIcon:b},"×"))},Se=function(F,A,J,ce,ue,ee){var ke=function(Re){Gn(Re),K(!c)};return s.createElement("span",{onMouseDown:ke},k({label:A,value:F,disabled:J,closable:ce,onClose:ue,isMaxTag:!!ee}))},Ne=function(F){var A=F.disabled,J=F.label,ce=F.value,ue=!d&&!A,ee=J;if(typeof S=="number"&&(typeof J=="string"||typeof J=="number")){var ke=String(ee);ke.length>S&&(ee="".concat(ke.slice(0,S),"..."))}var Q=function(me){me&&me.stopPropagation(),h(F)};return typeof k=="function"?Se(ce,ee,A,ue,Q):se(F,ee,A,ue,Q)},xe=function(F){var A=typeof w=="function"?w(F):w;return typeof k=="function"?Se(void 0,A,!1,!1,void 0,!0):se({title:A},A,!1)},j=s.createElement("div",{className:"".concat(he,"-search"),style:{width:z},onFocus:function(){Me(!0)},onBlur:function(){Me(!1)}},s.createElement(wa,{ref:l,open:c,prefixCls:t,id:o,inputElement:null,disabled:d,autoFocus:f,autoComplete:p,editable:Ge,activeDescendantId:y,value:fe,onKeyDown:M,onMouseDown:L,onChange:D,onPaste:R,onCompositionStart:V,onCompositionEnd:O,tabIndex:g,attrs:Bt(n,!0)}),s.createElement("span",{ref:P,className:"".concat(he,"-search-mirror"),"aria-hidden":!0},fe," ")),T=s.createElement(ao,{prefixCls:"".concat(he,"-overflow"),data:a,renderItem:Ne,renderRest:xe,suffix:j,itemKey:Co,maxCount:N});return s.createElement("span",{className:"".concat(he,"-wrap")},T,!a.length&&!fe&&s.createElement("span",{className:"".concat(he,"-placeholder")},i))},So=function(n){var o=n.inputElement,t=n.prefixCls,a=n.id,c=n.inputRef,u=n.disabled,r=n.autoFocus,l=n.autoComplete,i=n.activeDescendantId,d=n.mode,v=n.open,m=n.values,f=n.placeholder,p=n.tabIndex,y=n.showSearch,g=n.searchValue,b=n.activeValue,N=n.maxLength,S=n.onInputKeyDown,x=n.onInputMouseDown,w=n.onInputChange,k=n.onInputPaste,K=n.onInputCompositionStart,h=n.onInputCompositionEnd,D=n.title,R=s.useState(!1),M=de(R,2),L=M[0],V=M[1],O=d==="combobox",P=O||y,B=m[0],Z=g||"";O&&b&&!L&&(Z=b),s.useEffect(function(){O&&V(!1)},[O,b]);var z=d!=="combobox"&&!v&&!y?!1:!!Z,ae=D===void 0?Na(B):D,X=s.useMemo(function(){return B?null:s.createElement("span",{className:"".concat(t,"-selection-placeholder"),style:z?{visibility:"hidden"}:void 0},f)},[B,z,f,t]);return s.createElement("span",{className:"".concat(t,"-selection-wrap")},s.createElement("span",{className:"".concat(t,"-selection-search")},s.createElement(wa,{ref:c,prefixCls:t,id:a,open:v,inputElement:o,disabled:u,autoFocus:r,autoComplete:l,editable:P,activeDescendantId:i,value:Z,onKeyDown:S,onMouseDown:x,onChange:function(Le){V(!0),w(Le)},onPaste:k,onCompositionStart:K,onCompositionEnd:h,tabIndex:p,attrs:Bt(n,!0),maxLength:O?N:void 0})),!O&&B?s.createElement("span",{className:"".concat(t,"-selection-item"),title:ae,style:z?{visibility:"hidden"}:void 0},B.label):null,X)},xo=function(n,o){var t=s.useRef(null),a=s.useRef(!1),c=n.prefixCls,u=n.open,r=n.mode,l=n.showSearch,i=n.tokenWithEnter,d=n.disabled,v=n.prefix,m=n.autoClearSearchValue,f=n.onSearch,p=n.onSearchSubmit,y=n.onToggleOpen,g=n.onInputKeyDown,b=n.domRef;s.useImperativeHandle(o,function(){return{focus:function(ae){t.current.focus(ae)},blur:function(){t.current.blur()}}});var N=xa(0),S=de(N,2),x=S[0],w=S[1],k=function(ae){var X=ae.which,be=t.current instanceof HTMLTextAreaElement;!be&&u&&(X===G.UP||X===G.DOWN)&&ae.preventDefault(),g&&g(ae),X===G.ENTER&&r==="tags"&&!a.current&&!u&&p?.(ae.target.value),!(be&&!u&&~[G.UP,G.DOWN,G.LEFT,G.RIGHT].indexOf(X))&&fo(X)&&y(!0)},K=function(){w(!0)},h=s.useRef(null),D=function(ae){f(ae,!0,a.current)!==!1&&y(!0)},R=function(){a.current=!0},M=function(ae){a.current=!1,r!=="combobox"&&D(ae.target.value)},L=function(ae){var X=ae.target.value;if(i&&h.current&&/[\r\n]/.test(h.current)){var be=h.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");X=X.replace(be,h.current)}h.current=null,D(X)},V=function(ae){var X=ae.clipboardData,be=X?.getData("text");h.current=be||""},O=function(ae){var X=ae.target;if(X!==t.current){var be=document.body.style.msTouchAction!==void 0;be?setTimeout(function(){t.current.focus()}):t.current.focus()}},P=function(ae){var X=x();ae.target!==t.current&&!X&&!(r==="combobox"&&d)&&ae.preventDefault(),(r!=="combobox"&&(!l||!X)||!u)&&(u&&m!==!1&&f("",!0,!1),y())},B={inputRef:t,onInputKeyDown:k,onInputMouseDown:K,onInputChange:L,onInputPaste:V,onInputCompositionStart:R,onInputCompositionEnd:M},Z=r==="multiple"||r==="tags"?s.createElement(bo,Ze({},n,B)):s.createElement(So,Ze({},n,B));return s.createElement("div",{ref:b,className:"".concat(c,"-selector"),onClick:O,onMouseDown:P},v&&s.createElement("div",{className:"".concat(c,"-prefix")},v),Z)},wo=s.forwardRef(xo),Eo=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],No=function(n){var o=n===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},ko=function(n,o){var t=n.prefixCls;n.disabled;var a=n.visible,c=n.children,u=n.popupElement,r=n.animation,l=n.transitionName,i=n.dropdownStyle,d=n.dropdownClassName,v=n.direction,m=v===void 0?"ltr":v,f=n.placement,p=n.builtinPlacements,y=n.dropdownMatchSelectWidth,g=n.dropdownRender,b=n.dropdownAlign,N=n.getPopupContainer,S=n.empty,x=n.getTriggerDOMNode,w=n.onPopupVisibleChange,k=n.onPopupMouseEnter,K=Ct(n,Eo),h="".concat(t,"-dropdown"),D=u;g&&(D=g(u));var R=s.useMemo(function(){return p||No(y)},[p,y]),M=r?"".concat(h,"-").concat(r):l,L=typeof y=="number",V=s.useMemo(function(){return L?null:y===!1?"minWidth":"width"},[y,L]),O=i;L&&(O=Y(Y({},O),{},{width:y}));var P=s.useRef(null);return s.useImperativeHandle(o,function(){return{getPopupElement:function(){var Z;return(Z=P.current)===null||Z===void 0?void 0:Z.popupElement}}}),s.createElement(Ua,Ze({},K,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:f||(m==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:h,popupTransitionName:M,popup:s.createElement("div",{onMouseEnter:k},D),ref:P,stretch:V,popupAlign:b,popupVisible:a,getPopupContainer:N,popupClassName:nt(d,E({},"".concat(h,"-empty"),S)),popupStyle:O,getTriggerDOMNode:x,onPopupVisibleChange:w}),c)},Do=s.forwardRef(ko);function Bn(e,n){var o=e.key,t;return"value"in e&&(t=e.value),o??(t!==void 0?t:"rc-index-key-".concat(n))}function bn(e){return typeof e<"u"&&!Number.isNaN(e)}function ka(e,n){var o=e||{},t=o.label,a=o.value,c=o.options,u=o.groupLabel,r=t||(n?"children":"label");return{label:r,value:a||"value",options:c||"options",groupLabel:u||r}}function Ko(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.fieldNames,t=n.childrenAsData,a=[],c=ka(o,!1),u=c.label,r=c.value,l=c.options,i=c.groupLabel;function d(v,m){Array.isArray(v)&&v.forEach(function(f){if(m||!(l in f)){var p=f[r];a.push({key:Bn(f,a.length),groupOption:m,data:f,label:f[u],value:p})}else{var y=f[i];y===void 0&&t&&(y=f.label),a.push({key:Bn(f,a.length),group:!0,data:f,label:y}),d(f[l],!0)}})}return d(e,!1),a}function Sn(e){var n=Y({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return ht(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),n}}),n}var Io=function(n,o,t){if(!o||!o.length)return null;var a=!1,c=function r(l,i){var d=Ya(i),v=d[0],m=d.slice(1);if(!v)return[l];var f=l.split(v);return a=a||f.length>1,f.reduce(function(p,y){return[].concat(_e(p),_e(r(y,m)))},[]).filter(Boolean)},u=c(n,o);return a?typeof t<"u"?u.slice(0,t):u:null},Dn=s.createContext(null);function Oo(e){var n=e.visible,o=e.values;if(!n)return null;var t=50;return s.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,t).map(function(a){var c=a.label,u=a.value;return["number","string"].includes(Ot(c))?c:u}).join(", ")),o.length>t?", ...":null)}var To=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Mo=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],xn=function(n){return n==="tags"||n==="multiple"},Da=s.forwardRef(function(e,n){var o,t=e.id,a=e.prefixCls,c=e.className,u=e.showSearch,r=e.tagRender,l=e.direction,i=e.omitDomProps,d=e.displayValues,v=e.onDisplayValuesChange,m=e.emptyOptions,f=e.notFoundContent,p=f===void 0?"Not Found":f,y=e.onClear,g=e.mode,b=e.disabled,N=e.loading,S=e.getInputElement,x=e.getRawInputElement,w=e.open,k=e.defaultOpen,K=e.onDropdownVisibleChange,h=e.activeValue,D=e.onActiveValueChange,R=e.activeDescendantId,M=e.searchValue,L=e.autoClearSearchValue,V=e.onSearch,O=e.onSearchSplit,P=e.tokenSeparators,B=e.allowClear,Z=e.prefix,z=e.suffixIcon,ae=e.clearIcon,X=e.OptionList,be=e.animation,Le=e.transitionName,Me=e.dropdownStyle,he=e.dropdownClassName,fe=e.dropdownMatchSelectWidth,Ge=e.dropdownRender,se=e.dropdownAlign,Se=e.placement,Ne=e.builtinPlacements,xe=e.getPopupContainer,j=e.showAction,T=j===void 0?[]:j,$=e.onFocus,F=e.onBlur,A=e.onKeyUp,J=e.onKeyDown,ce=e.onMouseDown,ue=Ct(e,To),ee=xn(g),ke=(u!==void 0?u:ee)||g==="combobox",Q=Y({},ue);Mo.forEach(function(we){delete Q[we]}),i?.forEach(function(we){delete Q[we]});var Re=s.useState(!1),me=de(Re,2),re=me[0],Ue=me[1];s.useEffect(function(){Ue(qa())},[]);var Ie=s.useRef(null),Oe=s.useRef(null),Ce=s.useRef(null),te=s.useRef(null),W=s.useRef(null),I=s.useRef(!1),He=co(),Be=de(He,3),qe=Be[0],De=Be[1],xt=Be[2];s.useImperativeHandle(n,function(){var we,le;return{focus:(we=te.current)===null||we===void 0?void 0:we.focus,blur:(le=te.current)===null||le===void 0?void 0:le.blur,scrollTo:function(ft){var tt;return(tt=W.current)===null||tt===void 0?void 0:tt.scrollTo(ft)},nativeElement:Ie.current||Oe.current}});var Pe=s.useMemo(function(){var we;if(g!=="combobox")return M;var le=(we=d[0])===null||we===void 0?void 0:we.value;return typeof le=="string"||typeof le=="number"?String(le):""},[M,g,d]),Ye=g==="combobox"&&typeof S=="function"&&S()||null,ne=typeof x=="function"&&x(),pe=Xa(Oe,ne==null||(o=ne.props)===null||o===void 0?void 0:o.ref),Ae=s.useState(!1),Te=de(Ae,2),We=Te[0],et=Te[1];Yt(function(){et(!0)},[]);var Je=qt(!1,{defaultValue:k,value:w}),lt=de(Je,2),ot=lt[0],mt=lt[1],ze=We?ot:!1,Tt=!p&&m;(b||Tt&&ze&&g==="combobox")&&(ze=!1);var bt=Tt?!1:ze,_=s.useCallback(function(we){var le=we!==void 0?we:!ze;b||(mt(le),ze!==le&&K?.(le))},[b,ze,mt,K]),q=s.useMemo(function(){return(P||[]).some(function(we){return[`
`,`\r
`].includes(we)})},[P]),H=s.useContext(Dn)||{},U=H.maxCount,ye=H.rawValues,Ee=function(le,dt,ft){if(!(ee&&bn(U)&&ye?.size>=U)){var tt=!0,it=le;D?.(null);var Kt=Io(le,P,bn(U)?U-ye.size:void 0),Et=ft?null:Kt;return g!=="combobox"&&Et&&(it="",O?.(Et),_(!1),tt=!1),V&&Pe!==it&&V(it,{source:dt?"typing":"effect"}),tt}},ct=function(le){!le||!le.trim()||V(le,{source:"submit"})};s.useEffect(function(){!ze&&!ee&&g!=="combobox"&&Ee("",!1,!1)},[ze]),s.useEffect(function(){ot&&b&&mt(!1),b&&!I.current&&De(!1)},[b]);var at=xa(),ut=de(at,2),Xe=ut[0],pt=ut[1],Nt=s.useRef(!1),_t=function(le){var dt=Xe(),ft=le.key,tt=ft==="Enter";if(tt&&(g!=="combobox"&&le.preventDefault(),ze||_(!0)),pt(!!Pe),ft==="Backspace"&&!dt&&ee&&!Pe&&d.length){for(var it=_e(d),Kt=null,Et=it.length-1;Et>=0;Et-=1){var jt=it[Et];if(!jt.disabled){it.splice(Et,1),Kt=jt;break}}Kt&&v(it,{type:"remove",values:[Kt]})}for(var Wt=arguments.length,$t=new Array(Wt>1?Wt-1:0),Zt=1;Zt<Wt;Zt++)$t[Zt-1]=arguments[Zt];if(ze&&(!tt||!Nt.current)){var en;(en=W.current)===null||en===void 0||en.onKeyDown.apply(en,[le].concat($t))}tt&&(Nt.current=!0),J?.apply(void 0,[le].concat($t))},ge=function(le){for(var dt=arguments.length,ft=new Array(dt>1?dt-1:0),tt=1;tt<dt;tt++)ft[tt-1]=arguments[tt];if(ze){var it;(it=W.current)===null||it===void 0||it.onKeyUp.apply(it,[le].concat(ft))}le.key==="Enter"&&(Nt.current=!1),A?.apply(void 0,[le].concat(ft))},oe=function(le){var dt=d.filter(function(ft){return ft!==le});v(dt,{type:"remove",values:[le]})},ie=s.useRef(!1),je=function(){De(!0),b||($&&!ie.current&&$.apply(void 0,arguments),T.includes("focus")&&_(!0)),ie.current=!0},gt=function(){I.current=!0,De(!1,function(){ie.current=!1,I.current=!1,_(!1)}),!b&&(Pe&&(g==="tags"?V(Pe,{source:"submit"}):g==="multiple"&&V("",{source:"blur"})),F&&F.apply(void 0,arguments))},$e=[];s.useEffect(function(){return function(){$e.forEach(function(we){return clearTimeout(we)}),$e.splice(0,$e.length)}},[]);var Ve=function(le){var dt,ft=le.target,tt=(dt=Ce.current)===null||dt===void 0?void 0:dt.getPopupElement();if(tt&&tt.contains(ft)){var it=setTimeout(function(){var Wt=$e.indexOf(it);if(Wt!==-1&&$e.splice(Wt,1),xt(),!re&&!tt.contains(document.activeElement)){var $t;($t=te.current)===null||$t===void 0||$t.focus()}});$e.push(it)}for(var Kt=arguments.length,Et=new Array(Kt>1?Kt-1:0),jt=1;jt<Kt;jt++)Et[jt-1]=arguments[jt];ce?.apply(void 0,[le].concat(Et))},Fe=s.useState({}),st=de(Fe,2),wt=st[1];function Lt(){wt({})}var Mt;ne&&(Mt=function(le){_(le)}),uo(function(){var we;return[Ie.current,(we=Ce.current)===null||we===void 0?void 0:we.getPopupElement()]},bt,_,!!ne);var kt=s.useMemo(function(){return Y(Y({},e),{},{notFoundContent:p,open:ze,triggerOpen:bt,id:t,showSearch:ke,multiple:ee,toggleOpen:_})},[e,p,bt,ze,t,ke,ee,_]),Dt=!!z||N,At;Dt&&(At=s.createElement(sn,{className:nt("".concat(a,"-arrow"),E({},"".concat(a,"-arrow-loading"),N)),customizeIcon:z,customizeIconProps:{loading:N,searchValue:Pe,open:ze,focused:qe,showSearch:ke}}));var yt=function(){var le;y?.(),(le=te.current)===null||le===void 0||le.focus(),v([],{type:"clear",values:d}),Ee("",!1,!1)},St=so(a,yt,d,B,ae,b,Pe,g),Fa=St.allowClear,Ha=St.clearIcon,Wa=s.createElement(X,{ref:W}),Ga=nt(a,c,E(E(E(E(E(E(E(E(E(E({},"".concat(a,"-focused"),qe),"".concat(a,"-multiple"),ee),"".concat(a,"-single"),!ee),"".concat(a,"-allow-clear"),B),"".concat(a,"-show-arrow"),Dt),"".concat(a,"-disabled"),b),"".concat(a,"-loading"),N),"".concat(a,"-open"),ze),"".concat(a,"-customize-input"),Ye),"".concat(a,"-show-search"),ke)),Pn=s.createElement(Do,{ref:Ce,disabled:b,prefixCls:a,visible:bt,popupElement:Wa,animation:be,transitionName:Le,dropdownStyle:Me,dropdownClassName:he,direction:l,dropdownMatchSelectWidth:fe,dropdownRender:Ge,dropdownAlign:se,placement:Se,builtinPlacements:Ne,getPopupContainer:xe,empty:m,getTriggerDOMNode:function(le){return Oe.current||le},onPopupVisibleChange:Mt,onPopupMouseEnter:Lt},ne?s.cloneElement(ne,{ref:pe}):s.createElement(wo,Ze({},e,{domRef:Oe,prefixCls:a,inputElement:Ye,ref:te,id:t,prefix:Z,showSearch:ke,autoClearSearchValue:L,mode:g,activeDescendantId:R,tagRender:r,values:d,open:ze,onToggleOpen:_,activeValue:h,searchValue:Pe,onSearch:Ee,onSearchSubmit:ct,onRemove:oe,tokenWithEnter:q}))),un;return ne?un=Pn:un=s.createElement("div",Ze({className:Ga},Q,{ref:Ie,onMouseDown:Ve,onKeyDown:_t,onKeyUp:ge,onFocus:je,onBlur:gt}),s.createElement(Oo,{visible:qe&&!ze,values:d}),Pn,At,Fa&&Ha),s.createElement(ba.Provider,{value:kt},un)}),Ka=function(){return null};Ka.isSelectOptGroup=!0;var Ia=function(){return null};Ia.isSelectOption=!0;function Ro(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Po=["disabled","title","children","style","className"];function zn(e){return typeof e=="string"||typeof e=="number"}var _o=function(n,o){var t=Sa(),a=t.prefixCls,c=t.id,u=t.open,r=t.multiple,l=t.mode,i=t.searchValue,d=t.toggleOpen,v=t.notFoundContent,m=t.onPopupScroll,f=s.useContext(Dn),p=f.maxCount,y=f.flattenOptions,g=f.onActiveValue,b=f.defaultActiveFirstOption,N=f.onSelect,S=f.menuItemSelectedIcon,x=f.rawValues,w=f.fieldNames,k=f.virtual,K=f.direction,h=f.listHeight,D=f.listItemHeight,R=f.optionRender,M="".concat(a,"-item"),L=mn(function(){return y},[u,y],function(j,T){return T[0]&&j[1]!==T[1]}),V=s.useRef(null),O=s.useMemo(function(){return r&&bn(p)&&x?.size>=p},[r,p,x?.size]),P=function(T){T.preventDefault()},B=function(T){var $;($=V.current)===null||$===void 0||$.scrollTo(typeof T=="number"?{index:T}:T)},Z=function(T){for(var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,F=L.length,A=0;A<F;A+=1){var J=(T+A*$+F)%F,ce=L[J]||{},ue=ce.group,ee=ce.data;if(!ue&&!(ee!=null&&ee.disabled)&&!O)return J}return-1},z=s.useState(function(){return Z(0)}),ae=de(z,2),X=ae[0],be=ae[1],Le=function(T){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;be(T);var F={source:$?"keyboard":"mouse"},A=L[T];if(!A){g(null,-1,F);return}g(A.value,T,F)};s.useEffect(function(){Le(b!==!1?Z(0):-1)},[L.length,i]);var Me=s.useCallback(function(j){return l==="combobox"?!1:x.has(j)},[l,_e(x).toString(),x.size]),he=s.useCallback(function(j){return l==="combobox"?String(j).toLowerCase()===i.toLowerCase():x.has(j)},[l,i,_e(x).toString(),x.size]);s.useEffect(function(){var j=setTimeout(function(){if(!r&&u&&x.size===1){var $=Array.from(x)[0],F=L.findIndex(function(A){var J=A.data;return J.value===$});F!==-1&&(Le(F),B(F))}});if(u){var T;(T=V.current)===null||T===void 0||T.scrollTo(void 0)}return function(){return clearTimeout(j)}},[u,i]);var fe=function(T){T!==void 0&&N(T,{selected:!x.has(T)}),r||d(!1)};if(s.useImperativeHandle(o,function(){return{onKeyDown:function(T){var $=T.which,F=T.ctrlKey;switch($){case G.N:case G.P:case G.UP:case G.DOWN:{var A=0;if($===G.UP?A=-1:$===G.DOWN?A=1:Ro()&&F&&($===G.N?A=1:$===G.P&&(A=-1)),A!==0){var J=Z(X+A,A);B(J),Le(J,!0)}break}case G.TAB:case G.ENTER:{var ce,ue=L[X];ue&&!(ue!=null&&(ce=ue.data)!==null&&ce!==void 0&&ce.disabled)&&!O?fe(ue.value):fe(void 0),u&&T.preventDefault();break}case G.ESC:d(!1),u&&T.stopPropagation()}},onKeyUp:function(){},scrollTo:function(T){B(T)}}}),L.length===0)return s.createElement("div",{role:"listbox",id:"".concat(c,"_list"),className:"".concat(M,"-empty"),onMouseDown:P},v);var Ge=Object.keys(w).map(function(j){return w[j]}),se=function(T){return T.label};function Se(j,T){var $=j.group;return{role:$?"presentation":"option",id:"".concat(c,"_list_").concat(T)}}var Ne=function(T){var $=L[T];if(!$)return null;var F=$.data||{},A=F.value,J=$.group,ce=Bt(F,!0),ue=se($);return $?s.createElement("div",Ze({"aria-label":typeof ue=="string"&&!J?ue:null},ce,{key:T},Se($,T),{"aria-selected":he(A)}),A):null},xe={role:"listbox",id:"".concat(c,"_list")};return s.createElement(s.Fragment,null,k&&s.createElement("div",Ze({},xe,{style:{height:0,width:0,overflow:"hidden"}}),Ne(X-1),Ne(X),Ne(X+1)),s.createElement(ya,{itemKey:"key",ref:V,data:L,height:h,itemHeight:D,fullHeight:!1,onMouseDown:P,onScroll:m,virtual:k,direction:K,innerProps:k?null:xe},function(j,T){var $=j.group,F=j.groupOption,A=j.data,J=j.label,ce=j.value,ue=A.key;if($){var ee,ke=(ee=A.title)!==null&&ee!==void 0?ee:zn(J)?J.toString():void 0;return s.createElement("div",{className:nt(M,"".concat(M,"-group"),A.className),title:ke},J!==void 0?J:ue)}var Q=A.disabled,Re=A.title;A.children;var me=A.style,re=A.className,Ue=Ct(A,Po),Ie=on(Ue,Ge),Oe=Me(ce),Ce=Q||!Oe&&O,te="".concat(M,"-option"),W=nt(M,te,re,E(E(E(E({},"".concat(te,"-grouped"),F),"".concat(te,"-active"),X===T&&!Ce),"".concat(te,"-disabled"),Ce),"".concat(te,"-selected"),Oe)),I=se(j),He=!S||typeof S=="function"||Oe,Be=typeof I=="number"?I:I||ce,qe=zn(Be)?Be.toString():void 0;return Re!==void 0&&(qe=Re),s.createElement("div",Ze({},Bt(Ie),k?{}:Se(j,T),{"aria-selected":he(ce),className:W,title:qe,onMouseMove:function(){X===T||Ce||Le(T)},onClick:function(){Ce||fe(ce)},style:me}),s.createElement("div",{className:"".concat(te,"-content")},typeof R=="function"?R(j,{index:T}):Be),s.isValidElement(S)||Oe,He&&s.createElement(sn,{className:"".concat(M,"-option-state"),customizeIcon:S,customizeIconProps:{value:ce,disabled:Ce,isSelected:Oe}},Oe?"✓":null))}))},Lo=s.forwardRef(_o);const Ao=function(e,n){var o=s.useRef({values:new Map,options:new Map}),t=s.useMemo(function(){var c=o.current,u=c.values,r=c.options,l=e.map(function(v){if(v.label===void 0){var m;return Y(Y({},v),{},{label:(m=u.get(v.value))===null||m===void 0?void 0:m.label})}return v}),i=new Map,d=new Map;return l.forEach(function(v){i.set(v.value,v),d.set(v.value,n.get(v.value)||r.get(v.value))}),o.current.values=i,o.current.options=d,l},[e,n]),a=s.useCallback(function(c){return n.get(c)||o.current.options.get(c)},[n]);return[t,a]};function fn(e,n){return Ea(e).join("").toUpperCase().includes(n)}const jo=function(e,n,o,t,a){return s.useMemo(function(){if(!o||t===!1)return e;var c=n.options,u=n.label,r=n.value,l=[],i=typeof t=="function",d=o.toUpperCase(),v=i?t:function(f,p){return a?fn(p[a],d):p[c]?fn(p[u!=="children"?u:"label"],d):fn(p[r],d)},m=i?function(f){return Sn(f)}:function(f){return f};return e.forEach(function(f){if(f[c]){var p=v(o,m(f));if(p)l.push(f);else{var y=f[c].filter(function(g){return v(o,m(g))});y.length&&l.push(Y(Y({},f),{},E({},c,y)))}return}v(o,m(f))&&l.push(f)}),l},[e,t,a,o,n])};var Un=0,$o=Ja();function Vo(){var e;return $o?(e=Un,Un+=1):e="TEST_OR_SSR",e}function Oa(e){var n=s.useState(),o=de(n,2),t=o[0],a=o[1];return s.useEffect(function(){a("rc_select_".concat(Vo()))},[]),e||t}var Fo=["children","value"],Ho=["children"];function Wo(e){var n=e,o=n.key,t=n.props,a=t.children,c=t.value,u=Ct(t,Fo);return Y({key:o,value:c!==void 0?c:o,children:a},u)}function Ta(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return kn(e).map(function(o,t){if(!s.isValidElement(o)||!o.type)return null;var a=o,c=a.type.isSelectOptGroup,u=a.key,r=a.props,l=r.children,i=Ct(r,Ho);return n||!c?Wo(o):Y(Y({key:"__RC_SELECT_GRP__".concat(u===null?t:u,"__"),label:u},i),{},{options:Ta(l)})}).filter(function(o){return o})}var Go=function(n,o,t,a,c){return s.useMemo(function(){var u=n,r=!n;r&&(u=Ta(o));var l=new Map,i=new Map,d=function(f,p,y){y&&typeof y=="string"&&f.set(p[y],p)},v=function m(f){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<f.length;y+=1){var g=f[y];!g[t.options]||p?(l.set(g[t.value],g),d(i,g,t.label),d(i,g,a),d(i,g,c)):m(g[t.options],!0)}};return v(u),{options:u,valueOptions:l,labelOptions:i}},[n,o,t,a,c])};function Yn(e){var n=s.useRef();n.current=e;var o=s.useCallback(function(){return n.current.apply(n,arguments)},[]);return o}var Bo=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],zo=["inputValue"];function Uo(e){return!e||Ot(e)!=="object"}var Yo=s.forwardRef(function(e,n){var o=e.id,t=e.mode,a=e.prefixCls,c=a===void 0?"rc-select":a,u=e.backfill,r=e.fieldNames,l=e.inputValue,i=e.searchValue,d=e.onSearch,v=e.autoClearSearchValue,m=v===void 0?!0:v,f=e.onSelect,p=e.onDeselect,y=e.dropdownMatchSelectWidth,g=y===void 0?!0:y,b=e.filterOption,N=e.filterSort,S=e.optionFilterProp,x=e.optionLabelProp,w=e.options,k=e.optionRender,K=e.children,h=e.defaultActiveFirstOption,D=e.menuItemSelectedIcon,R=e.virtual,M=e.direction,L=e.listHeight,V=L===void 0?200:L,O=e.listItemHeight,P=O===void 0?20:O,B=e.labelRender,Z=e.value,z=e.defaultValue,ae=e.labelInValue,X=e.onChange,be=e.maxCount,Le=Ct(e,Bo),Me=Oa(o),he=xn(t),fe=!!(!w&&K),Ge=s.useMemo(function(){return b===void 0&&t==="combobox"?!1:b},[b,t]),se=s.useMemo(function(){return ka(r,fe)},[JSON.stringify(r),fe]),Se=qt("",{value:i!==void 0?i:l,postState:function(q){return q||""}}),Ne=de(Se,2),xe=Ne[0],j=Ne[1],T=Go(w,K,se,S,x),$=T.valueOptions,F=T.labelOptions,A=T.options,J=s.useCallback(function(_){var q=Ea(_);return q.map(function(H){var U,ye,Ee,ct,at;if(Uo(H))U=H;else{var ut;Ee=H.key,ye=H.label,U=(ut=H.value)!==null&&ut!==void 0?ut:Ee}var Xe=$.get(U);if(Xe){var pt;ye===void 0&&(ye=Xe?.[x||se.label]),Ee===void 0&&(Ee=(pt=Xe?.key)!==null&&pt!==void 0?pt:U),ct=Xe?.disabled,at=Xe?.title}return{label:ye,value:U,key:Ee,disabled:ct,title:at}})},[se,x,$]),ce=qt(z,{value:Z}),ue=de(ce,2),ee=ue[0],ke=ue[1],Q=s.useMemo(function(){var _,q=he&&ee===null?[]:ee,H=J(q);return t==="combobox"&&po((_=H[0])===null||_===void 0?void 0:_.value)?[]:H},[ee,J,t,he]),Re=Ao(Q,$),me=de(Re,2),re=me[0],Ue=me[1],Ie=s.useMemo(function(){if(!t&&re.length===1){var _=re[0];if(_.value===null&&(_.label===null||_.label===void 0))return[]}return re.map(function(q){var H;return Y(Y({},q),{},{label:(H=typeof B=="function"?B(q):q.label)!==null&&H!==void 0?H:q.value})})},[t,re,B]),Oe=s.useMemo(function(){return new Set(re.map(function(_){return _.value}))},[re]);s.useEffect(function(){if(t==="combobox"){var _,q=(_=re[0])===null||_===void 0?void 0:_.value;j(mo(q)?String(q):"")}},[re]);var Ce=Yn(function(_,q){var H=q??_;return E(E({},se.value,_),se.label,H)}),te=s.useMemo(function(){if(t!=="tags")return A;var _=_e(A),q=function(U){return $.has(U)};return _e(re).sort(function(H,U){return H.value<U.value?-1:1}).forEach(function(H){var U=H.value;q(U)||_.push(Ce(U,H.label))}),_},[Ce,A,$,re,t]),W=jo(te,se,xe,Ge,S),I=s.useMemo(function(){return t!=="tags"||!xe||W.some(function(_){return _[S||"value"]===xe})||W.some(function(_){return _[se.value]===xe})?W:[Ce(xe)].concat(_e(W))},[Ce,S,t,W,xe,se]),He=function _(q){var H=_e(q).sort(function(U,ye){return N(U,ye,{searchValue:xe})});return H.map(function(U){return Array.isArray(U.options)?Y(Y({},U),{},{options:U.options.length>0?_(U.options):U.options}):U})},Be=s.useMemo(function(){return N?He(I):I},[I,N,xe]),qe=s.useMemo(function(){return Ko(Be,{fieldNames:se,childrenAsData:fe})},[Be,se,fe]),De=function(q){var H=J(q);if(ke(H),X&&(H.length!==re.length||H.some(function(Ee,ct){var at;return((at=re[ct])===null||at===void 0?void 0:at.value)!==Ee?.value}))){var U=ae?H:H.map(function(Ee){return Ee.value}),ye=H.map(function(Ee){return Sn(Ue(Ee.value))});X(he?U:U[0],he?ye:ye[0])}},xt=s.useState(null),Pe=de(xt,2),Ye=Pe[0],ne=Pe[1],pe=s.useState(0),Ae=de(pe,2),Te=Ae[0],We=Ae[1],et=h!==void 0?h:t!=="combobox",Je=s.useCallback(function(_,q){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},U=H.source,ye=U===void 0?"keyboard":U;We(q),u&&t==="combobox"&&_!==null&&ye==="keyboard"&&ne(String(_))},[u,t]),lt=function(q,H,U){var ye=function(){var oe,ie=Ue(q);return[ae?{label:ie?.[se.label],value:q,key:(oe=ie?.key)!==null&&oe!==void 0?oe:q}:q,Sn(ie)]};if(H&&f){var Ee=ye(),ct=de(Ee,2),at=ct[0],ut=ct[1];f(at,ut)}else if(!H&&p&&U!=="clear"){var Xe=ye(),pt=de(Xe,2),Nt=pt[0],_t=pt[1];p(Nt,_t)}},ot=Yn(function(_,q){var H,U=he?q.selected:!0;U?H=he?[].concat(_e(re),[_]):[_]:H=re.filter(function(ye){return ye.value!==_}),De(H),lt(_,U),t==="combobox"?ne(""):(!xn||m)&&(j(""),ne(""))}),mt=function(q,H){De(q);var U=H.type,ye=H.values;(U==="remove"||U==="clear")&&ye.forEach(function(Ee){lt(Ee.value,!1,U)})},ze=function(q,H){if(j(q),ne(null),H.source==="submit"){var U=(q||"").trim();if(U){var ye=Array.from(new Set([].concat(_e(Oe),[U])));De(ye),lt(U,!0),j("")}return}H.source!=="blur"&&(t==="combobox"&&De(q),d?.(q))},Tt=function(q){var H=q;t!=="tags"&&(H=q.map(function(ye){var Ee=F.get(ye);return Ee?.value}).filter(function(ye){return ye!==void 0}));var U=Array.from(new Set([].concat(_e(Oe),_e(H))));De(U),U.forEach(function(ye){lt(ye,!0)})},bt=s.useMemo(function(){var _=R!==!1&&g!==!1;return Y(Y({},T),{},{flattenOptions:qe,onActiveValue:Je,defaultActiveFirstOption:et,onSelect:ot,menuItemSelectedIcon:D,rawValues:Oe,fieldNames:se,virtual:_,direction:M,listHeight:V,listItemHeight:P,childrenAsData:fe,maxCount:be,optionRender:k})},[be,T,qe,Je,et,ot,D,Oe,se,R,g,M,V,P,fe,k]);return s.createElement(Dn.Provider,{value:bt},s.createElement(Da,Ze({},Le,{id:Me,prefixCls:c,ref:n,omitDomProps:zo,mode:t,displayValues:Ie,onDisplayValuesChange:mt,direction:M,searchValue:xe,onSearch:ze,autoClearSearchValue:m,onSearchSplit:Tt,dropdownMatchSelectWidth:g,OptionList:Lo,emptyOptions:!qe.length,activeValue:Ye,activeDescendantId:"".concat(Me,"_list_").concat(Te)})))}),Ma=Yo;Ma.Option=Ia;Ma.OptGroup=Ka;function vt(e,n){return e[n]}var qo=["children"];function Ra(e,n){return"".concat(e,"-").concat(n)}function Xo(e){return e&&e.type&&e.type.isTreeNode}function Jt(e,n){return e??n}function an(e){var n=e||{},o=n.title,t=n._title,a=n.key,c=n.children,u=o||"title";return{title:u,_title:t||[u],key:a||"key",children:c||"children"}}function Jo(e){function n(o){var t=kn(o);return t.map(function(a){if(!Xo(a))return ht(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var c=a.key,u=a.props,r=u.children,l=Ct(u,qo),i=Y({key:c},l),d=n(r);return d.length&&(i.children=d),i}).filter(function(a){return a})}return n(e)}function vn(e,n,o){var t=an(o),a=t._title,c=t.key,u=t.children,r=new Set(n===!0?[]:n),l=[];function i(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return d.map(function(m,f){for(var p=Ra(v?v.pos:"0",f),y=Jt(m[c],p),g,b=0;b<a.length;b+=1){var N=a[b];if(m[N]!==void 0){g=m[N];break}}var S=Object.assign(on(m,[].concat(_e(a),[c,u])),{title:g,key:y,parent:v,pos:p,children:null,data:m,isStart:[].concat(_e(v?v.isStart:[]),[f===0]),isEnd:[].concat(_e(v?v.isEnd:[]),[f===d.length-1])});return l.push(S),n===!0||r.has(y)?S.children=i(m[u]||[],S):S.children=[],S})}return i(e),l}function Qo(e,n,o){var t={};Ot(o)==="object"?t=o:t={externalGetKey:o},t=t||{};var a=t,c=a.childrenPropName,u=a.externalGetKey,r=a.fieldNames,l=an(r),i=l.key,d=l.children,v=c||d,m;u?typeof u=="string"?m=function(y){return y[u]}:typeof u=="function"&&(m=function(y){return u(y)}):m=function(y,g){return Jt(y[i],g)};function f(p,y,g,b){var N=p?p[v]:e,S=p?Ra(g.pos,y):"0",x=p?[].concat(_e(b),[p]):[];if(p){var w=m(p,S),k={node:p,index:y,pos:S,key:w,parentPos:g.node?g.pos:null,level:g.level+1,nodes:x};n(k)}N&&N.forEach(function(K,h){f(K,h,{node:p,pos:S,level:g?g.level+1:-1},x)})}f(null)}function Pa(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.initWrapper,t=n.processEntity,a=n.onProcessFinished,c=n.externalGetKey,u=n.childrenPropName,r=n.fieldNames,l=arguments.length>2?arguments[2]:void 0,i=c||l,d={},v={},m={posEntities:d,keyEntities:v};return o&&(m=o(m)||m),Qo(e,function(f){var p=f.node,y=f.index,g=f.pos,b=f.key,N=f.parentPos,S=f.level,x=f.nodes,w={node:p,nodes:x,index:y,key:b,pos:g,level:S},k=Jt(b,g);d[g]=w,v[k]=w,w.parent=d[N],w.parent&&(w.parent.children=w.parent.children||[],w.parent.children.push(w)),t&&t(w,m)},{externalGetKey:i,childrenPropName:u,fieldNames:r}),a&&a(m),m}function Ut(e,n){var o=n.expandedKeys,t=n.selectedKeys,a=n.loadedKeys,c=n.loadingKeys,u=n.checkedKeys,r=n.halfCheckedKeys,l=n.dragOverNodeKey,i=n.dropPosition,d=n.keyEntities,v=vt(d,e),m={eventKey:e,expanded:o.indexOf(e)!==-1,selected:t.indexOf(e)!==-1,loaded:a.indexOf(e)!==-1,loading:c.indexOf(e)!==-1,checked:u.indexOf(e)!==-1,halfChecked:r.indexOf(e)!==-1,pos:String(v?v.pos:""),dragOver:l===e&&i===0,dragOverGapTop:l===e&&i===-1,dragOverGapBottom:l===e&&i===1};return m}function Qe(e){var n=e.data,o=e.expanded,t=e.selected,a=e.checked,c=e.loaded,u=e.loading,r=e.halfChecked,l=e.dragOver,i=e.dragOverGapTop,d=e.dragOverGapBottom,v=e.pos,m=e.active,f=e.eventKey,p=Y(Y({},n),{},{expanded:o,selected:t,checked:a,loaded:c,loading:u,halfChecked:r,dragOver:l,dragOverGapTop:i,dragOverGapBottom:d,pos:v,active:m,key:f});return"props"in p||Object.defineProperty(p,"props",{get:function(){return ht(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),p}function _a(e,n){var o=new Set;return e.forEach(function(t){n.has(t)||o.add(t)}),o}function Zo(e){var n=e||{},o=n.disabled,t=n.disableCheckbox,a=n.checkable;return!!(o||t)||a===!1}function ei(e,n,o,t){for(var a=new Set(e),c=new Set,u=0;u<=o;u+=1){var r=n.get(u)||new Set;r.forEach(function(v){var m=v.key,f=v.node,p=v.children,y=p===void 0?[]:p;a.has(m)&&!t(f)&&y.filter(function(g){return!t(g.node)}).forEach(function(g){a.add(g.key)})})}for(var l=new Set,i=o;i>=0;i-=1){var d=n.get(i)||new Set;d.forEach(function(v){var m=v.parent,f=v.node;if(!(t(f)||!v.parent||l.has(v.parent.key))){if(t(v.parent.node)){l.add(m.key);return}var p=!0,y=!1;(m.children||[]).filter(function(g){return!t(g.node)}).forEach(function(g){var b=g.key,N=a.has(b);p&&!N&&(p=!1),!y&&(N||c.has(b))&&(y=!0)}),p&&a.add(m.key),y&&c.add(m.key),l.add(m.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(_a(c,a))}}function ti(e,n,o,t,a){for(var c=new Set(e),u=new Set(n),r=0;r<=t;r+=1){var l=o.get(r)||new Set;l.forEach(function(m){var f=m.key,p=m.node,y=m.children,g=y===void 0?[]:y;!c.has(f)&&!u.has(f)&&!a(p)&&g.filter(function(b){return!a(b.node)}).forEach(function(b){c.delete(b.key)})})}u=new Set;for(var i=new Set,d=t;d>=0;d-=1){var v=o.get(d)||new Set;v.forEach(function(m){var f=m.parent,p=m.node;if(!(a(p)||!m.parent||i.has(m.parent.key))){if(a(m.parent.node)){i.add(f.key);return}var y=!0,g=!1;(f.children||[]).filter(function(b){return!a(b.node)}).forEach(function(b){var N=b.key,S=c.has(N);y&&!S&&(y=!1),!g&&(S||u.has(N))&&(g=!0)}),y||c.delete(f.key),g&&u.add(f.key),i.add(f.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(_a(u,c))}}function Gt(e,n,o,t){var a=[],c;c=Zo;var u=new Set(e.filter(function(d){var v=!!vt(o,d);return v||a.push(d),v})),r=new Map,l=0;Object.keys(o).forEach(function(d){var v=o[d],m=v.level,f=r.get(m);f||(f=new Set,r.set(m,f)),f.add(v),l=Math.max(l,m)}),ht(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(d){return"'".concat(d,"'")}).join(", ")));var i;return n===!0?i=ei(u,r,l,c):i=ti(u,n.halfCheckedKeys,r,l,c),i}function ni(e,n){var o=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=Qa(e))||n){o&&(e=o);var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(i){throw i},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,u=!0,r=!1;return{s:function(){o=o.call(e)},n:function(){var i=o.next();return u=i.done,i},e:function(i){r=!0,c=i},f:function(){try{u||o.return==null||o.return()}finally{if(r)throw c}}}}const ai=function(e){var n=s.useRef({valueLabels:new Map});return s.useMemo(function(){var o=n.current.valueLabels,t=new Map,a=e.map(function(c){var u=c.value,r=c.label,l=r??o.get(u);return t.set(u,l),Y(Y({},c),{},{label:l})});return n.current.valueLabels=t,[a]},[e])};var ri=function(n,o,t,a){return s.useMemo(function(){var c=function(f){return f.map(function(p){var y=p.value;return y})},u=c(n),r=c(o),l=u.filter(function(m){return!a[m]}),i=u,d=r;if(t){var v=Gt(u,!0,a);i=v.checkedKeys,d=v.halfCheckedKeys}return[Array.from(new Set([].concat(_e(l),_e(i)))),d]},[n,o,t,a])},oi=function(n){return Array.isArray(n)?n:n!==void 0?[n]:[]},ii=function(n){var o=n||{},t=o.label,a=o.value,c=o.children;return{_title:t?[t]:["title","label"],value:a||"value",key:a||"value",children:c||"children"}},wn=function(n){return!n||n.disabled||n.disableCheckbox||n.checkable===!1},li=function(n,o){var t=[],a=function c(u){u.forEach(function(r){var l=r[o.children];l&&(t.push(r[o.value]),c(l))})};return a(n),t},qn=function(n){return n==null};const si=function(e,n){return s.useMemo(function(){var o=Pa(e,{fieldNames:n,initWrapper:function(a){return Y(Y({},a),{},{valueEntities:new Map})},processEntity:function(a,c){var u=a.node[n.value];c.valueEntities.set(u,a)}});return o},[e,n])};var Kn=function(){return null},ci=["children","value"];function La(e){return kn(e).map(function(n){if(!s.isValidElement(n)||!n.type)return null;var o=n,t=o.key,a=o.props,c=a.children,u=a.value,r=Ct(a,ci),l=Y({key:t,value:u},r),i=La(c);return i.length&&(l.children=i),l}).filter(function(n){return n})}function En(e){if(!e)return e;var n=Y({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return ht(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),n}}),n}function ui(e,n,o,t,a,c){var u=null,r=null;function l(){function i(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(f,p){var y="".concat(v,"-").concat(p),g=f[c.value],b=o.includes(g),N=i(f[c.children]||[],y,b),S=s.createElement(Kn,f,N.map(function(w){return w.node}));if(n===g&&(u=S),b){var x={pos:y,node:S,children:N};return m||r.push(x),x}return null}).filter(function(f){return f})}r||(r=[],i(t),r.sort(function(d,v){var m=d.node.props.value,f=v.node.props.value,p=o.indexOf(m),y=o.indexOf(f);return p-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return ht(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),l(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return ht(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),l(),a?r:r.map(function(d){var v=d.node;return v})}})}var di=function(n,o,t){var a=t.fieldNames,c=t.treeNodeFilterProp,u=t.filterTreeNode,r=a.children;return s.useMemo(function(){if(!o||u===!1)return n;var l=typeof u=="function"?u:function(d,v){return String(v[c]).toUpperCase().includes(o.toUpperCase())},i=function d(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return v.reduce(function(f,p){var y=p[r],g=m||l(o,En(p)),b=d(y||[],g);return(g||b.length)&&f.push(Y(Y({},p),{},E({isLeaf:void 0},r,b))),f},[])};return i(n)},[n,o,r,c,u])};function Xn(e){var n=s.useRef();n.current=e;var o=s.useCallback(function(){return n.current.apply(n,arguments)},[]);return o}function fi(e,n){var o=n.id,t=n.pId,a=n.rootPId,c=new Map,u=[];return e.forEach(function(r){var l=r[o],i=Y(Y({},r),{},{key:r.key||l});c.set(l,i)}),c.forEach(function(r){var l=r[t],i=c.get(l);i?(i.children=i.children||[],i.children.push(r)):(l===a||a===null)&&u.push(r)}),u}function vi(e,n,o){return s.useMemo(function(){if(e){if(o){var t=Y({id:"id",pId:"pId",rootPId:null},Ot(o)==="object"?o:{});return fi(e,t)}return e}return La(n)},[n,o,e])}var Aa=s.createContext(null),In=s.createContext(null),ja=s.createContext({}),gi=function(n){var o=n.dropPosition,t=n.dropLevelOffset,a=n.indent,c={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(o){case-1:c.top=0,c.left=-t*a;break;case 1:c.bottom=0,c.left=-t*a;break;case 0:c.bottom=0,c.left=a;break}return Ke.createElement("div",{style:c})},hi=function(n){for(var o=n.prefixCls,t=n.level,a=n.isStart,c=n.isEnd,u="".concat(o,"-indent-unit"),r=[],l=0;l<t;l+=1)r.push(s.createElement("span",{key:l,className:nt(u,E(E({},"".concat(u,"-start"),a[l]),"".concat(u,"-end"),c[l]))}));return s.createElement("span",{"aria-hidden":"true",className:"".concat(o,"-indent")},r)};const mi=s.memo(hi);var pi=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Jn="open",Qn="close",yi="---",rn=function(n){var o,t,a=n.eventKey,c=n.className,u=n.style,r=n.dragOver,l=n.dragOverGapTop,i=n.dragOverGapBottom,d=n.isLeaf,v=n.isStart,m=n.isEnd,f=n.expanded,p=n.selected,y=n.checked,g=n.halfChecked,b=n.loading,N=n.domRef,S=n.active,x=n.data,w=n.onMouseMove,k=n.selectable,K=Ct(n,pi),h=Ke.useContext(In),D=Ke.useContext(ja),R=Ke.useRef(null),M=Ke.useState(!1),L=de(M,2),V=L[0],O=L[1],P=Ke.useMemo(function(){var W;return!!(h.disabled||n.disabled||(W=D.nodeDisabled)!==null&&W!==void 0&&W.call(D,x))},[h.disabled,n.disabled,D.nodeDisabled,x]),B=Ke.useMemo(function(){return!h.checkable||n.checkable===!1?!1:h.checkable},[h.checkable,n.checkable]),Z=function(I){P||h.onNodeSelect(I,Qe(n))},z=function(I){P||!B||n.disableCheckbox||h.onNodeCheck(I,Qe(n),!y)},ae=Ke.useMemo(function(){return typeof k=="boolean"?k:h.selectable},[k,h.selectable]),X=function(I){h.onNodeClick(I,Qe(n)),ae?Z(I):z(I)},be=function(I){h.onNodeDoubleClick(I,Qe(n))},Le=function(I){h.onNodeMouseEnter(I,Qe(n))},Me=function(I){h.onNodeMouseLeave(I,Qe(n))},he=function(I){h.onNodeContextMenu(I,Qe(n))},fe=Ke.useMemo(function(){return!!(h.draggable&&(!h.draggable.nodeDraggable||h.draggable.nodeDraggable(x)))},[h.draggable,x]),Ge=function(I){I.stopPropagation(),O(!0),h.onNodeDragStart(I,n);try{I.dataTransfer.setData("text/plain","")}catch{}},se=function(I){I.preventDefault(),I.stopPropagation(),h.onNodeDragEnter(I,n)},Se=function(I){I.preventDefault(),I.stopPropagation(),h.onNodeDragOver(I,n)},Ne=function(I){I.stopPropagation(),h.onNodeDragLeave(I,n)},xe=function(I){I.stopPropagation(),O(!1),h.onNodeDragEnd(I,n)},j=function(I){I.preventDefault(),I.stopPropagation(),O(!1),h.onNodeDrop(I,n)},T=function(I){b||h.onNodeExpand(I,Qe(n))},$=Ke.useMemo(function(){var W=vt(h.keyEntities,a)||{},I=W.children;return!!(I||[]).length},[h.keyEntities,a]),F=Ke.useMemo(function(){return d===!1?!1:d||!h.loadData&&!$||h.loadData&&n.loaded&&!$},[d,h.loadData,$,n.loaded]);Ke.useEffect(function(){b||typeof h.loadData=="function"&&f&&!F&&!n.loaded&&h.onNodeLoad(Qe(n))},[b,h.loadData,h.onNodeLoad,f,F,n]);var A=Ke.useMemo(function(){var W;return(W=h.draggable)!==null&&W!==void 0&&W.icon?Ke.createElement("span",{className:"".concat(h.prefixCls,"-draggable-icon")},h.draggable.icon):null},[h.draggable]),J=function(I){var He=n.switcherIcon||h.switcherIcon;return typeof He=="function"?He(Y(Y({},n),{},{isLeaf:I})):He},ce=function(){if(F){var I=J(!0);return I!==!1?Ke.createElement("span",{className:nt("".concat(h.prefixCls,"-switcher"),"".concat(h.prefixCls,"-switcher-noop"))},I):null}var He=J(!1);return He!==!1?Ke.createElement("span",{onClick:T,className:nt("".concat(h.prefixCls,"-switcher"),"".concat(h.prefixCls,"-switcher_").concat(f?Jn:Qn))},He):null},ue=Ke.useMemo(function(){if(!B)return null;var W=typeof B!="boolean"?B:null;return Ke.createElement("span",{className:nt("".concat(h.prefixCls,"-checkbox"),E(E(E({},"".concat(h.prefixCls,"-checkbox-checked"),y),"".concat(h.prefixCls,"-checkbox-indeterminate"),!y&&g),"".concat(h.prefixCls,"-checkbox-disabled"),P||n.disableCheckbox)),onClick:z,role:"checkbox","aria-checked":g?"mixed":y,"aria-disabled":P||n.disableCheckbox,"aria-label":"Select ".concat(typeof n.title=="string"?n.title:"tree node")},W)},[B,y,g,P,n.disableCheckbox,n.title]),ee=Ke.useMemo(function(){return F?null:f?Jn:Qn},[F,f]),ke=Ke.useMemo(function(){return Ke.createElement("span",{className:nt("".concat(h.prefixCls,"-iconEle"),"".concat(h.prefixCls,"-icon__").concat(ee||"docu"),E({},"".concat(h.prefixCls,"-icon_loading"),b))})},[h.prefixCls,ee,b]),Q=Ke.useMemo(function(){var W=!!h.draggable,I=!n.disabled&&W&&h.dragOverNodeKey===a;return I?h.dropIndicatorRender({dropPosition:h.dropPosition,dropLevelOffset:h.dropLevelOffset,indent:h.indent,prefixCls:h.prefixCls,direction:h.direction}):null},[h.dropPosition,h.dropLevelOffset,h.indent,h.prefixCls,h.direction,h.draggable,h.dragOverNodeKey,h.dropIndicatorRender]),Re=Ke.useMemo(function(){var W=n.title,I=W===void 0?yi:W,He="".concat(h.prefixCls,"-node-content-wrapper"),Be;if(h.showIcon){var qe=n.icon||h.icon;Be=qe?Ke.createElement("span",{className:nt("".concat(h.prefixCls,"-iconEle"),"".concat(h.prefixCls,"-icon__customize"))},typeof qe=="function"?qe(n):qe):ke}else h.loadData&&b&&(Be=ke);var De;return typeof I=="function"?De=I(x):h.titleRender?De=h.titleRender(x):De=I,Ke.createElement("span",{ref:R,title:typeof I=="string"?I:"",className:nt(He,"".concat(He,"-").concat(ee||"normal"),E({},"".concat(h.prefixCls,"-node-selected"),!P&&(p||V))),onMouseEnter:Le,onMouseLeave:Me,onContextMenu:he,onClick:X,onDoubleClick:be},Be,Ke.createElement("span",{className:"".concat(h.prefixCls,"-title")},De),Q)},[h.prefixCls,h.showIcon,n,h.icon,ke,h.titleRender,x,ee,Le,Me,he,X,be]),me=Bt(K,{aria:!0,data:!0}),re=vt(h.keyEntities,a)||{},Ue=re.level,Ie=m[m.length-1],Oe=!P&&fe,Ce=h.draggingNodeKey===a,te=k!==void 0?{"aria-selected":!!k}:void 0;return Ke.createElement("div",Ze({ref:N,role:"treeitem","aria-expanded":d?void 0:f,className:nt(c,"".concat(h.prefixCls,"-treenode"),(t={},E(E(E(E(E(E(E(E(E(E(t,"".concat(h.prefixCls,"-treenode-disabled"),P),"".concat(h.prefixCls,"-treenode-switcher-").concat(f?"open":"close"),!d),"".concat(h.prefixCls,"-treenode-checkbox-checked"),y),"".concat(h.prefixCls,"-treenode-checkbox-indeterminate"),g),"".concat(h.prefixCls,"-treenode-selected"),p),"".concat(h.prefixCls,"-treenode-loading"),b),"".concat(h.prefixCls,"-treenode-active"),S),"".concat(h.prefixCls,"-treenode-leaf-last"),Ie),"".concat(h.prefixCls,"-treenode-draggable"),fe),"dragging",Ce),E(E(E(E(E(E(E(t,"drop-target",h.dropTargetKey===a),"drop-container",h.dropContainerKey===a),"drag-over",!P&&r),"drag-over-gap-top",!P&&l),"drag-over-gap-bottom",!P&&i),"filter-node",(o=h.filterTreeNode)===null||o===void 0?void 0:o.call(h,Qe(n))),"".concat(h.prefixCls,"-treenode-leaf"),F))),style:u,draggable:Oe,onDragStart:Oe?Ge:void 0,onDragEnter:fe?se:void 0,onDragOver:fe?Se:void 0,onDragLeave:fe?Ne:void 0,onDrop:fe?j:void 0,onDragEnd:fe?xe:void 0,onMouseMove:w},te,me),Ke.createElement(mi,{prefixCls:h.prefixCls,level:Ue,isStart:v,isEnd:m}),A,ce(),ue,Re)};rn.isTreeNode=1;function Ci(e,n){var o=s.useState(!1),t=de(o,2),a=t[0],c=t[1];Yt(function(){if(a)return e(),function(){n()}},[a]),Yt(function(){return c(!0),function(){c(!1)}},[])}var bi=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Si=s.forwardRef(function(e,n){var o=e.className,t=e.style,a=e.motion,c=e.motionNodes,u=e.motionType,r=e.onMotionStart,l=e.onMotionEnd,i=e.active,d=e.treeNodeRequiredProps,v=Ct(e,bi),m=s.useState(!0),f=de(m,2),p=f[0],y=f[1],g=s.useContext(In),b=g.prefixCls,N=c&&u!=="hide";Yt(function(){c&&N!==p&&y(N)},[c]);var S=function(){c&&r()},x=s.useRef(!1),w=function(){c&&!x.current&&(x.current=!0,l())};Ci(S,w);var k=function(h){N===h&&w()};return c?s.createElement(Za,Ze({ref:n,visible:p},a,{motionAppear:u==="show",onVisibleChanged:k}),function(K,h){var D=K.className,R=K.style;return s.createElement("div",{ref:h,className:nt("".concat(b,"-treenode-motion"),D),style:R},c.map(function(M){var L=Object.assign({},(Ca(M.data),M.data)),V=M.title,O=M.key,P=M.isStart,B=M.isEnd;delete L.children;var Z=Ut(O,d);return s.createElement(rn,Ze({},L,Z,{title:V,active:i,data:M.data,key:O,isStart:P,isEnd:B}))}))}):s.createElement(rn,Ze({domRef:n,className:o,style:t},v,{active:i}))});function xi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=e.length,t=n.length;if(Math.abs(o-t)!==1)return{add:!1,key:null};function a(c,u){var r=new Map;c.forEach(function(i){r.set(i,!0)});var l=u.filter(function(i){return!r.has(i)});return l.length===1?l[0]:null}return o<t?{add:!0,key:a(e,n)}:{add:!1,key:a(n,e)}}function Zn(e,n,o){var t=e.findIndex(function(r){return r.key===o}),a=e[t+1],c=n.findIndex(function(r){return r.key===o});if(a){var u=n.findIndex(function(r){return r.key===a.key});return n.slice(c+1,u)}return n.slice(c+1)}var wi=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],ea={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ei=function(){},Ht="RC_TREE_MOTION_".concat(Math.random()),Nn={key:Ht},$a={key:Ht,level:0,index:0,pos:"0",node:Nn,nodes:[Nn]},ta={parent:null,children:[],pos:$a.pos,data:Nn,title:null,key:Ht,isStart:[],isEnd:[]};function na(e,n,o,t){return n===!1||!o?e:e.slice(0,Math.ceil(o/t)+1)}function aa(e){var n=e.key,o=e.pos;return Jt(n,o)}function Ni(e){for(var n=String(e.data.key),o=e;o.parent;)o=o.parent,n="".concat(o.data.key," > ").concat(n);return n}var ki=s.forwardRef(function(e,n){var o=e.prefixCls,t=e.data;e.selectable,e.checkable;var a=e.expandedKeys,c=e.selectedKeys,u=e.checkedKeys,r=e.loadedKeys,l=e.loadingKeys,i=e.halfCheckedKeys,d=e.keyEntities,v=e.disabled,m=e.dragging,f=e.dragOverNodeKey,p=e.dropPosition,y=e.motion,g=e.height,b=e.itemHeight,N=e.virtual,S=e.scrollWidth,x=e.focusable,w=e.activeItem,k=e.focused,K=e.tabIndex,h=e.onKeyDown,D=e.onFocus,R=e.onBlur,M=e.onActiveChange,L=e.onListChangeStart,V=e.onListChangeEnd,O=Ct(e,wi),P=s.useRef(null),B=s.useRef(null);s.useImperativeHandle(n,function(){return{scrollTo:function(Re){P.current.scrollTo(Re)},getIndentWidth:function(){return B.current.offsetWidth}}});var Z=s.useState(a),z=de(Z,2),ae=z[0],X=z[1],be=s.useState(t),Le=de(be,2),Me=Le[0],he=Le[1],fe=s.useState(t),Ge=de(fe,2),se=Ge[0],Se=Ge[1],Ne=s.useState([]),xe=de(Ne,2),j=xe[0],T=xe[1],$=s.useState(null),F=de($,2),A=F[0],J=F[1],ce=s.useRef(t);ce.current=t;function ue(){var Q=ce.current;he(Q),Se(Q),T([]),J(null),V()}Yt(function(){X(a);var Q=xi(ae,a);if(Q.key!==null)if(Q.add){var Re=Me.findIndex(function(Ce){var te=Ce.key;return te===Q.key}),me=na(Zn(Me,t,Q.key),N,g,b),re=Me.slice();re.splice(Re+1,0,ta),Se(re),T(me),J("show")}else{var Ue=t.findIndex(function(Ce){var te=Ce.key;return te===Q.key}),Ie=na(Zn(t,Me,Q.key),N,g,b),Oe=t.slice();Oe.splice(Ue+1,0,ta),Se(Oe),T(Ie),J("hide")}else Me!==t&&(he(t),Se(t))},[a,t]),s.useEffect(function(){m||ue()},[m]);var ee=y?se:t,ke={expandedKeys:a,selectedKeys:c,loadedKeys:r,loadingKeys:l,checkedKeys:u,halfCheckedKeys:i,dragOverNodeKey:f,dropPosition:p,keyEntities:d};return s.createElement(s.Fragment,null,k&&w&&s.createElement("span",{style:ea,"aria-live":"assertive"},Ni(w)),s.createElement("div",null,s.createElement("input",{style:ea,disabled:x===!1||v,tabIndex:x!==!1?K:null,onKeyDown:h,onFocus:D,onBlur:R,value:"",onChange:Ei,"aria-label":"for screen reader"})),s.createElement("div",{className:"".concat(o,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},s.createElement("div",{className:"".concat(o,"-indent")},s.createElement("div",{ref:B,className:"".concat(o,"-indent-unit")}))),s.createElement(ya,Ze({},O,{data:ee,itemKey:aa,height:g,fullHeight:!1,virtual:N,itemHeight:b,scrollWidth:S,prefixCls:"".concat(o,"-list"),ref:P,role:"tree",onVisibleChange:function(Re){Re.every(function(me){return aa(me)!==Ht})&&ue()}}),function(Q){var Re=Q.pos,me=Object.assign({},(Ca(Q.data),Q.data)),re=Q.title,Ue=Q.key,Ie=Q.isStart,Oe=Q.isEnd,Ce=Jt(Ue,Re);delete me.key,delete me.children;var te=Ut(Ce,ke);return s.createElement(Si,Ze({},me,te,{title:re,active:!!w&&Ue===w.key,pos:Re,data:Q.data,isStart:Ie,isEnd:Oe,motion:y,motionNodes:Ue===Ht?j:null,motionType:A,onMotionStart:L,onMotionEnd:ue,treeNodeRequiredProps:ke,onMouseMove:function(){M(null)}}))}))});function It(e,n){if(!e)return[];var o=e.slice(),t=o.indexOf(n);return t>=0&&o.splice(t,1),o}function Rt(e,n){var o=(e||[]).slice();return o.indexOf(n)===-1&&o.push(n),o}function On(e){return e.split("-")}function Di(e,n){var o=[],t=vt(n,e);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(u){var r=u.key,l=u.children;o.push(r),a(l)})}return a(t.children),o}function Ki(e){if(e.parent){var n=On(e.pos);return Number(n[n.length-1])===e.parent.children.length-1}return!1}function Ii(e){var n=On(e.pos);return Number(n[n.length-1])===0}function ra(e,n,o,t,a,c,u,r,l,i){var d,v=e.clientX,m=e.clientY,f=e.target.getBoundingClientRect(),p=f.top,y=f.height,g=(i==="rtl"?-1:1)*((a?.x||0)-v),b=(g-12)/t,N=l.filter(function(B){var Z;return(Z=r[B])===null||Z===void 0||(Z=Z.children)===null||Z===void 0?void 0:Z.length}),S=vt(r,o.eventKey);if(m<p+y/2){var x=u.findIndex(function(B){return B.key===S.key}),w=x<=0?0:x-1,k=u[w].key;S=vt(r,k)}var K=S.key,h=S,D=S.key,R=0,M=0;if(!N.includes(K))for(var L=0;L<b&&Ki(S);L+=1)S=S.parent,M+=1;var V=n.data,O=S.node,P=!0;return Ii(S)&&S.level===0&&m<p+y/2&&c({dragNode:V,dropNode:O,dropPosition:-1})&&S.key===o.eventKey?R=-1:(h.children||[]).length&&N.includes(D)?c({dragNode:V,dropNode:O,dropPosition:0})?R=0:P=!1:M===0?b>-1.5?c({dragNode:V,dropNode:O,dropPosition:1})?R=1:P=!1:c({dragNode:V,dropNode:O,dropPosition:0})?R=0:c({dragNode:V,dropNode:O,dropPosition:1})?R=1:P=!1:c({dragNode:V,dropNode:O,dropPosition:1})?R=1:P=!1,{dropPosition:R,dropLevelOffset:M,dropTargetKey:S.key,dropTargetPos:S.pos,dragOverNodeKey:D,dropContainerKey:R===0?null:((d=S.parent)===null||d===void 0?void 0:d.key)||null,dropAllowed:P}}function oa(e,n){if(e){var o=n.multiple;return o?e.slice():e.length?[e[0]]:e}}function gn(e){if(!e)return null;var n;if(Array.isArray(e))n={checkedKeys:e,halfCheckedKeys:void 0};else if(Ot(e)==="object")n={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return ht(!1,"`checkedKeys` is not an array or an object"),null;return n}function ia(e,n){var o=new Set;function t(a){if(!o.has(a)){var c=vt(n,a);if(c){o.add(a);var u=c.parent,r=c.node;r.disabled||u&&t(u.key)}}}return(e||[]).forEach(function(a){t(a)}),_e(o)}var Oi=10,Tn=function(e){er(o,e);var n=tr(o);function o(){var t;nr(this,o);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return t=n.call.apply(n,[this].concat(c)),E(ve(t),"destroyed",!1),E(ve(t),"delayedDragEnterLogic",void 0),E(ve(t),"loadingRetryTimes",{}),E(ve(t),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:an()}),E(ve(t),"dragStartMousePosition",null),E(ve(t),"dragNodeProps",null),E(ve(t),"currentMouseOverDroppableNodeKey",null),E(ve(t),"listRef",s.createRef()),E(ve(t),"onNodeDragStart",function(r,l){var i=t.state,d=i.expandedKeys,v=i.keyEntities,m=t.props.onDragStart,f=l.eventKey;t.dragNodeProps=l,t.dragStartMousePosition={x:r.clientX,y:r.clientY};var p=It(d,f);t.setState({draggingNodeKey:f,dragChildrenKeys:Di(f,v),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(p),window.addEventListener("dragend",t.onWindowDragEnd),m?.({event:r,node:Qe(l)})}),E(ve(t),"onNodeDragEnter",function(r,l){var i=t.state,d=i.expandedKeys,v=i.keyEntities,m=i.dragChildrenKeys,f=i.flattenNodes,p=i.indent,y=t.props,g=y.onDragEnter,b=y.onExpand,N=y.allowDrop,S=y.direction,x=l.pos,w=l.eventKey;if(t.currentMouseOverDroppableNodeKey!==w&&(t.currentMouseOverDroppableNodeKey=w),!t.dragNodeProps){t.resetDragState();return}var k=ra(r,t.dragNodeProps,l,p,t.dragStartMousePosition,N,f,v,d,S),K=k.dropPosition,h=k.dropLevelOffset,D=k.dropTargetKey,R=k.dropContainerKey,M=k.dropTargetPos,L=k.dropAllowed,V=k.dragOverNodeKey;if(m.includes(D)||!L){t.resetDragState();return}if(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach(function(O){clearTimeout(t.delayedDragEnterLogic[O])}),t.dragNodeProps.eventKey!==l.eventKey&&(r.persist(),t.delayedDragEnterLogic[x]=window.setTimeout(function(){if(t.state.draggingNodeKey!==null){var O=_e(d),P=vt(v,l.eventKey);P&&(P.children||[]).length&&(O=Rt(d,l.eventKey)),t.props.hasOwnProperty("expandedKeys")||t.setExpandedKeys(O),b?.(O,{node:Qe(l),expanded:!0,nativeEvent:r.nativeEvent})}},800)),t.dragNodeProps.eventKey===D&&h===0){t.resetDragState();return}t.setState({dragOverNodeKey:V,dropPosition:K,dropLevelOffset:h,dropTargetKey:D,dropContainerKey:R,dropTargetPos:M,dropAllowed:L}),g?.({event:r,node:Qe(l),expandedKeys:d})}),E(ve(t),"onNodeDragOver",function(r,l){var i=t.state,d=i.dragChildrenKeys,v=i.flattenNodes,m=i.keyEntities,f=i.expandedKeys,p=i.indent,y=t.props,g=y.onDragOver,b=y.allowDrop,N=y.direction;if(t.dragNodeProps){var S=ra(r,t.dragNodeProps,l,p,t.dragStartMousePosition,b,v,m,f,N),x=S.dropPosition,w=S.dropLevelOffset,k=S.dropTargetKey,K=S.dropContainerKey,h=S.dropTargetPos,D=S.dropAllowed,R=S.dragOverNodeKey;d.includes(k)||!D||(t.dragNodeProps.eventKey===k&&w===0?t.state.dropPosition===null&&t.state.dropLevelOffset===null&&t.state.dropTargetKey===null&&t.state.dropContainerKey===null&&t.state.dropTargetPos===null&&t.state.dropAllowed===!1&&t.state.dragOverNodeKey===null||t.resetDragState():x===t.state.dropPosition&&w===t.state.dropLevelOffset&&k===t.state.dropTargetKey&&K===t.state.dropContainerKey&&h===t.state.dropTargetPos&&D===t.state.dropAllowed&&R===t.state.dragOverNodeKey||t.setState({dropPosition:x,dropLevelOffset:w,dropTargetKey:k,dropContainerKey:K,dropTargetPos:h,dropAllowed:D,dragOverNodeKey:R}),g?.({event:r,node:Qe(l)}))}}),E(ve(t),"onNodeDragLeave",function(r,l){t.currentMouseOverDroppableNodeKey===l.eventKey&&!r.currentTarget.contains(r.relatedTarget)&&(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var i=t.props.onDragLeave;i?.({event:r,node:Qe(l)})}),E(ve(t),"onWindowDragEnd",function(r){t.onNodeDragEnd(r,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)}),E(ve(t),"onNodeDragEnd",function(r,l){var i=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),i?.({event:r,node:Qe(l)}),t.dragNodeProps=null,window.removeEventListener("dragend",t.onWindowDragEnd)}),E(ve(t),"onNodeDrop",function(r,l){var i,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=t.state,m=v.dragChildrenKeys,f=v.dropPosition,p=v.dropTargetKey,y=v.dropTargetPos,g=v.dropAllowed;if(g){var b=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),p!==null){var N=Y(Y({},Ut(p,t.getTreeNodeRequiredProps())),{},{active:((i=t.getActiveItem())===null||i===void 0?void 0:i.key)===p,data:vt(t.state.keyEntities,p).node}),S=m.includes(p);ht(!S,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var x=On(y),w={event:r,node:Qe(N),dragNode:t.dragNodeProps?Qe(t.dragNodeProps):null,dragNodesKeys:[t.dragNodeProps.eventKey].concat(m),dropToGap:f!==0,dropPosition:f+Number(x[x.length-1])};d||b?.(w),t.dragNodeProps=null}}}),E(ve(t),"cleanDragState",function(){var r=t.state.draggingNodeKey;r!==null&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null}),E(ve(t),"triggerExpandActionExpand",function(r,l){var i=t.state,d=i.expandedKeys,v=i.flattenNodes,m=l.expanded,f=l.key,p=l.isLeaf;if(!(p||r.shiftKey||r.metaKey||r.ctrlKey)){var y=v.filter(function(b){return b.key===f})[0],g=Qe(Y(Y({},Ut(f,t.getTreeNodeRequiredProps())),{},{data:y.data}));t.setExpandedKeys(m?It(d,f):Rt(d,f)),t.onNodeExpand(r,g)}}),E(ve(t),"onNodeClick",function(r,l){var i=t.props,d=i.onClick,v=i.expandAction;v==="click"&&t.triggerExpandActionExpand(r,l),d?.(r,l)}),E(ve(t),"onNodeDoubleClick",function(r,l){var i=t.props,d=i.onDoubleClick,v=i.expandAction;v==="doubleClick"&&t.triggerExpandActionExpand(r,l),d?.(r,l)}),E(ve(t),"onNodeSelect",function(r,l){var i=t.state.selectedKeys,d=t.state,v=d.keyEntities,m=d.fieldNames,f=t.props,p=f.onSelect,y=f.multiple,g=l.selected,b=l[m.key],N=!g;N?y?i=Rt(i,b):i=[b]:i=It(i,b);var S=i.map(function(x){var w=vt(v,x);return w?w.node:null}).filter(Boolean);t.setUncontrolledState({selectedKeys:i}),p?.(i,{event:"select",selected:N,node:l,selectedNodes:S,nativeEvent:r.nativeEvent})}),E(ve(t),"onNodeCheck",function(r,l,i){var d=t.state,v=d.keyEntities,m=d.checkedKeys,f=d.halfCheckedKeys,p=t.props,y=p.checkStrictly,g=p.onCheck,b=l.key,N,S={event:"check",node:l,checked:i,nativeEvent:r.nativeEvent};if(y){var x=i?Rt(m,b):It(m,b),w=It(f,b);N={checked:x,halfChecked:w},S.checkedNodes=x.map(function(M){return vt(v,M)}).filter(Boolean).map(function(M){return M.node}),t.setUncontrolledState({checkedKeys:x})}else{var k=Gt([].concat(_e(m),[b]),!0,v),K=k.checkedKeys,h=k.halfCheckedKeys;if(!i){var D=new Set(K);D.delete(b);var R=Gt(Array.from(D),{halfCheckedKeys:h},v);K=R.checkedKeys,h=R.halfCheckedKeys}N=K,S.checkedNodes=[],S.checkedNodesPositions=[],S.halfCheckedKeys=h,K.forEach(function(M){var L=vt(v,M);if(L){var V=L.node,O=L.pos;S.checkedNodes.push(V),S.checkedNodesPositions.push({node:V,pos:O})}}),t.setUncontrolledState({checkedKeys:K},!1,{halfCheckedKeys:h})}g?.(N,S)}),E(ve(t),"onNodeLoad",function(r){var l,i=r.key,d=t.state.keyEntities,v=vt(d,i);if(!(v!=null&&(l=v.children)!==null&&l!==void 0&&l.length)){var m=new Promise(function(f,p){t.setState(function(y){var g=y.loadedKeys,b=g===void 0?[]:g,N=y.loadingKeys,S=N===void 0?[]:N,x=t.props,w=x.loadData,k=x.onLoad;if(!w||b.includes(i)||S.includes(i))return null;var K=w(r);return K.then(function(){var h=t.state.loadedKeys,D=Rt(h,i);k?.(D,{event:"load",node:r}),t.setUncontrolledState({loadedKeys:D}),t.setState(function(R){return{loadingKeys:It(R.loadingKeys,i)}}),f()}).catch(function(h){if(t.setState(function(R){return{loadingKeys:It(R.loadingKeys,i)}}),t.loadingRetryTimes[i]=(t.loadingRetryTimes[i]||0)+1,t.loadingRetryTimes[i]>=Oi){var D=t.state.loadedKeys;ht(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:Rt(D,i)}),f()}p(h)}),{loadingKeys:Rt(S,i)}})});return m.catch(function(){}),m}}),E(ve(t),"onNodeMouseEnter",function(r,l){var i=t.props.onMouseEnter;i?.({event:r,node:l})}),E(ve(t),"onNodeMouseLeave",function(r,l){var i=t.props.onMouseLeave;i?.({event:r,node:l})}),E(ve(t),"onNodeContextMenu",function(r,l){var i=t.props.onRightClick;i&&(r.preventDefault(),i({event:r,node:l}))}),E(ve(t),"onFocus",function(){var r=t.props.onFocus;t.setState({focused:!0});for(var l=arguments.length,i=new Array(l),d=0;d<l;d++)i[d]=arguments[d];r?.apply(void 0,i)}),E(ve(t),"onBlur",function(){var r=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var l=arguments.length,i=new Array(l),d=0;d<l;d++)i[d]=arguments[d];r?.apply(void 0,i)}),E(ve(t),"getTreeNodeRequiredProps",function(){var r=t.state,l=r.expandedKeys,i=r.selectedKeys,d=r.loadedKeys,v=r.loadingKeys,m=r.checkedKeys,f=r.halfCheckedKeys,p=r.dragOverNodeKey,y=r.dropPosition,g=r.keyEntities;return{expandedKeys:l||[],selectedKeys:i||[],loadedKeys:d||[],loadingKeys:v||[],checkedKeys:m||[],halfCheckedKeys:f||[],dragOverNodeKey:p,dropPosition:y,keyEntities:g}}),E(ve(t),"setExpandedKeys",function(r){var l=t.state,i=l.treeData,d=l.fieldNames,v=vn(i,r,d);t.setUncontrolledState({expandedKeys:r,flattenNodes:v},!0)}),E(ve(t),"onNodeExpand",function(r,l){var i=t.state.expandedKeys,d=t.state,v=d.listChanging,m=d.fieldNames,f=t.props,p=f.onExpand,y=f.loadData,g=l.expanded,b=l[m.key];if(!v){var N=i.includes(b),S=!g;if(ht(g&&N||!g&&!N,"Expand state not sync with index check"),i=S?Rt(i,b):It(i,b),t.setExpandedKeys(i),p?.(i,{node:l,expanded:S,nativeEvent:r.nativeEvent}),S&&y){var x=t.onNodeLoad(l);x&&x.then(function(){var w=vn(t.state.treeData,i,m);t.setUncontrolledState({flattenNodes:w})}).catch(function(){var w=t.state.expandedKeys,k=It(w,b);t.setExpandedKeys(k)})}}}),E(ve(t),"onListChangeStart",function(){t.setUncontrolledState({listChanging:!0})}),E(ve(t),"onListChangeEnd",function(){setTimeout(function(){t.setUncontrolledState({listChanging:!1})})}),E(ve(t),"onActiveChange",function(r){var l=t.state.activeKey,i=t.props,d=i.onActiveChange,v=i.itemScrollOffset,m=v===void 0?0:v;l!==r&&(t.setState({activeKey:r}),r!==null&&t.scrollTo({key:r,offset:m}),d?.(r))}),E(ve(t),"getActiveItem",function(){var r=t.state,l=r.activeKey,i=r.flattenNodes;return l===null?null:i.find(function(d){var v=d.key;return v===l})||null}),E(ve(t),"offsetActiveKey",function(r){var l=t.state,i=l.flattenNodes,d=l.activeKey,v=i.findIndex(function(p){var y=p.key;return y===d});v===-1&&r<0&&(v=i.length),v=(v+r+i.length)%i.length;var m=i[v];if(m){var f=m.key;t.onActiveChange(f)}else t.onActiveChange(null)}),E(ve(t),"onKeyDown",function(r){var l=t.state,i=l.activeKey,d=l.expandedKeys,v=l.checkedKeys,m=l.fieldNames,f=t.props,p=f.onKeyDown,y=f.checkable,g=f.selectable;switch(r.which){case G.UP:{t.offsetActiveKey(-1),r.preventDefault();break}case G.DOWN:{t.offsetActiveKey(1),r.preventDefault();break}}var b=t.getActiveItem();if(b&&b.data){var N=t.getTreeNodeRequiredProps(),S=b.data.isLeaf===!1||!!(b.data[m.children]||[]).length,x=Qe(Y(Y({},Ut(i,N)),{},{data:b.data,active:!0}));switch(r.which){case G.LEFT:{S&&d.includes(i)?t.onNodeExpand({},x):b.parent&&t.onActiveChange(b.parent.key),r.preventDefault();break}case G.RIGHT:{S&&!d.includes(i)?t.onNodeExpand({},x):b.children&&b.children.length&&t.onActiveChange(b.children[0].key),r.preventDefault();break}case G.ENTER:case G.SPACE:{y&&!x.disabled&&x.checkable!==!1&&!x.disableCheckbox?t.onNodeCheck({},x,!v.includes(i)):!y&&g&&!x.disabled&&x.selectable!==!1&&t.onNodeSelect({},x);break}}}p?.(r)}),E(ve(t),"setUncontrolledState",function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t.destroyed){var d=!1,v=!0,m={};Object.keys(r).forEach(function(f){if(t.props.hasOwnProperty(f)){v=!1;return}d=!0,m[f]=r[f]}),d&&(!l||v)&&t.setState(Y(Y({},m),i))}}),E(ve(t),"scrollTo",function(r){t.listRef.current.scrollTo(r)}),t}return ar(o,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props,c=a.activeKey,u=a.itemScrollOffset,r=u===void 0?0:u;c!==void 0&&c!==this.state.activeKey&&(this.setState({activeKey:c}),c!==null&&this.scrollTo({key:c,offset:r}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a=this.state,c=a.focused,u=a.flattenNodes,r=a.keyEntities,l=a.draggingNodeKey,i=a.activeKey,d=a.dropLevelOffset,v=a.dropContainerKey,m=a.dropTargetKey,f=a.dropPosition,p=a.dragOverNodeKey,y=a.indent,g=this.props,b=g.prefixCls,N=g.className,S=g.style,x=g.showLine,w=g.focusable,k=g.tabIndex,K=k===void 0?0:k,h=g.selectable,D=g.showIcon,R=g.icon,M=g.switcherIcon,L=g.draggable,V=g.checkable,O=g.checkStrictly,P=g.disabled,B=g.motion,Z=g.loadData,z=g.filterTreeNode,ae=g.height,X=g.itemHeight,be=g.scrollWidth,Le=g.virtual,Me=g.titleRender,he=g.dropIndicatorRender,fe=g.onContextMenu,Ge=g.onScroll,se=g.direction,Se=g.rootClassName,Ne=g.rootStyle,xe=Bt(this.props,{aria:!0,data:!0}),j;L&&(Ot(L)==="object"?j=L:typeof L=="function"?j={nodeDraggable:L}:j={});var T={prefixCls:b,selectable:h,showIcon:D,icon:R,switcherIcon:M,draggable:j,draggingNodeKey:l,checkable:V,checkStrictly:O,disabled:P,keyEntities:r,dropLevelOffset:d,dropContainerKey:v,dropTargetKey:m,dropPosition:f,dragOverNodeKey:p,indent:y,direction:se,dropIndicatorRender:he,loadData:Z,filterTreeNode:z,titleRender:Me,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return s.createElement(In.Provider,{value:T},s.createElement("div",{className:nt(b,N,Se,E(E(E({},"".concat(b,"-show-line"),x),"".concat(b,"-focused"),c),"".concat(b,"-active-focused"),i!==null)),style:Ne},s.createElement(ki,Ze({ref:this.listRef,prefixCls:b,style:S,data:u,disabled:P,selectable:h,checkable:!!V,motion:B,dragging:l!==null,height:ae,itemHeight:X,virtual:Le,focusable:w,focused:c,tabIndex:K,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:fe,onScroll:Ge,scrollWidth:be},this.getTreeNodeRequiredProps(),xe))))}}],[{key:"getDerivedStateFromProps",value:function(a,c){var u=c.prevProps,r={prevProps:a};function l(K){return!u&&a.hasOwnProperty(K)||u&&u[K]!==a[K]}var i,d=c.fieldNames;if(l("fieldNames")&&(d=an(a.fieldNames),r.fieldNames=d),l("treeData")?i=a.treeData:l("children")&&(ht(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=Jo(a.children)),i){r.treeData=i;var v=Pa(i,{fieldNames:d});r.keyEntities=Y(E({},Ht,$a),v.keyEntities)}var m=r.keyEntities||c.keyEntities;if(l("expandedKeys")||u&&l("autoExpandParent"))r.expandedKeys=a.autoExpandParent||!u&&a.defaultExpandParent?ia(a.expandedKeys,m):a.expandedKeys;else if(!u&&a.defaultExpandAll){var f=Y({},m);delete f[Ht];var p=[];Object.keys(f).forEach(function(K){var h=f[K];h.children&&h.children.length&&p.push(h.key)}),r.expandedKeys=p}else!u&&a.defaultExpandedKeys&&(r.expandedKeys=a.autoExpandParent||a.defaultExpandParent?ia(a.defaultExpandedKeys,m):a.defaultExpandedKeys);if(r.expandedKeys||delete r.expandedKeys,i||r.expandedKeys){var y=vn(i||c.treeData,r.expandedKeys||c.expandedKeys,d);r.flattenNodes=y}if(a.selectable&&(l("selectedKeys")?r.selectedKeys=oa(a.selectedKeys,a):!u&&a.defaultSelectedKeys&&(r.selectedKeys=oa(a.defaultSelectedKeys,a))),a.checkable){var g;if(l("checkedKeys")?g=gn(a.checkedKeys)||{}:!u&&a.defaultCheckedKeys?g=gn(a.defaultCheckedKeys)||{}:i&&(g=gn(a.checkedKeys)||{checkedKeys:c.checkedKeys,halfCheckedKeys:c.halfCheckedKeys}),g){var b=g,N=b.checkedKeys,S=N===void 0?[]:N,x=b.halfCheckedKeys,w=x===void 0?[]:x;if(!a.checkStrictly){var k=Gt(S,!0,m);S=k.checkedKeys,w=k.halfCheckedKeys}r.checkedKeys=S,r.halfCheckedKeys=w}}return l("loadedKeys")&&(r.loadedKeys=a.loadedKeys),r}}]),o}(s.Component);E(Tn,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:gi,allowDrop:function(){return!0},expandAction:!1});E(Tn,"TreeNode",rn);var Va=s.createContext(null),Ti={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Mi=function(n,o){var t=Sa(),a=t.prefixCls,c=t.multiple,u=t.searchValue,r=t.toggleOpen,l=t.open,i=t.notFoundContent,d=s.useContext(Va),v=d.virtual,m=d.listHeight,f=d.listItemHeight,p=d.listItemScrollOffset,y=d.treeData,g=d.fieldNames,b=d.onSelect,N=d.dropdownMatchSelectWidth,S=d.treeExpandAction,x=d.treeTitleRender,w=d.onPopupScroll,k=d.leftMaxCount,K=d.leafCountOnly,h=d.valueEntities,D=s.useContext(Aa),R=D.checkable,M=D.checkedKeys,L=D.halfCheckedKeys,V=D.treeExpandedKeys,O=D.treeDefaultExpandAll,P=D.treeDefaultExpandedKeys,B=D.onTreeExpand,Z=D.treeIcon,z=D.showTreeIcon,ae=D.switcherIcon,X=D.treeLine,be=D.treeNodeFilterProp,Le=D.loadData,Me=D.treeLoadedKeys,he=D.treeMotion,fe=D.onTreeLoad,Ge=D.keyEntities,se=s.useRef(),Se=mn(function(){return y},[l,y],function(ne,pe){return pe[0]&&ne[1]!==pe[1]}),Ne=s.useMemo(function(){return R?{checked:M,halfChecked:L}:null},[R,M,L]);s.useEffect(function(){if(l&&!c&&M.length){var ne;(ne=se.current)===null||ne===void 0||ne.scrollTo({key:M[0]})}},[l]);var xe=function(pe){pe.preventDefault()},j=function(pe,Ae){var Te=Ae.node;R&&wn(Te)||(b(Te.key,{selected:!M.includes(Te.key)}),c||r(!1))},T=s.useState(P),$=de(T,2),F=$[0],A=$[1],J=s.useState(null),ce=de(J,2),ue=ce[0],ee=ce[1],ke=s.useMemo(function(){return V?_e(V):u?ue:F},[F,ue,V,u]),Q=function(pe){A(pe),ee(pe),B&&B(pe)},Re=String(u).toLowerCase(),me=function(pe){return Re?String(pe[be]).toLowerCase().includes(Re):!1};s.useEffect(function(){u&&ee(li(y,g))},[u]);var re=s.useState(function(){return new Map}),Ue=de(re,2),Ie=Ue[0],Oe=Ue[1];s.useEffect(function(){k&&Oe(new Map)},[k]);function Ce(ne){var pe=ne[g.value];if(!Ie.has(pe)){var Ae=h.get(pe),Te=(Ae.children||[]).length===0;if(Te)Ie.set(pe,!1);else{var We=Ae.children.filter(function(Je){return!Je.node.disabled&&!Je.node.disableCheckbox&&!M.includes(Je.node[g.value])}),et=We.length;Ie.set(pe,et>k)}}return Ie.get(pe)}var te=rr(function(ne){var pe=ne[g.value];return M.includes(pe)||k===null?!1:k<=0?!0:K&&k?Ce(ne):!1}),W=function ne(pe){var Ae=ni(pe),Te;try{for(Ae.s();!(Te=Ae.n()).done;){var We=Te.value;if(!(We.disabled||We.selectable===!1)){if(u){if(me(We))return We}else return We;if(We[g.children]){var et=ne(We[g.children]);if(et)return et}}}}catch(Je){Ae.e(Je)}finally{Ae.f()}return null},I=s.useState(null),He=de(I,2),Be=He[0],qe=He[1],De=Ge[Be];s.useEffect(function(){if(l){var ne=null,pe=function(){var Te=W(Se);return Te?Te[g.value]:null};!c&&M.length&&!u?ne=M[0]:ne=pe(),qe(ne)}},[l,u]),s.useImperativeHandle(o,function(){var ne;return{scrollTo:(ne=se.current)===null||ne===void 0?void 0:ne.scrollTo,onKeyDown:function(Ae){var Te,We=Ae.which;switch(We){case G.UP:case G.DOWN:case G.LEFT:case G.RIGHT:(Te=se.current)===null||Te===void 0||Te.onKeyDown(Ae);break;case G.ENTER:{if(De){var et=te(De.node),Je=De?.node||{},lt=Je.selectable,ot=Je.value,mt=Je.disabled;lt!==!1&&!mt&&!et&&j(null,{node:{key:Be},selected:!M.includes(ot)})}break}case G.ESC:r(!1)}},onKeyUp:function(){}}});var xt=mn(function(){return!u},[u,V||F],function(ne,pe){var Ae=de(ne,1),Te=Ae[0],We=de(pe,2),et=We[0],Je=We[1];return Te!==et&&!!(et||Je)}),Pe=xt?Le:null;if(Se.length===0)return s.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:xe},i);var Ye={fieldNames:g};return Me&&(Ye.loadedKeys=Me),ke&&(Ye.expandedKeys=ke),s.createElement("div",{onMouseDown:xe},De&&l&&s.createElement("span",{style:Ti,"aria-live":"assertive"},De.node.value),s.createElement(ja.Provider,{value:{nodeDisabled:te}},s.createElement(Tn,Ze({ref:se,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:Se,height:m,itemHeight:f,itemScrollOffset:p,virtual:v!==!1&&N!==!1,multiple:c,icon:Z,showIcon:z,switcherIcon:ae,showLine:X,loadData:Pe,motion:he,activeKey:Be,checkable:R,checkStrictly:!0,checkedKeys:Ne,selectedKeys:R?[]:M,defaultExpandAll:O,titleRender:x},Ye,{onActiveChange:qe,onSelect:j,onCheck:j,onExpand:Q,onLoad:fe,filterTreeNode:me,expandAction:S,onScroll:w}))))},Ri=s.forwardRef(Mi),Mn="SHOW_ALL",Rn="SHOW_PARENT",cn="SHOW_CHILD";function la(e,n,o,t){var a=new Set(e);return n===cn?e.filter(function(c){var u=o[c];return!u||!u.children||!u.children.some(function(r){var l=r.node;return a.has(l[t.value])})||!u.children.every(function(r){var l=r.node;return wn(l)||a.has(l[t.value])})}):n===Rn?e.filter(function(c){var u=o[c],r=u?u.parent:null;return!r||wn(r.node)||!a.has(r.key)}):e}var Pi=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function _i(e){return!e||Ot(e)!=="object"}var Li=s.forwardRef(function(e,n){var o=e.id,t=e.prefixCls,a=t===void 0?"rc-tree-select":t,c=e.value,u=e.defaultValue,r=e.onChange,l=e.onSelect,i=e.onDeselect,d=e.searchValue,v=e.inputValue,m=e.onSearch,f=e.autoClearSearchValue,p=f===void 0?!0:f,y=e.filterTreeNode,g=e.treeNodeFilterProp,b=g===void 0?"value":g,N=e.showCheckedStrategy,S=e.treeNodeLabelProp,x=e.multiple,w=e.treeCheckable,k=e.treeCheckStrictly,K=e.labelInValue,h=e.maxCount,D=e.fieldNames,R=e.treeDataSimpleMode,M=e.treeData,L=e.children,V=e.loadData,O=e.treeLoadedKeys,P=e.onTreeLoad,B=e.treeDefaultExpandAll,Z=e.treeExpandedKeys,z=e.treeDefaultExpandedKeys,ae=e.onTreeExpand,X=e.treeExpandAction,be=e.virtual,Le=e.listHeight,Me=Le===void 0?200:Le,he=e.listItemHeight,fe=he===void 0?20:he,Ge=e.listItemScrollOffset,se=Ge===void 0?0:Ge,Se=e.onDropdownVisibleChange,Ne=e.dropdownMatchSelectWidth,xe=Ne===void 0?!0:Ne,j=e.treeLine,T=e.treeIcon,$=e.showTreeIcon,F=e.switcherIcon,A=e.treeMotion,J=e.treeTitleRender,ce=e.onPopupScroll,ue=Ct(e,Pi),ee=Oa(o),ke=w&&!k,Q=w||k,Re=k||K,me=Q||x,re=qt(u,{value:c}),Ue=de(re,2),Ie=Ue[0],Oe=Ue[1],Ce=s.useMemo(function(){return w?N||cn:Mn},[N,w]),te=s.useMemo(function(){return ii(D)},[JSON.stringify(D)]),W=qt("",{value:d!==void 0?d:v,postState:function(oe){return oe||""}}),I=de(W,2),He=I[0],Be=I[1],qe=function(oe){Be(oe),m?.(oe)},De=vi(M,L,R),xt=si(De,te),Pe=xt.keyEntities,Ye=xt.valueEntities,ne=s.useCallback(function(ge){var oe=[],ie=[];return ge.forEach(function(je){Ye.has(je)?ie.push(je):oe.push(je)}),{missingRawValues:oe,existRawValues:ie}},[Ye]),pe=di(De,He,{fieldNames:te,treeNodeFilterProp:b,filterTreeNode:y}),Ae=s.useCallback(function(ge){if(ge){if(S)return ge[S];for(var oe=te._title,ie=0;ie<oe.length;ie+=1){var je=ge[oe[ie]];if(je!==void 0)return je}}},[te,S]),Te=s.useCallback(function(ge){var oe=oi(ge);return oe.map(function(ie){return _i(ie)?{value:ie}:ie})},[]),We=s.useCallback(function(ge){var oe=Te(ge);return oe.map(function(ie){var je=ie.label,gt=ie.value,$e=ie.halfChecked,Ve,Fe=Ye.get(gt);if(Fe){var st;je=J?J(Fe.node):(st=je)!==null&&st!==void 0?st:Ae(Fe.node),Ve=Fe.node.disabled}else if(je===void 0){var wt=Te(Ie).find(function(Lt){return Lt.value===gt});je=wt.label}return{label:je,value:gt,halfChecked:$e,disabled:Ve}})},[Ye,Ae,Te,Ie]),et=s.useMemo(function(){return Te(Ie===null?[]:Ie)},[Te,Ie]),Je=s.useMemo(function(){var ge=[],oe=[];return et.forEach(function(ie){ie.halfChecked?oe.push(ie):ge.push(ie)}),[ge,oe]},[et]),lt=de(Je,2),ot=lt[0],mt=lt[1],ze=s.useMemo(function(){return ot.map(function(ge){return ge.value})},[ot]),Tt=ri(ot,mt,ke,Pe),bt=de(Tt,2),_=bt[0],q=bt[1],H=s.useMemo(function(){var ge=la(_,Ce,Pe,te),oe=ge.map(function($e){var Ve,Fe;return(Ve=(Fe=Pe[$e])===null||Fe===void 0||(Fe=Fe.node)===null||Fe===void 0?void 0:Fe[te.value])!==null&&Ve!==void 0?Ve:$e}),ie=oe.map(function($e){var Ve=ot.find(function(st){return st.value===$e}),Fe=K?Ve?.label:J?.(Ve);return{value:$e,label:Fe}}),je=We(ie),gt=je[0];return!me&&gt&&qn(gt.value)&&qn(gt.label)?[]:je.map(function($e){var Ve;return Y(Y({},$e),{},{label:(Ve=$e.label)!==null&&Ve!==void 0?Ve:$e.value})})},[te,me,_,ot,We,Ce,Pe]),U=ai(H),ye=de(U,1),Ee=ye[0],ct=s.useMemo(function(){return me&&(Ce==="SHOW_CHILD"||k||!w)?h:null},[h,me,k,Ce,w]),at=Xn(function(ge,oe,ie){var je=la(ge,Ce,Pe,te);if(!(ct&&je.length>ct)){var gt=We(ge);if(Oe(gt),p&&Be(""),r){var $e=ge;ke&&($e=je.map(function(yt){var St=Ye.get(yt);return St?St.node[te.value]:yt}));var Ve=oe||{triggerValue:void 0,selected:void 0},Fe=Ve.triggerValue,st=Ve.selected,wt=$e;if(k){var Lt=mt.filter(function(yt){return!$e.includes(yt.value)});wt=[].concat(_e(wt),_e(Lt))}var Mt=We(wt),kt={preValue:ot,triggerValue:Fe},Dt=!0;(k||ie==="selection"&&!st)&&(Dt=!1),ui(kt,Fe,ge,De,Dt,te),Q?kt.checked=st:kt.selected=st;var At=Re?Mt:Mt.map(function(yt){return yt.value});r(me?At:At[0],Re?null:Mt.map(function(yt){return yt.label}),kt)}}}),ut=s.useCallback(function(ge,oe){var ie,je=oe.selected,gt=oe.source,$e=Pe[ge],Ve=$e?.node,Fe=(ie=Ve?.[te.value])!==null&&ie!==void 0?ie:ge;if(!me)at([Fe],{selected:!0,triggerValue:Fe},"option");else{var st=je?[].concat(_e(ze),[Fe]):_.filter(function(St){return St!==Fe});if(ke){var wt=ne(st),Lt=wt.missingRawValues,Mt=wt.existRawValues,kt=Mt.map(function(St){return Ye.get(St).key}),Dt;if(je){var At=Gt(kt,!0,Pe);Dt=At.checkedKeys}else{var yt=Gt(kt,{halfCheckedKeys:q},Pe);Dt=yt.checkedKeys}st=[].concat(_e(Lt),_e(Dt.map(function(St){return Pe[St].node[te.value]})))}at(st,{selected:je,triggerValue:Fe},gt||"option")}je||!me?l?.(Fe,En(Ve)):i?.(Fe,En(Ve))},[ne,Ye,Pe,te,me,ze,at,ke,l,i,_,q,h]),Xe=s.useCallback(function(ge){if(Se){var oe={};Object.defineProperty(oe,"documentClickClose",{get:function(){return ht(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),Se(ge,oe)}},[Se]),pt=Xn(function(ge,oe){var ie=ge.map(function(je){return je.value});if(oe.type==="clear"){at(ie,{},"selection");return}oe.values.length&&ut(oe.values[0].value,{selected:!1,source:"selection"})}),Nt=s.useMemo(function(){return{virtual:be,dropdownMatchSelectWidth:xe,listHeight:Me,listItemHeight:fe,listItemScrollOffset:se,treeData:pe,fieldNames:te,onSelect:ut,treeExpandAction:X,treeTitleRender:J,onPopupScroll:ce,leftMaxCount:h===void 0?null:h-Ee.length,leafCountOnly:Ce==="SHOW_CHILD"&&!k&&!!w,valueEntities:Ye}},[be,xe,Me,fe,se,pe,te,ut,X,J,ce,h,Ee.length,Ce,k,w,Ye]),_t=s.useMemo(function(){return{checkable:Q,loadData:V,treeLoadedKeys:O,onTreeLoad:P,checkedKeys:_,halfCheckedKeys:q,treeDefaultExpandAll:B,treeExpandedKeys:Z,treeDefaultExpandedKeys:z,onTreeExpand:ae,treeIcon:T,treeMotion:A,showTreeIcon:$,switcherIcon:F,treeLine:j,treeNodeFilterProp:b,keyEntities:Pe}},[Q,V,O,P,_,q,B,Z,z,ae,T,A,$,F,j,b,Pe]);return s.createElement(Va.Provider,{value:Nt},s.createElement(Aa.Provider,{value:_t},s.createElement(Da,Ze({ref:n},ue,{id:ee,prefixCls:a,mode:me?"multiple":void 0,displayValues:Ee,onDisplayValuesChange:pt,searchValue:He,onSearch:qe,OptionList:Ri,emptyOptions:!De.length,onDropdownVisibleChange:Xe,dropdownMatchSelectWidth:xe}))))}),Qt=Li;Qt.TreeNode=Kn;Qt.SHOW_ALL=Mn;Qt.SHOW_PARENT=Rn;Qt.SHOW_CHILD=cn;const Ai=e=>{const{componentCls:n,treePrefixCls:o,colorBgElevated:t}=e,a=`.${o}`;return[{[`${n}-dropdown`]:[{padding:`${_n(e.paddingXS)} ${_n(e.calc(e.paddingXS).div(2).equal())}`},oo(o,sa(e,{colorBgContainer:t}),!1),{[a]:{borderRadius:0,[`${a}-list-holder-inner`]:{alignItems:"stretch",[`${a}-treenode`]:{[`${a}-node-content-wrapper`]:{flex:"auto"}}}}},Gr(`${o}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${a}-switcher${a}-switcher_close`]:{[`${a}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function ji(e,n,o){return or("TreeSelect",t=>{const a=sa(t,{treePrefixCls:n});return Ai(a)},ro)(e,o)}var $i=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Vi=(e,n)=>{var o,t,a,c,u;const{prefixCls:r,size:l,disabled:i,bordered:d=!0,style:v,className:m,rootClassName:f,treeCheckable:p,multiple:y,listHeight:g=256,listItemHeight:b,placement:N,notFoundContent:S,switcherIcon:x,treeLine:w,getPopupContainer:k,popupClassName:K,dropdownClassName:h,treeIcon:D=!1,transitionName:R,choiceTransitionName:M="",status:L,treeExpandAction:V,builtinPlacements:O,dropdownMatchSelectWidth:P,popupMatchSelectWidth:B,allowClear:Z,variant:z,dropdownStyle:ae,dropdownRender:X,popupRender:be,onDropdownVisibleChange:Le,onOpenChange:Me,tagRender:he,maxCount:fe,showCheckedStrategy:Ge,treeCheckStrictly:se,styles:Se,classNames:Ne}=e,xe=$i(e,["prefixCls","size","disabled","bordered","style","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly","styles","classNames"]),{getPopupContainer:j,getPrefixCls:T,renderEmpty:$,direction:F,virtual:A,popupMatchSelectWidth:J,popupOverflow:ce}=s.useContext(ir),{styles:ue,classNames:ee,switcherIcon:ke}=lr("treeSelect"),[,Q]=sr(),Re=b??Q?.controlHeightSM+Q?.paddingXXS,me=T(),re=T("select",r),Ue=T("select-tree",r),Ie=T("tree-select",r),{compactSize:Oe,compactItemClassnames:Ce}=cr(re,F),te=Ln(re),W=Ln(Ie),[I,He,Be]=Xr(re,te),[qe]=ji(Ie,Ue,W),[De,xt]=ur("treeSelect",z,d),Pe=An(((o=Ne?.popup)===null||o===void 0?void 0:o.root)||((t=ee?.popup)===null||t===void 0?void 0:t.root)||K||h,`${Ie}-dropdown`,{[`${Ie}-dropdown-rtl`]:F==="rtl"},f,ee.root,Ne?.root,Be,te,W,He),Ye=((a=Se?.popup)===null||a===void 0?void 0:a.root)||((c=ue?.popup)===null||c===void 0?void 0:c.root)||ae,ne=Jr(be||X),pe=Me||Le,Ae=!!(p||y),Te=s.useMemo(()=>{if(!(fe&&(Ge==="SHOW_ALL"&&!se||Ge==="SHOW_PARENT")))return fe},[fe,Ge,se]),We=Qr(e.suffixIcon,e.showArrow),et=(u=B??P)!==null&&u!==void 0?u:J,{status:Je,hasFeedback:lt,isFormItemInput:ot,feedbackIcon:mt}=s.useContext(dr),ze=mr(Je,L),{suffixIcon:Tt,removeIcon:bt,clearIcon:_}=Zr(Object.assign(Object.assign({},xe),{multiple:Ae,showSuffixIcon:We,hasFeedback:lt,feedbackIcon:mt,prefixCls:re,componentName:"TreeSelect"})),q=Z===!0?{clearIcon:_}:Z;let H;S!==void 0?H=S:H=$?.("Select")||s.createElement(eo,{componentName:"Select"});const U=on(xe,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon","style"]),ye=s.useMemo(()=>N!==void 0?N:F==="rtl"?"bottomRight":"bottomLeft",[N,F]),Ee=fr(ge=>{var oe;return(oe=l??Oe)!==null&&oe!==void 0?oe:ge}),ct=s.useContext(vr),at=i??ct,ut=An(!r&&Ie,{[`${re}-lg`]:Ee==="large",[`${re}-sm`]:Ee==="small",[`${re}-rtl`]:F==="rtl",[`${re}-${De}`]:xt,[`${re}-in-form-item`]:ot},gr(re,ze,lt),Ce,m,f,ee.root,Ne?.root,Be,te,W,He),Xe=x??ke,pt=ge=>s.createElement(io,{prefixCls:Ue,switcherIcon:Xe,treeNodeProps:ge,showLine:w}),[Nt]=hr("SelectLike",Ye?.zIndex),_t=s.createElement(Qt,Object.assign({virtual:A,disabled:at},U,{dropdownMatchSelectWidth:et,builtinPlacements:to(O,ce),ref:n,prefixCls:re,className:ut,style:Object.assign(Object.assign({},Se?.root),v),listHeight:g,listItemHeight:Re,treeCheckable:p&&s.createElement("span",{className:`${re}-tree-checkbox-inner`}),treeLine:!!w,suffixIcon:Tt,multiple:Ae,placement:ye,removeIcon:bt,allowClear:q,switcherIcon:pt,showTreeIcon:D,notFoundContent:H,getPopupContainer:k||j,treeMotion:null,dropdownClassName:Pe,dropdownStyle:Object.assign(Object.assign({},Ye),{zIndex:Nt}),dropdownRender:ne,onDropdownVisibleChange:pe,choiceTransitionName:jn(me,"",M),transitionName:jn(me,"slide-up",R),treeExpandAction:V,tagRender:Ae?he:void 0,maxCount:Te,showCheckedStrategy:Ge,treeCheckStrictly:se}));return I(qe(_t))},Fi=s.forwardRef(Vi),Pt=Fi,Hi=lo(Pt,"dropdownAlign",e=>on(e,["visible"]));Pt.TreeNode=Kn;Pt.SHOW_ALL=Mn;Pt.SHOW_PARENT=Rn;Pt.SHOW_CHILD=cn;Pt._InternalPanelDoNotUseOrYouWillBeFired=Hi;var Wi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v224h704V96c0-17.7-14.3-32-32-32zM288 232c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zM160 928c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V704H160v224zm128-136c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM160 640h704V384H160v256zm128-168c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"}}]},name:"database",theme:"filled"},Gi=function(n,o){return s.createElement(ca,Ze({},n,{ref:o,icon:Wi}))},Bi=s.forwardRef(Gi),zi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},Ui=function(n,o){return s.createElement(ca,Ze({},n,{ref:o,icon:zi}))},Yi=s.forwardRef(Ui);function qi(){const{notification:e}=ua.useApp(),{currentUser:n}=pr(),[o,t]=s.useState(!1),[a,c]=s.useState({gameId:"",gameName:""}),u=Fr({mutationKey:["oldState",a.gameId],mutationFn:async({prevGameId:l,payload:i})=>{const v=(await yr.run({action:Cr.LOAD_GAME,gameId:l})).data;return await da.run({gameId:l,gameName:v?.gameName??"",playerId:n.id,action:fa.FORCE_STATE_PROPERTY,state:i})},onSuccess:async()=>{e.success({message:"Redirect successfully triggered"})},onError:l=>{console.error(l),e.error({message:"Failed to load previous game to continue the redirect",description:JSON.stringify(l.message)})}}),r=async(l,i,d)=>{if(o){e.error({message:"Redirect has failed to trigger"});return}c({gameId:i,gameName:d}),await u.mutateAsync({prevGameId:l,gameName:d,payload:{redirect:{redirectAt:Date.now(),gameId:i,gameName:d}}}),t(!0)};return{isSettingRedirect:u.isPending,startRedirect:r,wasRedirectSuccessful:u.isSuccess}}function Xi({options:e=[],disabled:n,onChangeOptions:o,selectedOptions:t}){return!e||e.length===0?C.jsx("div",{className:"create-game-modal-options create-game-modal-options__no-options",children:C.jsx(Ft.Text,{children:C.jsx(rt,{pt:"Este jogo não possui customizações",en:"This game does not support customizations"})})}):C.jsxs("div",{className:"create-game-modal-options",children:[C.jsx(Ft.Title,{level:5,className:"create-game-modal-options__title",children:C.jsx(rt,{pt:"Opções:",en:"Options:"})}),C.jsx("div",{className:"create-game-modal-options__list",children:(e??[]).map(a=>C.jsxs(Ft.Paragraph,{className:pn("create-game-modal-options__option",a.disabled&&"create-game-modal-options__option--disabled"),children:[C.jsxs("div",{className:"create-game-modal-options__label",children:[C.jsx("span",{children:a.label}),a.kind!=="switch"&&!!a.description&&C.jsx("div",{className:"create-game-modal-options__option-description",children:a.description})]}),a.kind==="switch"&&C.jsx(Ji,{option:a,disabled:n,onChangeOptions:o,selectedOptions:t}),a.kind==="radio"&&C.jsx(Qi,{option:a,disabled:n,onChangeOptions:o,selectedOptions:t}),a.kind==="checkbox"&&C.jsx(Zi,{option:a,disabled:n,onChangeOptions:o,selectedOptions:t}),a.kind==="switch"&&!!a.description&&C.jsx("span",{className:"create-game-modal-options__option-description",children:a.description})]},`option-${a.label}`))})]})}function Ji({option:e,disabled:n,onChangeOptions:o,selectedOptions:t}){return C.jsxs(C.Fragment,{children:[C.jsx("span",{className:pn("create-game-modal-options__off",!t[e.key]&&"create-game-modal-options--selected"),children:e?.values[0].label??""}),C.jsx(br,{disabled:n||e.disabled,onChange:a=>o(e.key,a)}),C.jsx("span",{className:pn("create-game-modal-options__on",t[e.key]&&"create-game-modal-options--selected"),children:e?.values[1].label??""})]})}function Qi({option:e,disabled:n,onChangeOptions:o}){return C.jsx(Fn.Group,{disabled:n||e.disabled,onChange:t=>o(e.key,t.target.value),defaultValue:e.values[0].value,className:"create-game-modal-options__selections",children:e.values.map(t=>C.jsx(Fn,{value:t.value,children:t.label},String(t.value)))})}function Zi({option:e,disabled:n,onChangeOptions:o}){return C.jsx(Br.Group,{disabled:n||e.disabled,onChange:t=>o(e.key,t),className:"create-game-modal-options__selections",options:e.values})}const el=(e,n)=>{const o=Date.now(),t=o-1e3*60*60*24;return{...Object.entries(e??{}).reduce((c,[u,r])=>(r>t&&(c[u]=r),c),{}),[n]:o}},tl=e=>{const n=Object.entries(e).map(([c,u])=>({gameId:c,createdAt:u}));if(n.length<2)return null;const o=Xt.orderBy(n,"createdAt","desc"),t=2*60*60*1e3,a=Date.now();return o[1].createdAt-a>t?null:o[1].gameId},nl=e=>e?.reduce((n,o)=>(o.kind==="switch"&&(n[o.key]=!1),o.kind==="radio"&&(n[o.key]=o.values[0].value),o.kind==="checkbox"&&(n[o.key]=[]),n),{})??{};function al({gameInfo:e}){const[n,o]=s.useState(!1);return C.jsxs(C.Fragment,{children:[C.jsx(yn,{type:"primary",onClick:()=>o(!0),block:!0,disabled:!e.available,children:C.jsx(rt,{pt:"Criar",en:"Create"})}),n&&C.jsx(rl,{gameInfo:e,open:n,setOpen:o})]})}function rl({gameInfo:e,open:n,setOpen:o}){const{message:t,notification:a}=ua.useApp(),c=Sr(),{pathname:u}=xr(),[r,l]=zr(),{language:i,translate:d}=ln(),{setLoader:v}=wr(),[m,f]=s.useState(!1),[p,y]=s.useState(null),[,g]=zt("userId"),[,b]=zt("username"),[,N]=zt("userAvatarId"),[S,x]=s.useState(nl(e.options)),[w,k]=Er("latestGameIds"),K=tl(w),{startRedirect:h,isSettingRedirect:D,wasRedirectSuccessful:R}=qi();s.useEffect(()=>{r.value&&p&&t.info(`Copied to clipboard: ${r.value}`)},[r,p,t]);const M=(O,P)=>{x(B=>({...B,[O]:P}))},L=async()=>{try{v("create",!0),f(!0);const O=await da.run({action:fa.CREATE_GAME,gameName:e.gameName,language:i,options:S,version:e.version});if(O.data.gameId){y(O.data.gameId),g(null),b(""),N(""),k(el(w,O.data.gameId));const P=window.location.href.split(u)[0];l(`${P}/${O.data.gameId}`)}}catch(O){a.error({message:d("Aplicativo encontrou um erro ao tentar criar o jogo","The application found an error while trying to create a game",i),description:JSON.stringify(O.message),placement:"bottomLeft"}),console.error(O),o(!1)}finally{f(!1),v("create",!1)}},V=async()=>{p?c(`/${p}`):t.info(d("Péra! O jogo ainda não foi inicializado.","Wait! The game has not been created"))};return C.jsxs(Ur,{title:`${d("Criando novo jogo","Creating new game")}: ${e.title[i]}`,open:n,onCancel:()=>o(!1),onOk:V,okButtonProps:{disabled:!p||D},maskClosable:!1,children:[C.jsx(pa,{title:e.title,gameName:e.gameName,className:"round-corners",width:256,static:!0}),!p&&C.jsxs(dn,{children:[C.jsx(rt,{pt:"Você está criando um jogo em:",en:"You are creating a game in:"})," ",C.jsx(va,{})]}),C.jsx(Xi,{options:e.options,disabled:m||!!p,onChangeOptions:M,selectedOptions:S}),C.jsx(nn,{}),m&&C.jsxs(C.Fragment,{children:[C.jsx(dn,{children:C.jsx(rt,{pt:"O jogo está sendo criado...",en:"The game session is being created"})}),C.jsx(Hr,{message:d("Gerando...","Generating..."),margin:!0})]}),e.version.startsWith("alpha")&&C.jsx(tn,{type:"warning",showIcon:!0,message:C.jsx(rt,{pt:"Este jogo está em alpha, não o jogue",en:"This game is still in alpha and shouldn't be played"})}),e.version.startsWith("beta")&&C.jsx(tn,{type:"warning",showIcon:!0,message:C.jsx(rt,{pt:"Este jogo está em beta, prossiga com cuidado",en:"This game is in beta and bugs might be everywhere"})}),p?C.jsxs("div",{children:[C.jsxs(Nr,{className:"center",children:[C.jsx(rt,{pt:"Jogo inicializado",en:"Game Initialized"}),": ",p]}),C.jsxs(dn,{children:[K&&!R&&C.jsx(tn,{type:"info",showIcon:!0,message:C.jsxs(C.Fragment,{children:[C.jsx(rt,{pt:C.jsxs(C.Fragment,{children:["Você quer redirecionar jogadores em ",K," para essa nova partida?"]}),en:C.jsxs(C.Fragment,{children:["Redirect players in ",K," to this new play?"]})}),C.jsx(yn,{size:"large",onClick:()=>{h(K??"",p??"",e.gameName)},disabled:!p||!K,loading:D,children:C.jsx(rt,{pt:"Redirecione-os",en:"Redirect them"})})]})}),R&&C.jsx(tn,{type:"info",showIcon:!0,message:C.jsx(rt,{pt:C.jsxs(C.Fragment,{children:["Jogadores em ",K," foram convidados para o jogo ",p]}),en:C.jsxs(C.Fragment,{children:["Players in ",K," have been invited to ",p]})})})]})]}):C.jsx(kr,{align:"center",children:C.jsx(yn,{type:"primary",size:"large",disabled:m,onClick:L,children:C.jsx(rt,{pt:"Criar Jogo",en:"Create Game"})})})]})}const ol=e=>{if(e.includes("dev"))return"#6cb3f6";if(e.includes("alpha"))return"#F97659";if(e.includes("beta"))return"#F9D859";const n=Number(e.split(".")[0]);return Number.isNaN(n)?"#96A0A3":n===0?"#F9D859":n===1?"#72D984":n===2||n>=3?"#7CBD51":"#96A0A3"};function il({game:e,isAdmin:n=!0}){const{language:o,translate:t}=ln(),a=ga(e);return C.jsxs(Vt,{className:"game-card",cover:C.jsx(qr.Ribbon,{text:e.version,color:ol(e.version),children:C.jsxs("div",{className:"game-card__image",children:[C.jsx(pa,{gameName:e.gameName,width:256,title:e.title}),C.jsxs("span",{className:"game-card__title",title:e.title[o],children:[C.jsx("span",{className:"game-card__title-text",children:e.title[o]})," ",C.jsx("span",{children:C.jsx(Dr,{title:t("Código do jogo começará com","The game id will start with"),children:C.jsx(Yr,{children:e.gameCode})})})]})]})}),children:[C.jsx("div",{className:"game-card__contents",children:C.jsxs(Cn,{direction:"vertical",className:"full-width",children:[C.jsx(Vt.Meta,{description:`${t("Inspirado por","Inspired by")} ${e.basedOn.split("").reverse().join("")}`}),C.jsx(Vt.Meta,{className:"game-card__description",description:e.summary[o]}),e.rules?.[o]?.length>1&&C.jsx($r,{gameInfo:e,buttonProps:{size:"small",className:"game-card__margin-bottom"}}),C.jsx(Vr,{wrap:!0,size:[1,6],style:{display:"flex"},gameCode:e.gameCode,tags:e.tags})]})}),C.jsxs("div",{className:"game-card__actions",children:[e.duration&&C.jsx(Vt.Meta,{description:C.jsxs(C.Fragment,{children:[C.jsx(Ar,{})," ",a.min," min - ",a.max," min (Avg: ",a.ideal," min)"]})}),C.jsx(nn,{className:"game-card__divider"}),C.jsxs(Cn,{direction:"vertical",children:[C.jsx(Vt.Meta,{description:t(`Para ${e.playerCount.min}-${e.playerCount.max} jogadores`,`For ${e.playerCount.min}-${e.playerCount.max} players`)}),C.jsx(Vt.Meta,{className:"game-card__player-count",description:t(`Melhor com ${e.playerCount.best||"?"} jogadores`,`Best wih ${e.playerCount.best||"?"} players`)}),C.jsx(Vt.Meta,{className:"game-card__player-count game-card__margin-bottom",description:t(`Recomendado jogar com ${$n(e.playerCount.recommended)}`,`Recommended with ${$n(e.playerCount.recommended)}`)})]}),n&&C.jsx("div",{style:{marginTop:"1rem"},children:["dev","beta","stable"].includes(e.release)&&C.jsx(al,{gameInfo:e})})]})]},e.gameName)}function ll(){Wr();const[e,n]=s.useState(!1);return zt("usingFirestoreEmulator"),zt("usingFunctionsEmulator"),Kr(()=>{}),null}const{SHOW_PARENT:sl}=Pt;function cl({availabilityCount:e,setTagFilters:n,setNumberFilters:o}){const t=(u,r)=>{o(l=>({...l,[u]:r}))},a=u=>{t("recommendedWith",+(u==="recommended")),t("bestWith",+(u==="best"))},c=[{label:"Playing with",value:""},{label:"Recommended with",value:"recommended"},{label:"Best with",value:"best"}];return C.jsxs(Cn,{className:"hub-filters",wrap:!0,size:"middle",children:[C.jsxs("span",{children:[C.jsx(Yi,{})," (",e,")"]}),C.jsx(no,{defaultValue:"",style:{minWidth:"20ch"},size:"small",onChange:a,options:c}),C.jsxs("div",{className:"hub-filters__entry",children:[C.jsx("label",{htmlFor:"players-input",children:"Players"}),C.jsx(Hn,{min:2,max:12,size:"small",className:"hub-filters__input-number",onChange:u=>t("players",u??0)})]}),C.jsxs("div",{className:"hub-filters__entry",children:[C.jsx("label",{htmlFor:"duration",children:"Duration"}),C.jsx(Hn,{min:15,step:15,size:"small",className:"hub-filters__input-number",onChange:u=>t("duration",u??0)})]}),C.jsxs("div",{className:"hub-filters__entry",children:[C.jsx("label",{htmlFor:"tags",children:"Tags"}),C.jsx(ul,{value:void 0,onTreeSelectChange:n})]})]})}function ul({value:e,onTreeSelectChange:n}){const{dualTranslate:o}=ln(),t=c=>{n(c)},a=s.useMemo(()=>Object.values(Object.keys(Vn).reduce((c,u)=>{const r=Vn[u];return c[r.group]===void 0&&(c[r.group]={title:Xt.capitalize(r.group),value:r.group,children:[]}),c[r.group].children.push({title:Xt.capitalize(o(r.label)),value:`${r.group}${ha}${u}`}),c},{})),[o]);return C.jsx(Pt,{treeData:a,value:e,onChange:t,treeCheckable:!0,showCheckedStrategy:sl,placeholder:"Select Game Tags",size:"small",style:{width:"100%",minWidth:"400px"}})}Xt.orderBy(Object.entries(Object.values(ma).reduce((e,n)=>(e[n.gameCode]===void 0&&(e[n.gameCode]=0),e[n.gameCode]++,e),{})).map(([e,n])=>`${e}: ${n}`));function $l(){Ir("Hub - Tarde Divertida");const{language:e}=ln(),[n,o]=s.useState([]),[t,a]=s.useState({}),c=s.useMemo(()=>Object.values(ma).filter(i=>{const d=[];if(t.players&&(d.push(i.playerCount.min<=t.players&&i.playerCount.max>=t.players),t.bestWith&&d.push(t.players===i.playerCount.best),t.recommendedWith&&d.push(i.playerCount.recommended.includes(t.players))),n.forEach(v=>{const[m,f]=v.split(ha);(m&&f&&Or?.[m]==="exclusive"||f)&&d.push(i.tags.includes(f))}),t.duration){const v=ga(i,t.players??0);t.players?d.push(t.duration>=v.customTime-10&&t.duration<=v.customTime+10):d.push(t.duration>=v.min&&t.duration<=v.max)}return d.every(Boolean)}),[n,t]),{availableGames:u,comingSoonGames:r,devGames:l}=s.useMemo(()=>Xt.orderBy(c,[`title.[${e}]`],["asc"]).reduce((d,v)=>(["stable"].includes(v.release)?d.availableGames.push(v):["dev","beta"].includes(v.release)?d.devGames.push(v):d.comingSoonGames.push(v),d),{availableGames:[],devGames:[],comingSoonGames:[]}),[c,e]);return C.jsxs(Tr,{className:"dev-layout",children:[C.jsx(Lr,{title:C.jsxs(C.Fragment,{children:[C.jsx(Bi,{})," Hub"]}),subTitle:C.jsx(rt,{pt:"Selecione um jogo para começar",en:"Select a game to start"}),extra:[C.jsx(va,{},"language-switch"),C.jsx(jr,{danger:!0,ghost:!0,size:"small"},"logout-button")]}),C.jsx(ll,{}),C.jsx(cl,{setTagFilters:o,setNumberFilters:a,availabilityCount:u.length}),C.jsxs(Mr.Content,{className:"container",id:"main-container",children:[Rr,C.jsx(Ft.Title,{level:2,children:C.jsx(rt,{pt:"Disponíveis",en:"Available"})}),C.jsx(hn,{games:u}),C.jsx(nn,{}),C.jsxs(C.Fragment,{children:[C.jsx(Ft.Title,{level:2,children:C.jsx(rt,{pt:"Em Desenvolvimento",en:"Under Development"})}),C.jsx(hn,{games:l}),C.jsx(nn,{})]}),C.jsx(Ft.Title,{level:2,children:C.jsx(rt,{pt:"Em Breve",en:"Coming Soon"})}),C.jsx(hn,{games:r})]})]})}function hn({games:e}){return e.length===0?C.jsx(Ft.Text,{type:"secondary",children:C.jsx(rt,{pt:"Nenhum jogo encontrado nessa categoria",en:"No games found in this category"})}):C.jsx(Pr,{gutter:[8,16],children:e.map(n=>C.jsx(_r,{xs:24,sm:12,md:8,lg:8,xl:6,xxl:4,children:C.jsx(il,{game:n,isAdmin:["dev","beta","stable"].includes(n.release)})},n.gameName))})}export{$l as default};
