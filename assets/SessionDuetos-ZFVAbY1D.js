import{f as q,j as e,c as I,y as _,bZ as D,ar as H,r as R,T as n,s as w,bw as G,au as x,b_ as V,n as A,bt as T,B as W,aF as Y}from"./index-CoVhiA3v.js";import{u as Q,S as B,a as O,P as $,f as Z,c as J,d as K,e as X}from"./Session-BLcC9LVM.js";import{S as ee}from"./SocksIcon-ByBk--uz.js";import{S as U,P as L,a as z}from"./StepSwitcher-BSz7TEM5.js";import{I as E}from"./useDevFeatures-qx_y2BmL.js";import{R as re}from"./RoundAnnouncement-mF4MCcL0.js";import{C as se}from"./ClubberAvatar-BabcCyuY.js";import{C as te}from"./CostumeAvatar-DmKCniW4.js";import{S as ae}from"./SuperHeroAvatar-BCBw3nBq.js";import{C as ie}from"./Card-DB2GoAfq.js";import{C as oe}from"./CharacterCard-B3TtTu8O.js";import{E as ne}from"./EmojiCard-CJ-tsY65.js";import{G as ce}from"./GlyphCard-CYfSvIED.js";import{I as me}from"./ItemCard-B8husr-Z.js";import{S as le}from"./SuspectCard-_scA8QSt.js";/* empty css                             */import{I as de}from"./ImageBlurButtonContainer-Bg7daXTh.js";import{I as pe}from"./ImageCard-xYxKT3eI.js";import{u as ue}from"./useMock-BTwFqVDh.js";import{D as he}from"./DevButton-CUeM1Xdi.js";import{P}from"./PointsHighlight-Bum4t0C9.js";import{R as C}from"./RuleInstruction-DqDalqaM.js";import{P as xe}from"./WritingIcon-DmfMB9hA.js";import{P as N}from"./PlayerAvatar-BAjq-_YY.js";import{T as je}from"./TimedButton-7ArCBiW8.js";import{R as ge}from"./TrophyOutlined-pA7E403w.js";import{S as fe}from"./StepRankingWrapper-6XlucNmu.js";import{T as Ie}from"./TrophyIcon-BxM6sQbm.js";import"./RulesModal-Yq2yGmts.js";import{G as ve}from"./GameOverWrapper-CkIGi8cr.js";import{A as Se}from"./Achievements-BZ2Yelsq.js";import{T as Pe}from"./TitledContainer-DDrlzhl5.js";import{a as _e}from"./achievements-_vvMKcjs.js";import"./Game-D9--A4PH.js";import"./useMutation-B9bDIfY1.js";import"./speech-6pn-7Ny_.js";import"./index-0FNjHu8t.js";import"./index-Bus2BJL6.js";import"./Overflow-CFbDCDwq.js";import"./extends-CF3RwP-h.js";import"./PurePanel-ik55Syi5.js";import"./PlusOutlined-DYep9iO2.js";import"./useToggle-CCbyBjB-.js";import"./useId-CS1ROYIv.js";import"./index-DPzn5qsA.js";import"./DebugOnly-BoQDGkmJ.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-cxOg2Fuh.js";import"./index-BARFFdu0.js";import"./index-D17I2zOL.js";import"./SignIn-pT1NcQz2.js";import"./GoogleIcon-7HB7ZTDH.js";import"./AnimatedGearIcon-DLC_H9K9.js";import"./AnimatedClockIcon-DetUs0wW.js";import"./Loading-iGl9Brrk.js";import"./AnimatedLoaderIcon-BkUsxcUZ.js";import"./WaitingRoomIcon-t7hxqkQK.js";import"./LikeFilled-CbNV1ySr.js";import"./CustomAvatarWrapper-Cg-nive0.js";import"./Sprite-C8m4q67c.js";import"./WarningOutlined-CBB_M11J.js";import"./ImageBlurButton-S2dQfNCu.js";import"./StarIcon-JRzgzSMB.js";import"./MetricHighlight-CtZjqpce.js";import"./index-BffssVcp.js";import"./StarFilled-DW4hC0lN.js";import"./RankingBoard-UjbWT_Oo.js";import"./CaretUpOutlined-BFta34rs.js";import"./TheEndIcon-Ccc3n1fv.js";import"./index-BhmKfZcS.js";import"./progress-CdlkhE3t.js";import"./Medal-BP5y7HC4.js";const y={PAIRING:"PAIRING",RESULTS:"RESULTS"},Ce={SUBMIT_PAIRS:"SUBMIT_PAIRS"};function be(r){const{translate:s}=q(),t=Q({actionName:"submit-pairs",onSuccess:()=>r(2),onError:()=>r(0),successMessage:s("Pares submetidos com sucesso","Paris submitted successfully"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar enviar seus pares","Oops, the application found an error while trying to submit your pairs")});return i=>{t({action:Ce.SUBMIT_PAIRS,...i})}}function g({itemEntry:r,className:s,size:t,looseItem:i}){const{dualTranslate:c}=q(),a=t==="small"?.75:1;return r.type==="alien-item"?e.jsx(me,{itemId:r.value.id,width:75*a,className:s,title:c(r.value.name)}):r.type==="images"?e.jsx(de,{cardId:r.value,children:e.jsx(pe,{cardId:r.value,cardWidth:(i?1.5:1)*100*a,className:s,preview:!1})}):r.type==="words"?e.jsx(ie,{hideHeader:!0,className:s,size:t,children:r.value.text}):r.type==="suspects"?e.jsx("div",{className:s,children:e.jsx(le,{suspect:r.value,width:100*a,hideName:!0})}):r.type==="contenders"?e.jsx(oe,{character:r.value,size:120*a,className:s},r.value.id):r.type==="emojis"?e.jsx(ne,{emojiId:String(r.value),width:75*a,className:s}):r.type==="glyphs"?e.jsx(ce,{glyphId:r.value,width:75*a,className:s}):r.type==="clubbers"?e.jsx(se,{id:r.value,width:75*a,className:I("avatar-entry-background",s)}):r.type==="costumes"?e.jsx(te,{id:r.value,width:75*a,className:I("avatar-entry-background",s)}):r.type==="superHeroes"?e.jsx(ae,{id:r.value,width:75*a,className:I("avatar-entry-background",s)}):e.jsx("div",{className:s,children:r.type})}function b({index:r,firstItem:s,secondItem:t,placeholder:i,size:c}){return e.jsxs(_,{className:I("pairs-grid__pair",`pairs-grid__pair--${r}`),orientation:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:s?e.jsx(g,{itemEntry:s,size:c}):e.jsx(g,{itemEntry:i,className:"pairs-grid__empty-slot",size:c})}),e.jsx("div",{className:"pairs-grid__slot",children:t?e.jsx(g,{itemEntry:t,size:c}):e.jsx(g,{itemEntry:i,className:"pairs-grid__empty-slot",size:c})})]},`pair-${r}`)}function Re({pool:r,pairs:s,size:t}){const i=Math.floor(r.length/2);return e.jsx(_,{className:I("pairs-grid",`pairs-grid--made-${i}`),wrap:!0,children:Array.from({length:i}).map((c,a)=>{const u=a*2,l=s[u],o=s[u+1],h=r.find(v=>v.id===l),d=r.find(v=>v.id===o);return!h||!d?null:e.jsx(b,{index:a,firstItem:h,secondItem:d,placeholder:r[0],size:t},`${l}${o}`)})})}const ye=r=>{const s=D(r.map(t=>t.id));return r.length%2===0||s.pop(),s};function we({user:r,announcement:s,pool:t,onSubmitPairs:i}){const{isLoading:c}=H(),[a,u]=R.useState([]),l=Math.floor(t.length/2),o=R.useMemo(()=>a.map(m=>t.find(j=>j.id===m)),[a,t]),h=a.length===l*2&&a.every(Boolean);ue();const d=m=>{h||u(j=>{const p=[...j],f=p.findIndex(S=>typeof S!="string");return f!==-1?p[f]=m:p.push(m),p})},v=m=>{u(j=>{const p=[...j],f=p.findIndex(S=>S===m);return f!==-1&&(p[f]=null),p})};return e.jsxs(U,{fullWidth:!0,announcement:s,children:[e.jsx(B,{children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Agrupe os itens em ",l," pares"]}),en:e.jsxs(e.Fragment,{children:["Group the items into ",l," pairs"]})})}),c,e.jsx(C,{type:"rule",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!",e.jsx("br",{}),e.jsx("strong",{children:"Clique"})," em um item para adicioná-lo ao par.",e.jsx("br",{}),"Para remover, basta clicar no item novamente."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!",e.jsx("br",{}),e.jsx("strong",{children:"Click"})," on an item to add it to the pair.",e.jsx("br",{}),"To remove, just click on the item again."]})})}),t.length%2===1&&e.jsx(C,{type:"event",children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Um item ficará sobrando, você também ganha pontos por cada jogador que também deixou esse item sobrando!"}),en:e.jsx(e.Fragment,{children:"One item will be left out, you also get points for each player who also left this item out!"})})}),e.jsx(_,{className:I("pairs-grid",`pairs-grid--${l}`),wrap:!0,children:Array.from({length:l}).map((m,j)=>{const p=j*2,f=a[p],S=a[p+1],k=o[p],M=o[p+1],F=t[0].type==="alien-item"?{...t[0],value:{id:t[0].id,name:{pt:"?",en:"?"}}}:t[0];return e.jsxs(_,{className:I("pairs-grid__pair",`pairs-grid__pair--${j}`),orientation:"vertical",children:[e.jsx("div",{className:"pairs-grid__slot",children:f&&k?e.jsx(w,{onClick:()=>v(f),className:G("bounceIn"),children:e.jsx(g,{itemEntry:k})}):e.jsx(g,{itemEntry:F,className:"pairs-grid__empty-slot"})}),e.jsx("div",{className:"pairs-grid__slot",children:S&&M?e.jsx(w,{onClick:()=>v(S),className:G("bounceIn"),children:e.jsx(g,{itemEntry:M})}):e.jsx(g,{itemEntry:F,className:"pairs-grid__empty-slot"})})]},`pair-${j}`)})}),e.jsxs(x,{children:[e.jsx(he,{onClick:()=>u(ye(t)),children:"Mock Pairs"}),e.jsx(V,{size:"large",disabled:r.ready||!h,onClick:()=>i({pairs:a.map(m=>String(m))}),children:e.jsx(n,{pt:"Enviar Pares",en:"Submit Pairs"})})]}),e.jsx(_,{wrap:!0,className:I("options-grid",`options-grid--${t.length}`),children:t.map(m=>a.includes(m.id)?e.jsx(g,{itemEntry:m,className:"options-grid--selected"},m.id):e.jsx(w,{onClick:()=>d(m.id),children:e.jsx(g,{itemEntry:m,looseItem:!0})},m.id))})]})}function Ae({players:r,state:s,user:t}){const{step:i,setStep:c,goToNextStep:a}=O(),u=be(c),l=e.jsx(L,{icon:e.jsx(ee,{}),title:e.jsx(n,{pt:"Coloque os itens em pares",en:"Pair the items"}),currentRound:s?.round?.current,type:"overlay",children:e.jsx(E,{children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Faça pares com os itens e ganhe pontos por cada par igual a de outros jogadores."}),en:e.jsx(e.Fragment,{children:"Pair the items and get points for each pair you match with other players "})})})});return e.jsx($,{phase:s?.phase,allowedPhase:y.PAIRING,children:e.jsxs(z,{step:i,players:r,waitingRoom:{content:e.jsx(Re,{pool:s.pool,pairs:t?.pairs??[],size:"small"})},children:[e.jsx(re,{round:s.round,time:3,onPressButton:a}),e.jsx(we,{user:t,announcement:l,pool:s.pool,onSubmitPairs:u})]})})}function Te({announcement:r,pool:s,goToNextStep:t,gallery:i,leftOut:c,players:a}){const u=R.useMemo(()=>i.filter(o=>o.players.length>1),[i]),l=R.useMemo(()=>i.filter(o=>o.players.length===1),[i]);return e.jsxs(U,{fullWidth:!0,announcement:r,children:[e.jsx(B,{children:e.jsx(n,{pt:"Resultado",en:"Results"})}),e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Pares Vencedores",en:"Winnings Pairs"})}),u.length>0&&e.jsx(C,{type:"scoring",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(P,{children:"pontos"})," por cada jogador que fez o mesmo par que você!"]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(P,{children:"points"})," for each player who did the same pair than you!"]})})}),e.jsxs(x,{wrap:!0,children:[u.length===0&&e.jsx(C,{type:"event",children:e.jsx(n,{pt:"Ninguém deu match!",en:"Nobody matched anything!"})}),u.map((o,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:o.players.map(d=>e.jsx(N,{avatarId:a[d].avatarId,size:"small"},`${o.pairId}-${d}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:o.pair[0],secondItem:o.pair[1]})]},o.pairId))]}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Sobras Vencedoras",en:"Left Out Matches"})}),e.jsx(C,{type:"scoring",children:e.jsx(n,{pt:e.jsxs(e.Fragment,{children:["Para o item que ficou sobrando, você também ganha ",e.jsx(P,{children:"pontos"})," ","por cada jogador que deixou de fora o mesmo item que você!"]}),en:e.jsxs(e.Fragment,{children:["For the item that was left over, you also get ",e.jsx(P,{children:"points"})," for each player who left out the same item as you!"]})})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:c.map((o,h)=>e.jsxs(_,{className:"results",orientation:"vertical",children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:o.players.map(d=>e.jsx(N,{avatarId:a[d].avatarId,size:"small"},`${o.id}-${d}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:o.item})]},o.id))})]}),e.jsx(x,{children:e.jsx(je,{duration:45,onExpire:t,onClick:t,icon:e.jsx(ge,{}),children:e.jsx(n,{pt:"Ver Ranking",en:"See Ranking"})})}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"xx-small",children:e.jsx(n,{pt:"Pares que não deram match",en:"Pairs that didn't match"})}),e.jsx(x,{wrap:!0,style:{alignItems:"flex-start"},children:l.map((o,h)=>e.jsxs(x,{className:"pairs-grid__pair",vertical:!0,children:[e.jsx(x,{children:e.jsx(T.Group,{max:{count:7},children:o.players.map(d=>e.jsx(N,{avatarId:a[d].avatarId,size:"small"},`${o.pairId}-${d}`))})}),e.jsx(b,{index:h%6,placeholder:s[0],firstItem:o.pair[0],secondItem:o.pair[1]})]},o.pairId))})]})]})}function Ne({players:r,ranking:s,goToPreviousStep:t,round:i}){return e.jsxs(fe,{players:r,ranking:s,gainedPointsDescriptions:[e.jsx(n,{pt:"Deu match com outros jogadores",en:"Match other player's pairs"},"1"),e.jsx(n,{pt:"O item de fora foi o mesmo que outros jogadores",en:"The left out item was the same as other players"},"2")],children:[e.jsx(x,{children:e.jsx(W,{onClick:t,children:e.jsx(n,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(Z,{round:i})]})}function ke({state:r,players:s}){const{step:t,goToNextStep:i,goToPreviousStep:c}=O(),a=e.jsx(L,{icon:e.jsx(xe,{}),title:e.jsx(n,{pt:"Resultado",en:"Results"}),currentRound:r?.round?.current,type:"overlay",children:e.jsx(E,{children:e.jsx(n,{pt:e.jsx(e.Fragment,{children:"Quantos pares você acertou?"}),en:e.jsx(e.Fragment,{children:"How many pairs did you get?"})})})});return e.jsx($,{phase:r?.phase,allowedPhase:y.RESULTS,children:e.jsxs(z,{step:t,players:s,children:[e.jsx(Te,{players:s,announcement:a,goToNextStep:i,gallery:r.gallery,leftOut:r.leftOut,pool:r.pool}),e.jsx(Ne,{players:s,round:r.round,ranking:r.ranking,goToPreviousStep:c})]})})}function Me({state:r,players:s}){const t=r.gallery??[];return e.jsxs(ve,{state:r,players:s,announcementIcon:e.jsx(Ie,{}),children:[e.jsx(Se,{players:s,achievements:r.achievements,reference:_e}),e.jsx(Pe,{title:e.jsx(n,{pt:"Melhores Pares",en:"Best Pairs"}),className:"mt-4",children:t.map((i,c)=>e.jsx(b,{index:c%6,firstItem:i.pair[0],secondItem:i.pair[1],placeholder:i.pair[0]},i.pairId))})]})}function Fe(r){switch(r.phase){case y.PAIRING:return Ae;case y.RESULTS:return ke;case X.DEFAULT.GAME_OVER:return Me;default:return K}}function Xr(){return e.jsx(J,{gameCollection:Y.DUETOS,getActiveComponent:Fe})}export{Xr as default};
