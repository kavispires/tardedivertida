import{f,aG as se,j as e,i as M,T as c,l as te,aL as N,bG as k,bF as oe,r as m,b5 as ne,J as ae,b0 as ie,a$ as V,e as g,bH as Z,q as ce,B as b,bj as le,aY as ue,aW as de,aX as me}from"./index-BYLqr1sy.js";import{u as D,S as A,c as P,b as L,d as T,e as v,P as I,k as pe,l as he,g as xe,h as R,i as je,j as ge}from"./StepSwitcher-BrCphB5Q.js";import{L as be}from"./ListIcon-CKFQ-Gk5.js";import{I as C}from"./Instruction-DLrqdJk-.js";import{u as J}from"./useMock-DJfXKqZH.js";import{C as G}from"./Card-Cvi-x4OQ.js";import{R as X}from"./RuleInstruction-Btli7eqi.js";import{R as Se}from"./RedoOutlined-BF5FRvOC.js";import{D as fe}from"./WritingIcon-CrJWUKfz.js";import{T as Y}from"./TimeHighlight-DteNI6UK.js";import{T as U}from"./TurnOrder-2_M9TKHg.js";import{A as Ne}from"./AnimatedLoaderIcon-Aww1iS3v.js";import{D as Ae}from"./DrawingCanvas-BN2eM-14.js";import{T as Pe}from"./TimedTimerBar-DupwINV5.js";import{W as Te,P as ve}from"./WriteIdeaIcon-Dx_IiYmc.js";import{A as S}from"./AvatarName-CAglhJ2m.js";import{C as B}from"./CanvasSVG-DxEJcXtM.js";import{u as Ie}from"./useBlurCards-Dxiqw3s9.js";import{A as K}from"./Avatar-C21Ccx4-.js";import{T as Ce}from"./TheEndIcon-BSAyuEh8.js";import"./GameOver-CbLJuZ8D.js";import{G as we}from"./GameOverWrapper-CkIrNXTg.js";import{A as _e}from"./Achievements-AkdeQN2T.js";import{a as ye}from"./achievements-BA7PtnkR.js";/* empty css                            */import"./speech-0Y3SS4rg.js";import"./useDevFeatures-Zx43sa_V.js";import"./RulesModal-YZ1KghfU.js";import"./DoubleRightOutlined-D2kncvj1.js";import"./PurePanel-XHG-Xfh0.js";import"./Game-DEwK5op1.js";import"./WaitingRoomIcon-DIK9PPLV.js";import"./AnimatedClockIcon-C8sKZwsP.js";import"./useMutation-BPQ5yi_x.js";import"./index-Dg7ZDC1l.js";import"./useBubbleLock-CV-NJEmN.js";import"./index-BIQtLhPB.js";import"./Overflow-DHzkguS2.js";import"./useEvent-kLbeD1Pc.js";import"./index-DX1f24Wb.js";import"./index-BR519Ack.js";import"./GameBanner-DDlUD5zm.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-2gGwPBWJ.js";import"./InfoCircleOutlined-Dmzo0rQ8.js";import"./index-BrJG7MT0.js";import"./SignIn-BaqBfmzq.js";import"./GoogleIcon-Zkvbb_FE.js";import"./Loading-BbQscGYc.js";import"./LikeFilled-DEa959YM.js";import"./StarFilled-Bnub0xHC.js";import"./StarFilled-CNctUIhy.js";import"./ClockIcon-XYMCjz2o.js";import"./MetricHighlight-AxaK1rop.js";import"./UndoOutlined-CWfhFZIV.js";import"./DeleteOutlined-Babu0TFt.js";import"./TimerBar-DBfZGwb5.js";import"./progress-wXK9np9F.js";import"./ArrowRightOutlined-Ba99KRXO.js";import"./useMergedState-B0_f3esL.js";import"./Container-C4OuxlYZ.js";import"./Medal-BNKv9WGm.js";import"./QuestionCircleOutlined-CYNG_xoB.js";const h={PROMPT_SELECTION:"PROMPT_SELECTION",DRAWING:"DRAWING",NAMING:"NAMING",PRESENTATION:"PRESENTATION"},W={SUBMIT_PROMPT:"SUBMIT_PROMPT",SUBMIT_DRAWING:"SUBMIT_DRAWING",SUBMIT_GUESS:"SUBMIT_GUESS"},O=120,E=7;function Re(s){const{translate:r}=f(),t=D({actionName:"submit-prompt",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:r("Carta enviada com sucesso!","Card send successfully!"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar sua carta","Oops, the application failed to submit the card")});return o=>{t({action:W.SUBMIT_PROMPT,...o})}}function Ee(s){const{translate:r}=f(),t=D({actionName:"submit-drawing",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:r("Acabou o tempo! Aguarde enquanto os outros participantes desenham","Time's up! Wait for the other players to finish their art"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar o desenho","Oops, the application failed to send your art")});return o=>{t({action:W.SUBMIT_DRAWING,...o})}}function Oe(s){const{translate:r}=f(),t=D({actionName:"submit-guess",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:r("Resposta enviado com sucesso!","Guess submitted successfully!"),errorMessage:r("Vixi, o aplicativo encontrou um erro ao tentar enviar sua resposta","Oops, the application failed to submit your guess")});return o=>{t({action:W.SUBMIT_GUESS,...o})}}function Me({prompts:s,onSubmitPrompt:r}){const{isLoading:t}=se(),o=()=>{r({promptId:oe(s.map(n=>n.id))[0],randomSelection:!0})};return J(o,[]),e.jsxs(A,{fullWidth:!0,children:[e.jsx(M,{children:e.jsx(c,{pt:"Seleção de Carta",en:"Card Selection"})}),e.jsx(X,{type:"action",children:e.jsx(c,{pt:"Selecione uma das cartas abaixo a ser usada no jogo",en:"Select one of the cards below to be used in the game"})}),e.jsx("div",{className:"l-cards",children:s.map(n=>e.jsx(te,{onClick:()=>r({promptId:n.id}),disabled:t,children:e.jsx(G,{children:n.text})},n.id))}),e.jsx(N,{children:e.jsx(k,{onClick:o,icon:e.jsx(Se,{}),type:"dashed",children:e.jsx(c,{pt:"Escolha pra mim",en:"Select for me"})})})]})}function ke({players:s,state:r}){var l;const{step:t,goToNextStep:o,setStep:n}=P(0),i=L(s,r),a=Re(n);return e.jsx(T,{phase:r==null?void 0:r.phase,allowedPhase:h.PROMPT_SELECTION,children:e.jsxs(v,{step:t,players:s,children:[e.jsx(I,{icon:e.jsx(be,{}),title:e.jsx(c,{pt:"Seleção da Carta",en:"Card Selection"}),onClose:o,currentRound:(l=r==null?void 0:r.round)==null?void 0:l.current,duration:20,type:"block",children:e.jsx(C,{children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Neste jogo, você recebe uma carta e a desenha, daí o próximo jogador tentar adivinhar o que é, daí o próximo jogador desenha a adivinhação, e por ai vai até seu album original voltar pra você.",e.jsx("br",{}),"Selecione a palavra a ser desenhada, talvez seja para você, talvez seja para um outro jogador."]}),en:e.jsxs(e.Fragment,{children:["In this game, you receive a prompt and will have to draw it, then the next player will attempt to guess your drawing, then the next player will draw the guess attempt, and so on until your album comes back to you.",e.jsx("br",{}),"Select a card to be drawn this round, it might be for you to draw or the next player... who knows?"]})})})}),e.jsx(Me,{prompts:i.prompts,onSubmitPrompt:a})]})})}function De({currentPrompt:s,onSubmitDrawing:r,players:t}){const[o,n]=m.useState([]),[i,a]=m.useState(!1),l=()=>{a(!0),u()},u=()=>r({drawing:JSON.stringify(o)}),p=t[s.author];return e.jsxs(A,{children:[e.jsx(G,{size:"large",header:p.name,color:ne[p.avatarId].color,children:s.content}),e.jsx(Pe,{steps:90,duration:O,onExpire:l}),i?e.jsx(Ne,{style:{background:"white",width:"250px",padding:"125px"}}):e.jsx(Ae,{lines:o,setLines:n,showControls:!0}),e.jsx(N,{children:e.jsx(k,{onClick:()=>u(),size:"large",children:e.jsx(c,{pt:"Enviar desenho",en:"Submit drawing"})})})]})}function Le({players:s,state:r}){var l,u;const{step:t,goToNextStep:o,setStep:n}=P(0),i=L(s,r),a=Ee(n);return e.jsx(T,{phase:r==null?void 0:r.phase,allowedPhase:h.DRAWING,children:e.jsxs(v,{step:t,players:s,children:[e.jsx(I,{icon:e.jsx(fe,{}),title:e.jsx(c,{pt:"Desenhe",en:"Draw"}),onClose:o,currentRound:(l=r==null?void 0:r.round)==null?void 0:l.current,buttonText:e.jsx(c,{pt:"Um dó, lá, si... vamos e... já!",en:"Ready! Set! Go!"}),withoutTimer:!0,type:"block",children:e.jsxs(C,{children:[e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Você receberá uma carta.",e.jsx("br",{}),"Desenhe-a da melhor maneira possível, você tem"," ",e.jsx(Y,{children:O})," segundos."]}),en:e.jsxs(e.Fragment,{children:["You will receive a card.",e.jsx("br",{}),"Draw it the best way possible, you have"," ",e.jsx(Y,{children:O})," seconds."]})}),e.jsx(U,{title:e.jsx(c,{pt:"Ordem dos Álbuns",en:"Albums' Order"}),players:s,order:r.gameOrder,className:"l-turn-order",activePlayerId:(u=i.currentPrompt)==null?void 0:u.id,reorderByUser:i.id})]})}),e.jsx(De,{currentPrompt:i.currentPrompt,onSubmitDrawing:a,players:s})]})})}function Ge({currentPrompt:s,onSubmitGuess:r,players:t,user:o,round:n}){const{translate:i}=f(),[a,l]=m.useState(""),u=t[s.author],p=w=>l(w.target.value),x=()=>r({guess:a});return J(()=>r({guess:`${n.current}${o.id}`}),[]),e.jsxs(A,{children:[e.jsx(M,{children:e.jsx(c,{pt:"O que é isso?",en:"What is this?"})}),e.jsx(X,{type:"rule",children:e.jsx(c,{pt:e.jsxs(e.Fragment,{children:[e.jsx(S,{player:u})," desenhou isso."]}),en:e.jsxs(e.Fragment,{children:[e.jsx(S,{player:u})," drew this."]})})}),e.jsx(B,{drawing:s.content,className:"l-drawing",width:300}),e.jsx(ae,{onChange:p,size:"large",placeholder:i("Escreva seu chute aqui","Write your guess here"),className:"l-drawing-guess-input",onPressEnter:x}),e.jsx(N,{children:e.jsx(k,{onClick:x,size:"large",disabled:!a,children:e.jsx(c,{pt:"Enviar",en:"Submit name"})})})]})}function Ue({players:s,state:r}){var l,u;const{step:t,goToNextStep:o,setStep:n}=P(0),i=L(s,r),a=Oe(n);return e.jsx(T,{phase:r==null?void 0:r.phase,allowedPhase:h.NAMING,children:e.jsxs(v,{step:t,players:s,children:[e.jsx(I,{icon:e.jsx(Te,{}),title:e.jsx(c,{pt:"O que é isso?",en:"What is it?"}),onClose:o,currentRound:(l=r==null?void 0:r.round)==null?void 0:l.current,type:"block",children:e.jsxs(C,{children:[e.jsx(c,{pt:"Tente adivinhar o que é a obra",en:"Try to guess what the artwork is"}),e.jsx(U,{players:s,order:r.gameOrder,className:"l-turn-order",activePlayerId:(u=i.currentPrompt)==null?void 0:u.id,reorderByUser:i.id})]})}),e.jsx(Ge,{currentPrompt:i.currentPrompt,onSubmitGuess:a,players:s,user:i,round:r.round})]})})}function Be({slide:s,players:r,albumColor:t,currentPage:o,totalSlides:n}){const i=r[s.author],a=m.useMemo(()=>ie("flipInY"),[]);return e.jsxs("div",{className:"l-page",style:{background:s.type==="cover"?t:0},children:[e.jsxs("div",{className:"l-page__pagination",children:[e.jsx(V,{style:{backgroundColor:t},children:o+1}),e.jsx("span",{className:"l-page__pagination-of",children:e.jsx(c,{pt:"de",en:"of"})}),e.jsx(V,{style:{backgroundColor:t},children:n})]}),s.type==="cover"&&e.jsx("div",{className:g("l-page__container",a),style:{backgroundColor:t},children:e.jsx(K,{id:i.avatarId,size:96})}),s.type==="title"&&(o===0?e.jsx("div",{className:g("l-page__container",a),children:e.jsx(G,{children:s.content})}):e.jsxs("div",{className:g("l-page__container l-page__text",a),children:['"',s.content,'"']})),s.type==="drawing"&&e.jsx(B,{drawing:s.content,className:g("l-page__container l-artwork",a),width:350}),s.type!=="cover"&&e.jsxs("div",{className:"l-page__author",children:[e.jsx(c,{pt:"por ",en:"by "}),e.jsx(S,{player:i,addressUser:!0})]})]})}function We({albumEntry:s,currentPage:r,players:t}){const o=t[s.id],n=Z(o.avatarId);return e.jsxs("div",{className:"l-album",children:[e.jsxs("h2",{className:"l-album__owner",style:{backgroundColor:n},children:[e.jsx(K,{id:o.avatarId,size:"large"})," ",e.jsx(c,{pt:e.jsxs(e.Fragment,{children:["Álbum de ",o.name]}),en:e.jsxs(e.Fragment,{children:[o.name,"'s Album"]})})]}),e.jsx(Be,{slide:s.slides[r],players:t,albumColor:n,currentPage:r,totalSlides:s.slides.length})]})}function qe({players:s,album:r}){var H;pe();const[t,o]=m.useState(!0),[n,i]=m.useState(0),[a,l]=m.useState(0),[u,p]=m.useState(1),x=m.useMemo(()=>r.reduce((d,re)=>d+re.slides.length,0),[r]),w=E*x,{timeLeft:_,isRunning:q}=Ie({duration:E*x,autoStart:!0,onExpire:()=>o(!1)}),j=r[n],y=(((H=j==null?void 0:j.slides)==null?void 0:H.length)||0)-1,F=!r[n+1],Q=()=>{i(n-1),l(0),t&&p(d=>d+1)},ee=()=>l(d=>d-1),$=m.useCallback(()=>{l(d=>d+1),t&&p(d=>d+1)},[t]),z=m.useCallback(()=>{i(d=>d+1),l(0),t&&p(d=>d+1)},[t]);return m.useEffect(()=>{q&&_<w&&_%E===0&&(a<y?$():F||z())},[_,q,y]),e.jsxs(A,{className:"l-step-album",children:[e.jsx(M,{children:e.jsx(c,{pt:"Álbum de Fotos",en:"Photo Album"})}),a<0||!j?e.jsx("div",{className:"a",children:"?"}):e.jsx(We,{albumEntry:j,currentPage:a,players:s}),e.jsx("div",{className:"l-timer-bar",children:e.jsx("span",{className:"l-timer-bar__pill",style:{width:`${Math.abs(100*u/x)}%`,backgroundColor:"gray"}})}),e.jsx(N,{children:e.jsxs(ce.Compact,{children:[e.jsx(b,{disabled:t||n===0,onClick:Q,children:e.jsx(c,{pt:"Álbum Anterior",en:"Previous Album"})}),e.jsx(b,{disabled:t||a===0,onClick:ee,children:e.jsx(c,{pt:"Página Anterior",en:"Previous Page"})}),e.jsx(b,{disabled:t||a===y,onClick:$,children:e.jsx(c,{pt:"Próxima Página",en:"Next Page"})}),e.jsx(b,{disabled:t||F,onClick:z,children:e.jsx(c,{pt:"Próximo Álbum",en:"Next Album"})})]})}),e.jsx(he,{autoTriggerTime:0})]})}function Fe({players:s,state:r}){var n;const{step:t,goToNextStep:o}=P(0);return e.jsx(T,{phase:r==null?void 0:r.phase,allowedPhase:h.PRESENTATION,children:e.jsxs(v,{step:t,players:s,children:[e.jsx(I,{icon:e.jsx(ve,{}),title:e.jsx(c,{pt:"Álbum de Fotos",en:"Photo Album"}),onClose:o,currentRound:(n=r==null?void 0:r.round)==null?void 0:n.current,unskippable:!0,duration:7,type:"block",children:e.jsxs(C,{children:[e.jsx(c,{pt:"A ordem dos albums será:",en:"The albums' order will be:"}),e.jsx(U,{players:s,order:r.gameOrder})]})}),e.jsx(qe,{players:s,album:r.album})]})})}function $e({state:s,players:r}){var n;const t=Math.min(((n=s.album[0])==null?void 0:n.slides.length)??5,8),o=le(t,{minWidth:100});return e.jsxs(we,{state:s,players:r,announcementIcon:e.jsx(Ce,{}),children:[e.jsx(_e,{players:r,achievements:s.achievements,reference:ye}),e.jsx("ul",{className:"l-album-strips",children:s.album.map(i=>e.jsxs("li",{className:"l-album-strip-entry",children:[e.jsx("div",{className:"l-album-strip-entry__author",style:{backgroundColor:Z(r[i.id].avatarId)},children:e.jsx(S,{player:r[i.id]})}),e.jsx("ul",{className:"l-album-strip",style:{gridTemplateColumns:`repeat(${i.slides.length-1}, 1fr)`},children:i.slides.slice(1).map(a=>{const l=`slide-${i.id}-${a.author}-${a.type}`;return a.type==="title"?e.jsx("li",{className:"l-album-strip-square-text",style:{width:`${o}px`},children:a.content},l):a.type==="drawing"?e.jsx("li",{className:"l-album-strip-square-drawing",children:e.jsx(B,{drawing:a.content,width:o})},l):null})})]},`album-strip-${i.id}`))})]})}function ze(s){if(s&&!s.phase)return de;switch(s.phase){case R.DEFAULT.LOBBY:return ge;case R.DEFAULT.SETUP:return je;case h.PROMPT_SELECTION:return ke;case h.DRAWING:return Le;case h.NAMING:return Ue;case h.PRESENTATION:return Fe;case R.DEFAULT.GAME_OVER:return $e;default:return me}}function rs(){return e.jsx(xe,{gameCollection:ue.LINHAS_CRUZADAS,getActiveComponent:ze})}export{rs as default};
