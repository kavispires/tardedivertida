import{r as I,$ as J,v as ne,f as X,c0 as te,bV as Te,b_ as Q,j as e,T as a,q as U,c as B,B as K,s as fe,au as R,bW as ge,I as N,bX as Ne,av as H,bY as os,c1 as is,D as _e,c2 as rs,bs as Oe,aF as as}from"./index-CzR3Jb-u.js";import{u as ye,S as F,a as oe,P as ie,f as cs,c as ds,d as ls,e as ms}from"./Session-DpxUwIFf.js";import{A as Be}from"./AnonymousIcon-DPrHHRcC.js";import{C as us}from"./CrimeSceneIcon-BJCfZz1U.js";import{C as hs,b as xs,B as We,a as ke}from"./CrimeTapeIcon-BSz93nTx.js";import{E as ps}from"./EventIcon-C6AGjpp-.js";import{L as Me}from"./LocationIcon-CuMYaQFc.js";import{S as js}from"./SkullIcon-DzzW37RI.js";import{D as Pe}from"./DevButton-B9jHzPEm.js";import{S as L,R as vs,P,a as re,u as Is}from"./StepSwitcher-DG0Yu0h3.js";import{I as W}from"./useDevFeatures-DLtq6f3r.js";import{R as Ae}from"./RoundAnnouncement-Csc0HIpi.js";import{P as M}from"./PointsHighlight-fEvtp7cQ.js";import{C as k,S as V,a as fs}from"./SceneTile-Djait5H-.js";import{R as q,a as gs}from"./RuleInstruction-CU9ksFSm.js";import{K as Ve}from"./KnifeIcon-I3VTxL7m.js";import{M as ae}from"./MetricHighlight-BE_2pssT.js";import{u as Fe}from"./useMock-ChEsc4DT.js";import{L as ys}from"./LoupeIcon-CW5W4ZrF.js";import{T as G}from"./TextHighlight-CrSlhEG6.js";import{B as bs}from"./BoxBlankIcon-BHBiZAA8.js";import{P as Le}from"./PlayerAvatar-C2AYjUyr.js";import{B as qe}from"./BoxCheckMarkIcon-DUozNuYh.js";import{B as $e}from"./BoxMinusIcon-CJaxQCi_.js";import{B as Ge}from"./BoxOneIcon-CtiXhFFb.js";import{B as De}from"./BoxXIcon-E625wh9m.js";import{L as He}from"./LockIcon-DRnY2Lu2.js";import{R as Ss}from"./QuestionCircleFilled-DyQdrBas.js";import{R as Cs}from"./LockFilled-Ca8tI_X5.js";import{C as ze}from"./Collapse-CiL_SlLB.js";import{G as Es}from"./GuessIcon-BQ-CsqWm.js";import{I as Os}from"./InvestigationIcon-ZHaCd29K.js";import{D as ws}from"./DebugOnly-CNpf_ANK.js";import{F as Rs}from"./FloatingHand-CQuaTc0H.js";import{P as Ts}from"./PlayerAvatarCard-Bt0U05cb.js";import{R as Ns}from"./RankIcon-CVqMQFvJ.js";import{T as _s}from"./TimedButton-BpK-Qq5Z.js";import{P as Bs}from"./PopoverRule-CaYD98LU.js";import{P as Ws}from"./PlayerAvatarName-CQWJiZCK.js";import{F as ks}from"./Table-DVBs_YtN.js";import{R as we}from"./TrophyOutlined-DaV39d3D.js";import{S as Ms}from"./StepRankingWrapper-BKZYG8Tj.js";import{T as Ps}from"./TrophyIcon-ZWGGa-vH.js";import"./RulesModal-cfsg2n6f.js";import{G as As}from"./GameOverWrapper-C3XuH4Jk.js";import{A as Vs}from"./Achievements-B323-OG3.js";import{a as Fs}from"./achievements-CXubfGnp.js";import"./Game-ixcG-yWw.js";import"./useMutation-CEZy_Oir.js";import"./speech-CHbdrALK.js";import"./index-D5_UPH06.js";import"./index-DgBA00RF.js";import"./Overflow-BBTTfFHj.js";import"./extends-CF3RwP-h.js";import"./PurePanel-DBMOlhfO.js";import"./PlusOutlined-DttJpjjp.js";import"./useToggle-DU3ebDKS.js";import"./useId-BlDUkvsx.js";import"./index-B_OUGl_p.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-CzxFWfOw.js";import"./index-Bf9xYIII.js";import"./index-Qqk3EiKM.js";import"./SignIn-C5rL34CY.js";import"./GoogleIcon-bNyxf9F0.js";import"./AnimatedGearIcon-N3wCP6QS.js";import"./AnimatedClockIcon-vZLx-iyQ.js";import"./Loading-B9crikLO.js";import"./AnimatedLoaderIcon-Cc1mmyph.js";import"./WaitingRoomIcon-3S9GHAMu.js";import"./LikeFilled-CkQQkt2_.js";import"./StarIcon-w86J4ky6.js";/* empty css                             */import"./ImageBlurButtonContainer-CW_POu6b.js";import"./ImageBlurButton-DK1aJbKX.js";import"./ItemCard-Qv_w0Rus.js";import"./Sprite-2ZqJ-l5w.js";import"./WarningOutlined-BynhgfTJ.js";import"./index-D3imy3qM.js";import"./StarFilled-BnMUpGmG.js";import"./HandOfCardsIcon-CKLtebWL.js";import"./DivButton-B2-JlpGJ.js";import"./iconUtil-DmuZcGtz.js";import"./EllipsisOutlined-M1d6muGF.js";import"./index-BlGGQ1II.js";import"./scrollTo-BiptyIQn.js";import"./CaretDownOutlined-KwnWxzKl.js";import"./CaretUpOutlined-CYsmZQH5.js";import"./RankingBoard-CN66T_zG.js";import"./WritingIcon-DMYQPjcW.js";import"./TheEndIcon-1E5qkhdh.js";import"./index-Blj8O6za.js";import"./progress-CDSGiaRs.js";import"./TitledContainer-qmOf4jkO.js";import"./Medal-DjZXasO-.js";var Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"};function ue(){return ue=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t])}return s},ue.apply(this,arguments)}const qs=(s,n)=>I.createElement(J,ue({},s,{ref:n,icon:Ls})),$s=I.forwardRef(qs);var Gs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM640 812a32 32 0 1064 0 32 32 0 10-64 0zm12-64h40c4.4 0 8-3.6 8-8V628c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"exception",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t])}return s},he.apply(this,arguments)}const Ds=(s,n)=>I.createElement(J,he({},s,{ref:n,icon:Gs})),Hs=I.forwardRef(Ds);var zs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function xe(){return xe=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t])}return s},xe.apply(this,arguments)}const Us=(s,n)=>I.createElement(J,xe({},s,{ref:n,icon:zs})),Ks=I.forwardRef(Us);var Ys={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM704 536c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-square",theme:"filled"};function pe(){return pe=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t])}return s},pe.apply(this,arguments)}const Qs=(s,n)=>I.createElement(J,pe({},s,{ref:n,icon:Ys})),me=I.forwardRef(Qs);var Js={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};function je(){return je=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t])}return s},je.apply(this,arguments)}const Xs=(s,n)=>I.createElement(J,je({},s,{ref:n,icon:Js})),Zs=I.forwardRef(Xs),D={CRIME_SELECTION:"CRIME_SELECTION",SCENE_MARKING:"SCENE_MARKING",GUESSING:"GUESSING",REVEAL:"REVEAL"},be={SUBMIT_CRIME:"SUBMIT_CRIME",SUBMIT_MARK:"SUBMIT_MARK",SUBMIT_GUESSES:"SUBMIT_GUESSES"},E={LOCKED:"LOCKED",CORRECT:"CORRECT",ONE:"ONE",TWO:"TWO",THREE:"THREE",WRONG:"WRONG",WRONG_GROUP:"WRONG_GROUP"},Ue={evidence:"ev",weapon:"wp",location:"lc",victim:"vt"},Ke=ne.invert(Ue);function en(s){const{translate:n}=X(),o=ye({actionName:"submit-crime",onBeforeCall:()=>s(11),onError:()=>s(9),successMessage:n("Crime enviado com sucesso","Crime submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar seu crime","Oops, the application failed to send your crime")});return t=>{o({action:be.SUBMIT_CRIME,...t})}}function sn(s){const{translate:n}=X(),o=ye({actionName:"submit-mark",onBeforeCall:()=>s(3),onError:()=>s(2),successMessage:n("Nova informação enviadas com sucesso","New information submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar a nova informação","Oops, the application failed to send the new information")});return t=>{o({action:be.SUBMIT_MARK,...t})}}function nn(s){const{translate:n}=X(),o=ye({actionName:"submit-guesses",onBeforeCall:()=>s(2),onError:()=>s(1),successMessage:n("Respostas enviadas com sucesso","Guesses submitted successfully"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar suas respostas","Oops, the application failed to send your guesses")});return t=>{o({action:be.SUBMIT_GUESSES,...t})}}const Ye=(s,n)=>s?.[n]??[],tn=(s,n)=>{const o=te(Ye(s,n));return!!["CORRECT","LOCKED"].includes(o?.status)},on=s=>!!["CORRECT","LOCKED"].includes(s?.status),rn=s=>{const n={};return Object.entries(s??{}).forEach(([o,t])=>{const r=te(t);["CORRECT","LOCKED"].includes(r.status)&&(n[o]={weaponId:r.weaponId,evidenceId:r.evidenceId,isComplete:!0})}),n},an=s=>Ke[s.split("-")[1]],cn=s=>{const n=Te(s),o=n.find(l=>l?.includes("wp")),t=n.find(l=>l?.includes("ev")),r=n.find(l=>l?.includes("lc")),c=n.find(l=>l?.includes("vt")),i=[0,1,2,3,4,5];return{weaponId:o,evidenceId:t,victimId:c??"",locationId:r??"",causeOfDeathIndex:Q(i),reasonForEvidenceIndex:Q(i),locationIndex:Q(i),victimIndex:Q(i)}},dn=()=>Q([0,1,2,3,4,5]),Re=(s,n,o,t,r)=>Object.values(n).reduce((c,i)=>{if(i.id!==o.id){const l=o.history?.[i.id]??[],m=new Set,p=new Set,u=new Set,x=new Set;let f=null;for(const d of l)switch(m.add(d.groupIndex),d.status){case E.WRONG_GROUP:p.add(d.groupIndex);break;case E.WRONG:d.weaponId&&u.add(d.weaponId),d.evidenceId&&u.add(d.evidenceId),d.victimId&&u.add(d.victimId),d.locationId&&u.add(d.locationId),f=d.groupIndex;break;case E.ONE:case E.TWO:case E.THREE:f=d.groupIndex,d.weaponId&&x.add(d.weaponId),d.evidenceId&&x.add(d.evidenceId),d.victimId&&x.add(d.victimId),d.locationId&&x.add(d.locationId);break;case E.CORRECT:case E.LOCKED:return c[i.id]={weaponId:d.weaponId,evidenceId:d.evidenceId},t&&(c[i.id].victimId=d.victimId),r&&(c[i.id].locationId=d.locationId),c}let h=f;h===null&&(h=Object.keys(s).map(Number).find(d=>!p.has(d))??-1);const b=(s[h]||[]).filter(d=>!u.has(d)),g={weapon:[],evidence:[],victim:[],location:[]};for(const d of b){const S=an(d);g[S].push(d)}for(const d of g.weapon)for(const S of g.evidence)if(t){for(const w of g.victim)for(const C of r?g.location:[""])if(!l.some(y=>y.weaponId===d&&y.evidenceId===S&&y.victimId===w&&(!r||y.locationId===C)))return c[i.id]={weaponId:d,evidenceId:S,victimId:w,locationId:r?C:void 0},c}else for(const w of r?g.location:[""])if(!l.some(j=>j.weaponId===d&&j.evidenceId===S&&(!r||j.locationId===w)))return c[i.id]={weaponId:d,evidenceId:S,locationId:r?w:void 0},c}return c},{});function Z(s){return I.useMemo(()=>{const n=Object.values(s).some(t=>t.type==="location"),o=Object.values(s).some(t=>t.type==="victim");return{isLocationGame:n,isVictimGame:o}},[s])}function ln(){return e.jsx(W,{contained:!0,children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Bem-vindo à Convenção Anual de Serial Killers!",e.jsx("br",{}),"Você e os outros serial killers decidiram fazer uma dinâmica de adivinhação.",e.jsx("br",{}),"O objetivo é todos darem dicas sobre as circunstâncias que seus últimos crimes aconteceram para ajudar os outros jogadores a descobrirem qual arma e qual objeto foram usados durante o crime.",e.jsx("br",{}),"Prontos para aterrorizar?"]}),en:e.jsxs(e.Fragment,{children:["Welcome to the Annual Serial Killers Con!",e.jsx("br",{}),"You and the other serial killers decided to break the ice and make a game out of it.",e.jsx("br",{}),"The goal is to give clues about the circunstancies your latest crime occurred so the other players can guess what weapon and evidence were used during the crime.",e.jsx("br",{}),"Ready to terrorize?"]})})})}function mn(){return e.jsx(W,{contained:!0,children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Baseado nas informações dadas pelos jogadores, tente adivinhar qual arma e objeto cada jogador usou em seu crime.",e.jsx("br",{}),"Você ganha pontos se adivinhar uma das cartas ou ambas as cartas, e você também ganha"," ",e.jsx(M,{children:"1 ponto"})," para cada uma de suas cartas que os outros adivinharem, mas essa pontuação é secreta."]}),en:e.jsxs(e.Fragment,{children:["Based on the information given by other players, try to guess the weapon and object used on their crimes.",e.jsx("br",{}),"You get points for getting one or both cards correctly, and you get"," ",e.jsx(M,{children:"1 point"})," when other players get each of your cards correctly, but these points are kept secret."]})})})}function Qe({round:s}){const n=s.total-s.current+1;return e.jsx(W,{contained:!0,children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(M,{children:"1 ponto"})," para cada arma ou objeto que você acertar.",e.jsx("br",{}),"Se você acertar o par de um jogador, você ganha ",e.jsxs(M,{children:[n," pontos"]}),".",e.jsx("br",{}),"Para todos os seus acertos, seus respectivos autores ganham"," ",e.jsx(M,{children:"1 ponto"}),".",e.jsx("br",{}),"Ganha o jogo o primeiro jogador que acertar tudo."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(M,{children:"1 point"})," for each weapon or evidence you get correctly.",e.jsx("br",{}),"If you get the pair for a player, you get ",e.jsxs(M,{children:[n," points"]})," ","instead.",e.jsx("br",{}),"All of your correct guesses grant ",e.jsx(M,{children:"1 extra point"})," to the authors.",e.jsx("br",{}),"Wins the game the player who get all correctly first."]})})})}function Y({items:s,weaponId:n,evidenceId:o,victimId:t,locationId:r,highlight:c}){const i=U(12,{gap:8,minWidth:50,maxWidth:200});return e.jsxs("ul",{className:"h-items-crime-selection",children:[e.jsx("li",{children:e.jsx(k,{item:s[n],cardWidth:i,className:B(c&&c!=="weapon"&&"h-items-crime-selection__faded")})}),e.jsx("li",{children:e.jsx(me,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(k,{item:s[o],cardWidth:i,className:B(c&&c!=="evidence"&&"h-items-crime-selection__faded")})}),t&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(me,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(k,{item:s[t],cardWidth:i,className:B(c&&c!=="victim"&&"h-items-crime-selection__faded")})})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(me,{style:{color:"white"}})}),e.jsx("li",{children:e.jsx(k,{item:s[r],cardWidth:i,className:B(c&&c!=="location"&&"h-items-crime-selection__faded")})})]})]})}function ee({onClick:s,children:n,disabled:o=!1,...t}){return e.jsx(K,{type:"primary",size:"large",disabled:o,onClick:s,...t,children:n??e.jsxs(e.Fragment,{children:["»» ",e.jsx(a,{pt:"Próximo",en:"Next"})," »»"]})})}function ve({children:s,type:n,iconSize:o,className:t}){return e.jsx(ae,{icon:e.jsx(Ve,{}),type:n,iconSize:o,className:t,children:s})}function Ie({children:s,type:n,iconSize:o,className:t}){return e.jsx(ae,{icon:e.jsx(hs,{}),type:n,iconSize:o,className:t,children:s})}function un({children:s,type:n,iconSize:o,className:t}){return e.jsx(ae,{icon:e.jsx(Me,{}),type:n,iconSize:o,className:t,children:s})}function hn({children:s,type:n,iconSize:o,className:t}){return e.jsx(ae,{icon:e.jsx(Be,{}),type:n,iconSize:o,className:t,children:s})}function xn({announcement:s,user:n,items:o,groupedItems:t,selections:r,updateSelections:c,isLocationGame:i,isVictimGame:l,cardWidth:m}){const[p,u]=I.useState(r.weaponId??""),[x,f]=I.useState(r.evidenceId??""),[h,v]=I.useState(r.locationId??""),[b,g]=I.useState(r.victimId??""),d=t[n.itemGroupIndex],S=j=>{if(j.type==="weapon")return u(j.id);if(j.type==="evidence")return f(j.id);if(j.type==="location")return v(j.id);if(j.type==="victim")return g(j.id)},w=()=>{let j="",y="",_="",T="";Te(d).forEach(O=>{o[O].type==="weapon"&&(j=O),o[O].type==="evidence"&&(y=O),o[O].type==="location"&&(_=O),o[O].type==="victim"&&(T=O)}),u(j),f(y),v(_),g(T)},C=()=>{const j=[e.jsx(ve,{children:e.jsx(a,{pt:"16 meios",en:"16 means of murder"})},"mean"),e.jsx(Ie,{children:e.jsx(a,{pt:"16 evidências",en:"16 pieces of evidence"})},"evidence")];return l&&j.push(e.jsx(hn,{children:e.jsx(a,{pt:"16 vítimas",en:"16 victims"})},"victim")),i&&j.push(e.jsx(un,{children:e.jsx(a,{pt:"16 locais",en:"16 locations"})},"location")),j};return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"Qual foi seu último crime?",en:"How was your last crime?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," uma carta azul que representa o meio que a morte aconteceu no seu último crime, normalmente uma arma.",e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta vermelha que representa uma evidência que estava na cena do crime.",l&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta amarela que representa a vítima do crime."]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Selecione"})," uma carta verde que representa o local do crime."]}),e.jsx("br",{}),"O jogo contém ",C(),", mas para essa parte, você vê apenas 4 opções de cada."]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," a blue card that represents the means by which the death occurred in your last crime, usually a weapon.",e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a red card that represents evidence that was at the crime scene.",l&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a yellow card that represents the victim of the crime."]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Select"})," a green card that represents the crime scene."]}),e.jsx("br",{}),"The game contains ",C(),", but for this part, you only see 4 options of each."]})})}),e.jsx("ul",{className:"h-items-selection",children:d.map(j=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(fe,{onClick:()=>S(o[j]),children:e.jsx(k,{item:o[j],cardWidth:m,isSelected:[p,x,b,h].includes(j)})})},j))}),e.jsxs(R,{children:[e.jsx(K,{onClick:w,size:"large",children:e.jsx(a,{pt:"Selecionar aleatoriamente",en:"Random picks"})}),e.jsx(ee,{disabled:!p||!x,onClick:()=>c({weaponId:p,evidenceId:x,locationId:h,victimId:b})})]})]})}function ce({goToStep:s}){return e.jsx(K,{onClick:()=>s(1),size:"large",children:e.jsx(a,{pt:"Reiniciar",en:"Restart"})})}function pn({announcement:s,items:n,selections:o,updateSelections:t,causeOfDeathTile:r,goToStep:c}){const[i,l]=I.useState(),m=p=>{l(p.value)};return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"Como foi seu último crime?",en:"How was your last crime?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Baseado somente no ",e.jsx(ve,{children:"meio do crime (carta azul)"}),", selecione a causa da morte de sua vítima."]}),en:e.jsxs(e.Fragment,{children:["Based solely on the ",e.jsx(ve,{children:"mean of murder (blue card)"})," you've chosen, select your victim's cause of death."]})})}),e.jsxs(R,{children:[e.jsx(Y,{items:n,weaponId:o.weaponId??"",evidenceId:o.evidenceId??"",victimId:o.victimId??"",locationId:o.locationId??"",highlight:"weapon"}),e.jsx(V,{tile:r,onSelectValue:m,index:i})]}),e.jsxs(R,{children:[e.jsx(ce,{goToStep:c}),e.jsx(ee,{disabled:i===void 0,onClick:()=>t({causeOfDeathIndex:i})})]})]})}function jn({announcement:s,user:n,items:o,selections:t,updateSelections:r,locationTile:c,groupedItems:i,goToStep:l,isLocationGame:m}){const p=U(12,{gap:8,minWidth:50,maxWidth:200}),[u,x]=I.useState(),f=i[n.itemGroupIndex],h=v=>{x(v.value)};return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"Onde foi o crime?",en:"Where was the crime?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:[m?"Baseado em sua carta do local (verde), selecione uma dica de onde o crime aconteceu.":"Baseado em qualquer uma das suas cartas (ou ambas), selecione o local onde o crime aconteceu.",e.jsx("br",{}),"Lembre-se que você está tentando ajudar os outros jogadores adivinhar o seu crime, seja inteligente!"]}),en:e.jsxs(e.Fragment,{children:[m?"Based on your location card (green), select a hint about where the crime happened.":"Based on any of your cards (or both), select the location where the crime happened.",e.jsx("br",{}),"Remember you are trying to help the players guess your crime, so be smart!"]})})}),e.jsxs(R,{children:[m?e.jsx(Y,{items:o,weaponId:t.weaponId??"",evidenceId:t.evidenceId??"",victimId:t.victimId??"",locationId:t.locationId??"",highlight:"location"}):e.jsx("ul",{className:"h-items-selection",children:f.map(v=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(k,{item:o[v],cardWidth:p,isSelected:Object.values(t).includes(v)})},v))}),e.jsx(V,{tile:c,onSelectValue:h,index:u})]}),e.jsxs(R,{children:[e.jsx(ce,{goToStep:l}),e.jsx(ee,{disabled:u===void 0,onClick:()=>r({locationIndex:u})})]})]})}function vn({announcement:s,items:n,causeOfDeathTile:o,reasonForEvidenceTile:t,victimTile:r,locationTile:c,selections:i,onSubmitCrime:l,updateSelection:m,players:p}){const{translate:u}=X();return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"Seu crime tá bom?",en:"Is your crime alright?"})}),e.jsx(q,{type:"rule",children:e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Revise seu crime."}),en:e.jsx(e.Fragment,{children:"Recap your crime."})})}),e.jsx(Y,{items:n,weaponId:i.weaponId??"",evidenceId:i.evidenceId??"",locationId:i.locationId??"",victimId:i.victimId??""}),e.jsxs("div",{className:"h-scene-tiles-list",children:[e.jsx(V,{tile:o,index:i.causeOfDeathIndex,onSelectValue:x=>m({causeOfDeathIndex:x.value})}),e.jsx(V,{tile:t,index:i.reasonForEvidenceIndex,onSelectValue:x=>m({reasonForEvidenceIndex:x.value})}),e.jsx(V,{tile:r,index:i.victimIndex,onSelectValue:x=>m({victimIndex:x.value})}),e.jsx(V,{tile:c,index:i.locationIndex,onSelectValue:x=>m({locationIndex:x.value})})]}),e.jsx(R,{align:"center",children:e.jsx(ge,{onClick:l,size:"large",children:e.jsx(a,{pt:"Enviar",en:"Submit"})})}),e.jsx(vs,{players:p,readyText:u("Já cometi meu crime","I'm done committing my crime"),readyTextPlural:u("Já cometemos nossos crimes","We're done committing our crimes")})]})}function In({announcement:s,items:n,selections:o,updateSelections:t,reasonForEvidenceTile:r,goToStep:c}){const[i,l]=I.useState(),m=p=>{l(p.value)};return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"O que tinha no seu último crime?",en:"What was in your last crime?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Baseado somente em seu ",e.jsx(Ie,{children:"objeto (carta vermelha)"}),", selecione o que o objeto significa para o crime."]}),en:e.jsxs(e.Fragment,{children:["Based solely on the ",e.jsx(Ie,{children:"object (red card)"})," you've chosen, select the meaning of it to the crime."]})})}),e.jsxs(R,{children:[e.jsx(Y,{items:n,weaponId:o.weaponId??"",evidenceId:o.evidenceId??"",victimId:o.victimId??"",locationId:o.locationId??"",highlight:"evidence"}),e.jsx(V,{tile:r,onSelectValue:m,index:i})]}),e.jsxs(R,{children:[e.jsx(ce,{goToStep:c}),e.jsx(ee,{disabled:i===void 0,onClick:()=>t({reasonForEvidenceIndex:i})})]})]})}function fn({announcement:s,user:n,items:o,selections:t,updateSelections:r,victimTile:c,groupedItems:i,goToStep:l,isVictimGame:m}){const p=U(12,{gap:8,minWidth:50,maxWidth:200}),[u,x]=I.useState(),f=i[n.itemGroupIndex],h=v=>{x(v.value)};return e.jsxs(L,{announcement:s,children:[e.jsx(F,{children:e.jsx(a,{pt:"Quem foi a pobre alma que se foi?",en:"Who was the poor soul that taken?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:[m?"Baseado em sua carta da vítima (amarela), selecione  algo sobre quem morreu.":"Baseado em qualquer uma de suas cartas, selecione dicas sobre a vítima.",e.jsx("br",{}),"Lembre-se que você está tentando ajudar os outros jogadores adivinhar o seu crime, seja inteligente!"]}),en:e.jsxs(e.Fragment,{children:[m?"Based on your victim card (yellow), select something about who died.":"Based on any of your cards, select hints about the victim.",e.jsx("br",{}),"Remember you are trying to help the players guess your crime, so be smart!"]})})}),e.jsxs(R,{children:[m?e.jsx(Y,{items:o,weaponId:t.weaponId??"",evidenceId:t.evidenceId??"",victimId:t.victimId??"",locationId:t.locationId??"",highlight:"victim"}):e.jsx("ul",{className:"h-items-selection",children:f.map(v=>e.jsx("li",{className:"h-items-selection__item",children:e.jsx(k,{item:o[v],cardWidth:p,isSelected:Object.values(t).includes(v)})},v))}),e.jsx(V,{tile:c,onSelectValue:h,index:u})]}),e.jsxs(R,{children:[e.jsx(ce,{goToStep:l}),e.jsx(ee,{disabled:u===void 0,onClick:()=>r({victimIndex:u})})]})]})}function gn({players:s,state:n,user:o}){const{step:t,setStep:r,goToNextStep:c}=oe(0),[i,l]=I.useState({}),m=en(r),p=()=>{m(i)},u=y=>{l(_=>({..._,...y})),c()},x=y=>{l(_=>({..._,...y}))},f=()=>{const y=cn(n.groupedItems[o.itemGroupIndex]);l(y),m(y)},h=U(12,{gap:8,minWidth:50,maxWidth:96}),{isLocationGame:v,isVictimGame:b}=Z(n.items),g=e.jsx(P,{icon:e.jsx(ps,{}),title:e.jsx(a,{pt:"A Convenção",en:"The Convention"}),currentRound:n?.round?.current,duration:30,type:"overlay",children:e.jsx(ln,{})}),d=e.jsx(P,{icon:e.jsx(js,{}),title:e.jsx(a,{pt:"Causa da Morte",en:"Cause of Death"}),duration:3,type:"overlay",children:e.jsx(W,{children:e.jsx(a,{pt:"Como a vítima morreu?",en:"How did the victim die?"})})}),S=e.jsx(P,{icon:e.jsx(us,{}),title:e.jsx(a,{pt:"Evidências?",en:"Evidence?"}),duration:3,type:"overlay",children:e.jsx(W,{children:e.jsx(a,{pt:"Conte-nos sobre o objeto que você escolheu.",en:"Tell us about the object you selected."})})}),w=e.jsx(P,{icon:e.jsx(Be,{}),title:e.jsx(a,{pt:"Sobre a Vítima",en:"About the Victim"}),duration:3,type:"overlay",children:e.jsx(W,{children:e.jsx(a,{pt:"Quem foi a vítima?",en:"Who was the victim?"})})}),C=e.jsx(P,{icon:e.jsx(Me,{}),title:e.jsx(a,{pt:"Local do Crime",en:"Crime Location"}),duration:3,type:"overlay",children:e.jsx(W,{children:e.jsx(a,{pt:"Onde que foi?",en:"Where was it?"})})}),j=e.jsx(P,{icon:e.jsx(xs,{}),title:e.jsx(a,{pt:"Revisão",en:"Review"}),duration:3,type:"overlay"});return e.jsx(ie,{phase:n?.phase,allowedPhase:D.CRIME_SELECTION,children:e.jsxs(re,{step:t,players:s,waitingRoom:{content:e.jsx(Y,{items:n.items,weaponId:i.weaponId??"",evidenceId:i.evidenceId??"",victimId:i.victimId??"",locationId:i.locationId??""})},children:[e.jsx(Ae,{round:n?.round,onPressButton:c,buttonText:" ",time:5}),e.jsxs("div",{children:[e.jsx(xn,{user:o,groupedItems:n.groupedItems,items:n.items,selections:i,updateSelections:u,announcement:g,isLocationGame:v,isVictimGame:b,cardWidth:h}),e.jsx(Pe,{onClick:f,size:"large",children:"Random Crime"})]}),e.jsx(pn,{items:n.items,causeOfDeathTile:n.causeOfDeathTile,selections:i,updateSelections:u,goToStep:r,announcement:d}),e.jsx(In,{items:n.items,reasonForEvidenceTile:n.reasonForEvidenceTile,selections:i,updateSelections:u,goToStep:r,announcement:S}),e.jsx(fn,{user:o,items:n.items,selections:i,updateSelections:u,victimTile:n.victimTile,groupedItems:n.groupedItems,goToStep:r,announcement:w,isVictimGame:b}),e.jsx(jn,{user:o,items:n.items,groupedItems:n.groupedItems,locationTile:n.locationTile,selections:i,updateSelections:u,goToStep:r,announcement:C,isLocationGame:v}),e.jsx(vn,{items:n.items,causeOfDeathTile:n.causeOfDeathTile,reasonForEvidenceTile:n.reasonForEvidenceTile,victimTile:n.victimTile,locationTile:n.locationTile,selections:i,onSubmitCrime:p,updateSelection:x,players:s,announcement:j})]})})}function se({cardWidth:s,cardType:n}){const o=Ue[n]??"";return e.jsx(k,{item:{id:`dmhk-${o}-000`,type:n,name:{pt:"?",en:"?"},itemId:"0"},cardWidth:s,isSelected:!1})}function A({status:s,withDescription:n=!1,className:o=""}){const t="crime-guess-status";switch(s){case E.LOCKED:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(He,{})}),e.jsx(G,{children:e.jsx(a,{pt:"TRAVADO",en:"LOCKED"})}),n&&e.jsx(a,{pt:"Você já tinha adivinhado esse corretamente",en:"You already guessed this one correctly"})]});case E.CORRECT:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(qe,{})}),e.jsx(G,{children:e.jsx(a,{pt:"CORRETO",en:"CORRECT"})}),n&&e.jsx(a,{pt:"Você acertou arma e objeto",en:"You got the weapon and object correctly"})]});case E.ONE:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(Ge,{})}),e.jsx(G,{children:e.jsx(a,{pt:"SOMENTE UM",en:"ONE ONLY"})}),n&&e.jsx(a,{pt:"Um dos items está correto",en:"One of the items is correct"})]});case E.TWO:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(ke,{})}),e.jsx(G,{children:e.jsx(a,{pt:"DOIS",en:"TWO"})}),n&&e.jsx(a,{pt:"Dois dos items estão corretos",en:"Two of the items are correct"})]});case E.THREE:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(We,{})}),e.jsx(G,{children:e.jsx(a,{pt:"TRÊS",en:"THREE"})}),n&&e.jsx(a,{pt:"Três dos items estão corretos",en:"Three of the items are correct"})]});case E.WRONG:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx($e,{})}),e.jsx(G,{children:e.jsx(a,{pt:"ERRADO",en:"WRONG"})}),n&&e.jsx(a,{pt:"Você errou todas as coisas, mas está no quadrante certo",en:"You got all things wrong but you are in the right group"})]});case E.WRONG_GROUP:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(N,{icon:e.jsx(De,{})}),e.jsx(G,{children:e.jsx(a,{pt:"GRUPO ERRADO",en:"WRONG GROUP"})}),n&&e.jsx(a,{pt:"Você é tão burro que você escolheu items no grupo errado",en:"You're so dumb you chose items in the wrong group"})]});default:return e.jsxs("span",{className:B(t,`${t}--${s}`,o),children:[e.jsx(Ss,{}),e.jsx(a,{pt:"?",en:"?"}),");",n&&e.jsx(a,{pt:"Recebido status desconhecido",en:"Received unknown guess status"})]})}}const $=100;function de({crime:s,player:n,scenesOrder:o,scenes:t,selectedWeaponId:r,selectedEvidenceId:c,selectedVictimId:i,selectedLocationId:l,history:m,items:p,isLocked:u,isVictimGame:x,isLocationGame:f}){const[h,v]=I.useState(-1),b=!!(r&&r)&&(x?i:!0)&&(f?l:!0),g=h>=0&&m?m[h].weaponId:r,d=h>=0&&m?m[h].evidenceId:c,S=h>=0&&m?m[h].victimId:i,w=h>=0&&m?m[h].locationId:l,C=Ne(n.avatarId),j=m?.length;return e.jsxs("div",{className:"h-crime",children:[e.jsxs("div",{className:"h-crime__player",style:{backgroundColor:C},children:[e.jsx("span",{className:"h-crime__player-avatar",children:e.jsx(Le,{avatarId:n.avatarId})}),e.jsx("span",{className:"h-crime__player-name",children:n.name})]}),e.jsx("div",{className:"h-crime__scenes",children:o.filter(y=>s.scenes[y]!==void 0).map(y=>{const _=t[y];return e.jsx(yn,{scene:_,playerIndex:s.scenes[y]},`crime-scene-${y}-by-${s.playerId}`)})}),e.jsx("div",{className:"h-crime__history",style:{borderColor:j?C:"transparent"},children:j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-crime__history-header",children:e.jsx(H,{title:e.jsx(a,{pt:"Histórico: passe o mouse nas rodadas",en:"History: hover the round numbers"}),children:e.jsx(gs,{})})}),m?.map((y,_)=>e.jsx(K,{ghost:!0,shape:"circle",size:"small",onMouseOver:()=>v(_),onMouseLeave:()=>v(-1),children:_+1},`history-entry-${_}`))]})}),e.jsxs("div",{className:"h-crime-selections",children:[g?e.jsx(k,{item:p[g],cardWidth:$}):e.jsx(se,{cardWidth:$,cardType:"weapon"}),d?e.jsx(k,{item:p[d],cardWidth:$}):e.jsx(se,{cardWidth:$,cardType:"evidence"}),x&&(S?e.jsx(k,{item:p[S],cardWidth:$}):e.jsx(se,{cardWidth:$,cardType:"victim"})),f&&(w?e.jsx(k,{item:p[w],cardWidth:$}):e.jsx(se,{cardWidth:$,cardType:"location"})),e.jsxs("div",{className:"h-crime-selections__status",children:[h>=0&&m&&m[h]&&e.jsx(A,{status:m[h].status}),h===-1&&u&&e.jsx(A,{status:"LOCKED"}),h===-1&&e.jsx("span",{className:"crime-guess-status",children:e.jsx(N,{icon:e.jsx(bs,{}),className:"invisible"})})]})]}),e.jsxs("div",{className:"h-crime__player",style:{backgroundColor:b?C:void 0},children:[u&&e.jsx(Cs,{}),!u&&b&&e.jsx(os,{})]})]})}function yn({scene:s,playerIndex:n}){const{language:o}=X();return e.jsxs("li",{className:B("h-crime-scene",`h-crime-scene--${s.type}`),children:[e.jsxs("div",{className:B("h-crime-scene__label",`h-crime-scene__label--${s.type}`),children:[e.jsx(bn,{type:s.type})," ",s.title[o]]}),e.jsx("div",{className:"h-crime-scene__value",children:s.values[n][o]})]})}function bn({type:s}){switch(s){case"cause":return e.jsx(Zs,{});case"evidence":return e.jsx(Ks,{});case"location":return e.jsx($s,{});case"victim":return e.jsx(is,{});default:return e.jsx(Hs,{})}}function Je({items:s,weaponId:n,evidenceId:o,groupedItems:t}){const r=U(12,{gap:8,minWidth:30,maxWidth:200});return e.jsx("ul",{className:"h-grouped-items-board",children:Object.keys(t).map(c=>e.jsx("li",{className:"reset-li",children:e.jsx("ul",{className:"h-grouped-items-board__group",children:t[c].map(i=>e.jsx("li",{className:"reset-li",children:e.jsx(k,{item:s[i],cardWidth:r,isSelected:[n,o].includes(i)})},i))})},`group-${c}`))})}function Sn({user:s,items:n,groupedItems:o,onSubmitMark:t,sceneTile:r,crimes:c,scenes:i,scenesOrder:l,announcement:m,isVictimGame:p,isLocationGame:u}){const[x,f]=I.useState(),h=b=>{f(b.value)},v=c.find(b=>b.playerId===s.id);return e.jsxs(L,{announcement:m,children:[e.jsx(F,{children:e.jsx(_e,{children:r.description})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsx(e.Fragment,{children:"Baseado em suas cartas, selecione uma opção na nova carta de detalhes da Cena do Crime abaixo."}),en:e.jsx(e.Fragment,{children:"Based on your cards, select an option in the new Scene card below."})})}),e.jsx(W,{contained:!0,children:e.jsx(ze,{items:[{key:"weapons-evidences",label:e.jsx(a,{pt:"Clique para ver todas as cartas",en:"Click to see all cards"}),children:e.jsx(Je,{groupedItems:o,items:n,weaponId:s.weaponId,evidenceId:s.evidenceId})}]})}),e.jsxs(R,{children:[v&&e.jsx(de,{crime:v,scenes:i,scenesOrder:l,items:n,player:s,selectedWeaponId:s.weaponId,selectedEvidenceId:s.evidenceId,selectedVictimId:s.victimId,selectedLocationId:s.locationId,isLocationGame:u,isVictimGame:p},`crime-by-${v.playerId}`),e.jsx(V,{tile:r,onSelectValue:h,index:x})]}),e.jsx(R,{children:e.jsx(ge,{size:"large",disabled:x===void 0,onClick:()=>{x!==void 0&&t({sceneIndex:x})},children:e.jsx(a,{pt:"Enviar",en:"Send"})})})]})}function Cn({players:s,state:n,user:o}){const{step:t,setStep:r,goToNextStep:c}=oe(0),i=sn(r),{isLocationGame:l,isVictimGame:m}=Z(n.items);Fe(()=>{i({sceneIndex:dn()})},[]);const p=e.jsx(P,{icon:e.jsx(ys,{}),title:e.jsx(a,{pt:"Nova pista",en:"New clue"}),currentRound:n?.round?.current,type:"overlay",children:e.jsxs(W,{children:[e.jsx(a,{pt:"Compartilhe mais uma pista sobre seu crime:",en:"Share one more piece of information about your crime:"}),e.jsx("br",{}),e.jsx(G,{children:e.jsx(_e,{children:n.currentScene.description})})]})});return e.jsx(ie,{phase:n?.phase,allowedPhase:D.SCENE_MARKING,children:e.jsxs(re,{step:t,players:s,children:[e.jsx(Ae,{round:n?.round,onPressButton:c,buttonText:" ",time:5}),e.jsx(Sn,{user:o,groupedItems:n.groupedItems,items:n.items,onSubmitMark:i,sceneTile:n.currentScene,scenes:n.scenes,scenesOrder:n.scenesOrder,crimes:n.crimes,announcement:p,isVictimGame:m,isLocationGame:l})]})})}function Xe({setActivePlayerId:s,players:n,guesses:o,user:t,history:r,children:c}){return e.jsxs("div",{className:"h-players-cards-container",children:[e.jsx("ul",{className:"h-players-cards",children:rs(n).map(i=>{const l=t.id===i.id||!!(o[i.id]?.weaponId&&o[i.id]?.evidenceId),m=tn(r,i.id);return e.jsx("li",{children:e.jsx(fe,{onClick:()=>s(i.id),hoverType:"tint",className:"h-players-cards__button",children:e.jsx(Ts,{size:"small",player:i,withName:!0,className:"h-players-cards__avatar",replacementAvatar:m&&e.jsx(N,{icon:e.jsx(He,{}),className:"h-players-cards__seal"})||l&&e.jsx(N,{icon:e.jsx(Ve,{}),className:"h-players-cards__seal"})})})},`player-card-${i.id}`)})}),c]})}const En=s=>{const n=Ke[s]??"";return{id:`dmhk-${s}-xxx`,type:n,name:{pt:"-",en:"-"},itemId:"0"}};function On({items:s,weaponId:n,evidenceId:o,victimId:t,locationId:r,groupedItems:c,onSelectItem:i,activeColor:l,isLocked:m,wrongGroups:p=[],wrongItems:u=[]}){const x=U(12,{gap:8,minWidth:50,maxWidth:96});return e.jsx("ul",{className:"h-grouped-items-board",style:l?{backgroundColor:l}:{},children:Object.keys(c).map((f,h)=>{const v=c[f],b=p.includes(h);return e.jsx("li",{children:e.jsx("ul",{className:"h-grouped-items-board__group",style:l?{borderColor:l}:{},children:v.map(g=>e.jsx("li",{children:e.jsx(fe,{onClick:m||b?void 0:()=>i(g),hoverType:"tint",disabled:b,children:b||u.includes(g)?e.jsx(fs,{id:"x",cardWidth:x}):e.jsx(k,{item:b?En(g.split("-")[1]):s[g],cardWidth:x,isSelected:[n,o,t,r].includes(g),activeColor:l})})},g))})},`group-${f}`)})})}function wn({user:s,groupedItems:n,items:o,players:t,scenes:r,scenesOrder:c,crimes:i,onSubmitGuesses:l,announcement:m,isVictimGame:p,isLocationGame:u}){const[x,f]=I.useState({}),[h,v]=I.useState("");Fe(()=>{l({guesses:Re(n,t,s,p,u)})},[]),I.useEffect(()=>{f(T=>({...T,...rn(s.history)}))},[s.history]);const b=T=>{if(h&&T){const O={...x[h]??{weaponId:void 0,evidenceId:void 0,victimId:void 0,locationId:void 0,isComplete:!1}};T.includes("wp")&&(O.weaponId=T),T.includes("ev")&&(O.evidenceId=T),p&&T.includes("vt")&&(O.victimId=T),u&&T.includes("lc")&&(O.locationId=T),f(le=>({...le,[h]:{...O,isComplete:!!O?.weaponId&&!!O?.evidenceId&&(p?!!O?.victimId:!0)&&(u?!!O?.locationId:!0)}}))}},{isAllComplete:g,activeCrime:d,isOwnCrime:S,isLocked:w,activeWeaponId:C,activeEvidenceId:j,activeVictimId:y,activeLocationId:_}=I.useMemo(()=>{const T=Object.keys(t).length,O=Object.values(x).length===T-1&&Object.values(x).every(z=>z.weaponId&&z.evidenceId&&(p?z.victimId:!0)&&(u?z.locationId:!0)),le=i.find(z=>z.playerId===h),Se=h===s.id,Ze=x?.[h]??{},Ce=te(Ye(s.history,h)),Ee=[E.CORRECT,E.LOCKED].includes(Ce?.status),{activeWeaponId:es,activeEvidenceId:ss,activeVictimId:ns,activeLocationId:ts}=Rn(Se,Ee,s,Ze,Ce);return{isAllComplete:O,activeCrime:le,isOwnCrime:Se,isLocked:Ee,activeWeaponId:es,activeEvidenceId:ss,activeVictimId:ns,activeLocationId:ts}},[s,h,x,i,t,p,u]);return e.jsxs(L,{announcement:m,children:[e.jsx(F,{children:e.jsx(a,{pt:"Quais foram os crimes?",en:"What were the crimes?"})}),e.jsx(q,{type:"action",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Selecione cada jogador abaixo, analise suas respostas sobre o crime, e selecione as cartas que compõem o crime.",e.jsx("br",{}),"As cartas sempre estarão no mesmo quadrante, mas elas não são exclusivas a um jogador e diferentes crimes podem usar as mesmas cartas.",e.jsx("br",{}),"Crimes que já tem todas as cartas selecionados são indicados por uma faca."]}),en:e.jsxs(e.Fragment,{children:["Select each player below, analyze their answers about the crime, and select the cards that make up the crime.",e.jsx("br",{}),"The cards will always be in the same quadrant, but they are not exclusive to one player and different crimes can use the same cards.",e.jsx("br",{}),"Crimes that already have all cards selected are indicated by a knife."]})})}),e.jsx(ws,{dev:!0,children:e.jsx(R,{children:e.jsx(Pe,{onClick:()=>f(Re(n,t,s,p,u)),children:e.jsx(a,{pt:"Seleção Aleatória Semi-inteligente",en:"Semi-intelligent Random Selection"})})})}),g&&e.jsx(R,{align:"center",children:e.jsx(ge,{size:"large",disabled:!g,onClick:()=>l({guesses:x}),children:e.jsx(a,{pt:"Enviar Respostas",en:"Send Guesses"})})}),e.jsx(Xe,{user:s,setActivePlayerId:v,players:t,guesses:x,history:s.history,children:e.jsx(On,{items:o,weaponId:C,evidenceId:j,victimId:y,locationId:_,groupedItems:n,onSelectItem:b,activeColor:h?Ne(t[h]?.avatarId):void 0,isLocked:S||w,wrongGroups:s?.wrongGroups?.[h]??[],wrongItems:s?.wrongItems?.[h]??[]})}),d&&e.jsx(Rs,{title:"Crime",icon:e.jsx(Os,{}),children:e.jsx(de,{crime:d,scenes:r,scenesOrder:c,items:o,history:s?.history[d.playerId]??[],player:t[d.playerId],isLocked:S||w,selectedWeaponId:C,selectedEvidenceId:j,selectedVictimId:y,selectedLocationId:_,isLocationGame:u,isVictimGame:p},`crime-by-${d.playerId}`)}),e.jsx("div",{className:"h-empty-space"})]})}const Rn=(s,n,o,t,r)=>s?{activeWeaponId:o.weaponId,activeEvidenceId:o.evidenceId,activeVictimId:o.victimId,activeLocationId:o.locationId}:n?{activeWeaponId:r.weaponId,activeEvidenceId:r.evidenceId,activeVictimId:r.victimId,activeLocationId:r.locationId}:{activeWeaponId:t.weaponId,activeEvidenceId:t.evidenceId,activeVictimId:t.victimId,activeLocationId:t.locationId};function Tn({players:s,state:n,user:o}){const{step:t,setStep:r}=oe(0),c=nn(r),{isLocationGame:i,isVictimGame:l}=Z(n.items),m=e.jsx(P,{icon:e.jsx(Es,{}),title:e.jsx(a,{pt:"Tente Adivinhar",en:"Try to guess"}),currentRound:n?.round?.current,type:"overlay",children:e.jsx(mn,{})});return e.jsx(ie,{phase:n?.phase,allowedPhase:D.GUESSING,children:e.jsx(re,{step:t,players:s,children:e.jsx(wn,{user:o,groupedItems:n.groupedItems,items:n.items,players:s,scenes:n.scenes,scenesOrder:n.scenesOrder,crimes:n.crimes,onSubmitGuesses:c,announcement:m,isLocationGame:i,isVictimGame:l})})})}function Nn({players:s,results:n}){const o=[{title:"",dataIndex:"playerId",render:r=>e.jsx(Ws,{player:s[r],size:"small",addressUser:!0})},...ne.orderBy(Object.keys(n)).map(r=>({title:e.jsx(Le,{avatarId:s[r].avatarId,size:"small"}),dataIndex:r,render:c=>e.jsx(_n,{status:c})}))],t=ne.orderBy(Object.entries(n)).filter(([r,c])=>s[r].type==="player").map(([r,c])=>({playerId:r,...c}));return e.jsx(ks,{columns:o,dataSource:t,pagination:!1,size:"small",bordered:!0})}function _n({status:s}){switch(s){case E.LOCKED:case E.CORRECT:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(qe,{}),shape:"square",alt:s})});case E.ONE:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(Ge,{}),shape:"square",alt:s})});case E.TWO:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(ke,{}),shape:"square",alt:s})});case E.THREE:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(We,{}),shape:"square",alt:s})});case E.WRONG:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx($e,{}),shape:"square",alt:s})});case E.WRONG_GROUP:return e.jsx(H,{title:e.jsx(A,{status:s,withDescription:!0}),color:"white",children:e.jsx(N,{icon:e.jsx(De,{}),shape:"square",alt:s})});default:return e.jsx("span",{children:"•"})}}function Bn({user:s,groupedItems:n,items:o,players:t,scenes:r,scenesOrder:c,crimes:i,onSeeRanking:l,round:m,results:p,isFirstRunThrough:u,announcement:x,isVictimGame:f,isLocationGame:h}){Is();const[v,b]=I.useState(""),g=Object.keys(t).length,d=i.find(y=>y.playerId===v),S=v===s.id,w=d?s.history?.[d?.playerId]??[]:[],C=te(w),j=on(C);return e.jsxs(L,{announcement:x,children:[e.jsx(F,{children:e.jsx(a,{pt:"Resultado",en:"Results"})}),e.jsx(Bs,{content:e.jsx(Qe,{round:m})}),e.jsx(q,{type:"rule",children:e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Veja aqui como todos os jogadores foram. Passe o mouse nos ícones para saber mais detalhes.",e.jsx("br",{}),"As colunas são os crimes e as linhas são os chutes dessa rodada de cada jogador."]}),en:e.jsxs(e.Fragment,{children:["See how all players did. Hover the icons to see details.",e.jsx("br",{}),"The columns are the crimes and the rows are the guesses for each player."]})})}),e.jsxs(W,{contained:!0,children:[e.jsx(Nn,{players:t,results:p}),e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Você acertou ",s.correctCrimes," pares e está com um total (secreto) de"," ",e.jsxs(M,{children:[s.score+s.secretScore," pontos"]}),"."]}),en:e.jsxs(e.Fragment,{children:["You guesses ",s.correctCrimes," crimes and have a (secret) total of"," ",e.jsxs(M,{children:[s.score+s.secretScore," points"]}),"."]})})]}),e.jsx(R,{children:e.jsx(W,{contained:!0,children:e.jsx(ze,{items:[{key:"weapons-evidences",label:e.jsx(a,{pt:" Ver todas cartas",en:"See all cards"}),children:e.jsx(Je,{items:o,weaponId:s.weaponId,evidenceId:s.evidenceId,groupedItems:n})}]})})}),e.jsxs(Xe,{user:s,setActivePlayerId:b,players:t,guesses:{},history:s.history,children:[!v&&e.jsx(W,{contained:!0,children:e.jsx(a,{pt:"Clique em um jogador para ver o resultado do seu crime",en:"Click a player to see their crime"})}),!!v&&e.jsx(W,{contained:!0,className:!j&&!S?Oe("tada"):"",children:C?e.jsx(A,{status:C.status,withDescription:!0}):S?e.jsx(a,{pt:"Este é o seu próprio crime",en:"This is your own crime"}):""},`instruction-status-${v}`),d&&e.jsx("div",{className:Oe("slideInUp",{speed:"fast"}),children:e.jsx(de,{crime:d,scenes:r,scenesOrder:c,items:o,history:s.history[d.playerId],player:t[d.playerId],isLocked:j,selectedWeaponId:S?s.weaponId:C.weaponId,selectedEvidenceId:S?s.evidenceId:C.evidenceId,selectedVictimId:S?s.victimId:C.victimId,selectedLocationId:S?s.locationId:C.locationId,isLocationGame:h,isVictimGame:f})},`crime-by-${d.playerId}`)]}),e.jsx(R,{children:u?e.jsx(_s,{onClick:l,onExpire:l,duration:Math.min(g*15,60),icon:e.jsx(we,{}),children:e.jsx(a,{pt:"Ver Ranking",en:"See Ranking"})}):e.jsx(K,{onClick:l,icon:e.jsx(we,{}),children:e.jsx(a,{pt:"Ver Ranking",en:"See Ranking"})})})]})}function Wn({ranking:s,players:n,goToPreviousStep:o,round:t}){const r=t.total-t.current+1;return e.jsxs(Ms,{players:n,ranking:s,gainedPointsDescriptions:[e.jsx(a,{pt:e.jsxs(e.Fragment,{children:["Pares corretos ganham ",r," pontos nessa rodada. 1 ponto a menos na próxima."]}),en:e.jsxs(e.Fragment,{children:["Correct pairs get ",r," points this round. 1 point less next round."]})},"1")],children:[e.jsx(R,{children:e.jsx(K,{onClick:o,children:e.jsx(a,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(cs,{round:t})]})}function kn({players:s,state:n,user:o}){const{step:t,goToNextStep:r,goToPreviousStep:c}=oe(0),[i,l]=I.useState(!0),{isLocationGame:m,isVictimGame:p}=Z(n.items);I.useEffect(()=>{i&&t>1&&l(!1)},[t,i]);const u=e.jsx(P,{icon:e.jsx(Ns,{}),title:e.jsx(a,{pt:"Resultado",en:"Results"}),currentRound:n?.round?.current,type:"overlay",children:e.jsx(W,{children:e.jsx(Qe,{round:n.round})})});return e.jsx(ie,{phase:n?.phase,allowedPhase:D.REVEAL,children:e.jsxs(re,{step:t,players:s,children:[e.jsx(Bn,{user:o,groupedItems:n.groupedItems,items:n.items,players:s,scenes:n.scenes,scenesOrder:n.scenesOrder,crimes:n.crimes,onSeeRanking:r,round:n.round,results:n.results,isFirstRunThrough:i,announcement:u,isLocationGame:m,isVictimGame:p}),e.jsx(Wn,{ranking:n.ranking,players:s,goToPreviousStep:c,round:n.round})]})})}function Mn({state:s,players:n,user:o}){const t=I.useMemo(()=>ne.orderBy(s.crimes??[],["playerId"]),[s.crimes]),{isLocationGame:r,isVictimGame:c}=Z(s.items);return e.jsxs(As,{state:s,players:n,announcementIcon:e.jsx(Ps,{}),children:[e.jsx(Vs,{players:n,achievements:s.achievements,reference:Fs}),e.jsx("ul",{children:t.map(i=>e.jsx(de,{crime:i,items:s.items,player:n[i.playerId],scenes:s.scenes,scenesOrder:s.scenesOrder,selectedEvidenceId:i.evidenceId,selectedWeaponId:i.weaponId,selectedVictimId:i.victimId,selectedLocationId:i.locationId,history:o.history?.[i.playerId],isVictimGame:c,isLocationGame:r},`crime-by-${i.playerId}`))})]})}function Pn(s){switch(s.phase){case D.CRIME_SELECTION:return gn;case D.SCENE_MARKING:return Cn;case D.GUESSING:return Tn;case D.REVEAL:return kn;case ms.DEFAULT.GAME_OVER:return Mn;default:return ls}}function Eo(){return e.jsx(ds,{gameCollection:as.CRIMES_HEDIONDOS,getActiveComponent:Pn})}export{Eo as default};
