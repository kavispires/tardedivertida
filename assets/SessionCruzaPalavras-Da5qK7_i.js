import{r as m,$ as L,f as M,j as e,T as l,au as T,n as ye,q as J,av as H,bP as be,P as Se,c as A,y as Ie,Q as Re,F as de,b_ as X,i as we,B as G,ar as Pe,ay as ue,c0 as Ee,c7 as Te,bZ as Oe,v as me,a$ as Ne,c8 as Ae,s as Ge,aF as We}from"./index-CoVhiA3v.js";import{u as ee,S as k,a as _,P as U,f as Be,c as $e,d as Le,e as Me}from"./Session-BLcC9LVM.js";import{G as ke}from"./GridIcon-C5nb441y.js";import{S as D,P as F,a as V,u as _e}from"./StepSwitcher-BSz7TEM5.js";import{R as Ue}from"./RoundAnnouncement-mF4MCcL0.js";import{P as b}from"./PointsHighlight-Bum4t0C9.js";import{I as re}from"./useDevFeatures-qx_y2BmL.js";import{T as z}from"./TextHighlight-ShRqpmG6.js";import{R as W}from"./RuleInstruction-DqDalqaM.js";import{P as te}from"./PopoverRule-Bujpr9Ob.js";import{S as De,a as Fe}from"./SpreadsheetGrid-BReAwUYk.js";import{a as Ve}from"./DebugOnly-BoQDGkmJ.js";import{u as qe}from"./useTDBaseUrl-BF9foKiS.js";import{I as ze}from"./ItemCard-B8husr-Z.js";/* empty css                             */import{I as pe}from"./ImageBlurButtonContainer-Bg7daXTh.js";import{I as He}from"./ImageCard-xYxKT3eI.js";import{u as he}from"./useMock-BTwFqVDh.js";import{G as Ye}from"./GuessIcon-DzgnwIo4.js";import{u as Ke,a as Ze,P as Qe,D as Je}from"./core.esm-BIpn27-Z.js";import{P as Xe}from"./PlayerAvatar-BAjq-_YY.js";import{R as xe}from"./PlusCircleFilled-CS2bt0oz.js";import{D as er,a as rr}from"./DragAndDrop-DgN32yfZ.js";import{R as tr}from"./iconUtil-DY6khdGs.js";import{R as sr}from"./ThunderboltOutlined-CONOiGkX.js";import{R as nr}from"./RankIcon-l-BeQ4Xu.js";import{T as ar}from"./TimedButton-7ArCBiW8.js";import{T as je}from"./TitledContainer-DDrlzhl5.js";import{P as se}from"./PlayerAvatarName-BYH_KWDT.js";import{F as or}from"./Table-D7uOUq0H.js";import{R as ir}from"./TrophyOutlined-pA7E403w.js";import{S as cr}from"./StepRankingWrapper-6XlucNmu.js";import{V as lr}from"./VerifyListIcon-BnJy0HOX.js";import{u as dr}from"./useBooleanDictionary-BmqOe9Af.js";import{C as ur}from"./Card-DB2GoAfq.js";import{B as mr}from"./index-DPzn5qsA.js";import{T as pr}from"./TrophyIcon-BxM6sQbm.js";import"./RulesModal-Yq2yGmts.js";import{G as hr}from"./GameOverWrapper-CkIGi8cr.js";import{A as xr}from"./Achievements-BZ2Yelsq.js";import{a as jr}from"./achievements-B2fypp9m.js";import{D as fr}from"./index-D17I2zOL.js";import"./Game-D9--A4PH.js";import"./useMutation-B9bDIfY1.js";import"./speech-6pn-7Ny_.js";import"./index-0FNjHu8t.js";import"./index-Bus2BJL6.js";import"./Overflow-CFbDCDwq.js";import"./extends-CF3RwP-h.js";import"./PurePanel-ik55Syi5.js";import"./PlusOutlined-DYep9iO2.js";import"./useToggle-CCbyBjB-.js";import"./useId-CS1ROYIv.js";import"./index-cxOg2Fuh.js";import"./index-BARFFdu0.js";import"./SignIn-pT1NcQz2.js";import"./GoogleIcon-7HB7ZTDH.js";import"./AnimatedGearIcon-DLC_H9K9.js";import"./AnimatedClockIcon-DetUs0wW.js";import"./Loading-iGl9Brrk.js";import"./AnimatedLoaderIcon-BkUsxcUZ.js";import"./WaitingRoomIcon-t7hxqkQK.js";import"./LikeFilled-CbNV1ySr.js";import"./StarIcon-JRzgzSMB.js";import"./MetricHighlight-CtZjqpce.js";import"./index-BffssVcp.js";import"./StarFilled-DW4hC0lN.js";import"./Sprite-C8m4q67c.js";import"./WarningOutlined-CBB_M11J.js";import"./ImageBlurButton-S2dQfNCu.js";import"./EllipsisOutlined-DNE0r0TO.js";import"./index-C1R_jMj2.js";import"./scrollTo-BXo0NIB3.js";import"./CaretDownOutlined-BZp1F0a2.js";import"./CaretUpOutlined-BFta34rs.js";import"./RankingBoard-UjbWT_Oo.js";import"./WritingIcon-DmfMB9hA.js";import"./TheEndIcon-Ccc3n1fv.js";import"./index-BhmKfZcS.js";import"./progress-CdlkhE3t.js";import"./Medal-BP5y7HC4.js";var gr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"};function Y(){return Y=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Y.apply(this,arguments)}const Cr=(r,t)=>m.createElement(L,Y({},r,{ref:t,icon:gr})),vr=m.forwardRef(Cr);var yr={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"};function K(){return K=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},K.apply(this,arguments)}const br=(r,t)=>m.createElement(L,K({},r,{ref:t,icon:yr})),Sr=m.forwardRef(br);var Ir={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zm-40 72H184v656h656V184zM640.01 338.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-square",theme:"outlined"};function Z(){return Z=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Z.apply(this,arguments)}const Rr=(r,t)=>m.createElement(L,Z({},r,{ref:t,icon:Ir})),wr=m.forwardRef(Rr);var Pr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};function Q(){return Q=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Q.apply(this,arguments)}const Er=(r,t)=>m.createElement(L,Q({},r,{ref:t,icon:Pr})),Tr=m.forwardRef(Er),P={WORDS_SELECTION:"WORDS_SELECTION",CLUE_WRITING:"CLUE_WRITING",GUESSING:"GUESSING",REVEAL:"REVEAL"},ne={SUBMIT_WORDS:"SUBMIT_WORDS",SUBMIT_CLUE:"SUBMIT_CLUE",SUBMIT_GUESSES:"SUBMIT_GUESSES"};function Or(r){const{translate:t}=M(),s=ee({actionName:"submit-words",onBeforeCall:()=>r(2),onError:()=>r(0),successMessage:t("Palavras enviadas com sucesso","Words submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar suas palavras","Oops, the application failed to send your words")});return n=>{s({action:ne.SUBMIT_WORDS,...n})}}function Nr(r){const{translate:t}=M(),s=ee({actionName:"submit-clue",onBeforeCall:()=>r(3),onError:()=>r(1),successMessage:t("Dica enviada com sucesso","Clue submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar sua dica","Oops, the application failed to send your clue")});return n=>{s({action:ne.SUBMIT_CLUE,...n})}}function Ar(r){const{translate:t}=M(),s=ee({actionName:"submit-guesses",onBeforeCall:()=>r(2),onError:()=>r(1),successMessage:t("Respostas enviadas com sucesso","Guesses submitted successfully"),errorMessage:t("Vixi, o aplicativo encontrou um erro ao tentar enviar suas respostas","Oops, the application failed to send your guesses")});return n=>{s({action:ne.SUBMIT_GUESSES,...n})}}function fe({playerCount:r}){return e.jsx(re,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você tem uma coordenada específica e única na grade de palavras.",e.jsx("br",{}),"Escreva uma dica (palavra única) que conecte as palavras da linha e da coluna assinalada a você.",e.jsx("br",{}),"Escreva algo bem simples e óbvio porque se ninguém entender você perderá"," ",e.jsxs(b,{type:"negative",children:["- ",r]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["You will get an unique coordinate in the word grid.",e.jsx("br",{}),"You must write a single word clue that connects the word in the column and in the row of your coordinate.",e.jsx("br",{}),"Write something simple and obvious because if nobody gets your clue you will lose"," ",e.jsxs(b,{type:"negative",children:["- ",r]}),"points."]})})})}function ae({playerCount:r}){return e.jsx(re,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Você ganha ",e.jsx(b,{children:"+2"})," pontos para cada célula com uma resposta correta sua.",e.jsx("br",{}),e.jsx(b,{children:"+1"})," ponto para cada célula com uma dica mas uma resposta errada sua.",e.jsx("br",{}),e.jsx(b,{children:"+1"})," ponto para cada voto correto que sua dica recebeu.",e.jsx("br",{}),"Mas se ninguém acertar sua dica, você perde"," ",e.jsxs(b,{type:"negative",children:["- ",r]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["You get ",e.jsx(b,{children:"+2"})," points for each cell with your correct answer.",e.jsx("br",{}),e.jsx(b,{children:"+1"})," point for each cell with a clue but with a wrong answer of yours.",e.jsx("br",{}),e.jsx(b,{children:"+1"})," point for each correct vote your clue received.",e.jsx("br",{}),"But if nobody gets your clue correctly, you lose"," ",e.jsxs(b,{type:"negative",children:["- ",r]})," points."]})})})}function Gr({user:r,grid:t}){const s=t[r.currentClueCoordinate];return!r.clue||!s?null:e.jsxs(T,{orientation:"vertical",className:"mb-10",children:[e.jsx(ye,{size:"xx-small",children:e.jsx(l,{pt:"Sua dica",en:"Your clue"})}),e.jsxs("span",{children:[e.jsx(z,{children:s.xText})," + ",e.jsx(z,{children:s.yText})," ="," ",e.jsx(z,{children:r.clue})]})]})}function Wr(r){return r.gridType==="contenders"?e.jsx(Br,{...r}):r.gridType==="images"?e.jsx($r,{...r}):r.gridType==="items"?e.jsx(Lr,{...r}):e.jsx(e.Fragment,{children:r.cell.text})}function Br({cell:r}){const{shouldBeBlurred:t}=Ve(),s=qe("images"),n=J(8,{gap:16,minWidth:30,maxWidth:100}),o=r.id?.replace(/-/g,"/"),c=t(r.id);return e.jsxs("div",{className:"w-contender",style:{width:`${n}px`},children:[e.jsx(H,{title:r.text,children:e.jsx("span",{className:"w-contender-name",children:r.text})}),e.jsx(be,{src:`${s}/${o}.jpg`,width:n,className:A("w-contender-image",c&&"w-contender-image--blur"),fallback:`${Se.IN_GAME}/w-no-image.jpg`,alt:r.text})]})}function $r({cell:r}){const t=J(8,{gap:16,minWidth:30,maxWidth:100});return e.jsx("div",{className:"w-contender",style:{width:`${t}px`},children:e.jsx(pe,{cardId:r.id??"",children:e.jsx(He,{cardId:r.id??"",cardWidth:t})})})}function Lr({cell:r}){const t=J(8,{gap:16,minWidth:30,maxWidth:100});return e.jsx("div",{className:"w-contender",style:{width:`${t}px`},children:e.jsx(pe,{cardId:r.id??"",children:e.jsx(ze,{itemId:r.id??"",text:{pt:r.text,en:r.text},width:t,className:"transparent-gradient"})})})}function q({grid:r,user:t,CellComponent:s,gridType:n,cellComponentProps:o={}}){const c=Math.sqrt(r.length);return e.jsx(De,{columns:c,rows:c,children:r.map(a=>e.jsxs(Fe,{header:a.kind==="header",children:[a.kind==="header"&&e.jsx(Wr,{cell:a,gridType:n}),a.kind==="cell"&&e.jsx(s,{...o,cell:a,user:t})]},`${a.index}-${a.kind}`))})}function oe({clue:r}){return e.jsx("div",{className:"x-previous-clue",children:r})}function Mr({x:r,y:t,onSubmit:s,disabled:n,index:o}){const[c,a]=m.useState(""),i=m.useRef(null),d=u=>{a(u.target.value)};return m.useEffect(()=>i?.current?.focus(),[]),he(()=>{s({clue:`${r.substring(0,r.length/2)}${t.substring(t.length/2)}`,currentClueCoordinate:o})},[]),e.jsxs(Ie,{orientation:"vertical",children:[e.jsx(Re,{ref:i,placeholder:`${r} + ${t}`,onChange:d,onPressEnter:()=>s({clue:c,currentClueCoordinate:o})}),e.jsx(de,{justify:"flex-end",children:e.jsx(X,{onClick:()=>s({clue:c,currentClueCoordinate:o}),disabled:n||!c.length,children:e.jsx(l,{pt:"Enviar",en:"Submit"})})})]})}function kr({onSubmitClue:r,cell:t,user:s,disabled:n}){return t.writable&&s.id===t.playerId?e.jsx(we,{content:e.jsx(Mr,{x:t.xText??"",y:t.yText??"",index:t.index,onSubmit:r}),title:e.jsx(l,{pt:"Escreva",en:"Write"}),trigger:"click",children:e.jsx(G,{shape:"circle",type:"primary",disabled:n,children:e.jsx(Tr,{})})}):t.text?e.jsx(oe,{clue:t.text}):null}function _r({grid:r,gridType:t,user:s,onSubmitClue:n,players:o,announcement:c}){const{isLoading:a}=Pe(),i=d=>{n({clue:d.clue.trim().toLowerCase(),currentClueCoordinate:d.currentClueCoordinate})};return e.jsxs(D,{fullWidth:!0,announcement:c,children:[e.jsx(k,{children:e.jsx(l,{pt:"Escreva sua dica",en:"Write your clue"})}),e.jsx(te,{content:e.jsx(fe,{playerCount:Object.keys(o).length})}),e.jsx(W,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Clique em um dos ícones na grade e escreva sua dica.",e.jsx("br",{}),"Você só precisa escrever a dica para uma das coordenadas.",e.jsx("br",{}),"Sua dica deve conter apenas ",e.jsx("strong",{children:"uma palavra única"}),".",e.jsx("br",{}),"Você ",e.jsx("strong",{children:"NÃO"})," pode usar nenhuma palavra que esteja na grade."]}),en:e.jsxs(e.Fragment,{children:["Click on the icon on either of the table cell and write your clue.",e.jsx("br",{}),"You only need to write the clue for one of the coordinates.",e.jsx("br",{}),"Your clue must be a ",e.jsx("strong",{children:"single-word"})," clue.",e.jsx("br",{}),"You can ",e.jsx("strong",{children:"NOT"})," use any words already in the table."]})})}),e.jsx(q,{grid:r,user:s,CellComponent:kr,cellComponentProps:{onSubmitClue:i,disabled:a},gridType:t})]})}function Ur({players:r,state:t,user:s}){const{step:n,goToNextStep:o,setStep:c}=_(0),a=Nr(c),i=e.jsx(F,{icon:e.jsx(ke,{}),title:e.jsx(l,{pt:"Escreva!",en:"Write!"}),currentRound:t?.round?.current,type:"overlay",children:e.jsx(fe,{playerCount:Object.keys(r).length})});return e.jsx(U,{phase:t?.phase,allowedPhase:P.CLUE_WRITING,children:e.jsxs(V,{step:n,players:r,waitingRoom:{content:e.jsx(Gr,{grid:t.grid,user:s})},children:[e.jsx(Ue,{round:t?.round,onPressButton:o,buttonText:" ",time:5}),e.jsx(_r,{user:s,grid:t.grid,gridType:t.gameType,onSubmitClue:a,players:r,announcement:i})]})})}const Dr=r=>!!r?.clue,w=r=>`${r?.clue}${ue}${r?.playerId}`,ge=r=>r.split(ue)??["",""];function ie({isMatched:r,isSelected:t,clue:s,color:n,player:o,strikeMatches:c=!1}){return e.jsxs("div",{className:A("x-clue-card",t&&"x-clue-card--selected",n&&`color-border--${n}`),children:[e.jsx("span",{className:A("x-clue-card__icon",n&&`color-background--${n}`),children:r?o?e.jsx(Xe,{avatarId:o?.avatarId}):e.jsx(Ee,{}):e.jsx(xe,{style:t?{color:"gold"}:{color:"white"}})}),e.jsx("span",{className:A("x-clue-card__clue",r&&c&&"x-clue-card__clue--matched"),children:s})]})}function Ce({clue:r,isSelected:t,isMatched:s,onActivateClue:n,color:o,disabled:c=!1}){const a=w(r);return e.jsx(er,{id:a,disabled:c,onClick:()=>n(r),className:"x-clue-card-draggable",options:{dragOpacity:.8,dragScale:1.03,withTransition:!0},children:e.jsx(ie,{isMatched:s,isSelected:t,clue:r.clue,color:o,strikeMatches:!0})})}function Fr({onActivateClue:r,cell:t,active:s,guesses:n,clues:o,clueColors:c,user:a}){const i=t.index===s,d=Object.entries(n).find(C=>C[1]===t.index),[u,v]=d??[],[g,I]=ge(u??""),p=v===t.index,x=p&&I===a.id,E=!!t.text||t.playerId===a.id||p;if(p&&x)return e.jsx(H,{title:e.jsx(l,{pt:"Essa é a sua própria dica!",en:"This is your own clue!"}),children:e.jsx(ie,{isMatched:p,isSelected:i,clue:g||o.find(C=>C.playerId===a.id)?.clue,color:c[g]})});if(t.text)return e.jsx(oe,{clue:t.text});if(t.playerId===a.id)return e.jsx(H,{title:e.jsx(l,{pt:"Essa célula pertence a uma de duas outras dicas, então não pode ser essa",en:"This cell belongs to one of two other clues, so it can't be this one"}),children:e.jsx(G,{shape:"circle",ghost:!0,children:e.jsx(tr,{})})});if(p){const C=o.find(B=>B.clue===g&&B.playerId===I);return C?e.jsx(Ce,{clue:C,isSelected:i,isMatched:!1,onActivateClue:r,color:c[g],disabled:I===a.id}):void 0}return e.jsx(rr,{id:t.index,disabled:E,style:{width:"100%",height:"100%",minHeight:"4rem"},children:e.jsx(de,{style:{outline:i?"2px solid gold":"none",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",minHeight:"inherit"},align:"center",justify:"center",vertical:!1,children:e.jsx(xe,{style:{color:"white"}})})})}function Vr({clues:r,clueColors:t,onActivateClue:s,active:n,guesses:o,user:c}){const a=r.filter(i=>i.playerId!==c.id);return e.jsx("ul",{className:"x-clue-cards",children:a.map(i=>{const d=typeof n!="number"&&i.coordinate===n?.coordinate,u=!!o[w(i)];return u?null:e.jsx("li",{className:"x-clue-card-li",children:e.jsx(Ce,{clue:i,isSelected:d,isMatched:u,color:t[i.clue],onActivateClue:s})},`${i.coordinate}-${i.clue}`)})})}function qr({grid:r,gridType:t,user:s,clues:n,onSubmitGuesses:o,announcement:c}){const[a,i]=m.useState(null),[d,u]=m.useState({}),[v,g]=m.useState(!1),I=m.useMemo(()=>n.sort().reduce((j,h,f)=>(j[h.clue]=Te(f),j),{}),[n]),p=m.useCallback(j=>{if(!a||Dr(a)){i(j);return}typeof a=="number"&&(u(h=>({...h,[w(j)]:a})),i(null))},[a]),x=m.useCallback(()=>{const j=Object.entries(d).reduce((h,[f,S])=>{const[,R]=ge(f);return h[R]=S,h},{});o({guesses:j,choseRandomly:v})},[d,o,v]);m.useEffect(()=>{const j=n.find(h=>h.playerId===s.id);if(j){const h=r.filter(f=>f.available&&f.playerId===s.id);if(h.length>0){const f=h.length===1?h[0]:h.find(S=>S.index===j.coordinate);f&&u(S=>({...S,[w(j)]:f.index}))}}},[n,r,s.id]);const E=()=>{const j=Object.values(d),h=Object.keys(d);g(!0);const f=Oe(r.filter(y=>y.available&&y.playerId!==s.id&&!j.includes(y.index))),R=n.filter(y=>!h.includes(w(y))).reduce((y,O,$)=>(O.playerId===s.id?y[w(O)]=O.coordinate:y[w(O)]=f[$].index,y),{});u({...R,...d})},C=Ke(Ze(Qe,{activationConstraint:{distance:8}})),B=m.useCallback(j=>{const{active:h,over:f}=j;if(f&&h.id!==f.id){const S=String(h.id),R=Number(f.id),y=n.find(N=>w(N)===S);if(y?.playerId===s.id||Object.values(d).includes(R))return;const $=r.find(N=>N.index===R);if($&&$.playerId===s.id)return;y&&typeof R=="number"&&u(N=>({...N,[S]:R}))}},[n,d,s.id,r]);return e.jsxs(D,{fullWidth:!0,announcement:c,children:[e.jsx(k,{children:e.jsx(l,{pt:"Decifre as dicas!",en:"Guess the cells!"})}),e.jsxs(Je,{sensors:C,onDragEnd:B,children:[e.jsx(Vr,{clues:n,onActivateClue:p,active:a,guesses:d,user:s,clueColors:I}),e.jsx(W,{type:"action",children:e.jsx(l,{pt:"Arraste as dicas acima para as células correspondentes abaixo.",en:"Drag the clues above to their corresponding cells below."})}),e.jsxs(T,{align:"center",children:[e.jsx(G,{size:"large",type:"dashed",onClick:E,icon:e.jsx(sr,{}),children:e.jsx(l,{pt:"Desistir",en:"Give up"})}),e.jsx(X,{size:"large",onClick:x,disabled:Object.keys(d).length!==n.length,children:e.jsx(l,{pt:"Enviar respostas",en:"Send guesses"})})]}),e.jsx(q,{grid:r,gridType:t,user:s,CellComponent:Fr,cellComponentProps:{active:a,guesses:d,clues:n,clueColors:I,user:s}})]})]})}function zr({players:r,state:t,user:s}){const{step:n,setStep:o}=_(0),c=Ar(o),a=e.jsx(F,{icon:e.jsx(Ye,{}),title:e.jsx(l,{pt:"Match!",en:"Combine!"}),currentRound:t?.round?.current,type:"overlay",children:e.jsx(re,{children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Agora combine as dicas de cada jogador com as coordenadas corretas!",e.jsx("br",{}),"Basta clicar em uma das dicas no topo e então em uma das células da grade."]}),en:e.jsxs(e.Fragment,{children:["Now match the clues from each player with the correct coordinates",e.jsx("br",{}),"Just click on one of the clues on top then in one of the cells in the grid."]})})})});return e.jsx(U,{phase:t?.phase,allowedPhase:P.GUESSING,children:e.jsx(V,{step:n,players:r,children:e.jsx(qr,{user:s,grid:t.grid,gridType:t.gameType,clues:t.clues,onSubmitGuesses:c,announcement:a})})})}function ce({badCluesPlayersList:r}){return e.jsx("span",{children:r.map((t,s)=>e.jsxs("span",{children:[e.jsx(se,{player:t,size:"small"},`bad-clue-${t.id}`),r.length>0&&s<r.length-1?", ":""]},`bad-clue-${t.id}-${s}`))})}function Hr({players:r,grid:t,correctCoordinatesPerPlayer:s}){const{translate:n}=M(),o=[{title:n("Jogador","Player"),dataIndex:"player",key:"player",render:a=>e.jsx(se,{player:a}),sorter:(a,i)=>a.playerName.localeCompare(i.playerName)},{title:n("Achou que","Thought that"),dataIndex:"guess",key:"guess",render:a=>a.toUpperCase(),sorter:(a,i)=>a.guess.localeCompare(i.guess)},{title:n("Era","Was"),dataIndex:"clue",key:"clue",render:a=>a.toUpperCase(),sorter:(a,i)=>a.clue.localeCompare(i.clue)},{title:n("Resultado","Result"),dataIndex:"result",key:"result",render:a=>a?e.jsx(vr,{style:{color:"green"}}):e.jsx(Sr,{style:{color:"red"}}),sorter:a=>a.result===!0?1:-1}],c=m.useMemo(()=>{const a=Object.values(r).map(i=>Object.entries(i?.guesses??{}).reduce((d,[u,v])=>{if(u===i.id)return d;const g=t[v];return d.push({playerName:i.name,player:i,clue:`${g.yText} + ${g.xText}`,guess:r[u].clue,result:s?.[v]===u}),d},[]));return me.orderBy(a.flat(),["playerName","guess"],["asc","asc"])},[r,t,s]);return e.jsx(or,{size:"small",columns:o,dataSource:c,pagination:!1})}function le({cellPlayers:r,players:t}){return e.jsx("ul",{children:r.map(({playerId:s,isCorrect:n})=>n?e.jsx("li",{className:A(n&&"x-players-in-cell-player--correct"),children:e.jsx(se,{player:t[s],size:"small"})},`players-in-cell-${s}`):void 0)})}function ve({cell:r,clues:t,players:s,playerPerVotedCell:n,colorCodedCluesPerPlayer:o}){const c=t.find(i=>i.coordinate===r.index),a=(n[r.index]??[]).filter(i=>i.isCorrect);return c?.playerId?e.jsxs("div",{className:"center",children:[e.jsx(ie,{isMatched:!0,clue:c.clue,color:o[c.playerId],player:s[c.playerId]}),a.length?e.jsx(le,{cellPlayers:a,players:s}):e.jsx(wr,{style:{color:"white"}})]}):r.text?e.jsx(oe,{clue:r.text}):e.jsx("span",{children:!!a.length&&e.jsx(le,{cellPlayers:a,players:s})})}const Yr=Ne;function Kr({grid:r,gridType:t,user:s,players:n,clues:o,goToNextStep:c,whoGotNoPoints:a,announcement:i}){_e();const{correctCoordinatesPerPlayer:d,colorCodedCluesPerPlayer:u,whoGotNoPointsNames:v,playerCount:g}=m.useMemo(()=>({correctCoordinatesPerPlayer:o.reduce((p,x)=>(x.playerId&&(p[x.coordinate]=x.playerId),p),{}),colorCodedCluesPerPlayer:o.reduce((p,x)=>(x.playerId&&(p[x.playerId]=Yr[n[x.playerId].avatarId].color),p),{}),whoGotNoPointsNames:a.map(p=>n[p]),playerCount:Object.keys(n).length}),[n,o,a]),I=m.useMemo(()=>Object.values(n).reduce((p,x)=>(Object.entries(x.guesses??{}).forEach(([E,C])=>{E!==x.id&&(p[C]===void 0&&(p[C]=[]),p[C].push({playerId:x.id,color:u[E],isCorrect:d[C]===E}))}),p),{}),[n,d,u]);return e.jsxs(D,{fullWidth:!0,announcement:i,children:[e.jsx(k,{children:e.jsx(l,{pt:"Resultado",en:"Results"})}),e.jsx(te,{content:e.jsx(ae,{playerCount:g})}),!!a.length&&e.jsx(W,{type:"alert",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:["Ninguém acertou a(s) dica(s) dadas por",e.jsx(ce,{badCluesPlayersList:v}),", então ele(s) perde(m)"," ",e.jsxs(b,{type:"negative",children:["- ",g]})," pontos."]}),en:e.jsxs(e.Fragment,{children:["Nobody got the clues given by",e.jsx(ce,{badCluesPlayersList:v}),", so they lose"," ",e.jsxs(b,{type:"negative",children:["- ",g]})," points."]})})}),e.jsx(q,{grid:r,gridType:t,user:s,CellComponent:ve,cellComponentProps:{clues:o,players:n,playerPerVotedCell:I,colorCodedCluesPerPlayer:u}}),e.jsx(T,{align:"center",children:e.jsx(ar,{duration:Ae(g,6,40,15)+5,icon:e.jsx(ir,{}),onExpire:c,onClick:c,children:e.jsx(l,{pt:"Ver Ranking",en:"See Ranking"})})}),e.jsx(je,{title:e.jsx(l,{pt:"Todas as respostas",en:"All Answers"}),children:e.jsx(Hr,{correctCoordinatesPerPlayer:d,players:n,grid:r})})]})}function Zr({players:r,playerCount:t,ranking:s,goToPreviousStep:n,round:o}){return e.jsxs(cr,{players:r,ranking:s,gainedPointsDescriptions:[e.jsx(l,{pt:"Palpites corretos",en:"Correct guesses"},"1"),e.jsx(l,{pt:"Palpites que acertaram a célula de outra dica",en:"Guesses that were placed in a cell for a different clue"},"2"),e.jsx(l,{pt:"Palpites recebidos corretamente",en:"Received correct guesses"},"3"),e.jsx(l,{pt:"Penalidade se ninguém acertou a sua dica",en:"Penalty for nobody getting your clue correctly"},"4")],children:[e.jsx(te,{content:e.jsx(ae,{playerCount:t})}),e.jsx(T,{align:"center",children:e.jsx(G,{onClick:n,children:e.jsx(l,{pt:"Ver resultado novamente",en:"See results again"})})}),e.jsx(Be,{round:o,withWaitingTimeBar:!0}),o.current===3&&e.jsx(W,{type:"event",children:e.jsx(l,{pt:"Está pronto para uma reviravolta?",en:"Ready for a twist?"})})]})}function Qr({state:r,players:t,user:s}){const{step:n,goToNextStep:o,goToPreviousStep:c}=_(0),a=Object.keys(t).length,i=e.jsx(F,{icon:e.jsx(nr,{}),title:e.jsx(l,{pt:"Resultado",en:"Results"}),currentRound:r?.round?.current,type:"overlay",children:e.jsx(ae,{playerCount:a})});return e.jsx(U,{phase:r?.phase,allowedPhase:P.REVEAL,children:e.jsxs(V,{step:n,players:t,children:[e.jsx(Kr,{user:s,grid:r.grid,gridType:r.gameType,clues:r.clues,goToNextStep:o,players:t,whoGotNoPoints:r.whoGotNoPoints??[],announcement:i}),e.jsx(Zr,{players:t,playerCount:a,round:r.round,ranking:r.ranking,goToPreviousStep:c})]})})}function Jr({deck:r,onSubmitWords:t,user:s,announcement:n}){const{updateDict:o,length:c,keys:a,setDict:i}=dr({});he();const d=()=>{i(me.sampleSize(r,10).reduce((u,v)=>(u[v.id]=!0,u),{}))};return e.jsxs(D,{fullWidth:!0,announcement:n,children:[e.jsx(k,{children:e.jsx(l,{pt:"Quais cartas deveriam estar no jogo?",en:"What cards should be in the game?"})}),e.jsx(W,{type:"action",children:e.jsx(l,{pt:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Selecione"})," pelo menos 10 cartas para estar no jogo.",e.jsx("br",{}),"Quanto mais melhor!"]}),en:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Select"})," at least 10 cards to be in the game.",e.jsx("br",{}),"The more the merrier!"]})})}),e.jsxs(T,{children:[e.jsx(G,{onClick:d,size:"large",children:e.jsx(l,{pt:"Selecione pra mim",en:"Select for me"})}),e.jsx(mr,{count:c,children:e.jsx(X,{onClick:()=>t({words:a}),size:"large",disabled:c<10||s.ready,children:e.jsx(l,{pt:"Enviar cartas",en:"Submit cards"})})})]}),e.jsx(T,{className:"max-width",wrap:!0,children:r.map(u=>e.jsx(Ge,{onClick:()=>o(u.id),active:a.includes(u.id),children:e.jsx(ur,{hideHeader:!0,children:u.text})},u.id))})]})}function Xr({players:r,state:t,user:s}){const{step:n,setStep:o}=_(0),c=Or(o),a=e.jsx(F,{icon:e.jsx(lr,{}),title:e.jsx(l,{pt:"Preparação da Grade",en:"Grid Setup"}),currentRound:t?.round?.current,type:"overlay"});return e.jsx(U,{phase:t?.phase,allowedPhase:P.WORDS_SELECTION,children:e.jsx(V,{step:n,players:r,children:e.jsx(Jr,{deck:t.deck,onSubmitWords:c,user:s,announcement:a})})})}function et({state:r,players:t,user:s}){return e.jsxs(hr,{state:r,players:t,announcementIcon:e.jsx(pr,{}),children:[e.jsx(xr,{players:t,achievements:r.achievements,reference:jr}),e.jsx(fr,{}),e.jsx(je,{title:e.jsx(l,{en:"The Final Grid",pt:"A Grade Final"}),children:e.jsx(q,{grid:r.grid,gridType:r.gameType,user:s,CellComponent:ve,cellComponentProps:{clues:[],players:t,playerPerVotedCell:{},colorCodedCluesPerPlayer:{}}})})]})}function rt(r){switch(r.phase){case P.WORDS_SELECTION:return Xr;case P.CLUE_WRITING:return Ur;case P.GUESSING:return zr;case P.REVEAL:return Qr;case Me.DEFAULT.GAME_OVER:return et;default:return Le}}function Ts(){return e.jsx($e,{gameCollection:We.CRUZA_PALAVRAS,getActiveComponent:rt})}export{Ts as default};
