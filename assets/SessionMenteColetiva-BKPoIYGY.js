import{f as T,j as e,T as u,n as de,bC as G,e as w,k as me,r as f,aJ as z,q as H,i as O,J as X,bF as J,aG as q,l as pe,aL as M,dK as he,B as K,b0 as Z,aY as xe,aW as je,aX as ge}from"./index-Di-1oQe0.js";import{u as _,a as ee,S,b as P,d as L,c as $,P as k,e as U,f as v,g as I,H as fe,p as ve,m as se,n as re,i as we,j as Ne,k as Se,l as Ee}from"./StepSwitcher-TX0g56tr.js";import{u as be}from"./useWhichPlayerIsThe-CbPkSxCP.js";import{S as Ae}from"./SheepIcon-DYu458Z1.js";import{I as E}from"./Instruction-BvZIhQ0G.js";import{R as Te}from"./RoundAnnouncement-C-xkR59m.js";import{V as _e}from"./ViewOr-pDMQQLOw.js";import{A as F}from"./AvatarName-BXdnqd2X.js";import{P as A}from"./PointsHighlight-CAFZihC1.js";import{G as D}from"./GroupQuestionCard-BCUyMJQZ.js";import{P as ne}from"./PopoverRule-D-TRHZYH.js";import{A as C,C as Ie}from"./CustomerReviewIcon-B-3fPlJ9.js";import{S as Q}from"./SheepAvatar-Dm0OH5MS.js";import{D as R}from"./index-hK3KUf1H.js";import{S as B}from"./index-BHY3eHRX.js";import{T as ye,C as Ce}from"./index-VqJJqXn4.js";import{R as V}from"./RuleInstruction-DMVcVG8d.js";import{W as Re}from"./WritingIcon-mUzRBgbA.js";import{D as Oe}from"./DevButton-CLIrsjBX.js";import{T as qe}from"./TimedTimerClock-Bny1_1uK.js";import{D as Me}from"./DiscussionIcon-B474Hlx3.js";import{u as Pe}from"./useDevFeatures-Bl5VqOEr.js";import{A as Le}from"./Avatar-BR-3QP23.js";import{T as ke}from"./speech-DhbCZw5K.js";import{R as ae}from"./PlusCircleFilled-uAD_xqcp.js";import{C as Ue}from"./Card-Dw2x88HP.js";import{R as oe}from"./LockFilled-mxnSf4CD.js";import{R as We}from"./QuestionCircleFilled-CmlG8sNv.js";import{u as Be}from"./useBlurCards-9On1AZk3.js";import{R as Fe}from"./RankingBoard-D4zh4YB6.js";import{R as Y}from"./HeartFilled-Su4NjtiL.js";import{T as $e}from"./TheEndIcon-tArLYIll.js";import"./GameOver-B6wQXAA5.js";import{G as De}from"./GameOverWrapper-BBf86QeS.js";import{A as Qe}from"./Achievements-D6eP5pWP.js";import{a as Ve}from"./achievements-EYXsF_f8.js";/* empty css                            */import"./RulesModal-BM7I07_c.js";import"./DoubleRightOutlined-hEW9jQ-k.js";import"./PurePanel-BCxu0gjP.js";import"./useMutation-Cv_QLfoe.js";import"./Game-llQA0Y9l.js";import"./WaitingRoomIcon-B7O6u1EB.js";import"./AnimatedClockIcon-BMdPhBzo.js";import"./index-BAxniGOi.js";import"./index-DafagF_P.js";import"./GameBanner-C7i61QDe.js";import"./useTDBaseUrl-BF9foKiS.js";import"./index-Dhp799BV.js";import"./InfoCircleOutlined-D99ixZt7.js";import"./SignIn-DqppX8Dx.js";import"./GoogleIcon-D_nb0Xrl.js";import"./Loading-C_ATOxDS.js";import"./AnimatedLoaderIcon-DykAi65P.js";import"./LikeFilled-CQxl2XEe.js";import"./StarIcon-Bal61uOa.js";import"./MetricHighlight-BnJAWPhn.js";import"./Overflow-CoreGy8J.js";import"./useEvent-DePcB8EO.js";import"./useBubbleLock-CG6iU7tA.js";import"./StarFilled-Bhur7kca.js";import"./StarFilled-CNctUIhy.js";import"./ArrowRightOutlined-CiJ4z9Am.js";import"./useMergedState-F31BpD03.js";import"./progress-CCSw0AlD.js";import"./Container-DSHU3WEA.js";import"./Medal-B707rWbh.js";import"./QuestionCircleOutlined-dwDppKCi.js";const y={SUBMIT_QUESTION:"SUBMIT_QUESTION",SUBMIT_CUSTOM_QUESTION:"SUBMIT_CUSTOM_QUESTION",SUBMIT_ANSWERS:"SUBMIT_ANSWERS",NEXT_ANSWERS:"NEXT_ANSWERS",ADD_ANSWER:"ADD_ANSWER"};function ze(s){const{translate:n}=T(),r=_({actionName:"submit-question",onSuccess:()=>s(3),onError:()=>s(1),successMessage:n("Pergunta enviada com sucesso!","Question send successfully!"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar a pergunta","Oops, the application failed to submit the question")});return a=>{r({action:y.SUBMIT_QUESTION,...a})}}function He(s){const{translate:n}=T(),r=_({actionName:"submit-question",onSuccess:()=>s(3),onError:()=>s(1),successMessage:n("Pergunta enviada com sucesso!","Question send successfully!"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar a pergunta","Oops, the application failed to submit the question")});return a=>{r({action:y.SUBMIT_CUSTOM_QUESTION,...a})}}function Ye(s){const{translate:n}=T(),r=_({actionName:"submit-answers",onSuccess:()=>s(2),onError:()=>s(1),successMessage:n("Respostas enviadas com sucesso!","Answers send successfully!"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar enviar respostas","Oops, the application failed to submit answers")});return a=>{r({action:y.SUBMIT_ANSWERS,...a})}}function Ge(){const{translate:s}=T(),n=_({actionName:"add-answer",successMessage:s("Resposta adicionada com sucesso!","Answer added successfully!"),errorMessage:s("Vixi, o aplicativo encontrou um erro ao tentar adicionar respostar","Oops, the application failed to add answer")});return r=>{n({action:y.ADD_ANSWER,...r})}}function Xe(s){const{translate:n}=T(),r=_({actionName:"next-answers",onSuccess:s,successMessage:n("Próximas respostas acionadas com sucesso!","Next answers triggered successfully!"),errorMessage:n("Vixi, o aplicativo encontrou um erro ao tentar avançar","Oops, the application failed to advance")});return a=>{r({action:y.NEXT_ANSWERS,...a})}}function te({activePlayer:s}){return e.jsx(E,{children:e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["Precisamos reduzir essa população! Vamos fazer uma pergunta em que todos tem que escrever uma certa quantidade de respostas. Você ganha um ponto para cada resposta igual a de outra ovelha. Quem receber o menor número de pontos move uma seção para a direita.",e.jsx("br",{}),"Se você já está no último pasto e tiver que mover pra direita, você cai no precipício e morre. O pasto fica menos lotado e todos mais felizes.",e.jsx("br",{}),e.jsxs(E,{contained:!0,children:[e.jsx(F,{player:s,addressUser:!0})," escolherá uma pergunta para essa rodada."]})]}),en:e.jsxs(e.Fragment,{children:["We are sheep and our pasture is overcrowded! We need to decide who should leave.",e.jsx("br",{}),"Let's ask a question and everyone has to give a certain number of answers. You are trying to match answers with other sheep to get points. Whoever gets the fewest points moves one section to the right.",e.jsx("br",{}),"If you are already in the last pasture and have to move to the right, you fall off the cliff and die. The pasture is less crowded and everyone is happier.",e.jsx("br",{}),e.jsxs(E,{contained:!0,children:[e.jsx(F,{player:s,addressUser:!0})," will choose a question for this round."]})]})})})}function ie(){return e.jsx(E,{children:e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["Agora é hora de responder!",e.jsx("br",{}),"Pense em respostas comuns que fará com que você responda igual a outros jogadores.",e.jsx("br",{}),"Você ganha ",e.jsx(A,{children:"1"})," ponto para cada uma de suas respostas +"," ",e.jsx(A,{children:"1"})," ponto para cada resposta igual a de outro jogador (1 ponto por jogador).",e.jsx("br",{}),"Por exemplo, se 3 jogadores escreveram 'bola', são ",e.jsx(A,{children:"+3"})," pontos para cada."]}),en:e.jsxs(e.Fragment,{children:["It's time to answer!",e.jsx("br",{}),"Think of common answers that will help you match the largest number of players.",e.jsx("br",{}),"You get ",e.jsx(A,{children:"1"})," point for each of your answers +"," ",e.jsx(A,{children:"1"})," point for each match with other players.",e.jsx("br",{}),"For example, if 3 players write 'chicken', each of those players get"," ",e.jsx(A,{children:"3"})," points."]})})})}function Je(){return e.jsx(E,{children:e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["Hora de comparar respostas!",e.jsx("br",{}),"O jogo agrupará todas as respostas iguais, mas agora vocês tem a chance de adicionar palavras que o jogo não agrupou por conta de erro gramatical, acento ou plural.",e.jsx("br",{}),"Lembre-se gêneros são considerados diferentes ",e.jsx("code",{children:"príncipe ≠ princesa"}),", assim como geral vs específico ",e.jsx("code",{children:"caminhão ≠ caminhão de mudança"}),"."]}),en:e.jsxs(e.Fragment,{children:["Time to compare answers!",e.jsx("br",{}),"The game will group all identical answers, but now the group has a chance to add answers that it missed because of typo, accents, or pluralization.",e.jsx("br",{}),"Remember that genders are considered different ",e.jsx("code",{children:"prince ≠ princess"}),", as well as general vs specific ",e.jsx("code",{children:"truck ≠ fire truck"}),"."]})})})}const Ke=(s,n)=>{const r=["agua","bola","coco","dedo","egua","flauta","gatilho","hélio","jaguar","pêssego"],a=["água","bola","cocô","dedo","égua","flauta","gatilho","helio","jipe"],o=de.shuffle(Math.random()>.5?r:a);return Array(n).fill(0).map((c,l)=>({[G(["answer",`${l}`,s])]:o[c+l].toUpperCase()})).reduce((c,l)=>Object.assign({},c,l),{})};function ce({roundType:s,className:n=""}){const r="m-round-type__arrow";return e.jsxs("div",{className:w("m-round-type",n),children:[e.jsxs("div",{className:"m-round-type__arrows",children:[s===0&&e.jsx(C,{className:w(r,`${r}--0`)}),e.jsx(C,{className:w(r,`${r}--1`)}),s>=2&&e.jsx(C,{className:w(r,`${r}--2`)}),s===3&&e.jsx(C,{className:w(r,`${r}--3`)})]}),e.jsx("div",{children:e.jsx(u,{pt:e.jsx(e.Fragment,{children:"Nesta rodada,"}),en:e.jsx(e.Fragment,{children:"This round"})})}),s===1&&e.jsx(u,{pt:e.jsx(e.Fragment,{children:"todos com a pontuação mais baixa movem uma cerquinha para direita."}),en:e.jsx(e.Fragment,{children:"all players with the lowest score move one fence to the right."})}),s===2&&e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["todos com as ",e.jsx("span",{className:"m-round-type__number",children:"2"})," pontuações mais baixas movem uma cerquinha para direita."]}),en:e.jsxs(e.Fragment,{children:["all players with the ",e.jsx("span",{className:"m-round-type__number",children:"2"})," lowest scores move one fence to the right."]})}),s===3&&e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["todos com as ",e.jsx("span",{className:"m-round-type__number",children:"3"})," pontuações mais baixas movem uma cerquinha para direita."]}),en:e.jsxs(e.Fragment,{children:["all players with the ",e.jsx("span",{className:"m-round-type__number",children:"3"})," lowest scores move one fence to the right."]})}),s===0&&e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["todos com a pontuação mais baixa movem uma cerquinha para direita e todos com a pontuação mais alta movem uma cerquinha ",e.jsx("span",{className:"m-round-type__highlight",children:"para a esquerda"}),"!"]}),en:e.jsxs(e.Fragment,{children:["all players with the lowest score move one fence to the right and all players with the highest score move one fence ",e.jsx("span",{className:"m-round-type__highlight",children:"to the left"}),"!"]})})]})}function W({players:s,pastureSize:n=5,roundType:r}){const{width:a}=me(),o=n===3,c=Math.min(a,1360)-36,l=Math.max(c*(o?.65:1),300),t=c/4,i=Math.min(a,1360)/22,d={gridTemplateColumns:o?"1fr 1fr 1fr 0.65fr":"1fr 1fr 1fr 1fr 1fr 0.65fr"},m=f.useMemo(()=>{const p=Array(n+1).fill(null);return Object.values(s).forEach(x=>{p[x.level]===null&&(p[x.level]=[]),p[x.level].push(x)}),p},[s,n]);return e.jsxs("div",{className:"m-pasture-container",style:{width:`${l}px`},children:[r!==void 0&&e.jsx(ce,{roundType:r,className:"m-pasture-round-type"}),e.jsxs("div",{className:"m-pasture",style:{height:`${t}px`},children:[e.jsx("img",{src:`${z.IN_GAME}m-pasture-${n}.png`,alt:"pasture background",className:"m-pasture__background"}),e.jsx("div",{className:"m-enclosures",style:d,children:m.map((p,x)=>{const g=`m-enclosure-${x}`;return e.jsx("div",{className:w("m-enclosure",g),children:p==null?void 0:p.map((h,j)=>{const N=`${g}-${h.id}`,b=`m-sheep--pos-${j}`;return e.jsx(Q,{id:h.avatarId,sheepId:h.sheepId,className:w("m-sheep",b,h.animateRight&&"m-sheep--animate-right",h.animateLeft&&"m-sheep--animate-left",h.animateRebound&&"m-sheep--animate-rebound",h.level===n&&"m-sheep--animate-die"),width:i,animate:!0},N)})},g)})}),e.jsx("img",{src:`${z.IN_GAME}m-fence-${n}.svg`,alt:"fence",className:"m-pasture__fence"}),e.jsx("div",{className:"m-pasture-names",children:e.jsx("div",{className:"m-enclosures m-enclosures--names",style:d,children:m.map((p,x)=>{var h;const g=((h=p==null?void 0:p.map(j=>j.name))==null?void 0:h.join(`,
`))??"";return e.jsx("span",{className:w("m-enclosure-names",g&&"m-enclosure-names--has-names"),children:g},`m-enclosure-${x}`)})})})]})]})}function Ze({onSubmit:s,userId:n}){const{translate:r}=T(),[a,o]=f.useState(r("Cite","What are")),[c,l]=f.useState(3),[t,i]=f.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx(u,{pt:"OU",en:"OR"})}),e.jsxs(H,{className:"contained center",direction:"vertical",children:[e.jsxs(O,{size:"xx-small",children:[e.jsx(u,{pt:"Crie uma pergunta",en:"Write custom question"}),":"]}),e.jsxs(H,{className:"m-custom-question-form",children:[e.jsxs(B,{value:a,onChange:d=>o(d),children:[e.jsx(B.Option,{value:r("Cite","What are"),children:e.jsx(u,{pt:"Cite",en:"What are"})}),e.jsx(B.Option,{value:r("Complete a frase","Fill in the blank"),children:e.jsx(u,{pt:"Complete a frase",en:"Fill in the blank"})})]}),e.jsx(ye,{defaultValue:3,min:2,max:4,onChange:d=>l(d??3),value:c,placeholder:r("...escreva aqui","...write here")}),e.jsx(X,{onChange:d=>i(d.target.value)})]}),e.jsxs("div",{className:"m-custom-question-sample",children:['"',a," ",c," ",t||"...",'"']}),e.jsx(J,{onClick:()=>s({customQuestion:{id:`${n}-${Date.now()}`,prefix:a,number:c,suffix:t}}),disabled:!t,children:e.jsx(u,{pt:"Enviar pergunta personalizada",en:"Submit custom question"})})]})]})}function es({announcement:s,currentQuestions:n,onSubmitQuestion:r,onSubmitCustomQuestion:a,players:o,roundType:c,activePlayer:l,pastureSize:t,user:i}){const{isLoading:d}=q();return ee(),e.jsxs(S,{fullWidth:!0,className:"m-step",announcement:s,children:[e.jsx(P,{children:e.jsx(u,{pt:"Selecione uma das perguntas",en:"Select one of the questions"})}),e.jsx(ne,{content:e.jsx(te,{activePlayer:l})}),e.jsx("ul",{className:"contained",children:n.map(m=>e.jsx("li",{className:"m-question-selection-item",children:e.jsx(pe,{onClick:()=>r({questionId:m.id}),disabled:d||i.ready,children:e.jsx(D,{question:m})})},m.id))}),e.jsx(Ze,{onSubmit:a,userId:i.id}),e.jsx(W,{players:o,pastureSize:t,roundType:c})]})}function ss({announcement:s,activePlayer:n,players:r,roundType:a,pastureSize:o}){return e.jsxs(S,{fullWidth:!0,className:"m-step",announcement:s,children:[e.jsx(P,{wait:!0,children:e.jsx(u,{pt:"Aguarde...",en:"Please wait..."})}),e.jsxs(V,{type:"wait",children:[e.jsx(F,{player:n,addressUser:!0})," ",e.jsx(u,{pt:"está escolhendo a pergunta da rodada.",en:"is choosing the question for the round."}),e.jsx("br",{})]}),e.jsx(W,{players:r,pastureSize:o,roundType:a})]})}function rs({state:s,players:n}){var p,x;const{step:r,goToNextStep:a,setStep:o}=L(0),c=$(n,s),[l,t]=be("activePlayerId",s,n),i=ze(o),d=He(o),m=e.jsx(k,{icon:e.jsx(Ae,{}),title:e.jsx(u,{pt:"O Pasto Superlotado",en:"A Overcrowded Pasture"}),currentRound:(p=s==null?void 0:s.round)==null?void 0:p.current,duration:((x=s==null?void 0:s.round)==null?void 0:x.current)<3?40:10,type:"overlay",children:e.jsx(te,{activePlayer:l})});return e.jsx(U,{phase:s==null?void 0:s.phase,allowedPhase:v.MENTE_COLETIVA.QUESTION_SELECTION,children:e.jsxs(I,{step:r,players:n,children:[e.jsx(Te,{round:s.round,onPressButton:a,time:3,children:e.jsx(E,{contained:!0,children:e.jsx(u,{pt:"Somos ovelhinhas e nosso pasto está superlotado!",en:"We are sheep and our pasture is overcrowded!"})})}),e.jsxs(_e,{condition:t,children:[e.jsx(es,{players:n,currentQuestions:s.currentQuestions,onSubmitQuestion:i,onSubmitCustomQuestion:d,roundType:s.roundType,activePlayer:l,pastureSize:s.pastureSize,user:c,announcement:m}),e.jsx(ss,{activePlayer:l,players:n,roundType:s.roundType,pastureSize:s.pastureSize,announcement:m})]})]})})}function ns({user:s,currentQuestion:n,players:r,roundType:a,onSubmitAnswers:o,pastureSize:c,announcement:l,timedAnswers:t=!1}){const{isLoading:i}=q(),{translate:d}=T(),[m,p]=f.useState({});ee(()=>{},[]);const x=j=>{p(N=>({...N,[j.target.id]:j.target.value.toUpperCase().trim()}))},g=Object.keys(m).length<n.number||new Set(Object.values(m)).size!==n.number,h=()=>{g||o({answers:m})};return e.jsxs(S,{fullWidth:!0,announcement:l,children:[e.jsxs("div",{className:"m-step__contained-content",children:[e.jsxs(P,{size:"small",children:[e.jsx(u,{pt:"Responda a pergunta",en:"Answer the question"}),!!t&&e.jsx(qe,{duration:2*60,onExpire:()=>{!s.ready&&!i&&o({answers:m})},disabled:!t}),":"]}),e.jsx(D,{question:n}),e.jsx(ne,{content:e.jsx(ie,{})}),e.jsx("ol",{className:"m-answers",children:Array(n.number).fill(1).map((j,N)=>{const b=j+N,ue=`answer-${N}`,le=G(["answer",String(N),s.id]);return e.jsx("li",{className:"m-answers__item",children:e.jsx(X,{className:"m-answers__input",id:le,placeholder:d(`Escreva a resposta ${b} aqui`,`Write answer ${b} here`),autoComplete:"off",onChange:x,onPressEnter:h})},ue)})}),e.jsxs(M,{children:[e.jsx(Oe,{onClick:()=>o({answers:Ke(s.id,n.number)}),children:"Mock Answers"}),e.jsx(J,{type:"primary",disabled:g,onClick:()=>o({answers:m}),children:e.jsx(u,{pt:"Enviar respostas",en:"Submit answers"})})]})]}),e.jsx(W,{players:r,pastureSize:c,roundType:a})]})}function as({state:s,players:n,meta:r}){var i,d,m;const{step:a,setStep:o}=L(0),c=$(n,s),l=Ye(o),t=e.jsx(k,{icon:e.jsx(Re,{}),title:e.jsx(u,{pt:"Todos Respondem",en:"Everybody Writes"}),currentRound:(i=s==null?void 0:s.round)==null?void 0:i.current,duration:((d=s==null?void 0:s.round)==null?void 0:d.current)<3?20:void 0,type:"overlay",children:e.jsx(ie,{})});return e.jsx(U,{phase:s==null?void 0:s.phase,allowedPhase:v.MENTE_COLETIVA.EVERYBODY_WRITES,children:e.jsx(I,{step:a,players:n,waitingRoom:{content:e.jsx(E,{contained:!0,children:Object.values((c==null?void 0:c.answers)??{}).join(", ")})},children:e.jsx(ns,{announcement:t,currentQuestion:s.currentQuestion,players:n,roundType:s.roundType,onSubmitAnswers:l,user:c,pastureSize:s.pastureSize,timedAnswers:(m=r==null?void 0:r.options)==null?void 0:m.timed})})})}function os({allAnswers:s,allowedList:n,answerGroup:r,onNextAnswer:a,onAddAnswer:o,players:c,remainingGroupsCount:l}){const{isLoading:t}=q(),{isDevEnv:i}=Pe(),[d,m]=f.useState(!0),p=Object.keys(c).length,x=f.useMemo(()=>s.filter(h=>{if(h.isLocked)return!1;const j=r.entries.map(b=>b.id),N=r.entries.map(b=>b.playerId);return!j.includes(h.id)&&!N.includes(h.playerId)}),[s,r]),g=f.useMemo(()=>{const h=r.entries.length;return p===h?1:h<3&&l<3?3:h===1?2:5},[r.entries.length,i,p,l]);return e.jsxs(fe,{className:"m-admin",direction:"vertical",align:"center",children:[e.jsx(ke,{onClick:()=>a({allowedList:Object.keys(n)}),disabled:d||t,type:"primary",duration:g,icon:e.jsx(he,{}),onExpire:()=>m(!1),children:e.jsx(u,{pt:"Confirmar e ir para próxima resposta",en:"Confirm and go to next answer"})}),x.length>0&&e.jsx("p",{children:e.jsx(u,{pt:"Essas são as respostas dos jogadores que não deram match com a atual resposta. Somente adicione elas se os jogadores estiverem comendo mosca",en:"These are the players who haven't matched the current answer. Only add them if a player failed to do so for themselves."})}),e.jsx(M,{wrap:!0,children:x.map(h=>e.jsxs(K,{size:"large",disabled:t,className:"m-admin__answer",icon:e.jsx(ae,{}),loading:t,onClick:()=>o({answer:{...h}}),children:[e.jsx(Le,{id:c[h.playerId].avatarId})," ",h.answer]},`admin-${h.id}`))})]})}function ts({answerGroup:s,currentQuestion:n,players:r,allowUserAnswer:a,remainingGroupsCount:o}){const{translate:c}=T(),l=ve();return e.jsxs(S,{className:"m-step",children:[e.jsx(O,{level:3,size:"small",children:e.jsx(u,{pt:"Comparar Respostas",en:"Compare Answers"})}),e.jsx(Ue,{header:c("Pergunta","Question"),color:["yellow","orange","green","blue","purple"][o%5],className:"m-question-card",footer:Array(o).fill("•").join(""),children:e.jsx(D,{question:n})}),e.jsx(V,{type:"rule",children:e.jsx(u,{pt:"Não existe resposta certa ou errada. Aqui, apenas agrupamos respostas iguais para ganhar pontos. O objetivo é pensar como o grupo!",en:"There's no wrong or right answer. Here, we just group equal answers for points. The goal is to think like the group"})}),e.jsxs("div",{className:"m-answer-group",children:[e.jsx("div",{className:"m-answer-group__answer-container",children:e.jsx("div",{className:"m-answer-group__answer",children:s.answer})}),e.jsx("ul",{className:"m-answer-group__players",children:s.entries.map(t=>{const i=`ag-${t.id}`,d=r[t.playerId],m=d.answers[t.id].parsedAnswer===s.parsedAnswer||d.answers[t.id].isLocked;return e.jsxs("li",{className:"m-answer-group__player",children:[e.jsx(Q,{id:d.avatarId,sheepId:d.sheepId,className:"m-answer-group__sheep-avatar",width:40,animate:!0}),e.jsxs("span",{className:"m-answer-group__player-name",children:[d.name," ",m?e.jsx(oe,{}):e.jsx(We,{})]}),!m&&e.jsx("span",{className:w("m-answer-group__speech-bubble-small",Z("tada")),children:d.answers[t.id].answer}),!m&&l&&e.jsx("div",{className:"m-answer-group__allow-add",children:e.jsx(Ce,{"data-allowanswer":t.id,onChange:p=>a(p.target.checked,t.id)})})]},i)})})]})]})}function is({answerGroup:s,user:n,onAddAnswer:r}){const{isLoading:a}=q(),o=n.answers??{},c=s.entries.some(t=>t.playerId===n.id),l=Object.values(o).reduce((t,i)=>t+Number((i==null?void 0:i.score)??0),0);return e.jsx("div",{className:"m-step",children:e.jsxs("div",{className:"m-step__contained-content",children:[e.jsxs(V,{type:"rule",children:[e.jsx(u,{pt:"Se você cometeu um erro ortográfico ou acha que sua resposta deveria estar no grupo acima, clique nela para adicioná-la. Você só pode ter uma resposta por pergunta!",en:"If you made a typo or for some reason think your answer should be in this group, click on it to add it. You can only have one answer per question."}),e.jsx("br",{}),e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["Você tem: ",e.jsx(A,{children:l})," ponto(s)"]}),en:e.jsxs(e.Fragment,{children:["You have:",e.jsx(A,{children:l})," point(s)"]})})]}),e.jsx(M,{className:"m-user-answers",children:Object.entries(o).map(([t,i])=>e.jsxs(K,{disabled:(i==null?void 0:i.isLocked)||c||a,className:"m-user-answer",icon:i.isLocked?e.jsx(oe,{}):e.jsx(ae,{}),onClick:()=>r({answer:{id:t,playerId:n.id,...i}}),children:[i.answer," ",!!i.score&&`(${i.score})`]},`a-b-${t}`))})]})})}function cs({announcement:s,currentQuestion:n,answerGroup:r,players:a,user:o,allAnswers:c,onAddAnswer:l,onNextAnswer:t,remainingGroupsCount:i,allowedList:d,setAllowedList:m,round:p}){se();const x=(g,h)=>{const j={...d};g?m({...j,[h]:!0}):(j==null||delete j[h],m(j))};return r?e.jsxs(S,{fullWidth:!0,announcement:s,children:[e.jsx(ts,{currentQuestion:n,answerGroup:r,players:a,allowUserAnswer:x,remainingGroupsCount:i}),e.jsx(R,{}),e.jsx(is,{user:o,answerGroup:r,onAddAnswer:l}),e.jsx(R,{}),e.jsx(os,{answerGroup:r,allAnswers:c,players:a,onAddAnswer:l,onNextAnswer:t,allowedList:d,remainingGroupsCount:i},r.answer)]}):e.jsxs(S,{fullWidth:!0,children:[e.jsx(u,{pt:"Pronto!",en:"All done!"}),e.jsx(R,{}),e.jsx(re,{round:p})]})}function us({state:s,players:n}){var m,p,x;const{step:r}=L(0),a=$(n,s),[o,c]=f.useState({}),l=Ge(),t=Xe(()=>c({})),i=s.answersList[0],d=e.jsx(k,{icon:e.jsx(Me,{}),title:e.jsx(u,{pt:"Respostas",en:"Answers"}),currentRound:(m=s==null?void 0:s.round)==null?void 0:m.current,duration:((p=s==null?void 0:s.round)==null?void 0:p.current)<3?20:void 0,type:"overlay",children:e.jsx(Je,{})});return e.jsx(U,{phase:s==null?void 0:s.phase,allowedPhase:v.MENTE_COLETIVA.COMPARE,children:e.jsx(I,{step:r,players:n,children:e.jsx(cs,{currentQuestion:s.currentQuestion,answerGroup:i,players:n,user:a,allAnswers:s.allAnswers,onAddAnswer:l,onNextAnswer:t,remainingGroupsCount:((x=s.answersList)==null?void 0:x.length)??0,allowedList:o,setAllowedList:c,round:s.round,announcement:d})})})}function ls({announcement:s,ranking:n,players:r,roundType:a,pastureChangeStr:o,round:c,pastureSize:l,announceSave:t=!1}){se();const[i,d]=f.useState(0),[m,p]=f.useState(0),[x,g]=f.useState(!1),h=f.useMemo(()=>JSON.parse(o),[o]),{timeLeft:j}=Be({duration:17,autoStart:!0});return f.useEffect(()=>{j===7&&d(1),j===5&&p(1),j===4&&t&&g(!0),j===1&&p(2)},[j]),e.jsxs(S,{fullWidth:!0,announcement:s,children:[e.jsx(P,{children:e.jsx(u,{pt:"Resultado",en:"Results"})}),i===0&&e.jsx(ce,{roundType:a}),e.jsxs(I,{step:i,players:r,children:[e.jsx(S,{children:e.jsx(Fe,{ranking:n,players:r,hideGainedPoints:!0,delay:1})},0),e.jsxs(S,{children:[x&&e.jsxs(E,{contained:!0,className:w("m-save-card",Z("zoomInDown")),children:[e.jsx(Y,{style:{color:"red"}})," ",e.jsx(u,{pt:`Vamos dar uma última chance para a pobre ovelhinha que
              ia morrer agora`,en:"Let's give one more chance to the poor sheep about to die. The last one!"})," ",e.jsx(Y,{style:{color:"red"}})]}),e.jsx(W,{players:h[m],pastureSize:l,roundType:i>0?a:void 0}),e.jsx(re,{round:c})]},1)]})]})}function ds({state:s,players:n}){var o;const{step:r}=L(0),a=e.jsx(k,{icon:e.jsx(Ie,{}),title:e.jsx(u,{pt:"Resultado",en:"And who moves is..."}),currentRound:(o=s==null?void 0:s.round)==null?void 0:o.current,duration:3,type:"overlay",children:e.jsx(E,{children:e.jsx(u,{pt:e.jsxs(e.Fragment,{children:["Agora podemos saber quem deve ser linchado porque não combina com o grupo!",e.jsx("br",{}),"Graças a Deus, mais espaço!"]}),en:e.jsxs(e.Fragment,{children:["Now we will know who can be moved because they don't match with the group!",e.jsx("br",{}),"Thank God, more room!"]})})})});return e.jsx(U,{phase:s==null?void 0:s.phase,allowedPhase:v.MENTE_COLETIVA.RESOLUTION,children:e.jsx(I,{step:r,players:n,children:e.jsx(ls,{announcement:a,ranking:s.ranking,players:n,pastureChangeStr:s.pastureChangeStr,roundType:s.roundType,announceSave:s==null?void 0:s.announceSave,round:s.round,pastureSize:s.pastureSize})})})}function ms({state:s,players:n}){return e.jsxs(De,{state:s,players:n,announcementIcon:e.jsx($e,{}),rateWidgetCustomText:e.jsx(u,{pt:"Sugira uma pergunta:",en:"Suggest a question:"}),children:[e.jsxs("div",{className:"m-game-over-in-memoriam",children:[e.jsx(O,{children:"In memoriam"}),e.jsx("div",{className:"m-sheep-rip",children:s.losers.map(r=>e.jsxs("div",{className:"m-sheep-rip__entry",children:[e.jsx(Q,{id:r.avatarId,width:80,sheepId:r.sheepId}),e.jsx("span",{className:"m-sheep-rip__name",children:r.name})]},"sheep-player-1"))})]}),e.jsx(Qe,{players:n,achievements:s.achievements,reference:Ve}),!!s.gallery&&e.jsxs(e.Fragment,{children:[e.jsx(O,{size:"x-small",level:3,children:e.jsx(u,{pt:"Melhores Respostas",en:"Best Answers"})}),e.jsx(M,{className:"gallery",wrap:!0,children:s.gallery.map(({question:r,answers:a})=>e.jsxs("div",{className:"gallery-entry",children:[e.jsxs("h4",{className:"gallery-entry__question",children:[r.prefix," ",r.number," ",r.suffix]}),a.map(({answer:o,playerIds:c})=>e.jsxs("div",{className:"gallery-entry__answer",children:[e.jsx("span",{children:o}),e.jsxs("span",{children:[c.length," ",e.jsx(u,{pt:"jogadores",en:"players"})]})]},`${r.id}-${o}`))]},r.id))})]})]})}function ps(s){if(s&&!s.phase)return je;switch(s.phase){case v.DEFAULT.LOBBY:return Ee;case v.DEFAULT.RULES:return Se;case v.DEFAULT.SETUP:return Ne;case v.MENTE_COLETIVA.QUESTION_SELECTION:return rs;case v.MENTE_COLETIVA.EVERYBODY_WRITES:return as;case v.MENTE_COLETIVA.COMPARE:return us;case v.MENTE_COLETIVA.RESOLUTION:return ds;case v.DEFAULT.GAME_OVER:return ms;default:return ge}}function Ir(){return e.jsx(we,{gameCollection:xe.MENTE_COLETIVA,getActiveComponent:ps})}export{Ir as default};
